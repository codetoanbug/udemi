(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vendors~ud-prosemirror"],{"./node_modules/orderedmap/index.js":function(e,t){function r(e){this.content=e}r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?undefined:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this;var o=i.find(e),s=i.content.slice();if(o==-1){s.push(n||e,t)}else{s[o+1]=t;if(n)s[o]=n}return new r(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();n.splice(t,2);return new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();n.push(e,t);return new r(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice();var s=i.find(e);o.splice(s==-1?o.length:s,0,t,n);return new r(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){e=r.from(e);if(!e.size)return this;return new r(e.content.concat(this.subtract(e).content))},append:function(e){e=r.from(e);if(!e.size)return this;return new r(this.subtract(e).content.concat(e.content))},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},get size(){return this.content.length>>1}};r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};e.exports=r},"./node_modules/prosemirror-commands/dist/commands.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/prosemirror-transform/dist/index.js");var i=r("./node_modules/prosemirror-model/dist/index.js");var o=r("./node_modules/prosemirror-state/dist/index.js");function s(e,t){if(e.selection.empty){return false}if(t){t(e.tr.deleteSelection().scrollIntoView())}return true}function a(e,t,r){var i=e.selection;var s=i.$cursor;if(!s||(r?!r.endOfTextblock("backward",e):s.parentOffset>0)){return false}var a=l(s);if(!a){var c=s.blockRange(),p=c&&n.liftTarget(c);if(p==null){return false}if(t){t(e.tr.lift(c,p).scrollIntoView())}return true}var u=a.nodeBefore;if(!u.type.spec.isolating&&C(e,a,t)){return true}if(s.parent.content.size==0&&(f(u,"end")||o.NodeSelection.isSelectable(u))){if(t){var h=e.tr.deleteRange(s.before(),s.after());h.setSelection(f(u,"end")?o.Selection.findFrom(h.doc.resolve(h.mapping.map(a.pos,-1)),-1):o.NodeSelection.create(h.doc,a.pos-u.nodeSize));t(h.scrollIntoView())}return true}if(u.isAtom&&a.depth==s.depth-1){if(t){t(e.tr.delete(a.pos-u.nodeSize,a.pos).scrollIntoView())}return true}return false}function f(e,t){for(;e;e=t=="start"?e.firstChild:e.lastChild){if(e.isTextblock){return true}}return false}function c(e,t,r){var n=e.selection;var i=n.$cursor;if(!i||(r?!r.endOfTextblock("backward",e):i.parentOffset>0)){return false}var s=l(i),a=s&&s.nodeBefore;if(!a||!o.NodeSelection.isSelectable(a)){return false}if(t){t(e.tr.setSelection(o.NodeSelection.create(e.doc,s.pos-a.nodeSize)).scrollIntoView())}return true}function l(e){if(!e.parent.type.spec.isolating){for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0){return e.doc.resolve(e.before(t+1))}if(e.node(t).type.spec.isolating){break}}}return null}function p(e,t,r){var n=e.selection;var i=n.$cursor;if(!i||(r?!r.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)){return false}var s=h(i);if(!s){return false}var a=s.nodeAfter;if(C(e,s,t)){return true}if(i.parent.content.size==0&&(f(a,"start")||o.NodeSelection.isSelectable(a))){if(t){var c=e.tr.deleteRange(i.before(),i.after());c.setSelection(f(a,"start")?o.Selection.findFrom(c.doc.resolve(c.mapping.map(s.pos)),1):o.NodeSelection.create(c.doc,c.mapping.map(s.pos)));t(c.scrollIntoView())}return true}if(a.isAtom&&s.depth==i.depth-1){if(t){t(e.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView())}return true}return false}function u(e,t,r){var n=e.selection;var i=n.$cursor;if(!i||(r?!r.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)){return false}var s=h(i),a=s&&s.nodeAfter;if(!a||!o.NodeSelection.isSelectable(a)){return false}if(t){t(e.tr.setSelection(o.NodeSelection.create(e.doc,s.pos)).scrollIntoView())}return true}function h(e){if(!e.parent.type.spec.isolating){for(var t=e.depth-1;t>=0;t--){var r=e.node(t);if(e.index(t)+1<r.childCount){return e.doc.resolve(e.after(t+1))}if(r.type.spec.isolating){break}}}return null}function d(e,t){var r=e.selection,i=r instanceof o.NodeSelection,s;if(i){if(r.node.isTextblock||!n.canJoin(e.doc,r.from)){return false}s=r.from}else{s=n.joinPoint(e.doc,r.from,-1);if(s==null){return false}}if(t){var a=e.tr.join(s);if(i){a.setSelection(o.NodeSelection.create(a.doc,s-e.doc.resolve(s).nodeBefore.nodeSize))}t(a.scrollIntoView())}return true}function v(e,t){var r=e.selection,i;if(r instanceof o.NodeSelection){if(r.node.isTextblock||!n.canJoin(e.doc,r.to)){return false}i=r.to}else{i=n.joinPoint(e.doc,r.to,1);if(i==null){return false}}if(t){t(e.tr.join(i).scrollIntoView())}return true}function m(e,t){var r=e.selection;var i=r.$from;var o=r.$to;var s=i.blockRange(o),a=s&&n.liftTarget(s);if(a==null){return false}if(t){t(e.tr.lift(s,a).scrollIntoView())}return true}function y(e,t){var r=e.selection;var n=r.$head;var i=r.$anchor;if(!n.parent.type.spec.code||!n.sameParent(i)){return false}if(t){t(e.tr.insertText("\n").scrollIntoView())}return true}function g(e,t){var r=e.selection;var n=r.$head;var i=r.$anchor;if(!n.parent.type.spec.code||!n.sameParent(i)){return false}var s=n.node(-1),a=n.indexAfter(-1),f=s.contentMatchAt(a).defaultType;if(!s.canReplaceWith(a,a,f)){return false}if(t){var c=n.after(),l=e.tr.replaceWith(c,c,f.createAndFill());l.setSelection(o.Selection.near(l.doc.resolve(c),1));t(l.scrollIntoView())}return true}function w(e,t){var r=e.selection;var n=r.$from;var i=r.$to;if(n.parent.inlineContent||i.parent.inlineContent){return false}var s=n.parent.contentMatchAt(i.indexAfter()).defaultType;if(!s||!s.isTextblock){return false}if(t){var a=(!n.parentOffset&&i.index()<i.parent.childCount?n:i).pos;var f=e.tr.insert(a,s.createAndFill());f.setSelection(o.TextSelection.create(f.doc,a+1));t(f.scrollIntoView())}return true}function S(e,t){var r=e.selection;var i=r.$cursor;if(!i||i.parent.content.size){return false}if(i.depth>1&&i.after()!=i.end(-1)){var o=i.before();if(n.canSplit(e.doc,o)){if(t){t(e.tr.split(o).scrollIntoView())}return true}}var s=i.blockRange(),a=s&&n.liftTarget(s);if(a==null){return false}if(t){t(e.tr.lift(s,a).scrollIntoView())}return true}function x(e,t){var r=e.selection;var s=r.$from;var a=r.$to;if(e.selection instanceof o.NodeSelection&&e.selection.node.isBlock){if(!s.parentOffset||!n.canSplit(e.doc,s.pos)){return false}if(t){t(e.tr.split(s.pos).scrollIntoView())}return true}if(!s.parent.isBlock){return false}if(t){var f=a.parentOffset==a.parent.content.size;var c=e.tr;if(e.selection instanceof o.TextSelection){c.deleteSelection()}var l=s.depth==0?null:s.node(-1).contentMatchAt(s.indexAfter(-1)).defaultType;var p=f&&l?[{type:l}]:null;var u=n.canSplit(c.doc,s.pos,1,p);if(!p&&!u&&n.canSplit(c.doc,c.mapping.map(s.pos),1,l&&[{type:l}])){p=[{type:l}];u=true}if(u){c.split(c.mapping.map(s.pos),1,p);if(!f&&!s.parentOffset&&s.parent.type!=l&&s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),i.Fragment.from(l.create(),s.parent))){c.setNodeMarkup(c.mapping.map(s.before()),l)}}t(c.scrollIntoView())}return true}function k(e,t){return x(e,t&&function(r){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){r.ensureMarks(n)}t(r)})}function b(e,t){var r=e.selection;var n=r.$from;var i=r.to;var s;var a=n.sharedDepth(i);if(a==0){return false}s=n.before(a);if(t){t(e.tr.setSelection(o.NodeSelection.create(e.doc,s)))}return true}function M(e,t){if(t){t(e.tr.setSelection(new o.AllSelection(e.doc)))}return true}function O(e,t,r){var i=t.nodeBefore,o=t.nodeAfter,s=t.index();if(!i||!o||!i.type.compatibleContent(o.type)){return false}if(!i.content.size&&t.parent.canReplace(s-1,s)){if(r){r(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView())}return true}if(!t.parent.canReplace(s,s+1)||!(o.isTextblock||n.canJoin(e.doc,t.pos))){return false}if(r){r(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView())}return true}function C(e,t,r){var s=t.nodeBefore,a=t.nodeAfter,f,c;if(s.type.spec.isolating||a.type.spec.isolating){return false}if(O(e,t,r)){return true}if(t.parent.canReplace(t.index(),t.index()+1)&&(f=(c=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&c.matchType(f[0]||a.type).validEnd){if(r){var l=t.pos+a.nodeSize,p=i.Fragment.empty;for(var u=f.length-1;u>=0;u--){p=i.Fragment.from(f[u].create(null,p))}p=i.Fragment.from(s.copy(p));var h=e.tr.step(new n.ReplaceAroundStep(t.pos-1,l,t.pos,l,new i.Slice(p,1,0),f.length,true));var d=l+2*f.length;if(n.canJoin(h.doc,d)){h.join(d)}r(h.scrollIntoView())}return true}var v=o.Selection.findFrom(t,1);var m=v&&v.$from.blockRange(v.$to),y=m&&n.liftTarget(m);if(y!=null&&y>=t.depth){if(r){r(e.tr.lift(m,y).scrollIntoView())}return true}return false}function T(e,t){return function(r,i){var o=r.selection;var s=o.$from;var a=o.$to;var f=s.blockRange(a),c=f&&n.findWrapping(f,e,t);if(!c){return false}if(i){i(r.tr.wrap(f,c).scrollIntoView())}return true}}function N(e,t){return function(r,n){var i=r.selection;var o=i.from;var s=i.to;var a=false;r.doc.nodesBetween(o,s,(function(n,i){if(a){return false}if(!n.isTextblock||n.hasMarkup(e,t)){return}if(n.type==e){a=true}else{var o=r.doc.resolve(i),s=o.index();a=o.parent.canReplaceWith(s,s+1,e)}}));if(!a){return false}if(n){n(r.tr.setBlockType(o,s,e,t).scrollIntoView())}return true}}function D(e,t,r){var n=function(n){var i=t[n];var o=i.$from;var s=i.$to;var a=o.depth==0?e.type.allowsMarkType(r):false;e.nodesBetween(o.pos,s.pos,(function(e){if(a){return false}a=e.inlineContent&&e.type.allowsMarkType(r)}));if(a){return{v:true}}};for(var i=0;i<t.length;i++){var o=n(i);if(o)return o.v}return false}function E(e,t){return function(r,n){var i=r.selection;var o=i.empty;var s=i.$cursor;var a=i.ranges;if(o&&!s||!D(r.doc,a,e)){return false}if(n){if(s){if(e.isInSet(r.storedMarks||s.marks())){n(r.tr.removeStoredMark(e))}else{n(r.tr.addStoredMark(e.create(t)))}}else{var f=false,c=r.tr;for(var l=0;!f&&l<a.length;l++){var p=a[l];var u=p.$from;var h=p.$to;f=r.doc.rangeHasMark(u.pos,h.pos,e)}for(var d=0;d<a.length;d++){var v=a[d];var m=v.$from;var y=v.$to;if(f){c.removeMark(m.pos,y.pos,e)}else{c.addMark(m.pos,y.pos,e.create(t))}}n(c.scrollIntoView())}}return true}}function A(e,t){return function(r){if(!r.isGeneric){return e(r)}var i=[];for(var o=0;o<r.mapping.maps.length;o++){var s=r.mapping.maps[o];for(var a=0;a<i.length;a++){i[a]=s.map(i[a])}s.forEach((function(e,t,r,n){return i.push(r,n)}))}var f=[];for(var c=0;c<i.length;c+=2){var l=i[c],p=i[c+1];var u=r.doc.resolve(l),h=u.sharedDepth(p),d=u.node(h);for(var v=u.indexAfter(h),m=u.after(h+1);m<=p;++v){var y=d.maybeChild(v);if(!y){break}if(v&&f.indexOf(m)==-1){var g=d.child(v-1);if(g.type==y.type&&t(g,y)){f.push(m)}}m+=y.nodeSize}}f.sort((function(e,t){return e-t}));for(var w=f.length-1;w>=0;w--){if(n.canJoin(r.doc,f[w])){r.join(f[w])}}e(r)}}function R(e,t){if(Array.isArray(t)){var r=t;t=function(e){return r.indexOf(e.type.name)>-1}}return function(r,n){return e(r,n&&A(n,t))}}function I(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];return function(t,r,n){for(var i=0;i<e.length;i++){if(e[i](t,r,n)){return true}}return false}}var z=I(s,a,c);var P=I(s,p,u);var F={Enter:I(y,w,S,x),"Mod-Enter":g,Backspace:z,"Mod-Backspace":z,Delete:P,"Mod-Delete":P,"Mod-a":M};var _={"Ctrl-h":F["Backspace"],"Alt-Backspace":F["Mod-Backspace"],"Ctrl-d":F["Delete"],"Ctrl-Alt-Backspace":F["Mod-Delete"],"Alt-Delete":F["Mod-Delete"],"Alt-d":F["Mod-Delete"]};for(var B in F){_[B]=F[B]}var $=typeof navigator!="undefined"?/Mac/.test(navigator.platform):typeof os!="undefined"?os.platform()=="darwin":false;var j=$?_:F;t.deleteSelection=s;t.joinBackward=a;t.selectNodeBackward=c;t.joinForward=p;t.selectNodeForward=u;t.joinUp=d;t.joinDown=v;t.lift=m;t.newlineInCode=y;t.exitCode=g;t.createParagraphNear=w;t.liftEmptyBlock=S;t.splitBlock=x;t.splitBlockKeepMarks=k;t.selectParentNode=b;t.selectAll=M;t.wrapIn=T;t.setBlockType=N;t.toggleMark=E;t.autoJoin=R;t.chainCommands=I;t.pcBaseKeymap=F;t.macBaseKeymap=_;t.baseKeymap=j},"./node_modules/prosemirror-history/dist/history.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var i=n(r("./node_modules/rope-sequence/dist/index.js"));var o=r("./node_modules/prosemirror-transform/dist/index.js");var s=r("./node_modules/prosemirror-state/dist/index.js");var a=500;var f=function e(t,r){this.items=t;this.eventCount=r};f.prototype.popEvent=function e(t,r){var n=this;if(this.eventCount==0){return null}var i=this.items.length;for(;;i--){var o=n.items.get(i-1);if(o.selection){--i;break}}var s,a;if(r){s=this.remapping(i,this.items.length);a=s.maps.length}var c=t.tr;var p,u;var h=[],d=[];this.items.forEach((function(e,t){if(!e.step){if(!s){s=n.remapping(i,t+1);a=s.maps.length}a--;d.push(e);return}if(s){d.push(new l(e.map));var r=e.step.map(s.slice(a)),o;if(r&&c.maybeStep(r).doc){o=c.mapping.maps[c.mapping.maps.length-1];h.push(new l(o,null,null,h.length+d.length))}a--;if(o){s.appendMap(o,a)}}else{c.maybeStep(e.step)}if(e.selection){p=s?e.selection.map(s.slice(a)):e.selection;u=new f(n.items.slice(0,i).append(d.reverse().concat(h)),n.eventCount-1);return false}}),this.items.length,0);return{remaining:u,transform:c,selection:p}};f.prototype.addTransform=function e(t,r,n,i){var o=[],s=this.eventCount;var a=this.items,p=!i&&a.length?a.get(a.length-1):null;for(var h=0;h<t.steps.length;h++){var d=t.steps[h].invert(t.docs[h]);var v=new l(t.mapping.maps[h],d,r),m=void 0;if(m=p&&p.merge(v)){v=m;if(h){o.pop()}else{a=a.slice(0,a.length-1)}}o.push(v);if(r){s++;r=null}if(!i){p=v}}var y=s-n.depth;if(y>u){a=c(a,y);s-=y}return new f(a.append(o),s)};f.prototype.remapping=function e(t,r){var n=[],i=[];this.items.forEach((function(e,r){if(e.mirrorOffset!=null){var o=r-e.mirrorOffset;if(o>=t){i.push(n.length-e.mirrorOffset,n.length)}}n.push(e.map)}),t,r);return new o.Mapping(n,i)};f.prototype.addMaps=function e(t){if(this.eventCount==0){return this}return new f(this.items.append(t.map((function(e){return new l(e)}))),this.eventCount)};f.prototype.rebased=function e(t,r){if(!this.eventCount){return this}var n=[],i=Math.max(0,this.items.length-r);var o=t.mapping;var s=t.steps.length;var c=this.eventCount;this.items.forEach((function(e){if(e.selection){c--}}),this.items.length-r);var p=r;this.items.forEach((function(e){var r=o.getMirror(--p);if(r==null){return}s=Math.min(s,r);var i=o.maps[r];if(e.step){var a=t.steps[r].invert(t.docs[r]);var f=e.selection&&e.selection.map(o.slice(p,r));if(f){c++}n.push(new l(i,a,f))}else{n.push(new l(i))}}),i);var u=[];for(var h=r;h<s;h++){u.push(new l(o.maps[h]))}var d=this.items.slice(0,i).append(u).append(n);var v=new f(d,c);if(v.emptyItemCount()>a){v=v.compress(this.items.length-n.length)}return v};f.prototype.emptyItemCount=function e(){var t=0;this.items.forEach((function(e){if(!e.step){t++}}));return t};f.prototype.compress=function e(t){if(t===void 0)t=this.items.length;var r=this.remapping(0,t),n=r.maps.length;var o=[],s=0;this.items.forEach((function(e,i){if(i>=t){o.push(e);if(e.selection){s++}}else if(e.step){var a=e.step.map(r.slice(n)),f=a&&a.getMap();n--;if(f){r.appendMap(f,n)}if(a){var c=e.selection&&e.selection.map(r.slice(n));if(c){s++}var p=new l(f.invert(),a,c),u,h=o.length-1;if(u=o.length&&o[h].merge(p)){o[h]=u}else{o.push(p)}}}else if(e.map){n--}}),this.items.length,0);return new f(i.from(o.reverse()),s)};f.empty=new f(i.empty,0);function c(e,t){var r;e.forEach((function(e,n){if(e.selection&&t--==0){r=n;return false}}));return e.slice(r)}var l=function e(t,r,n,i){this.map=t;this.step=r;this.selection=n;this.mirrorOffset=i};l.prototype.merge=function e(t){if(this.step&&t.step&&!t.selection){var r=t.step.merge(this.step);if(r){return new l(r.getMap().invert(),r,this.selection)}}};var p=function e(t,r,n,i){this.done=t;this.undone=r;this.prevMap=n;this.prevTime=i};var u=20;function h(e,t,r,n){var i=r.getMeta(S),o;if(i){return i}if(r.getMeta(x)){e=new p(e.done,e.undone,null,0)}var s=r.getMeta("appendedTransaction");if(r.steps.length==0){return e}else if((s||r).getMeta("addToHistory")!==false){var a=e.prevTime<(r.time||0)-n.newGroupDelay||!s&&!d(r,e.prevMap,e.done);return new p(e.done.addTransform(r,a?t.selection.getBookmark():null,n,g(t)),f.empty,r.mapping.maps[r.steps.length-1],r.time)}else if(o=r.getMeta("rebased")){return new p(e.done.rebased(r,o),e.undone.rebased(r,o),e.prevMap&&r.mapping.maps[r.steps.length-1],e.prevTime)}else{return new p(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),e.prevMap,e.prevTime)}}function d(e,t,r){if(!t){return false}var n=e.mapping.maps[0],i=false;if(!n){return true}n.forEach((function(e,n){r.items.forEach((function(r){if(r.step){t.forEach((function(t,r,o,s){if(e<=s&&n>=o){i=true}}));return false}else{e=r.map.invert().map(e,-1);n=r.map.invert().map(n,1)}}),r.items.length,0)}));return i}function v(e,t,r,n){var i=g(t),o=S.get(t).spec.config;var s=(n?e.undone:e.done).popEvent(t,i);if(!s){return}var a=s.selection.resolve(s.transform.doc);var f=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,i);var c=new p(n?f:s.remaining,n?s.remaining:f,null,0);r(s.transform.setSelection(a).setMeta(S,c).scrollIntoView())}var m=false;var y=null;function g(e){var t=e.plugins;if(y!=t){m=false;y=t;for(var r=0;r<t.length;r++){if(t[r].spec.historyPreserveItems){m=true;break}}}return m}function w(e){return e.setMeta(x,true)}var S=new s.PluginKey("history");var x=new s.PluginKey("closeHistory");function k(e){e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500};return new s.Plugin({key:S,state:{init:function e(){return new p(f.empty,f.empty,null,0)},apply:function t(r,n,i){return h(n,i,r,e)}},config:e})}function b(e,t){var r=S.getState(e);if(!r||r.done.eventCount==0){return false}if(t){v(r,e,t,false)}return true}function M(e,t){var r=S.getState(e);if(!r||r.undone.eventCount==0){return false}if(t){v(r,e,t,true)}return true}function O(e){var t=S.getState(e);return t?t.done.eventCount:0}function C(e){var t=S.getState(e);return t?t.undone.eventCount:0}t.HistoryState=p;t.closeHistory=w;t.history=k;t.undo=b;t.redo=M;t.undoDepth=O;t.redoDepth=C},"./node_modules/prosemirror-keymap/dist/keymap.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var i=n(r("./node_modules/w3c-keyname/index.js"));var o=r("./node_modules/prosemirror-state/dist/index.js");var s=typeof navigator!="undefined"?/Mac/.test(navigator.platform):false;function a(e){var t=e.split(/-(?!$)/),r=t[t.length-1];if(r=="Space"){r=" "}var n,i,o,a;for(var f=0;f<t.length-1;f++){var c=t[f];if(/^(cmd|meta|m)$/i.test(c)){a=true}else if(/^a(lt)?$/i.test(c)){n=true}else if(/^(c|ctrl|control)$/i.test(c)){i=true}else if(/^s(hift)?$/i.test(c)){o=true}else if(/^mod$/i.test(c)){if(s){a=true}else{i=true}}else{throw new Error("Unrecognized modifier name: "+c)}}if(n){r="Alt-"+r}if(i){r="Ctrl-"+r}if(a){r="Meta-"+r}if(o){r="Shift-"+r}return r}function f(e){var t=Object.create(null);for(var r in e){t[a(r)]=e[r]}return t}function c(e,t,r){if(t.altKey){e="Alt-"+e}if(t.ctrlKey){e="Ctrl-"+e}if(t.metaKey){e="Meta-"+e}if(r!==false&&t.shiftKey){e="Shift-"+e}return e}function l(e){return new o.Plugin({props:{handleKeyDown:p(e)}})}function p(e){var t=f(e);return function(e,r){var n=i(r),o=n.length==1&&n!=" ",s;var a=t[c(n,r,!o)];if(a&&a(e.state,e.dispatch,e)){return true}if(o&&(r.shiftKey||r.altKey||r.metaKey)&&(s=i.base[r.keyCode])&&s!=n){var f=t[c(s,r,true)];if(f&&f(e.state,e.dispatch,e)){return true}}return false}}t.keymap=l;t.keydownHandler=p},"./node_modules/prosemirror-model/dist/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});function n(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var i=n(r("./node_modules/orderedmap/index.js"));function o(e,t,r){for(var n=0;;n++){if(n==e.childCount||n==t.childCount){return e.childCount==t.childCount?null:r}var i=e.child(n),s=t.child(n);if(i==s){r+=i.nodeSize;continue}if(!i.sameMarkup(s)){return r}if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++){r++}return r}if(i.content.size||s.content.size){var f=o(i.content,s.content,r+1);if(f!=null){return f}}r+=i.nodeSize}}function s(e,t,r,n){for(var i=e.childCount,o=t.childCount;;){if(i==0||o==0){return i==o?null:{a:r,b:n}}var a=e.child(--i),f=t.child(--o),c=a.nodeSize;if(a==f){r-=c;n-=c;continue}if(!a.sameMarkup(f)){return{a:r,b:n}}if(a.isText&&a.text!=f.text){var l=0,p=Math.min(a.text.length,f.text.length);while(l<p&&a.text[a.text.length-l-1]==f.text[f.text.length-l-1]){l++;r--;n--}return{a:r,b:n}}if(a.content.size||f.content.size){var u=s(a.content,f.content,r-1,n-1);if(u){return u}}r-=c;n-=c}}var a=function e(t,r){var n=this;this.content=t;this.size=r||0;if(r==null){for(var i=0;i<t.length;i++){n.size+=t[i].nodeSize}}};var f={firstChild:{},lastChild:{},childCount:{}};a.prototype.nodesBetween=function e(t,r,n,i,o){var s=this;if(i===void 0)i=0;for(var a=0,f=0;f<r;a++){var c=s.content[a],l=f+c.nodeSize;if(l>t&&n(c,i+f,o,a)!==false&&c.content.size){var p=f+1;c.nodesBetween(Math.max(0,t-p),Math.min(c.content.size,r-p),n,i+p)}f=l}};a.prototype.descendants=function e(t){this.nodesBetween(0,this.size,t)};a.prototype.textBetween=function e(t,r,n,i){var o="",s=true;this.nodesBetween(t,r,(function(e,a){if(e.isText){o+=e.text.slice(Math.max(t,a)-a,r-a);s=!n}else if(e.isLeaf&&i){o+=i;s=!n}else if(!s&&e.isBlock){o+=n;s=true}}),0);return o};a.prototype.append=function e(t){if(!t.size){return this}if(!this.size){return t}var r=this.lastChild,n=t.firstChild,i=this.content.slice(),o=0;if(r.isText&&r.sameMarkup(n)){i[i.length-1]=r.withText(r.text+n.text);o=1}for(;o<t.content.length;o++){i.push(t.content[o])}return new a(i,this.size+t.size)};a.prototype.cut=function e(t,r){var n=this;if(r==null){r=this.size}if(t==0&&r==this.size){return this}var i=[],o=0;if(r>t){for(var s=0,f=0;f<r;s++){var c=n.content[s],l=f+c.nodeSize;if(l>t){if(f<t||l>r){if(c.isText){c=c.cut(Math.max(0,t-f),Math.min(c.text.length,r-f))}else{c=c.cut(Math.max(0,t-f-1),Math.min(c.content.size,r-f-1))}}i.push(c);o+=c.nodeSize}f=l}}return new a(i,o)};a.prototype.cutByIndex=function e(t,r){if(t==r){return a.empty}if(t==0&&r==this.content.length){return this}return new a(this.content.slice(t,r))};a.prototype.replaceChild=function e(t,r){var n=this.content[t];if(n==r){return this}var i=this.content.slice();var o=this.size+r.nodeSize-n.nodeSize;i[t]=r;return new a(i,o)};a.prototype.addToStart=function e(t){return new a([t].concat(this.content),this.size+t.nodeSize)};a.prototype.addToEnd=function e(t){return new a(this.content.concat(t),this.size+t.nodeSize)};a.prototype.eq=function e(t){var r=this;if(this.content.length!=t.content.length){return false}for(var n=0;n<this.content.length;n++){if(!r.content[n].eq(t.content[n])){return false}}return true};f.firstChild.get=function(){return this.content.length?this.content[0]:null};f.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null};f.childCount.get=function(){return this.content.length};a.prototype.child=function e(t){var r=this.content[t];if(!r){throw new RangeError("Index "+t+" out of range for "+this)}return r};a.prototype.maybeChild=function e(t){return this.content[t]};a.prototype.forEach=function e(t){var r=this;for(var n=0,i=0;n<this.content.length;n++){var o=r.content[n];t(o,i,n);i+=o.nodeSize}};a.prototype.findDiffStart=function e(t,r){if(r===void 0)r=0;return o(this,t,r)};a.prototype.findDiffEnd=function e(t,r,n){if(r===void 0)r=this.size;if(n===void 0)n=t.size;return s(this,t,r,n)};a.prototype.findIndex=function e(t,r){var n=this;if(r===void 0)r=-1;if(t==0){return l(0,t)}if(t==this.size){return l(this.content.length,t)}if(t>this.size||t<0){throw new RangeError("Position "+t+" outside of fragment ("+this+")")}for(var i=0,o=0;;i++){var s=n.child(i),a=o+s.nodeSize;if(a>=t){if(a==t||r>0){return l(i+1,a)}return l(i,o)}o=a}};a.prototype.toString=function e(){return"<"+this.toStringInner()+">"};a.prototype.toStringInner=function e(){return this.content.join(", ")};a.prototype.toJSON=function e(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null};a.fromJSON=function e(t,r){if(!r){return a.empty}if(!Array.isArray(r)){throw new RangeError("Invalid input for Fragment.fromJSON")}return new a(r.map(t.nodeFromJSON))};a.fromArray=function e(t){if(!t.length){return a.empty}var r,n=0;for(var i=0;i<t.length;i++){var o=t[i];n+=o.nodeSize;if(i&&o.isText&&t[i-1].sameMarkup(o)){if(!r){r=t.slice(0,i)}r[r.length-1]=o.withText(r[r.length-1].text+o.text)}else if(r){r.push(o)}}return new a(r||t,n)};a.from=function e(t){if(!t){return a.empty}if(t instanceof a){return t}if(Array.isArray(t)){return this.fromArray(t)}return new a([t],t.nodeSize)};Object.defineProperties(a.prototype,f);var c={index:0,offset:0};function l(e,t){c.index=e;c.offset=t;return c}a.empty=new a([],0);function p(e,t){if(e===t){return true}if(!(e&&typeof e=="object")||!(t&&typeof t=="object")){return false}var r=Array.isArray(e);if(Array.isArray(t)!=r){return false}if(r){if(e.length!=t.length){return false}for(var n=0;n<e.length;n++){if(!p(e[n],t[n])){return false}}}else{for(var i in e){if(!(i in t)||!p(e[i],t[i])){return false}}for(var o in t){if(!(o in e)){return false}}}return true}var u=function e(t,r){this.type=t;this.attrs=r};u.prototype.addToSet=function e(t){var r=this;var n,i=false;for(var o=0;o<t.length;o++){var s=t[o];if(r.eq(s)){return t}if(r.type.excludes(s.type)){if(!n){n=t.slice(0,o)}}else if(s.type.excludes(r.type)){return t}else{if(!i&&s.type.rank>r.type.rank){if(!n){n=t.slice(0,o)}n.push(r);i=true}if(n){n.push(s)}}}if(!n){n=t.slice()}if(!i){n.push(this)}return n};u.prototype.removeFromSet=function e(t){var r=this;for(var n=0;n<t.length;n++){if(r.eq(t[n])){return t.slice(0,n).concat(t.slice(n+1))}}return t};u.prototype.isInSet=function e(t){var r=this;for(var n=0;n<t.length;n++){if(r.eq(t[n])){return true}}return false};u.prototype.eq=function e(t){return this==t||this.type==t.type&&p(this.attrs,t.attrs)};u.prototype.toJSON=function e(){var t=this;var r={type:this.type.name};for(var n in t.attrs){r.attrs=t.attrs;break}return r};u.fromJSON=function e(t,r){if(!r){throw new RangeError("Invalid input for Mark.fromJSON")}var n=t.marks[r.type];if(!n){throw new RangeError("There is no mark type "+r.type+" in this schema")}return n.create(r.attrs)};u.sameSet=function e(t,r){if(t==r){return true}if(t.length!=r.length){return false}for(var n=0;n<t.length;n++){if(!t[n].eq(r[n])){return false}}return true};u.setFrom=function e(t){if(!t||t.length==0){return u.none}if(t instanceof u){return[t]}var r=t.slice();r.sort((function(e,t){return e.type.rank-t.type.rank}));return r};u.none=[];function h(e){var t=Error.call(this,e);t.__proto__=h.prototype;return t}h.prototype=Object.create(Error.prototype);h.prototype.constructor=h;h.prototype.name="ReplaceError";var d=function e(t,r,n){this.content=t;this.openStart=r;this.openEnd=n};var v={size:{}};v.size.get=function(){return this.content.size-this.openStart-this.openEnd};d.prototype.insertAt=function e(t,r){var n=y(this.content,t+this.openStart,r,null);return n&&new d(n,this.openStart,this.openEnd)};d.prototype.removeBetween=function e(t,r){return new d(m(this.content,t+this.openStart,r+this.openStart),this.openStart,this.openEnd)};d.prototype.eq=function e(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd};d.prototype.toString=function e(){return this.content+"("+this.openStart+","+this.openEnd+")"};d.prototype.toJSON=function e(){if(!this.content.size){return null}var t={content:this.content.toJSON()};if(this.openStart>0){t.openStart=this.openStart}if(this.openEnd>0){t.openEnd=this.openEnd}return t};d.fromJSON=function e(t,r){if(!r){return d.empty}var n=r.openStart||0,i=r.openEnd||0;if(typeof n!="number"||typeof i!="number"){throw new RangeError("Invalid input for Slice.fromJSON")}return new d(a.fromJSON(t,r.content),r.openStart||0,r.openEnd||0)};d.maxOpen=function e(t,r){if(r===void 0)r=true;var n=0,i=0;for(var o=t.firstChild;o&&!o.isLeaf&&(r||!o.type.spec.isolating);o=o.firstChild){n++}for(var s=t.lastChild;s&&!s.isLeaf&&(r||!s.type.spec.isolating);s=s.lastChild){i++}return new d(t,n,i)};Object.defineProperties(d.prototype,v);function m(e,t,r){var n=e.findIndex(t);var i=n.index;var o=n.offset;var s=e.maybeChild(i);var a=e.findIndex(r);var f=a.index;var c=a.offset;if(o==t||s.isText){if(c!=r&&!e.child(f).isText){throw new RangeError("Removing non-flat range")}return e.cut(0,t).append(e.cut(r))}if(i!=f){throw new RangeError("Removing non-flat range")}return e.replaceChild(i,s.copy(m(s.content,t-o-1,r-o-1)))}function y(e,t,r,n){var i=e.findIndex(t);var o=i.index;var s=i.offset;var a=e.maybeChild(o);if(s==t||a.isText){if(n&&!n.canReplace(o,o,r)){return null}return e.cut(0,t).append(r).append(e.cut(t))}var f=y(a.content,t-s-1,r);return f&&e.replaceChild(o,a.copy(f))}d.empty=new d(a.empty,0,0);function g(e,t,r){if(r.openStart>e.depth){throw new h("Inserted content deeper than insertion position")}if(e.depth-r.openStart!=t.depth-r.openEnd){throw new h("Inconsistent open depths")}return w(e,t,r,0)}function w(e,t,r,n){var i=e.index(n),o=e.node(n);if(i==t.index(n)&&n<e.depth-r.openStart){var s=w(e,t,r,n+1);return o.copy(o.content.replaceChild(i,s))}else if(!r.content.size){return M(o,C(e,t,n))}else if(!r.openStart&&!r.openEnd&&e.depth==n&&t.depth==n){var a=e.parent,f=a.content;return M(a,f.cut(0,e.parentOffset).append(r.content).append(f.cut(t.parentOffset)))}else{var c=T(r,e);var l=c.start;var p=c.end;return M(o,O(e,l,p,t,n))}}function S(e,t){if(!t.type.compatibleContent(e.type)){throw new h("Cannot join "+t.type.name+" onto "+e.type.name)}}function x(e,t,r){var n=e.node(r);S(n,t.node(r));return n}function k(e,t){var r=t.length-1;if(r>=0&&e.isText&&e.sameMarkup(t[r])){t[r]=e.withText(t[r].text+e.text)}else{t.push(e)}}function b(e,t,r,n){var i=(t||e).node(r);var o=0,s=t?t.index(r):i.childCount;if(e){o=e.index(r);if(e.depth>r){o++}else if(e.textOffset){k(e.nodeAfter,n);o++}}for(var a=o;a<s;a++){k(i.child(a),n)}if(t&&t.depth==r&&t.textOffset){k(t.nodeBefore,n)}}function M(e,t){if(!e.type.validContent(t)){throw new h("Invalid content for node "+e.type.name)}return e.copy(t)}function O(e,t,r,n,i){var o=e.depth>i&&x(e,t,i+1);var s=n.depth>i&&x(r,n,i+1);var f=[];b(null,e,i,f);if(o&&s&&t.index(i)==r.index(i)){S(o,s);k(M(o,O(e,t,r,n,i+1)),f)}else{if(o){k(M(o,C(e,t,i+1)),f)}b(t,r,i,f);if(s){k(M(s,C(r,n,i+1)),f)}}b(n,null,i,f);return new a(f)}function C(e,t,r){var n=[];b(null,e,r,n);if(e.depth>r){var i=x(e,t,r+1);k(M(i,C(e,t,r+1)),n)}b(t,null,r,n);return new a(n)}function T(e,t){var r=t.depth-e.openStart,n=t.node(r);var i=n.copy(e.content);for(var o=r-1;o>=0;o--){i=t.node(o).copy(a.from(i))}return{start:i.resolveNoCache(e.openStart+r),end:i.resolveNoCache(i.content.size-e.openEnd-r)}}var N=function e(t,r,n){this.pos=t;this.path=r;this.depth=r.length/3-1;this.parentOffset=n};var D={parent:{},doc:{},textOffset:{},nodeAfter:{},nodeBefore:{}};N.prototype.resolveDepth=function e(t){if(t==null){return this.depth}if(t<0){return this.depth+t}return t};D.parent.get=function(){return this.node(this.depth)};D.doc.get=function(){return this.node(0)};N.prototype.node=function e(t){return this.path[this.resolveDepth(t)*3]};N.prototype.index=function e(t){return this.path[this.resolveDepth(t)*3+1]};N.prototype.indexAfter=function e(t){t=this.resolveDepth(t);return this.index(t)+(t==this.depth&&!this.textOffset?0:1)};N.prototype.start=function e(t){t=this.resolveDepth(t);return t==0?0:this.path[t*3-1]+1};N.prototype.end=function e(t){t=this.resolveDepth(t);return this.start(t)+this.node(t).content.size};N.prototype.before=function e(t){t=this.resolveDepth(t);if(!t){throw new RangeError("There is no position before the top-level node")}return t==this.depth+1?this.pos:this.path[t*3-1]};N.prototype.after=function e(t){t=this.resolveDepth(t);if(!t){throw new RangeError("There is no position after the top-level node")}return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize};D.textOffset.get=function(){return this.pos-this.path[this.path.length-1]};D.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount){return null}var r=this.pos-this.path[this.path.length-1],n=e.child(t);return r?e.child(t).cut(r):n};D.nodeBefore.get=function(){var e=this.index(this.depth);var t=this.pos-this.path[this.path.length-1];if(t){return this.parent.child(e).cut(0,t)}return e==0?null:this.parent.child(e-1)};N.prototype.marks=function e(){var t=this.parent,r=this.index();if(t.content.size==0){return u.none}if(this.textOffset){return t.child(r).marks}var n=t.maybeChild(r-1),i=t.maybeChild(r);if(!n){var o=n;n=i;i=o}var e=n.marks;for(var s=0;s<e.length;s++){if(e[s].type.spec.inclusive===false&&(!i||!e[s].isInSet(i.marks))){e=e[s--].removeFromSet(e)}}return e};N.prototype.marksAcross=function e(t){var r=this.parent.maybeChild(this.index());if(!r||!r.isInline){return null}var n=r.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<n.length;o++){if(n[o].type.spec.inclusive===false&&(!i||!n[o].isInSet(i.marks))){n=n[o--].removeFromSet(n)}}return n};N.prototype.sharedDepth=function e(t){var r=this;for(var n=this.depth;n>0;n--){if(r.start(n)<=t&&r.end(n)>=t){return n}}return 0};N.prototype.blockRange=function e(t,r){var n=this;if(t===void 0)t=this;if(t.pos<this.pos){return t.blockRange(this)}for(var i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--){if(t.pos<=n.end(i)&&(!r||r(n.node(i)))){return new I(n,t,i)}}};N.prototype.sameParent=function e(t){return this.pos-this.parentOffset==t.pos-t.parentOffset};N.prototype.max=function e(t){return t.pos>this.pos?t:this};N.prototype.min=function e(t){return t.pos<this.pos?t:this};N.prototype.toString=function e(){var t=this;var r="";for(var n=1;n<=this.depth;n++){r+=(r?"/":"")+t.node(n).type.name+"_"+t.index(n-1)}return r+":"+this.parentOffset};N.resolve=function e(t,r){if(!(r>=0&&r<=t.content.size)){throw new RangeError("Position "+r+" out of range")}var n=[];var i=0,o=r;for(var s=t;;){var a=s.content.findIndex(o);var f=a.index;var c=a.offset;var l=o-c;n.push(s,f,i+c);if(!l){break}s=s.child(f);if(s.isText){break}o=l-1;i+=c+1}return new N(r,n,o)};N.resolveCached=function e(t,r){for(var n=0;n<E.length;n++){var i=E[n];if(i.pos==r&&i.doc==t){return i}}var o=E[A]=N.resolve(t,r);A=(A+1)%R;return o};Object.defineProperties(N.prototype,D);var E=[];var A=0;var R=12;var I=function e(t,r,n){this.$from=t;this.$to=r;this.depth=n};var z={start:{},end:{},parent:{},startIndex:{},endIndex:{}};z.start.get=function(){return this.$from.before(this.depth+1)};z.end.get=function(){return this.$to.after(this.depth+1)};z.parent.get=function(){return this.$from.node(this.depth)};z.startIndex.get=function(){return this.$from.index(this.depth)};z.endIndex.get=function(){return this.$to.indexAfter(this.depth)};Object.defineProperties(I.prototype,z);var P=Object.create(null);var F=function e(t,r,n,i){this.type=t;this.attrs=r;this.content=n||a.empty;this.marks=i||u.none};var _={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},inlineContent:{},isInline:{},isText:{},isLeaf:{},isAtom:{}};_.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size};_.childCount.get=function(){return this.content.childCount};F.prototype.child=function e(t){return this.content.child(t)};F.prototype.maybeChild=function e(t){return this.content.maybeChild(t)};F.prototype.forEach=function e(t){this.content.forEach(t)};F.prototype.nodesBetween=function e(t,r,n,i){if(i===void 0)i=0;this.content.nodesBetween(t,r,n,i,this)};F.prototype.descendants=function e(t){this.nodesBetween(0,this.content.size,t)};_.textContent.get=function(){return this.textBetween(0,this.content.size,"")};F.prototype.textBetween=function e(t,r,n,i){return this.content.textBetween(t,r,n,i)};_.firstChild.get=function(){return this.content.firstChild};_.lastChild.get=function(){return this.content.lastChild};F.prototype.eq=function e(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)};F.prototype.sameMarkup=function e(t){return this.hasMarkup(t.type,t.attrs,t.marks)};F.prototype.hasMarkup=function e(t,r,n){return this.type==t&&p(this.attrs,r||t.defaultAttrs||P)&&u.sameSet(this.marks,n||u.none)};F.prototype.copy=function e(t){if(t===void 0)t=null;if(t==this.content){return this}return new this.constructor(this.type,this.attrs,t,this.marks)};F.prototype.mark=function e(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)};F.prototype.cut=function e(t,r){if(t==0&&r==this.content.size){return this}return this.copy(this.content.cut(t,r))};F.prototype.slice=function e(t,r,n){if(r===void 0)r=this.content.size;if(n===void 0)n=false;if(t==r){return d.empty}var i=this.resolve(t),o=this.resolve(r);var s=n?0:i.sharedDepth(r);var a=i.start(s),f=i.node(s);var c=f.content.cut(i.pos-a,o.pos-a);return new d(c,i.depth-s,o.depth-s)};F.prototype.replace=function e(t,r,n){return g(this.resolve(t),this.resolve(r),n)};F.prototype.nodeAt=function e(t){for(var r=this;;){var n=r.content.findIndex(t);var i=n.index;var o=n.offset;r=r.maybeChild(i);if(!r){return null}if(o==t||r.isText){return r}t-=o+1}};F.prototype.childAfter=function e(t){var r=this.content.findIndex(t);var n=r.index;var i=r.offset;return{node:this.content.maybeChild(n),index:n,offset:i}};F.prototype.childBefore=function e(t){if(t==0){return{node:null,index:0,offset:0}}var r=this.content.findIndex(t);var n=r.index;var i=r.offset;if(i<t){return{node:this.content.child(n),index:n,offset:i}}var o=this.content.child(n-1);return{node:o,index:n-1,offset:i-o.nodeSize}};F.prototype.resolve=function e(t){return N.resolveCached(this,t)};F.prototype.resolveNoCache=function e(t){return N.resolve(this,t)};F.prototype.rangeHasMark=function e(t,r,n){var i=false;if(r>t){this.nodesBetween(t,r,(function(e){if(n.isInSet(e.marks)){i=true}return!i}))}return i};_.isBlock.get=function(){return this.type.isBlock};_.isTextblock.get=function(){return this.type.isTextblock};_.inlineContent.get=function(){return this.type.inlineContent};_.isInline.get=function(){return this.type.isInline};_.isText.get=function(){return this.type.isText};_.isLeaf.get=function(){return this.type.isLeaf};_.isAtom.get=function(){return this.type.isAtom};F.prototype.toString=function e(){if(this.type.spec.toDebugString){return this.type.spec.toDebugString(this)}var t=this.type.name;if(this.content.size){t+="("+this.content.toStringInner()+")"}return $(this.marks,t)};F.prototype.contentMatchAt=function e(t){var r=this.type.contentMatch.matchFragment(this.content,0,t);if(!r){throw new Error("Called contentMatchAt on a node with invalid content")}return r};F.prototype.canReplace=function e(t,r,n,i,o){var s=this;if(n===void 0)n=a.empty;if(i===void 0)i=0;if(o===void 0)o=n.childCount;var f=this.contentMatchAt(t).matchFragment(n,i,o);var c=f&&f.matchFragment(this.content,r);if(!c||!c.validEnd){return false}for(var l=i;l<o;l++){if(!s.type.allowsMarks(n.child(l).marks)){return false}}return true};F.prototype.canReplaceWith=function e(t,r,n,i){if(i&&!this.type.allowsMarks(i)){return false}var o=this.contentMatchAt(t).matchType(n);var s=o&&o.matchFragment(this.content,r);return s?s.validEnd:false};F.prototype.canAppend=function e(t){if(t.content.size){return this.canReplace(this.childCount,this.childCount,t.content)}else{return this.type.compatibleContent(t.type)}};F.prototype.defaultContentType=function e(t){return this.contentMatchAt(t).defaultType};F.prototype.check=function e(){if(!this.type.validContent(this.content)){throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50))}this.content.forEach((function(e){return e.check()}))};F.prototype.toJSON=function e(){var t=this;var r={type:this.type.name};for(var n in t.attrs){r.attrs=t.attrs;break}if(this.content.size){r.content=this.content.toJSON()}if(this.marks.length){r.marks=this.marks.map((function(e){return e.toJSON()}))}return r};F.fromJSON=function e(t,r){if(!r){throw new RangeError("Invalid input for Node.fromJSON")}var n=null;if(r.marks){if(!Array.isArray(r.marks)){throw new RangeError("Invalid mark data for Node.fromJSON")}n=r.marks.map(t.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string"){throw new RangeError("Invalid text node in JSON")}return t.text(r.text,n)}var i=a.fromJSON(t,r.content);return t.nodeType(r.type).create(r.attrs,i,n)};Object.defineProperties(F.prototype,_);var B=function(e){function t(t,r,n,i){e.call(this,t,r,null,i);if(!n){throw new RangeError("Empty text nodes are not allowed")}this.text=n}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={textContent:{},nodeSize:{}};t.prototype.toString=function e(){if(this.type.spec.toDebugString){return this.type.spec.toDebugString(this)}return $(this.marks,JSON.stringify(this.text))};r.textContent.get=function(){return this.text};t.prototype.textBetween=function e(t,r){return this.text.slice(t,r)};r.nodeSize.get=function(){return this.text.length};t.prototype.mark=function e(r){return r==this.marks?this:new t(this.type,this.attrs,this.text,r)};t.prototype.withText=function e(r){if(r==this.text){return this}return new t(this.type,this.attrs,r,this.marks)};t.prototype.cut=function e(t,r){if(t===void 0)t=0;if(r===void 0)r=this.text.length;if(t==0&&r==this.text.length){return this}return this.withText(this.text.slice(t,r))};t.prototype.eq=function e(t){return this.sameMarkup(t)&&this.text==t.text};t.prototype.toJSON=function t(){var r=e.prototype.toJSON.call(this);r.text=this.text;return r};Object.defineProperties(t.prototype,r);return t}(F);function $(e,t){for(var r=e.length-1;r>=0;r--){t=e[r].type.name+"("+t+")"}return t}var j=function e(t){this.validEnd=t;this.next=[];this.wrapCache=[]};var V={inlineContent:{},defaultType:{},edgeCount:{}};j.parse=function e(t,r){var n=new J(t,r);if(n.next==null){return j.empty}var i=W(n);if(n.next){n.err("Unexpected trailing text")}var o=ee(Y(i));te(o,n);return o};j.prototype.matchType=function e(t){var r=this;for(var n=0;n<this.next.length;n+=2){if(r.next[n]==t){return r.next[n+1]}}return null};j.prototype.matchFragment=function e(t,r,n){if(r===void 0)r=0;if(n===void 0)n=t.childCount;var i=this;for(var o=r;i&&o<n;o++){i=i.matchType(t.child(o).type)}return i};V.inlineContent.get=function(){var e=this.next[0];return e?e.isInline:false};V.defaultType.get=function(){var e=this;for(var t=0;t<this.next.length;t+=2){var r=e.next[t];if(!(r.isText||r.hasRequiredAttrs())){return r}}};j.prototype.compatible=function e(t){var r=this;for(var n=0;n<this.next.length;n+=2){for(var i=0;i<t.next.length;i+=2){if(r.next[n]==t.next[i]){return true}}}return false};j.prototype.fillBefore=function e(t,r,n){if(r===void 0)r=false;if(n===void 0)n=0;var i=[this];function o(e,s){var f=e.matchFragment(t,n);if(f&&(!r||f.validEnd)){return a.from(s.map((function(e){return e.createAndFill()})))}for(var c=0;c<e.next.length;c+=2){var l=e.next[c],p=e.next[c+1];if(!(l.isText||l.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);var u=o(p,s.concat(l));if(u){return u}}}}return o(this,[])};j.prototype.findWrapping=function e(t){var r=this;for(var n=0;n<this.wrapCache.length;n+=2){if(r.wrapCache[n]==t){return r.wrapCache[n+1]}}var i=this.computeWrapping(t);this.wrapCache.push(t,i);return i};j.prototype.computeWrapping=function e(t){var r=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var i=n.shift(),o=i.match;if(o.matchType(t)){var s=[];for(var a=i;a.type;a=a.via){s.push(a.type)}return s.reverse()}for(var f=0;f<o.next.length;f+=2){var c=o.next[f];if(!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in r)&&(!i.type||o.next[f+1].validEnd)){n.push({match:c.contentMatch,type:c,via:i});r[c.name]=true}}}};V.edgeCount.get=function(){return this.next.length>>1};j.prototype.edge=function e(t){var r=t<<1;if(r>this.next.length){throw new RangeError("There's no "+t+"th edge in this content match")}return{type:this.next[r],next:this.next[r+1]}};j.prototype.toString=function e(){var t=[];function r(e){t.push(e);for(var n=1;n<e.next.length;n+=2){if(t.indexOf(e.next[n])==-1){r(e.next[n])}}}r(this);return t.map((function(e,r){var n=r+(e.validEnd?"*":" ")+" ";for(var i=0;i<e.next.length;i+=2){n+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1])}return n})).join("\n")};Object.defineProperties(j.prototype,V);j.empty=new j(true);var J=function e(t,r){this.string=t;this.nodeTypes=r;this.inline=null;this.pos=0;this.tokens=t.split(/\s*(?=\b|\W|$)/);if(this.tokens[this.tokens.length-1]==""){this.tokens.pop()}if(this.tokens[0]==""){this.tokens.unshift()}};var L={next:{}};L.next.get=function(){return this.tokens[this.pos]};J.prototype.eat=function e(t){return this.next==t&&(this.pos++||true)};J.prototype.err=function e(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")};Object.defineProperties(J.prototype,L);function W(e){var t=[];do{t.push(q(e))}while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function q(e){var t=[];do{t.push(K(e))}while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function K(e){var t=X(e);for(;;){if(e.eat("+")){t={type:"plus",expr:t}}else if(e.eat("*")){t={type:"star",expr:t}}else if(e.eat("?")){t={type:"opt",expr:t}}else if(e.eat("{")){t=U(e,t)}else{break}}return t}function H(e){if(/\D/.test(e.next)){e.err("Expected number, got '"+e.next+"'")}var t=Number(e.next);e.pos++;return t}function U(e,t){var r=H(e),n=r;if(e.eat(",")){if(e.next!="}"){n=H(e)}else{n=-1}}if(!e.eat("}")){e.err("Unclosed braced range")}return{type:"range",min:r,max:n,expr:t}}function G(e,t){var r=e.nodeTypes,n=r[t];if(n){return[n]}var i=[];for(var o in r){var s=r[o];if(s.groups.indexOf(t)>-1){i.push(s)}}if(i.length==0){e.err("No node type or group '"+t+"' found")}return i}function X(e){if(e.eat("(")){var t=W(e);if(!e.eat(")")){e.err("Missing closing paren")}return t}else if(!/\W/.test(e.next)){var r=G(e,e.next).map((function(t){if(e.inline==null){e.inline=t.isInline}else if(e.inline!=t.isInline){e.err("Mixing inline and block content")}return{type:"name",value:t}}));e.pos++;return r.length==1?r[0]:{type:"choice",exprs:r}}else{e.err("Unexpected token '"+e.next+"'")}}function Y(e){var t=[[]];i(o(e,0),r());return t;function r(){return t.push([])-1}function n(e,r,n){var i={term:n,to:r};t[e].push(i);return i}function i(e,t){e.forEach((function(e){return e.to=t}))}function o(e,t){if(e.type=="choice"){return e.exprs.reduce((function(e,r){return e.concat(o(r,t))}),[])}else if(e.type=="seq"){for(var s=0;;s++){var a=o(e.exprs[s],t);if(s==e.exprs.length-1){return a}i(a,t=r())}}else if(e.type=="star"){var f=r();n(t,f);i(o(e.expr,f),f);return[n(f)]}else if(e.type=="plus"){var c=r();i(o(e.expr,t),c);i(o(e.expr,c),c);return[n(c)]}else if(e.type=="opt"){return[n(t)].concat(o(e.expr,t))}else if(e.type=="range"){var l=t;for(var p=0;p<e.min;p++){var u=r();i(o(e.expr,l),u);l=u}if(e.max==-1){i(o(e.expr,l),l)}else{for(var h=e.min;h<e.max;h++){var d=r();n(l,d);i(o(e.expr,l),d);l=d}}return[n(l)]}else if(e.type=="name"){return[n(t,null,e.value)]}}}function Q(e,t){return e-t}function Z(e,t){var r=[];n(t);return r.sort(Q);function n(t){var i=e[t];if(i.length==1&&!i[0].term){return n(i[0].to)}r.push(t);for(var o=0;o<i.length;o++){var s=i[o];var a=s.term;var f=s.to;if(!a&&r.indexOf(f)==-1){n(f)}}}}function ee(e){var t=Object.create(null);return r(Z(e,0));function r(n){var i=[];n.forEach((function(t){e[t].forEach((function(t){var r=t.term;var n=t.to;if(!r){return}var o=i.indexOf(r),s=o>-1&&i[o+1];Z(e,n).forEach((function(e){if(!s){i.push(r,s=[])}if(s.indexOf(e)==-1){s.push(e)}}))}))}));var o=t[n.join(",")]=new j(n.indexOf(e.length-1)>-1);for(var s=0;s<i.length;s+=2){var a=i[s+1].sort(Q);o.next.push(i[s],t[a.join(",")]||r(a))}return o}}function te(e,t){for(var r=0,n=[e];r<n.length;r++){var i=n[r],o=!i.validEnd,s=[];for(var a=0;a<i.next.length;a+=2){var f=i.next[a],c=i.next[a+1];s.push(f.name);if(o&&!(f.isText||f.hasRequiredAttrs())){o=false}if(n.indexOf(c)==-1){n.push(c)}}if(o){t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}}function re(e){var t=Object.create(null);for(var r in e){var n=e[r];if(!n.hasDefault){return null}t[r]=n.default}return t}function ne(e,t){var r=Object.create(null);for(var n in e){var i=t&&t[n];if(i===undefined){var o=e[n];if(o.hasDefault){i=o.default}else{throw new RangeError("No value supplied for attribute "+n)}}r[n]=i}return r}function ie(e){var t=Object.create(null);if(e){for(var r in e){t[r]=new ae(e[r])}}return t}var oe=function e(t,r,n){this.name=t;this.schema=r;this.spec=n;this.groups=n.group?n.group.split(" "):[];this.attrs=ie(n.attrs);this.defaultAttrs=re(this.attrs);this.contentMatch=null;this.markSet=null;this.inlineContent=null;this.isBlock=!(n.inline||t=="text");this.isText=t=="text"};var se={isInline:{},isTextblock:{},isLeaf:{},isAtom:{}};se.isInline.get=function(){return!this.isBlock};se.isTextblock.get=function(){return this.isBlock&&this.inlineContent};se.isLeaf.get=function(){return this.contentMatch==j.empty};se.isAtom.get=function(){return this.isLeaf||this.spec.atom};oe.prototype.hasRequiredAttrs=function e(t){var r=this;for(var n in r.attrs){if(r.attrs[n].isRequired&&(!t||!(n in t))){return true}}return false};oe.prototype.compatibleContent=function e(t){return this==t||this.contentMatch.compatible(t.contentMatch)};oe.prototype.computeAttrs=function e(t){if(!t&&this.defaultAttrs){return this.defaultAttrs}else{return ne(this.attrs,t)}};oe.prototype.create=function e(t,r,n){if(this.isText){throw new Error("NodeType.create can't construct text nodes")}return new F(this,this.computeAttrs(t),a.from(r),u.setFrom(n))};oe.prototype.createChecked=function e(t,r,n){r=a.from(r);if(!this.validContent(r)){throw new RangeError("Invalid content for node "+this.name)}return new F(this,this.computeAttrs(t),r,u.setFrom(n))};oe.prototype.createAndFill=function e(t,r,n){t=this.computeAttrs(t);r=a.from(r);if(r.size){var i=this.contentMatch.fillBefore(r);if(!i){return null}r=i.append(r)}var o=this.contentMatch.matchFragment(r).fillBefore(a.empty,true);if(!o){return null}return new F(this,t,r.append(o),u.setFrom(n))};oe.prototype.validContent=function e(t){var r=this;var n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd){return false}for(var i=0;i<t.childCount;i++){if(!r.allowsMarks(t.child(i).marks)){return false}}return true};oe.prototype.allowsMarkType=function e(t){return this.markSet==null||this.markSet.indexOf(t)>-1};oe.prototype.allowsMarks=function e(t){var r=this;if(this.markSet==null){return true}for(var n=0;n<t.length;n++){if(!r.allowsMarkType(t[n].type)){return false}}return true};oe.prototype.allowedMarks=function e(t){var r=this;if(this.markSet==null){return t}var n;for(var i=0;i<t.length;i++){if(!r.allowsMarkType(t[i].type)){if(!n){n=t.slice(0,i)}}else if(n){n.push(t[i])}}return!n?t:n.length?n:u.empty};oe.compile=function e(t,r){var n=Object.create(null);t.forEach((function(e,t){return n[e]=new oe(e,r,t)}));var i=r.spec.topNode||"doc";if(!n[i]){throw new RangeError("Schema is missing its top node type ('"+i+"')")}if(!n.text){throw new RangeError("Every schema needs a 'text' type")}for(var o in n.text.attrs){throw new RangeError("The text node type should not have attributes")}return n};Object.defineProperties(oe.prototype,se);var ae=function e(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default");this.default=t.default};var fe={isRequired:{}};fe.isRequired.get=function(){return!this.hasDefault};Object.defineProperties(ae.prototype,fe);var ce=function e(t,r,n,i){this.name=t;this.schema=n;this.spec=i;this.attrs=ie(i.attrs);this.rank=r;this.excluded=null;var o=re(this.attrs);this.instance=o&&new u(this,o)};ce.prototype.create=function e(t){if(!t&&this.instance){return this.instance}return new u(this,ne(this.attrs,t))};ce.compile=function e(t,r){var n=Object.create(null),i=0;t.forEach((function(e,t){return n[e]=new ce(e,i++,r,t)}));return n};ce.prototype.removeFromSet=function e(t){var r=this;for(var n=0;n<t.length;n++){if(t[n].type==r){return t.slice(0,n).concat(t.slice(n+1))}}return t};ce.prototype.isInSet=function e(t){var r=this;for(var n=0;n<t.length;n++){if(t[n].type==r){return t[n]}}};ce.prototype.excludes=function e(t){return this.excluded.indexOf(t)>-1};var le=function e(t){var r=this;this.spec={};for(var n in t){r.spec[n]=t[n]}this.spec.nodes=i.from(t.nodes);this.spec.marks=i.from(t.marks);this.nodes=oe.compile(this.spec.nodes,this);this.marks=ce.compile(this.spec.marks,this);var o=Object.create(null);for(var s in r.nodes){if(s in r.marks){throw new RangeError(s+" can not be both a node and a mark")}var a=r.nodes[s],f=a.spec.content||"",c=a.spec.marks;a.contentMatch=o[f]||(o[f]=j.parse(f,r.nodes));a.inlineContent=a.contentMatch.inlineContent;a.markSet=c=="_"?null:c?pe(r,c.split(" ")):c==""||!a.inlineContent?[]:null}for(var l in r.marks){var p=r.marks[l],u=p.spec.excludes;p.excluded=u==null?[p]:u==""?[]:pe(r,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this);this.markFromJSON=this.markFromJSON.bind(this);this.topNodeType=this.nodes[this.spec.topNode||"doc"];this.cached=Object.create(null);this.cached.wrappings=Object.create(null)};le.prototype.node=function e(t,r,n,i){if(typeof t=="string"){t=this.nodeType(t)}else if(!(t instanceof oe)){throw new RangeError("Invalid node type: "+t)}else if(t.schema!=this){throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(r,n,i)};le.prototype.text=function e(t,r){var n=this.nodes.text;return new B(n,n.defaultAttrs,t,u.setFrom(r))};le.prototype.mark=function e(t,r){if(typeof t=="string"){t=this.marks[t]}return t.create(r)};le.prototype.nodeFromJSON=function e(t){return F.fromJSON(this,t)};le.prototype.markFromJSON=function e(t){return u.fromJSON(this,t)};le.prototype.nodeType=function e(t){var r=this.nodes[t];if(!r){throw new RangeError("Unknown node type: "+t)}return r};function pe(e,t){var r=[];for(var n=0;n<t.length;n++){var i=t[n],o=e.marks[i],s=o;if(o){r.push(o)}else{for(var a in e.marks){var f=e.marks[a];if(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1){r.push(s=f)}}}if(!s){throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}}return r}var ue=function e(t,r){var n=this;this.schema=t;this.rules=r;this.tags=[];this.styles=[];r.forEach((function(e){if(e.tag){n.tags.push(e)}else if(e.style){n.styles.push(e)}}))};ue.prototype.parse=function e(t,r){if(r===void 0)r={};var n=new xe(this,r,false);n.addAll(t,null,r.from,r.to);return n.finish()};ue.prototype.parseSlice=function e(t,r){if(r===void 0)r={};var n=new xe(this,r,true);n.addAll(t,null,r.from,r.to);return d.maxOpen(n.finish())};ue.prototype.matchTag=function e(t,r){var n=this;for(var i=0;i<this.tags.length;i++){var o=n.tags[i];if(Me(t,o.tag)&&(o.namespace===undefined||t.namespaceURI==o.namespace)&&(!o.context||r.matchesContext(o.context))){if(o.getAttrs){var s=o.getAttrs(t);if(s===false){continue}o.attrs=s}return o}}};ue.prototype.matchStyle=function e(t,r,n){var i=this;for(var o=0;o<this.styles.length;o++){var s=i.styles[o];if(s.style.indexOf(t)!=0||s.context&&!n.matchesContext(s.context)||s.style.length>t.length&&(s.style.charCodeAt(t.length)!=61||s.style.slice(t.length+1)!=r)){continue}if(s.getAttrs){var a=s.getAttrs(r);if(a===false){continue}s.attrs=a}return s}};ue.schemaRules=function e(t){var r=[];function n(e){var t=e.priority==null?50:e.priority,n=0;for(;n<r.length;n++){var i=r[n],o=i.priority==null?50:i.priority;if(o<t){break}}r.splice(n,0,e)}var i=function(e){var r=t.marks[e].spec.parseDOM;if(r){r.forEach((function(t){n(t=Ce(t));t.mark=e}))}};for(var o in t.marks)i(o);var s=function(e){var r=t.nodes[a].spec.parseDOM;if(r){r.forEach((function(e){n(e=Ce(e));e.node=a}))}};for(var a in t.nodes)s(o);return r};ue.fromSchema=function e(t){return t.cached.domParser||(t.cached.domParser=new ue(t,ue.schemaRules(t)))};var he={address:true,article:true,aside:true,blockquote:true,canvas:true,dd:true,div:true,dl:true,fieldset:true,figcaption:true,figure:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,li:true,noscript:true,ol:true,output:true,p:true,pre:true,section:true,table:true,tfoot:true,ul:true};var de={head:true,noscript:true,object:true,script:true,style:true,title:true};var ve={ol:true,ul:true};var me=1;var ye=2;var ge=4;function we(e){return(e?me:0)|(e==="full"?ye:0)}var Se=function e(t,r,n,i,o,s){this.type=t;this.attrs=r;this.solid=i;this.match=o||(s&ge?null:t.contentMatch);this.options=s;this.content=[];this.marks=n;this.activeMarks=u.none};Se.prototype.findWrapping=function e(t){if(!this.match){if(!this.type){return[]}var r=this.type.contentMatch.fillBefore(a.from(t));if(r){this.match=this.type.contentMatch.matchFragment(r)}else{var n=this.type.contentMatch,i;if(i=n.findWrapping(t.type)){this.match=n;return i}else{return null}}}return this.match.findWrapping(t.type)};Se.prototype.finish=function e(t){if(!(this.options&me)){var r=this.content[this.content.length-1],n;if(r&&r.isText&&(n=/\s+$/.exec(r.text))){if(r.text.length==n[0].length){this.content.pop()}else{this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-n[0].length))}}}var i=a.from(this.content);if(!t&&this.match){i=i.append(this.match.fillBefore(a.empty,true))}return this.type?this.type.create(this.attrs,i,this.marks):i};var xe=function e(t,r,n){this.parser=t;this.options=r;this.isOpen=n;this.pendingMarks=[];var i=r.topNode,o;var s=we(r.preserveWhitespace)|(n?ge:0);if(i){o=new Se(i.type,i.attrs,u.none,true,r.topMatch||i.type.contentMatch,s)}else if(n){o=new Se(null,null,u.none,true,null,s)}else{o=new Se(t.schema.topNodeType,null,u.none,true,null,s)}this.nodes=[o];this.open=0;this.find=r.findPositions;this.needsBlock=false};var ke={top:{},currentPos:{}};ke.top.get=function(){return this.nodes[this.open]};xe.prototype.addDOM=function e(t){var r=this;if(t.nodeType==3){this.addTextNode(t)}else if(t.nodeType==1){var n=t.getAttribute("style");var i=n?this.readStyles(Oe(n)):null;if(i!=null){for(var o=0;o<i.length;o++){r.addPendingMark(i[o])}}this.addElement(t);if(i!=null){for(var s=0;s<i.length;s++){r.removePendingMark(i[s])}}}};xe.prototype.addTextNode=function e(t){var r=t.nodeValue;var n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/\S/.test(r)){if(!(n.options&me)){r=r.replace(/\s+/g," ");if(/^\s/.test(r)&&this.open==this.nodes.length-1){var i=n.content[n.content.length-1];var o=t.previousSibling;if(!i||o&&o.nodeName=="BR"||i.isText&&/\s$/.test(i.text)){r=r.slice(1)}}}else if(!(n.options&ye)){r=r.replace(/\r?\n|\r/g," ")}if(r){this.insertNode(this.parser.schema.text(r))}this.findInText(t)}else{this.findInside(t)}};xe.prototype.addElement=function e(t){var r=t.nodeName.toLowerCase();if(ve.hasOwnProperty(r)){be(t)}var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:de.hasOwnProperty(r)){this.findInside(t)}else if(!n||n.skip){if(n&&n.skip.nodeType){t=n.skip}var i,o=this.top,s=this.needsBlock;if(he.hasOwnProperty(r)){i=true;if(!o.type){this.needsBlock=true}}this.addAll(t);if(i){this.sync(o)}this.needsBlock=s}else{this.addElementByRule(t,n)}};xe.prototype.readStyles=function e(t){var r=this;var n=u.none;for(var i=0;i<t.length;i+=2){var o=r.parser.matchStyle(t[i],t[i+1],r);if(!o){continue}if(o.ignore){return null}n=r.parser.schema.marks[o.mark].create(o.attrs).addToSet(n)}return n};xe.prototype.addElementByRule=function e(t,r){var n=this;var i,o,s,a;if(r.node){o=this.parser.schema.nodes[r.node];if(o.isLeaf){this.insertNode(o.create(r.attrs))}else{i=this.enter(o,r.attrs,r.preserveWhitespace)}}else{s=this.parser.schema.marks[r.mark];a=s.create(r.attrs);this.addPendingMark(a)}var f=this.top;if(o&&o.isLeaf){this.findInside(t)}else if(r.getContent){this.findInside(t);r.getContent(t,this.parser.schema).forEach((function(e){return n.insertNode(e)}))}else{var c=r.contentElement;if(typeof c=="string"){c=t.querySelector(c)}else if(typeof c=="function"){c=c(t)}if(!c){c=t}this.findAround(t,c,true);this.addAll(c,i)}if(i){this.sync(f);this.open--}if(a){this.removePendingMark(a)}return true};xe.prototype.addAll=function e(t,r,n,i){var o=this;var s=n||0;for(var a=n?t.childNodes[n]:t.firstChild,f=i==null?null:t.childNodes[i];a!=f;a=a.nextSibling,++s){o.findAtPoint(t,s);o.addDOM(a);if(r&&he.hasOwnProperty(a.nodeName.toLowerCase())){o.sync(r)}}this.findAtPoint(t,s)};xe.prototype.findPlace=function e(t){var r=this;var n,i;for(var o=this.open;o>=0;o--){var s=r.nodes[o];var a=s.findWrapping(t);if(a&&(!n||n.length>a.length)){n=a;i=s;if(!a.length){break}}if(s.solid){break}}if(!n){return false}this.sync(i);for(var f=0;f<n.length;f++){r.enterInner(n[f],null,false)}return true};xe.prototype.insertNode=function e(t){if(t.isInline&&this.needsBlock&&!this.top.type){var r=this.textblockFromContext();if(r){this.enterInner(r)}}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n);if(n.match){n.match=n.match.matchType(t.type)}var i=n.activeMarks;for(var o=0;o<t.marks.length;o++){if(!n.type||n.type.allowsMarkType(t.marks[o].type)){i=t.marks[o].addToSet(i)}}n.content.push(t.mark(i))}};xe.prototype.applyPendingMarks=function e(t){var r=this;for(var n=0;n<this.pendingMarks.length;n++){var i=r.pendingMarks[n];if((!t.type||t.type.allowsMarkType(i.type))&&!i.type.isInSet(t.activeMarks)){t.activeMarks=i.addToSet(t.activeMarks);r.pendingMarks.splice(n--,1)}}};xe.prototype.enter=function e(t,r,n){var i=this.findPlace(t.create(r));if(i){this.applyPendingMarks(this.top);this.enterInner(t,r,true,n)}return i};xe.prototype.enterInner=function e(t,r,n,i){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(t,r);var s=i==null?o.options&~ge:we(i);if(o.options&ge&&o.content.length==0){s|=ge}this.nodes.push(new Se(t,r,o.activeMarks,n,null,s));this.open++};xe.prototype.closeExtra=function e(t){var r=this;var n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--){r.nodes[n-1].content.push(r.nodes[n].finish(t))}this.nodes.length=this.open+1}};xe.prototype.finish=function e(){this.open=0;this.closeExtra(this.isOpen);return this.nodes[0].finish(this.isOpen||this.options.topOpen)};xe.prototype.sync=function e(t){var r=this;for(var n=this.open;n>=0;n--){if(r.nodes[n]==t){r.open=n;return}}};xe.prototype.addPendingMark=function e(t){this.pendingMarks.push(t)};xe.prototype.removePendingMark=function e(t){var r=this.pendingMarks.lastIndexOf(t);if(r>-1){this.pendingMarks.splice(r,1)}else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}};ke.currentPos.get=function(){var e=this;this.closeExtra();var t=0;for(var r=this.open;r>=0;r--){var n=e.nodes[r].content;for(var i=n.length-1;i>=0;i--){t+=n[i].nodeSize}if(r){t++}}return t};xe.prototype.findAtPoint=function e(t,r){var n=this;if(this.find){for(var i=0;i<this.find.length;i++){if(n.find[i].node==t&&n.find[i].offset==r){n.find[i].pos=n.currentPos}}}};xe.prototype.findInside=function e(t){var r=this;if(this.find){for(var n=0;n<this.find.length;n++){if(r.find[n].pos==null&&t.nodeType==1&&t.contains(r.find[n].node)){r.find[n].pos=r.currentPos}}}};xe.prototype.findAround=function e(t,r,n){var i=this;if(t!=r&&this.find){for(var o=0;o<this.find.length;o++){if(i.find[o].pos==null&&t.nodeType==1&&t.contains(i.find[o].node)){var s=r.compareDocumentPosition(i.find[o].node);if(s&(n?2:4)){i.find[o].pos=i.currentPos}}}}};xe.prototype.findInText=function e(t){var r=this;if(this.find){for(var n=0;n<this.find.length;n++){if(r.find[n].node==t){r.find[n].pos=r.currentPos-(t.nodeValue.length-r.find[n].offset)}}}};xe.prototype.matchesContext=function e(t){var r=this;if(t.indexOf("|")>-1){return t.split(/\s*\|\s*/).some(this.matchesContext,this)}var n=t.split("/");var i=this.options.context;var o=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type);var s=-(i?i.depth+1:0)+(o?0:1);var a=function(e,t){for(;e>=0;e--){var f=n[e];if(f==""){if(e==n.length-1||e==0){continue}for(;t>=s;t--){if(a(e-1,t)){return true}}return false}else{var c=t>0||t==0&&o?r.nodes[t].type:i&&t>=s?i.node(t-s).type:null;if(!c||c.name!=f&&c.groups.indexOf(f)==-1){return false}t--}}return true};return a(n.length-1,this.open)};xe.prototype.textblockFromContext=function e(){var t=this;var r=this.options.context;if(r){for(var n=r.depth;n>=0;n--){var i=r.node(n).contentMatchAt(r.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs){return i}}}for(var o in t.parser.schema.nodes){var s=t.parser.schema.nodes[o];if(s.isTextblock&&s.defaultAttrs){return s}}};Object.defineProperties(xe.prototype,ke);function be(e){for(var t=e.firstChild,r=null;t;t=t.nextSibling){var n=t.nodeType==1?t.nodeName.toLowerCase():null;if(n&&ve.hasOwnProperty(n)&&r){r.appendChild(t);t=r}else if(n=="li"){r=t}else if(n){r=null}}}function Me(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Oe(e){var t=/\s*([\w-]+)\s*:\s*([^;]+)/g,r,n=[];while(r=t.exec(e)){n.push(r[1],r[2].trim())}return n}function Ce(e){var t={};for(var r in e){t[r]=e[r]}return t}var Te=function e(t,r){this.nodes=t||{};this.marks=r||{}};Te.prototype.serializeFragment=function e(t,r,n){var i=this;if(r===void 0)r={};if(!n){n=De(r).createDocumentFragment()}var o=n,s=null;t.forEach((function(e){if(s||e.marks.length){if(!s){s=[]}var t=0,n=0;while(t<s.length&&n<e.marks.length){var a=e.marks[n];if(!i.marks[a.type.name]){n++;continue}if(!a.eq(s[t])||a.type.spec.spanning===false){break}t+=2;n++}while(t<s.length){o=s.pop();s.pop()}while(n<e.marks.length){var f=e.marks[n++];var c=i.serializeMark(f,e.isInline,r);if(c){s.push(f,o);o.appendChild(c.dom);o=c.contentDOM||c.dom}}}o.appendChild(i.serializeNode(e,r))}));return n};Te.prototype.serializeNode=function e(t,r){if(r===void 0)r={};var n=Te.renderSpec(De(r),this.nodes[t.type.name](t));var i=n.dom;var o=n.contentDOM;if(o){if(t.isLeaf){throw new RangeError("Content hole not allowed in a leaf node spec")}if(r.onContent){r.onContent(t,o,r)}else{this.serializeFragment(t.content,r,o)}}return i};Te.prototype.serializeNodeAndMarks=function e(t,r){var n=this;if(r===void 0)r={};var i=this.serializeNode(t,r);for(var o=t.marks.length-1;o>=0;o--){var s=n.serializeMark(t.marks[o],t.isInline,r);if(s){(s.contentDOM||s.dom).appendChild(i);i=s.dom}}return i};Te.prototype.serializeMark=function e(t,r,n){if(n===void 0)n={};var i=this.marks[t.type.name];return i&&Te.renderSpec(De(n),i(t,r))};Te.renderSpec=function e(t,r){if(typeof r=="string"){return{dom:t.createTextNode(r)}}if(r.nodeType!=null){return{dom:r}}var n=t.createElement(r[0]),i=null;var o=r[1],s=1;if(o&&typeof o=="object"&&o.nodeType==null&&!Array.isArray(o)){s=2;for(var a in o){if(o[a]!=null){n.setAttribute(a,o[a])}}}for(var f=s;f<r.length;f++){var c=r[f];if(c===0){if(f<r.length-1||f>s){throw new RangeError("Content hole must be the only child of its parent node")}return{dom:n,contentDOM:n}}else{var l=Te.renderSpec(t,c);var p=l.dom;var u=l.contentDOM;n.appendChild(p);if(u){if(i){throw new RangeError("Multiple content holes")}i=u}}}return{dom:n,contentDOM:i}};Te.fromSchema=function e(t){return t.cached.domSerializer||(t.cached.domSerializer=new Te(this.nodesFromSchema(t),this.marksFromSchema(t)))};Te.nodesFromSchema=function e(t){var r=Ne(t.nodes);if(!r.text){r.text=function(e){return e.text}}return r};Te.marksFromSchema=function e(t){return Ne(t.marks)};function Ne(e){var t={};for(var r in e){var n=e[r].spec.toDOM;if(n){t[r]=n}}return t}function De(e){return e.document||window.document}t.Node=F;t.ResolvedPos=N;t.NodeRange=I;t.Fragment=a;t.Slice=d;t.ReplaceError=h;t.Mark=u;t.Schema=le;t.NodeType=oe;t.MarkType=ce;t.ContentMatch=j;t.DOMParser=ue;t.DOMSerializer=Te},"./node_modules/prosemirror-schema-list/dist/schema-list.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/prosemirror-transform/dist/index.js");var i=r("./node_modules/prosemirror-model/dist/index.js");var o=["ol",0];var s=["ul",0];var a=["li",0];var f={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function e(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function e(t){return t.attrs.order==1?o:["ol",{start:t.attrs.order},0]}};var c={parseDOM:[{tag:"ul"}],toDOM:function e(){return s}};var l={parseDOM:[{tag:"li"}],toDOM:function e(){return a},defining:true};function p(e,t){var r={};for(var n in e){r[n]=e[n]}for(var i in t){r[i]=t[i]}return r}function u(e,t,r){return e.append({ordered_list:p(f,{content:"list_item+",group:r}),bullet_list:p(c,{content:"list_item+",group:r}),list_item:p(l,{content:t})})}function h(e,t){return function(r,o){var s=r.selection;var a=s.$from;var f=s.$to;var c=a.blockRange(f),l=false,p=c;if(!c){return false}if(c.depth>=2&&a.node(c.depth-1).type.compatibleContent(e)&&c.startIndex==0){if(a.index(c.depth-1)==0){return false}var u=r.doc.resolve(c.start-2);p=new i.NodeRange(u,u,c.depth);if(c.endIndex<c.parent.childCount){c=new i.NodeRange(a,r.doc.resolve(f.end(c.depth)),c.depth)}l=true}var h=n.findWrapping(p,e,t,c);if(!h){return false}if(o){o(d(r.tr,c,h,l,e).scrollIntoView())}return true}}function d(e,t,r,o,s){var a=i.Fragment.empty;for(var f=r.length-1;f>=0;f--){a=i.Fragment.from(r[f].type.create(r[f].attrs,a))}e.step(new n.ReplaceAroundStep(t.start-(o?2:0),t.end,t.start,t.end,new i.Slice(a,0,0),r.length,true));var c=0;for(var l=0;l<r.length;l++){if(r[l].type==s){c=l+1}}var p=r.length-c;var u=t.start+r.length-(o?2:0),h=t.parent;for(var d=t.startIndex,v=t.endIndex,m=true;d<v;d++,m=false){if(!m&&n.canSplit(e.doc,u,p)){e.split(u,p);u+=2*p}u+=h.child(d).nodeSize}return e}function v(e){return function(t,r){var o=t.selection;var s=o.$from;var a=o.$to;var f=o.node;if(f&&f.isBlock||s.depth<2||!s.sameParent(a)){return false}var c=s.node(-1);if(c.type!=e){return false}if(s.parent.content.size==0){if(s.depth==2||s.node(-3).type!=e||s.index(-2)!=s.node(-2).childCount-1){return false}if(r){var l=i.Fragment.empty,p=s.index(-1)>0;for(var u=s.depth-(p?1:2);u>=s.depth-3;u--){l=i.Fragment.from(s.node(u).copy(l))}l=l.append(i.Fragment.from(e.createAndFill()));var h=t.tr.replace(s.before(p?null:-1),s.after(-3),new i.Slice(l,p?3:2,2));h.setSelection(t.selection.constructor.near(h.doc.resolve(s.pos+(p?3:2))));r(h.scrollIntoView())}return true}var d=a.pos==s.end()?c.defaultContentType(0):null;var v=t.tr.delete(s.pos,a.pos);var m=d&&[null,{type:d}];if(!n.canSplit(v.doc,s.pos,2,m)){return false}if(r){r(v.split(s.pos,2,m).scrollIntoView())}return true}}function m(e){return function(t,r){var n=t.selection;var i=n.$from;var o=n.$to;var s=i.blockRange(o,(function(t){return t.childCount&&t.firstChild.type==e}));if(!s){return false}if(!r){return true}if(i.node(s.depth-1).type==e){return y(t,r,e,s)}else{return g(t,r,s)}}}function y(e,t,r,o){var s=e.tr,a=o.end,f=o.$to.end(o.depth);if(a<f){s.step(new n.ReplaceAroundStep(a-1,f,a,f,new i.Slice(i.Fragment.from(r.create(null,o.parent.copy())),1,0),1,true));o=new i.NodeRange(s.doc.resolve(o.$from.pos),s.doc.resolve(f),o.depth)}t(s.lift(o,n.liftTarget(o)).scrollIntoView());return true}function g(e,t,r){var o=e.tr,s=r.parent;for(var a=r.end,f=r.endIndex-1,c=r.startIndex;f>c;f--){a-=s.child(f).nodeSize;o.delete(a-1,a+1)}var l=o.doc.resolve(r.start),p=l.nodeAfter;var u=r.startIndex==0,h=r.endIndex==s.childCount;var d=l.node(-1),v=l.index(-1);if(!d.canReplace(v+(u?0:1),v+1,p.content.append(h?i.Fragment.empty:i.Fragment.from(s)))){return false}var m=l.pos,y=m+p.nodeSize;o.step(new n.ReplaceAroundStep(m-(u?1:0),y+(h?1:0),m+1,y-1,new i.Slice((u?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))).append(h?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))),u?0:1,h?0:1),u?0:1));t(o.scrollIntoView());return true}function w(e){return function(t,r){var o=t.selection;var s=o.$from;var a=o.$to;var f=s.blockRange(a,(function(t){return t.childCount&&t.firstChild.type==e}));if(!f){return false}var c=f.startIndex;if(c==0){return false}var l=f.parent,p=l.child(c-1);if(p.type!=e){return false}if(r){var u=p.lastChild&&p.lastChild.type==l.type;var h=i.Fragment.from(u?e.create():null);var d=new i.Slice(i.Fragment.from(e.create(null,i.Fragment.from(l.copy(h)))),u?3:1,0);var v=f.start,m=f.end;r(t.tr.step(new n.ReplaceAroundStep(v-(u?3:1),m,v,m,d,1,true)).scrollIntoView())}return true}}t.orderedList=f;t.bulletList=c;t.listItem=l;t.addListNodes=u;t.wrapInList=h;t.splitListItem=v;t.liftListItem=m;t.sinkListItem=w},"./node_modules/prosemirror-state/dist/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/prosemirror-model/dist/index.js");var i=r("./node_modules/prosemirror-transform/dist/index.js");var o=Object.create(null);var s=function e(t,r,n){this.ranges=n||[new f(t.min(r),t.max(r))];this.$anchor=t;this.$head=r};var a={anchor:{},head:{},from:{},to:{},$from:{},$to:{},empty:{}};a.anchor.get=function(){return this.$anchor.pos};a.head.get=function(){return this.$head.pos};a.from.get=function(){return this.$from.pos};a.to.get=function(){return this.$to.pos};a.$from.get=function(){return this.ranges[0].$from};a.$to.get=function(){return this.ranges[0].$to};a.empty.get=function(){var e=this.ranges;for(var t=0;t<e.length;t++){if(e[t].$from.pos!=e[t].$to.pos){return false}}return true};s.prototype.content=function e(){return this.$from.node(0).slice(this.from,this.to,true)};s.prototype.replace=function e(t,r){if(r===void 0)r=n.Slice.empty;var i=r.content.lastChild,o=null;for(var s=0;s<r.openEnd;s++){o=i;i=i.lastChild}var a=t.steps.length,f=this.ranges;for(var c=0;c<f.length;c++){var l=f[c];var p=l.$from;var u=l.$to;var h=t.mapping.slice(a);t.replaceRange(h.map(p.pos),h.map(u.pos),c?n.Slice.empty:r);if(c==0){m(t,a,(i?i.isInline:o&&o.isTextblock)?-1:1)}}};s.prototype.replaceWith=function e(t,r){var n=t.steps.length,i=this.ranges;for(var o=0;o<i.length;o++){var s=i[o];var a=s.$from;var f=s.$to;var c=t.mapping.slice(n);var l=c.map(a.pos),p=c.map(f.pos);if(o){t.deleteRange(l,p)}else{t.replaceRangeWith(l,p,r);m(t,n,r.isInline?-1:1)}}};s.findFrom=function e(t,r,n){var i=t.parent.inlineContent?new c(t):v(t.node(0),t.parent,t.pos,t.index(),r,n);if(i){return i}for(var o=t.depth-1;o>=0;o--){var s=r<0?v(t.node(0),t.node(o),t.before(o+1),t.index(o),r,n):v(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,r,n);if(s){return s}}};s.near=function e(t,r){if(r===void 0)r=1;return this.findFrom(t,r)||this.findFrom(t,-r)||new h(t.node(0))};s.atStart=function e(t){return v(t,t,0,0,1)||new h(t)};s.atEnd=function e(t){return v(t,t,t.content.size,t.childCount,-1)||new h(t)};s.fromJSON=function e(t,r){if(!r||!r.type){throw new RangeError("Invalid input for Selection.fromJSON")}var n=o[r.type];if(!n){throw new RangeError("No selection type "+r.type+" defined")}return n.fromJSON(t,r)};s.jsonID=function e(t,r){if(t in o){throw new RangeError("Duplicate use of selection JSON ID "+t)}o[t]=r;r.prototype.jsonID=t;return r};s.prototype.getBookmark=function e(){return c.between(this.$anchor,this.$head).getBookmark()};Object.defineProperties(s.prototype,a);s.prototype.visible=true;var f=function e(t,r){this.$from=t;this.$to=r};var c=function(e){function t(t,r){if(r===void 0)r=t;e.call(this,t,r)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={$cursor:{}};r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null};t.prototype.map=function r(n,i){var o=n.resolve(i.map(this.head));if(!o.parent.inlineContent){return e.near(o)}var s=n.resolve(i.map(this.anchor));return new t(s.parent.inlineContent?s:o,o)};t.prototype.replace=function t(r,i){if(i===void 0)i=n.Slice.empty;e.prototype.replace.call(this,r,i);if(i==n.Slice.empty){var o=this.$from.marksAcross(this.$to);if(o){r.ensureMarks(o)}}};t.prototype.eq=function e(r){return r instanceof t&&r.anchor==this.anchor&&r.head==this.head};t.prototype.getBookmark=function e(){return new l(this.anchor,this.head)};t.prototype.toJSON=function e(){return{type:"text",anchor:this.anchor,head:this.head}};t.fromJSON=function e(r,n){if(typeof n.anchor!="number"||typeof n.head!="number"){throw new RangeError("Invalid input for TextSelection.fromJSON")}return new t(r.resolve(n.anchor),r.resolve(n.head))};t.create=function e(t,r,n){if(n===void 0)n=r;var i=t.resolve(r);return new this(i,n==r?i:t.resolve(n))};t.between=function r(n,i,o){var s=n.pos-i.pos;if(!o||s){o=s>=0?1:-1}if(!i.parent.inlineContent){var a=e.findFrom(i,o,true)||e.findFrom(i,-o,true);if(a){i=a.$head}else{return e.near(i,o)}}if(!n.parent.inlineContent){if(s==0){n=i}else{n=(e.findFrom(n,-o,true)||e.findFrom(n,o,true)).$anchor;if(n.pos<i.pos!=s<0){n=i}}}return new t(n,i)};Object.defineProperties(t.prototype,r);return t}(s);s.jsonID("text",c);var l=function e(t,r){this.anchor=t;this.head=r};l.prototype.map=function e(t){return new l(t.map(this.anchor),t.map(this.head))};l.prototype.resolve=function e(t){return c.between(t.resolve(this.anchor),t.resolve(this.head))};var p=function(e){function t(t){var r=t.nodeAfter;var n=t.node(0).resolve(t.pos+r.nodeSize);e.call(this,t,n);this.node=r}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.map=function r(n,i){var o=i.mapResult(this.anchor);var s=o.deleted;var a=o.pos;var f=n.resolve(a);if(s){return e.near(f)}return new t(f)};t.prototype.content=function e(){return new n.Slice(n.Fragment.from(this.node),0,0)};t.prototype.eq=function e(r){return r instanceof t&&r.anchor==this.anchor};t.prototype.toJSON=function e(){return{type:"node",anchor:this.anchor}};t.prototype.getBookmark=function e(){return new u(this.anchor)};t.fromJSON=function e(r,n){if(typeof n.anchor!="number"){throw new RangeError("Invalid input for NodeSelection.fromJSON")}return new t(r.resolve(n.anchor))};t.create=function e(t,r){return new this(t.resolve(r))};t.isSelectable=function e(t){return!t.isText&&t.type.spec.selectable!==false};return t}(s);p.prototype.visible=false;s.jsonID("node",p);var u=function e(t){this.anchor=t};u.prototype.map=function e(t){var r=t.mapResult(this.anchor);var n=r.deleted;var i=r.pos;return n?new l(i,i):new u(i)};u.prototype.resolve=function e(t){var r=t.resolve(this.anchor),n=r.nodeAfter;if(n&&p.isSelectable(n)){return new p(r)}return s.near(r)};var h=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.toJSON=function e(){return{type:"all"}};t.fromJSON=function e(r){return new t(r)};t.prototype.map=function e(r){return new t(r)};t.prototype.eq=function e(r){return r instanceof t};t.prototype.getBookmark=function e(){return d};return t}(s);s.jsonID("all",h);var d={map:function e(){return this},resolve:function e(t){return new h(t)}};function v(e,t,r,n,i,o){if(t.inlineContent){return c.create(e,r)}for(var s=n-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){var a=t.child(s);if(!a.isAtom){var f=v(e,a,r+i,i<0?a.childCount:0,i,o);if(f){return f}}else if(!o&&p.isSelectable(a)){return p.create(e,r-(i<0?a.nodeSize:0))}r+=a.nodeSize*i}}function m(e,t,r){var n=e.steps.length-1;if(n<t){return}var o=e.steps[n];if(!(o instanceof i.ReplaceStep||o instanceof i.ReplaceAroundStep)){return}var a=e.mapping.maps[n],f;a.forEach((function(e,t,r,n){if(f==null){f=n}}));e.setSelection(s.near(e.doc.resolve(f),r))}var y=1;var g=2;var w=4;var S=function(e){function t(t){e.call(this,t.doc);this.time=Date.now();this.curSelection=t.selection;this.curSelectionFor=0;this.storedMarks=t.storedMarks;this.updated=0;this.meta=Object.create(null)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};r.selection.get=function(){if(this.curSelectionFor<this.steps.length){this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor));this.curSelectionFor=this.steps.length}return this.curSelection};t.prototype.setSelection=function e(t){this.curSelection=t;this.curSelectionFor=this.steps.length;this.updated=(this.updated|y)&~g;this.storedMarks=null;return this};r.selectionSet.get=function(){return(this.updated&y)>0};t.prototype.setStoredMarks=function e(t){this.storedMarks=t;this.updated|=g;return this};t.prototype.ensureMarks=function e(t){if(!n.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)){this.setStoredMarks(t)}return this};t.prototype.addStoredMark=function e(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))};t.prototype.removeStoredMark=function e(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))};r.storedMarksSet.get=function(){return(this.updated&g)>0};t.prototype.addStep=function t(r,n){e.prototype.addStep.call(this,r,n);this.updated=this.updated&~g;this.storedMarks=null};t.prototype.setTime=function e(t){this.time=t;return this};t.prototype.replaceSelection=function e(t){this.selection.replace(this,t);return this};t.prototype.replaceSelectionWith=function e(t,r){var i=this.selection;if(r!==false){t=t.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||n.Mark.none))}i.replaceWith(this,t);return this};t.prototype.deleteSelection=function e(){this.selection.replace(this);return this};t.prototype.insertText=function e(t,r,n){if(n===void 0)n=r;var i=this.doc.type.schema;if(r==null){if(!t){return this.deleteSelection()}return this.replaceSelectionWith(i.text(t),true)}else{if(!t){return this.deleteRange(r,n)}var o=this.storedMarks;if(!o){var s=this.doc.resolve(r);o=n==r?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,i.text(t,o))}};t.prototype.setMeta=function e(t,r){this.meta[typeof t=="string"?t:t.key]=r;return this};t.prototype.getMeta=function e(t){return this.meta[typeof t=="string"?t:t.key]};r.isGeneric.get=function(){var e=this;for(var t in e.meta){return false}return true};t.prototype.scrollIntoView=function e(){this.updated|=w;return this};r.scrolledIntoView.get=function(){return(this.updated&w)>0};Object.defineProperties(t.prototype,r);return t}(i.Transform);function x(e,t){return!t||!e?e:e.bind(t)}var k=function e(t,r,n){this.name=t;this.init=x(r.init,n);this.apply=x(r.apply,n)};var b=[new k("doc",{init:function e(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function e(t){return t.doc}}),new k("selection",{init:function e(t,r){return t.selection||s.atStart(r.doc)},apply:function e(t){return t.selection}}),new k("storedMarks",{init:function e(t){return t.storedMarks||null},apply:function e(t,r,n,i){return i.selection.$cursor?t.storedMarks:null}}),new k("scrollToSelection",{init:function e(){return 0},apply:function e(t,r){return t.scrolledIntoView?r+1:r}})];var M=function e(t,r){var n=this;this.schema=t;this.fields=b.concat();this.plugins=[];this.pluginsByKey=Object.create(null);if(r){r.forEach((function(e){if(n.pluginsByKey[e.key]){throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")")}n.plugins.push(e);n.pluginsByKey[e.key]=e;if(e.spec.state){n.fields.push(new k(e.key,e.spec.state,e))}}))}};var O=function e(t){this.config=t};var C={schema:{},plugins:{},tr:{}};C.schema.get=function(){return this.config.schema};C.plugins.get=function(){return this.config.plugins};O.prototype.apply=function e(t){return this.applyTransaction(t).state};O.prototype.filterTransaction=function e(t,r){var n=this;if(r===void 0)r=-1;for(var i=0;i<this.config.plugins.length;i++){if(i!=r){var o=n.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,t,n)){return false}}}return true};O.prototype.applyTransaction=function e(t){var r=this;if(!this.filterTransaction(t)){return{state:this,transactions:[]}}var n=[t],i=this.applyInner(t),o=null;e:for(;;){var s=false;for(var a=0;a<this.config.plugins.length;a++){var f=r.config.plugins[a];if(f.spec.appendTransaction){var c=o?o[a].n:0,l=o?o[a].state:r;var p=c<n.length&&f.spec.appendTransaction.call(f,c?n.slice(c):n,l,i);if(p&&i.filterTransaction(p,a)){p.setMeta("appendedTransaction",t);if(!o){o=[];for(var u=0;u<this.config.plugins.length;u++){o.push(u<a?{state:i,n:n.length}:{state:r,n:0})}}n.push(p);i=i.applyInner(p);s=true}if(o){o[a]={state:i,n:n.length}}}}if(!s){return{state:i,transactions:n}}}};O.prototype.applyInner=function e(t){var r=this;if(!t.before.eq(this.doc)){throw new RangeError("Applying a mismatched transaction")}var n=new O(this.config),i=this.config.fields;for(var o=0;o<i.length;o++){var s=i[o];n[s.name]=s.apply(t,r[s.name],r,n)}for(var a=0;a<T.length;a++){T[a](r,t,n)}return n};C.tr.get=function(){return new S(this)};O.create=function e(t){var r=new M(t.schema||t.doc.type.schema,t.plugins);var n=new O(r);for(var i=0;i<r.fields.length;i++){n[r.fields[i].name]=r.fields[i].init(t,n)}return n};O.prototype.reconfigure=function e(t){var r=this;var n=new M(t.schema||this.schema,t.plugins);var i=n.fields,o=new O(n);for(var s=0;s<i.length;s++){var a=i[s].name;o[a]=r.hasOwnProperty(a)?r[a]:i[s].init(t,o)}return o};O.prototype.toJSON=function e(t){var r=this;var n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks){n.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))}if(t&&typeof t=="object"){for(var i in t){if(i=="doc"||i=="selection"){throw new RangeError("The JSON fields `doc` and `selection` are reserved")}var o=t[i],s=o.spec.state;if(s&&s.toJSON){n[i]=s.toJSON.call(o,r[o.key])}}}return n};O.fromJSON=function e(t,r,i){if(!r){throw new RangeError("Invalid input for EditorState.fromJSON")}if(!t.schema){throw new RangeError("Required config field 'schema' missing")}var o=new M(t.schema,t.plugins);var a=new O(o);o.fields.forEach((function(e){if(e.name=="doc"){a.doc=n.Node.fromJSON(t.schema,r.doc)}else if(e.name=="selection"){a.selection=s.fromJSON(a.doc,r.selection)}else if(e.name=="storedMarks"){if(r.storedMarks){a.storedMarks=r.storedMarks.map(t.schema.markFromJSON)}}else{if(i){for(var o in i){var f=i[o],c=f.spec.state;if(f.key==e.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(r,o)){a[e.name]=c.fromJSON.call(f,t,r[o],a);return}}}a[e.name]=e.init(t,a)}}));return a};O.addApplyListener=function e(t){T.push(t)};O.removeApplyListener=function e(t){var r=T.indexOf(t);if(r>-1){T.splice(r,1)}};Object.defineProperties(O.prototype,C);var T=[];function N(e,t,r){for(var n in e){var i=e[n];if(i instanceof Function){i=i.bind(t)}else if(n=="handleDOMEvents"){i=N(i,t,{})}r[n]=i}return r}var D=function e(t){this.props={};if(t.props){N(t.props,this,this.props)}this.spec=t;this.key=t.key?t.key.key:A("plugin")};D.prototype.getState=function e(t){return t[this.key]};var E=Object.create(null);function A(e){if(e in E){return e+"$"+ ++E[e]}E[e]=0;return e+"$"}var R=function e(t){if(t===void 0)t="key";this.key=A(t)};R.prototype.get=function e(t){return t.config.pluginsByKey[this.key]};R.prototype.getState=function e(t){return t[this.key]};t.Selection=s;t.SelectionRange=f;t.TextSelection=c;t.NodeSelection=p;t.AllSelection=h;t.Transaction=S;t.EditorState=O;t.Plugin=D;t.PluginKey=R},"./node_modules/prosemirror-transform/dist/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/prosemirror-model/dist/index.js");var i=65535;var o=Math.pow(2,16);function s(e,t){return e+t*o}function a(e){return e&i}function f(e){return(e-(e&i))/o}var c=function e(t,r,n){if(r===void 0)r=false;if(n===void 0)n=null;this.pos=t;this.deleted=r;this.recover=n};var l=function e(t,r){if(r===void 0)r=false;this.ranges=t;this.inverted=r};l.prototype.recover=function e(t){var r=this;var n=0,i=a(t);if(!this.inverted){for(var o=0;o<i;o++){n+=r.ranges[o*3+2]-r.ranges[o*3+1]}}return this.ranges[i*3]+n+f(t)};l.prototype.mapResult=function e(t,r){if(r===void 0)r=1;return this._map(t,r,false)};l.prototype.map=function e(t,r){if(r===void 0)r=1;return this._map(t,r,true)};l.prototype._map=function e(t,r,n){var i=this;var o=0,a=this.inverted?2:1,f=this.inverted?1:2;for(var l=0;l<this.ranges.length;l+=3){var p=i.ranges[l]-(i.inverted?o:0);if(p>t){break}var u=i.ranges[l+a],h=i.ranges[l+f],d=p+u;if(t<=d){var v=!u?r:t==p?-1:t==d?1:r;var m=p+o+(v<0?0:h);if(n){return m}var y=s(l/3,t-p);return new c(m,r<0?t!=p:t!=d,y)}o+=h-u}return n?t+o:new c(t+o)};l.prototype.touches=function e(t,r){var n=this;var i=0,o=a(r);var s=this.inverted?2:1,f=this.inverted?1:2;for(var c=0;c<this.ranges.length;c+=3){var l=n.ranges[c]-(n.inverted?i:0);if(l>t){break}var p=n.ranges[c+s],u=l+p;if(t<=u&&c==o*3){return true}i+=n.ranges[c+f]-p}return false};l.prototype.forEach=function e(t){var r=this;var n=this.inverted?2:1,i=this.inverted?1:2;for(var o=0,s=0;o<this.ranges.length;o+=3){var a=r.ranges[o],f=a-(r.inverted?s:0),c=a+(r.inverted?0:s);var l=r.ranges[o+n],p=r.ranges[o+i];t(f,f+l,c,c+p);s+=p-l}};l.prototype.invert=function e(){return new l(this.ranges,!this.inverted)};l.prototype.toString=function e(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)};l.offset=function e(t){return t==0?l.empty:new l(t<0?[0,-t,0]:[0,0,t])};l.empty=new l([]);var p=function e(t,r,n,i){this.maps=t||[];this.from=n||0;this.to=i==null?this.maps.length:i;this.mirror=r};p.prototype.slice=function e(t,r){if(t===void 0)t=0;if(r===void 0)r=this.maps.length;return new p(this.maps,this.mirror,t,r)};p.prototype.copy=function e(){return new p(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)};p.prototype.appendMap=function e(t,r){this.to=this.maps.push(t);if(r!=null){this.setMirror(this.maps.length-1,r)}};p.prototype.appendMapping=function e(t){var r=this;for(var n=0,i=this.maps.length;n<t.maps.length;n++){var o=t.getMirror(n);r.appendMap(t.maps[n],o!=null&&o<n?i+o:null)}};p.prototype.getMirror=function e(t){var r=this;if(this.mirror){for(var n=0;n<this.mirror.length;n++){if(r.mirror[n]==t){return r.mirror[n+(n%2?-1:1)]}}}};p.prototype.setMirror=function e(t,r){if(!this.mirror){this.mirror=[]}this.mirror.push(t,r)};p.prototype.appendMappingInverted=function e(t){var r=this;for(var n=t.maps.length-1,i=this.maps.length+t.maps.length;n>=0;n--){var o=t.getMirror(n);r.appendMap(t.maps[n].invert(),o!=null&&o>n?i-o-1:null)}};p.prototype.invert=function e(){var t=new p;t.appendMappingInverted(this);return t};p.prototype.map=function e(t,r){var n=this;if(r===void 0)r=1;if(this.mirror){return this._map(t,r,true)}for(var i=this.from;i<this.to;i++){t=n.maps[i].map(t,r)}return t};p.prototype.mapResult=function e(t,r){if(r===void 0)r=1;return this._map(t,r,false)};p.prototype._map=function e(t,r,n){var i=this;var o=false,s=null;for(var a=this.from;a<this.to;a++){var f=i.maps[a],l=s&&s[a];if(l!=null&&f.touches(t,l)){t=f.recover(l);continue}var p=f.mapResult(t,r);if(p.recover!=null){var u=i.getMirror(a);if(u!=null&&u>a&&u<i.to){if(p.deleted){a=u;t=i.maps[u].recover(p.recover);continue}else{(s||(s=Object.create(null)))[u]=p.recover}}}if(p.deleted){o=true}t=p.pos}return n?t:new c(t,o)};function u(e){var t=Error.call(this,e);t.__proto__=u.prototype;return t}u.prototype=Object.create(Error.prototype);u.prototype.constructor=u;u.prototype.name="TransformError";var h=function e(t){this.doc=t;this.steps=[];this.docs=[];this.mapping=new p};var d={before:{},docChanged:{}};d.before.get=function(){return this.docs.length?this.docs[0]:this.doc};h.prototype.step=function e(t){var r=this.maybeStep(t);if(r.failed){throw new u(r.failed)}return this};h.prototype.maybeStep=function e(t){var r=t.apply(this.doc);if(!r.failed){this.addStep(t,r.doc)}return r};d.docChanged.get=function(){return this.steps.length>0};h.prototype.addStep=function e(t,r){this.docs.push(this.doc);this.steps.push(t);this.mapping.appendMap(t.getMap());this.doc=r};Object.defineProperties(h.prototype,d);function v(){throw new Error("Override me")}var m=Object.create(null);var y=function e(){};y.prototype.apply=function e(t){return v()};y.prototype.getMap=function e(){return l.empty};y.prototype.invert=function e(t){return v()};y.prototype.map=function e(t){return v()};y.prototype.merge=function e(t){return null};y.prototype.toJSON=function e(){return v()};y.fromJSON=function e(t,r){if(!r||!r.stepType){throw new RangeError("Invalid input for Step.fromJSON")}var n=m[r.stepType];if(!n){throw new RangeError("No step type "+r.stepType+" defined")}return n.fromJSON(t,r)};y.jsonID=function e(t,r){if(t in m){throw new RangeError("Duplicate use of step JSON ID "+t)}m[t]=r;r.prototype.jsonID=t;return r};var g=function e(t,r){this.doc=t;this.failed=r};g.ok=function e(t){return new g(t,null)};g.fail=function e(t){return new g(null,t)};g.fromReplace=function e(t,r,i,o){try{return g.ok(t.replace(r,i,o))}catch(e){if(e instanceof n.ReplaceError){return g.fail(e.message)}throw e}};var w=function(e){function t(t,r,n,i){e.call(this);this.from=t;this.to=r;this.slice=n;this.structure=!!i}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.apply=function e(t){if(this.structure&&x(t,this.from,this.to)){return g.fail("Structure replace would overwrite content")}return g.fromReplace(t,this.from,this.to,this.slice)};t.prototype.getMap=function e(){return new l([this.from,this.to-this.from,this.slice.size])};t.prototype.invert=function e(r){return new t(this.from,this.from+this.slice.size,r.slice(this.from,this.to))};t.prototype.map=function e(r){var n=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);if(n.deleted&&i.deleted){return null}return new t(n.pos,Math.max(n.pos,i.pos),this.slice)};t.prototype.merge=function e(r){if(!(r instanceof t)||r.structure!=this.structure){return null}if(this.from+this.slice.size==r.from&&!this.slice.openEnd&&!r.slice.openStart){var i=this.slice.size+r.slice.size==0?n.Slice.empty:new n.Slice(this.slice.content.append(r.slice.content),this.slice.openStart,r.slice.openEnd);return new t(this.from,this.to+(r.to-r.from),i,this.structure)}else if(r.to==this.from&&!this.slice.openStart&&!r.slice.openEnd){var o=this.slice.size+r.slice.size==0?n.Slice.empty:new n.Slice(r.slice.content.append(this.slice.content),r.slice.openStart,this.slice.openEnd);return new t(r.from,this.to,o,this.structure)}else{return null}};t.prototype.toJSON=function e(){var t={stepType:"replace",from:this.from,to:this.to};if(this.slice.size){t.slice=this.slice.toJSON()}if(this.structure){t.structure=true}return t};t.fromJSON=function e(r,i){if(typeof i.from!="number"||typeof i.to!="number"){throw new RangeError("Invalid input for ReplaceStep.fromJSON")}return new t(i.from,i.to,n.Slice.fromJSON(r,i.slice),!!i.structure)};return t}(y);y.jsonID("replace",w);var S=function(e){function t(t,r,n,i,o,s,a){e.call(this);this.from=t;this.to=r;this.gapFrom=n;this.gapTo=i;this.slice=o;this.insert=s;this.structure=!!a}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.apply=function e(t){if(this.structure&&(x(t,this.from,this.gapFrom)||x(t,this.gapTo,this.to))){return g.fail("Structure gap-replace would overwrite content")}var r=t.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd){return g.fail("Gap is not a flat range")}var n=this.slice.insertAt(this.insert,r.content);if(!n){return g.fail("Content does not fit in gap")}return g.fromReplace(t,this.from,this.to,n)};t.prototype.getMap=function e(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])};t.prototype.invert=function e(r){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,r.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)};t.prototype.map=function e(r){var n=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);var o=r.map(this.gapFrom,-1),s=r.map(this.gapTo,1);if(n.deleted&&i.deleted||o<n.pos||s>i.pos){return null}return new t(n.pos,i.pos,o,s,this.slice,this.insert,this.structure)};t.prototype.toJSON=function e(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};if(this.slice.size){t.slice=this.slice.toJSON()}if(this.structure){t.structure=true}return t};t.fromJSON=function e(r,i){if(typeof i.from!="number"||typeof i.to!="number"||typeof i.gapFrom!="number"||typeof i.gapTo!="number"||typeof i.insert!="number"){throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON")}return new t(i.from,i.to,i.gapFrom,i.gapTo,n.Slice.fromJSON(r,i.slice),i.insert,!!i.structure)};return t}(y);y.jsonID("replaceAround",S);function x(e,t,r){var n=e.resolve(t),i=r-t,o=n.depth;while(i>0&&o>0&&n.indexAfter(o)==n.node(o).childCount){o--;i--}if(i>0){var s=n.node(o).maybeChild(n.indexAfter(o));while(i>0){if(!s||s.isLeaf){return true}s=s.firstChild;i--}}return false}function k(e,t,r){return(t==0||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function b(e){var t=e.parent;var r=t.content.cutByIndex(e.startIndex,e.endIndex);for(var n=e.depth;;--n){var i=e.$from.node(n);var o=e.$from.index(n),s=e.$to.indexAfter(n);if(n<e.depth&&i.canReplace(o,s,r)){return n}if(n==0||i.type.spec.isolating||!k(i,o,s)){break}}}h.prototype.lift=function(e,t){var r=e.$from;var i=e.$to;var o=e.depth;var s=r.before(o+1),a=i.after(o+1);var f=s,c=a;var l=n.Fragment.empty,p=0;for(var u=o,h=false;u>t;u--){if(h||r.index(u)>0){h=true;l=n.Fragment.from(r.node(u).copy(l));p++}else{f--}}var d=n.Fragment.empty,v=0;for(var m=o,y=false;m>t;m--){if(y||i.after(m+1)<i.end(m)){y=true;d=n.Fragment.from(i.node(m).copy(d));v++}else{c++}}return this.step(new S(f,c,s,a,new n.Slice(l.append(d),p,v),l.size-p,true))};function M(e,t,r,n){if(n===void 0)n=e;var i=C(e,t);var o=i&&T(n,t);if(!o){return null}return i.map(O).concat({type:t,attrs:r}).concat(o.map(O))}function O(e){return{type:e,attrs:null}}function C(e,t){var r=e.parent;var n=e.startIndex;var i=e.endIndex;var o=r.contentMatchAt(n).findWrapping(t);if(!o){return null}var s=o.length?o[0]:t;return r.canReplaceWith(n,i,s)?o:null}function T(e,t){var r=e.parent;var n=e.startIndex;var i=e.endIndex;var o=r.child(n);var s=t.contentMatch.findWrapping(o.type);if(!s){return null}var a=s.length?s[s.length-1]:t;var f=a.contentMatch;for(var c=n;f&&c<i;c++){f=f.matchType(r.child(c).type)}if(!f||!f.validEnd){return null}return s}h.prototype.wrap=function(e,t){var r=n.Fragment.empty;for(var i=t.length-1;i>=0;i--){r=n.Fragment.from(t[i].type.create(t[i].attrs,r))}var o=e.start,s=e.end;return this.step(new S(o,s,o,s,new n.Slice(r,0,0),t.length,true))};h.prototype.setBlockType=function(e,t,r,i){var o=this;if(t===void 0)t=e;if(!r.isTextblock){throw new RangeError("Type given to setBlockType should be a textblock")}var s=this.steps.length;this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(r,i)&&N(o.doc,o.mapping.slice(s).map(t),r)){o.clearIncompatible(o.mapping.slice(s).map(t,1),r);var a=o.mapping.slice(s);var f=a.map(t,1),c=a.map(t+e.nodeSize,1);o.step(new S(f,c,f+1,c-1,new n.Slice(n.Fragment.from(r.create(i,null,e.marks)),0,0),1,true));return false}}));return this};function N(e,t,r){var n=e.resolve(t),i=n.index();return n.parent.canReplaceWith(i,i+1,r)}h.prototype.setNodeMarkup=function(e,t,r,i){var o=this.doc.nodeAt(e);if(!o){throw new RangeError("No node at given position")}if(!t){t=o.type}var s=t.create(r,null,i||o.marks);if(o.isLeaf){return this.replaceWith(e,e+o.nodeSize,s)}if(!t.validContent(o.content)){throw new RangeError("Invalid content for node type "+t.name)}return this.step(new S(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new n.Slice(n.Fragment.from(s),0,0),1,true))};function D(e,t,r,n){if(r===void 0)r=1;var i=e.resolve(t),o=i.depth-r;var s=n&&n[n.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount))){return false}for(var a=i.depth-1,f=r-2;a>o;a--,f--){var c=i.node(a),l=i.index(a);if(c.type.spec.isolating){return false}var p=c.content.cutByIndex(l,c.childCount);var u=n&&n[f]||c;if(u!=c){p=p.replaceChild(0,u.type.create(u.attrs))}if(!c.canReplace(l+1,c.childCount)||!u.type.validContent(p)){return false}}var h=i.indexAfter(o);var d=n&&n[0];return i.node(o).canReplaceWith(h,h,d?d.type:i.node(o+1).type)}h.prototype.split=function(e,t,r){if(t===void 0)t=1;var i=this.doc.resolve(e),o=n.Fragment.empty,s=n.Fragment.empty;for(var a=i.depth,f=i.depth-t,c=t-1;a>f;a--,c--){o=n.Fragment.from(i.node(a).copy(o));var l=r&&r[c];s=n.Fragment.from(l?l.type.create(l.attrs,s):i.node(a).copy(s))}return this.step(new w(e,e,new n.Slice(o.append(s),t,t,true)))};function E(e,t){var r=e.resolve(t),n=r.index();return A(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function A(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function R(e,t,r){if(r===void 0)r=-1;var n=e.resolve(t);for(var i=n.depth;;i--){var o=void 0,s=void 0;if(i==n.depth){o=n.nodeBefore;s=n.nodeAfter}else if(r>0){o=n.node(i+1);s=n.node(i).maybeChild(n.index(i)+1)}else{o=n.node(i).maybeChild(n.index(i)-1);s=n.node(i+1)}if(o&&!o.isTextblock&&A(o,s)){return t}if(i==0){break}t=r<0?n.before(i):n.after(i)}}h.prototype.join=function(e,t){if(t===void 0)t=1;var r=new w(e-t,e+t,n.Slice.empty,true);return this.step(r)};function I(e,t,r){var n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r)){return t}if(n.parentOffset==0){for(var i=n.depth-1;i>=0;i--){var o=n.index(i);if(n.node(i).canReplaceWith(o,o,r)){return n.before(i+1)}if(o>0){return null}}}if(n.parentOffset==n.parent.content.size){for(var s=n.depth-1;s>=0;s--){var a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,r)){return n.after(s+1)}if(a<n.node(s).childCount){return null}}}}function z(e,t,r){var n=e.resolve(t);if(!r.content.size){return t}var i=r.content;for(var o=0;o<r.openStart;o++){i=i.firstChild.content}for(var s=1;s<=(r.openStart==0&&r.size?2:1);s++){for(var a=n.depth;a>=0;a--){var f=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1;var c=n.index(a)+(f>0?1:0);if(s==1?n.node(a).canReplace(c,c,i):n.node(a).contentMatchAt(c).findWrapping(i.firstChild.type)){return f==0?n.pos:f<0?n.before(a+1):n.after(a+1)}}}return null}function P(e,t,r){var i=[];for(var o=0;o<e.childCount;o++){var s=e.child(o);if(s.content.size){s=s.copy(P(s.content,t,s))}if(s.isInline){s=t(s,r,o)}i.push(s)}return n.Fragment.fromArray(i)}var F=function(e){function t(t,r,n){e.call(this);this.from=t;this.to=r;this.mark=n}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.apply=function e(t){var r=this;var i=t.slice(this.from,this.to),o=t.resolve(this.from);var s=o.node(o.sharedDepth(this.to));var a=new n.Slice(P(i.content,(function(e,t){if(!t.type.allowsMarkType(r.mark.type)){return e}return e.mark(r.mark.addToSet(e.marks))}),s),i.openStart,i.openEnd);return g.fromReplace(t,this.from,this.to,a)};t.prototype.invert=function e(){return new _(this.from,this.to,this.mark)};t.prototype.map=function e(r){var n=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);if(n.deleted&&i.deleted||n.pos>=i.pos){return null}return new t(n.pos,i.pos,this.mark)};t.prototype.merge=function e(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from){return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)}};t.prototype.toJSON=function e(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}};t.fromJSON=function e(r,n){if(typeof n.from!="number"||typeof n.to!="number"){throw new RangeError("Invalid input for AddMarkStep.fromJSON")}return new t(n.from,n.to,r.markFromJSON(n.mark))};return t}(y);y.jsonID("addMark",F);var _=function(e){function t(t,r,n){e.call(this);this.from=t;this.to=r;this.mark=n}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.apply=function e(t){var r=this;var i=t.slice(this.from,this.to);var o=new n.Slice(P(i.content,(function(e){return e.mark(r.mark.removeFromSet(e.marks))})),i.openStart,i.openEnd);return g.fromReplace(t,this.from,this.to,o)};t.prototype.invert=function e(){return new F(this.from,this.to,this.mark)};t.prototype.map=function e(r){var n=r.mapResult(this.from,1),i=r.mapResult(this.to,-1);if(n.deleted&&i.deleted||n.pos>=i.pos){return null}return new t(n.pos,i.pos,this.mark)};t.prototype.merge=function e(r){if(r instanceof t&&r.mark.eq(this.mark)&&this.from<=r.to&&this.to>=r.from){return new t(Math.min(this.from,r.from),Math.max(this.to,r.to),this.mark)}};t.prototype.toJSON=function e(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}};t.fromJSON=function e(r,n){if(typeof n.from!="number"||typeof n.to!="number"){throw new RangeError("Invalid input for RemoveMarkStep.fromJSON")}return new t(n.from,n.to,r.markFromJSON(n.mark))};return t}(y);y.jsonID("removeMark",_);h.prototype.addMark=function(e,t,r){var n=this;var i=[],o=[],s=null,a=null;this.doc.nodesBetween(e,t,(function(n,f,c){if(!n.isInline){return}var l=n.marks;if(!r.isInSet(l)&&c.type.allowsMarkType(r.type)){var p=Math.max(f,e),u=Math.min(f+n.nodeSize,t);var h=r.addToSet(l);for(var d=0;d<l.length;d++){if(!l[d].isInSet(h)){if(s&&s.to==p&&s.mark.eq(l[d])){s.to=u}else{i.push(s=new _(p,u,l[d]))}}}if(a&&a.to==p){a.to=u}else{o.push(a=new F(p,u,r))}}}));i.forEach((function(e){return n.step(e)}));o.forEach((function(e){return n.step(e)}));return this};h.prototype.removeMark=function(e,t,r){var i=this;if(r===void 0)r=null;var o=[],s=0;this.doc.nodesBetween(e,t,(function(i,a){if(!i.isInline){return}s++;var f=null;if(r instanceof n.MarkType){var c=r.isInSet(i.marks);if(c){f=[c]}}else if(r){if(r.isInSet(i.marks)){f=[r]}}else{f=i.marks}if(f&&f.length){var l=Math.min(a+i.nodeSize,t);for(var p=0;p<f.length;p++){var u=f[p],h=void 0;for(var d=0;d<o.length;d++){var v=o[d];if(v.step==s-1&&u.eq(o[d].style)){h=v}}if(h){h.to=l;h.step=s}else{o.push({style:u,from:Math.max(a,e),to:l,step:s})}}}}));o.forEach((function(e){return i.step(new _(e.from,e.to,e.style))}));return this};h.prototype.clearIncompatible=function(e,t,r){var i=this;if(r===void 0)r=t.contentMatch;var o=this.doc.nodeAt(e);var s=[],a=e+1;for(var f=0;f<o.childCount;f++){var c=o.child(f),l=a+c.nodeSize;var p=r.matchType(c.type,c.attrs);if(!p){s.push(new w(a,l,n.Slice.empty))}else{r=p;for(var u=0;u<c.marks.length;u++){if(!t.allowsMarkType(c.marks[u].type)){i.step(new _(a,l,c.marks[u]))}}}a=l}if(!r.validEnd){var h=r.fillBefore(n.Fragment.empty,true);this.replace(a,a,new n.Slice(h,0,0))}for(var d=s.length-1;d>=0;d--){i.step(s[d])}return this};function B(e,t,r,i){if(r===void 0)r=t;if(i===void 0)i=n.Slice.empty;if(t==r&&!i.size){return null}var o=e.resolve(t),s=e.resolve(r);if(K(o,s,i)){return new w(t,r,i)}var a=G(o,i);var f=j(o,a);var c=q(o,s,f);if(!c){return null}if(f.size!=c.size&&H(o,s,f)){var l=s.depth,p=s.after(l);while(l>1&&p==s.end(--l)){++p}var u=q(o,e.resolve(p),f);if(u){return new S(t,p,r,s.end(),u,f.size)}}return c.size||t!=r?new w(t,r,c):null}h.prototype.replace=function(e,t,r){if(t===void 0)t=e;if(r===void 0)r=n.Slice.empty;var i=B(this.doc,e,t,r);if(i){this.step(i)}return this};h.prototype.replaceWith=function(e,t,r){return this.replace(e,t,new n.Slice(n.Fragment.from(r),0,0))};h.prototype.delete=function(e,t){return this.replace(e,t,n.Slice.empty)};h.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};function $(e,t,r,i){var o=n.Fragment.empty,s=0,a=r[t];if(e.depth>t){var f=$(e,t+1,r,i||a);s=f.openEnd+1;o=n.Fragment.from(e.node(t+1).copy(f.content))}if(a){o=o.append(a.content);s=a.openEnd}if(i){o=o.append(e.node(t).contentMatchAt(e.indexAfter(t)).fillBefore(n.Fragment.empty,true));s=0}return{content:o,openEnd:s}}function j(e,t){var r=$(e,0,t,false);var i=r.content;var o=r.openEnd;return new n.Slice(i,e.depth,o||0)}function V(e,t,r,n,i,o,s){var a,f=e.childCount,c=f-(s>0?1:0);var l=o<0?t:r.node(i);if(o<0){a=l.contentMatchAt(c)}else if(f==1&&s>0){a=l.contentMatchAt(o?r.index(i):r.indexAfter(i))}else{a=l.contentMatchAt(r.indexAfter(i)).matchFragment(e,f>0&&o?1:0,c)}var p=n.node(i);if(s>0&&i<n.depth){var u=p.content.cutByIndex(n.indexAfter(i)).addToStart(e.lastChild);var h=a.fillBefore(u,true);if(h&&h.size&&o>0&&f==1){h=null}if(h){var d=V(e.lastChild.content,e.lastChild,r,n,i+1,f==1?o-1:-1,s-1);if(d){var v=e.lastChild.copy(d);if(h.size){return e.cutByIndex(0,f-1).append(h).addToEnd(v)}else{return e.replaceChild(f-1,v)}}}}if(s>0){a=a.matchType((f==1&&o>0?r.node(i+1):e.lastChild).type)}var m=n.index(i);if(m==p.childCount&&!p.type.compatibleContent(t.type)){return null}var y=a.fillBefore(p.content,true,m);for(var g=m;y&&g<p.content.childCount;g++){if(!l.type.allowsMarks(p.content.child(g).marks)){y=null}}if(!y){return null}if(s>0){var w=J(e.lastChild,s-1,r,i+1,f==1?o-1:-1);e=e.replaceChild(f-1,w)}e=e.append(y);if(n.depth>i){e=e.addToEnd(L(n,i+1))}return e}function J(e,t,r,i,o){var s,a=e.content,f=a.childCount;if(o>=0){s=r.node(i).contentMatchAt(r.indexAfter(i)).matchFragment(a,o>0?1:0,f)}else{s=e.contentMatchAt(f)}if(t>0){var c=J(a.lastChild,t-1,r,i+1,f==1?o-1:-1);a=a.replaceChild(f-1,c)}return e.copy(a.append(s.fillBefore(n.Fragment.empty,true)))}function L(e,t){var r=e.node(t);var n=r.contentMatchAt(0).fillBefore(r.content,true,e.index(t));if(e.depth>t){n=n.addToEnd(L(e,t+1))}return r.copy(n)}function W(e,t,r){while(t>0&&r>0&&e.childCount==1){e=e.firstChild.content;t--;r--}return new n.Slice(e,t,r)}function q(e,t,r){var n=V(r.content,e.node(0),e,t,0,r.openStart,r.openEnd);if(!n){return null}return W(n,r.openStart,t.depth)}function K(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}function H(e,t,r){if(!t.parent.isTextblock){return false}var n=r.openEnd?U(r.content,r.openEnd):e.node(e.depth-(r.openStart-r.openEnd));if(!n.isTextblock){return false}for(var i=t.index();i<t.parent.childCount;i++){if(!n.type.allowsMarks(t.parent.child(i).marks)){return false}}var o;if(r.openEnd){o=n.contentMatchAt(n.childCount)}else{o=n.contentMatchAt(n.childCount);if(r.size){o=o.matchFragment(r.content,r.openStart?1:0)}}o=o.matchFragment(t.parent.content,t.index());return o&&o.validEnd}function U(e,t){for(var r=1;r<t;r++){e=e.lastChild.content}return e.lastChild}function G(e,t){var r=new X(e);for(var n=1;t.size&&n<=3;n++){t=r.placeSlice(t.content,t.openStart,t.openEnd,n)}while(r.open.length){r.closeNode()}return r.placed}var X=function e(t){var r=this;this.open=[];for(var i=0;i<=t.depth;i++){var o=t.node(i),s=o.contentMatchAt(t.indexAfter(i));r.open.push({parent:o,match:s,content:n.Fragment.empty,wrapper:false,openEnd:0,depth:i})}this.placed=[]};X.prototype.placeSlice=function e(t,r,i,o,s){var a=this;if(r>0){var f=t.firstChild;var c=this.placeSlice(f.content,Math.max(0,r-1),i&&t.childCount==1?i-1:0,o,f);if(c.content!=f.content){if(c.content.size){t=t.replaceChild(0,f.copy(c.content));r=c.openStart+1}else{if(t.childCount==1){i=0}t=t.cutByIndex(1);r=0}}}var l=this.placeContent(t,r,i,o,s);if(o>2&&l.size&&r==0){for(var p=0;p<l.content.childCount;p++){var u=l.content.child(p);a.placeContent(u.content,0,i&&p==l.content.childCount.length-1?i-1:0,o,u)}l=n.Fragment.empty}return l};X.prototype.placeContent=function e(t,r,i,o,s){var a=this;var f=0;for(;f<t.childCount;f++){var c=t.child(f),l=false,p=f==t.childCount-1;for(var u=this.open.length-1;u>=0;u--){var h=a.open[u],d=void 0;if(o>1&&(d=h.match.findWrapping(c.type))&&!(s&&d.length&&d[d.length-1]==s.type)){while(this.open.length-1>u){a.closeNode()}for(var v=0;v<d.length;v++){h.match=h.match.matchType(d[v]);u++;h={parent:d[v].create(),match:d[v].contentMatch,content:n.Fragment.empty,wrapper:true,openEnd:0,depth:u+v};a.open.push(h)}}var m=h.match.matchType(c.type);if(!m){var y=h.match.fillBefore(n.Fragment.from(c));if(y){for(var g=0;g<y.childCount;g++){var w=y.child(g);a.addNode(h,w,0);m=h.match.matchFragment(w)}}else if(s&&h.match.matchType(s.type)){break}else{continue}}while(this.open.length-1>u){a.closeNode()}c=c.mark(h.parent.type.allowedMarks(c.marks));if(r){c=Y(c,r,p?i:0);r=0}a.addNode(h,c,p?i:0);h.match=m;if(p){i=0}l=true;break}if(!l){break}}if(this.open.length>1&&(f>0&&f==t.childCount||s&&this.open[this.open.length-1].parent.type==s.type)){this.closeNode()}return new n.Slice(t.cutByIndex(f),r,i)};X.prototype.addNode=function e(t,r,n){t.content=Z(t.content,t.openEnd).addToEnd(r);t.openEnd=n};X.prototype.closeNode=function e(){var t=this.open.pop();if(t.content.size==0){}else if(t.wrapper){this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1)}else{this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd}}};function Y(e,t,r){var n=e.content;if(t>1){var i=Y(e.firstChild,t-1,e.childCount==1?r-1:0);n=e.content.replaceChild(0,i)}var o=e.type.contentMatch.fillBefore(n,r==0);return e.copy(o.append(n))}function Q(e,t){var r=e.content;if(t>1){var i=Q(e.lastChild,t-1);r=e.content.replaceChild(e.childCount-1,i)}var o=e.contentMatchAt(e.childCount).fillBefore(n.Fragment.empty,true);return e.copy(r.append(o))}function Z(e,t){return t?e.replaceChild(e.childCount-1,Q(e.lastChild,t)):e}h.prototype.replaceRange=function(e,t,r){var i=this;if(!r.size){return this.deleteRange(e,t)}var o=this.doc.resolve(e),s=this.doc.resolve(t);if(K(o,s,r)){return this.step(new w(e,t,r))}var a=te(o,this.doc.resolve(t));if(a[a.length-1]==0){a.pop()}var f=-(o.depth+1);a.unshift(f);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var p=o.node(c).type.spec;if(p.defining||p.isolating){break}if(a.indexOf(c)>-1){f=c}else if(o.before(c)==l){a.splice(1,0,-c)}}var u=a.indexOf(f);var h=[],d=r.openStart;for(var v=r.content,m=0;;m++){var y=v.firstChild;h.push(y);if(m==r.openStart){break}v=y.content}if(d>0&&h[d-1].type.spec.defining&&o.node(u).type!=h[d-1].type){d-=1}else if(d>=2&&h[d-1].isTextblock&&h[d-2].type.spec.defining&&o.node(u).type!=h[d-2].type){d-=2}for(var g=r.openStart;g>=0;g--){var S=(g+d+1)%(r.openStart+1);var x=h[S];if(!x){continue}for(var k=0;k<a.length;k++){var b=a[(k+u)%a.length],M=true;if(b<0){M=false;b=-b}var O=o.node(b-1),C=o.index(b-1);if(O.canReplaceWith(C,C,x.type,x.marks)){return i.replace(o.before(b),M?s.after(b):t,new n.Slice(ee(r.content,0,r.openStart,S),S,r.openEnd))}}}return this.replace(e,t,r)};function ee(e,t,r,n,i){if(t<r){var o=e.firstChild;e=e.replaceChild(0,o.copy(ee(o.content,t+1,r,n,o)))}if(t>n){e=i.contentMatchAt(0).fillBefore(e,true).append(e)}return e}h.prototype.replaceRangeWith=function(e,t,r){if(!r.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var i=I(this.doc,e,r.type);if(i!=null){e=t=i}}return this.replaceRange(e,t,new n.Slice(n.Fragment.from(r),0,0))};h.prototype.deleteRange=function(e,t){var r=this;var n=this.doc.resolve(e),i=this.doc.resolve(t);var o=te(n,i);for(var s=0;s<o.length;s++){var a=o[s],f=s==o.length-1;if(f&&a==0||n.node(a).type.contentMatch.validEnd){return r.delete(n.start(a),i.end(a))}if(a>0&&(f||n.node(a-1).canReplace(n.index(a-1),i.indexAfter(a-1)))){return r.delete(n.before(a),i.after(a))}}for(var c=1;c<=n.depth;c++){if(e-n.start(c)==n.depth-c&&t>n.end(c)){return r.delete(n.before(c),t)}}return this.delete(e,t)};function te(e,t){var r=[],n=Math.min(e.depth,t.depth);for(var i=n;i>=0;i--){var o=e.start(i);if(o<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating){break}if(o==t.start(i)){r.push(i)}}return r}t.Transform=h;t.TransformError=u;t.Step=y;t.StepResult=g;t.joinPoint=R;t.canJoin=E;t.canSplit=D;t.insertPoint=I;t.dropPoint=z;t.liftTarget=b;t.findWrapping=M;t.StepMap=l;t.MapResult=c;t.Mapping=p;t.AddMarkStep=F;t.RemoveMarkStep=_;t.ReplaceStep=w;t.ReplaceAroundStep=S;t.replaceStep=B},"./node_modules/prosemirror-view/dist/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r("./node_modules/prosemirror-model/dist/index.js");var i=r("./node_modules/prosemirror-state/dist/index.js");var o=r("./node_modules/prosemirror-transform/dist/index.js");var s={};if(typeof navigator!="undefined"&&typeof document!="undefined"){var a=/Edge\/(\d+)/.exec(navigator.userAgent);var f=/MSIE \d/.test(navigator.userAgent);var c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var l=s.ie=!!(f||c||a);s.ie_version=f?document.documentMode||6:c?+c[1]:a?+a[1]:null;s.gecko=!l&&/gecko\/(\d+)/i.test(navigator.userAgent);s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var p=!l&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!p;s.chrome_version=p&&+p[1];s.ios=!l&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);s.android=/Android \d/.test(navigator.userAgent);s.webkit=!l&&"WebkitAppearance"in document.documentElement.style;s.safari=/Apple Computer/.test(navigator.vendor);s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var u=function(e){for(var t=0;;t++){e=e.previousSibling;if(!e){return t}}};var h=function(e){var t=e.parentNode;return t&&t.nodeType==11?t.host:t};var d=function(e,t,r){var n=document.createRange();n.setEnd(e,r==null?e.nodeValue.length:r);n.setStart(e,t||0);return n};var v=function(e,t,r,n){return r&&(y(e,t,r,n,-1)||y(e,t,r,n,1))};var m=/^(img|br|input|textarea|hr)$/i;function y(e,t,r,n,i){for(;;){if(e==r&&t==n){return true}if(t==(i<0?0:g(e))||e.nodeType==3&&e.nodeValue=="\ufeff"){var o=e.parentNode;if(o.nodeType!=1||w(e)||m.test(e.nodeName)||e.contentEditable=="false"){return false}t=u(e)+(i<0?0:1);e=o}else if(e.nodeType==1){e=e.childNodes[t+(i<0?-1:0)];t=i<0?g(e):0}else{return false}}}function g(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function w(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}var S=function(e){var t=e.isCollapsed;if(t&&s.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed){t=false}return t};function x(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function k(e,t){return typeof e=="number"?e:e[t]}function b(e,t,r){var n=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5;var o=e.dom.ownerDocument,s=o.defaultView;for(var a=r||e.dom;;a=h(a)){if(!a){break}if(a.nodeType!=1){continue}var f=a==o.body||a.nodeType!=1;var c=f?x(s):a.getBoundingClientRect();var l=0,p=0;if(t.top<c.top+k(n,"top")){p=-(c.top-t.top+k(i,"top"))}else if(t.bottom>c.bottom-k(n,"bottom")){p=t.bottom-c.bottom+k(i,"bottom")}if(t.left<c.left+k(n,"left")){l=-(c.left-t.left+k(i,"left"))}else if(t.right>c.right-k(n,"right")){l=t.right-c.right+k(i,"right")}if(l||p){if(f){s.scrollBy(l,p)}else{if(p){a.scrollTop+=p}if(l){a.scrollLeft+=l}}}if(f){break}}}function M(e){var t=e.dom.getBoundingClientRect(),r=Math.max(0,t.top);var n=e.dom.ownerDocument;var i,o;for(var s=(t.left+t.right)/2,a=r+1;a<Math.min(innerHeight,t.bottom);a+=5){var f=e.root.elementFromPoint(s,a);if(f==e.dom||!e.dom.contains(f)){continue}var c=f.getBoundingClientRect();if(c.top>=r-20){i=f;o=c.top;break}}var l=[];for(var p=e.dom;p;p=h(p)){l.push({dom:p,top:p.scrollTop,left:p.scrollLeft});if(p==n.body){break}}return{refDOM:i,refTop:o,stack:l}}function O(e){var t=e.refDOM;var r=e.refTop;var n=e.stack;var i=t?t.getBoundingClientRect().top:0;var o=i==0?0:i-r;for(var s=0;s<n.length;s++){var a=n[s];var f=a.dom;var c=a.top;var l=a.left;if(f.scrollTop!=c+o){f.scrollTop=c+o}if(f.scrollLeft!=l){f.scrollLeft=l}}}function C(e,t){var r,n=2e8,i,o=0;var s=t.top,a=t.top;for(var f=e.firstChild,c=0;f;f=f.nextSibling,c++){var l=void 0;if(f.nodeType==1){l=f.getClientRects()}else if(f.nodeType==3){l=d(f).getClientRects()}else{continue}for(var p=0;p<l.length;p++){var u=l[p];if(u.top<=s&&u.bottom>=a){s=Math.max(u.bottom,s);a=Math.min(u.top,a);var h=u.left>t.left?u.left-t.left:u.right<t.left?t.left-u.right:0;if(h<n){r=f;n=h;i=h&&r.nodeType==3?{left:u.right<t.left?u.right:u.left,top:t.top}:t;if(f.nodeType==1&&h){o=c+(t.left>=(u.left+u.right)/2?1:0)}continue}}if(!r&&(t.left>=u.right&&t.top>=u.top||t.left>=u.left&&t.top>=u.bottom)){o=c+1}}}if(r&&r.nodeType==3){return T(r,i)}if(!r||n&&r.nodeType==1){return{node:e,offset:o}}return C(r,i)}function T(e,t){var r=e.nodeValue.length;var n=document.createRange();for(var i=0;i<r;i++){n.setEnd(e,i+1);n.setStart(e,i);var o=R(n,1);if(o.top==o.bottom){continue}if(o.left-1<=t.left&&o.right+1>=t.left&&o.top-1<=t.top&&o.bottom+1>=t.top){return{node:e,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}}return{node:e,offset:0}}function N(e,t){var r=e.parentNode;if(r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left){return r}return e}function D(e,t,r){if(!e.dom.contains(t.nodeType!=1?t.parentNode:t)){return null}var n=C(t,r);var i=n.node;var o=n.offset;var s=-1;if(i.nodeType==1&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&r.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(i,o,s)}function E(e,t,r,n){var i=-1;for(var o=t;;){if(o==e.dom){break}var s=e.docView.nearestDesc(o,true);if(!s){return null}if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top){i=s.posBefore}else if(a.right<n.left||a.bottom<n.top){i=s.posAfter}else{break}}o=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,r)}function A(e,t){var r=e.root,n,i;if(r.caretPositionFromPoint){var o=r.caretPositionFromPoint(t.left,t.top);if(o){var s;s=o,n=s.offsetNode,i=s.offset}}if(!n&&r.caretRangeFromPoint){var a=r.caretRangeFromPoint(t.left,t.top);if(a){var f;f=a,n=f.startContainer,i=f.startOffset}}var c=r.elementFromPoint(t.left,t.top+1),l;if(!c){return null}c=N(c,t);if(n){if(n==e.dom&&i==n.childNodes.length-1&&n.lastChild.nodeType==1&&t.top>n.lastChild.getBoundingClientRect().bottom){l=e.state.doc.content.size}else if(i==0||n.nodeType!=1||n.childNodes[i-1].nodeName!="BR"){l=E(e,n,i,t)}}if(l==null){l=D(e,c,t);if(l==null){return null}}var p=e.docView.nearestDesc(c,true);return{pos:l,inside:p?p.posAtStart-p.border:-1}}function R(e,t){var r=e.getClientRects();return!r.length?e.getBoundingClientRect():r[t<0?0:r.length-1]}function I(e,t){var r=e.docView.domFromPos(t);var n=r.node;var i=r.offset;var o,s;if(n.nodeType==3){if(i<n.nodeValue.length){s=R(d(n,i,i+1),-1);o="left"}if((!s||s.left==s.right)&&i){s=R(d(n,i-1,i),1);o="right"}}else if(n.firstChild){if(i<n.childNodes.length){var a=n.childNodes[i];s=R(a.nodeType==3?d(a):a,-1);o="left"}if((!s||s.top==s.bottom)&&i){var f=n.childNodes[i-1];s=R(f.nodeType==3?d(f):f,1);o="right"}}else{s=n.getBoundingClientRect();o="left"}var c=s[o];return{top:s.top,bottom:s.bottom,left:c,right:c}}function z(e,t,r){var n=e.state,i=e.root.activeElement;if(n!=t||!e.inDOMChange){e.updateState(t)}if(i!=e.dom){e.focus()}try{return r()}finally{if(n!=t){e.updateState(n)}if(i!=e.dom){i.focus()}}}function P(e,t,r){var n=t.selection;var i=r=="up"?n.$anchor.min(n.$head):n.$anchor.max(n.$head);if(!i.depth){return false}return z(e,t,(function(){var t=e.docView.domFromPos(i.pos);var n=t.node;for(;;){var o=e.docView.nearestDesc(n,true);if(!o||o.node.isBlock){break}n=o.dom.parentNode}var s=I(e,i.pos);for(var a=n.firstChild;a;a=a.nextSibling){var f=void 0;if(a.nodeType==1){f=a.getClientRects()}else if(a.nodeType==3){f=d(a,0,a.nodeValue.length).getClientRects()}else{continue}for(var c=0;c<f.length;c++){var l=f[c];if(l.bottom>l.top&&(r=="up"?l.bottom<s.top+1:l.top>s.bottom-1)){return false}}}return true}))}var F=/[\u0590-\u08ac]/;function _(e,t,r){var n=t.selection;var i=n.$head;if(!i.parent.isTextblock||!i.depth){return false}var o=i.parentOffset,s=!o,a=o==i.parent.content.size;var f=getSelection();if(!F.test(i.parent.textContent)||!f.modify){return r=="left"||r=="backward"?s:a}return z(e,t,(function(){var t=f.getRangeAt(0),n=f.focusNode,o=f.focusOffset;f.modify("move",r,"character");var s=e.docView.domAfterPos(i.before());var a=!s.contains(f.focusNode.nodeType==1?f.focusNode:f.focusNode.parentNode)||n==f.focusNode&&o==f.focusOffset;f.removeAllRanges();f.addRange(t);return a}))}var B=null;var $=null;var j=false;function V(e,t,r){if(B==t&&$==r){return j}B=t;$=r;return j=r=="up"||r=="down"?P(e,t,r):_(e,t,r)}var J=0;var L=1;var W=2;var q=3;var K=function e(t,r,n,i){this.parent=t;this.children=r;this.dom=n;n.pmViewDesc=this;this.contentDOM=i;this.dirty=J};var H={beforePosition:{},size:{},border:{},posBefore:{},posAtStart:{},posAfter:{},posAtEnd:{},contentLost:{}};K.prototype.matchesWidget=function e(){return false};K.prototype.matchesMark=function e(){return false};K.prototype.matchesNode=function e(){return false};K.prototype.matchesHack=function e(){return false};H.beforePosition.get=function(){return false};K.prototype.parseRule=function e(){return null};K.prototype.stopEvent=function e(){return false};H.size.get=function(){var e=this;var t=0;for(var r=0;r<this.children.length;r++){t+=e.children[r].size}return t};H.border.get=function(){return 0};K.prototype.destroy=function e(){var t=this;this.parent=null;if(this.dom.pmViewDesc==this){this.dom.pmViewDesc=null}for(var r=0;r<this.children.length;r++){t.children[r].destroy()}};K.prototype.posBeforeChild=function e(t){var r=this;for(var n=0,i=this.posAtStart;n<this.children.length;n++){var o=r.children[n];if(o==t){return i}i+=o.size}};H.posBefore.get=function(){return this.parent.posBeforeChild(this)};H.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0};H.posAfter.get=function(){return this.posBefore+this.size};H.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border};K.prototype.localPosFromDOM=function e(t,r,n){var i=this;if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode)){if(n<0){var o,s;if(t==this.contentDOM){o=t.childNodes[r-1]}else{while(t.parentNode!=this.contentDOM){t=t.parentNode}o=t.previousSibling}while(o&&!((s=o.pmViewDesc)&&s.parent==this)){o=o.previousSibling}return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{var a,f;if(t==this.contentDOM){a=t.childNodes[r]}else{while(t.parentNode!=this.contentDOM){t=t.parentNode}a=t.nextSibling}while(a&&!((f=a.pmViewDesc)&&f.parent==this)){a=a.nextSibling}return a?this.posBeforeChild(f):this.posAtEnd}}var c;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM)){c=t.compareDocumentPosition(this.contentDOM)&2}else if(this.dom.firstChild){if(r==0){for(var l=t;;l=l.parentNode){if(l==i.dom){c=false;break}if(l.parentNode.firstChild!=l){break}}}if(c==null&&r==t.childNodes.length){for(var p=t;;p=p.parentNode){if(p==i.dom){c=true;break}if(p.parentNode.lastChild!=p){break}}}}return(c==null?n>0:c)?this.posAtEnd:this.posAtStart};K.prototype.nearestDesc=function e(t,r){var n=this;for(var i=true,o=t;o;o=o.parentNode){var s=n.getDesc(o);if(s&&(!r||s.node)){if(i&&s.nodeDOM&&!(s.nodeDOM.nodeType==1?s.nodeDOM.contains(t):s.nodeDOM==t)){i=false}else{return s}}}};K.prototype.getDesc=function e(t){var r=this;var n=t.pmViewDesc;for(var i=n;i;i=i.parent){if(i==r){return n}}};K.prototype.posFromDOM=function e(t,r,n){var i=this;for(var o=t;;o=o.parentNode){var s=i.getDesc(o);if(s){return s.localPosFromDOM(t,r,n)}}};K.prototype.descAt=function e(t){var r=this;for(var n=0,i=0;n<this.children.length;n++){var o=r.children[n],s=i+o.size;if(i==t&&s!=i){while(!o.border&&o.children.length){o=o.children[0]}return o}if(t<s){return o.descAt(t-i-o.border)}i=s}};K.prototype.domFromPos=function e(t){var r=this;if(!this.contentDOM){return{node:this.dom,offset:0}}for(var n=0,i=0;;i++){if(n==t){while(i<this.children.length&&this.children[i].beforePosition){i++}return{node:r.contentDOM,offset:i}}if(i==r.children.length){throw new Error("Invalid position "+t)}var o=r.children[i],s=n+o.size;if(t<s){return o.domFromPos(t-n-o.border)}n=s}};K.prototype.parseRange=function e(t,r,n){var i=this;if(n===void 0)n=0;if(this.children.length==0){return{node:this.contentDOM,from:t,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length}}var o=-1,s=-1;for(var a=0,f=0;;f++){var c=i.children[f],l=a+c.size;if(o==-1&&t<=l){var p=a+c.border;if(t>=p&&r<=l-c.border&&c.node&&c.contentDOM&&i.contentDOM.contains(c.contentDOM)){return c.parseRange(t-p,r-p,n+p)}t=n+a;for(var h=f;h>0;h--){var d=i.children[h-1];if(d.size&&d.dom.parentNode==i.contentDOM&&!d.emptyChildAt(1)){o=u(d.dom)+1;break}t-=d.size}if(o==-1){o=0}}if(o>-1&&r<=l){r=n+l;for(var v=f+1;v<this.children.length;v++){var m=i.children[v];if(m.size&&m.dom.parentNode==i.contentDOM&&!m.emptyChildAt(-1)){s=u(m.dom);break}r+=m.size}if(s==-1){s=i.contentDOM.childNodes.length}break}a=l}return{node:this.contentDOM,from:t,to:r,fromOffset:o,toOffset:s}};K.prototype.emptyChildAt=function e(t){if(this.border||!this.contentDOM||!this.children.length){return false}var r=this.children[t<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(t)};K.prototype.domAfterPos=function e(t){var r=this.domFromPos(t);var n=r.node;var i=r.offset;if(n.nodeType!=1||i==n.childNodes.length){throw new RangeError("No node after pos "+t)}return n.childNodes[i]};K.prototype.setSelection=function e(t,r,n,i){var o=this;var s=Math.min(t,r),a=Math.max(t,r);for(var f=0,c=0;f<this.children.length;f++){var l=o.children[f],p=c+l.size;if(s>c&&a<p){return l.setSelection(t-c-l.border,r-c-l.border,n,i)}c=p}var u=this.domFromPos(t),h=this.domFromPos(r);var d=n.getSelection(),m=document.createRange();if(!i&&v(u.node,u.offset,d.anchorNode,d.anchorOffset)&&v(h.node,h.offset,d.focusNode,d.focusOffset)){return}if(d.extend){m.setEnd(u.node,u.offset);m.collapse(false)}else{if(t>r){var y=u;u=h;h=y}m.setEnd(h.node,h.offset);m.setStart(u.node,u.offset)}d.removeAllRanges();d.addRange(m);if(d.extend){d.extend(h.node,h.offset)}};K.prototype.ignoreMutation=function e(t){return!this.contentDOM};H.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)};K.prototype.markDirty=function e(t,r){var n=this;for(var i=0,o=0;o<this.children.length;o++){var s=n.children[o],a=i+s.size;if(i==a?t<=a&&r>=i:t<a&&r>i){var f=i+s.border,c=a-s.border;if(t>=f&&r<=c){n.dirty=t==i||r==a?W:L;if(t==f&&r==c&&s.contentLost){s.dirty=q}else{s.markDirty(t-f,r-f)}return}else{s.dirty=q}}i=a}this.dirty=W};Object.defineProperties(K.prototype,H);var U=[];var G=function(e){function t(t,r,n,i){var o,s=r.type.toDOM;if(typeof s=="function"){s=s(n,(function(){if(!o){return i}if(o.parent){return o.parent.posBeforeChild(o)}}))}if(!r.type.spec.raw){if(s.nodeType!=1){var a=document.createElement("span");a.appendChild(s);s=a}s.contentEditable=false;s.classList.add("ProseMirror-widget")}e.call(this,t,U,s,null);this.widget=r;o=this}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={beforePosition:{}};r.beforePosition.get=function(){return this.widget.type.side<0};t.prototype.matchesWidget=function e(t){return this.dirty==J&&t.type.eq(this.widget.type)};t.prototype.parseRule=function e(){return{ignore:true}};t.prototype.stopEvent=function e(t){var r=this.widget.spec.stopEvent;return r?r(t):false};Object.defineProperties(t.prototype,r);return t}(K);var X=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.parseRule=function t(){var r;for(var n=this.dom.firstChild;n;n=n.nextSibling){var i=void 0;if(n.nodeType==3){var o=n.nodeValue.replace(/\ufeff/g,"");if(!o){continue}i=document.createTextNode(o)}else if(n.textContent=="\ufeff"){continue}else{i=n.cloneNode(true)}if(!r){r=document.createDocumentFragment()}r.appendChild(i)}if(r){return{skip:r}}else{return e.prototype.parseRule.call(this)}};t.prototype.ignoreMutation=function e(){return false};return t}(G);var Y=function(e){function t(t,r,n,i){e.call(this,t,[],n,i);this.mark=r}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.create=function e(r,i,o,s){var a=s.nodeViews[i.type.name];var f=a&&a(i,s,o);if(!f||!f.dom){f=n.DOMSerializer.renderSpec(document,i.type.spec.toDOM(i,o))}return new t(r,i,f.dom,f.contentDOM||f.dom)};t.prototype.parseRule=function e(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}};t.prototype.matchesMark=function e(t){return this.dirty!=q&&this.mark.eq(t)};t.prototype.markDirty=function t(r,n){e.prototype.markDirty.call(this,r,n);if(this.dirty!=J){var i=this.parent;while(!i.node){i=i.parent}if(i.dirty<this.dirty){i.dirty=this.dirty}this.dirty=J}};return t}(K);var Q=function(e){function t(t,r,n,i,o,s,a,f,c){e.call(this,t,r.isLeaf?U:[],o,s);this.nodeDOM=a;this.node=r;this.outerDeco=n;this.innerDeco=i;if(s){this.updateChildren(f,c)}}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var r={size:{},border:{}};t.create=function e(r,i,o,s,a,f){var c=a.nodeViews[i.type.name],l;var p=c&&c(i,a,(function(){if(!l){return f}if(l.parent){return l.parent.posBeforeChild(l)}}),o);var u=p&&p.dom,h=p&&p.contentDOM;if(i.isText){if(!u){u=document.createTextNode(i.text)}else if(u.nodeType!=3){throw new RangeError("Text must be rendered as a DOM text node")}}else if(!u){var d;d=n.DOMSerializer.renderSpec(document,i.type.spec.toDOM(i)),u=d.dom,h=d.contentDOM}if(!h&&!i.isText&&u.nodeName!="BR"){u.contentEditable=false;if(i.type.spec.draggable){u.draggable=true}}var v=u;u=ce(u,o,i);if(p){return l=new re(r,i,o,s,u,h,v,p,a,f+1)}else if(i.isText){return new ee(r,i,o,s,u,v,a)}else{return new t(r,i,o,s,u,h,v,a,f+1)}};t.prototype.parseRule=function e(){var t=this;if(this.node.type.spec.reparseInView){return null}var r={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.spec.code){r.preserveWhitespace="full"}if(this.contentDOM&&!this.contentLost){r.contentElement=this.contentDOM}else{r.getContent=function(){return t.contentDOM?n.Fragment.empty:t.node.content}}return r};t.prototype.matchesNode=function e(t,r,n){return this.dirty==J&&t.eq(this.node)&&le(r,this.outerDeco)&&n.eq(this.innerDeco)};r.size.get=function(){return this.node.nodeSize};r.border.get=function(){return this.node.isLeaf?0:1};t.prototype.updateChildren=function e(t,r){var i=this;var o=new ue(this),s=this.node.inlineContent;ve(this.node,this.innerDeco,(function(e,a){if(e.spec.marks){o.syncToMarks(e.spec.marks,s,t)}else if(e.type.side>=0){o.syncToMarks(a==i.node.childCount?n.Mark.none:i.node.child(a).marks,s,t)}o.placeWidget(e,t,r)}),(function(e,n,i,a){o.syncToMarks(e.marks,s,t);o.findNodeMatch(e,n,i,a)||o.updateNextNode(e,n,i,t,a)||o.addNode(e,n,i,t,r);r+=e.nodeSize}));o.syncToMarks(U,s,t);if(this.node.isTextblock){o.addTextblockHacks()}o.destroyRest();if(o.changed||this.dirty==W){this.renderChildren()}};t.prototype.renderChildren=function e(){ne(this.contentDOM,this.children,t.is);if(s.ios){me(this.dom)}};t.prototype.update=function e(t,r,n,i){if(this.dirty==q||!t.sameMarkup(this.node)){return false}this.updateInner(t,r,n,i);return true};t.prototype.updateInner=function e(t,r,n,i){this.updateOuterDeco(r);this.node=t;this.innerDeco=n;if(this.contentDOM){this.updateChildren(i,this.posAtStart)}this.dirty=J};t.prototype.updateOuterDeco=function e(t){if(le(t,this.outerDeco)){return}var r=this.nodeDOM.nodeType!=1;var n=this.dom;this.dom=ae(this.dom,this.nodeDOM,se(this.outerDeco,this.node,r),se(t,this.node,r));if(this.dom!=n){n.pmViewDesc=null;this.dom.pmViewDesc=this}this.outerDeco=t};t.prototype.selectNode=function e(){this.nodeDOM.classList.add("ProseMirror-selectednode");if(this.contentDOM||!this.node.type.spec.draggable){this.dom.draggable=true}};t.prototype.deselectNode=function e(){this.nodeDOM.classList.remove("ProseMirror-selectednode");if(this.contentDOM||!this.node.type.spec.draggable){this.dom.draggable=false}};Object.defineProperties(t.prototype,r);return t}(K);function Z(e,t,r,n,i){ce(n,t,e);return new Q(null,e,t,r,n,n,n,i,0)}var ee=function(e){function t(t,r,n,i,o,s,a){e.call(this,t,r,n,i,o,null,s,a)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.parseRule=function e(){var t=this.nodeDOM.parentNode;return t?{skip:t}:{ignore:true}};t.prototype.update=function e(t,r){if(this.dirty==q||this.dirty!=J&&!this.inParent()||!t.sameMarkup(this.node)){return false}this.updateOuterDeco(r);if((this.dirty!=J||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue){this.nodeDOM.nodeValue=t.text}this.node=t;this.dirty=J;return true};t.prototype.inParent=function e(){var t=this.parent.contentDOM;for(var r=this.nodeDOM;r;r=r.parentNode){if(r==t){return true}}return false};t.prototype.domFromPos=function e(t){return{node:this.nodeDOM,offset:t}};t.prototype.localPosFromDOM=function t(r,n,i){if(r==this.nodeDOM){return this.posAtStart+Math.min(n,this.node.text.length)}return e.prototype.localPosFromDOM.call(this,r,n,i)};t.prototype.ignoreMutation=function e(t){return t.type!="characterData"};return t}(Q);var te=function(e){function t(){e.apply(this,arguments)}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.parseRule=function e(){return{ignore:true}};t.prototype.matchesHack=function e(){return this.dirty==J};return t}(K);var re=function(e){function t(t,r,n,i,o,s,a,f,c,l){e.call(this,t,r,n,i,o,s,a,c,l);this.spec=f}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.update=function t(r,n,i,o){if(this.dirty==q){return false}if(this.spec.update){var s=this.spec.update(r,n);if(s){this.updateInner(r,n,i,o)}return s}else if(!this.contentDOM&&!r.isLeaf){return false}else{return e.prototype.update.call(this,r,n,i,o)}};t.prototype.selectNode=function t(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)};t.prototype.deselectNode=function t(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)};t.prototype.setSelection=function t(r,n,i,o){this.spec.setSelection?this.spec.setSelection(r,n,i):e.prototype.setSelection.call(this,r,n,i,o)};t.prototype.destroy=function t(){if(this.spec.destroy){this.spec.destroy()}e.prototype.destroy.call(this)};t.prototype.stopEvent=function e(t){return this.spec.stopEvent?this.spec.stopEvent(t):false};t.prototype.ignoreMutation=function t(r){return this.spec.ignoreMutation?this.spec.ignoreMutation(r):e.prototype.ignoreMutation.call(this,r)};return t}(Q);function ne(e,t){var r=e.firstChild;for(var n=0;n<t.length;n++){var i=t[n],o=i.dom;if(o.parentNode==e){while(o!=r){r=pe(r)}r=r.nextSibling}else{e.insertBefore(o,r)}if(i instanceof Y){var s=r?r.previousSibling:e.lastChild;ne(i.contentDOM,i.children);r=s?s.nextSibling:e.firstChild}}while(r){r=pe(r)}}function ie(e){if(e){this.nodeName=e}}ie.prototype=Object.create(null);var oe=[new ie];function se(e,t,r){if(e.length==0){return oe}var n=r?oe[0]:new ie,i=[n];for(var o=0;o<e.length;o++){var s=e[o].type.attrs,a=n;if(!s){continue}if(s.nodeName){i.push(a=new ie(s.nodeName))}for(var f in s){var c=s[f];if(c==null){continue}if(r&&i.length==1){i.push(a=n=new ie(t.isInline?"span":"div"))}if(f=="class"){a.class=(a.class?a.class+" ":"")+c}else if(f=="style"){a.style=(a.style?a.style+";":"")+c}else if(f!="nodeName"){a[f]=c}}}return i}function ae(e,t,r,n){if(r==oe&&n==oe){return t}var i=t;for(var o=0;o<n.length;o++){var s=n[o],a=r[o];if(o){var f=void 0;if(a&&a.nodeName==s.nodeName&&i!=e&&(f=t.parentNode)&&f.tagName.toLowerCase()==s.nodeName){i=f}else{f=document.createElement(s.nodeName);f.appendChild(i);i=f}}fe(i,a||oe[0],s)}return i}function fe(e,t,r){for(var n in t){if(n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)){e.removeAttribute(n)}}for(var i in r){if(i!="class"&&i!="style"&&i!="nodeName"&&r[i]!=t[i]){e.setAttribute(i,r[i])}}if(t.class!=r.class){var o=t.class?t.class.split(" "):U;var s=r.class?r.class.split(" "):U;for(var a=0;a<o.length;a++){if(s.indexOf(o[a])==-1){e.classList.remove(o[a])}}for(var f=0;f<s.length;f++){if(o.indexOf(s[f])==-1){e.classList.add(s[f])}}}if(t.style!=r.style){if(t.style){var c=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,l;while(l=c.exec(t.style)){e.style[l[1].toLowerCase()]=""}}if(r.style){e.style.cssText+=r.style}}}function ce(e,t,r){return ae(e,e,oe,se(t,r,e.nodeType!=1))}function le(e,t){if(e.length!=t.length){return false}for(var r=0;r<e.length;r++){if(!e[r].type.eq(t[r].type)){return false}}return true}function pe(e){var t=e.nextSibling;e.parentNode.removeChild(e);return t}var ue=function e(t){this.top=t;this.index=0;this.stack=[];this.changed=false;this.preMatched=he(t.node.content,t.children)};ue.prototype.destroyBetween=function e(t,r){var n=this;if(t==r){return}for(var i=t;i<r;i++){n.top.children[i].destroy()}this.top.children.splice(t,r-t);this.changed=true};ue.prototype.destroyRest=function e(){this.destroyBetween(this.index,this.top.children.length)};ue.prototype.syncToMarks=function e(t,r,n){var i=this;var o=0,s=this.stack.length>>1;var a=Math.min(s,t.length);while(o<a&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(t[o])&&t[o].type.spec.spanning!==false){o++}while(o<s){i.destroyRest();i.top.dirty=J;i.index=i.stack.pop();i.top=i.stack.pop();s--}while(s<t.length){i.stack.push(i.top,i.index+1);var f=-1;for(var c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){if(i.top.children[c].matchesMark(t[s])){f=c;break}}if(f>-1){if(f>i.index){i.changed=true;i.top.children.splice(i.index,f-i.index)}i.top=i.top.children[i.index]}else{var l=Y.create(i.top,t[s],r,n);i.top.children.splice(i.index,0,l);i.top=l;i.changed=true}i.index=0;s++}};ue.prototype.findNodeMatch=function e(t,r,n,i){var o=this;var s=-1,a=this.preMatched[i],f=this.top.children;if(a&&a.matchesNode(t,r,n)){s=f.indexOf(a)}else{for(var c=this.index,l=Math.min(f.length,c+5);c<l;c++){var p=f[c];if(p.matchesNode(t,r,n)&&o.preMatched.indexOf(p)<0){s=c;break}}}if(s<0){return false}this.destroyBetween(this.index,s);this.index++;return true};ue.prototype.updateNextNode=function e(t,r,n,i,o){if(this.index==this.top.children.length){return false}var s=this.top.children[this.index];if(s instanceof Q){var a=this.preMatched.indexOf(s);if(a>-1&&a!=o){return false}var f=s.dom;if(s.update(t,r,n,i)){if(s.dom!=f){this.changed=true}this.index++;return true}}return false};ue.prototype.addNode=function e(t,r,n,i,o){this.top.children.splice(this.index++,0,Q.create(this.top,t,r,n,i,o));this.changed=true};ue.prototype.placeWidget=function e(t,r,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t)){this.index++}else{var i=new(t.spec.isCursorWrapper?X:G)(this.top,t,r,n);this.top.children.splice(this.index++,0,i);this.changed=true}};ue.prototype.addTextblockHacks=function e(){var t=this.top.children[this.index-1];while(t instanceof Y){t=t.children[t.children.length-1]}if(!t||!(t instanceof ee)||/\n$/.test(t.node.text)){if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack()){this.index++}else{var r=document.createElement("br");this.top.children.splice(this.index++,0,new te(this.top,U,r,null));this.changed=true}}};function he(e,t){var r=[],n=e.childCount;for(var i=t.length-1;n>0&&i>=0;i--){var o=t[i],s=o.node;if(!s){continue}if(s!=e.child(n-1)){break}r[--n]=o}return r}function de(e,t){return e.type.side-t.type.side}function ve(e,t,r,n){var i=t.locals(e),o=0;if(i.length==0){for(var s=0;s<e.childCount;s++){var a=e.child(s);n(a,i,t.forChild(o,a),s);o+=a.nodeSize}return}var f=0,c=[],l=null;for(var p=0;;){if(f<i.length&&i[f].to==o){var u=i[f++],h=void 0;while(f<i.length&&i[f].to==o){(h||(h=[u])).push(i[f++])}if(h){h.sort(de);for(var d=0;d<h.length;d++){r(h[d],p)}}else{r(u,p)}}var v=void 0;if(l){v=l;l=null}else if(p<e.childCount){v=e.child(p++)}else{break}for(var m=0;m<c.length;m++){if(c[m].to<=o){c.splice(m--,1)}}while(f<i.length&&i[f].from==o){c.push(i[f++])}var y=o+v.nodeSize;if(v.isText){var g=y;if(f<i.length&&i[f].from<g){g=i[f].from}for(var w=0;w<c.length;w++){if(c[w].to<g){g=c[w].to}}if(g<y){l=v.cut(g-o);v=v.cut(0,g-o);y=g}}n(v,c.length?c.slice():U,t.forChild(o,v),p-1);o=y}}function me(e){if(e.nodeName=="UL"||e.nodeName=="OL"){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important";window.getComputedStyle(e).listStyle;e.style.cssText=t}}function ye(e,t){var r=e.selection;var n=r.$anchor;var o=r.$head;var s=t>0?n.max(o):n.min(o);var a=!s.parent.inlineContent?s:s.depth?e.doc.resolve(t>0?s.after():s.before()):null;return a&&i.Selection.findFrom(a,t)}function ge(e,t){e.dispatch(e.state.tr.setSelection(t).scrollIntoView());return true}function we(e,t){var r=e.state.selection;if(r instanceof i.TextSelection){if(!r.empty){return false}else if(e.endOfTextblock(t>0?"right":"left")){var n=ye(e.state,t);if(n&&n instanceof i.NodeSelection){return ge(e,n)}return false}else{var o=r.$head,s=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter,a;if(s&&i.NodeSelection.isSelectable(s)){var f=t<0?o.pos-s.nodeSize:o.pos;if(s.isAtom||(a=e.docView.descAt(f))&&!a.contentDOM){return ge(e,new i.NodeSelection(t<0?e.state.doc.resolve(o.pos-s.nodeSize):o))}}return false}}else if(r instanceof i.NodeSelection&&r.node.isInline){return ge(e,new i.TextSelection(t>0?r.$to:r.$from))}else{var c=ye(e.state,t);if(c){return ge(e,c)}return false}}function Se(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function xe(e){var t=e.pmViewDesc;return t&&t.size==0&&(e.nextSibling||e.nodeName!="BR")}function ke(e){var t=e.root.getSelection();var r=t.focusNode,n=t.focusOffset;if(!r){return}var i,o,a=false;if(s.gecko&&r.nodeType==1&&n<Se(r)&&xe(r.childNodes[n])){a=true}for(;;){if(n>0){if(r.nodeType!=1){if(r.nodeType==3&&r.nodeValue.charAt(n-1)=="\ufeff"){if(s.ie&&s.ie_version<=11){a=true}i=r;o=--n}else{break}}else{var f=r.childNodes[n-1];if(xe(f)){i=r;o=--n}else if(f.nodeType==3){r=f;n=r.nodeValue.length}else{break}}}else if(Me(r)){break}else{var c=r.previousSibling;while(c&&xe(c)){i=r.parentNode;o=u(c);c=c.previousSibling}if(!c){r=r.parentNode;if(r==e.dom){break}n=0}else{r=c;n=Se(r)}}}if(a){Oe(e,t,r,n)}else if(i){Oe(e,t,i,o)}}function be(e){var t=e.root.getSelection();var r=t.focusNode,n=t.focusOffset;if(!r){return}var i=Se(r);var o,s;for(;;){if(n<i){if(r.nodeType!=1){break}var a=r.childNodes[n];if(xe(a)){o=r;s=++n}else{break}}else if(Me(r)){break}else{var f=r.nextSibling;while(f&&xe(f)){o=f.parentNode;s=u(f)+1;f=f.nextSibling}if(!f){r=r.parentNode;if(r==e.dom){break}n=i=0}else{r=f;n=0;i=Se(r)}}}if(o){Oe(e,t,o,s)}}function Me(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Oe(e,t,r,n){if(S(t)){var i=document.createRange();i.setEnd(r,n);i.setStart(r,n);t.removeAllRanges();t.addRange(i)}else if(t.extend){t.extend(r,n)}e.selectionReader.storeDOMState(e.selection)}function Ce(e,t){var r=e.state.selection;if(r instanceof i.TextSelection&&!r.empty){return false}var n=r.$from;var o=r.$to;if(!n.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=ye(e.state,t);if(s&&s instanceof i.NodeSelection){return ge(e,s)}}if(!n.parent.inlineContent){var a=i.Selection.findFrom(t<0?n:o,t);return a?ge(e,a):true}return false}function Te(e,t){if(!(e.state.selection instanceof i.TextSelection)){return true}var r=e.state.selection;var n=r.$head;var o=r.$anchor;var s=r.empty;if(!n.sameParent(o)){return true}if(!s){return false}if(e.endOfTextblock(t>0?"forward":"backward")){return true}var a=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(a&&!a.isText){var f=e.state.tr;if(t<0){f.delete(n.pos-a.nodeSize,n.pos)}else{f.delete(n.pos,n.pos+a.nodeSize)}e.dispatch(f);return true}return false}function Ne(e,t,r){e.domObserver.stop();t.contentEditable=r;e.domObserver.start()}function De(e){if(!s.chrome||e.state.selection.$head.parentOffset>0){return}var t=e.root.getSelection();var r=t.focusNode;var n=t.focusOffset;if(r&&r.nodeType==1&&n==0&&r.firstChild&&r.firstChild.contentEditable=="false"){var i=r.firstChild;Ne(e,i,true);setTimeout((function(){return Ne(e,i,false)}),20)}}function Ee(e){var t="";if(e.ctrlKey){t+="c"}if(e.metaKey){t+="m"}if(e.altKey){t+="a"}if(e.shiftKey){t+="s"}return t}function Ae(e,t){var r=t.keyCode,n=Ee(t);if(r==8||s.mac&&r==72&&n=="c"){return Te(e,-1)||ke(e)}else if(r==46||s.mac&&r==68&&n=="c"){return Te(e,1)||be(e)}else if(r==13||r==27){return true}else if(r==37){return we(e,-1)||ke(e)}else if(r==39){return we(e,1)||be(e)}else if(r==38){return Ce(e,-1)||ke(e)}else if(r==40){return De(e)||Ce(e,1)||be(e)}else if(n==(s.mac?"m":"c")&&(r==66||r==73||r==89||r==90)){return true}return false}var Re=function e(t,r,n){this.prev=t;this.mapping=r;this.state=n};var Ie=function e(t){this.seen=[new Re(null,null,t)];i.EditorState.addApplyListener(this.track=this.track.bind(this))};Ie.prototype.destroy=function e(){i.EditorState.removeApplyListener(this.track)};Ie.prototype.find=function e(t){var r=this;for(var n=this.seen.length-1;n>=0;n--){var i=r.seen[n];if(i.state==t){return i}}};Ie.prototype.track=function e(t,r,n){var i=this.seen.length<200?this.find(t):null;if(i){this.seen.push(new Re(i,r.docChanged?r.mapping:null,n))}};Ie.prototype.getMapping=function e(t,r){var n=this.find(t);if(!n){return null}var i=[];for(var s=n;s;s=s.prev){if(s.mapping){i.push(s.mapping)}}var a=r||new o.Mapping;for(var f=i.length-1;f>=0;f--){a.appendMapping(i[f])}return a};var ze=function e(t){var r=this;this.view=t;this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null;this.lastSelection=t.state.selection;this.ignoreUpdates=false;this.suppressUpdates=false;this.poller=_e(this);this.focusFunc=function(){return r.poller.start(Ke(r.view))}.bind(this);this.blurFunc=this.poller.stop;t.dom.addEventListener("focus",this.focusFunc);t.dom.addEventListener("blur",this.blurFunc);if(!t.editable){this.poller.start(false)}};ze.prototype.destroy=function e(){this.view.dom.removeEventListener("focus",this.focusFunc);this.view.dom.removeEventListener("blur",this.blurFunc);this.poller.stop()};ze.prototype.poll=function e(t){this.poller.poll(t)};ze.prototype.editableChanged=function e(){if(!this.view.editable){this.poller.start()}else if(!Ke(this.view)){this.poller.stop()}};ze.prototype.domChanged=function e(){var t=this.view.root.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastHeadNode||t.focusOffset!=this.lastHeadOffset};ze.prototype.storeDOMState=function e(t){var r=this.view.root.getSelection();this.lastAnchorNode=r.anchorNode;this.lastAnchorOffset=r.anchorOffset;this.lastHeadNode=r.focusNode;this.lastHeadOffset=r.focusOffset;this.lastSelection=t};ze.prototype.clearDOMState=function e(){this.lastAnchorNode=this.lastSelection=null};ze.prototype.readFromDOM=function e(t){if(this.ignoreUpdates||!this.domChanged()||!Ke(this.view)){return}if(this.suppressUpdates){return Be(this.view)}if(!this.view.inDOMChange){this.view.domObserver.flush()}if(this.view.inDOMChange){return}var r=this.view.root.getSelection(),n=this.view.state.doc;var o=this.view.docView.nearestDesc(r.focusNode),s=o&&o.size==0;var a=this.view.docView.posFromDOM(r.focusNode,r.focusOffset);var f=n.resolve(a),c,l;if(S(r)){c=f;while(o&&!o.node){o=o.parent}if(o&&o.node.isAtom&&i.NodeSelection.isSelectable(o.node)&&o.parent){var p=o.posBefore;l=new i.NodeSelection(a==p?f:n.resolve(p))}}else{c=n.resolve(this.view.docView.posFromDOM(r.anchorNode,r.anchorOffset))}if(!l){var u=t=="pointer"||this.view.state.selection.head<f.pos&&!s?1:-1;l=qe(this.view,c,f,u)}if(!this.view.state.selection.eq(l)){var h=this.view.state.tr.setSelection(l);if(t=="pointer"){h.setMeta("pointer",true)}else if(t=="key"){h.scrollIntoView()}this.view.dispatch(h)}else{Be(this.view)}};var Pe=function e(t){var r=this;this.listening=false;this.curOrigin=null;this.originTime=0;this.reader=t;this.readFunc=function(){return t.readFromDOM(r.originTime>Date.now()-50?r.curOrigin:null)}};Pe.prototype.poll=function e(t){this.curOrigin=t;this.originTime=Date.now()};Pe.prototype.start=function e(t){if(!this.listening){var r=this.reader.view.dom.ownerDocument;r.addEventListener("selectionchange",this.readFunc);this.listening=true;if(t){this.readFunc()}}};Pe.prototype.stop=function e(){if(this.listening){var t=this.reader.view.dom.ownerDocument;t.removeEventListener("selectionchange",this.readFunc);this.listening=false}};var Fe=function e(t){this.polling=null;this.reader=t;this.pollFunc=this.doPoll.bind(this,null)};Fe.prototype.doPoll=function e(t){var r=this.reader.view;if(r.focused||!r.editable){this.reader.readFromDOM(t);this.polling=setTimeout(this.pollFunc,100)}else{this.polling=null}};Fe.prototype.poll=function e(t){clearTimeout(this.polling);this.polling=setTimeout(t?this.doPoll.bind(this,t):this.pollFunc,0)};Fe.prototype.start=function e(){if(this.polling==null){this.poll()}};Fe.prototype.stop=function e(){clearTimeout(this.polling);this.polling=null};function _e(e){return new("onselectionchange"in document?Pe:Fe)(e)}function Be(e,t,r){var n=e.state.selection;Le(e,n);if(e.editable&&!e.hasFocus()){if(!t){return}if(s.gecko&&s.gecko_version<=55){e.selectionReader.ignoreUpdates=true;e.dom.focus();e.selectionReader.ignoreUpdates=false}}else if(!e.editable&&!He(e)&&!t){return}var o=e.selectionReader;if(o.lastSelection&&o.lastSelection.eq(n)&&!o.domChanged()){return}o.ignoreUpdates=true;if(e.cursorWrapper){Je(e)}else{var a=n.anchor;var f=n.head;var c,l;if($e&&!(n instanceof i.TextSelection)){if(!n.$from.parent.inlineContent){c=je(e,n.from)}if(!n.empty&&!n.$from.parent.inlineContent){l=je(e,n.to)}}e.docView.setSelection(a,f,e.root,r);if($e){if(c){c.contentEditable="false"}if(l){l.contentEditable="false"}}if(n.visible){e.dom.classList.remove("ProseMirror-hideselection")}else if(a!=f){e.dom.classList.add("ProseMirror-hideselection");if("onselectionchange"in document){Ve(e)}}}o.storeDOMState(n);o.ignoreUpdates=false}var $e=s.safari||s.chrome&&s.chrome_version<63;function je(e,t){var r=e.docView.domFromPos(t);var n=r.node;var i=r.offset;var o=i<n.childNodes.length?n.childNodes[i]:null;var s=i?n.childNodes[i-1]:null;if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o){o.contentEditable="true";return o}else if(s){s.contentEditable="true";return s}}}function Ve(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var r=e.root.getSelection();var n=r.anchorNode,i=r.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){if(r.anchorNode!=n||r.anchorOffset!=i){t.removeEventListener("selectionchange",e.hideSelectionGuard);e.dom.classList.remove("ProseMirror-hideselection")}})}function Je(e){var t=e.root.getSelection(),r=document.createRange();var n=e.cursorWrapper.dom;r.setEnd(n,n.childNodes.length);r.collapse(false);t.removeAllRanges();t.addRange(r);if(!e.state.selection.visible&&s.ie&&s.ie_version<=11){n.disabled=true;n.disabled=false}}function Le(e,t){if(t instanceof i.NodeSelection){var r=e.docView.descAt(t.from);if(r!=e.lastSelectedViewDesc){We(e);if(r){r.selectNode()}e.lastSelectedViewDesc=r}}else{We(e)}}function We(e){if(e.lastSelectedViewDesc){e.lastSelectedViewDesc.deselectNode();e.lastSelectedViewDesc=null}}function qe(e,t,r,n){return e.someProp("createSelectionBetween",(function(n){return n(e,t,r)}))||i.TextSelection.between(t,r,n)}function Ke(e){if(e.editable&&e.root.activeElement!=e.dom){return false}return He(e)}function He(e){var t=e.root.getSelection();if(!t.anchorNode){return false}try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch(e){return false}}function Ue(e){return e.type.spec.inclusive===false}function Ge(e){var t=e.selection;var r=t.$head;var n=t.$anchor;var i=t.visible;var o=r.pos==n.pos&&(!i||r.parent.inlineContent)?r:null;if(o&&(!i||e.storedMarks||o.parent.content.length==0||o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.some(Ue))){return o}else{return null}}var Xe=function e(t,r){var n=this;this.view=t;this.state=t.state;this.composing=r;this.compositionEndedAt=null;this.from=this.to=null;this.typeOver=false;this.timeout=r?null:setTimeout((function(){return n.finish()}),e.commitTimeout);this.trackMappings=new Ie(t.state);this.mapping=new o.Mapping;this.mappingTo=t.state};Xe.prototype.addRange=function e(t,r){if(this.from==null){this.from=t;this.to=r}else{this.from=Math.min(t,this.from);this.to=Math.max(r,this.to)}};Xe.prototype.changedRange=function e(){if(this.from==null){return tt(this.state.selection)}var t=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),r=this.state.doc.resolve(this.to);var n=t.sharedDepth(this.to);return{from:t.before(n+1),to:r.after(n+1)}};Xe.prototype.markDirty=function e(t){if(this.from==null){this.view.docView.markDirty((t=t||this.changedRange()).from,t.to)}else{this.view.docView.markDirty(this.from,this.to)}};Xe.prototype.stateUpdated=function e(t){if(this.trackMappings.getMapping(t,this.mapping)){this.trackMappings.destroy();this.trackMappings=new Ie(t);this.mappingTo=t;return true}else{this.markDirty();this.destroy();return false}};Xe.prototype.finish=function e(t){clearTimeout(this.timeout);if(this.composing&&!t){return}this.view.domObserver.flush();var r=this.changedRange();this.markDirty(r);this.destroy();var n=this.state.selection,o=this.typeOver&&n instanceof i.TextSelection&&!n.empty&&n.$head.sameParent(n.$anchor);nt(this.view,this.mapping,this.state,r,o);if(this.view.docView.dirty){this.view.updateState(this.view.state)}};Xe.prototype.destroy=function e(){clearTimeout(this.timeout);this.trackMappings.destroy();this.view.inDOMChange=null};Xe.prototype.compositionEnd=function e(t){var r=this;if(this.composing){this.composing=false;if(t){this.compositionEndedAt=t.timeStamp}this.timeout=setTimeout((function(){return r.finish()}),50)}};Xe.prototype.ignoreKeyDownOnCompositionEnd=function e(t){if(s.safari&&this.compositionEndedAt!==null&&Math.abs(t.timeStamp-this.compositionEndedAt)<500){this.compositionEndedAt=null;return true}return false};Xe.start=function e(t,r){if(t.inDOMChange){if(r){clearTimeout(t.inDOMChange.timeout);t.inDOMChange.composing=true;t.inDOMChange.compositionEndedAt=null}}else{t.inDOMChange=new Xe(t,r)}return t.inDOMChange};Xe.commitTimeout=20;function Ye(e,t,r){var i=e.docView.parseRange(r.from,r.to);var o=i.node;var a=i.fromOffset;var f=i.toOffset;var c=i.from;var l=i.to;var p=e.root.getSelection(),u=null,h=p.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)){u=[{node:h,offset:p.anchorOffset}];if(!S(p)){u.push({node:p.focusNode,offset:p.focusOffset})}}if(s.chrome&&e.lastKeyCode===8){for(var d=f;d>a;d--){var v=o.childNodes[d-1],m=v.pmViewDesc;if(v.nodeType=="BR"&&!m){f=d;break}if(!m||m.size){break}}}var y=t.doc;var g=e.someProp("domParser")||n.DOMParser.fromSchema(e.state.schema);var w=y.resolve(c);var x=null,k=g.parse(o,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:true,from:a,to:f,preserveWhitespace:w.parent.type.spec.code?"full":true,editableContent:true,findPositions:u,ruleFromNode:Qe(g,w),context:w});if(u&&u[0].pos!=null){var b=u[0].pos,M=u[1]&&u[1].pos;if(M==null){M=b}x={anchor:b+c,head:M+c}}return{doc:k,sel:x,from:c,to:l}}function Qe(e,t){return function(r){var n=r.pmViewDesc;if(n){return n.parseRule()}else if(r.nodeName=="BR"&&r.parentNode){if(s.safari&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){return e.matchTag(document.createElement("li"),t)}else if(r.parentNode.lastChild==r||s.safari&&/^(tr|table)$/i.test(r.parentNode.nodeName)){return{ignore:true}}}}}function Ze(e,t){for(var r=t||0;r<e.depth;r++){if(e.index(r)+1<e.node(r).childCount){return false}}return e.parentOffset==e.parent.content.size}function et(e,t){for(var r=t||0;r<e.depth;r++){if(e.index(0)>0){return false}}return e.parentOffset==0}function tt(e){var t=e.$anchor.min(e.$head),r=e.$anchor.max(e.$head);if(t.sameParent(r)&&t.parent.inlineContent&&t.parentOffset&&r.parentOffset<r.parent.content.size){var n=Math.max(0,t.parentOffset);var i=t.parent.content.size;var o=Math.min(i,r.parentOffset);if(n>0){n=t.parent.childBefore(n).offset}if(o<i){var s=t.parent.childAfter(o);o=s.offset+s.node.nodeSize}var a=t.start();return{from:a+n,to:a+o}}else{for(var f=0;;f++){var c=et(t,f+1),l=Ze(r,f+1);if(c||l||t.index(f)!=r.index(f)||r.node(f).isTextblock){var p=t.before(f+1),u=r.after(f+1);if(c&&t.index(f)>0){p-=t.node(f).child(t.index(f)-1).nodeSize}if(l&&r.index(f)+1<r.node(f).childCount){u+=r.node(f).child(r.index(f)+1).nodeSize}return{from:p,to:u}}}}}function rt(e,t){var r=document.createEvent("Event");r.initEvent("keydown",true,true);r.keyCode=e;r.key=r.code=t;return r}function nt(e,t,r,n,o){var a=Ye(e,r,n);var f=r.doc,c=f.slice(a.from,a.to);var l,p;if(e.lastKeyCode===8&&Date.now()-100<e.lastKeyCodeTime){l=r.selection.to;p="end"}else{l=r.selection.from;p="start"}e.lastKeyCode=null;var u=ft(c.content,a.doc.content,a.from,l,p);if(!u){if(o){var h=e.state,d=h.selection;e.dispatch(h.tr.replaceSelectionWith(h.schema.text(h.doc.textBetween(d.from,d.to)),true).scrollIntoView())}else if(a.sel){var v=it(e,e.state.doc,t,a.sel);if(v&&!v.eq(e.state.selection)){e.dispatch(e.state.tr.setSelection(v))}}return}if(r.selection.from<r.selection.to&&u.start==u.endB&&r.selection instanceof i.TextSelection){if(u.start>r.selection.from&&u.start<=r.selection.from+2){u.start=r.selection.from}else if(u.endA<r.selection.to&&u.endA>=r.selection.to-2){u.endB+=r.selection.to-u.endA;u.endA=r.selection.to}}var m=a.doc.resolveNoCache(u.start-a.from);var y=a.doc.resolveNoCache(u.endB-a.from);var g;if(!m.sameParent(y)&&m.pos<a.doc.content.size&&(g=i.Selection.findFrom(a.doc.resolve(m.pos+1),1,true))&&g.head==y.pos&&e.someProp("handleKeyDown",(function(t){return t(e,rt(13,"Enter"))}))){return}if(r.selection.anchor>u.start&&st(f,u.start,u.endA,m,y)&&e.someProp("handleKeyDown",(function(t){return t(e,rt(8,"Backspace"))}))){if(s.android&&s.chrome){e.selectionReader.suppressUpdates=true;setTimeout((function(){return e.selectionReader.suppressUpdates=false}),50)}return}var w=t.map(u.start),S=t.map(u.endA,-1);var x,k,b,M;if(m.sameParent(y)&&m.parent.inlineContent){if(m.pos==y.pos){x=e.state.tr.delete(w,S);k=f.resolve(u.start).marksAcross(f.resolve(u.endA))}else if(u.endA==u.endB&&(M=f.resolve(u.start))&&(b=ot(m.parent.content.cut(m.parentOffset,y.parentOffset),M.parent.content.cut(M.parentOffset,u.endA-M.start())))){x=e.state.tr;if(b.type=="add"){x.addMark(w,S,b.mark)}else{x.removeMark(w,S,b.mark)}}else if(m.parent.child(m.index()).isText&&m.index()==y.index()-(y.textOffset?0:1)){var O=m.parent.textBetween(m.parentOffset,y.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,w,S,O)}))){return}x=e.state.tr.insertText(O,w,S)}}if(!x){x=e.state.tr.replace(w,S,a.doc.slice(u.start-a.from,u.endB-a.from))}if(a.sel){var C=it(e,x.doc,t,a.sel);if(C){x.setSelection(C)}}if(k){x.ensureMarks(k)}e.dispatch(x.scrollIntoView())}function it(e,t,r,n){if(Math.max(n.anchor,n.head)>t.content.size){return null}return qe(e,t.resolve(r.map(n.anchor)),t.resolve(r.map(n.head)))}function ot(e,t){var r=e.firstChild.marks,i=t.firstChild.marks;var o=r,s=i,a,f,c;for(var l=0;l<i.length;l++){o=i[l].removeFromSet(o)}for(var p=0;p<r.length;p++){s=r[p].removeFromSet(s)}if(o.length==1&&s.length==0){f=o[0];a="add";c=function(e){return e.mark(f.addToSet(e.marks))}}else if(o.length==0&&s.length==1){f=s[0];a="remove";c=function(e){return e.mark(f.removeFromSet(e.marks))}}else{return null}var u=[];for(var h=0;h<t.childCount;h++){u.push(c(t.child(h)))}if(n.Fragment.from(u).eq(e)){return{mark:f,type:a}}}function st(e,t,r,n,i){if(!n.parent.isTextblock||r-t<=i.pos-n.pos||at(n,true,false)<i.pos){return false}var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock){return false}var s=e.resolve(at(o,true,true));if(!s.parent.isTextblock||s.pos>r||at(s,true,false)<r){return false}return n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function at(e,t,r){var n=e.depth,i=t?e.end():e.pos;while(n>0&&(t||e.indexAfter(n)==e.node(n).childCount)){n--;i++;t=false}if(r){var o=e.node(n).maybeChild(e.indexAfter(n));while(o&&!o.isLeaf){o=o.firstChild;i++}}return i}function ft(e,t,r,n,i){var o=e.findDiffStart(t,r);if(o==null){return null}var s=e.findDiffEnd(t,r+e.size,r+t.size);var a=s.a;var f=s.b;if(i=="end"){var c=Math.max(0,o-Math.min(a,f));n-=a+c-o}if(a<o&&e.size<t.size){var l=n<=o&&n>=a?o-n:0;o-=l;f=o+(f-a);a=o}else if(f<o){var p=n<=o&&n>=f?o-n:0;o-=p;a=o+(a-f);f=o}return{start:o,endA:a,endB:f}}function ct(e,t){var r=[];var i=t.content;var o=t.openStart;var s=t.openEnd;while(o>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1){o--;s--;var a=i.firstChild;r.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null);i=a.content}var f=e.someProp("clipboardSerializer")||n.DOMSerializer.fromSchema(e.state.schema);var c=document.createElement("div");c.appendChild(f.serializeFragment(i));var l=c.firstChild,p;while(l&&l.nodeType==1&&(p=vt[l.nodeName.toLowerCase()])){for(var u=p.length-1;u>=0;u--){var h=document.createElement(p[u]);while(c.firstChild){h.appendChild(c.firstChild)}c.appendChild(h)}l=c.firstChild}if(l&&l.nodeType==1){l.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(r))}var d=e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:c,text:d}}function lt(e,t,r,i,o){var s,a=o.parent.type.spec.code,f;if(!r&&!t){return null}var c=t&&(i||a||!r);if(c){e.someProp("transformPastedText",(function(e){t=e(t)}));if(a){return new n.Slice(n.Fragment.from(e.state.schema.text(t)),0,0)}var l=e.someProp("clipboardTextParser",(function(e){return e(t,o)}));if(l){f=l}else{s=document.createElement("div");t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e}))}}else{e.someProp("transformPastedHTML",(function(e){return r=e(r)}));s=yt(r)}var p=s&&s.querySelector("[data-pm-slice]");var u=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!f){var h=e.someProp("clipboardParser")||e.someProp("domParser")||n.DOMParser.fromSchema(e.state.schema);f=h.parseSlice(s,{preserveWhitespace:!!(c||u),context:o})}if(u){f=gt(new n.Slice(f.content,Math.min(f.openStart,+u[1]),Math.min(f.openEnd,+u[2])),u[3])}else{f=n.Slice.maxOpen(pt(f.content,o),false)}e.someProp("transformPasted",(function(e){f=e(f)}));return f}function pt(e,t){if(e.childCount<2){return e}var r=function(r){var i=t.node(r);var o=i.contentMatchAt(t.index(r));var s=void 0,a=[];e.forEach((function(e){if(!a){return}var t=o.findWrapping(e.type),r;if(!t){return a=null}if(r=a.length&&s.length&&ht(t,s,e,a[a.length-1],0)){a[a.length-1]=r}else{if(a.length){a[a.length-1]=dt(a[a.length-1],s.length)}var n=ut(e,t);a.push(n);o=o.matchType(n.type,n.attrs);s=t}}));if(a){return{v:n.Fragment.from(a)}}};for(var i=t.depth;i>=0;i--){var o=r(i);if(o)return o.v}return e}function ut(e,t,r){if(r===void 0)r=0;for(var i=t.length-1;i>=r;i--){e=t[i].create(null,n.Fragment.from(e))}return e}function ht(e,t,r,i,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var s=ht(e,t,r,i.lastChild,o+1);if(s){return i.copy(i.content.replaceChild(i.childCount-1,s))}var a=i.contentMatchAt(i.childCount);if(a.matchType(o==e.length-1?r.type:e[o+1])){return i.copy(i.content.append(n.Fragment.from(ut(r,e,o+1))))}}}function dt(e,t){if(t==0){return e}var r=e.content.replaceChild(e.childCount-1,dt(e.lastChild,t-1));var i=e.contentMatchAt(e.childCount).fillBefore(n.Fragment.empty,true);return e.copy(r.append(i))}var vt={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};var mt=null;function yt(e){var t=/(\s*<meta [^>]*>)*/.exec(e);if(t){e=e.slice(t[0].length)}var r=mt||(mt=document.implementation.createHTMLDocument("title"));var n=r.createElement("div");var i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o,s=0;if(o=i&&vt[i[1].toLowerCase()]){e=o.map((function(e){return"<"+e+">"})).join("")+e+o.map((function(e){return"</"+e+">"})).reverse().join("");s=o.length}n.innerHTML=e;for(var a=0;a<s;a++){n=n.firstChild}return n}function gt(e,t){if(!e.size){return e}var r=e.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch(t){return e}var o=e.content;var s=e.openStart;var a=e.openEnd;for(var f=i.length-2;f>=0;f-=2){var c=r.nodes[i[f]];if(!c||c.hasRequiredAttrs()){break}o=n.Fragment.from(c.create(i[f+1],o));s++;a++}return new n.Slice(o,s,a)}var wt={childList:true,characterData:true,attributes:true,subtree:true,characterDataOldValue:true};var St=s.ie&&s.ie_version<=11;var xt=function e(t){var r=this;this.view=t;this.observer=window.MutationObserver&&new window.MutationObserver((function(e){return r.registerMutations(e)}));if(St){this.onCharData=function(e){return r.registerMutation({target:e.target,type:"characterData",oldValue:e.prevValue})}}};xt.prototype.start=function e(){if(this.observer){this.observer.observe(this.view.dom,wt)}if(St){this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData)}};xt.prototype.stop=function e(){if(this.observer){this.flush();this.observer.disconnect()}if(St){this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData)}};xt.prototype.flush=function e(){if(this.observer){this.registerMutations(this.observer.takeRecords())}};xt.prototype.registerMutations=function e(t){var r=this;for(var n=0;n<t.length;n++){r.registerMutation(t[n])}};xt.prototype.registerMutation=function e(t){if(!this.view.editable){return}var r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable")){return}if(!r||r.ignoreMutation(t)){return}var n,i;if(t.type=="childList"){var o=t.previousSibling&&t.previousSibling.parentNode==t.target?u(t.previousSibling)+1:0;if(o==-1){return}n=r.localPosFromDOM(t.target,o,-1);var s=t.nextSibling&&t.nextSibling.parentNode==t.target?u(t.nextSibling):t.target.childNodes.length;if(s==-1){return}i=r.localPosFromDOM(t.target,s,1)}else if(t.type=="attributes"){n=r.posAtStart-r.border;i=r.posAtEnd+r.border}else{n=r.posAtStart;i=r.posAtEnd;if(t.target.nodeValue==t.oldValue){Xe.start(this.view).typeOver=true}}Xe.start(this.view).addRange(n,i)};var kt={};var bt={};function Mt(e){e.shiftKey=false;e.mouseDown=null;e.inDOMChange=null;e.lastKeyCode=null;e.lastKeyCodeTime=0;e.domObserver=new xt(e);e.domObserver.start();e.eventHandlers=Object.create(null);var t=function(t){var r=kt[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){if(Nt(e,t)&&!Tt(e,t)&&(e.editable||!(t.type in bt))){r(e,t)}})};for(var r in kt)t(r);Ct(e)}function Ot(e){e.domObserver.stop();if(e.inDOMChange){e.inDOMChange.destroy()}for(var t in e.eventHandlers){e.dom.removeEventListener(t,e.eventHandlers[t])}}function Ct(e){e.someProp("handleDOMEvents",(function(t){for(var r in t){if(!e.eventHandlers[r]){e.dom.addEventListener(r,e.eventHandlers[r]=function(t){return Tt(e,t)})}}}))}function Tt(e,t){return e.someProp("handleDOMEvents",(function(r){var n=r[t.type];return n?n(e,t)||t.defaultPrevented:false}))}function Nt(e,t){if(!t.bubbles){return true}if(t.defaultPrevented){return false}for(var r=t.target;r!=e.dom;r=r.parentNode){if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(t)){return false}}return true}function Dt(e,t){if(!Tt(e,t)&&kt[t.type]&&(e.editable||!(t.type in bt))){kt[t.type](e,t)}}bt.keydown=function(e,t){e.shiftKey=t.keyCode==16||t.shiftKey;if(e.inDOMChange){if(e.inDOMChange.composing){return}if(e.inDOMChange.ignoreKeyDownOnCompositionEnd(t)){return}e.inDOMChange.finish()}e.lastKeyCode=t.keyCode;e.lastKeyCodeTime=Date.now();if(e.someProp("handleKeyDown",(function(r){return r(e,t)}))||Ae(e,t)){t.preventDefault()}else{e.selectionReader.poll("key")}};bt.keyup=function(e,t){if(t.keyCode==16){e.shiftKey=false}};bt.keypress=function(e,t){if(e.inDOMChange||!t.charCode||t.ctrlKey&&!t.altKey||s.mac&&t.metaKey){return}if(e.someProp("handleKeyPress",(function(r){return r(e,t)}))){t.preventDefault();return}var r=e.state.selection;if(!(r instanceof i.TextSelection)||!r.$from.sameParent(r.$to)){var n=String.fromCharCode(t.charCode);if(!e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,n)}))){e.dispatch(e.state.tr.insertText(n).scrollIntoView())}t.preventDefault()}};function Et(e){return{left:e.clientX,top:e.clientY}}var At={time:0,x:0,y:0,type:""};function Rt(e,t){var r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}function It(e,t,r,n,i){if(n==-1){return false}var o=e.state.doc.resolve(n);var s=function(n){if(e.someProp(t,(function(t){return n>o.depth?t(e,r,o.nodeAfter,o.before(n),i,true):t(e,r,o.node(n),o.before(n),i,false)}))){return{v:true}}};for(var a=o.depth+1;a>0;a--){var f=s(a);if(f)return f.v}return false}function zt(e,t,r){if(!e.focused){e.focus()}var n=e.state.tr.setSelection(t);if(r=="pointer"){n.setMeta("pointer",true)}e.dispatch(n)}function Pt(e,t){if(t==-1){return false}var r=e.state.doc.resolve(t),n=r.nodeAfter;if(n&&n.isAtom&&i.NodeSelection.isSelectable(n)){zt(e,new i.NodeSelection(r),"pointer");return true}return false}function Ft(e,t){if(t==-1){return false}var r=e.state.selection,n,o;if(r instanceof i.NodeSelection){n=r.node}var s=e.state.doc.resolve(t);for(var a=s.depth+1;a>0;a--){var f=a>s.depth?s.nodeAfter:s.node(a);if(i.NodeSelection.isSelectable(f)){if(n&&r.$from.depth>0&&a>=r.$from.depth&&s.before(r.$from.depth+1)==r.$from.pos){o=s.before(r.$from.depth)}else{o=s.before(a)}break}}if(o!=null){zt(e,i.NodeSelection.create(e.state.doc,o),"pointer");return true}else{return false}}function _t(e,t,r,n,i){return It(e,"handleClickOn",t,r,n)||e.someProp("handleClick",(function(r){return r(e,t,n)}))||(i?Ft(e,r):Pt(e,r))}function Bt(e,t,r,n){return It(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",(function(r){return r(e,t,n)}))}function $t(e,t,r,n){return It(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",(function(r){return r(e,t,n)}))||jt(e,r)}function jt(e,t){var r=e.state.doc;if(t==-1){if(r.inlineContent){zt(e,i.TextSelection.create(r,0,r.content.size),"pointer");return true}return false}var n=r.resolve(t);for(var o=n.depth+1;o>0;o--){var s=o>n.depth?n.nodeAfter:n.node(o);var a=n.before(o);if(s.inlineContent){zt(e,i.TextSelection.create(r,a+1,a+1+s.content.size),"pointer")}else if(i.NodeSelection.isSelectable(s)){zt(e,i.NodeSelection.create(r,a),"pointer")}else{continue}return true}}function Vt(e){if(!e.inDOMChange){return false}e.inDOMChange.finish(true);return true}var Jt=s.mac?"metaKey":"ctrlKey";kt.mousedown=function(e,t){e.shiftKey=t.shiftKey;var r=Vt(e);var n=Date.now(),i="singleClick";if(n-At.time<500&&Rt(t,At)&&!t[Jt]){if(At.type=="singleClick"){i="doubleClick"}else if(At.type=="doubleClick"){i="tripleClick"}}At={time:n,x:t.clientX,y:t.clientY,type:i};var o=e.posAtCoords(Et(t));if(!o){return}if(i=="singleClick"){e.mouseDown=new Lt(e,o,t,r)}else if((i=="doubleClick"?Bt:$t)(e,o.pos,o.inside,t)){t.preventDefault()}else{e.selectionReader.poll("pointer")}};var Lt=function e(t,r,n,o){var a=this;this.view=t;this.pos=r;this.event=n;this.flushed=o;this.selectNode=n[Jt];this.allowDefault=n.shiftKey;var f,c;if(r.inside>-1){f=t.state.doc.nodeAt(r.inside);c=r.inside}else{var l=t.state.doc.resolve(r.pos);f=l.parent;c=l.depth?l.before():0}this.mightDrag=null;var p=o?null:n.target;var u=p?t.docView.nearestDesc(p,true):null;this.target=u?u.dom:null;if(f.type.spec.draggable&&f.type.spec.selectable!==false||t.state.selection instanceof i.NodeSelection&&c==t.state.selection.from){this.mightDrag={node:f,pos:c,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}}if(this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)){this.view.domObserver.stop();if(this.mightDrag.addAttr){this.target.draggable=true}if(this.mightDrag.setUneditable){setTimeout((function(){return a.target.setAttribute("contentEditable","false")}),20)}this.view.domObserver.start()}t.root.addEventListener("mouseup",this.up=this.up.bind(this));t.root.addEventListener("mousemove",this.move=this.move.bind(this));t.selectionReader.poll("pointer")};Lt.prototype.done=function e(){this.view.root.removeEventListener("mouseup",this.up);this.view.root.removeEventListener("mousemove",this.move);if(this.mightDrag&&this.target){this.view.domObserver.stop();if(this.mightDrag.addAttr){this.target.draggable=false}if(this.mightDrag.setUneditable){this.target.removeAttribute("contentEditable")}this.view.domObserver.start()}this.view.mouseDown=null};Lt.prototype.up=function e(t){this.done();if(!this.view.dom.contains(t.target.nodeType==3?t.target.parentNode:t.target)){return}if(this.allowDefault){if(s.ie&&Ge(this.view.state)){this.view.updateState(this.view.state)}this.view.selectionReader.poll("pointer")}else if(_t(this.view,this.pos.pos,this.pos.inside,t,this.selectNode)){t.preventDefault()}else if(this.flushed||s.chrome&&!(this.view.state.selection instanceof i.TextSelection)){zt(this.view,i.Selection.near(this.view.state.doc.resolve(this.pos.pos)),"pointer");t.preventDefault()}else{this.view.selectionReader.poll("pointer")}};Lt.prototype.move=function e(t){if(!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)){this.allowDefault=true}this.view.selectionReader.poll("pointer")};kt.touchdown=function(e){Vt(e);e.selectionReader.poll("pointer")};kt.contextmenu=function(e){return Vt(e)};bt.compositionstart=bt.compositionupdate=function(e){Xe.start(e,true)};bt.compositionend=function(e,t){if(!e.inDOMChange){if(t.data){Xe.start(e,true)}else{return}}e.inDOMChange.compositionEnd(t)};bt.input=function(e){var t=Xe.start(e);if(!t.composing){t.finish()}};function Wt(e,t){var r=t.ownerDocument;var n=r.body.appendChild(r.createElement("div"));n.appendChild(t);n.style.cssText="position: fixed; left: -10000px; top: 10px";var i=getSelection(),o=r.createRange();o.selectNodeContents(t);e.dom.blur();i.removeAllRanges();i.addRange(o);setTimeout((function(){r.body.removeChild(n);e.focus()}),50)}var qt=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;kt.copy=bt.cut=function(e,t){var r=e.state.selection,n=t.type=="cut";if(r.empty){return}var i=qt?null:t.clipboardData;var o=r.content();var s=ct(e,o);var a=s.dom;var f=s.text;if(i){t.preventDefault();i.clearData();i.setData("text/html",a.innerHTML);i.setData("text/plain",f)}else{Wt(e,a)}if(n){e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}};function Kt(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function Ht(e,t){var r=e.dom.ownerDocument;var n=e.shiftKey||e.state.selection.$from.parent.type.spec.code;var i=r.body.appendChild(r.createElement(n?"textarea":"div"));if(!n){i.contentEditable="true"}i.style.cssText="position: fixed; left: -10000px; top: 10px";i.focus();setTimeout((function(){e.focus();r.body.removeChild(i);if(n){Ut(e,i.value,null,t)}else{Ut(e,i.textContent,i.innerHTML,t)}}),50)}function Ut(e,t,r,n){var i=lt(e,t,r,e.shiftKey,e.state.selection.$from);if(!i){return false}if(e.someProp("handlePaste",(function(t){return t(e,n,i)}))){return true}var o=Kt(i);var s=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(s.scrollIntoView().setMeta("paste",true).setMeta("uiEvent","paste"));return true}bt.paste=function(e,t){var r=qt?null:t.clipboardData;if(r&&(Ut(e,r.getData("text/plain"),r.getData("text/html"),t)||r.files.length>0)){t.preventDefault()}else{Ht(e,t)}};var Gt=function e(t,r){this.slice=t;this.move=r};var Xt=s.mac?"altKey":"ctrlKey";kt.dragstart=function(e,t){var r=e.mouseDown;if(r){r.done()}if(!t.dataTransfer){return}var n=e.state.selection;var o=n.empty?null:e.posAtCoords(Et(t));if(o&&o.pos>=n.from&&o.pos<=(n instanceof i.NodeSelection?n.to-1:n.to)){}else if(r&&r.mightDrag){e.dispatch(e.state.tr.setSelection(i.NodeSelection.create(e.state.doc,r.mightDrag.pos)))}else if(t.target&&t.target.nodeType==1){var s=e.docView.nearestDesc(t.target,true);if(!s||!s.node.type.spec.draggable||s==e.docView){return}e.dispatch(e.state.tr.setSelection(i.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content();var f=ct(e,a);var c=f.dom;var l=f.text;t.dataTransfer.clearData();t.dataTransfer.setData(qt?"Text":"text/html",c.innerHTML);if(!qt){t.dataTransfer.setData("text/plain",l)}e.dragging=new Gt(a,!t[Xt])};kt.dragend=function(e){window.setTimeout((function(){return e.dragging=null}),50)};bt.dragover=bt.dragenter=function(e,t){return t.preventDefault()};bt.drop=function(e,t){var r=e.dragging;e.dragging=null;if(!t.dataTransfer){return}var n=e.posAtCoords(Et(t));if(!n){return}var s=e.state.doc.resolve(n.pos);if(!s){return}var a=r&&r.slice||lt(e,t.dataTransfer.getData(qt?"Text":"text/plain"),qt?null:t.dataTransfer.getData("text/html"),false,s);if(!a){return}t.preventDefault();if(e.someProp("handleDrop",(function(n){return n(e,t,a,r&&r.move)}))){return}var f=a?o.dropPoint(e.state.doc,s.pos,a):s.pos;if(f==null){f=s.pos}var c=e.state.tr;if(r&&r.move){c.deleteSelection()}var l=c.mapping.map(f);var p=a.openStart==0&&a.openEnd==0&&a.content.childCount==1;var u=c.doc;if(p){c.replaceRangeWith(l,l,a.content.firstChild)}else{c.replaceRange(l,l,a)}if(c.doc.eq(u)){return}var h=c.doc.resolve(l);if(p&&i.NodeSelection.isSelectable(a.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(a.content.firstChild)){c.setSelection(new i.NodeSelection(h))}else{c.setSelection(qe(e,h,c.doc.resolve(c.mapping.map(f))))}e.focus();e.dispatch(c.setMeta("uiEvent","drop"))};kt.focus=function(e){if(!e.focused){e.dom.classList.add("ProseMirror-focused");e.focused=true}};kt.blur=function(e){if(e.focused){e.dom.classList.remove("ProseMirror-focused");e.focused=false}};for(var Yt in bt){kt[Yt]=bt[Yt]}function Qt(e,t){if(e==t){return true}for(var r in e){if(e[r]!==t[r]){return false}}for(var n in t){if(!(n in e)){return false}}return true}var Zt=function e(t,r){this.spec=r||or;this.side=this.spec.side||0;this.toDOM=t};Zt.prototype.map=function e(t,r,n,i){var o=t.mapResult(r.from+i,this.side<0?-1:1);var s=o.pos;var a=o.deleted;return a?null:new rr(s-n,s-n,this)};Zt.prototype.valid=function e(){return true};Zt.prototype.eq=function e(t){return this==t||t instanceof Zt&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Qt(this.spec,t.spec))};var er=function e(t,r){this.spec=r||or;this.attrs=t};er.prototype.map=function e(t,r,n,i){var o=t.map(r.from+i,this.spec.inclusiveStart?-1:1)-n;var s=t.map(r.to+i,this.spec.inclusiveEnd?1:-1)-n;return o>=s?null:new rr(o,s,this)};er.prototype.valid=function e(t,r){return r.from<r.to};er.prototype.eq=function e(t){return this==t||t instanceof er&&Qt(this.attrs,t.attrs)&&Qt(this.spec,t.spec)};er.is=function e(t){return t.type instanceof er};var tr=function e(t,r){this.spec=r||or;this.attrs=t};tr.prototype.map=function e(t,r,n,i){var o=t.mapResult(r.from+i,1);if(o.deleted){return null}var s=t.mapResult(r.to+i,-1);if(s.deleted||s.pos<=o.pos){return null}return new rr(o.pos-n,s.pos-n,this)};tr.prototype.valid=function e(t,r){var n=t.content.findIndex(r.from);var i=n.index;var o=n.offset;return o==r.from&&o+t.child(i).nodeSize==r.to};tr.prototype.eq=function e(t){return this==t||t instanceof tr&&Qt(this.attrs,t.attrs)&&Qt(this.spec,t.spec)};var rr=function e(t,r,n){this.from=t;this.to=r;this.type=n};var nr={spec:{}};rr.prototype.copy=function e(t,r){return new rr(t,r,this.type)};rr.prototype.eq=function e(t){return this.type.eq(t.type)&&this.from==t.from&&this.to==t.to};rr.prototype.map=function e(t,r,n){return this.type.map(t,this,r,n)};rr.widget=function e(t,r,n){return new rr(t,t,new Zt(r,n))};rr.inline=function e(t,r,n,i){return new rr(t,r,new er(n,i))};rr.node=function e(t,r,n,i){return new rr(t,r,new tr(n,i))};nr.spec.get=function(){return this.type.spec};Object.defineProperties(rr.prototype,nr);var ir=[];var or={};var sr=function e(t,r){this.local=t&&t.length?t:ir;this.children=r&&r.length?r:ir};sr.create=function e(t,r){return r.length?dr(r,t,0,or):ar};sr.prototype.find=function e(t,r,n){var i=[];this.findInner(t==null?0:t,r==null?1e9:r,i,0,n);return i};sr.prototype.findInner=function e(t,r,n,i,o){var s=this;for(var a=0;a<this.local.length;a++){var f=s.local[a];if(f.from<=r&&f.to>=t&&(!o||o(f.spec))){n.push(f.copy(f.from+i,f.to+i))}}for(var c=0;c<this.children.length;c+=3){if(s.children[c]<r&&s.children[c+1]>t){var l=s.children[c]+1;s.children[c+2].findInner(t-l,r-l,n,i+l,o)}}};sr.prototype.map=function e(t,r,n){if(this==ar||t.maps.length==0){return this}return this.mapInner(t,r,0,0,n||or)};sr.prototype.mapInner=function e(t,r,n,i,o){var s=this;var a;for(var f=0;f<this.local.length;f++){var c=s.local[f].map(t,n,i);if(c&&c.type.valid(r,c)){(a||(a=[])).push(c)}else if(o.onRemove){o.onRemove(s.local[f].spec)}}if(this.children.length){return cr(this.children,a,t,r,n,i,o)}else{return a?new sr(a.sort(vr)):ar}};sr.prototype.add=function e(t,r){if(!r.length){return this}if(this==ar){return sr.create(t,r)}return this.addInner(t,r,0)};sr.prototype.addInner=function e(t,r,n){var i=this;var o,s=0;t.forEach((function(e,t){var a=t+n,f;if(!(f=ur(r,e,a))){return}if(!o){o=i.children.slice()}while(s<o.length&&o[s]<t){s+=3}if(o[s]==t){o[s+2]=o[s+2].addInner(e,f,a+1)}else{o.splice(s,0,t,t+e.nodeSize,dr(f,e,a+1,or))}s+=3}));var a=lr(s?hr(r):r,-n);return new sr(a.length?this.local.concat(a).sort(vr):this.local,o||this.children)};sr.prototype.remove=function e(t){if(t.length==0||this==ar){return this}return this.removeInner(t,0)};sr.prototype.removeInner=function e(t,r){var n=this;var i=this.children,o=this.local;for(var s=0;s<i.length;s+=3){var a=void 0,f=i[s]+r,c=i[s+1]+r;for(var l=0,p=void 0;l<t.length;l++){if(p=t[l]){if(p.from>f&&p.to<c){t[l]=null;(a||(a=[])).push(p)}}}if(!a){continue}if(i==n.children){i=n.children.slice()}var u=i[s+2].removeInner(a,f+1);if(u!=ar){i[s+2]=u}else{i.splice(s,3);s-=3}}if(o.length){for(var h=0,d=void 0;h<t.length;h++){if(d=t[h]){for(var v=0;v<o.length;v++){if(o[v].type.eq(d.type)){if(o==n.local){o=n.local.slice()}o.splice(v--,1)}}}}}if(i==this.children&&o==this.local){return this}return o.length||i.length?new sr(o,i):ar};sr.prototype.forChild=function e(t,r){var n=this;if(this==ar){return this}if(r.isLeaf){return sr.empty}var i,o;for(var s=0;s<this.children.length;s+=3){if(n.children[s]>=t){if(n.children[s]==t){i=n.children[s+2]}break}}var a=t+1,f=a+r.content.size;for(var c=0;c<this.local.length;c++){var l=n.local[c];if(l.from<f&&l.to>a&&l.type instanceof er){var p=Math.max(a,l.from)-a,u=Math.min(f,l.to)-a;if(p<u){(o||(o=[])).push(l.copy(p,u))}}}if(o){var h=new sr(o.sort(vr));return i?new fr([h,i]):h}return i||ar};sr.prototype.eq=function e(t){var r=this;if(this==t){return true}if(!(t instanceof sr)||this.local.length!=t.local.length||this.children.length!=t.children.length){return false}for(var n=0;n<this.local.length;n++){if(!r.local[n].eq(t.local[n])){return false}}for(var i=0;i<this.children.length;i+=3){if(r.children[i]!=t.children[i]||r.children[i+1]!=t.children[i+1]||!r.children[i+2].eq(t.children[i+2])){return false}}return false};sr.prototype.locals=function e(t){return mr(this.localsInner(t))};sr.prototype.localsInner=function e(t){var r=this;if(this==ar){return ir}if(t.inlineContent||!this.local.some(er.is)){return this.local}var n=[];for(var i=0;i<this.local.length;i++){if(!(r.local[i].type instanceof er)){n.push(r.local[i])}}return n};var ar=new sr;sr.empty=ar;sr.removeOverlap=mr;var fr=function e(t){this.members=t};fr.prototype.forChild=function e(t,r){var n=this;if(r.isLeaf){return sr.empty}var i=[];for(var o=0;o<this.members.length;o++){var s=n.members[o].forChild(t,r);if(s==ar){continue}if(s instanceof fr){i=i.concat(s.members)}else{i.push(s)}}return fr.from(i)};fr.prototype.eq=function e(t){var r=this;if(!(t instanceof fr)||t.members.length!=this.members.length){return false}for(var n=0;n<this.members.length;n++){if(!r.members[n].eq(t.members[n])){return false}}return true};fr.prototype.locals=function e(t){var r=this;var n,i=true;for(var o=0;o<this.members.length;o++){var e=r.members[o].localsInner(t);if(!e.length){continue}if(!n){n=e}else{if(i){n=n.slice();i=false}for(var s=0;s<e.length;s++){n.push(e[s])}}}return n?mr(i?n:n.sort(vr)):ir};fr.from=function e(t){switch(t.length){case 0:return ar;case 1:return t[0];default:return new fr(t)}};function cr(e,t,r,n,i,o,s){var a=e.slice();var f=function(e,t,r,n){for(var s=0;s<a.length;s+=3){var f=a[s+1],c=void 0;if(f==-1||e>f+o){continue}if(t>=a[s]+o){a[s+1]=-1}else if(c=n-r-(t-e)+(o-i)){a[s]+=c;a[s+1]+=c}}};for(var c=0;c<r.maps.length;c++){r.maps[c].forEach(f)}var l=false;for(var p=0;p<a.length;p+=3){if(a[p+1]==-1){var u=r.map(a[p]+o),h=u-i;if(h<0||h>=n.content.size){l=true;continue}var d=r.map(e[p+1]+o,-1),v=d-i;var m=n.content.findIndex(h);var y=m.index;var g=m.offset;var w=n.maybeChild(y);if(w&&g==h&&g+w.nodeSize==v){var S=a[p+2].mapInner(r,w,u+1,a[p]+o+1,s);if(S!=ar){a[p]=h;a[p+1]=v;a[p+2]=S}else{a[p+1]=-2;l=true}}else{l=true}}}if(l){var x=pr(a,e,t||[],r,i,o,s);var k=dr(x,n,0,s);t=k.local;for(var b=0;b<a.length;b+=3){if(a[b+1]<0){a.splice(b,3);b-=3}}for(var M=0,O=0;M<k.children.length;M+=3){var C=k.children[M];while(O<a.length&&a[O]<C){O+=3}a.splice(O,0,k.children[M],k.children[M+1],k.children[M+2])}}return new sr(t&&t.sort(vr),a)}function lr(e,t){if(!t||!e.length){return e}var r=[];for(var n=0;n<e.length;n++){var i=e[n];r.push(new rr(i.from+t,i.to+t,i.type))}return r}function pr(e,t,r,n,i,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var f=e.local[o].map(n,i,t);if(f){r.push(f)}else if(s.onRemove){s.onRemove(e.local[o].spec)}}for(var c=0;c<e.children.length;c+=3){a(e.children[c+2],e.children[c]+t+1)}}for(var f=0;f<e.length;f+=3){if(e[f+1]==-1){a(e[f+2],t[f]+o+1)}}return r}function ur(e,t,r){if(t.isLeaf){return null}var n=r+t.nodeSize,i=null;for(var o=0,s=void 0;o<e.length;o++){if((s=e[o])&&s.from>r&&s.to<n){(i||(i=[])).push(s);e[o]=null}}return i}function hr(e){var t=[];for(var r=0;r<e.length;r++){if(e[r]!=null){t.push(e[r])}}return t}function dr(e,t,r,n){var i=[],o=false;t.forEach((function(t,s){var a=ur(e,t,s+r);if(a){o=true;var f=dr(a,t,r+s+1,n);if(f!=ar){i.push(s,s+t.nodeSize,f)}}}));var s=lr(o?hr(e):e,-r).sort(vr);for(var a=0;a<s.length;a++){if(!s[a].type.valid(t,s[a])){if(n.onRemove){n.onRemove(s[a].spec)}s.splice(a--,1)}}return s.length||i.length?new sr(s,i):ar}function vr(e,t){return e.from-t.from||e.to-t.to}function mr(e){var t=e;for(var r=0;r<t.length-1;r++){var n=t[r];if(n.from!=n.to){for(var i=r+1;i<t.length;i++){var o=t[i];if(o.from==n.from){if(o.to!=n.to){if(t==e){t=e.slice()}t[i]=o.copy(o.from,n.to);yr(t,i+1,o.copy(n.to,o.to))}continue}else{if(o.from<n.to){if(t==e){t=e.slice()}t[r]=n.copy(n.from,o.from);yr(t,i,n.copy(o.from,n.to))}break}}}}return t}function yr(e,t,r){while(t<e.length&&vr(r,e[t])>0){t++}e.splice(t,0,r)}function gr(e){var t=[];e.someProp("decorations",(function(r){var n=r(e.state);if(n&&n!=ar){t.push(n)}}));if(e.cursorWrapper){t.push(sr.create(e.state.doc,[e.cursorWrapper.deco]))}return fr.from(t)}var wr=function e(t,r){this._props=r;this.state=r.state;this.dispatch=this.dispatch.bind(this);this._root=null;this.focused=false;this.dom=t&&t.mount||document.createElement("div");if(t){if(t.appendChild){t.appendChild(this.dom)}else if(t.apply){t(this.dom)}else if(t.mount){this.mounted=true}}this.editable=Mr(this);this.redraw=false;this.cursorWrapper=null;br(this);this.nodeViews=Tr(this);this.docView=Z(this.state.doc,xr(this),gr(this),this.dom,this);this.lastSelectedViewDesc=null;this.dragging=null;Mt(this);this.selectionReader=new ze(this);this.pluginViews=[];this.updatePluginViews()};var Sr={props:{},root:{}};Sr.props.get=function(){var e=this;if(this._props.state!=this.state){var t=this._props;this._props={};for(var r in t){e._props[r]=t[r]}this._props.state=this.state}return this._props};wr.prototype.update=function e(t){if(t.handleDOMEvents!=this._props.handleDOMEvents){Ct(this)}this._props=t;var r=Tr(this);if(Nr(r,this.nodeViews)){this.nodeViews=r;this.redraw=true}this.updateState(t.state)};wr.prototype.setProps=function e(t){var r=this;var n={};for(var i in r._props){n[i]=r._props[i]}n.state=this.state;for(var o in t){n[o]=t[o]}this.update(n)};wr.prototype.updateState=function e(t){var r=this;var n=this.state;this.state=t;if(n.plugins!=t.plugins){Ct(this)}this.domObserver.flush();if(this.inDOMChange&&this.inDOMChange.stateUpdated(t)){return}var o=this.editable;this.editable=Mr(this);br(this);var a=gr(this),f=xr(this);var c=n.config!=t.config?"reset":t.scrollToSelection>n.scrollToSelection?"to selection":"preserve";var l=this.redraw||!this.docView.matchesNode(t.doc,f,a);var p=l||!t.selection.eq(n.selection)||this.selectionReader.domChanged();var u=c=="preserve"&&p&&M(this);if(p){this.domObserver.stop();var h=false;if(l){var d=s.chrome&&Or(this.root);if(this.redraw||!this.docView.update(t.doc,f,a,this)){this.docView.destroy();this.docView=Z(t.doc,f,a,this.dom,this);this.redraw=false}this.selectionReader.clearDOMState();if(d){h=Cr(d,this.root)}}Be(this,false,h);this.domObserver.start()}if(o!=this.editable){this.selectionReader.editableChanged()}this.updatePluginViews(n);if(c=="reset"){this.dom.scrollTop=0}else if(c=="to selection"){var v=this.root.getSelection().focusNode;if(this.someProp("handleScrollToSelection",(function(e){return e(r)}))){}else if(t.selection instanceof i.NodeSelection){b(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),v)}else{b(this,this.coordsAtPos(t.selection.head),v)}}else if(u){O(u)}};wr.prototype.destroyPluginViews=function e(){var t;while(t=this.pluginViews.pop()){if(t.destroy){t.destroy()}}};wr.prototype.updatePluginViews=function e(t){var r=this;var n=this.state.plugins;if(!t||t.plugins!=n){this.destroyPluginViews();for(var i=0;i<n.length;i++){var o=n[i];if(o.spec.view){r.pluginViews.push(o.spec.view(r))}}}else{for(var s=0;s<this.pluginViews.length;s++){var a=r.pluginViews[s];if(a.update){a.update(r,t)}}}};wr.prototype.someProp=function e(t,r){var n=this._props&&this._props[t],i;if(n!=null&&(i=r?r(n):n)){return i}var o=this.state.plugins;if(o){for(var s=0;s<o.length;s++){var a=o[s].props[t];if(a!=null&&(i=r?r(a):a)){return i}}}};wr.prototype.hasFocus=function e(){return this.root.activeElement==this.dom};wr.prototype.focus=function e(){this.domObserver.stop();Be(this,true);this.domObserver.start();if(this.editable){this.dom.focus()}};Sr.root.get=function(){var e=this;var t=this._root;if(t==null){for(var r=this.dom.parentNode;r;r=r.parentNode){if(r.nodeType==9||r.nodeType==11&&r.host){return e._root=r}}}return t||document};wr.prototype.posAtCoords=function e(t){var r=A(this,t);if(this.inDOMChange&&r){r.pos=this.inDOMChange.mapping.map(r.pos);if(r.inside!=-1){r.inside=this.inDOMChange.mapping.map(r.inside)}}return r};wr.prototype.coordsAtPos=function e(t){if(this.inDOMChange){t=this.inDOMChange.mapping.invert().map(t)}return I(this,t)};wr.prototype.domAtPos=function e(t){if(this.inDOMChange){t=this.inDOMChange.mapping.invert().map(t)}return this.docView.domFromPos(t)};wr.prototype.nodeDOM=function e(t){if(this.inDOMChange){t=this.inDOMChange.mapping.invert().map(t)}var r=this.docView.descAt(t);return r?r.nodeDOM:null};wr.prototype.posAtDOM=function e(t,r,n){if(n===void 0)n=-1;var i=this.docView.posFromDOM(t,r,n);if(i==null){throw new RangeError("DOM position not inside the editor")}if(this.inDOMChange){i=this.inDOMChange.mapping.map(i)}return i};wr.prototype.endOfTextblock=function e(t,r){return V(this,r||this.state,t)};wr.prototype.destroy=function e(){if(!this.docView){return}Ot(this);this.destroyPluginViews();this.selectionReader.destroy();if(this.mounted){this.docView.update(this.state.doc,[],gr(this),this);this.dom.textContent=""}else if(this.dom.parentNode){this.dom.parentNode.removeChild(this.dom)}this.docView.destroy();this.docView=null};wr.prototype.dispatchEvent=function e(t){return Dt(this,t)};wr.prototype.dispatch=function e(t){var r=this._props.dispatchTransaction;if(r){r.call(this,t)}else{this.updateState(this.state.apply(t))}};Object.defineProperties(wr.prototype,Sr);function xr(e){var t=Object.create(null);t.class="ProseMirror";t.contenteditable=String(e.editable);e.someProp("attributes",(function(r){if(typeof r=="function"){r=r(e.state)}if(r){for(var n in r){if(n=="class"){t.class+=" "+r[n]}else if(!t[n]&&n!="contenteditable"&&n!="nodeName"){t[n]=String(r[n])}}}}));return[rr.node(0,e.state.doc.content.size,t)]}function kr(e){var t=document.createElement("span");t.textContent="\ufeff";if(!e){t.style.position="absolute";t.style.left="-100000px"}return t}function br(e){var t=Ge(e.state);if(t&&!(s.ie&&e.mouseDown)){var r=e.state.selection.visible;var i=e.state.storedMarks||t.marks(),o;if(!e.cursorWrapper||!n.Mark.sameSet(e.cursorWrapper.deco.spec.marks,i)||e.cursorWrapper.dom.textContent!="\ufeff"||e.cursorWrapper.deco.spec.visible!=r){o=kr(r)}else if(e.cursorWrapper.deco.pos!=t.pos){o=e.cursorWrapper.dom}if(o){e.cursorWrapper={dom:o,deco:rr.widget(t.pos,o,{isCursorWrapper:true,marks:i,raw:true,visible:r})}}}else{e.cursorWrapper=null}}function Mr(e){return!e.someProp("editable",(function(t){return t(e.state)===false}))}function Or(e){var t=e.getSelection();var r=t.focusOffset;var n=t.focusNode;if(!n||n.nodeType==3){return null}return[n,r,n.nodeType==1?n.childNodes[r-1]:null,n.nodeType==1?n.childNodes[r]:null]}function Cr(e,t){var r=Or(t);if(!r||r[0].nodeType==3){return false}for(var n=0;n<e.length;n++){if(r[n]!=e[n]){return true}}return false}function Tr(e){var t={};e.someProp("nodeViews",(function(e){for(var r in e){if(!Object.prototype.hasOwnProperty.call(t,r)){t[r]=e[r]}}}));return t}function Nr(e,t){var r=0,n=0;for(var i in e){if(e[i]!=t[i]){return true}r++}for(var o in t){n++}return r!=n}t.EditorView=wr;t.Decoration=rr;t.DecorationSet=sr;t.__serializeForClipboard=ct;t.__parseFromClipboard=lt},"./node_modules/rope-sequence/dist/index.js":function(e,t){var r=200;var n=function e(){};n.prototype.append=function e(t){if(!t.length){return this}t=n.from(t);return!this.length&&t||t.length<r&&this.leafAppend(t)||this.length<r&&t.leafPrepend(this)||this.appendInner(t)};n.prototype.prepend=function e(t){if(!t.length){return this}return n.from(t).append(this)};n.prototype.appendInner=function e(t){return new o(this,t)};n.prototype.slice=function e(t,r){if(t===void 0)t=0;if(r===void 0)r=this.length;if(t>=r){return n.empty}return this.sliceInner(Math.max(0,t),Math.min(this.length,r))};n.prototype.get=function e(t){if(t<0||t>=this.length){return undefined}return this.getInner(t)};n.prototype.forEach=function e(t,r,n){if(r===void 0)r=0;if(n===void 0)n=this.length;if(r<=n){this.forEachInner(t,r,n,0)}else{this.forEachInvertedInner(t,r,n,0)}};n.prototype.map=function e(t,r,n){if(r===void 0)r=0;if(n===void 0)n=this.length;var i=[];this.forEach((function(e,r){return i.push(t(e,r))}),r,n);return i};n.from=function e(t){if(t instanceof n){return t}return t&&t.length?new i(t):n.empty};var i=function(e){function t(t){e.call(this);this.values=t}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;var n={length:{},depth:{}};t.prototype.flatten=function e(){return this.values};t.prototype.sliceInner=function e(r,n){if(r==0&&n==this.length){return this}return new t(this.values.slice(r,n))};t.prototype.getInner=function e(t){return this.values[t]};t.prototype.forEachInner=function e(t,r,n,i){var o=this;for(var s=r;s<n;s++){if(t(o.values[s],i+s)===false){return false}}};t.prototype.forEachInvertedInner=function e(t,r,n,i){var o=this;for(var s=r-1;s>=n;s--){if(t(o.values[s],i+s)===false){return false}}};t.prototype.leafAppend=function e(n){if(this.length+n.length<=r){return new t(this.values.concat(n.flatten()))}};t.prototype.leafPrepend=function e(n){if(this.length+n.length<=r){return new t(n.flatten().concat(this.values))}};n.length.get=function(){return this.values.length};n.depth.get=function(){return 0};Object.defineProperties(t.prototype,n);return t}(n);n.empty=new i([]);var o=function(e){function t(t,r){e.call(this);this.left=t;this.right=r;this.length=t.length+r.length;this.depth=Math.max(t.depth,r.depth)+1}if(e)t.__proto__=e;t.prototype=Object.create(e&&e.prototype);t.prototype.constructor=t;t.prototype.flatten=function e(){return this.left.flatten().concat(this.right.flatten())};t.prototype.getInner=function e(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)};t.prototype.forEachInner=function e(t,r,n,i){var o=this.left.length;if(r<o&&this.left.forEachInner(t,r,Math.min(n,o),i)===false){return false}if(n>o&&this.right.forEachInner(t,Math.max(r-o,0),Math.min(this.length,n)-o,i+o)===false){return false}};t.prototype.forEachInvertedInner=function e(t,r,n,i){var o=this.left.length;if(r>o&&this.right.forEachInvertedInner(t,r-o,Math.max(n,o)-o,i+o)===false){return false}if(n<o&&this.left.forEachInvertedInner(t,Math.min(r,o),n,i)===false){return false}};t.prototype.sliceInner=function e(t,r){if(t==0&&r==this.length){return this}var n=this.left.length;if(r<=n){return this.left.slice(t,r)}if(t>=n){return this.right.slice(t-n,r-n)}return this.left.slice(t,n).append(this.right.slice(0,r-n))};t.prototype.leafAppend=function e(r){var n=this.right.leafAppend(r);if(n){return new t(this.left,n)}};t.prototype.leafPrepend=function e(r){var n=this.left.leafPrepend(r);if(n){return new t(n,this.right)}};t.prototype.appendInner=function e(r){if(this.left.depth>=Math.max(this.right.depth,r.depth)+1){return new t(this.left,new t(this.right,r))}return new t(this,r)};return t}(n);e.exports=n},"./node_modules/w3c-keyname/index.js":function(e,t){var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"};var n={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"};var i=typeof navigator!="undefined"&&/Chrome\/(\d+)/.exec(navigator.userAgent);var o=typeof navigator!="undefined"&&/Apple Computer/.test(navigator.vendor);var s=typeof navigator!="undefined"&&/Gecko\/\d+/.test(navigator.userAgent);var a=typeof navigator!="undefined"&&/Mac/.test(navigator.platform);var f=i&&(a||+i[1]<57)||s&&a;for(var c=0;c<10;c++)r[48+c]=r[96+c]=String(c);for(var c=1;c<=24;c++)r[c+111]="F"+c;for(var c=65;c<=90;c++){r[c]=String.fromCharCode(c+32);n[c]=String.fromCharCode(c)}for(var l in r)if(!n.hasOwnProperty(l))n[l]=r[l];function p(e){var t=f&&(e.ctrlKey||e.altKey||e.metaKey)||o&&e.shiftKey&&e.key&&e.key.length==1;var i=!t&&e.key||(e.shiftKey?n:r)[e.keyCode]||e.key||"Unidentified";if(i=="Esc")i="Escape";if(i=="Del")i="Delete";if(i=="Left")i="ArrowLeft";if(i=="Up")i="ArrowUp";if(i=="Right")i="ArrowRight";if(i=="Down")i="ArrowDown";return i}e.exports=p;p.base=r;p.shift=n}}]);
//# sourceMappingURL=vendors~ud-prosemirror.e2200bd2ce028f0185f8.js.map