/*! For license information please see course-manage-v2-udlite-app.a2d1b629882f11e56e69.js.LICENSE.txt */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["course-manage-v2-udlite-app","subscription-checkout-header-server-side","vendors~tapen-video-player-admin-udlite-app","vendors~video-mashup-asset","video-mashup-asset","video-player"],{"./node_modules/@babel/runtime/helpers/assertThisInitialized.js":function(e,t){function r(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/construct.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");var i=r("./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js");function o(t,r,a){if(i()){e.exports=o=Reflect.construct.bind(),e.exports.__esModule=true,e.exports["default"]=e.exports}else{e.exports=o=function e(t,r,i){var o=[null];o.push.apply(o,r);var a=Function.bind.apply(t,o);var s=new a;if(i)n(s,i.prototype);return s},e.exports.__esModule=true,e.exports["default"]=e.exports}return o.apply(null,arguments)}e.exports=o,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/extends.js":function(e,t){function r(){e.exports=r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e},e.exports.__esModule=true,e.exports["default"]=e.exports;return r.apply(this,arguments)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/inherits.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function i(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(t)n(e,t)}e.exports=i,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/inheritsLoose.js":function(e,t,r){var n=r("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function i(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;n(e,t)}e.exports=i,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js":function(e,t){function r(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@babel/runtime/helpers/setPrototypeOf.js":function(e,t){function r(t,n){e.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,r){t.__proto__=r;return t},e.exports.__esModule=true,e.exports["default"]=e.exports;return r(t,n)}e.exports=r,e.exports.__esModule=true,e.exports["default"]=e.exports},"./node_modules/@mux/mux-data-shakaplayer/dist/shakaplayer-mux.js":function(e,t,r){!function(){var t,r;t=this,r=function(){return function(){var e={254:function(e,t,r){e.exports=r(721).default},721:function(e,t,r){"use strict";var n=r(48),i=r.n(n),o=r(153),a=r.n(o),s=r(961),l=r.n(s);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var u=l().log,p=l().utils.secondsToMs,d=l().utils.assign,h=l().utils.getComputedStyle,m=l().utils.extractHostname,f=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().shaka;if("object"!==c(e)||void 0===e.constructor.version)return u.warn("[shakaPlayer-mux] You must provide a valid shakaPlayer to initShakaPlayerMux."),{emit:function(){u.warn("[shakaPlayer-mux] emit is a no-op because initShakaPlayerMux was not initialized correctly")},loadErrorHandler:function(){u.warn("[shakaPlayer-mux] loadErrorHandler is a no-op because initShakaPlayerMux was not initialized correctly")}};var n=function(t){return e.getMediaElement()&&e.getMediaElement()[t]},o=function(t){var r=e.getMediaElement();if(r)return parseInt(h(r,t))},s=function(){var e=n("preload");return"auto"===e||"metadata"===e};function f(){var t=a().fullscreenElement||a().webkitFullscreenElement||a().mozFullScreenElement||a().msFullscreenElement;return t?t===e.getMediaElement():void 0}var g={automaticErrorTracking:!0};(t=d(g,t)).data=d({player_software_name:"Shaka Player",player_software_version:e.constructor.version,player_mux_plugin_name:"shakaplayer-mux",player_mux_plugin_version:"5.10.0"},t.data);var y=l().utils.generateShortID();e.mux={},e.mux.emit=function(e,t){l().emit(y,e,t)},t.getPlayheadTime=function(){return p(n("currentTime"))},t.getStateData=function(){var t=e.getStats();return{player_is_paused:n("paused"),player_width:o("width"),player_height:o("height"),video_source_height:t.height,video_source_width:t.width,player_is_fullscreen:f(),player_autoplay_on:n("autoplay"),player_preload_on:s(),video_source_url:e.getAssetUri(),video_source_duration:p(n("duration")),view_dropped_frame_count:t.droppedFrames,video_poster_url:n("poster"),player_language_code:n("lang")}};var b=["pause","play","playing","seeking","seeked","timeupdate","stalled","waiting","ended"],v={},w={},E=!1,S=function(){E=!0;var t=e.getMediaElement();if(!t)return u.warn("[shakaPlayer-mux] Unable to getMediaElement() on shaka.Player instance when attempting to attachMediaElementEvents()");b.forEach((function(r){v[r]=function(){var n={};"timeupdate"===r&&(n.player_playhead_time=t.currentTime),e.mux.emit(r,n)},t.addEventListener(r,v[r],!1)}))};w.onstatechange=function(t){!E&&e.getMediaElement()&&S(),"load"===t.state&&e.mux.emit("playerready")};var _={video_source_bitrate:void 0,video_source_codec:void 0,video_source_fps:void 0},x=function(){var t,r,n=e.getVariantTracks(),i=n&&n.filter((function(e){return e.active})),o=i&&i.map((function(e){return e.bandwidth}));return{video_source_bitrate:o&&o.reduce((function(e,t){return e+t}),0),video_source_codec:null==i||null===(t=i[0])||void 0===t?void 0:t.videoCodec,video_source_fps:null==i||null===(r=i[0])||void 0===r?void 0:r.frameRate}},D=function(){var t=x();t&&JSON.stringify(t)!==JSON.stringify(_)&&(_=t,e.mux.emit("renditionchange",t))};w.adaptation=function(){D()},w.variantchanged=function(){D()},e.addEventListener("onstatechange",w.onstatechange),e.addEventListener("adaptation",w.adaptation),e.addEventListener("variantchanged",w.variantchanged);var C=function(e){var t,n;if(e.message)return e.message;var i=null===(t=r.util)||void 0===t||null===(n=t.Error)||void 0===n?void 0:n.Code;for(var o in i)if(i[o]===e.code)return o;return e.code},T=function(t){var r;2===(null==t?void 0:t.severity)&&e.mux.emit("error",{player_error_code:t.code,player_error_message:C(t),player_error_context:null===(r=t.data)||void 0===r?void 0:r.toString()})};w.error=function(e){if(t.automaticErrorTracking){var r=e.detail;T(r)}},e.addEventListener("error",w.error),e.mux.destroy=function(){Object.keys(w).forEach((function(t){e.removeEventListener(t,w[t]),delete w[t]})),Object.keys(v).forEach((function(t){var r=e.getMediaElement();r&&r.removeEventListener(t,v[t],!1),delete v[t]})),e.mux.emit("destroy")};var O={0:"manifest",1:"media"};e.getNetworkingEngine().registerResponseFilter((function(t,r){var n=l().utils.now();if(!r.fromCache){var i=O[t&&t.toString()];if(t){var o={request_bytes_loaded:r.data.byteLength,request_hostname:m(r.uri),request_url:r.uri,request_response_headers:r.headers,request_type:i,request_start:r.timeMs?n-r.timeMs:void 0,request_response_end:n};e.mux.emit("requestcompleted",o)}}})),l().init(y,t);var k={emit:e.mux.emit,loadErrorHandler:T};return k};f.utils=l().utils,t.default=f},153:function(e,t,r){var n,i=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},o=r(558);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=n},48:function(e,t,r){var n;n="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e.exports=n},961:function(e){var t;t=function(){return function(){var e={80:function(e,t,r){e.exports=r(728).default},728:function(e,t,r){"use strict";r.d(t,{default:function(){return Nt}});var n=r(48),i=r.n(n),o=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},a=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},s=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||a()),e.muxId):e},l=function(e){var t;e&&void 0!==e.nodeName?e=s(t=e):t=document.querySelector(e);var r=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,r]},c=r(640),u=r.n(c),p=u().methodFactory;u().methodFactory=function(e,t,r){var n=p(e,t,r);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);n.apply(void 0,e)}},u().setLevel(u().getLevel());var d=u();function h(){return"1"===(i().doNotTrack||i().navigator&&i().navigator.doNotTrack)}var m={now:function(){var e=i().performance,t=e&&e.timing,r=t&&t.navigationStart,n="number"==typeof r&&"function"==typeof e.now?r+e.now():Date.now();return Math.round(n)}},f=function(e){return g(e)[0]},g=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,r=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return r&&(t=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,t]},y=function(){var e=i().performance;return void 0!==(e&&e.timing)},b=function(){var e=i().performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},v=function(){var e=i().performance,t=e&&e.timing;return t&&t.navigationStart};function w(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}var E=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],S=["x-cdn","content-type"].concat(E);function _(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var r=e.split(": "),n=r.shift();n&&(S.indexOf(n.toLowerCase())>=0||0===n.toLowerCase().indexOf("x-litix-"))&&(t[n]=r.join(": "))}})),t}function x(e){if(e){var t=E.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var D=function(e){var t={};for(var r in e){var n=e[r];-1!==n["DATA-ID"].search("io.litix.data.")&&(t[n["DATA-ID"].replace("io.litix.data.","")]=n.VALUE)}return t};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){if(!e)return{};var t=v(),r=e.loading,n=r?r.start:e.trequest,i=r?r.first:e.tfirst,o=r?r.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+n),responseStart:Math.round(t+i),responseEnd:Math.round(t+o)}},P=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return _(e.getAllResponseHeaders())};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var r=e.getRequests({state:"executed"});if(0===r.length)return{};var n,i=r[r.length-1],o=f(i.url),a=i.url,s=i.bytesLoaded,l=new Date(i.requestStartDate).getTime(),c=new Date(i.firstByteDate).getTime(),u=new Date(i.requestEndDate).getTime(),p=isNaN(i.duration)?0:i.duration,d="function"==typeof t.getMetricsFor?t.getMetricsFor(i.mediaType).HttpList:t.getDashMetrics().getHttpRequests(i.mediaType);return d.length>0&&(n=_(d[d.length-1]._responseHeaders||"")),{requestStart:l,requestResponseStart:c,requestResponseEnd:u,requestBytesLoaded:s,requestResponseHeaders:n,requestMediaDuration:p,requestHostname:o,requestUrl:a,requestId:n?x(n):void 0}},N=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]};function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var M=0,q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"on",value:function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++M,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach((function(e,n){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(n,1)}))}},{key:"one",value:function(e,t,r){var n=this;t._eventEmitterGuid=t._eventEmitterGuid||++M;var i=function i(){n.off(e,i),t.apply(r||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var r=this;if(this._listeners){t=t||{};var n=this._listeners["before*"]||[],i=this._listeners[e]||[],o=this._listeners["after"+e]||[],a=function(t,n){(t=t.slice()).forEach((function(t){t.call(r,{type:e},n)}))};a(n,t),a(i,t),a(o,t)}}}],r&&L(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),U=q;function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var F=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){r._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("seeking",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==r._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,n){null!==r._playbackHeartbeatInterval&&(i().clearInterval(r._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:n.viewer_time}),r._playbackHeartbeatInterval=null)}))}var t,r;return t=e,(r=[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=i().setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(i().clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}])&&H(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var z=function(e,t,r){return t&&B(e.prototype,t),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("viewinit",(function(){r.viewErrored=!1})),t.on("error",(function(e,n){try{var i=t.errorTranslator({player_error_code:n.player_error_code,player_error_message:n.player_error_message,player_error_context:n.player_error_context});i?(t.data.player_error_code=i.player_error_code||n.player_error_code,t.data.player_error_message=i.player_error_message||n.player_error_message,t.data.player_error_context=i.player_error_context||n.player_error_context,r.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message,delete t.data.player_error_context)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),r.viewErrored=!0}}))}));function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}var t,r;return t=e,(r=[{key:"_updateWatchTime",value:function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),w(this.pm.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}])&&V(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var K=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=m.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var n=this._startPlaybackTimeTracking.bind(this);t.on("playing",n),t.on("adplaying",n),t.on("seeked",n);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("adplaying",(function(){r._isAdPlaying=!0})),t.on("adended",(function(){r._isAdPlaying=!1})),t.on("adpause",(function(){r._isAdPlaying=!1})),t.on("adbreakstart",(function(){r._isAdPlaying=!1})),t.on("adbreakend",(function(){r._isAdPlaying=!1})),t.on("adplay",(function(){r._isAdPlaying=!1})),t.on("viewinit",(function(){r._playbackTimeTrackerLastPlayheadPosition=-1,r._lastTime=m.now(),r._isAdPlaying=!1,r._callbackUpdatePlaybackTime=null}))}var t,r;return t=e,(r=[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=m.now(),r=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?r=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(r=t-this._lastTime),r>0&&r<=1e3&&w(this.pm.data,"view_content_playback_time",r),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}])&&G(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t;var r=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",r),t.on("playbackheartbeatend",r),t.on("timeupdate",r),t.on("destroy",(function(){t.off("timeupdate",r)}))}var t,r;return t=e,(r=[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var r=this,n=function(){r.pm.currentFragmentPDT&&r.pm.currentFragmentStart&&(r.pm.data.player_program_time=r.pm.currentFragmentPDT+r.pm.data.player_playhead_time-r.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,n(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();void 0!==i&&(this.pm.data.player_playhead_time=i,n(),this._updateMaxPlayheadPosition())}}}])&&$(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Q=3e5,J=function(e,t,r){return t&&Y(e.prototype,t),r&&Y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.disableRebufferTracking){var r,n=function(e,t){i(t),r=void 0},i=function(e){if(r){var n=e.viewer_time-r;w(t.data,"view_rebuffer_duration",n),r=e.viewer_time,t.data.view_rebuffer_duration>Q&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(Q,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){r||(w(t.data,"view_rebuffer_count",1),r=i.viewer_time,t.one("rebufferend",n))})),t.on("viewinit",(function(){r=void 0,t.off("rebufferend",n)}))}}));function Z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ee=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.disableRebufferTracking||t.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){r._cleanupRebufferTracker(null,{viewer_time:m.now()})})))}var t,r;return t=e,r=[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&r>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var n=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&n>0&&i-n>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-n}))}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}],r&&Z(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),te=ee;function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ne=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.on("viewinit",(function(){var e=t.data,n=e.view_id;if(!e.view_program_changed){var i=function(e,i){var o=i.viewer_time;"playing"===e.type&&void 0===t.data.view_time_to_first_frame?r.calculateTimeToFirstFrame(o||m.now(),n):"adplaying"!==e.type||void 0!==t.data.view_time_to_first_frame&&!r._inPrerollPosition()||r.calculateTimeToFirstFrame(o||m.now(),n)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}var t,r;return t=e,(r=[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}])&&re(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oe=function(e,t,r){return t&&ie(e.prototype,t),r&&ie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("viewinit",(function(){r._lastPlayheadPosition=-1})),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(e){t.on(e,(function(){if(r._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var e=t.data.player_playhead_time-r._lastPlayheadPosition;if(e<0)return void(r._lastPlayheadPosition=-1);var n=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),i=Math.max(0,n-1),o=Math.max(0,1-n);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,o),w(t.data,"view_total_content_playback_time",e),w(t.data,"view_total_upscaling",i*e),w(t.data,"view_total_downscaling",o*e)}r._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(e){t.on(e,(function(){r._lastPlayheadPosition=t.data.player_playhead_time,r._lastPlayerWidth=t.data.player_width,r._lastPlayerHeight=t.data.player_height,r._lastSourceWidth=t.data.video_source_width,r._lastSourceHeight=t.data.video_source_height}))}))}));function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var se=function(e,t,r){return t&&ae(e.prototype,t),r&&ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSeeking=!1;var n=-1,i=function(){var e=m.now(),i=(t.data.viewer_time||e)-(n||e);w(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),r.isSeeking=!1,n=-1};t.on("seeking",(function(e,o){Object.assign(t.data,o),r.isSeeking&&o.viewer_time-n<=2e3?n=o.viewer_time:(r.isSeeking&&i(),r.isSeeking=!0,n=o.viewer_time,w(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){r.isSeeking&&(i(),t.send("seeked")),r.isSeeking=!1,n=-1}))}));function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var pe=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},de=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],he=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pm=t,t.on("viewinit",(function(){r.isAdBreak=!1,r._currentAdRequestNumber=0,r._currentAdResponseNumber=0,r._adRequests=[],r._adResponses=[],r._adHasPlayed=!1,r._wouldBeNewAdPlay=!0,r._prerollPlayTime=void 0})),de.forEach((function(e){return t.on(e,r._updateAdData.bind(r))}));var n=function(){r.isAdBreak=!1};t.on("adbreakstart",(function(){r.isAdBreak=!0})),t.on("play",n),t.on("playing",n),t.on("viewend",n),t.on("adrequest",(function(e,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdRequestNumber++},n),pe(r._adRequests,n),w(t.data,"view_ad_request_count"),r.inPrerollPosition()&&(t.data.view_preroll_requested=!0,r._adHasPlayed||w(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+r._currentAdResponseNumber++},n),pe(r._adResponses,n);var i=r.findAdRequest(n.ad_request_id);i&&w(t.data,"view_ad_request_time",Math.max(0,n.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,n){r._adHasPlayed=!0,r._wouldBeNewAdPlay&&(r._wouldBeNewAdPlay=!1,w(t.data,"view_ad_played_count")),r.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,r._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,n.viewer_time-r._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,n.viewer_time-t.data.view_start)),r._prerollPlayTime=n.viewer_time)})),t.on("adplaying",(function(e,n){r.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==r._prerollPlayTime&&(t.data.view_preroll_load_time=n.viewer_time-r._prerollPlayTime,t.data.view_startup_preroll_load_time=n.viewer_time-r._prerollPlayTime)})),t.on("adclicked",(function(e,n){r._wouldBeNewAdPlay||w(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,n){r._wouldBeNewAdPlay||w(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){r._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){r._wouldBeNewAdPlay=!0}))}var t,r;return t=e,(r=[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=le(g(t.ad_tag_url),2),n=r[0],i=r[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=n}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var o=le(g(t.ad_asset_url),2),a=o[0],s=o[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=a}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}])&&ue(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var fe=function(e,t,r){return t&&me(e.prototype,t),r&&me(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(){t.disableRebufferTracking||r&&(w(t.data,"view_waiting_rebuffer_duration",m.now()-r),r=!1,i().clearInterval(n))},a=!1,s=function(){a=!1,o()};t.on("waiting",(function(){a&&(t.disableRebufferTracking||(w(t.data,"view_waiting_rebuffer_count",1),r=m.now(),n=i().setInterval((function(){if(r){var e=m.now();w(t.data,"view_waiting_rebuffer_duration",e-r),r=e}}),250)))})),t.on("playing",(function(){o(),a=!0})),t.on("pause",s),t.on("seeking",s)}));function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ye=function(e,t,r){return t&&ge(e.prototype,t),r&&ge(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(){r.lastWallClockTime=m.now(),t.on("before*",i)},i=function(e){var n=m.now(),i=r.lastWallClockTime;r.lastWallClockTime=n,n-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:n}),Object.assign(t.data,{viewer_time:n}),t.send("devicewake"))};t.one("playbackheartbeat",n),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",n)}))})),be=r(375),ve=r(655),we=r.n(ve),Ee="muxData",Se=function(){var e;try{e=be.parse(we().get(Ee)||"")}catch(t){e={}}return e},_e=function(e){try{we().set(Ee,be.stringify(e),{expires:365})}catch(e){}},xe=function(){var e=Se();return e.mux_viewer_id=e.mux_viewer_id||o(),e.msn=e.msn||Math.random(),_e(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}};function De(e,t){var r=t.beaconCollectionDomain,n=t.beaconDomain;if(r)return"https://"+r;var i=n||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}var Ce=function(){var e;switch(Te()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},Te=function(){var e=i().navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};Ce.getConnectionFromAPI=Te;var Oe=Ce,ke=Ae({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),Pe=Ae({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function Ae(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function Ie(e){var t={},r={};return Object.keys(e).forEach((function(n){var i=!1;if(e.hasOwnProperty(n)&&void 0!==e[n]){var o=n.split("_"),a=o[0],s=ke[a];s||(d.info("Data key word `"+o[0]+"` not expected in "+n),s=a+"_"),o.splice(1).forEach((function(e){"url"===e&&(i=!0),Pe[e]?s+=Pe[e]:Number(e)&&Math.floor(Number(e))===Number(e)?s+=e:(d.info("Data key word `"+e+"` not expected in "+n),s+="_"+e+"_")})),i?r[s]=e[n]:t[s]=e[n]}})),Object.assign(t,r)}var je={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Re=["hb","requestcompleted","requestfailed","requestcanceled"],Ne="https://img.litix.io",Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||Ne,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},je,t)};Le.prototype.queueEvent=function(e,t){var r=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},Le.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},Le.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),i().clearTimeout(this._sendTimeout)},Le.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],Ie({mux_view_message:"event queue truncated"}));var r=this._createPayload(t);qe(this._beaconUrl,r,!0,(function(){}))},Le.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(t),n=m.now();qe(this._beaconUrl,r,!1,(function(r,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,d.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=m.now()-n,e._postInFlight=!1}))}},Le.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},Le.prototype._startBeaconSending=function(){var e=this;i().clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=i().setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},Le.prototype._createPayload=function(e){var t,r,n,i=this,o={transmission_timestamp:Math.round(m.now())};this._roundTripTime&&(o.rtt_ms=Math.round(this._roundTripTime));var a=function(){t=JSON.stringify({metadata:o,events:r||e}),n=t.length/1024},s=function(){return n<=i._options.maxPayloadKBSize};return a(),s()||(d.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),r=e.filter((function(e){return-1===Re.indexOf(e.e)})),a()),s()||(d.info("Payload size still too big ("+n+" kb). Cropping fields.."),r.forEach((function(e){for(var t in e){var r=e[t];"string"==typeof r&&r.length>51200&&(e[t]=r.substring(0,51200))}})),a()),t};var Me=function(e){return e.length<=57344},qe=function(e,t,r,n){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))n();else if(i().fetch)i().fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:Me(t)}).then((function(e){return n(null,e.ok?null:"Error")})).catch((function(e){return n(null,e)}));else{if(i().XMLHttpRequest){var o=new(i().XMLHttpRequest);return o.onreadystatechange=function(){if(4===o.readyState)return n(null,200!==o.status?"error":void 0)},o.open("POST",e),o.setRequestHeader("Content-Type","text/plain"),void o.send(t)}n()}},Ue=Le;function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ke=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],$e=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],Xe=["ad_id","ad_creative_id","ad_universal_id"],Ye=["viewstart","error","ended","viewend"],Qe=function(){function e(t,r){var n,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ve(this,e),Ge(this,"previousBeaconData",null),Ge(this,"lastEventTime",0),Ge(this,"rateLimited",!1),this.mux=t,this.envKey=r,this.options=v,this.eventQueue=new Ue(De(this.envKey,this.options)),this.sampleRate=null!==(n=this.options.sampleRate)&&void 0!==n?n:1,this.disableCookies=null!==(o=this.options.disableCookies)&&void 0!==o&&o,this.respectDoNotTrack=null!==(a=this.options.respectDoNotTrack)&&void 0!==a&&a,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(s=this.options.platform)||void 0===s?void 0:s.name,viewer_application_version:null===(l=this.options.platform)||void 0===l?void 0:l.version,viewer_application_engine:null===(c=this.options.platform)||void 0===c?void 0:c.layout,viewer_device_name:null===(u=this.options.platform)||void 0===u?void 0:u.product,viewer_device_category:"",viewer_device_manufacturer:null===(p=this.options.platform)||void 0===p?void 0:p.manufacturer,viewer_os_family:null===(d=this.options.platform)||void 0===d||null===(h=d.os)||void 0===h?void 0:h.family,viewer_os_architecture:null===(m=this.options.platform)||void 0===m||null===(f=m.os)||void 0===f?void 0:f.architecture,viewer_os_version:null===(g=this.options.platform)||void 0===g||null===(y=g.os)||void 0===y?void 0:y.version,viewer_connection_type:Oe(),page_url:null===i()||void 0===i()||null===(b=i().location)||void 0===b?void 0:b.href},this.viewerData=this.disableCookies?{}:xe()}var t,r;return t=e,(r=[{key:"send",value:function(e,t){var r;if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&h())return d.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==ze(t))return d.error("A data object was expected in send() but was not provided");var n,i,a=this.disableCookies?{}:(n=Se(),i=m.now(),n.session_start&&(n.sst=n.session_start,delete n.session_start),n.session_id&&(n.sid=n.session_id,delete n.session_id),n.session_expires&&(n.sex=n.session_expires,delete n.session_expires),(!n.sex||n.sex<i)&&(n.sid=o(),n.sst=i),n.sex=i+15e5,_e(n),{session_id:n.sid,session_start:n.sst,session_expires:n.sex}),s=Be(Be(Be(Be(Be({},this.pageLevelData),t),a),this.viewerData),{},{event:e,env_key:this.envKey});s.user_id&&(s.viewer_user_id=s.user_id,delete s.user_id);var l=(null!==(r=s.mux_sample_number)&&void 0!==r?r:0)>=this.sampleRate,c=Ie(this._deduplicateBeaconData(e,s));if(this.lastEventTime=this.mux.utils.now(),l)return d.info("Not sending event due to sample rate restriction",e,s,c);if(this.envKey||d.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,s,c),!this.rateLimited)if(d.info("Sending event",e,s,c),this.rateLimited=!this.eventQueue.queueEvent(e,c),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):Ye.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return s.event="eventrateexceeded",c=Ie(s),this.eventQueue.queueEvent(s.event,c),d.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var r=this,n={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)n=Be({},t),i&&(this.previousBeaconData=n),i&&"viewend"===e&&(this.previousBeaconData=null);else{var o=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),a=i[0],s=i[1];r.previousBeaconData&&(s!==r.previousBeaconData[a]||Ke.indexOf(a)>-1||r.objectHasChanged(o,a,s,r.previousBeaconData[a])||r.eventRequiresKey(e,a))&&(n[a]=s,r.previousBeaconData[a]=s)}))}return n}},{key:"objectHasChanged",value:function(e,t,r,n){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===ze(r)&&"object"===ze(n)&&Object.keys(r||{}).length===Object.keys(n||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")||!(!Xe.includes(t)||!$e.includes(e))}}])&&We(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ze=function(e,t,r){return t&&Je(e.prototype,t),r&&Je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=0,n=0,i=0,o=0,a=0,s=0,l=0;t.on("requestcompleted",(function(e,s){var l,c,u=s.request_start,p=s.request_response_start,d=s.request_response_end,h=s.request_bytes_loaded;if(o++,p?(l=p-(null!=u?u:0),c=(null!=d?d:0)-p):c=(null!=d?d:0)-(null!=u?u:0),c>0&&h&&h>0){var m=h/c*8e3;a++,n+=h,i+=c,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,m),t.data.view_average_request_throughput=n/i*8e3,t.data.view_request_count=o,l>0&&(r+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=r/a)}})),t.on("requestfailed",(function(e,r){o++,s++,t.data.view_request_count=o,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,r){o++,l++,t.data.view_request_count=o,t.data.view_request_canceled_count=l}))}));function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var tt=function(e,t,r){return t&&et(e.prototype,t),r&&et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.on("before*",(function(e,n){var i=n.viewer_time,o=m.now(),a=r._lastEventTime;if(r._lastEventTime=o,a&&o-a>36e5){var s=Object.keys(t.data).reduce((function(e,r){return 0===r.indexOf("video_")?Object.assign(e,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,t.data[r])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))}));function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ot(e,t){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ot(e,t)}function at(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return st(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}var ct=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ot(e,t)}(i,e);var t,r,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=lt(e);if(t){var i=lt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return at(this,r)}}(i);function i(e,t,r){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(a=n.call(this)).DOM_CONTENT_LOADED_EVENT_END=b(),a.NAVIGATION_START=v(),a.mux=e,a.id=t,(r=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),d.setLevel(r.debug?"debug":"warn"),a.getPlayheadTime=r.getPlayheadTime,a.getStateData=r.getStateData||function(){return{}},a.getAdData=r.getAdData||function(){},a.minimumRebufferDuration=r.minimumRebufferDuration,a.sustainedRebufferThreshold=r.sustainedRebufferThreshold,a.playbackHeartbeatTime=r.playbackHeartbeatTime,a.disableRebufferTracking=r.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=r.disablePlayheadRebufferTracking,a.errorTranslator=r.errorTranslator,a.playbackEventDispatcher=new Qe(e,r.data.env_key,r),a.data={player_instance_id:o(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconCollectionDomain?r.beaconCollectionDomain:r.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1,a.oldEmit=a.emit,a.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var s=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(st(a));a.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",s),this.one("adbreakstart",s)}));var l=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(st(a));if(a.on("videochange",(function(e,t){l(t)})),a.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),l(Object.assign(t,{view_program_changed:!0})),s(),this.emit("play"),this.emit("playing")})),a.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),a.on("destroy",a.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var c=function(){var e=void 0!==a.data.view_start;a.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",c,!1);var u=function(e){e.persisted||a.destroy()};window.addEventListener("pagehide",u,!1),a.on("destroy",(function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("pagehide",u)}))}return a.on("playerready",(function(e,t){Object.assign(this.data,t)})),ct.forEach((function(e){a.on(e,(function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,r),this._sanitizeData()})),a.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),a.on("viewend",(function(e,t){Object.assign(a.data,t)})),a.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),a.longResumeTracker=new tt(st(a)),a.errorTracker=new z(st(a)),new ye(st(a)),a.seekingTracker=new se(st(a)),a.playheadTime=new X(st(a)),a.playbackHeartbeat=new F(st(a)),new oe(st(a)),a.watchTimeTracker=new W(st(a)),new K(st(a)),a.adTracker=new he(st(a)),new te(st(a)),new J(st(a)),new ne(st(a)),new fe(st(a)),new Ze(st(a)),r.hlsjs&&a.addHLSJS(r),r.dashjs&&a.addDashJS(r),a.emit("viewinit",r.data),a}return t=i,r=[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(g(t.video_source_url),2),n=r[0],i=r[1];t.video_source_domain=i,t.video_source_hostname=n}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r})),["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var r=e.data[t].toLowerCase();0!==r.indexOf("data:")&&0!==r.indexOf("blob:")||(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(e,t){var r=this;Object.keys(this.data).forEach((function(e){0===e.indexOf("video_")&&delete r.data[e]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(e,t){delete this.data.player_error_code,delete this.data.player_error_message}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=o(),r=function(){t===e.data.view_id&&w(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,r){var n=arguments.length>4?arguments[4]:void 0,i=e.log,o=e.utils.secondsToMs,a=function(e){var t,r=parseInt(n.version);return 1===r&&null!==e.programDateTime&&(t=e.programDateTime),0===r&&null!==e.pdt&&(t=e.pdt),t};if(y()){var s=function(r,n){return e.emit(t,r,n)},l=function(e,t){var r=t.levels,n=t.audioTracks,i=t.url,o=t.stats,a=t.networkDetails,l=t.sessionData,c={},u={};r.forEach((function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),n.forEach((function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var p=k(o),d=p.bytesLoaded,h=p.requestStart,m=p.responseStart,g=p.responseEnd;s("requestcompleted",T(T({},D(l)),{},{request_event_type:e,request_bytes_loaded:d,request_start:h,request_response_start:m,request_response_end:g,request_type:"manifest",request_hostname:f(i),request_response_headers:P(a),request_rendition_lists:{media:c,audio:u,video:{}}}))};r.on(n.Events.MANIFEST_LOADED,l);var c=function(e,t){var r=t.details,n=t.level,i=t.networkDetails,l=t.stats,c=k(l),u=c.bytesLoaded,p=c.requestStart,d=c.responseStart,h=c.responseEnd,m=r.fragments[r.fragments.length-1],g=a(m)+o(m.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:u,request_start:p,request_response_start:d,request_response_end:h,request_current_level:n,request_type:"manifest",request_hostname:f(r.url),request_response_headers:P(i),video_holdback:r.holdBack&&o(r.holdBack),video_part_holdback:r.partHoldBack&&o(r.partHoldBack),video_part_target_duration:r.partTarget&&o(r.partTarget),video_target_duration:r.targetduration&&o(r.targetduration),video_source_is_live:r.live,player_manifest_newest_program_time:isNaN(g)?void 0:g})};r.on(n.Events.LEVEL_LOADED,c);var u=function(e,t){var r=t.details,n=t.networkDetails,i=t.stats,o=k(i),a=o.bytesLoaded,l=o.requestStart,c=o.responseStart,u=o.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:a,request_start:l,request_response_start:c,request_response_end:u,request_type:"manifest",request_hostname:f(r.url),request_response_headers:P(n)})};r.on(n.Events.AUDIO_TRACK_LOADED,u);var p=function(e,t){var n=t.stats,i=t.networkDetails,o=t.frag;n=n||o.stats;var a=k(n),l=a.bytesLoaded,c=a.requestStart,u=a.responseStart,p=a.responseEnd,d=i?P(i):void 0,h={request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:u,request_response_end:p,request_hostname:i?f(i.responseURL):void 0,request_id:d?x(d):void 0,request_response_headers:d,request_media_duration:o.duration,request_url:null==i?void 0:i.responseURL};"main"===o.type?(h.request_type="media",h.request_current_level=o.level,h.request_video_width=(r.levels[o.level]||{}).width,h.request_video_height=(r.levels[o.level]||{}).height,h.request_labeled_bitrate=(r.levels[o.level]||{}).bitrate):h.request_type=o.type,s("requestcompleted",h)};r.on(n.Events.FRAG_LOADED,p);var d=function(e,t){var r=t.frag,n=r.start,i={currentFragmentPDT:a(r),currentFragmentStart:o(n)};s("fragmentchange",i)};r.on(n.Events.FRAG_CHANGED,d);var h=function(e,t){var r=t.type,i=t.details,o=t.response,a=t.fatal,l=t.frag,c=t.networkDetails,u=(null==l?void 0:l.url)||t.url||"",p=c?P(c):void 0;if(i!==n.ErrorDetails.MANIFEST_LOAD_ERROR&&i!==n.ErrorDetails.MANIFEST_LOAD_TIMEOUT&&i!==n.ErrorDetails.FRAG_LOAD_ERROR&&i!==n.ErrorDetails.FRAG_LOAD_TIMEOUT&&i!==n.ErrorDetails.LEVEL_LOAD_ERROR&&i!==n.ErrorDetails.LEVEL_LOAD_TIMEOUT&&i!==n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&i!==n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT&&i!==n.ErrorDetails.SUBTITLE_LOAD_ERROR&&i!==n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT&&i!==n.ErrorDetails.KEY_LOAD_ERROR&&i!==n.ErrorDetails.KEY_LOAD_TIMEOUT||s("requestfailed",{request_error:i,request_url:u,request_hostname:f(u),request_id:p?x(p):void 0,request_type:i===n.ErrorDetails.FRAG_LOAD_ERROR||i===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===n.ErrorDetails.SUBTITLE_LOAD_ERROR||i===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===n.ErrorDetails.KEY_LOAD_ERROR||i===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==o?void 0:o.code,request_error_text:null==o?void 0:o.text}),a){var d,h="".concat(u?"url: ".concat(u,"\n"):"")+"".concat(o&&(o.code||o.text)?"response: ".concat(o.code,", ").concat(o.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(d=t.err)||void 0===d?void 0:d.message,"\n"):"");s("error",{player_error_code:r,player_error_message:i,player_error_context:h})}};r.on(n.Events.ERROR,h);var m=function(e,t){var r=t.frag,n=r&&r._url||"";s("requestcanceled",{request_event_type:e,request_url:n,request_type:"media",request_hostname:f(n)})};r.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,m);var g=function(e,t){var n=t.level,o=r.levels[n];if(o&&o.attrs&&o.attrs.BANDWIDTH){var a,l=o.attrs.BANDWIDTH,c=parseFloat(o.attrs["FRAME-RATE"]);isNaN(c)||(a=c),l?s("renditionchange",{video_source_fps:a,video_source_bitrate:l,video_source_width:o.width,video_source_height:o.height,video_source_rendition_name:o.name,video_source_codec:null==o?void 0:o.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(n.Events.LEVEL_SWITCHED,g),r._stopMuxMonitor=function(){r.off(n.Events.MANIFEST_LOADED,l),r.off(n.Events.LEVEL_LOADED,c),r.off(n.Events.AUDIO_TRACK_LOADED,u),r.off(n.Events.FRAG_LOADED,p),r.off(n.Events.FRAG_CHANGED,d),r.off(n.Events.ERROR,h),r.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,m),r.off(n.Events.LEVEL_SWITCHED,g),r.off(n.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(n.Events.DESTROYING,r._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){var e;this.hlsjs&&((e=this.hlsjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,r){var n=e.log;if(r&&r.on){var i=function(r,n){return e.emit(t,r,n)},o=function(e){var t=e.type,r=(e.data||{}).url;i("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:f(r),request_url:r})};r.on("manifestLoaded",o);var a={},s=function(e){var t=e.type,n=e.fragmentModel,o=(e.chunk||{}).mediaInfo||{},s=o.type,l=o.bitrateList,c={};(l=l||[]).forEach((function(e,t){c[t]={},c[t].width=e.width,c[t].height=e.height,c[t].bitrate=e.bandwidth,c[t].attrs={}})),"video"===s?a.video=c:"audio"===s?a.audio=c:a.media=c;var u=R(n,r),p=u.requestStart,d=u.requestResponseStart,h=u.requestResponseEnd,m=u.requestResponseHeaders,f=u.requestMediaDuration,g=u.requestHostname,y=u.requestUrl,b=u.requestId;i("requestcompleted",{request_event_type:t,request_start:p,request_response_start:d,request_response_end:h,request_bytes_loaded:-1,request_type:s+"_init",request_response_headers:m,request_hostname:g,request_id:b,request_url:y,request_media_duration:f,request_rendition_lists:a})};r.on("initFragmentLoaded",s);var l=function(e){var t=e.type,n=e.fragmentModel,o=e.chunk||{},a=o.mediaInfo,s=o.start,l=(a||{}).type,c=R(n,r),u=c.requestStart,p=c.requestResponseStart,d=c.requestResponseEnd,h=c.requestBytesLoaded,m=c.requestResponseHeaders,f=c.requestMediaDuration,g=c.requestHostname,y=c.requestUrl,b=c.requestId,v=function(e,t){var r=t.getQualityFor(e),n=t.getCurrentTrackFor(e).bitrateList;return n?{currentLevel:r,renditionWidth:n[r].width||null,renditionHeight:n[r].height||null,renditionBitrate:n[r].bandwidth}:{}}(l,r),w=v.currentLevel,E=v.renditionWidth,S=v.renditionHeight,_=v.renditionBitrate;i("requestcompleted",{request_event_type:t,request_start:u,request_response_start:p,request_response_end:d,request_bytes_loaded:h,request_type:l,request_response_headers:m,request_hostname:g,request_id:b,request_url:y,request_media_start_time:s,request_media_duration:f,request_current_level:w,request_labeled_bitrate:_,request_video_width:E,request_video_height:S})};r.on("mediaFragmentLoaded",l);var c={video:void 0,audio:void 0,totalBitrate:void 0},u=function(e,t,o){if("number"==typeof e.newQuality){var a=e.mediaType;if("audio"===a||"video"===a){var s=r.getBitrateInfoListFor(a).find((function(t){return t.qualityIndex===e.newQuality}));if(s&&"number"==typeof s.bitrate){c[a]=I(I({},s),{},{codec:r.getCurrentTrackFor(a).codec});var l=function(){if(c.video&&"number"==typeof c.video.bitrate){if(c.video.width&&c.video.height){var e=c.video.bitrate;return c.audio&&"number"==typeof c.audio.bitrate&&(e+=c.audio.bitrate),e!==c.totalBitrate?(c.totalBitrate=e,{video_source_bitrate:e,video_source_height:c.video.height,video_source_width:c.video.width,video_source_codec:N(c.video.codec)}):void 0}n.warn("have bitrate info for video but missing width/height")}}();l&&i("renditionchange",l)}else n.warn("missing bitrate info for ".concat(a))}}else n.warn("missing evt.newQuality in qualityChangeRendered event",e)};r.on("qualityChangeRendered",u);var p=function(e){var t=e.request,r=e.mediaType;i("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:r,request_hostname:f(t.url)})};r.on("fragmentLoadingAbandoned",p);var d=function(e){var t,r,n=e.error,o=(null==n||null===(t=n.data)||void 0===t?void 0:t.request)||{},a=(null==n||null===(r=n.data)||void 0===r?void 0:r.response)||{};27===(null==n?void 0:n.code)&&i("requestfailed",{request_error:o.type+"_"+o.action,request_url:o.url,request_hostname:f(o.url),request_type:o.mediaType,request_error_code:a.status,request_error_text:a.statusText});var s="".concat(null!=o&&o.url?"url: ".concat(o.url,"\n"):"")+"".concat(null!=a&&a.status||null!=a&&a.statusText?"response: ".concat(null==a?void 0:a.status,", ").concat(null==a?void 0:a.statusText,"\n"):"");i("error",{player_error_code:null==n?void 0:n.code,player_error_message:null==n?void 0:n.message,player_error_context:s})};r.on("error",d),r._stopMuxMonitor=function(){r.off("manifestLoaded",o),r.off("initFragmentLoaded",s),r.off("mediaFragmentLoaded",l),r.off("qualityChangeRendered",u),r.off("error",d),r.off("fragmentLoadingAbandoned",p),delete r._stopMuxMonitor}}else n.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){var e;this.dashjs&&((e=this.dashjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.dashjs=void 0)}}],r&&it(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(U),pt=ut,dt=r(153),ht=r.n(dt);function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yt,bt=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],vt={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};i()&&i().WeakMap&&(yt=new WeakMap);var wt=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};wt.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},wt.prototype.processLine=function(e){var t=e.indexOf(":"),r=Tt(e,t),n=r[0],i=2===r.length?_t(r[1]):void 0;if("#"!==n[0])this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case"#EXT-X-TARGETDURATION":if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case"#EXT-X-PART-INF":Et(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":Et(this.manifest,r),this.setHoldBack();break;case"#EXTINF":0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case"#EXT-X-PROGRAM-DATE-TIME":var o=i,a=new Date(o);this.manifest.dateTimeString||(this.manifest.dateTimeString=o,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=o,this.currentUri.dateTimeObject=a;break;case"#EXT-X-VERSION":Et(this.manifest,r);break;case"#EXT-X-SESSION-DATA":var s=Ot(r[1]),l=D(s);Object.assign(this.manifest.sessionData,l)}},wt.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,r=e.targetDuration,n=e.partTargetDuration;if(t){var i="holdBack",o="partHoldBack",a=r&&3*r,s=n&&2*n;r&&!t.hasOwnProperty(i)&&(t[i]=a),a&&t[i]<a&&(t[i]=a),n&&!t.hasOwnProperty(o)&&(t[o]=3*n),n&&t[o]<s&&(t[o]=s)}};var Et=function(e,t){var r,n=St(t[0].replace("#EXT-X-",""));Ct(t[1])?(r={},r=Object.assign(Dt(t[1]),r)):r=_t(t[1]),e[n]=r},St=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},_t=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},xt=function(e){var t={},r=e.split("=");return r.length>1&&(t[St(r[0])]=_t(r[1])),t},Dt=function(e){for(var t=e.split(","),r={},n=0;t.length>n;n++){var i=t[n],o=xt(i);r=Object.assign(o,r)}return r},Ct=function(e){return e.indexOf("=")>-1},Tt=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},Ot=function(e){var t={};if(e){var r=e.search(",");return[e.slice(0,r),e.slice(r+1)].forEach((function(e,r){for(var n=e.replace(/['"]+/g,"").split("="),i=0;i<n.length;i++)"DATA-ID"===n[i]&&(t["DATA-ID"]=n[1-i]),"VALUE"===n[i]&&(t.VALUE=n[1-i])})),{data:t}}},kt=wt,Pt={safeCall:function(e,t,r,n){var i=n;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,r)}catch(e){d.info("safeCall error",e)}return i},safeIncrement:w,getComputedStyle:function(e,t){var r;if(e&&t&&i()&&"function"==typeof i().getComputedStyle)return yt&&yt.has(e)&&(r=yt.get(e)),r||(r=i().getComputedStyle(e,null),yt&&yt.set(e,r)),r.getPropertyValue(t)},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:_,cdnHeadersToRequestId:x,extractHostnameAndDomain:g,extractHostname:f,manifestParser:kt,generateShortID:a,generateUUID:o,now:m.now};function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var It={},jt=function e(t){var r=arguments;"string"==typeof t?e.hasOwnProperty(t)?i().setTimeout((function(){r=Array.prototype.splice.call(r,1),e[t].apply(null,r)}),0):d.warn("`"+t+"` is an unknown task"):"function"==typeof t?i().setTimeout((function(){t(e)}),0):d.warn("`"+t+"` is invalid.")},Rt={loaded:m.now(),NAME:"mux-embed",VERSION:"4.27.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,r){var n=ft(l(t),3),i=n[0],o=n[1],a=n[2],s=e.log,c=e.utils.getComputedStyle,u=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+o+"` query selector.");if("video"!==a&&"audio"!==a)return s.error("The element of `"+o+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),(r=Object.assign({automaticErrorTracking:!0},r)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},r.data),r.getPlayheadTime=function(){return u(i.currentTime)},r.getStateData=function(){var e,t,n=this.hlsjs&&this.hlsjs.url,o=this.dashjs&&mt("function"===this.dashjs.getSource)&&this.dashjs.getSource(),a={player_is_paused:i.paused,player_playhead_time:u(i.currentTime),player_width:parseInt(c(i,"width")),player_height:parseInt(c(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:ht()&&!!(ht().fullscreenElement||ht().webkitFullscreenElement||ht().mozFullScreenElement||ht().msFullscreenElement),video_poster_url:i.poster,video_source_url:n||o||i.currentSrc,video_source_duration:u(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null===(e=i)||void 0===e||null===(t=e.getVideoPlaybackQuality)||void 0===t?void 0:t.call(e).droppedVideoFrames},s=r.getPlayheadTime();if(i.getStartDate&&s>0){var l=i.getStartDate();if(l&&"function"==typeof l.getTime&&l.getTime()){var p=l.getTime();if(a.player_program_time=p+s,i.seekable.length>0){var d=p+i.seekable.end(i.seekable.length-1);a.player_live_edge_program_time=d}}}return a},i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,r){e.emit(o,t,r)};var p=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.destroy=p,i.mux.swapElement=p,i.mux.emit=p,i.mux.addHLSJS=p,i.mux.addDashJS=p,i.mux.removeHLSJS=p,i.mux.removeDashJS=p,i.mux.deleted=!0,e.emit(o,"destroy")},i.mux.swapElement=function(t){var r=ft(l(t),3),n=r[0],o=r[1],a=r[2];return n?"video"!==a&&"audio"!==a?e.log.error("The element of `"+o+"` was not a media element."):(n.muxId=i.muxId,delete i.muxId,n.mux=n.mux||{},n.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(n.mux.listeners).forEach((function(e){i.removeEventListener(e,n.mux.listeners[e],!1),n.addEventListener(e,n.mux.listeners[e],!1)})),n.mux.swapElement=i.mux.swapElement,n.mux.destroy=i.mux.destroy,delete i.mux,void(i=n)):e.log.error("No element was found with the `"+o+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(o,t)},i.mux.addDashJS=function(t){e.addDashJS(o,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(o)},i.mux.removeDashJS=function(){e.removeDashJS(o)},e.init(o,r),e.emit(o,"playerready"),i.paused||(e.emit(o,"play"),i.readyState>2&&e.emit(o,"playing")),i.mux.listeners={},bt.forEach((function(t){("error"!==t||r.automaticErrorTracking)&&(i.mux.listeners[t]=function(){var r={};if("error"===t){if(!i.error)return;if(1===i.error.code)return;r.player_error_code=i.error.code,r.player_error_message=vt[i.error.code]||i.error.message}e.emit(o,t,r)},i.addEventListener(t,i.mux.listeners[t],!1))}))}(jt,e,t)},destroyMonitor:function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():d.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var r=s(e);It[r]?It[r].addHLSJS(t):d.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(e,t){var r=s(e);It[r]?It[r].addDashJS(t):d.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(e){var t=s(e);It[t]?It[t].removeHLSJS():d.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=s(e);It[t]?It[t].removeDashJS():d.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){h()&&t&&t.respectDoNotTrack&&d.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=s(e);It[r]=new pt(jt,r,t)},emit:function(e,t,r){var n=s(e);It[n]?(It[n].emit(t,r),"destroy"===t&&delete It[n]):d.error("A monitor for `"+n+"` has not been initialized.")},checkDoNotTrack:h,log:d,utils:Pt,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(jt,Rt),void 0!==i()&&"function"==typeof i().addEventListener&&i().addEventListener("pagehide",(function(e){e.persisted||(jt.WINDOW_UNLOADING=!0)}),!1);var Nt=jt},655:function(e,t,r){var n,i;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(a){var s=!1;if(void 0===(i="function"==typeof(n=a)?n.call(t,r,t,e):n)||(e.exports=i),s=!0,"object"===o(t)&&(e.exports=a(),s=!0),!s){var l=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=l,c}}}((function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t};return function t(r){function n(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},n.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}return i=r.write?r.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}t||(a={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var p=l[u].split("="),d=p.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var h=p[0].replace(c,decodeURIComponent);if(d=r.read?r.read(d,h):r(d,h)||d.replace(c,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(t===h){a=d;break}t||(a[h]=d)}catch(e){}}return a}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,r){n(t,"",e(r,{expires:-1}))},n.withConverter=t,n}((function(){}))}))},153:function(e,t,r){var n,i=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},o=r(558);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=n},48:function(e,t,r){var n;n="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e.exports=n},640:function(e,t,r){var n,i;!function(o,a){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?o:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function s(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function l(e,r,n){return function(){typeof console!==t&&(s.call(this,r,n),this[e].apply(this,arguments))}}function c(e,t,r){return a(e)||l.apply(this,arguments)}function u(e,r,i){var o,a=this;r=null==r?"WARN":r;var l="loglevel";function u(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(e){}}}function p(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(l)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?l+=":"+e:"symbol"==typeof e&&(l=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||c,a.getLevel=function(){return o},a.setLevel=function(r,n){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(o=r,!1!==n&&u(r),s.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){r=e,p()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(r,!1),function(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var d=p();null==d&&(d=r),a.setLevel(d,!1)}var p=new u,d={};p.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new u(e,p.getLevel(),p.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return p.noConflict=function(){return typeof window!==t&&window.log===p&&(window.log=h),p},p.getLoggers=function(){return d},p.default=p,p},void 0===(i=n.call(t,r,t,e))||(e.exports=i)}()},375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,o,a=[];for(o in"string"!=typeof t&&(t="?"),e)if(r.call(e,o)){if((n=e[o])||null!=n&&!isNaN(n)||(n=""),o=i(o),n=i(n),null===o||null===n)continue;a.push(o+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,i={};t=r.exec(e);){var o=n(t[1]),a=n(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}},558:function(){}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}return r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(80)}()},e.exports=t()},558:function(){}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}return r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(254)}()},true?e.exports=r():undefined}()},"./node_modules/@udemy/design-system-utils/dist/esm/keyboard/focus-cycle.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/react/index.js");var i=r.n(n);var o=r("./node_modules/react-dom/index.js");var a=r.n(o);var s=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/find-focusables.js");var l=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");class c extends i.a.Component{constructor(){super(...arguments);this.element=null;this.detachedContent=null;this.onKeyDown=e=>{const t=e.which||e.keyCode;if(t===l["b"].UP||t===l["b"].DOWN){const r=this.props.getCycle(this.element);const n=r.findIndex((e=>e===document.activeElement));let i=null;if(n>=0&&t===l["b"].DOWN){i=(n+1)%r.length}else if(n>=0&&t===l["b"].UP){i=(n-1+r.length)%r.length}if(i!==null&&r[i]){e.preventDefault();r[i].focus()}}}}componentDidMount(){var e;this.element=a.a.findDOMNode(this);(e=this.element)===null||e===void 0?void 0:e.addEventListener("keydown",this.onKeyDown);if(this.props.detachedContent){var t;this.detachedContent=this.props.detachedContent.current;(t=this.detachedContent)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown)}}componentWillUnmount(){var e;(e=this.element)===null||e===void 0?void 0:e.removeEventListener("keydown",this.onKeyDown);this.element=null;if(this.props.detachedContent){var t;(t=this.detachedContent)===null||t===void 0?void 0:t.removeEventListener("keydown",this.onKeyDown);this.detachedContent=null}}render(){return i.a.Children.only(this.props.children)}}c.defaultProps={getCycle:s["a"]}},"./node_modules/@udemy/hooks/dist/esm/index.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/hooks/dist/esm/use-match-media/index.js");r.d(t,"a",(function(){return n["a"]}));r.d(t,"b",(function(){return n["b"]}))},"./node_modules/@udemy/icons/dist/arrow-left.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("arrow-left")},"./node_modules/@udemy/icons/dist/arrow-right.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("arrow-right")},"./node_modules/@udemy/icons/dist/article.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("article")},"./node_modules/@udemy/icons/dist/audio.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("audio")},"./node_modules/@udemy/icons/dist/bar-chart.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("bar-chart")},"./node_modules/@udemy/icons/dist/calendar-30.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("calendar-30")},"./node_modules/@udemy/icons/dist/cloud.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("cloud")},"./node_modules/@udemy/icons/dist/code.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("code")},"./node_modules/@udemy/icons/dist/collapse-diagonal.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("collapse-diagonal")},"./node_modules/@udemy/icons/dist/collapse.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("collapse")},"./node_modules/@udemy/icons/dist/deal.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("deal")},"./node_modules/@udemy/icons/dist/delete.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("delete")},"./node_modules/@udemy/icons/dist/downloadable-resource.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("downloadable-resource")},"./node_modules/@udemy/icons/dist/edit.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("edit")},"./node_modules/@udemy/icons/dist/expand-diagonal.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("expand-diagonal")},"./node_modules/@udemy/icons/dist/expand.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("expand")},"./node_modules/@udemy/icons/dist/flag.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("flag")},"./node_modules/@udemy/icons/dist/format-bold.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("format-bold")},"./node_modules/@udemy/icons/dist/format-italic.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("format-italic")},"./node_modules/@udemy/icons/dist/format-list-bullet.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("format-list-bullet")},"./node_modules/@udemy/icons/dist/format-list-number.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("format-list-number")},"./node_modules/@udemy/icons/dist/image.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("image")},"./node_modules/@udemy/icons/dist/info-outline.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("info-outline")},"./node_modules/@udemy/icons/dist/link.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("link")},"./node_modules/@udemy/icons/dist/lock.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("lock")},"./node_modules/@udemy/icons/dist/math.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("math")},"./node_modules/@udemy/icons/dist/menu.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("menu")},"./node_modules/@udemy/icons/dist/more.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("more")},"./node_modules/@udemy/icons/dist/next.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("next")},"./node_modules/@udemy/icons/dist/open-in-new.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("open-in-new")},"./node_modules/@udemy/icons/dist/pause.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("pause")},"./node_modules/@udemy/icons/dist/play-arrow.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("play-arrow")},"./node_modules/@udemy/icons/dist/play.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("play")},"./node_modules/@udemy/icons/dist/presentation.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("presentation")},"./node_modules/@udemy/icons/dist/previous.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("previous")},"./node_modules/@udemy/icons/dist/quiz.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("quiz")},"./node_modules/@udemy/icons/dist/reload.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("reload")},"./node_modules/@udemy/icons/dist/rewind.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("rewind")},"./node_modules/@udemy/icons/dist/schedule.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("schedule")},"./node_modules/@udemy/icons/dist/search.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("search")},"./node_modules/@udemy/icons/dist/security.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("security")},"./node_modules/@udemy/icons/dist/server.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("server")},"./node_modules/@udemy/icons/dist/settings.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("settings")},"./node_modules/@udemy/icons/dist/subtitles.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("subtitles")},"./node_modules/@udemy/icons/dist/tool.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("tools")},"./node_modules/@udemy/icons/dist/video-mashup.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("video-mashup")},"./node_modules/@udemy/icons/dist/volume-off.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("volume-off")},"./node_modules/@udemy/icons/dist/volume-on.ud-icon":function(e,t,r){e.exports=r("./node_modules/@udemy/react-core-components/dist/esm/index.js")["createIcon"]("volume-on")},"./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/autobind-decorator/lib/esm/index.js");var u=r("./node_modules/axios/index.js");var p=r.n(u);var d=r("./node_modules/mobx/lib/mobx.module.js");var h=r("./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/constants.js");var m,f,g,y,b,v,w;let E=(m=d["t"].ref,f=class e{constructor(e){i()(this,"inputValue",g,this);this.minInputLength=1;i()(this,"isMenuOpen",y,this);i()(this,"loadingState",b,this);i()(this,"suggestions",v,this);this.cachedSuggestions={};this.suggestTimeout=200;i()(this,"selectedSuggestionIndex",w,this);this.captureException=void 0;this._cancelSource=void 0;this._suggestTimeoutId=void 0;this.captureException=e}get selectedSuggestion(){return this.suggestions[this.selectedSuggestionIndex]||undefined}get query(){return this.inputValue.trim()}loadSuggestions(e){let{q:t,signal:r}=e;this.setSuggestions([])}setInputValue(e){this.inputValue=e}async suggest(e){var t;this.setInputValue(e);this.query.length>=this.minInputLength&&this.openMenu();this.selectedSuggestionIndex=-1;this.loadingState=h["a"].LOADING;this._suggestTimeoutId!==undefined&&clearTimeout(this._suggestTimeoutId);(t=this._cancelSource)===null||t===void 0?void 0:t.abort();this._suggestTimeoutId=this._cancelSource=undefined;if(this.query.length<this.minInputLength){this.setSuggestions([])}else if(this.query in this.cachedSuggestions){this.setSuggestions(this.cachedSuggestions[this.query])}else if(this.suggestTimeout!==null){this._suggestTimeoutId=setTimeout(this._loadSuggestions,this.suggestTimeout)}else{this._loadSuggestions()}}async _loadSuggestions(){this._cancelSource=new AbortController;try{await this.loadSuggestions({q:this.query,signal:this._cancelSource.signal})}catch(e){const t=p.a.isCancel(e)||(e===null||e===void 0?void 0:e.name)==="AbortError";!t&&(e===null||e===void 0?void 0:e.message)&&this.captureException(e);!t&&this.setSuggestions([])}}setSuggestions(e){this.suggestions=e;this.selectedSuggestionIndex=-1;this.loadingState=h["a"].LOADED}openMenu(){this.isMenuOpen=true}closeMenu(){this.isMenuOpen=false;this.selectedSuggestionIndex=-1}selectPreviousSuggestion(){if(this.suggestions.length>0){this.openMenu();if(this.selectedSuggestionIndex<0){this.selectedSuggestionIndex=this.suggestions.length-1}else{this.selectedSuggestionIndex-=1}}}selectNextSuggestion(){if(this.suggestions.length>0){this.openMenu();if(this.selectedSuggestionIndex>=this.suggestions.length-1){this.selectedSuggestionIndex=-1}else{this.selectedSuggestionIndex+=1}}}selectSuggestion(e,t){this.selectedSuggestionIndex=e;t===null||t===void 0?void 0:t(this.selectedSuggestion);this.selectedSuggestionIndex=-1;this.isMenuOpen=false}clearInputValue(){this.inputValue="";this.setSuggestions([]);this.isMenuOpen=false}},g=a()(f.prototype,"inputValue",[d["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),y=a()(f.prototype,"isMenuOpen",[d["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),b=a()(f.prototype,"loadingState",[d["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return h["a"].NOT_LOADED}}),v=a()(f.prototype,"suggestions",[m],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),w=a()(f.prototype,"selectedSuggestionIndex",[d["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return-1}}),a()(f.prototype,"selectedSuggestion",[d["g"]],Object.getOwnPropertyDescriptor(f.prototype,"selectedSuggestion"),f.prototype),a()(f.prototype,"query",[d["g"]],Object.getOwnPropertyDescriptor(f.prototype,"query"),f.prototype),a()(f.prototype,"setInputValue",[d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"setInputValue"),f.prototype),a()(f.prototype,"suggest",[d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"suggest"),f.prototype),a()(f.prototype,"_loadSuggestions",[c["a"]],Object.getOwnPropertyDescriptor(f.prototype,"_loadSuggestions"),f.prototype),a()(f.prototype,"setSuggestions",[d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"setSuggestions"),f.prototype),a()(f.prototype,"openMenu",[c["a"],d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"openMenu"),f.prototype),a()(f.prototype,"closeMenu",[c["a"],d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"closeMenu"),f.prototype),a()(f.prototype,"selectPreviousSuggestion",[d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"selectPreviousSuggestion"),f.prototype),a()(f.prototype,"selectNextSuggestion",[d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"selectNextSuggestion"),f.prototype),a()(f.prototype,"selectSuggestion",[d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"selectSuggestion"),f.prototype),a()(f.prototype,"clearInputValue",[c["a"],d["e"]],Object.getOwnPropertyDescriptor(f.prototype,"clearInputValue"),f.prototype),f)},"./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.module.css":function(e,t,r){e.exports={"autosuggest-container":"autosuggest-module--autosuggest-container--1wCRQ",menu:"autosuggest-module--menu--1fSkb",expand:"autosuggest-module--expand--j1K_V","fade-in":"autosuggest-module--fade-in--3BcQy","loading-container":"autosuggest-module--loading-container--3Vqhh","no-results":"autosuggest-module--no-results--kqBG4","suggestion-focus":"autosuggest-module--suggestion-focus--3hJgn","with-clear-button":"autosuggest-module--with-clear-button--1dzYK","with-custom-icon":"autosuggest-module--with-custom-icon--3KGGA","autosuggest-input":"autosuggest-module--autosuggest-input--12_MF","clear-button":"autosuggest-module--clear-button--3QqQb"}},"./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return C}));var n=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var i=r.n(n);var o=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var a=r("./node_modules/@udemy/design-system-utils/dist/esm/root-close-wrapper/root-close-wrapper.react-component.js");var s=r("./node_modules/@udemy/i18n/dist/esm/index.js");var l=r("./node_modules/@udemy/icons/dist/close.ud-icon");var c=r.n(l);var u=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var p=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var d=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var h=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var m=r("./node_modules/classnames/index.js");var f=r.n(m);var g=r("./node_modules/mobx/lib/mobx.module.js");var y=r("./node_modules/mobx-react/dist/mobx-react.module.js");var b=r("./node_modules/react/index.js");var v=r.n(b);var w=r("./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.module.css");var E=r.n(w);var S=r("./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/constants.js");var _,x,D;let C=Object(y["f"])(_=(x=(D=class e extends v.a.Component{constructor(){var e;super(...arguments);e=this;this.ref=v.a.createRef();this.onFocus=e=>{var t,r;this.props.autosuggestStore.openMenu();(t=(r=this.props).onFocus)===null||t===void 0?void 0:t.call(r,e)};this.onChange=e=>{var t,r;this.props.autosuggestStore.suggest(e.target.value);(t=(r=this.props).onChange)===null||t===void 0?void 0:t.call(r,e)};this.onKeyDown=e=>{const t=e.keyCode;const{autosuggestStore:r}=this.props;if(t===o["b"].RETURN&&r.selectedSuggestion){e.preventDefault();this.clickSelectedSuggestion(r.selectedSuggestionIndex)}else if(t===o["b"].ESCAPE){var n,i;e.preventDefault();r.closeMenu();(n=this.ref.current)===null||n===void 0?void 0:(i=n.querySelector("input"))===null||i===void 0?void 0:i.focus()}else if(t===o["b"].UP||t===o["b"].DOWN){e.preventDefault();t===o["b"].UP?r.selectPreviousSuggestion():r.selectNextSuggestion()}else if(t===o["b"].TAB&&r.suggestions.length>0&&r.isMenuOpen){e.preventDefault();e.shiftKey?r.selectPreviousSuggestion():r.selectNextSuggestion()}};this.onRootClose=(e,t,r)=>{if(r===a["a"].KEYBOARD&&t!==null&&t!==void 0&&t.contains(e.target)){if(this.menuContent){e.stopPropagation()}}this.props.autosuggestStore.closeMenu()};this.onClickSuggestion=e=>{const t=parseInt(e.currentTarget.dataset.index,10);this.props.autosuggestStore.selectSuggestion(t,this.props.onSuggestionSelected)};this.clickSelectedSuggestion=e=>{var t;((t=this.ref.current)===null||t===void 0?void 0:t.querySelectorAll(".ud-autosuggest-suggestion")[e]).click()};this.renderSuggestion=function(t,r){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const{autosuggestStore:i}=e.props;return v.a.createElement(u["a"],Object.assign({udStyle:"link",typography:"ud-text-md",className:f()("ud-autosuggest-suggestion",{[E.a["suggestion-focus"]]:t===i.selectedSuggestionIndex})},n,{"data-index":t,onClick:e.onClickSuggestion}),r)}}get menuContent(){const{autosuggestStore:e,noResultsContent:t,renderSuggestions:r}=this.props;if(e.isMenuOpen){if(e.query.length>=e.minInputLength&&e.loadingState===S["a"].LOADING){return v.a.createElement(h["a"],{block:true,size:"medium",className:E.a["loading-container"]})}if(e.query.length>=e.minInputLength&&e.loadingState===S["a"].LOADED&&e.suggestions.length===0&&t!==null){const e=()=>{const{gettext:e}=Object(s["j"])();return v.a.createElement(v.a.Fragment,null,t!==null&&t!==void 0?t:e("No results"))};return v.a.createElement("div",{className:f()("ud-heading-sm",E.a["no-results"])},v.a.createElement(e,null))}if(e.suggestions.length>0){return r(e.suggestions,this.renderSuggestion)}}return null}getIconSize(e){if(e==="xsmall")return"small";if(e==="small")return"medium";return"large"}render(){const{className:e,autosuggestStore:t,renderSuggestions:r,onClearInput:n,onSuggestionSelected:i,showClearInputButton:o,icon:l,noResultsContent:u,onFocus:h,...m}=this.props;const g=!!l;const y=()=>{const{gettext:e}=Object(s["j"])();return v.a.createElement(c.a,{color:"neutral",label:e("Clear input")})};return v.a.createElement(a["b"],{onRootClose:this.onRootClose},v.a.createElement("div",{className:f()(e,E.a["autosuggest-container"],{[E.a["with-clear-button"]]:o,[E.a["with-custom-icon"]]:g}),onKeyDown:this.onKeyDown,ref:this.ref},l,v.a.createElement(d["b"],Object.assign({value:t.inputValue},m,{autoComplete:"off",onChange:this.onChange,onFocus:this.onFocus,className:E.a["autosuggest-input"]})),o&&v.a.createElement(p["a"],{onClick:n,udStyle:"ghost",size:this.getIconSize(m.size),className:E.a["clear-button"]},v.a.createElement(y,null)),v.a.createElement("div",{className:f()({"ud-sr-only":!this.menuContent},E.a.menu)},this.menuContent)))}},D.defaultProps={onChange:undefined,onClearInput:undefined,onSuggestionSelected:undefined,icon:undefined,noResultsContent:undefined,showClearInputButton:false,className:undefined,onFocus:undefined},D),i()(x.prototype,"menuContent",[g["g"]],Object.getOwnPropertyDescriptor(x.prototype,"menuContent"),x.prototype),x))||_},"./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED"}},"./node_modules/@udemy/react-brand-components/dist/esm/logos/logo-urls.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n={udemyLogoUrl:"/staticx/udemy/images/v7/logo-udemy.svg",udemyLogoInvertedUrl:"/staticx/udemy/images/v7/logo-udemy-inverted.svg",ubLogoUrl:"/staticx/udemy/images/v7/logo-ub.svg",ubLogoInvertedUrl:"/staticx/udemy/images/v7/logo-ub-inverted.svg",ugLogoUrl:"/staticx/udemy/images/v7/logo-ug.svg",ugLogoInvertedUrl:"/staticx/udemy/images/v7/logo-ug-inverted.svg",udemyProLogoUrl:"/staticx/udemy/images/v7/logo-upro.svg",udemyBenesseLogoUrl:"/staticx/udemy/images/v7/logo-udemy-benesse.svg",udemyBenesseLogoInvertedUrl:"/staticx/udemy/images/v7/logo-udemy-benesse-inverted.svg"}},"./node_modules/@udemy/react-brand-components/dist/esm/logos/ufb-logo.module.css":function(e,t,r){e.exports={"brand-title":"ufb-logo-module--brand-title--2s-Wa",logo:"ufb-logo-module--logo--1jaPq"}},"./node_modules/@udemy/react-brand-components/dist/esm/logos/ufb-logo.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var i=r("./node_modules/@udemy/ud-data/dist/esm/index.js");var o=r("./node_modules/classnames/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./node_modules/@udemy/react-brand-components/dist/esm/logos/ufb-logo.module.css");var u=r.n(c);const p=()=>{const{Config:e}=Object(i["h"])();if(typeof e.brand.organization!=="boolean"&&!e.brand.organization.has_logo){return l.a.createElement("div",{className:a()("ud-heading-md",u.a["brand-title"])},e.brand.title)}return l.a.createElement(n["a"],{src:e.brand.logo_url_2x,alt:e.brand.title,width:"unset",height:"unset","data-purpose":"ufb-logo",className:u.a.logo})}},"./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state-radio-group.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("./node_modules/react/index.js");var i=r.n(n);var o=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state.react-component.js");const a=Object(n["createContext"])(null);const s=e=>{let{allowToggle:t=false,name:r,children:o}=e;const[s,l]=Object(n["useState"])(null);const c={allowToggle:t,selectedId:s,setSelectedId:l,name:r};return i.a.createElement(a.Provider,{value:c},o)};const l=e=>{let{checked:t=null,defaultChecked:r=false,checkedStateComponent:s=o["a"],...l}=e;const c=Object(n["useRef"])(true);const u=Object(n["useContext"])(a);Object(n["useEffect"])((()=>{if(r){u===null||u===void 0?void 0:u.setSelectedId(l.id)}}),[]);const p=e=>{var t;const r=!!((t=e.target)!==null&&t!==void 0&&t.dataset.checked);const n=!(u!==null&&u!==void 0&&u.allowToggle)||!r;e.target.dataset.checked=n?"checked":"";u===null||u===void 0?void 0:u.setSelectedId(n?e.target.id:null);if(r!==n){var i;(i=l.onChange)===null||i===void 0?void 0:i.call(l,e)}};const d=c.current&&r;const h=(u===null||u===void 0?void 0:u.selectedId)===l.id;const m=t!==null?t:d||h;c.current=false;return i.a.createElement(s,Object.assign({},l,{"data-type":"radio","data-name":u===null||u===void 0?void 0:u.name,"data-checked":m?"checked":"",onChange:p}))};s.Radio=l},"./node_modules/@udemy/react-date-time-components/dist/esm/duration/duration.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));r.d(t,"b",(function(){return d}));var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/react/index.js");var o=r.n(i);const a=60;const s=60;const l={HUMAN:"human",HUMAN_COMPACT:"humanCompact",TIMESTAMP:"timestamp"};const c={HOURS:"hours",MINUTES:"minutes",SECONDS:"seconds"};const u={[l.HUMAN]:m,[l.HUMAN_COMPACT]:h,[l.TIMESTAMP]:f};const p=e=>{let{numSeconds:t,presentationStyle:r=l.HUMAN,precision:i=c.MINUTES,...a}=e;const{gettext:s,interpolate:u}=Object(n["j"])();return o.a.createElement("span",a,d({numSeconds:t,presentationStyle:r,precision:i},{gettext:s,interpolate:u}))};p.displayName="Duration";p.STYLE=l;p.PRECISION=c;function d(e,t){let{numSeconds:r,presentationStyle:n=l.HUMAN,precision:i=c.MINUTES}=e;const o=Math.floor(r);return u[n](o,{numSeconds:r,presentationStyle:n,precision:i},t)}function h(e,t,r){let{precision:n}=t;let{gettext:i,interpolate:o}=r;const l=e%a;const u=Math.floor(e/a)%s;const p=Math.floor(e/(a*s));const d={hms:i("%(hours)sh %(minutes)sm %(seconds)ss"),hm:i("%(hours)sh %(minutes)sm"),m:i("%(minutes)sm"),ms:i("%(minutes)sm %(seconds)ss"),s:i("%(seconds)ss")};const h=[];const m={hours:p,minutes:u,seconds:l};if(p){h.push("h")}if(u||p||!u&&n===c.MINUTES){h.push("m")}if(n===c.SECONDS){h.push("s")}const f=d[h.join("")];return o(f.replace(/ /g," "),m,true)}function m(e,t,r){let{numSeconds:n,precision:i}=t;let{gettext:o,interpolate:a}=r;const s=o("%(hours)shr");const l=o("%(minutes)smin");const u=o("%(hours)shr %(minutes)smin");let p=Math.round(e/60);let d=Math.floor(p/60);if(!d){if(!p&&n){p=1}return a(l,{minutes:p},true)}if(i===c.HOURS){d=Math.round(p/30)/2;return a(s,{hours:d},true)}p=p%60;if(!p){return a(s,{hours:d},true)}return a(u,{hours:d,minutes:p},true)}function f(e){const t=e%a;const r=Math.floor(e/a)%s;const n=Math.floor(e/(a*s));const i=e=>e<10?`0${e}`:`${e}`;if(n===0){return`${r}:${i(t)}`}return`${n}:${i(r)}:${i(t)}`}},"./node_modules/@udemy/react-date-time-components/dist/esm/relative-duration/relative-duration.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/ud-data/dist/esm/index.js");var o=r("./node_modules/react/index.js");var a=r.n(o);const s=60;const l=60*60;const c=60*60*24;const u=60*60*24*30;const p=12;const d={seconds:e=>{let{gettext:t}=e;return t("A few seconds ago")},minutes:(e,t)=>{let{ninterpolate:r}=t;return r("%s minute ago","%s minutes ago",e)},hours:(e,t)=>{let{ninterpolate:r}=t;return r("%s hour ago","%s hours ago",e)},days:(e,t)=>{let{ninterpolate:r}=t;return r("%s day ago","%s days ago",e)},months:(e,t)=>{let{ninterpolate:r}=t;return r("%s month ago","%s months ago",e)},years:(e,t)=>{let{ninterpolate:r}=t;return r("%s year ago","%s years ago",e)}};const h={seconds:e=>{let{gettext:t}=e;return t("In a few seconds")},minutes:(e,t)=>{let{ninterpolate:r}=t;return r("In %s minute","In %s minutes",e)},hours:(e,t)=>{let{ninterpolate:r}=t;return r("In %s hour","In %s hours",e)},days:(e,t)=>{let{ninterpolate:r}=t;return r("In %s day","In %s days",e)},months:(e,t)=>{let{ninterpolate:r}=t;return r("In %s month","In %s months",e)},years:(e,t)=>{let{ninterpolate:r}=t;return r("In %s year","In %s years",e)}};const m=e=>{let{datetime:t,source:r="server"}=e;const{gettext:o,ninterpolate:s}=Object(n["j"])(),{request:l}=Object(i["h"])(),c={clientTimestamp:l.clientTimestamp,serverTimestamp:l.serverTimestamp};return a.a.createElement(a.a.Fragment,null,f({datetime:t,source:r},{gettext:o,ninterpolate:s},c))};function f(e,t,r){let{datetime:n,source:i}=e;const o=r.clientTimestamp?Date.parse(r.clientTimestamp)-Date.parse(r.serverTimestamp):0;const a=Date.now()-o;let s=typeof n==="string"?Date.parse(n):n.getTime();if(i==="client"){s=s-o}const l=s-a;const c=Math.floor(l/1e3);if(c<=0){return g(-c,d,t)}return g(c,h,t)}function g(e,t,r){if(e<s){return t.seconds(r)}if(e<l){return t.minutes(Math.floor(e/s),r)}if(e<c){return t.hours(Math.floor(e/l),r)}if(e<u){return t.days(Math.floor(e/c),r)}const n=Math.floor(e/u);if(n<p){return t.months(n,r)}return t.years(Math.floor(n/p),r)}},"./node_modules/@udemy/react-dialog-components/dist/esm/bottom-drawer/bottom-drawer.module.css":function(e,t,r){e.exports={"bottom-drawer-container":"bottom-drawer-module--bottom-drawer-container--2ue7_","close-btn":"bottom-drawer-module--close-btn--6rabn",content:"bottom-drawer-module--content--eXB-l","bottom-drawer-checkbox":"bottom-drawer-module--bottom-drawer-checkbox--38Yw8","bottom-drawer-title":"bottom-drawer-module--bottom-drawer-title--fiSwZ"}},"./node_modules/@udemy/react-dialog-components/dist/esm/bottom-drawer/bottom-drawer.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/i18n/dist/esm/index.js");var o=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state.react-component.js");var a=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state-checkbox.react-component.js");var s=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var l=r("./node_modules/classnames/index.js");var c=r.n(l);var u=r("./node_modules/react/index.js");var p=r.n(u);var d=r("./node_modules/react-dom/index.js");var h=r.n(d);var m=r("./node_modules/@udemy/react-dialog-components/dist/esm/dialog-close-button/dialog-close-button.react-component.js");var f=r("./node_modules/@udemy/react-dialog-components/dist/esm/focus-trapping-dialog/focus-trapping-dialog.react-component.js");var g=r("./node_modules/@udemy/react-dialog-components/dist/esm/full-page-overlay/full-page-overlay.react-component.js");var y=r("./node_modules/@udemy/react-dialog-components/dist/esm/bottom-drawer/bottom-drawer.module.css");var b=r.n(y);class v extends p.a.Component{constructor(e){super(e);this.gettext=void 0;this.dialogRef=void 0;this.labelledById=void 0;this.onChangeChecked=void 0;this.scrollableContentDiv=p.a.createRef();this.onChange=e=>{if(this.scrollableContentDiv.current){var t;(t=this.dialogRef.current)===null||t===void 0?void 0:t.onToggle(Object(o["b"])(e),this.scrollableContentDiv.current)}const{onClose:r,onOpen:n}=this.props;this.onChangeChecked=!!e.target.dataset.checked;this.onChangeChecked?n===null||n===void 0?void 0:n():r===null||r===void 0?void 0:r()};this.gettext=e.gettext;this.dialogRef=p.a.createRef();this.labelledById=Object(n["a"])("bottom-drawer-title");this.onChangeChecked=false}componentDidUpdate(e){const t=this.scrollableContentDiv.current;if(this.props.isOpen!==e.isOpen&&this.props.isOpen!==this.onChangeChecked){if(t){var r;(r=this.dialogRef.current)===null||r===void 0?void 0:r.onToggle(!!this.props.isOpen,t)}}}render(){const{id:e,children:t,className:r,isOpen:n,showTitle:i,title:o}=this.props;if(typeof document==="undefined"){return null}const s=p.a.createElement("div",{className:r},p.a.createElement(a["a"],{id:e,checked:n,className:c()("ud-full-page-overlay-checkbox",b.a["bottom-drawer-checkbox"]),closeOnEscape:true,onChange:this.onChange}),p.a.createElement(g["b"],{cssToggleId:e}),p.a.createElement(f["a"],{ref:this.dialogRef,labelledById:this.labelledById,className:b.a["bottom-drawer-container"]},p.a.createElement("div",{ref:this.scrollableContentDiv,"data-purpose":"content",className:c()("ud-bottom-drawer-content",b.a.content)},p.a.createElement(f["a"].Title,{id:this.labelledById,className:b.a["bottom-drawer-title"],show:!!i},o),t),p.a.createElement(m["a"],{id:e,label:this.gettext("Close bottom drawer"),className:b.a["close-btn"]})));return h.a.createPortal(s,document.body)}}v.displayName="BottomDrawer";v.propTypes={};v.defaultProps={showTitle:true,isOpen:false,onClose:s["a"],onOpen:s["a"]};const w=Object(i["k"])(v)},"./node_modules/@udemy/react-dialog-components/dist/esm/confirm-modal/confirm-modal.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var o=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");const c=e=>{let{children:t,onCancel:r,onConfirm:a,...c}=e;const{gettext:u}=Object(n["j"])();const{confirmText:p=u("OK"),cancelText:d=u("Cancel"),title:h=u("Please confirm"),...m}=c;return s.a.createElement(l["a"],Object.assign({title:h,onClose:r},m),t,s.a.createElement(o["a"],null,s.a.createElement(i["a"],{"data-purpose":"cancel-confirm-modal",udStyle:"ghost",onClick:r},d),s.a.createElement(i["a"],{"data-purpose":"submit-confirm-modal",onClick:a},p)))};c.displayName="ConfirmModal"},"./node_modules/@udemy/react-dialog-components/dist/esm/dialog-close-button/dialog-close-button.module.css":function(e,t,r){e.exports={"close-btn":"dialog-close-button-module--close-btn--3yacv"}},"./node_modules/@udemy/react-dialog-components/dist/esm/dialog-close-button/dialog-close-button.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/@udemy/icons/dist/close.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var a=r("./node_modules/classnames/index.js");var s=r.n(a);var l=r("./node_modules/react/index.js");var c=r.n(l);var u=r("./node_modules/@udemy/react-dialog-components/dist/esm/dialog-close-button/dialog-close-button.module.css");var p=r.n(u);const d=e=>{let{className:t,id:r,label:n}=e;return c.a.createElement(o["a"],{className:s()(p.a["close-btn"],t),"data-purpose":"close-btn",cssToggleId:r,round:true,udStyle:"white-solid","aria-label":n},c.a.createElement(i.a,{color:"neutral",label:false}))}},"./node_modules/@udemy/react-dialog-components/dist/esm/modal-trigger/modal-trigger.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("./node_modules/mobx-react/dist/mobx-react.module.js");var i=r("./node_modules/react/index.js");var o=r.n(i);const a=Object.assign(Object(n["f"])((e=>{let{trigger:t,renderModal:r,...n}=e;const[a,s]=Object(i["useState"])(false);const l=e=>{var r,n;s(true);(r=(n=t.props).onClick)===null||r===void 0?void 0:r.call(n,e)};const c=()=>{var e;s(false);(e=n.onClose)===null||e===void 0?void 0:e.call(n)};return o.a.createElement(o.a.Fragment,null,o.a.cloneElement(t,{onClick:l}),r({isOpen:a,onClose:c}))})),{displayName:"ModalTrigger"})},"./node_modules/@udemy/react-form-components/dist/esm/date-picker/date-picker-calendar.module.css":function(e,t,r){e.exports={"calendar-month":"date-picker-calendar-module--calendar-month--2ZqhT","month-select-group":"date-picker-calendar-module--month-select-group--20O9l","month-select":"date-picker-calendar-module--month-select--3QLTz","calendar-days":"date-picker-calendar-module--calendar-days--1uuSx","days-container":"date-picker-calendar-module--days-container--3S6ns",day:"date-picker-calendar-module--day--2fZ52","day-of-week":"date-picker-calendar-module--day-of-week--3wosH","day-of-month":"date-picker-calendar-module--day-of-month--zm35u",today:"date-picker-calendar-module--today--39_Ah","inactive-day":"date-picker-calendar-module--inactive-day--1zvCz"}},"./node_modules/@udemy/react-form-components/dist/esm/date-picker/date-picker.module.css":function(e,t,r){e.exports={"date-picker":"date-picker-module--date-picker--t10MJ",icon:"date-picker-module--icon--1qm6A","drawer-content":"date-picker-module--drawer-content--2yf_v","popover-footer":"date-picker-module--popover-footer--3TAuN"}},"./node_modules/@udemy/react-form-components/dist/esm/date-picker/date-picker.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var c=r("./node_modules/@udemy/hooks/dist/esm/use-match-media/index.js");var u=r("./node_modules/@udemy/i18n/dist/esm/index.js");var p=r("./node_modules/@udemy/icons/dist/calendar-30.ud-icon");var d=r.n(p);var h=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var m=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/basic-popover.react-component.js");var f=r("./node_modules/classnames/index.js");var g=r.n(f);var y=r("./node_modules/mobx/lib/mobx.module.js");var b=r("./node_modules/mobx-react/dist/mobx-react.module.js");var v=r("./node_modules/react/index.js");var w=r.n(v);var E=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/check-form-group.js");var S=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var _=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var x=r("./node_modules/@udemy/icons/dist/next.ud-icon");var D=r.n(x);var C=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var T=r.n(C);var O=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var k=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var P=r("./node_modules/@udemy/react-form-components/dist/esm/select/select.react-component.js");var A=r("./node_modules/@udemy/react-form-components/dist/esm/date-picker/date-picker-calendar.module.css");var I=r.n(A);function j(e,t){if(e===t){return true}if(e&&!t||t&&!e){return false}return(e===null||e===void 0?void 0:e.getFullYear())===(t===null||t===void 0?void 0:t.getFullYear())&&(e===null||e===void 0?void 0:e.getMonth())===(t===null||t===void 0?void 0:t.getMonth())&&(e===null||e===void 0?void 0:e.getDate())===(t===null||t===void 0?void 0:t.getDate())}function R(e,t){const r=t==="MONTH"?1:e.getDate();return new Date(e.getFullYear(),e.getMonth(),r)}var N,L,M,q;let U=Object(b["f"])(N=(L=(q=class e extends w.a.Component{constructor(e){super(e);this.gettext=void 0;this.pgettext=void 0;this.daysOfMonthRef=void 0;this.monthSelectorId=void 0;this.monthSelectorStatusId=void 0;this.shouldFocusOnSelectedDay=false;i()(this,"selectedMonthStatus",M,this);this.onChangeMonth=e=>{this.clearSelectedMonthStatus();this.props.onSelectMonth(new Date(parseInt(e.target.value,10)))};this.onClickMonthPager=e=>{const t=new Date(parseInt(e.currentTarget.dataset.timestamp,10));this.announceSelectedMonthStatus(t);this.props.onSelectMonth(t)};this.onClickDate=e=>{this.clearSelectedMonthStatus();this.props.onSelectDate(new Date(parseInt(e.currentTarget.dataset.timestamp,10)))};this.onKeyDown=e=>{const t=e.target.dataset.timestamp;if(t){const r=new Date(parseInt(t,10));if(e.keyCode===_["b"].UP){this.selectDayWithKeyboard(e,r,-7)}else if(e.keyCode===_["b"].DOWN){this.selectDayWithKeyboard(e,r,7)}else if(e.keyCode===_["b"].LEFT){this.selectDayWithKeyboard(e,r,-1)}else if(e.keyCode===_["b"].RIGHT){this.selectDayWithKeyboard(e,r,1)}}};this.selectDayWithKeyboard=(e,t,r)=>{e.preventDefault();t.setDate(t.getDate()+r);if(this.props.isValidDate(t,"DAY")){this.props.onSelectDate(t);this.shouldFocusOnSelectedDay=true}};this.gettext=e.gettext;this.pgettext=e.pgettext;this.daysOfMonthRef=w.a.createRef();this.monthSelectorId=Object(l["a"])("date-picker-calendar-month-selector");this.monthSelectorStatusId=Object(l["a"])("date-picker-calendar-month-selector-status")}componentDidUpdate(){if(this.shouldFocusOnSelectedDay){var e;const t=(e=this.daysOfMonthRef.current)===null||e===void 0?void 0:e.querySelector('[data-selected="true"]');t===null||t===void 0?void 0:t.focus();this.shouldFocusOnSelectedDay=false}}announceSelectedMonthStatus(e){this.selectedMonthStatus=e.toLocaleDateString(this.props.calendarLocale,{year:"numeric",month:"long"})}clearSelectedMonthStatus(){this.selectedMonthStatus=""}get monthSelector(){const e=this.props.selectedMonth.getFullYear();const t=this.props.selectedMonth.getMonth();const r=[];[-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10,11,12].forEach((n=>{const i=new Date(e,t+n,1);if(this.props.isValidDate(i,"MONTH")){r.push(w.a.createElement("option",{key:i.getTime(),value:i.getTime()},i.toLocaleDateString(this.props.calendarLocale,{year:"numeric",month:"long"})))}}));return w.a.createElement(k["b"],{label:this.gettext("Select month"),labelProps:{className:"ud-sr-only"},formControlId:this.monthSelectorId,className:I.a["month-select-group"]},w.a.createElement(P["a"],{size:"medium",className:I.a["month-select"],value:R(this.props.selectedMonth,"MONTH").getTime(),onChange:this.onChangeMonth},r),w.a.createElement("div",{id:this.monthSelectorStatusId,className:"ud-sr-only","data-purpose":"month-selector-status",role:"status"},this.selectedMonthStatus))}get monthPager(){const e=this.props.selectedMonth.getFullYear();const t=this.props.selectedMonth.getMonth();const r=new Date(e,t-1,1);const n=new Date(e,t+1,1);const i=[this.monthSelectorId,this.monthSelectorStatusId].join(" ");return w.a.createElement(w.a.Fragment,null,w.a.createElement(O["a"],{size:"medium",udStyle:"ghost","data-timestamp":r.getTime(),disabled:!this.props.isValidDate(r,"MONTH"),onClick:this.onClickMonthPager,"aria-controls":i},w.a.createElement(T.a,{label:this.gettext("Previous month")})),w.a.createElement(O["a"],{size:"medium",udStyle:"ghost","data-timestamp":n.getTime(),disabled:!this.props.isValidDate(n,"MONTH"),onClick:this.onClickMonthPager,"aria-controls":i},w.a.createElement(D.a,{label:this.gettext("Next month")})))}get daysOfWeek(){const e=[this.pgettext("Abbreviation for Sunday, two letters max","Su"),this.pgettext("Abbreviation for Monday, two letters max","Mo"),this.pgettext("Abbreviation for Tuesday, two letters max","Tu"),this.pgettext("Abbreviation for Wednesday, two letters max","We"),this.pgettext("Abbreviation for Thursday, two letters max","Th"),this.pgettext("Abbreviation for Friday, two letters max","Fr"),this.pgettext("Abbreviation for Saturday, two letters max","Sa")];return w.a.createElement("div",{className:I.a["days-container"],"aria-hidden":"true"},e.map(((e,t)=>w.a.createElement("div",{key:t,className:g()("ud-heading-xs",I.a.day,I.a["day-of-week"])},e))))}get daysOfMonth(){const e=this.props.selectedMonth.getMonth();const t=[];let r=this.props.selectedMonth;while(r.getMonth()===e||t[0].getDay()>0){t.unshift(r);r=new Date(r.getTime());r.setDate(r.getDate()-1)}r=new Date(this.props.selectedMonth.getTime());r.setDate(r.getDate()+1);while(t.length<42){t.push(r);r=new Date(r.getTime());r.setDate(r.getDate()+1)}return w.a.createElement("div",{ref:this.daysOfMonthRef,className:I.a["days-container"],onKeyDown:this.onKeyDown,"data-purpose":"days-of-month"},t.map((t=>w.a.createElement(h["a"],{key:t.getTime(),size:"medium",udStyle:"link",typography:"ud-text-sm",className:g()(I.a.day,I.a["day-of-month"],{today:j(t,this.props.today),[I.a["inactive-day"]]:t.getMonth()!==e}),"data-selected":j(t,this.props.selectedDate)?"true":null,"data-timestamp":t.getTime(),disabled:!this.props.isValidDate(t,"DAY"),onClick:this.onClickDate,"aria-label":t.toLocaleDateString(this.props.calendarLocale,{weekday:"long",month:"long",day:"numeric",year:"numeric"}),"aria-pressed":j(t,this.props.selectedDate)},t.getDate()))))}render(){return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:I.a["calendar-month"]},this.monthSelector,this.monthPager),w.a.createElement("div",{className:I.a["calendar-days"]},this.daysOfWeek,this.daysOfMonth))}},q.displayName="DatePickerCalendar",q.defaultProps={selectedDate:null,minDate:null,maxDate:null},q),M=a()(L.prototype,"selectedMonthStatus",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),a()(L.prototype,"announceSelectedMonthStatus",[y["e"]],Object.getOwnPropertyDescriptor(L.prototype,"announceSelectedMonthStatus"),L.prototype),a()(L.prototype,"clearSelectedMonthStatus",[y["e"]],Object.getOwnPropertyDescriptor(L.prototype,"clearSelectedMonthStatus"),L.prototype),L))||N;const H=Object(u["k"])(U);var F=r("./node_modules/@udemy/react-form-components/dist/esm/date-picker/date-picker.module.css");var B=r.n(F);r.d(t,"a",(function(){return ue}));var z,V,W,G,K,$,X,Y,Q,J,Z,ee,te,re,ne,ie,oe,ae,se;let le=(z=Object(b["e"])((e=>{let{$$udFormGroup:t,$$udCompactFormGroup:r}=e;return{$$udFormGroup:t,$$udCompactFormGroup:r}})),V=y["t"].ref,W=y["t"].ref,z(G=Object(b["f"])(G=(K=(se=class e extends w.a.Component{constructor(e){var t;super(e);this.gettext=void 0;this.pgettext=void 0;this.locale=void 0;this.today=void 0;this.ariaDialogId=void 0;this.dialogStatusId=void 0;i()(this,"_inputValue",$,this);i()(this,"_selectedDate",X,this);i()(this,"_selectedMonth",Y,this);i()(this,"isCalendarOpen",Q,this);i()(this,"dialogStatus",J,this);i()(this,"isValidDate",Z,this);i()(this,"onSelectDate",ee,this);i()(this,"onSelectMonth",te,this);i()(this,"onChangeInputValue",re,this);i()(this,"onOpenCalendar",ne,this);i()(this,"onToggleCalendar",ie,this);i()(this,"onClearCalendar",oe,this);i()(this,"onCloseCalendar",ae,this);this.gettext=e.gettext;this.pgettext=e.pgettext;this.locale=e.locale.replace("_","-")||"en-US";this.today=new Date;const r=(t=this.props.value)!==null&&t!==void 0?t:this.props.defaultValue;this._selectedDate=this._selectedMonth=r;this.props.selectedMonth&&this.onSelectMonth(this.props.selectedMonth);this.isValidDate(this._selectedDate,"DAY",true);this.ariaDialogId=Object(l["a"])("date-picker-dialog");this.dialogStatusId=Object(l["a"])("date-picker-dialog-status")}componentDidUpdate(e){if(e.selectedMonth!==this.props.selectedMonth){this.onSelectMonth(this.props.selectedMonth)}if(e.value!==this.props.value&&this.props.value===null&&this._inputValue===""){this.onClearCalendar()}}get inputValue(){if(this._inputValue){return this._inputValue}if(this.selectedDate){return this.selectedDate.toLocaleDateString(this.locale)}return""}get minDate(){const e=this.props.min==="TODAY"?this.today:this.props.min;return e?R(e,"DAY"):null}get minMonth(){return this.minDate?R(this.minDate,"MONTH"):null}get maxDate(){return this.props.max?R(this.props.max,"DAY"):null}get maxMonth(){return this.maxDate?R(this.maxDate,"MONTH"):null}get selectedDate(){var e;return(e=this.props.value)!==null&&e!==void 0?e:this._selectedDate}get selectedMonth(){var e,t,r,n;return(e=(t=(r=(n=this._selectedMonth)!==null&&n!==void 0?n:this.selectedDate)!==null&&r!==void 0?r:this.isValidDate(this.today,"DAY")?this.today:null)!==null&&t!==void 0?t:this.minDate&&this.today<this.minDate?this.minDate:null)!==null&&e!==void 0?e:this.maxDate}clearDialogStatus(){this.dialogStatus=""}render(){var e;const{defaultValue:t,min:r,max:n,onChangeSelectedMonth:i,onCloseCalendar:o,selectedMonth:a,popoverComponentClass:s,popoverPlacement:l,$$udFormGroup:c,$$udCompactFormGroup:p,isFinePointer:m,...f}=Object(u["d"])(this.props);Object(E["a"])("DatePicker",this.props,null,true);const y=w.a.createElement("div",{className:g()("ud-date-picker-icon",B.a.icon)},w.a.createElement(d.a,{label:this.gettext("Date input")}));if(!m){return w.a.createElement("div",{className:B.a["date-picker"]},w.a.createElement(S["b"],Object.assign({},f,{autoComplete:"one-time-code",type:"date",value:this.selectedDate?Object(u["g"])(this.selectedDate):"",min:this.minDate?Object(u["g"])(this.minDate):undefined,max:this.maxDate?Object(u["g"])(this.maxDate):undefined,onChange:this.onChangeInputValue})),y)}return w.a.createElement(w.a.Fragment,null,s&&w.a.createElement(s,{a11yRole:"none",placement:l,isOpen:this.isCalendarOpen,onToggle:this.onToggleCalendar,trigger:w.a.createElement(pe,Object.assign({role:"combobox","aria-controls":this.ariaDialogId,"aria-expanded":this.isCalendarOpen,placeholder:this.pgettext("Date format placeholder, e.g. 01/02/2020 for January 2 2020","MM/DD/YYYY")},f,{autoComplete:"one-time-code",id:c===null||c===void 0?void 0:c.id,value:this.inputValue,onChange:this.onChangeInputValue,icon:y,onOpenCalendar:this.onOpenCalendar})),withArrow:false,withPadding:false},w.a.createElement("div",{id:this.ariaDialogId,role:"dialog","aria-label":this.gettext("Date Picker")},w.a.createElement(H,{selectedMonth:(e=this.selectedMonth)!==null&&e!==void 0?e:new Date,onSelectMonth:this.onSelectMonth,selectedDate:this.selectedDate,onSelectDate:this.onSelectDate,isValidDate:this.isValidDate,minDate:this.minDate,maxDate:this.maxDate,today:this.today,calendarLocale:this.locale}),w.a.createElement("div",{className:B.a["popover-footer"]},w.a.createElement(h["a"],{udStyle:"ghost",size:"small",onClick:this.onClearCalendar,"aria-controls":this.dialogStatusId},this.gettext("Clear")),w.a.createElement(h["a"],{udStyle:"ghost",size:"small",onClick:this.onCloseCalendar},this.selectedDate?this.gettext("Done"):this.gettext("Close")),w.a.createElement("div",{id:this.dialogStatusId,className:"ud-sr-only","data-purpose":"dialog-status",role:"status"},this.dialogStatus)))))}},se.displayName="DatePicker",se.defaultProps={value:null,min:"TODAY",popoverComponentClass:m["a"],popoverPlacement:"bottom-start"},se),$=a()(K.prototype,"_inputValue",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),X=a()(K.prototype,"_selectedDate",[V],{configurable:true,enumerable:true,writable:true,initializer:null}),Y=a()(K.prototype,"_selectedMonth",[W],{configurable:true,enumerable:true,writable:true,initializer:null}),Q=a()(K.prototype,"isCalendarOpen",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),J=a()(K.prototype,"dialogStatus",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),a()(K.prototype,"inputValue",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"inputValue"),K.prototype),a()(K.prototype,"minDate",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"minDate"),K.prototype),a()(K.prototype,"minMonth",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"minMonth"),K.prototype),a()(K.prototype,"maxDate",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"maxDate"),K.prototype),a()(K.prototype,"maxMonth",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"maxMonth"),K.prototype),a()(K.prototype,"selectedDate",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"selectedDate"),K.prototype),a()(K.prototype,"selectedMonth",[y["g"]],Object.getOwnPropertyDescriptor(K.prototype,"selectedMonth"),K.prototype),Z=a()(K.prototype,"isValidDate",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){var e=this;return function(t,r){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!t){return true}if(isNaN(t.getTime())){if(n){var i;(i=e.props.$$udFormGroup)===null||i===void 0?void 0:i.setPropOverrides({validationState:"error",note:e.gettext("Invalid date")})}return false}const o=r==="MONTH"?e.minMonth:e.minDate;if(e.minDate&&o&&t<o){if(n){var a;(a=e.props.$$udFormGroup)===null||a===void 0?void 0:a.setPropOverrides({validationState:"error",note:e.props.interpolate(e.gettext("The earliest date you can select is %(date)s"),{date:e.minDate.toLocaleDateString(e.locale)},true)})}return false}const s=r==="MONTH"?e.maxMonth:e.maxDate;if(e.maxDate&&s&&R(t,r)>s){if(n){var l;(l=e.props.$$udFormGroup)===null||l===void 0?void 0:l.setPropOverrides({validationState:"error",note:e.props.interpolate(e.gettext("The latest date you can select is %(date)s"),{date:e.maxDate.toLocaleDateString(e.locale)},true)})}return false}return true}}}),ee=a()(K.prototype,"onSelectDate",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{const{onChange:t,$$udFormGroup:r,$$udCompactFormGroup:n}=this.props;r===null||r===void 0?void 0:r.setPropOverrides({});const i=this.selectedDate;this._selectedDate=this.isValidDate(e,"DAY",true)?e:null;this._selectedMonth=this._selectedDate;this._inputValue=this._selectedDate?"":this._inputValue;if(!j(i,this._selectedDate)){t===null||t===void 0?void 0:t(this._selectedDate);n===null||n===void 0?void 0:n.setHasValue(!!this._selectedDate)}if(e!==null){this.clearDialogStatus()}else{this.dialogStatus=this.gettext("The selected date has been cleared.")}}}}),te=a()(K.prototype,"onSelectMonth",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{if(this.isValidDate(e,"MONTH")){this._selectedMonth=e;this.props.onChangeSelectedMonth&&!j(this._selectedMonth,this.props.selectedMonth)&&this.props.onChangeSelectedMonth(this._selectedMonth)}}}}),re=a()(K.prototype,"onChangeInputValue",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{this.isCalendarOpen=true;this._inputValue=e.target.value;const t=e.target.type==="date"?"ISO":this.locale;if(!this._inputValue){this.onSelectDate(null)}let r;try{r=Object(u["e"])(this._inputValue,t)}catch{r=new Date("INVALID_DATE")}this.onSelectDate(r)}}}),ne=a()(K.prototype,"onOpenCalendar",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return()=>{this.isCalendarOpen=true;this.clearDialogStatus()}}}),ie=a()(K.prototype,"onToggleCalendar",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{this.isCalendarOpen=e;!e&&this.props.onCloseCalendar&&this.props.onCloseCalendar()}}}),oe=a()(K.prototype,"onClearCalendar",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return()=>{this._inputValue="";this.onSelectDate(null)}}}),ae=a()(K.prototype,"onCloseCalendar",[y["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return()=>{var e,t,r;if((e=this.props.$$udFormGroup)!==null&&e!==void 0&&e.id){var n,i;(n=document.getElementById((i=this.props.$$udFormGroup)===null||i===void 0?void 0:i.id))===null||n===void 0?void 0:n.focus()}this.isCalendarOpen=false;(t=(r=this.props).onCloseCalendar)===null||t===void 0?void 0:t.call(r)}}}),K))||G)||G);const ce="(pointer: fine), not (any-pointer: coarse)";const ue=Object(u["k"])(Object(c["b"])({isFinePointer:ce})(le));function pe(e){let{icon:t,onOpenCalendar:r,...n}=e;return w.a.createElement("div",{className:B.a["date-picker"]},w.a.createElement(S["b"],Object.assign({},n,{onClick:r,onFocus:r})),t)}},"./node_modules/@udemy/react-form-components/dist/esm/file-uploader/file-uploader.module.css":function(e,t,r){e.exports={"file-uploader-small":"file-uploader-module--file-uploader-small--3eTZ0","file-uploader-medium":"file-uploader-module--file-uploader-medium--cjCW9","file-uploader-large":"file-uploader-module--file-uploader-large--FNHTd","input-group":"file-uploader-module--input-group--3zr1g",btn:"file-uploader-module--btn--1qeQX","fake-input":"file-uploader-module--fake-input--1Uwbh","progress-bar-wrapper":"file-uploader-module--progress-bar-wrapper--2N1WI","progress-bar":"file-uploader-module--progress-bar--2u0NI","progress-label-wrapper":"file-uploader-module--progress-label-wrapper--1eiBp","progress-label":"file-uploader-module--progress-label--3oLr-","uploader-label":"file-uploader-module--uploader-label--3t4Ob","fake-input-text":"file-uploader-module--fake-input-text--2n1U1","delete-button":"file-uploader-module--delete-button--w7jDA"}},"./node_modules/@udemy/react-form-components/dist/esm/file-uploader/file-uploader.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/icons/dist/delete.ud-icon");var o=r.n(i);var a=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var s=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var l=r("./node_modules/classnames/index.js");var c=r.n(l);var u=r("./node_modules/react/index.js");var p=r.n(u);var d=r("./node_modules/@udemy/react-messaging-components/dist/esm/progress/progress.module.css");var h=r.n(d);const m=e=>{let{label:t,max:r=100,value:i=0,srOnlyLabel:o=true,className:a}=e;const{interpolate:s,gettext:l}=Object(n["j"])();return p.a.createElement("label",null,p.a.createElement("span",{className:o?"ud-sr-only":""},t),p.a.createElement("progress",{className:c()(h.a["ud-progress"],a),value:i,max:r},s(l("%(value)s%"),{value:i},true)))};var f=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var g=r("./node_modules/mobx-react/dist/mobx-react.module.js");var y=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/check-form-group.js");var b=r("./node_modules/@udemy/react-form-components/dist/esm/file-uploader/file-uploader.module.css");var v=r.n(b);r.d(t,"a",(function(){return w}));const w=Object(g["e"])((e=>{let{$$udFormGroup:t}=e;return{$$udFormGroup:t}}))(Object(g["f"])(Object.assign((e=>{let{allowedExtensionsDotted:t=[],onChangeSelectedFile:r=f["a"],onDeleteFile:i=undefined,disableDeleteFile:l=true,progressPercentage:d=null,purpose:h="",size:g="large",$$udFormGroup:b,...w}=e;const{gettext:E,interpolate:S}=Object(n["j"])();const _=p.a.useRef(null);const{noSelectedFileLabel:x=E("No file selected"),uploadCompletedLabel:D=E("Change"),uploadInProgressLabel:C=E("Cancel"),uploadLabel:T=E("Upload File"),...O}=w;const k=Object(u["useCallback"])((e=>{e.preventDefault();if(_!==null&&_!==void 0&&_.current){_.current.value="";i===null||i===void 0?void 0:i()}}),[i]);const P=e=>{const t=S(E("%(percent)s%"),{percent:e},true);return p.a.createElement("div",{className:v.a["input-group"]},p.a.createElement("div",{className:v.a["progress-bar-wrapper"]},p.a.createElement(m,{value:e,max:100,label:t,className:v.a["progress-bar"]}),p.a.createElement("span",{"aria-hidden":true,className:v.a["progress-label-wrapper"],style:{transform:`translateX(${e/2}%)`}},p.a.createElement("span",{className:v.a["progress-label"]},t))),p.a.createElement(a["a"],{onClick:r,disabled:O.disabled,udStyle:"secondary",className:v.a.btn},e<100?C:D))};const A=()=>p.a.createElement("label",{htmlFor:O.id,className:c()(v.a["input-group"],v.a["uploader-label"])},p.a.createElement("span",{className:v.a["fake-input"]},p.a.createElement("span",{className:v.a["fake-input-text"]},x)),p.a.createElement(a["a"],{componentClass:"span",udStyle:"secondary",className:v.a.btn},T),i&&p.a.createElement(s["a"],{udStyle:"ghost",size:"medium",disabled:l,onClick:k,"data-purpose":"delete-file-button",className:v.a["delete-button"]},p.a.createElement(o.a,{color:"neutral",size:"medium",label:E("Delete")})));Object(y["a"])("TextInput",{$$udFormGroup:b,id:O.id},null,true);const I=d!==null&&d!==undefined;O.accept=(t!==null&&t!==void 0?t:[]).join(",")||undefined;O.id=b?b.id:O.id;O.type="file";O.className=c()("ud-sr-only",O.className);return p.a.createElement("div",{className:v.a[`file-uploader-${g}`],"data-purpose":h},I&&P(d),!I&&p.a.createElement("input",Object.assign({ref:_},O)),!I&&A())}),{displayName:"FileUploader"})))},"./node_modules/@udemy/react-form-components/dist/esm/form-group-variants/toggle-input-block-form-group.module.css":function(e,t,r){e.exports={"ud-form-group-toggle-blocks":"toggle-input-block-form-group-module--ud-form-group-toggle-blocks--2bW5F"}},"./node_modules/@udemy/react-form-components/dist/esm/form-group-variants/toggle-input-block-form-group.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var l=r("./node_modules/@udemy/react-form-components/dist/esm/form-group-variants/toggle-input-block-form-group.module.css");var c=r.n(l);class u extends a.a.Component{renderContent(e){var t;const r=Object(s["c"])(e.validationState);const{typography:n,...o}=e.labelProps;const l=e.validationState==="neutral";const c=e.note&&a.a.createElement("div",Object.assign({},e.noteProps,{className:i()((t=e.noteProps)===null||t===void 0?void 0:t.className,"ud-form-note",!r?"ud-text-md":"ud-text-xs")}),r,e.note);return a.a.createElement(a.a.Fragment,null,a.a.createElement("legend",Object.assign({},o,{className:i()(o.className,"ud-toggle-blocks-form-label",n!==null&&n!==void 0?n:"ud-heading-lg")}),e.label),l&&c,e.children,!l&&c)}render(){return a.a.createElement(s["a"],Object.assign({},this.props,{className:i()(this.props.className,c.a["ud-form-group-toggle-blocks"]),renderContent:this.renderContent,udStyle:"fieldset",usage:"ToggleInputBlockFormGroup"}))}}u.defaultProps={...s["d"]}},"./node_modules/@udemy/react-form-components/dist/esm/radio/radio-block.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("./node_modules/react/index.js");var i=r.n(n);var o=r("./node_modules/@udemy/react-form-components/dist/esm/toggle-input/toggle-input-block.react-component.js");var a=r("./node_modules/@udemy/react-form-components/dist/esm/radio/radio.react-component.js");class s extends i.a.Component{render(){const e=i.a.createElement(a["a"],{size:"large"});return i.a.createElement(o["a"],Object.assign({},this.props,{fakeInput:e,inputType:"radio"}))}}s.$$udType="RadioBlock"},"./node_modules/@udemy/react-form-components/dist/esm/radio/radio.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r.d(t,"b",(function(){return c}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./node_modules/@udemy/react-form-components/dist/esm/toggle-input/toggle-input.react-component.js");const l=e=>{let{size:t,className:r}=e;return a.a.createElement("span",{className:i()(r,"ud-fake-toggle-input ud-fake-toggle-radio",{"ud-fake-toggle-radio-small":t==="small","ud-fake-toggle-radio-large":t==="large"})})};const c=e=>{let{size:t="small",...r}=e;const n=a.a.createElement(l,{size:t});return a.a.createElement(s["a"],Object.assign({size:t},r,{fakeInput:n,inputType:"radio"}))};c.$$udType="Radio"},"./node_modules/@udemy/react-form-components/dist/esm/select/select.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/@udemy/icons/dist/collapse.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/icons/dist/expand.ud-icon");var a=r.n(o);var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/react/index.js");var p=r.n(u);var d=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/check-form-group.js");const h=Object(c["f"])(Object.assign((e=>{let{icon:t,placement:r="top",size:n="large",className:o,style:s={},...h}=e;const{$$udFormGroup:m}=Object(u["useContext"])(c["a"]);const f=m===null||m===void 0?void 0:m.inputAriaProps;const g=e=>p.a.createElement("div",{className:"ud-select-icon-container ud-select-icon-left"},p.a.cloneElement(e,{size:n==="large"?"small":"xsmall"}));Object(d["a"])("Select",{$$udFormGroup:m,...h},null,true);return p.a.createElement("div",{className:l()(o,"ud-select-container",`ud-select-container-${n}`),style:s},!!t&&g(t),p.a.createElement("select",Object.assign({required:true},f,h,{id:m?m.id:h.id,className:l()("ud-select",n==="large"?"ud-text-md":"ud-text-sm",t?"ud-select-with-icon":"",m.props.formControlClassName)})),p.a.createElement("div",{className:"ud-select-icon-container ud-select-icon-right"},r==="top"?p.a.createElement(a.a,{label:false}):p.a.createElement(i.a,{label:false})))}),{displayName:"Select"},{$$udType:"Select"},{Placeholder:e=>{let{children:t}=e;return p.a.createElement("option",{key:"placeholder",value:"",disabled:true},t)}}))},"./node_modules/@udemy/react-form-components/dist/esm/switch/switch.module.css":function(e,t,r){e.exports={"ud-switch-container":"switch-module--ud-switch-container--1BDMN","ud-switch-disabled":"switch-module--ud-switch-disabled--3fcu-","ud-switch":"switch-module--ud-switch--2E_x5","ud-switch-small":"switch-module--ud-switch-small--14ZdB","ud-switch-large":"switch-module--ud-switch-large--3zhca","ud-real-toggle-input":"switch-module--ud-real-toggle-input--3fIYp"}},"./node_modules/@udemy/react-form-components/dist/esm/switch/switch.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/classnames/index.js");var o=r.n(i);var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/check-form-group.js");var u=r("./node_modules/@udemy/react-form-components/dist/esm/switch/switch.module.css");var p=r.n(u);const d=Object(a["f"])((e=>{var t;let{children:r,className:i,size:u="small",...d}=e;const[h]=Object(s["useState"])(Object(n["a"])("switch"));const m=(t=d.id)!==null&&t!==void 0?t:h;const{$$udFormGroup:f}=l.a.useContext(a["a"]);Object(c["a"])("ToggleInput",{$$udFormGroup:f,id:d.id},'FormGroup udStyle="fieldset"',false);return l.a.createElement("div",{className:i},l.a.createElement("label",{className:o()(p.a["ud-switch-container"],{[p.a["ud-switch-disabled"]]:d.disabled,"ud-text-sm":u==="small","ud-text-md":u==="large"}),htmlFor:m},l.a.createElement("input",Object.assign({},d,{className:o()("ud-sr-only",p.a["ud-real-toggle-input"]),id:m,type:"checkbox"})),r,l.a.createElement("span",{className:o()(p.a["ud-switch"],{[p.a["ud-switch-small"]]:u==="small",[p.a["ud-switch-large"]]:u==="large"})})))}))},"./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.module.css":function(e,t,r){e.exports={"ud-text-area-small":"text-area-module--ud-text-area-small--3Y924","ud-text-area-large":"text-area-module--ud-text-area-large--wWWNG"}},"./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/mobx-react/dist/mobx-react.module.js");var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/check-form-group.js");var c=r("./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.module.css");var u=r.n(c);const p=Object(o["f"])(s.a.forwardRef(((e,t)=>{let{size:r="large",className:n,...a}=e;const{$$udFormGroup:c}=s.a.useContext(o["a"]);const p=c===null||c===void 0?void 0:c.inputAriaProps;Object(l["a"])("TextArea",{$$udFormGroup:c,...a},null,true);return s.a.createElement("textarea",Object.assign({rows:"2",ref:t},p,a,{id:c?c.id:a.id,className:i()("ud-text-input",[u.a[`ud-text-area-${r}`]],{"ud-text-md":r==="large","ud-text-sm":r==="small"},n)}))})));p.displayName="TextArea"},"./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-container.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("./node_modules/react/index.js");var i=r.n(n);const o=e=>{let{children:t}=e;return i.a.createElement("div",{className:"ud-text-input-container"},t,i.a.createElement("div",{className:"ud-text-input-box"}))}},"./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-with-counter.module.css":function(e,t,r){e.exports={counter:"text-input-with-counter-module--counter--2Zx3-","counter-error":"text-input-with-counter-module--counter-error--3AIk5"}},"./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-with-counter.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/i18n/dist/esm/index.js");var o=r("./node_modules/classnames/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./node_modules/@udemy/react-form-components/dist/esm/with-counter/with-counter.js");var u=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-container.react-component.js");var p=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-with-counter.module.css");var d=r.n(p);var h=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");const m=Object.assign(Object(c["a"])((e=>{let{count:t,...r}=e;const{interpolate:o,ngettext:s}=Object(i["j"])();const c=Object(n["a"])("text-area-with-counter");return l.a.createElement(u["a"],null,l.a.createElement(h["b"],Object.assign({},r,{"aria-describedby":c})),l.a.createElement("span",null,l.a.createElement("span",{"aria-hidden":"true",className:a()(d.a.counter,{[d.a["counter-error"]]:(t!==null&&t!==void 0?t:0)<0})},t),l.a.createElement("span",{className:"ud-sr-only","aria-live":"polite",id:c},o(s("You have %(count)s character of %(maxLength)s remaining.","You have %(count)s characters of %(maxLength)s remaining.",t),{count:t,maxLength:r.maxLength},true))))})),{displayName:"TextInputWithCounter"})},"./node_modules/@udemy/react-form-components/dist/esm/time-picker/time-picker.module.css":function(e,t,r){e.exports={"time-picker":"time-picker-module--time-picker--1M6TR",icon:"time-picker-module--icon--1bg2N"}},"./node_modules/@udemy/react-form-components/dist/esm/time-picker/time-picker.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/@udemy/icons/dist/schedule.ud-icon");var i=r.n(n);var o=r("./node_modules/mobx-react/dist/mobx-react.module.js");var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-container.react-component.js");var c=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var u=r("./node_modules/@udemy/react-form-components/dist/esm/time-picker/time-picker.module.css");var p=r.n(u);const d=Object(o["f"])(Object.assign((e=>{let{errorLabel:t,...r}=e;const{$$udFormGroup:n}=s.a.useContext(o["a"]);const u=n.props.note;const[d,h]=Object(a["useState"])("neutral");const m=e=>{e.preventDefault();const t=e.currentTarget.checkValidity();h(t?"neutral":"error")};const f=n===null||n===void 0?void 0:n.inputAriaProps;Object(a["useEffect"])((()=>{n.setPropOverrides({validationState:d,note:d==="error"?t:u})}),[t,n,d,u]);return s.a.createElement(l["a"],null,s.a.createElement(c["b"],Object.assign({},f,{type:"time",className:p.a["time-picker"],onInput:m,size:"large"},r)),s.a.createElement(i.a,{size:"medium",label:false,className:p.a.icon}))}),{displayName:"TimePicker"}))},"./node_modules/@udemy/react-form-components/dist/esm/toggle-input/toggle-input-block.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/classnames/index.js");var o=r.n(i);var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/check-form-group.js");const u=Object(a["f"])((e=>{var t;let{children:r,className:i,fakeInput:u,inputType:p,xLabelContent:d,xBorderClassName:h,centerVertically:m=false,details:f,...g}=e;const{$$udFormGroup:y}=Object(s["useContext"])(a["a"]);const[b]=Object(s["useState"])(Object(n["a"])(p));const v=(t=g.id)!==null&&t!==void 0?t:b;Object(c["a"])("ToggleInputBlock",{$$udFormGroup:y,...g},"ToggleInputBlockFormGroup",false);return l.a.createElement("label",{className:o()(i,{"ud-toggle-input-container":true,"ud-toggle-input-block-container":true,"ud-toggle-input-disabled":g.disabled,"ud-toggle-input-block-center-vertically":m}),htmlFor:v},l.a.createElement("input",Object.assign({},g,{className:"ud-sr-only ud-custom-focus-visible ud-real-toggle-input",id:v,type:p})),u,l.a.createElement("div",{className:o()("ud-toggle-input-block-outline",h)}),d,(r||f)&&l.a.createElement("div",{className:"ud-heading-md"},r,f&&l.a.createElement("div",{className:"ud-text-sm ud-toggle-input-block-details"},f)))}))},"./node_modules/@udemy/react-form-components/dist/esm/with-counter/with-counter.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/mobx/lib/mobx.module.js");var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/react/index.js");var d=r.n(p);function h(e){var t,r,n;let o=Object(u["f"])(t=(r=class t extends d.a.Component{constructor(e){super(e);i()(this,"inputLength",n,this);this.onChange=e=>{var t,r;this.setInputLength(e.target.value);(t=(r=this.props).onChange)===null||t===void 0?void 0:t.call(r,e)};const{value:t,defaultValue:r}=this.props;this.setInputLength(typeof t!=="undefined"?t:r)}componentDidUpdate(e){e.value!==this.props.value&&this.setInputLength(this.props.value)}setInputLength(e){this.inputLength=(e!==null&&e!==void 0?e:"").length}render(){const t=this.props.maxLength-this.inputLength;return d.a.createElement(e,Object.assign({},this.props,{count:t,onChange:this.onChange}))}},n=a()(r.prototype,"inputLength",[c["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),a()(r.prototype,"setInputLength",[c["e"]],Object.getOwnPropertyDescriptor(r.prototype,"setInputLength"),r.prototype),r))||t;return o}},"./node_modules/@udemy/react-menu-components/dist/esm/dropdown/dropdown.module.css":function(e,t,r){e.exports={"bottom-drawer":"dropdown-module--bottom-drawer--1NUTY",menu:"dropdown-module--menu--2O7pL","dropdown-menu":"dropdown-module--dropdown-menu--3HbSn"}},"./node_modules/@udemy/react-menu-components/dist/esm/dropdown/dropdown.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/find-focusables.js");var i=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var o=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/focus-cycle.react-component.js");var a=r("./node_modules/@udemy/hooks/dist/esm/use-match-media/index.js");var s=r("./node_modules/@udemy/i18n/dist/esm/index.js");var l=r("./node_modules/@udemy/icons/dist/expand.ud-icon");var c=r.n(l);var u=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var p=r("./node_modules/@udemy/react-core-components/dist/esm/block-list/block-list.react-component.js");var d=r("./node_modules/@udemy/react-dialog-components/dist/esm/bottom-drawer/bottom-drawer.react-component.js");var h=r("./node_modules/@udemy/react-popup-components/dist/esm/popper/popper.react-component.js");var m=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var f=r("./node_modules/@udemy/shared-utils/dist/esm/react/autopilot.js");var g=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var y=r("./node_modules/classnames/index.js");var b=r.n(y);var v=r("./node_modules/mobx-react/dist/mobx-react.module.js");var w=r("./node_modules/react/index.js");var E=r.n(w);var S=r("./node_modules/@udemy/react-menu-components/dist/esm/dropdown/dropdown.module.css");var _=r.n(S);var x;const D=E.a.createContext({onToggle:m["a"]});const C=e=>{let{children:t,withIcon:r=true,udStyle:n="secondary",...i}=e;return E.a.createElement(u["a"],Object.assign({udStyle:n},i),t,r&&E.a.createElement(c.a,{label:false}))};const T=()=>{const{gettext:e}=Object(s["j"])();return E.a.createElement(E.a.Fragment,null,e("Menu"))};C.displayName="DropdownButton";const O=e=>{let{size:t="small",...r}=e;const n=Object(a["a"])("mobile-max");return E.a.createElement(p["a"],Object.assign({},r,{size:n?"large":t}))};O.displayName="DropdownMenu";class k extends E.a.Component{constructor(){super(...arguments);this.onClick=e=>{var t,r;const n=(t=(r=this.props).onClick)===null||t===void 0?void 0:t.call(r,e);if(typeof n==="undefined"||n!==false){this.context.onToggle(false)}}}render(){return E.a.createElement(p["a"].Item,Object.assign({},this.props,{onClick:this.onClick}))}}k.defaultProps={componentClass:"button"};k.contextType=D;const P={auto:"auto",fullWidth:"100%",xsmall:`${Object(g["c"])(120)}rem`,small:`${Object(g["c"])(160)}rem`,medium:`${Object(g["c"])(200)}rem`,large:`${Object(g["c"])(260)}rem`};const A=Object(f["a"])("isOpen","onToggle")((x=class extends E.a.Component{constructor(e){var t;super(e);t=this;this.hasOpened=void 0;this.triggerId=void 0;this.drawerId=void 0;this.focusTrappingDialogProps=void 0;this.dropdownContentRef=void 0;this.onOpenDrawer=()=>{var e,t;(e=(t=this.props).onToggle)===null||e===void 0?void 0:e.call(t,true);!this.hasOpened&&this.props.onFirstOpen&&this.props.onFirstOpen();this.hasOpened=true};this.onCloseDrawer=()=>{var e,t;(e=(t=this.props).onToggle)===null||e===void 0?void 0:e.call(t,false)};this.renderContent=function(e){var r,n,i;const o=P[(r=t.props.menuWidth)!==null&&r!==void 0?r:"medium"];const a={...e.style,width:o};for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++){l[c-1]=arguments[c]}return(n=(i=t.props).renderContent)===null||n===void 0?void 0:n.call(i,{...e,style:a},...l)};this.getPopperFocusables=()=>{var e;return[document.getElementById(this.triggerId),...Object(n["a"])((e=this.dropdownContentRef)===null||e===void 0?void 0:e.current)]};this.triggerId=this.props.trigger.props.id||Object(i["a"])("dropdown-trigger");this.drawerId=Object(i["a"])("dropdown-drawer");this.hasOpened=false;this.dropdownContentRef=E.a.createRef();this.focusTrappingDialogProps={findTriggerNode:()=>document.getElementById(this.triggerId)}}render(){const{children:e,forwardedRef:t,menuMaxHeight:r,menuWidth:n,useDrawer:i=this.props.isMobileMax&&!this.props.isFinePointer,isMobileMax:a,isFinePointer:s,...l}=this.props;const c={onToggle:this.props.onToggle};const u=l.detachFromTarget?this.dropdownContentRef:undefined;if(i){return E.a.createElement(v["c"],{focusTrappingDialogProps:this.focusTrappingDialogProps},E.a.createElement(D.Provider,{value:c},E.a.createElement("div",{className:"note"},E.a.cloneElement(l.trigger,{id:this.triggerId,cssToggleId:this.drawerId})),E.a.createElement(d["a"],{ref:t,id:this.drawerId,title:E.a.createElement(T,null),showTitle:false,isOpen:l.isOpen,onOpen:this.onOpenDrawer,onClose:this.onCloseDrawer,className:_.a["bottom-drawer"]},E.a.createElement("div",{className:_.a.menu},e))))}return E.a.createElement(v["c"],{focusTrappingDialogProps:this.focusTrappingDialogProps},E.a.createElement(D.Provider,{value:c},E.a.createElement(o["a"],{getCycle:this.getPopperFocusables,detachedContent:u},E.a.createElement(h["a"],Object.assign({ref:t},l,{trigger:E.a.cloneElement(l.trigger,{id:this.triggerId}),renderContent:this.renderContent}),E.a.createElement("div",{className:b()(_.a.menu,_.a["dropdown-menu"]),style:{maxHeight:r},ref:this.dropdownContentRef},e)))))}},x.defaultProps={...h["a"].defaultProps,isOpen:false,menuMaxHeight:`${Object(g["c"])(280)}rem`,menuWidth:"medium",useDrawer:undefined,componentClass:"div"},x));const I=Object(a["b"])({isMobileMax:"mobile-max",isFinePointer:"(pointer: fine), not (any-pointer: coarse)"})(A);const j=Object.assign(E.a.forwardRef(((e,t)=>E.a.createElement(I,Object.assign({},e,{forwardedRef:t})))),{defaultProps:A.defaultProps,Button:C,Menu:O,MenuItem:k,displayName:"Dropdown"})},"./node_modules/@udemy/react-messaging-components/dist/esm/notification-badge/notification-badge.module.css":function(e,t,r){e.exports={"ud-notification-badge":"notification-badge-module--ud-notification-badge--3fsj1","ud-notification-counter":"notification-badge-module--ud-notification-counter--jLuym","ud-notification-dot":"notification-badge-module--ud-notification-dot--2LxSe"}},"./node_modules/@udemy/react-messaging-components/dist/esm/notification-badge/notification-badge.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/classnames/index.js");var o=r.n(i);var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./node_modules/@udemy/react-messaging-components/dist/esm/notification-badge/notification-badge.module.css");var c=r.n(l);const u=e=>{let{label:t,children:r=null,className:i,...a}=e;const{gettext:l}=Object(n["j"])();const u=r===null;const p=o()(i,c.a["ud-notification-badge"],u?c.a["ud-notification-dot"]:c.a["ud-notification-counter"]);let d=r;if(!u){const e=typeof r==="string"?parseInt(r,10):r;if(!e||e<=0){return null}if(e&&e>9){d=l("9+")}}return s.a.createElement("span",Object.assign({},a,{className:p,title:t}),d)}},"./node_modules/@udemy/react-messaging-components/dist/esm/progress/progress.module.css":function(e,t,r){e.exports={"ud-progress":"progress-module--ud-progress--9jf_8"}},"./node_modules/@udemy/react-navigation-components/dist/esm/pagination/pagination.module.css":function(e,t,r){e.exports={container:"pagination-module--container--1Dmb0",prev:"pagination-module--prev--1K-2u",next:"pagination-module--next--1CIKT",page:"pagination-module--page--1Ujec",active:"pagination-module--active--2doua",ellipsis:"pagination-module--ellipsis--lXlPS"}},"./node_modules/@udemy/react-navigation-components/dist/esm/pagination/pagination.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r("./node_modules/@udemy/i18n/dist/esm/index.js");var c=r("./node_modules/@udemy/icons/dist/more.ud-icon");var u=r.n(c);var p=r("./node_modules/@udemy/icons/dist/next.ud-icon");var d=r.n(p);var h=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var m=r.n(h);var f=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var g=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var y=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var b=r("./node_modules/classnames/index.js");var v=r.n(b);var w=r("./node_modules/mobx/lib/mobx.module.js");var E=r("./node_modules/mobx-react/dist/mobx-react.module.js");var S=r("./node_modules/react/index.js");var _=r.n(S);function x(e){const t=new URLSearchParams(window.location.search);if(e>1){t.set("p",e.toString())}else{t.delete("p")}t.sort();const r=t.toString()?`?${t.toString()}`:"";return`${window.location.pathname}${r}`}var D=r("./node_modules/@udemy/react-navigation-components/dist/esm/pagination/pagination.module.css");var C=r.n(D);r.d(t,"a",(function(){return U}));var T,O,k,P;const A=()=>{const{gettext:e}=Object(l["j"])();return _.a.createElement(u.a,{label:e("Ellipsis"),size:"medium",className:C.a.ellipsis})};const I=e=>{let{onClick:t,activePage:r,disabled:n}=e;const{gettext:i}=Object(l["j"])();return _.a.createElement(f["a"],{componentClass:"a",href:x(r-1),disabled:r<=1||n,size:"medium",udStyle:"secondary",round:true,onClick:t,className:C.a.prev,"data-page":"-1","data-testid":"rnc-pagination-previous","aria-label":i("previous page")},_.a.createElement(m.a,{"data-testid":"previous-page",label:false,size:"small"}))};const j=e=>{let{onClick:t,activePage:r,disabled:n,pageCount:i}=e;const{gettext:o}=Object(l["j"])();return _.a.createElement(f["a"],{componentClass:"a",href:x(r+1),disabled:i&&r>=i||n,size:"medium",udStyle:"secondary",round:true,onClick:t,className:C.a.next,"data-page":"+1","data-testid":"rnc-pagination-next","aria-label":o("next page")},_.a.createElement(d.a,{"data-testid":"next-page",label:false,size:"small"}))};const R=e=>{let{pageNumber:t,handleClick:r,disabled:n,activePage:i,ariaCurrent:o}=e;const{interpolate:a,gettext:s}=Object(l["j"])();return _.a.createElement(g["a"],{componentClass:"a",href:x(t),size:"medium",udStyle:"ghost",onClick:r,disabled:n,className:v()(C.a.page,t===i?C.a.active:""),"aria-label":a(s("Page %(pageNumber)s"),{pageNumber:t},true),"data-page":t,"aria-current":t===i?o:undefined},t)};const N=1;const L=0;const M=5;const q=false;let U=Object(E["f"])(T=(O=(P=class e extends _.a.Component{constructor(){super(...arguments);i()(this,"activePage",k,this);this.handleClick=e=>{e.preventDefault();const t=e.currentTarget.dataset.page;const r=this.activePage;if(t[0]==="-"||t[0]==="+"){this.setActivePage(this.activePage+Number(t))}else{this.setActivePage(Number(t))}if(r!==this.activePage){var n,i;(n=(i=this.props).onPageChange)===null||n===void 0?void 0:n.call(i,this.activePage)}};this.renderPageButton=e=>_.a.createElement(R,{key:e,disabled:this.props.disabled,handleClick:this.handleClick,pageNumber:e,activePage:this.activePage,ariaCurrent:this.props.ariaCurrent})}componentDidUpdate(e){if(e.activePage!==this.props.activePage){var t;this.setActivePage((t=this.props.activePage)!==null&&t!==void 0?t:N)}}setActivePage(e){this.activePage=e}renderEllipsis(e){return _.a.createElement(A,{key:e})}renderPageText(e){return _.a.createElement("span",{key:e,className:v()("ud-heading-sm",C.a.page)},e)}fillWithPageButtons(e,t,r){for(let n=0;n<r;n++){e.push(this.renderPageButton(t+n))}}renderPageButtons(e,t,r){const n=[];if(t>=e){this.fillWithPageButtons(n,1,e)}else if(this.activePage<=t-2){this.fillWithPageButtons(n,1,t-2);n.push(this.renderEllipsis("pre-ellipsis"));if(r){n.push(this.renderPageText(e))}else{n.push(this.renderPageButton(e))}}else if(this.activePage>e-(t-2)){n.push(this.renderPageButton(1));n.push(this.renderEllipsis("post-ellipsis"));this.fillWithPageButtons(n,e-(t-2)+1,t-2)}else{n.push(this.renderPageButton(1));n.push(this.renderEllipsis("pre-ellipsis"));this.fillWithPageButtons(n,this.activePage,t-4);n.push(this.renderEllipsis("post-ellipsis"));if(r){n.push(this.renderPageText(e))}else{n.push(this.renderPageButton(e))}}return n}render(){const{activePage:e,pageCount:t=L,onPageChange:r,buttonCount:n=M,showLastPageAsText:i=q,disabled:o,showPageButtons:a,ariaCurrent:s,...l}=this.props;if(t<2&&a){return null}return _.a.createElement("nav",Object.assign({},l,{className:v()(l.className,C.a.container),"data-testid":"rnc-pagination"}),_.a.createElement(I,{onClick:this.handleClick,activePage:this.activePage,disabled:o}),a&&this.renderPageButtons(t,n,i),_.a.createElement(j,{onClick:this.handleClick,pageCount:t,activePage:this.activePage,disabled:o}))}},P.defaultProps={disabled:false,activePage:N,pageCount:L,buttonCount:M,showLastPageAsText:q,showPageButtons:true,onPageChange:y["a"],ariaCurrent:"page"},P),k=a()(O.prototype,"activePage",[w["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){var e;return(e=this.props.activePage)!==null&&e!==void 0?e:N}}),a()(O.prototype,"setActivePage",[w["e"]],Object.getOwnPropertyDescriptor(O.prototype,"setActivePage"),O.prototype),O))||T},"./node_modules/@udemy/react-popup-components/dist/esm/popover/basic-popover.react-component.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return d}));r.d(t,"a",(function(){return h}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/prop-types/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./node_modules/@udemy/react-popup-components/dist/esm/basic-popper/basic-popper.react-component.js");var u=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.module.css");var p=r.n(u);function d(e,t){const r=t=>{var r;let{forwardedRef:n,withArrow:o=true,withPadding:a=true,renderContent:s=((r=e.defaultProps)===null||r===void 0?void 0:r.renderContent),...u}=t;const d=(e,t,r)=>{let n;const u=Object(c["f"])(t);let d=`popover-${u}`;if(o&&r!==null){d=`${d}-arrow`;const e=`${r}px`;let t;switch(u){case"top":t={top:"100%",left:e};break;case"bottom":t={top:0,left:e};break;case"left":t={top:e,left:"100%"};break;case"right":t={top:e,left:0};break}n=l.a.createElement("div",{className:i()(p.a.arrow,p.a[`arrow-${u}`]),style:t})}e.children=l.a.createElement("div",{className:i()(p.a.popover,p.a[d],{[p.a["popover-padding"]]:a})},l.a.createElement("div",{className:p.a.inner},e.children),n);return s===null||s===void 0?void 0:s(e,t,r)};return l.a.createElement(e,Object.assign({ref:n},u,{renderContent:d}))};return Object.assign(l.a.forwardRef(((e,t)=>l.a.createElement(r,Object.assign({},e,{forwardedRef:t})))),{propTypes:{...t,withArrow:a.a.bool,withPadding:a.a.bool},defaultProps:{...e.defaultProps,withArrow:true,withPadding:true}})}const h=d(c["a"],c["d"]);h.displayName="BasicPopover"},"./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.module.css":function(e,t,r){e.exports={popover:"popover-module--popover--1kskS","popover-padding":"popover-module--popover-padding--DD0iQ","popover-bottom":"popover-module--popover-bottom--N6gdN","popover-bottom-arrow":"popover-module--popover-bottom-arrow--3yavo","popover-top":"popover-module--popover-top--wdPRh","popover-top-arrow":"popover-module--popover-top-arrow--CX16f","popover-left":"popover-module--popover-left--1WptH","popover-left-arrow":"popover-module--popover-left-arrow--BuL7I","popover-right":"popover-module--popover-right--31LLX","popover-right-arrow":"popover-module--popover-right-arrow--1g0PE",inner:"popover-module--inner--Sbv-I",arrow:"popover-module--arrow--abDwz","arrow-bottom":"popover-module--arrow-bottom--1FnXL","arrow-top":"popover-module--arrow-top--3Ghxx","arrow-left":"popover-module--arrow-left--1cCCt","arrow-right":"popover-module--arrow-right--1vmr3"}},"./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("./node_modules/@udemy/react-popup-components/dist/esm/popper/popper.react-component.js");var i=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/basic-popover.react-component.js");const o=Object(i["b"])(n["a"],n["a"].propTypes);o.displayName="Popover"},"./node_modules/@udemy/react-popup-components/dist/esm/popper/popper.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return L}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/@udemy/design-system-utils/dist/esm/root-close-wrapper/root-close-wrapper.react-component.js");var u=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/find-focusables.js");var p=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/force-tab-order.js");var d=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var h=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var m=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/debounce.js");var f=r("./node_modules/@udemy/shared-utils/dist/esm/env/server-or-client.js");var g=r("./node_modules/mobx/lib/mobx.module.js");var y=r("./node_modules/mobx-react/dist/mobx-react.module.js");var b=r("./node_modules/prop-types/index.js");var v=r.n(b);var w=r("./node_modules/react/index.js");var E=r.n(w);var S=r("./node_modules/react-dom/index.js");var _=r.n(S);var x=r("./node_modules/@udemy/react-popup-components/dist/esm/basic-popper/basic-popper.react-component.js");var D,C,T,O,k,P,A,I,j;const R={top:"bottom",left:"right",right:"left",bottom:"top"};const N=16;let L=(D=g["t"].ref,C=g["t"].ref,Object(y["f"])(T=(O=(j=class e extends E.a.Component{constructor(e){var t;super(e);t=this;this.ref=void 0;this.triggerNode=void 0;this.contentNode=void 0;this.debouncedUpdatePlacement=void 0;this.disposeForceTabOrder=h["a"];this.isScrollListenerSetUp=void 0;this.POPPER_PLACEMENT=x["b"];i()(this,"forcedPlacement",k,this);i()(this,"position",P,this);i()(this,"detachedFromTargetPosition",A,this);i()(this,"updatePlacement",I,this);this.onToggle=e=>{var t,r;(t=(r=this.props).onToggle)===null||t===void 0?void 0:t.call(r,e);if(e&&this.contentNode){this.contentNode.style.opacity=(0).toString();setTimeout((()=>{this.updatePlacement();if(this.contentNode){this.contentNode.style.opacity=""}}),0)}};this.onEscape=(e,t)=>{var r;(r=this.ref.current)===null||r===void 0?void 0:r.onRootClose(e,t,c["a"].KEYBOARD)};this.renderContent=function(e){var r,n,i,o;let a=(r=t.position)!==null&&r!==void 0?r:x["b"][(n=t.forcedPlacement)!==null&&n!==void 0?n:t.props.placement];for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++){l[c-1]=arguments[c]}if(t.props.detachFromTarget){var u,p;a=t.detachedFromTargetPosition;return _.a.createPortal(E.a.createElement(M,{onEscape:t.onEscape},(u=(p=t.props).renderContent)===null||u===void 0?void 0:u.call(p,{...e,style:a},...l)),document.body)}return(i=(o=t.props).renderContent)===null||i===void 0?void 0:i.call(o,{...e,style:a},...l)};this.ref=E.a.createRef();this.debouncedUpdatePlacement=Object(m["a"])(this.updatePlacement,N)}componentDidMount(){var e,t;this.triggerNode=(e=this.ref.current)===null||e===void 0?void 0:e.triggerNode;this.contentNode=(t=this.ref.current)===null||t===void 0?void 0:t.contentNode;f["a"].global.addEventListener("resize",this.debouncedUpdatePlacement,{passive:true});this.updatePlacement();if(this.props.detachFromTarget){const e=()=>{var e;if((e=this.ref.current)!==null&&e!==void 0&&e.isOpen){return this.triggerNode}};const t=()=>{var e;if((e=this.ref.current)!==null&&e!==void 0&&e.isOpen&&this.contentNode){return Object(u["a"])(this.contentNode)[0]}};const r=()=>{var e;if((e=this.ref.current)!==null&&e!==void 0&&e.isOpen&&this.contentNode){const e=Object(u["a"])(this.contentNode);return e[e.length-1]}};if(this.props.getTabOrder){this.disposeForceTabOrder=Object(p["a"])(this.props.getTabOrder({findTriggerNode:e,findFirstFocusableInContent:t,findLastFocusableInContent:r}))}}}componentDidUpdate(e){!e.isOpen&&this.props.isOpen&&this.updatePlacement()}componentWillUnmount(){var e,t,r;f["a"].global.removeEventListener("resize",this.debouncedUpdatePlacement);const n=(e=(t=(r=this.props).getScrollContainers)===null||t===void 0?void 0:t.call(r).filter(Boolean))!==null&&e!==void 0?e:[];if(this.isScrollListenerSetUp){n.forEach((e=>{e.removeEventListener("scroll",this.updatePlacement)}))}this.disposeForceTabOrder();this.triggerNode=this.contentNode=null}getPlacementsInPreferredOrder(){const[e,t]=this.props.placement.split("-");const r=R[e];const n=[];const i=[];const o=[];Object.keys(x["b"]).forEach((a=>{const[s,l]=a.split("-");const c=l===t?"unshift":"push";if(s===e){n[c](a)}else if(s===r){i[c](a)}else{o[c](a)}}));return n.concat(i).concat(o)}getContentFit(e,t){const{top:r,left:n,width:i,height:o}=e;const a=n+i;const s=r+o;const{top:l,right:c,bottom:u,left:p}=t;const d=r>=l&&n>=p&&a<=c&&s<=u;const h=(Math.min(a,c)-Math.max(n,p))*(Math.min(s,u)-Math.max(r,l));return{fits:d,area:h}}getContentRect(e,t,r){const{top:n,right:i,bottom:o,left:a}=t;const s=i-a;const l=o-n;const c=r.right-r.left;const u=r.bottom-r.top;switch(e){case"top-start":return{top:n-u,left:a,width:c,height:u};case"top":return{top:n-u,left:a+s/2-c/2,width:c,height:u};case"top-end":return{top:n-u,left:i-c,width:c,height:u};case"right-start":return{top:n,left:i,width:c,height:u};case"right":return{top:n+l/2-u/2,left:i,width:c,height:u};case"right-end":return{top:o-u,left:i,width:c,height:u};case"bottom-start":return{top:o,left:a,width:c,height:u};case"bottom":return{top:o,left:a+s/2-c/2,width:c,height:u};case"bottom-end":return{top:o,left:i-c,width:c,height:u};case"left-start":return{top:n,left:a-c,width:c,height:u};case"left":return{top:n+l/2-u/2,left:a-c,width:c,height:u};case"left-end":return{top:o-u,left:a-c,width:c,height:u}}}render(){var e;const{detachFromTarget:t,...r}=this.props;return E.a.createElement(x["a"],Object.assign({},r,{onToggle:this.onToggle,placement:(e=this.forcedPlacement)!==null&&e!==void 0?e:r.placement,renderContent:this.renderContent,ref:this.ref}))}},j.propTypes={...x["d"],detachFromTarget:v.a.bool,getTabOrder:v.a.func,getScrollContainers:v.a.func},j.defaultProps={...x["a"].defaultProps,detachFromTarget:false,getTabOrder:e=>[[e.findTriggerNode,e.findFirstFocusableInContent],[e.findLastFocusableInContent,e.findTriggerNode]],getScrollContainers:()=>[]},j),k=a()(O.prototype,"forcedPlacement",[g["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),P=a()(O.prototype,"position",[D],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),A=a()(O.prototype,"detachedFromTargetPosition",[C],{configurable:true,enumerable:true,writable:true,initializer:function(){return undefined}}),I=a()(O.prototype,"updatePlacement",[g["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return()=>{var e,t;if(!this.triggerNode||!this.contentNode||!this.ref.current){return}if(!this.ref.current.isOpen){return}if(!this.props.getTriggerRect){return}const r=this.props.getTriggerRect(this.triggerNode);const n=this.contentNode.getBoundingClientRect();const i=document.body.getBoundingClientRect();let o,a,s;for(const e of this.getPlacementsInPreferredOrder()){var l;const t=this.getContentRect(e,r,n);const{fits:c,area:u}=this.getContentFit(t,i);if(c){o={placement:e,rect:t,leftOffset:0};break}if(e==="top-start"||e==="bottom-start"){if(!a||u>a.area){a={placement:e,rect:t,area:u,leftOffset:0};const r=t.left+t.width-i.right;if(r>0){a.leftOffset=-Math.min(t.left-i.left,r)}}}s=(l=s)!==null&&l!==void 0?l:{placement:e,rect:t,leftOffset:0}}const c=(e=(t=o)!==null&&t!==void 0?t:a)!==null&&e!==void 0?e:s;if(c){var u,p,d;this.forcedPlacement=c.placement;this.position={...x["b"][c.placement]};if(c.leftOffset&&"left"in this.position&&this.position.left==="0"){this.position.left=`${c.leftOffset}px`}this.detachedFromTargetPosition={top:`${window.pageYOffset+c.rect.top}px`,left:`${window.pageXOffset+c.rect.left+c.leftOffset}px`};const e=(u=(p=(d=this.props).getScrollContainers)===null||p===void 0?void 0:p.call(d).filter(Boolean))!==null&&u!==void 0?u:[];if(!this.isScrollListenerSetUp){e.forEach((e=>{e.addEventListener("scroll",this.updatePlacement,{passive:true})}));this.isScrollListenerSetUp=true}}}}}),O))||T);class M extends E.a.Component{constructor(){super(...arguments);this.dom=null;this.onKeyDown=e=>{if(e.keyCode===d["b"].ESCAPE){this.props.onEscape(e,this.dom)}}}componentDidMount(){var e,t;this.dom=_.a.findDOMNode(this);(e=this.dom)===null||e===void 0?void 0:e.addEventListener("click",this.context.ignoreRootClose);(t=this.dom)===null||t===void 0?void 0:t.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){if(this.dom){this.dom.removeEventListener("click",this.context.ignoreRootClose);this.dom.removeEventListener("keydown",this.onKeyDown);this.dom=null}}render(){return E.a.Children.only(this.props.children)}}M.contextType=c["c"]},"./node_modules/@udemy/react-popup-components/dist/esm/tooltip/tooltip.module.css":function(e,t,r){e.exports={tooltip:"tooltip-module--tooltip--1ORe9",white:"tooltip-module--white--3VDM1"}},"./node_modules/@udemy/react-popup-components/dist/esm/tooltip/tooltip.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./node_modules/@udemy/react-popup-components/dist/esm/basic-popper/basic-popper.react-component.js");var l=r("./node_modules/@udemy/react-popup-components/dist/esm/popper/popper.react-component.js");var c=r("./node_modules/@udemy/react-popup-components/dist/esm/tooltip/tooltip.module.css");var u=r.n(c);const p=e=>{let{a11yRole:t="description",forwardedRef:r,udStyle:n="black",canToggleOnHover:o,placement:c="top-start",trigger:p,renderContent:d=s["e"],getTabOrder:h=(e=>[[e.findTriggerNode,e.findFirstFocusableInContent],[e.findLastFocusableInContent,e.findTriggerNode]]),getScrollContainers:m=(()=>[]),...f}=e;const g=(e,t,r)=>{const o=i()("ud-text-sm",u.a.tooltip,{[u.a.white]:n==="white"});e.children=a.a.createElement("div",{className:o},e.children);return d(e,t,r)};return a.a.createElement(l["a"],Object.assign({trigger:p,ref:r,a11yRole:t,getScrollContainers:m,getTabOrder:h,canToggleOnHover:true,placement:c,renderContent:g},f))};const d=Object.assign(a.a.forwardRef(((e,t)=>a.a.createElement(p,Object.assign({},e,{forwardedRef:t})))),{displayName:"Tooltip"})},"./node_modules/@udemy/react-reveal-components/dist/esm/accordion/accordion-panels/accordion-panel.module.css":function(e,t,r){e.exports={panel:"accordion-panel-module--panel--3_kkG","panel-toggler":"accordion-panel-module--panel-toggler--1RjML","outer-panel-toggler":"accordion-panel-module--outer-panel-toggler--AgeEB","expand-icon":"accordion-panel-module--expand-icon--2DZax","content-wrapper":"accordion-panel-module--content-wrapper--DIUt_","static-panel":"accordion-panel-module--static-panel--36jVq",content:"accordion-panel-module--content--jkZai"}},"./node_modules/@udemy/react-reveal-components/dist/esm/accordion/accordion-panels/accordion-panel.react-component.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return A}));r.d(t,"a",(function(){return I}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var u=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var p=r("./node_modules/@udemy/icons/dist/expand.ud-icon");var d=r.n(p);var h=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state-checkbox.react-component.js");var m=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state-radio-group.react-component.js");var f=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var g=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var y=r("./node_modules/classnames/index.js");var b=r.n(y);var v=r("./node_modules/mobx/lib/mobx.module.js");var w=r("./node_modules/mobx-react/dist/mobx-react.module.js");var E=r("./node_modules/react/index.js");var S=r.n(E);var _=r("./node_modules/@udemy/react-reveal-components/dist/esm/accordion/accordion-panels/accordion-panel.module.css");var x=r.n(_);var D,C,T,O,k,P;const A={medium:"ud-heading-md",large:"ud-heading-lg",xlarge:"ud-heading-xl"};let I=(D=Object(w["e"])("$$udAccordion"),D(C=Object(w["f"])(C=(T=(P=class e extends S.a.Component{constructor(e){var t,r;super(e);this.id=void 0;this.titleId=void 0;i()(this,"_expanded",O,this);i()(this,"handleChange",k,this);this.handleKeyDown=e=>{if(e.keyCode===c["b"].UP||e.keyCode===c["b"].DOWN){var t;const n=(t=this.props.$$udAccordion)===null||t===void 0?void 0:t.ref.current;if(n){var r;e.preventDefault();const t=Array.from(n.querySelectorAll(".js-panel-toggler"));const i=t.findIndex((t=>t===e.currentTarget));const o=i+(e.keyCode===c["b"].UP?-1:1);const a=t[(o+t.length)%t.length];a===null||a===void 0?void 0:(r=a.focus)===null||r===void 0?void 0:r.call(a)}}};this.id=(t=e.id)!==null&&t!==void 0?t:Object(u["a"])("accordion-panel");this.titleId=(r=e.titleId)!==null&&r!==void 0?r:Object(u["a"])("accordion-panel-title");if(this.props.defaultExpanded){var n;this._expanded=true;(n=this.props.$$udAccordion)===null||n===void 0?void 0:n.setSelectedPanelId(this.id)}}componentDidUpdate(e){if(this.props.expanded!==e.expanded&&this.props.expanded!==this._expanded){this.handleChange({target:{id:this.id,dataset:{checked:this.props.expanded?"checked":""}}})}}get expanded(){var e,t;if(this.props.expanded!==undefined){return this.props.expanded}if(((e=this.props.$$udAccordion)===null||e===void 0?void 0:e.props.toggleBehavior)==="any"){return this._expanded}return this.id===((t=this.props.$$udAccordion)===null||t===void 0?void 0:t.selectedPanelId)}render(){const{children:e,className:t,defaultExpanded:r,expanded:n,toggleStrategy:i,onToggle:o,title:a,renderTitle:s,$$udAccordion:l,id:c,titleId:u,...p}=this.props;const{toggleBehavior:g,showExpandIcon:y,size:v}=l===null||l===void 0?void 0:l.props;const w=A[v];const E=g==="any"?h["a"]:m["a"].Radio;const _=S.a.createElement(f["a"],{"aria-disabled":g==="always-one"?this.expanded:false,"aria-expanded":this.expanded,className:b()("js-panel-toggler",x.a["panel-toggler"]),id:this.titleId,onKeyDown:this.handleKeyDown,typography:w,udStyle:"link"},S.a.createElement("span",{className:"ud-accordion-panel-title"},a));return S.a.createElement("div",Object.assign({},p,{className:b()(x.a.panel,t)}),S.a.createElement(E,{id:this.id,checked:this.expanded,onChange:this.handleChange}),S.a.createElement(f["a"],{componentClass:"div",className:b()("ud-accordion-panel-toggler",x.a["panel-toggler"],x.a["outer-panel-toggler"]),cssToggleId:this.id,typography:w,udStyle:"link"},s===null||s===void 0?void 0:s({className:"ud-accordion-panel-heading",children:_}),y&&S.a.createElement(d.a,{className:x.a["expand-icon"],label:false,color:"neutral",size:v==="xlarge"?"medium":"small"})),(i==="show-hide"||this.expanded)&&S.a.createElement("div",{className:x.a["content-wrapper"],"aria-labelledby":this.titleId,"aria-hidden":!this.expanded,role:"group"},S.a.createElement("div",{className:b()("ud-accordion-panel-content",x.a.content)},e)))}},P.defaultProps={renderTitle:e=>{let{children:t,...r}=e;return S.a.createElement("h3",r,t)},className:"",defaultExpanded:undefined,expanded:undefined,toggleStrategy:"show-hide",onToggle:g["a"]},P.$$udType="Accordion.Panel",P),O=a()(T.prototype,"_expanded",[v["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),k=a()(T.prototype,"handleChange",[v["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{var t,r,n;this._expanded=!!e.target.dataset.checked;const i=this._expanded?this.id:null;(t=this.props.$$udAccordion)===null||t===void 0?void 0:t.setSelectedPanelId(i);(r=(n=this.props).onToggle)===null||r===void 0?void 0:r.call(n,this._expanded,e)}}}),T))||C)||C)},"./node_modules/@udemy/react-reveal-components/dist/esm/accordion/accordion.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var u=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state-radio-group.react-component.js");var p=r("./node_modules/mobx/lib/mobx.module.js");var d=r("./node_modules/mobx-react/dist/mobx-react.module.js");var h=r("./node_modules/react/index.js");var m=r.n(h);var f=r("./node_modules/@udemy/react-reveal-components/dist/esm/accordion/accordion-panels/accordion-panel.react-component.js");var g,y,b,v,w;let E=Object(d["f"])(g=(y=(w=class e extends m.a.Component{constructor(e){var t;super(e);this.name=void 0;this.ref=m.a.createRef();i()(this,"selectedPanelId",b,this);i()(this,"setSelectedPanelId",v,this);this.name=(t=e.name)!==null&&t!==void 0?t:Object(c["a"])("accordion")}render(){const{toggleBehavior:e,showExpandIcon:t,size:r,...n}=this.props;const i=m.a.createElement(d["c"],{$$udAccordion:this},m.a.createElement("div",Object.assign({ref:this.ref},n)));if(e==="any"){return i}return m.a.createElement(u["a"],{allowToggle:e==="max-one",name:this.name},i)}},w.defaultProps={toggleBehavior:"any",showExpandIcon:true,size:"large"},w.Panel=void 0,w),b=a()(y.prototype,"selectedPanelId",[p["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),v=a()(y.prototype,"setSelectedPanelId",[p["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{this.selectedPanelId=e}}}),y))||g;E.Panel=f["a"]},"./node_modules/@udemy/react-structure-components/dist/esm/carousel/carousel.module.css":function(e,t,r){e.exports={container:"carousel-module--container--27wzs","container-full-viewport":"carousel-module--container-full-viewport--71aM-","scroll-port":"carousel-module--scroll-port--28Dow","scroll-lock":"carousel-module--scroll-lock--1Ys-j","scroll-item":"carousel-module--scroll-item--2CpA_",grid:"carousel-module--grid--3Qw6j","small-grid":"carousel-module--small-grid--P_n-m","large-grid":"carousel-module--large-grid--2Rv5p","grid-full-width-items":"carousel-module--grid-full-width-items--2kJ82",button:"carousel-module--button--NrqI6","next-button":"carousel-module--next-button--3mCOm","prev-button":"carousel-module--prev-button--BSHRu"}},"./node_modules/@udemy/react-structure-components/dist/esm/carousel/carousel.react-component.js":function(e,t,r){"use strict";r.d(t,"d",(function(){return H}));r.d(t,"e",(function(){return F}));r.d(t,"c",(function(){return B}));r.d(t,"b",(function(){return z}));r.d(t,"a",(function(){return K}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var l=r.n(s);var c=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var u=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/find-focusables.js");var p=r("./node_modules/@udemy/i18n/dist/esm/index.js");var d=r("./node_modules/@udemy/icons/dist/next.ud-icon");var h=r.n(d);var m=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var f=r.n(m);var g=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var y=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var b=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/debounce.js");var v=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");var w=r("./node_modules/classnames/index.js");var E=r.n(w);var S=r("./node_modules/mobx/lib/mobx.module.js");var _=r("./node_modules/mobx-react/dist/mobx-react.module.js");var x=r("./node_modules/react/index.js");var D=r.n(x);var C=r("./node_modules/ua-parser-js/src/ua-parser.js");var T=r.n(C);var O=r("./node_modules/@udemy/react-structure-components/dist/esm/carousel/carousel.module.css");var k=r.n(O);var P,A,I,j,R,N,L;const M=100;const q="CarouselNextPageEvent";const U="CarouselPrevPageEvent";const H=e=>{e.dispatchEvent(new Event(q))};const F=e=>{e.dispatchEvent(new Event(U))};const B=e=>{let{className:t,pagerButtonSize:r,onClick:n,disabled:i,udStyle:o="primary"}=e;return D.a.createElement(g["a"],{className:E()("ud-carousel-pager-button","ud-carousel-pager-button-prev",t,k.a.button,k.a["prev-button"]),size:r!==null&&r!==void 0?r:K.defaultProps.pagerButtonSize,udStyle:o,round:true,onClick:n,"data-pager-type":"prev",disabled:i},D.a.createElement(W,null))};const z=e=>{let{className:t,pagerButtonSize:r,onClick:n,disabled:i,isLoading:o,udStyle:a="primary"}=e;const s=o?D.a.createElement(y["a"],{color:"inherit"}):D.a.createElement(V,null);return D.a.createElement(g["a"],{className:E()("ud-carousel-pager-button","ud-carousel-pager-button-next",t,k.a.button,k.a["next-button"]),size:r!==null&&r!==void 0?r:K.defaultProps.pagerButtonSize,udStyle:a,round:true,onClick:n,"data-pager-type":"next",disabled:i},s)};const V=()=>{const{gettext:e}=Object(p["j"])();return D.a.createElement(h.a,{size:"large",color:"inherit",label:e("Next")})};const W=()=>{const{gettext:e}=Object(p["j"])();return D.a.createElement(f.a,{size:"large",color:"inherit",label:e("Previous")})};const G=e=>{let{ariaLabel:t,children:r}=e;const{gettext:n}=Object(p["j"])();return D.a.createElement("section",{"aria-label":t||n("Carousel"),className:k.a.container},r)};let K=Object(_["f"])(P=(A=(L=class e extends D.a.Component{constructor(e){var t;super(e);this.destroy=void 0;this.lastChild=void 0;this.scrollPortRef=void 0;this.scrollBehavior=void 0;this.shouldFocusOnFirstVisibleItem=void 0;this.id=void 0;i()(this,"scroll",I,this);i()(this,"isLoading",j,this);i()(this,"setIsLoading",R,this);this.handleLastChildEnter=async e=>{if(!e){return}const{children:t,onLoadMore:r}=this.props;const n=t[D.a.Children.count(t)-1];if(this.lastChild!==n){this.lastChild=n;await(r===null||r===void 0?void 0:r())}};this.handleCustomNextClick=()=>{this.handleNextClick()};this.handleCustomPrevClick=()=>{this.handlePrevClick()};this.handleNextClick=async()=>{var e,t,r;const{clientWidth:n,scrollWidth:i,scrollLeft:o}=this.scrollPortRef.current;const a=this.props.pageByFullWidth?n:.8*n;(e=(t=this.props).onNextClick)===null||e===void 0?void 0:e.call(t);if(this.props.onLoadMore){const e=i-(o+n);if(e<a){this.setIsLoading(true);await this.props.onLoadMore()}}this.setIsLoading(false);(r=this.scrollPortRef.current)===null||r===void 0?void 0:r.scrollBy({left:a,behavior:this.scrollBehavior});this.shouldFocusOnFirstVisibleItem=true};this.handlePrevClick=async()=>{var e,t,r;const{clientWidth:n}=this.scrollPortRef.current;const i=this.props.pageByFullWidth?n:.8*n;(e=(t=this.props).onPreviousClick)===null||e===void 0?void 0:e.call(t);(r=this.scrollPortRef.current)===null||r===void 0?void 0:r.scrollBy({left:-i,behavior:this.scrollBehavior});this.shouldFocusOnFirstVisibleItem=true};i()(this,"handleCarouselMutation",N,this);this.scrollHandler=Object(b["a"])(this.handleCarouselMutation,M);this.scrollPortRef=D.a.createRef();this.id=(t=this.props.id)!==null&&t!==void 0?t:Object(c["a"])("scroll-port");this.destroy=v["a"];this.shouldFocusOnFirstVisibleItem=false;const r=new T.a;this.scrollBehavior=r.getBrowser().name==="Safari"?"auto":"smooth"}componentDidMount(){if(this.props.onLoadMore){this.destroy=Object(S["v"])((()=>this.isLastPage),this.handleLastChildEnter)}this.addPageEventListeners(this.props.pagerEventTarget);this.handleCarouselMutation()}componentDidUpdate(e){if(e.children!==this.props.children){this.handleCarouselMutation()}if(e.pagerEventTarget!==this.props.pagerEventTarget){this.removePageEventListeners(e.pagerEventTarget);this.addPageEventListeners(this.props.pagerEventTarget)}}componentWillUnmount(){this.removePageEventListeners(this.props.pagerEventTarget);this.destroy()}get gridGapForFullWidthItems(){if(this.props.gridFullWidthItems){switch(this.props.gridSize){case"large":return 24;case"small":return 8;case"medium":default:return 16}}return 0}get isFirstPage(){return this.scroll.x===0}get isLastPage(){const{x:e,clientWidth:t,totalWidth:r}=this.scroll;return this.round(e+t)===this.round(r)}get isPageable(){return this.props.isInfiniteScroll||this.pageCount>1}get pageCount(){if(this.props.isInfiniteScroll){return null}return Math.ceil(this.scroll.totalWidth/(this.scroll.clientWidth+this.gridGapForFullWidthItems))}get visiblePageIndex(){if(this.props.isInfiniteScroll){return null}return Math.ceil(this.scroll.x/(this.scroll.clientWidth+this.gridGapForFullWidthItems))}round(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;return Math.round(e/t)*t}addPageEventListeners(e){var t,r;e===null||e===void 0?void 0:(t=e.addEventListener)===null||t===void 0?void 0:t.call(e,q,this.handleCustomNextClick);e===null||e===void 0?void 0:(r=e.addEventListener)===null||r===void 0?void 0:r.call(e,U,this.handleCustomPrevClick)}removePageEventListeners(e){var t,r;e===null||e===void 0?void 0:(t=e.removeEventListener)===null||t===void 0?void 0:t.call(e,q,this.handleCustomNextClick);e===null||e===void 0?void 0:(r=e.removeEventListener)===null||r===void 0?void 0:r.call(e,U,this.handleCustomPrevClick)}focusOnFirstVisibleItem(){var e,t;const r=(e=this.scrollPortRef.current)===null||e===void 0?void 0:e.getBoundingClientRect().left;if((t=this.scrollPortRef.current)!==null&&t!==void 0&&t.childNodes&&r){var n;const e=Array.from((n=this.scrollPortRef.current)===null||n===void 0?void 0:n.childNodes);const t=e.find((e=>e.getBoundingClientRect().left>=r));const i=t&&Object(u["a"])(t)[0];i===null||i===void 0?void 0:i.focus()}}render(){const{allowScroll:e,children:t,id:r,onLoadMore:n,onMutation:i,pagerButtonClassName:o,pagerButtonSize:a,className:s,itemClassName:l,smallGrid:c,gridSize:u,showPager:p,isInfiniteScroll:d,gridMode:h,gridFullWidthItems:m,pageByFullWidth:f,ariaLive:g,ariaLabel:y,onNextClick:b,onPreviousClick:v,fullViewport:w,pagerEventTarget:S,..._}=this.props;const x=D.a.createElement(D.a.Fragment,null,D.a.createElement(B,{className:o,disabled:d?false:this.isFirstPage,onClick:()=>{this.handlePrevClick()},pagerButtonSize:a}),D.a.createElement(z,{className:o,disabled:d?false:this.isLastPage,onClick:()=>{this.handleNextClick()},isLoading:this.isLoading,pagerButtonSize:a}));return D.a.createElement(G,{ariaLabel:y},D.a.createElement("div",Object.assign({ref:this.scrollPortRef,className:E()(s,k.a["scroll-port"],{[k.a["small-grid"]]:c||u==="small",[k.a["large-grid"]]:u==="large",[k.a.grid]:h,[k.a["grid-full-width-items"]]:h&&m,[k.a["scroll-lock"]]:!e,"ud-full-viewport-container":w,[k.a["container-full-viewport"]]:w}),"data-purpose":"scroll-port"},_,{id:this.id,onScroll:this.scrollHandler,"aria-live":g}),D.a.Children.map(t,((e,t)=>D.a.createElement("div",{"data-index":t,className:E()(l,k.a["scroll-item"]),key:t},e)))),this.isPageable&&p&&x)}},L.defaultProps={allowScroll:false,pagerButtonClassName:undefined,pagerButtonSize:"large",pagerEventTarget:undefined,className:undefined,itemClassName:undefined,id:undefined,onLoadMore:undefined,onMutation:undefined,smallGrid:false,gridSize:"medium",showPager:true,isInfiniteScroll:false,gridMode:true,gridFullWidthItems:false,pageByFullWidth:false,ariaLive:"polite",ariaLabel:undefined,onNextClick:v["a"],onPreviousClick:v["a"],fullViewport:false},L),l()(A.prototype,"componentDidMount",[S["e"]],Object.getOwnPropertyDescriptor(A.prototype,"componentDidMount"),A.prototype),I=l()(A.prototype,"scroll",[S["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{x:0,clientWidth:0,totalWidth:0}}}),j=l()(A.prototype,"isLoading",[S["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),R=l()(A.prototype,"setIsLoading",[S["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{this.isLoading=e}}}),l()(A.prototype,"gridGapForFullWidthItems",[S["g"]],Object.getOwnPropertyDescriptor(A.prototype,"gridGapForFullWidthItems"),A.prototype),l()(A.prototype,"isFirstPage",[S["g"]],Object.getOwnPropertyDescriptor(A.prototype,"isFirstPage"),A.prototype),l()(A.prototype,"isLastPage",[S["g"]],Object.getOwnPropertyDescriptor(A.prototype,"isLastPage"),A.prototype),l()(A.prototype,"isPageable",[S["g"]],Object.getOwnPropertyDescriptor(A.prototype,"isPageable"),A.prototype),l()(A.prototype,"pageCount",[S["g"]],Object.getOwnPropertyDescriptor(A.prototype,"pageCount"),A.prototype),l()(A.prototype,"visiblePageIndex",[S["g"]],Object.getOwnPropertyDescriptor(A.prototype,"visiblePageIndex"),A.prototype),N=l()(A.prototype,"handleCarouselMutation",[S["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return()=>{if(this.scrollPortRef.current){var e,t;const{clientWidth:r,scrollWidth:n,scrollLeft:i}=this.scrollPortRef.current;this.scroll={x:i,totalWidth:n,clientWidth:r};if(this.shouldFocusOnFirstVisibleItem){this.focusOnFirstVisibleItem();this.shouldFocusOnFirstVisibleItem=false}(e=(t=this.props).onMutation)===null||e===void 0?void 0:e.call(t,{isLastPage:this.isLastPage,isPageable:this.isPageable,pageCount:this.pageCount,visiblePageIndex:this.visiblePageIndex})}}}}),A))||P},"./node_modules/@udemy/react-structure-components/dist/esm/error-page/error-page.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/react-core-components/dist/esm/picture/picture.react-component.js");var o=r("./node_modules/@udemy/styles/dist/esm/tokens/generated/index.js");var a=r("./node_modules/@udemy/ud-data/dist/esm/index.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./node_modules/@udemy/react-structure-components/dist/esm/error-page/error.module.css");var d=r.n(p);const h=e=>{const{Config:t,request:r}=Object(a["h"])();const{gettext:s}=Object(n["j"])();const{heading:c=s("We can’t find the page you’re looking for"),content:p=s('Visit our <a class="link">support page</a> for further assistance.'),supportHref:h=`${t.url.to_app}support/`}=e;const m=r.isMobile;const f=[{srcSet:"https://s.udemycdn.com/error_page/error-desktop-v1.jpg 1x, https://s.udemycdn.com/error_page/error-desktop-2x-v1.jpg 2x",media:"(min-width: 600px)",width:480,height:360},{srcSet:"https://s.udemycdn.com/error_page/error-mobile-v1.jpg 1x, https://s.udemycdn.com/error_page/error-mobile-2x-v1.jpg 2x",media:`(max-width: ${o["a"]["breakpoint-mobile-max"]})`,width:240,height:180}];return u.a.createElement("div",{className:d.a.container},u.a.createElement(i["a"],{src:"https://s.udemycdn.com/error_page/error-desktop-v1.jpg",sources:f,alt:""}),u.a.createElement("h1",{className:m?`ud-heading-serif-xl ${d.a.greeting}`:`ud-heading-serif-xxl ${d.a.greeting}`},c),u.a.createElement("p",{className:l()(d.a.cta,"ud-text-with-links")},u.a.createElement(n["b"],{html:p,interpolate:{link:u.a.createElement("a",{href:h})}})))}},"./node_modules/@udemy/react-structure-components/dist/esm/error-page/error.module.css":function(e,t,r){e.exports={container:"error-module--container--B5MRV",greeting:"error-module--greeting--2EY1U",cta:"error-module--cta--2c7Xt"}},"./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);const s=e=>{let{alignment:t="right",...r}=e;const n=a.a.createElement("div",Object.assign({},r,{className:i()(r.className,"ud-footer-btns"),style:{...r.style,textAlign:t}}));return a.a.createElement(a.a.Fragment,null,n,a.a.createElement("div",{className:"ud-footer-btns-spacer"}))}},"./node_modules/@udemy/react-structure-components/dist/esm/index.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-structure-components/dist/esm/tabs/tabs.react-component.js");r.d(t,"a",(function(){return n["a"]}))},"./node_modules/@udemy/react-structure-components/dist/esm/minimal-header/minimal-header.module.css":function(e,t,r){e.exports={header:"minimal-header-module--header--3Wnmg","header-wrapper":"minimal-header-module--header-wrapper--35uKJ","marketplace-logo":"minimal-header-module--marketplace-logo--16toA"}},"./node_modules/@udemy/react-structure-components/dist/esm/minimal-header/minimal-header.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/@udemy/react-brand-components/dist/esm/logos/ufb-logo.react-component.js");var i=r("./node_modules/@udemy/react-brand-components/dist/esm/logos/logo-urls.js");var o=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var a=r("./node_modules/@udemy/ud-data/dist/esm/index.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./node_modules/@udemy/react-structure-components/dist/esm/minimal-header/minimal-header.module.css");var d=r.n(p);const h=e=>{let{progressBar:t,renderLogo:r=((e,t)=>u.a.createElement(e,t)),children:s,...c}=e;const{Config:p}=Object(a["h"])();const h=()=>{if(p.brand.has_organization){return r(n["a"],{})}return r(o["a"],{src:i["a"].udemyLogoUrl,alt:"Udemy",width:75,height:28,className:d.a["marketplace-logo"],lazy:false})};return u.a.createElement("div",{className:d.a["header-wrapper"]},u.a.createElement("div",Object.assign({},c,{className:l()(d.a.header,c.className)}),h(),s),t)}},"./node_modules/@udemy/react-structure-components/dist/esm/table/table.module.css":function(e,t,r){e.exports={container:"table-module--container--2ydBP","inverted-colors":"table-module--inverted-colors--2PUVZ","no-scroll-shadow":"table-module--no-scroll-shadow--3_x27","no-background-color":"table-module--no-background-color--3fUDC","padding-zero":"table-module--padding-zero--aijqR","padding-xxs":"table-module--padding-xxs--3tmQJ","padding-xs":"table-module--padding-xs--3Mzf5","padding-sm":"table-module--padding-sm--37B-B","padding-md":"table-module--padding-md--3LQXC","no-border":"table-module--no-border--6tZLy","sortable-header-text":"table-module--sortable-header-text--2o8zl","sortable-header-icon":"table-module--sortable-header-icon--3g6cn"}},"./node_modules/@udemy/react-structure-components/dist/esm/table/table.react-component.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return g}));r.d(t,"c",(function(){return y}));r.d(t,"d",(function(){return b}));r.d(t,"a",(function(){return v}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/i18n/dist/esm/index.js");var o=r("./node_modules/@udemy/icons/dist/expand.ud-icon");var a=r.n(o);var s=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var l=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var c=r("./node_modules/classnames/index.js");var u=r.n(c);var p=r("./node_modules/mobx-react/dist/mobx-react.module.js");var d=r("./node_modules/react/index.js");var h=r.n(d);var m=r("./node_modules/@udemy/react-structure-components/dist/esm/table/table.module.css");var f=r.n(m);const g=(e,t,r,n)=>h.a.createElement("tr",null,e.map(((e,i)=>{var o,c;const p={};const d={key:i,children:e.headerName,scope:"col","data-type":(o=e.type)!==null&&o!==void 0?o:undefined,"data-purpose":(c=e.purpose)!==null&&c!==void 0?c:undefined,style:p};if(e.width){p.width=/^\d+$/.test(e.width)?`${Object(l["c"])(e.width)}rem`:e.width}if(e.wrap===false){p.whiteSpace="nowrap"}if(r&&r.fieldName===e.fieldName){d["aria-sort"]=r.ascending?"ascending":"descending"}if(r&&e.initialSortOrder){d["data-initial-sort"]=e.initialSortOrder;d.onClick=()=>n===null||n===void 0?void 0:n(e);d.children=h.a.createElement("span",{id:`${t}-header-${i}`,className:f.a["sortable-header-text"]},d.children,h.a.createElement(s["a"],{"aria-labelledby":`${t}-header-${i}`,udStyle:"link",className:u()("ud-link-neutral",f.a["sortable-header-icon"])},h.a.createElement(a.a,{label:false,size:"small"})))}if(e.isScreenReaderOnly){d.children=h.a.createElement("span",{className:"ud-sr-only"},d.children)}return h.a.createElement("th",d)})));const y=function(e,t,r,n){let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:b;return h.a.createElement("tr",{key:n},e.map(((e,o)=>i(e,o,t,r,n))))};const b=(e,t,r,n,i)=>{var o,a;const s=e.renderMethod?e.renderMethod(n,i,r):n[e.fieldName];const l={key:t,children:s,"data-type":(o=e.type)!==null&&o!==void 0?o:null,"data-purpose":(a=e.purpose)!==null&&a!==void 0?a:null,"data-sortable":!!e.initialSortOrder||null};if(e.hasRowHeader){return h.a.createElement("th",Object.assign({},l,{scope:"row"}))}return h.a.createElement("td",l)};const v=e=>{let{columns:t,rows:r,renderHeader:o=g,renderFooter:a,renderRow:s=y,renderRowColumn:l=b,caption:c="",sortBy:m=undefined,onSort:v=undefined,noBorder:w=false,noBackgroundColor:E=false,padding:S="sm",invertedColors:_=false,scrollShadow:x=true,...D}=e;const C=Object(d["useRef"])(null);const[T]=Object(d["useState"])(Object(n["a"])("table"));const[O,k]=Object(d["useState"])(undefined);const{gettext:P}=Object(i["j"])();Object(d["useEffect"])((()=>{const{scrollWidth:e,clientWidth:t}=C.current;const r=e>t;k(r?0:undefined)}),[]);return Object(p["h"])((()=>{const e={role:"group",tabIndex:O,"aria-labelledby":""};const n={className:"ud-sr-only",children:c};if(m){const e=P("Column headers with buttons are sortable.");n.children=`${n.children} ${e}`.trim()}if(n.children){n.id=`${T}-caption`;e["aria-labelledby"]=`${T}-caption`;e.role="section"}const i=u()(D.className,f.a.container,f.a[`padding-${S}`],{[f.a["no-border"]]:w,[f.a["no-background-color"]]:E,[f.a["inverted-colors"]]:_,[f.a["no-scroll-shadow"]]:!x});return h.a.createElement("div",Object.assign({},e,{ref:C},D,{className:i}),h.a.createElement("table",null,!!n.children&&h.a.createElement("caption",n),h.a.createElement("thead",null,o(t,T,m,v)),r.length>0&&h.a.createElement("tbody",null,r.map(((e,n)=>s(t,r,e,n,l)))),a===null||a===void 0?void 0:a(t,r,T)))}))}},"./node_modules/@udemy/react-structure-components/dist/esm/tabs/tabs.module.css":function(e,t,r){e.exports={"tabs-container":"tabs-module--tabs-container--f-q9T",inverted:"tabs-module--inverted--2KxLQ","tabs-nav-buttons":"tabs-module--tabs-nav-buttons--1xMXh","nav-button-container":"tabs-module--nav-button-container--u4wUp","full-width":"tabs-module--full-width--Ce1ti","tab-content":"tabs-module--tab-content--30h0i",active:"tabs-module--active--2l5hb","pagination-buttons":"tabs-module--pagination-buttons--3X3GB",gradient:"tabs-module--gradient--1kifp","nav-button":"tabs-module--nav-button--3RilJ",xlarge:"tabs-module--xlarge--32eg7"}},"./node_modules/@udemy/react-structure-components/dist/esm/tabs/tabs.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));r.d(t,"b",(function(){return g}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var o=r("./node_modules/@udemy/i18n/dist/esm/index.js");var a=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/react/index.js");var p=r.n(u);var d=r("./node_modules/@udemy/react-structure-components/dist/esm/carousel/carousel.react-component.js");var h=r("./node_modules/@udemy/react-structure-components/dist/esm/tabs/tabs.module.css");var m=r.n(h);class f extends p.a.Component{render(){return this.props.children}}const g=Object.assign(Object(c["f"])((e=>{let{children:t=[],fullWidth:r=false,toggleStrategy:s="show-hide",size:c="large",invertedColors:h=false,prioritizeTouch:f=false,...g}=e;const[y]=Object(u["useState"])((()=>Object(n["a"])("tabs")));const b=Object(u["useRef"])(null);const v=Object(u["useRef"])(null);const[w,E]=Object(u["useState"])(false);const[S,_]=Object(u["useState"])(false);const[x,D]=Object(u["useState"])(false);const{gettext:C}=Object(o["j"])();Object(u["useEffect"])((()=>{E(true)}),[]);const T=p.a.Children.toArray(t).filter(Boolean);const O=()=>{if(!g.defaultTabId){return 0}return Math.max(0,T.findIndex((e=>e.props.id===g.defaultTabId)))};const[k,P]=Object(u["useState"])((()=>O()));const A=()=>{if(!g.activeTabId){return k}const e=T.findIndex((e=>e.props.id===g.activeTabId));return e===-1?O():e};const I=()=>{const e=b.current;return w&&!!e&&x&&!S};const j=e=>{if(e!==A()){var t;P(e);(t=g.onSelect)===null||t===void 0?void 0:t.call(g,T[e].props.id)}};const R=e=>{if(e.keyCode===i["b"].LEFT||e.keyCode===i["b"].RIGHT){var t;const r=(t=v.current)===null||t===void 0?void 0:t.querySelectorAll('[role="tab"]');if(r){const t=r[A()+(e.keyCode===i["b"].RIGHT?1:-1)];if(t){t.click();t.focus();if(I()){t.scrollIntoView()}}}}};const N=e=>{let{isLastPage:t,isPageable:r}=e;_(t);D(r)};const L=[],M=[];T.forEach(((e,t)=>{const r=A()===t;const n=`${y}-content-${t}`;const i=`${y}-tab-${t}`;const o=p.a.createElement(a["a"],{id:i,"aria-selected":r,onClick:()=>j(t),onKeyDown:R,role:"tab",size:c==="small"?"medium":"large",className:l()("ud-nav-button",m.a["nav-button"],{"ud-nav-button-active":r,[m.a.active]:r,[m.a.xlarge]:c==="xlarge"}),tabIndex:r?0:-1,udStyle:"ghost"},e.props.title);L.push(p.a.createElement("div",{key:`${y}-title-${t}`,className:l()("ud-nav-button-container",m.a["nav-button-container"],{"ud-nav-button-container-active":r,[m.a.active]:r},[m.a[c]])},e.props.renderTabButton?e.props.renderTabButton(o):o));M.push(p.a.createElement("div",{key:n,id:n,role:"tabpanel",className:l()("ud-tab-content",m.a["tab-content"],{[m.a.active]:r}),tabIndex:r?0:-1,"data-purpose":"tab-container","aria-labelledby":i},(s==="show-hide"||r)&&e.props.children))}));if(!L.length||!M.length){return null}const q=r?L:p.a.createElement(d["a"],{pagerButtonSize:c==="large"?"large":"medium",ref:b,allowScroll:f,showPager:true,pagerButtonClassName:m.a["pagination-buttons"],ariaLive:"off",gridSize:c==="xlarge"?"large":"medium",onMutation:N,ariaLabel:C("Tab Navigation")},L);const U=!r&&f&&I()?p.a.createElement("div",{"data-purpose":"tab-overflow-gradient",className:m.a.gradient}):null;return p.a.createElement("div",{className:l()(m.a["tabs-container"],{[m.a["full-width"]]:r,[m.a.inverted]:h})},p.a.createElement("div",{className:l()("ud-tabs-nav-buttons",m.a["tabs-nav-buttons"]),role:"tablist",ref:v,"data-purpose":"tab-nav-buttons"},q,U),M)})),{Tab:f,displayName:"Tabs"})},"./node_modules/@udemy/shared-utils/dist/esm/forms/serialize-form.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e){const t={};i(e).forEach((e=>{let{name:r,value:n}=e;if(typeof t[r]==="undefined"){t[r]=n}else if(Array.isArray(t[r])){t[r].push(n)}else{t[r]=[t[r],n]}}));return t}function i(e){const t=/\r?\n/g,r=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,i=/^(?:checkbox|radio)$/i;return Array.from(e.elements).filter((e=>e.name&&!e.disabled&&n.test(e.nodeName)&&!r.test(e.type)&&(e.checked||!i.test(e.type)))).map((e=>{const r=e.value;if(r===null){return null}if(Array.isArray(r)){return r.map((r=>({name:e.name,value:r.replace(t,"\r\n")})))}return{name:e.name,value:r.replace(t,"\r\n")}}))}},"./node_modules/@udemy/shared-utils/dist/esm/i18n/currency-formatter.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/currencyformatter.js/dist/currencyFormatter.js");var i=r.n(n);var o=r("./node_modules/@udemy/shared-utils/dist/esm/data/get-config-data.js");const a="usd";const s="en_US";const l=2;function c(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const r=Object(o["a"])();t=Object.assign({currency:a,symbol:"$",locale:s,decimal:".",group:",",pattern:"!#,##0.00",scale:l},r.price_country.currency_formatter,t);if(!(t.locale in i.a.locales)){t.locale=t.locale.substring(0,2)}if(!(t.locale in i.a.locales)){t.locale="en_US"}t.pattern=t.pattern.replace(".00",`.${new Array(t.scale+1).join("0")}`);e=+(+e).toFixed(t.scale);return i.a.format(e,t)}},"./node_modules/@udemy/shared-utils/dist/esm/react/autopilot.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/hoist-non-react-statics/dist/hoist-non-react-statics.cjs.js");var u=r.n(c);var p=r("./node_modules/mobx/lib/mobx.module.js");var d=r("./node_modules/mobx-react/dist/mobx-react.module.js");var h=r("./node_modules/prop-types/index.js");var m=r.n(h);var f=r("./node_modules/react/index.js");var g=r.n(f);var y=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/noop.js");function b(e,t){return function(r){var n,o,s,l;let c=Object(d["f"])(n=(o=class n extends g.a.Component{constructor(){super(...arguments);i()(this,"value",s,this);i()(this,"onChange",l,this)}componentDidUpdate(t){if(t[e]===undefined&&this.props[e]!==undefined||t[e]!==undefined&&this.props[e]===undefined){throw new Error("Controlled components should not switch to become uncontrolled, or vice versa.")}}get isControlled(){return this.props[e]!==undefined}render(){const{forwardedRef:n,...i}=this.props;const o={...i,[e]:this.isControlled?i[e]:this.value,[t]:this.isControlled?i[t]:this.onChange};const a=r;return g.a.createElement(a,Object.assign({},o,{ref:n}))}},s=a()(o.prototype,"value",[p["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return undefined}}),l=a()(o.prototype,"onChange",[p["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){var e=this;return function(r){var n,i;if(!e.isControlled){e.value=r}for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++){a[s-1]=arguments[s]}(n=(i=e.props)[t])===null||n===void 0?void 0:n.call(i,r,...a)}}}),o))||n;const h=g.a.forwardRef(((e,t)=>g.a.createElement(c,Object.assign({},e,{forwardedRef:t}))));return Object.assign(u()(h,r),{displayName:`WithAutopilot(${r.displayName||r.name||"Component"})`,defaultProps:{...Object.entries(r.defaultProps||{}).reduce(((t,r)=>{let[n,i]=r;if(n!==e){t[n]=i}return t}),{}),...{[t]:y["a"]}},propTypes:{...r.propTypes,[t]:m.a.func},wrappedComponent:r})}}},"./node_modules/@udemy/shared-utils/dist/esm/react/error-boundary.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));r.d(t,"b",(function(){return b}));var n=r("./node_modules/@babel/runtime/helpers/initializerDefineProperty.js");var i=r.n(n);var o=r("./node_modules/@babel/runtime/helpers/applyDecoratedDescriptor.js");var a=r.n(o);var s=r("./node_modules/@babel/runtime/helpers/initializerWarningHelper.js");var l=r.n(s);var c=r("./node_modules/mobx/lib/mobx.module.js");var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/react/index.js");var d=r.n(p);var h,m,f,g;let y=Object(u["f"])(h=(m=class e extends p["Component"]{constructor(){super(...arguments);i()(this,"error",f,this);i()(this,"info",g,this)}componentDidCatch(e,t){var r,n;this.setErrorState(e,t);(r=(n=this.props).captureException)===null||r===void 0?void 0:r.call(n,e)}setErrorState(e,t){this.error=e;this.info=t}render(){return this.error?null:this.props.children}},f=a()(m.prototype,"error",[c["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),g=a()(m.prototype,"info",[c["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),a()(m.prototype,"setErrorState",[c["e"]],Object.getOwnPropertyDescriptor(m.prototype,"setErrorState"),m.prototype),m))||h;function b(e,t){var r;const n=d.a.forwardRef(((r,n)=>d.a.createElement(y,{captureException:t},d.a.createElement(e,Object.assign({ref:n},r)))));n.displayName=`WithErrorBoundary(${(r=e.displayName)!==null&&r!==void 0?r:e.name})`;return n}},"./node_modules/@xmldom/xmldom/lib/conventions.js":function(e,t,r){"use strict";function n(e,t){if(t===undefined){t=Object}return t&&typeof t.freeze==="function"?t.freeze(e):e}var i=n({HTML:"text/html",isHTML:function(e){return e===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"});var o=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.freeze=n;t.MIME_TYPE=i;t.NAMESPACE=o},"./node_modules/@xmldom/xmldom/lib/dom-parser.js":function(e,t,r){var n=r("./node_modules/@xmldom/xmldom/lib/conventions.js");var i=r("./node_modules/@xmldom/xmldom/lib/dom.js");var o=r("./node_modules/@xmldom/xmldom/lib/entities.js");var a=r("./node_modules/@xmldom/xmldom/lib/sax.js");var s=i.DOMImplementation;var l=n.NAMESPACE;var c=a.ParseError;var u=a.XMLReader;function p(e){this.options=e||{locator:{}}}p.prototype.parseFromString=function(e,t){var r=this.options;var n=new u;var i=r.domBuilder||new h;var a=r.errorHandler;var s=r.locator;var c=r.xmlns||{};var p=/\/x?html?$/.test(t);var m=p?o.HTML_ENTITIES:o.XML_ENTITIES;if(s){i.setDocumentLocator(s)}n.errorHandler=d(a,i,s);n.domBuilder=r.domBuilder||i;if(p){c[""]=l.HTML}c.xml=c.xml||l.XML;if(e&&typeof e==="string"){n.parse(e,c,m)}else{n.errorHandler.error("invalid doc source")}return i.doc};function d(e,t,r){if(!e){if(t instanceof h){return t}e=t}var n={};var i=e instanceof Function;r=r||{};function o(t){var o=e[t];if(!o&&i){o=e.length==2?function(r){e(t,r)}:e}n[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+f(r))}||function(){}}o("warning");o("error");o("fatalError");return n}function h(){this.cdata=false}function m(e,t){t.lineNumber=e.lineNumber;t.columnNumber=e.columnNumber}h.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId}},startElement:function(e,t,r,n){var i=this.doc;var o=i.createElementNS(e,r||t);var a=n.length;y(this,o);this.currentElement=o;this.locator&&m(this.locator,o);for(var s=0;s<a;s++){var e=n.getURI(s);var l=n.getValue(s);var r=n.getQName(s);var c=i.createAttributeNS(e,r);this.locator&&m(n.getLocator(s),c);c.value=c.nodeValue=l;o.setAttributeNode(c)}},endElement:function(e,t,r){var n=this.currentElement;var i=n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&m(this.locator,r);y(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){e=g.apply(this,arguments);if(e){if(this.cdata){var n=this.doc.createCDATASection(e)}else{var n=this.doc.createTextNode(e)}if(this.currentElement){this.currentElement.appendChild(n)}else if(/^\s*$/.test(e)){this.doc.appendChild(n)}this.locator&&m(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){if(this.locator=e){e.lineNumber=0}},comment:function(e,t,r){e=g.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&m(this.locator,n);y(this,n)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&m(this.locator,i);y(this,i);this.doc.doctype=i}},warning:function(e){console.warn("[xmldom warning]\t"+e,f(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,f(this.locator))},fatalError:function(e){throw new c(e,this.locator)}};function f(e){if(e){return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}}function g(e,t,r){if(typeof e=="string"){return e.substr(t,r)}else{if(e.length>=t+r||t){return new java.lang.String(e,t,r)+""}return e}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){h.prototype[e]=function(){return null}}));function y(e,t){if(!e.currentElement){e.doc.appendChild(t)}else{e.currentElement.appendChild(t)}}t.__DOMHandler=h;t.DOMParser=p;t.DOMImplementation=i.DOMImplementation;t.XMLSerializer=i.XMLSerializer},"./node_modules/@xmldom/xmldom/lib/dom.js":function(e,t,r){var n=r("./node_modules/@xmldom/xmldom/lib/conventions.js");var i=n.NAMESPACE;function o(e){return e!==""}function a(e){return e?e.split(/[\t\n\f\r ]+/).filter(o):[]}function s(e,t){if(!e.hasOwnProperty(t)){e[t]=true}return e}function l(e){if(!e)return[];var t=a(e);return Object.keys(t.reduce(s,{}))}function c(e){return function(t){return e&&e.indexOf(t)!==-1}}function u(e,t){for(var r in e){t[r]=e[r]}}function p(e,t){var r=e.prototype;if(!(r instanceof t)){function n(){}n.prototype=t.prototype;n=new n;u(r,n);e.prototype=r=n}if(r.constructor!=e){if(typeof e!="function"){console.error("unknown Class:"+e)}r.constructor=e}}var d={};var h=d.ELEMENT_NODE=1;var m=d.ATTRIBUTE_NODE=2;var f=d.TEXT_NODE=3;var g=d.CDATA_SECTION_NODE=4;var y=d.ENTITY_REFERENCE_NODE=5;var b=d.ENTITY_NODE=6;var v=d.PROCESSING_INSTRUCTION_NODE=7;var w=d.COMMENT_NODE=8;var E=d.DOCUMENT_NODE=9;var S=d.DOCUMENT_TYPE_NODE=10;var _=d.DOCUMENT_FRAGMENT_NODE=11;var x=d.NOTATION_NODE=12;var D={};var C={};var T=D.INDEX_SIZE_ERR=(C[1]="Index size error",1);var O=D.DOMSTRING_SIZE_ERR=(C[2]="DOMString size error",2);var k=D.HIERARCHY_REQUEST_ERR=(C[3]="Hierarchy request error",3);var P=D.WRONG_DOCUMENT_ERR=(C[4]="Wrong document",4);var A=D.INVALID_CHARACTER_ERR=(C[5]="Invalid character",5);var I=D.NO_DATA_ALLOWED_ERR=(C[6]="No data allowed",6);var j=D.NO_MODIFICATION_ALLOWED_ERR=(C[7]="No modification allowed",7);var R=D.NOT_FOUND_ERR=(C[8]="Not found",8);var N=D.NOT_SUPPORTED_ERR=(C[9]="Not supported",9);var L=D.INUSE_ATTRIBUTE_ERR=(C[10]="Attribute in use",10);var M=D.INVALID_STATE_ERR=(C[11]="Invalid state",11);var q=D.SYNTAX_ERR=(C[12]="Syntax error",12);var U=D.INVALID_MODIFICATION_ERR=(C[13]="Invalid modification",13);var H=D.NAMESPACE_ERR=(C[14]="Invalid namespace",14);var F=D.INVALID_ACCESS_ERR=(C[15]="Invalid access",15);function B(e,t){if(t instanceof Error){var r=t}else{r=this;Error.call(this,C[e]);this.message=C[e];if(Error.captureStackTrace)Error.captureStackTrace(this,B)}r.code=e;if(t)this.message=this.message+": "+t;return r}B.prototype=Error.prototype;u(D,B);function z(){}z.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++){_e(this[n],r,e,t)}return r.join("")}};function V(e,t){this._node=e;this._refresh=t;W(this)}function W(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);Ce(e,"length",r.length);u(r,e);e._inc=t}}V.prototype.item=function(e){W(this);return this[e]};p(V,z);function G(){}function K(e,t){var r=e.length;while(r--){if(e[r]===t){return r}}}function $(e,t,r,n){if(n){t[K(t,n)]=r}else{t[t.length++]=r}if(e){r.ownerElement=e;var i=e.ownerDocument;if(i){n&&re(i,e,n);te(i,e,r)}}}function X(e,t,r){var n=K(t,r);if(n>=0){var i=t.length-1;while(n<i){t[n]=t[++n]}t.length=i;if(e){var o=e.ownerDocument;if(o){re(o,e,r);r.ownerElement=null}}}else{throw B(R,new Error(e.tagName+"@"+r))}}G.prototype={length:0,item:z.prototype.item,getNamedItem:function(e){var t=this.length;while(t--){var r=this[t];if(r.nodeName==e){return r}}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement){throw new B(L)}var r=this.getNamedItem(e.nodeName);$(this._ownerElement,this,e,r);return r},setNamedItemNS:function(e){var t=e.ownerElement,r;if(t&&t!=this._ownerElement){throw new B(L)}r=this.getNamedItemNS(e.namespaceURI,e.localName);$(this._ownerElement,this,e,r);return r},removeNamedItem:function(e){var t=this.getNamedItem(e);X(this._ownerElement,this,t);return t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);X(this._ownerElement,this,r);return r},getNamedItemNS:function(e,t){var r=this.length;while(r--){var n=this[r];if(n.localName==t&&n.namespaceURI==e){return n}}return null}};function Y(){}Y.prototype={hasFeature:function(e,t){return true},createDocument:function(e,t,r){var n=new ee;n.implementation=this;n.childNodes=new z;n.doctype=r||null;if(r){n.appendChild(r)}if(t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new he;n.name=e;n.nodeName=e;n.publicId=t||"";n.systemId=r||"";return n}};function Q(){}Q.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return oe(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t);if(t){this.removeChild(t)}},removeChild:function(e){return ie(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return De(this.ownerDocument||this,this,e)},normalize:function(){var e=this.firstChild;while(e){var t=e.nextSibling;if(t&&t.nodeType==f&&e.nodeType==f){this.removeChild(t);e.appendData(t.data)}else{e.normalize();e=t}}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){var t=this;while(t){var r=t._nsMap;if(r){for(var n in r){if(r[n]==e){return n}}}t=t.nodeType==m?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){var t=this;while(t){var r=t._nsMap;if(r){if(e in r){return r[e]}}t=t.nodeType==m?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null}};function J(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}u(d,Q);u(d,Q.prototype);function Z(e,t){if(t(e)){return true}if(e=e.firstChild){do{if(Z(e,t)){return true}}while(e=e.nextSibling)}}function ee(){}function te(e,t,r){e&&e._inc++;var n=r.namespaceURI;if(n===i.XMLNS){t._nsMap[r.prefix?r.localName:""]=r.value}}function re(e,t,r,n){e&&e._inc++;var o=r.namespaceURI;if(o===i.XMLNS){delete t._nsMap[r.prefix?r.localName:""]}}function ne(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r){n[n.length++]=r}else{var i=t.firstChild;var o=0;while(i){n[o++]=i;i=i.nextSibling}n.length=o}}}function ie(e,t){var r=t.previousSibling;var n=t.nextSibling;if(r){r.nextSibling=n}else{e.firstChild=n}if(n){n.previousSibling=r}else{e.lastChild=r}ne(e.ownerDocument,e);return t}function oe(e,t,r){var n=t.parentNode;if(n){n.removeChild(t)}if(t.nodeType===_){var i=t.firstChild;if(i==null){return t}var o=t.lastChild}else{i=o=t}var a=r?r.previousSibling:e.lastChild;i.previousSibling=a;o.nextSibling=r;if(a){a.nextSibling=i}else{e.firstChild=i}if(r==null){e.lastChild=o}else{r.previousSibling=o}do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));ne(e.ownerDocument||e,e);if(t.nodeType==_){t.firstChild=t.lastChild=null}return t}function ae(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t);var n=e.lastChild}var n=e.lastChild;t.parentNode=e;t.previousSibling=n;t.nextSibling=null;if(n){n.nextSibling=t}else{e.firstChild=t}e.lastChild=t;ne(e.ownerDocument,e,t);return t}ee.prototype={nodeName:"#document",nodeType:E,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==_){var r=e.firstChild;while(r){var n=r.nextSibling;this.insertBefore(r,t);r=n}return e}if(this.documentElement==null&&e.nodeType==h){this.documentElement=e}return oe(this,e,t),e.ownerDocument=this,e},removeChild:function(e){if(this.documentElement==e){this.documentElement=null}return ie(this,e)},importNode:function(e,t){return xe(this,e,t)},getElementById:function(e){var t=null;Z(this.documentElement,(function(r){if(r.nodeType==h){if(r.getAttribute("id")==e){t=r;return true}}}));return t},getElementsByClassName:function(e){var t=l(e);return new V(this,(function(r){var n=[];if(t.length>0){Z(r.documentElement,(function(i){if(i!==r&&i.nodeType===h){var o=i.getAttribute("class");if(o){var a=e===o;if(!a){var s=l(o);a=t.every(c(s))}if(a){n.push(i)}}}}))}return n}))},createElement:function(e){var t=new se;t.ownerDocument=this;t.nodeName=e;t.tagName=e;t.localName=e;t.childNodes=new z;var r=t.attributes=new G;r._ownerElement=t;return t},createDocumentFragment:function(){var e=new ye;e.ownerDocument=this;e.childNodes=new z;return e},createTextNode:function(e){var t=new ue;t.ownerDocument=this;t.appendData(e);return t},createComment:function(e){var t=new pe;t.ownerDocument=this;t.appendData(e);return t},createCDATASection:function(e){var t=new de;t.ownerDocument=this;t.appendData(e);return t},createProcessingInstruction:function(e,t){var r=new be;r.ownerDocument=this;r.tagName=r.target=e;r.nodeValue=r.data=t;return r},createAttribute:function(e){var t=new le;t.ownerDocument=this;t.name=e;t.nodeName=e;t.localName=e;t.specified=true;return t},createEntityReference:function(e){var t=new ge;t.ownerDocument=this;t.nodeName=e;return t},createElementNS:function(e,t){var r=new se;var n=t.split(":");var i=r.attributes=new G;r.childNodes=new z;r.ownerDocument=this;r.nodeName=t;r.tagName=t;r.namespaceURI=e;if(n.length==2){r.prefix=n[0];r.localName=n[1]}else{r.localName=t}i._ownerElement=r;return r},createAttributeNS:function(e,t){var r=new le;var n=t.split(":");r.ownerDocument=this;r.nodeName=t;r.name=t;r.namespaceURI=e;r.specified=true;if(n.length==2){r.prefix=n[0];r.localName=n[1]}else{r.localName=t}return r}};p(ee,Q);function se(){this._nsMap={}}se.prototype={nodeType:h,hasAttribute:function(e){return this.getAttributeNode(e)!=null},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t;this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){if(e.nodeType===_){return this.insertBefore(e,null)}else{return ae(this,e)}},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r;this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new V(this,(function(t){var r=[];Z(t,(function(n){if(n!==t&&n.nodeType==h&&(e==="*"||n.tagName==e)){r.push(n)}}));return r}))},getElementsByTagNameNS:function(e,t){return new V(this,(function(r){var n=[];Z(r,(function(i){if(i!==r&&i.nodeType===h&&(e==="*"||i.namespaceURI===e)&&(t==="*"||i.localName==t)){n.push(i)}}));return n}))}};ee.prototype.getElementsByTagName=se.prototype.getElementsByTagName;ee.prototype.getElementsByTagNameNS=se.prototype.getElementsByTagNameNS;p(se,Q);function le(){}le.prototype.nodeType=m;p(le,Q);function ce(){}ce.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e;this.nodeValue=this.data=e;this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(C[k])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){var n=this.data.substring(0,e);var i=this.data.substring(e+t);r=n+r+i;this.nodeValue=this.data=r;this.length=r.length}};p(ce,Q);function ue(){}ue.prototype={nodeName:"#text",nodeType:f,splitText:function(e){var t=this.data;var r=t.substring(e);t=t.substring(0,e);this.data=this.nodeValue=t;this.length=t.length;var n=this.ownerDocument.createTextNode(r);if(this.parentNode){this.parentNode.insertBefore(n,this.nextSibling)}return n}};p(ue,ce);function pe(){}pe.prototype={nodeName:"#comment",nodeType:w};p(pe,ce);function de(){}de.prototype={nodeName:"#cdata-section",nodeType:g};p(de,ce);function he(){}he.prototype.nodeType=S;p(he,Q);function me(){}me.prototype.nodeType=x;p(me,Q);function fe(){}fe.prototype.nodeType=b;p(fe,Q);function ge(){}ge.prototype.nodeType=y;p(ge,Q);function ye(){}ye.prototype.nodeName="#document-fragment";ye.prototype.nodeType=_;p(ye,Q);function be(){}be.prototype.nodeType=v;p(be,Q);function ve(){}ve.prototype.serializeToString=function(e,t,r){return we.call(e,t,r)};Q.prototype.toString=we;function we(e,t){var r=[];var n=this.nodeType==9&&this.documentElement||this;var i=n.prefix;var o=n.namespaceURI;if(o&&i==null){var i=n.lookupPrefix(o);if(i==null){var a=[{namespace:o,prefix:null}]}}_e(this,r,e,t,a);return r.join("")}function Ee(e,t,r){var n=e.prefix||"";var o=e.namespaceURI;if(!o){return false}if(n==="xml"&&o===i.XML||o===i.XMLNS){return false}var a=r.length;while(a--){var s=r[a];if(s.prefix===n){return s.namespace!==o}}return true}function Se(e,t,r){e.push(" ",t,'="',r.replace(/[<&"]/g,J),'"')}function _e(e,t,r,n,o){if(!o){o=[]}if(n){e=n(e);if(e){if(typeof e=="string"){t.push(e);return}}else{return}}switch(e.nodeType){case h:var a=e.attributes;var s=a.length;var l=e.firstChild;var c=e.tagName;r=i.isHTML(e.namespaceURI)||r;var u=c;if(!r&&!e.prefix&&e.namespaceURI){var p;for(var d=0;d<a.length;d++){if(a.item(d).name==="xmlns"){p=a.item(d).value;break}}if(!p){for(var b=o.length-1;b>=0;b--){var x=o[b];if(x.prefix===""&&x.namespace===e.namespaceURI){p=x.namespace;break}}}if(p!==e.namespaceURI){for(var b=o.length-1;b>=0;b--){var x=o[b];if(x.namespace===e.namespaceURI){if(x.prefix){u=x.prefix+":"+c}break}}}}t.push("<",u);for(var D=0;D<s;D++){var C=a.item(D);if(C.prefix=="xmlns"){o.push({prefix:C.localName,namespace:C.value})}else if(C.nodeName=="xmlns"){o.push({prefix:"",namespace:C.value})}}for(var D=0;D<s;D++){var C=a.item(D);if(Ee(C,r,o)){var T=C.prefix||"";var O=C.namespaceURI;Se(t,T?"xmlns:"+T:"xmlns",O);o.push({prefix:T,namespace:O})}_e(C,t,r,n,o)}if(c===u&&Ee(e,r,o)){var T=e.prefix||"";var O=e.namespaceURI;Se(t,T?"xmlns:"+T:"xmlns",O);o.push({prefix:T,namespace:O})}if(l||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){t.push(">");if(r&&/^script$/i.test(c)){while(l){if(l.data){t.push(l.data)}else{_e(l,t,r,n,o.slice())}l=l.nextSibling}}else{while(l){_e(l,t,r,n,o.slice());l=l.nextSibling}}t.push("</",u,">")}else{t.push("/>")}return;case E:case _:var l=e.firstChild;while(l){_e(l,t,r,n,o.slice());l=l.nextSibling}return;case m:return Se(t,e.name,e.value);case f:return t.push(e.data.replace(/[<&]/g,J).replace(/]]>/g,"]]&gt;"));case g:return t.push("<![CDATA[",e.data,"]]>");case w:return t.push("\x3c!--",e.data,"--\x3e");case S:var k=e.publicId;var P=e.systemId;t.push("<!DOCTYPE ",e.name);if(k){t.push(" PUBLIC ",k);if(P&&P!="."){t.push(" ",P)}t.push(">")}else if(P&&P!="."){t.push(" SYSTEM ",P,">")}else{var A=e.internalSubset;if(A){t.push(" [",A,"]")}t.push(">")}return;case v:return t.push("<?",e.target," ",e.data,"?>");case y:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function xe(e,t,r){var n;switch(t.nodeType){case h:n=t.cloneNode(false);n.ownerDocument=e;case _:break;case m:r=true;break}if(!n){n=t.cloneNode(false)}n.ownerDocument=e;n.parentNode=null;if(r){var i=t.firstChild;while(i){n.appendChild(xe(e,i,r));i=i.nextSibling}}return n}function De(e,t,r){var n=new t.constructor;for(var i in t){var o=t[i];if(typeof o!="object"){if(o!=n[i]){n[i]=o}}}if(t.childNodes){n.childNodes=new z}n.ownerDocument=e;switch(n.nodeType){case h:var a=t.attributes;var s=n.attributes=new G;var l=a.length;s._ownerElement=n;for(var c=0;c<l;c++){n.setAttributeNode(De(e,a.item(c),true))}break;case m:r=true}if(r){var u=t.firstChild;while(u){n.appendChild(De(e,u,r));u=u.nextSibling}}return n}function Ce(e,t,r){e[t]=r}try{if(Object.defineProperty){Object.defineProperty(V.prototype,"length",{get:function(){W(this);return this.$$length}});Object.defineProperty(Q.prototype,"textContent",{get:function(){return Te(this)},set:function(e){switch(this.nodeType){case h:case _:while(this.firstChild){this.removeChild(this.firstChild)}if(e||String(e)){this.appendChild(this.ownerDocument.createTextNode(e))}break;default:this.data=e;this.value=e;this.nodeValue=e}}});function Te(e){switch(e.nodeType){case h:case _:var t=[];e=e.firstChild;while(e){if(e.nodeType!==7&&e.nodeType!==8){t.push(Te(e))}e=e.nextSibling}return t.join("");default:return e.nodeValue}}Ce=function(e,t,r){e["$$"+t]=r}}}catch(e){}t.DocumentType=he;t.DOMException=B;t.DOMImplementation=Y;t.Element=se;t.Node=Q;t.NodeList=z;t.XMLSerializer=ve},"./node_modules/@xmldom/xmldom/lib/entities.js":function(e,t,r){var n=r("./node_modules/@xmldom/xmldom/lib/conventions.js").freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});t.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"});t.entityMap=t.HTML_ENTITIES},"./node_modules/@xmldom/xmldom/lib/index.js":function(e,t,r){var n=r("./node_modules/@xmldom/xmldom/lib/dom.js");t.DOMImplementation=n.DOMImplementation;t.XMLSerializer=n.XMLSerializer;t.DOMParser=r("./node_modules/@xmldom/xmldom/lib/dom-parser.js").DOMParser},"./node_modules/@xmldom/xmldom/lib/sax.js":function(e,t,r){var n=r("./node_modules/@xmldom/xmldom/lib/conventions.js").NAMESPACE;var i=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var o=new RegExp("[\\-\\.0-9"+i.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var a=new RegExp("^"+i.source+o.source+"*(?::"+i.source+o.source+"*)?$");var s=0;var l=1;var c=2;var u=3;var p=4;var d=5;var h=6;var m=7;function f(e,t){this.message=e;this.locator=t;if(Error.captureStackTrace)Error.captureStackTrace(this,f)}f.prototype=new Error;f.prototype.name=f.name;function g(){}g.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument();_(t,t={});y(e,t,r,n,this.errorHandler);n.endDocument()}};function y(e,t,r,i,o){function a(e){if(e>65535){e-=65536;var t=55296+(e>>10),r=56320+(e&1023);return String.fromCharCode(t,r)}else{return String.fromCharCode(e)}}function s(e){var t=e.slice(1,-1);if(t in r){return r[t]}else if(t.charAt(0)==="#"){return a(parseInt(t.substr(1).replace("x","0x")))}else{o.error("entity not found:"+e);return e}}function l(t){if(t>y){var r=e.substring(y,t).replace(/&#?\w+;/g,s);h&&c(y);i.characters(r,0,t-y);y=t}}function c(t,r){while(t>=p&&(r=d.exec(e))){u=r.index;p=u+r[0].length;h.lineNumber++}h.columnNumber=t-u+1}var u=0;var p=0;var d=/.*(?:\r\n?|\n)|.*$/g;var h=i.locator;var m=[{currentNSMap:t}];var g={};var y=0;while(true){try{var _=e.indexOf("<",y);if(_<0){if(!e.substr(y).match(/^\s*$/)){var T=i.doc;var O=T.createTextNode(e.substr(y));T.appendChild(O);i.currentElement=O}return}if(_>y){l(_)}switch(e.charAt(_+1)){case"/":var k=e.indexOf(">",_+3);var P=e.substring(_+2,k).replace(/[ \t\n\r]+$/g,"");var A=m.pop();if(k<0){P=e.substring(_+2).replace(/[\s<].*/,"");o.error("end tag name: "+P+" is not complete:"+A.tagName);k=_+1+P.length}else if(P.match(/\s</)){P=P.replace(/[\s<].*/,"");o.error("end tag name: "+P+" maybe not complete");k=_+1+P.length}var I=A.localNSMap;var j=A.tagName==P;var R=j||A.tagName&&A.tagName.toLowerCase()==P.toLowerCase();if(R){i.endElement(A.uri,A.localName,P);if(I){for(var N in I){i.endPrefixMapping(N)}}if(!j){o.fatalError("end tag name: "+P+" is not match the current start tagName:"+A.tagName)}}else{m.push(A)}k++;break;case"?":h&&c(_);k=D(e,_,i);break;case"!":h&&c(_);k=x(e,_,i,o);break;default:h&&c(_);var L=new C;var M=m[m.length-1].currentNSMap;var k=v(e,_,L,M,s,o);var q=L.length;if(!L.closed&&S(e,k,L.tagName,g)){L.closed=true;if(!r.nbsp){o.warning("unclosed xml attribute")}}if(h&&q){var U=b(h,{});for(var H=0;H<q;H++){var F=L[H];c(F.offset);F.locator=b(h,{})}i.locator=U;if(w(L,i,M)){m.push(L)}i.locator=h}else{if(w(L,i,M)){m.push(L)}}if(n.isHTML(L.uri)&&!L.closed){k=E(e,k,L.tagName,s,i)}else{k++}}}catch(e){if(e instanceof f){throw e}o.error("element parse error: "+e);k=-1}if(k>y){y=k}else{l(Math.max(_,y)+1)}}}function b(e,t){t.lineNumber=e.lineNumber;t.columnNumber=e.columnNumber;return t}function v(e,t,r,i,o,a){function f(e,t,n){if(r.attributeNames.hasOwnProperty(e)){a.fatalError("Attribute "+e+" redefined")}r.addValue(e,t,n)}var g;var y;var b=++t;var v=s;while(true){var w=e.charAt(b);switch(w){case"=":if(v===l){g=e.slice(t,b);v=u}else if(v===c){v=u}else{throw new Error("attribute equal must after attrName")}break;case"'":case'"':if(v===u||v===l){if(v===l){a.warning('attribute value must after "="');g=e.slice(t,b)}t=b+1;b=e.indexOf(w,t);if(b>0){y=e.slice(t,b).replace(/&#?\w+;/g,o);f(g,y,t-1);v=d}else{throw new Error("attribute value no end '"+w+"' match")}}else if(v==p){y=e.slice(t,b).replace(/&#?\w+;/g,o);f(g,y,t);a.warning('attribute "'+g+'" missed start quot('+w+")!!");t=b+1;v=d}else{throw new Error('attribute value must after "="')}break;case"/":switch(v){case s:r.setTagName(e.slice(t,b));case d:case h:case m:v=m;r.closed=true;case p:case l:case c:break;default:throw new Error("attribute invalid close char('/')")}break;case"":a.error("unexpected end of input");if(v==s){r.setTagName(e.slice(t,b))}return b;case">":switch(v){case s:r.setTagName(e.slice(t,b));case d:case h:case m:break;case p:case l:y=e.slice(t,b);if(y.slice(-1)==="/"){r.closed=true;y=y.slice(0,-1)}case c:if(v===c){y=g}if(v==p){a.warning('attribute "'+y+'" missed quot(")!');f(g,y.replace(/&#?\w+;/g,o),t)}else{if(!n.isHTML(i[""])||!y.match(/^(?:disabled|checked|selected)$/i)){a.warning('attribute "'+y+'" missed value!! "'+y+'" instead!!')}f(y,y,t)}break;case u:throw new Error("attribute value missed!!")}return b;case"":w=" ";default:if(w<=" "){switch(v){case s:r.setTagName(e.slice(t,b));v=h;break;case l:g=e.slice(t,b);v=c;break;case p:var y=e.slice(t,b).replace(/&#?\w+;/g,o);a.warning('attribute "'+y+'" missed quot(")!!');f(g,y,t);case d:v=h;break}}else{switch(v){case c:var E=r.tagName;if(!n.isHTML(i[""])||!g.match(/^(?:disabled|checked|selected)$/i)){a.warning('attribute "'+g+'" missed value!! "'+g+'" instead2!!')}f(g,g,t);t=b;v=l;break;case d:a.warning('attribute space is required"'+g+'"!!');case h:v=l;t=b;break;case u:v=p;t=b;break;case m:throw new Error("elements closed character '/' and '>' must be connected to")}}}b++}}function w(e,t,r){var i=e.tagName;var o=null;var a=e.length;while(a--){var s=e[a];var l=s.qName;var c=s.value;var u=l.indexOf(":");if(u>0){var p=s.prefix=l.slice(0,u);var d=l.slice(u+1);var h=p==="xmlns"&&d}else{d=l;p=null;h=l==="xmlns"&&""}s.localName=d;if(h!==false){if(o==null){o={};_(r,r={})}r[h]=o[h]=c;s.uri=n.XMLNS;t.startPrefixMapping(h,c)}}var a=e.length;while(a--){s=e[a];var p=s.prefix;if(p){if(p==="xml"){s.uri=n.XML}if(p!=="xmlns"){s.uri=r[p||""]}}}var u=i.indexOf(":");if(u>0){p=e.prefix=i.slice(0,u);d=e.localName=i.slice(u+1)}else{p=null;d=e.localName=i}var m=e.uri=r[p||""];t.startElement(m,d,i,e);if(e.closed){t.endElement(m,d,i);if(o){for(p in o){t.endPrefixMapping(p)}}}else{e.currentNSMap=r;e.localNSMap=o;return true}}function E(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t);var a=e.substring(t+1,o);if(/[&<]/.test(a)){if(/^script$/i.test(r)){i.characters(a,0,a.length);return o}a=a.replace(/&#?\w+;/g,n);i.characters(a,0,a.length);return o}}return t+1}function S(e,t,r,n){var i=n[r];if(i==null){i=e.lastIndexOf("</"+r+">");if(i<t){i=e.lastIndexOf("</"+r)}n[r]=i}return i<t}function _(e,t){for(var r in e){t[r]=e[r]}}function x(e,t,r,n){var i=e.charAt(t+2);switch(i){case"-":if(e.charAt(t+3)==="-"){var o=e.indexOf("--\x3e",t+4);if(o>t){r.comment(e,t+4,o-t-4);return o+3}else{n.error("Unclosed comment");return-1}}else{return-1}default:if(e.substr(t+3,6)=="CDATA["){var o=e.indexOf("]]>",t+9);r.startCDATA();r.characters(e,t+9,o-t-9);r.endCDATA();return o+3}var a=T(e,t);var s=a.length;if(s>1&&/!doctype/i.test(a[0][0])){var l=a[1][0];var c=false;var u=false;if(s>3){if(/^public$/i.test(a[2][0])){c=a[3][0];u=s>4&&a[4][0]}else if(/^system$/i.test(a[2][0])){u=a[3][0]}}var p=a[s-1];r.startDTD(l,c,u);r.endDTD();return p.index+p[0].length}}return-1}function D(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var o=i[0].length;r.processingInstruction(i[1],i[2]);return n+2}else{return-1}}return-1}function C(){this.attributeNames={}}C.prototype={setTagName:function(e){if(!a.test(e)){throw new Error("invalid tagName:"+e)}this.tagName=e},addValue:function(e,t,r){if(!a.test(e)){throw new Error("invalid attribute:"+e)}this.attributeNames[e]=this.length;this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};function T(e,t){var r;var n=[];var i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t;i.exec(e);while(r=i.exec(e)){n.push(r);if(r[1])return n}}t.XMLReader=g;t.ParseError=f},"./node_modules/autosize/dist/autosize.js":function(e,t,r){var n,i,o;(function(r,a){if(true){!(i=[t,e],n=a,o=typeof n==="function"?n.apply(t,i):n,o!==undefined&&(e.exports=o))}else{var s}})(this,(function(e,t){"use strict";var r=typeof Map==="function"?new Map:function(){var e=[];var t=[];return{has:function t(r){return e.indexOf(r)>-1},get:function r(n){return t[e.indexOf(n)]},set:function r(n,i){if(e.indexOf(n)===-1){e.push(n);t.push(i)}},delete:function r(n){var i=e.indexOf(n);if(i>-1){e.splice(i,1);t.splice(i,1)}}}}();var n=function e(t){return new Event(t,{bubbles:true})};try{new Event("test")}catch(e){n=function(e){var t=document.createEvent("Event");t.initEvent(e,true,false);return t}}function i(e){if(!e||!e.nodeName||e.nodeName!=="TEXTAREA"||r.has(e))return;var t=null;var i=e.clientWidth;var o=null;function a(){var r=window.getComputedStyle(e,null);if(r.resize==="vertical"){e.style.resize="none"}else if(r.resize==="both"){e.style.resize="horizontal"}if(r.boxSizing==="content-box"){t=-(parseFloat(r.paddingTop)+parseFloat(r.paddingBottom))}else{t=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth)}if(isNaN(t)){t=0}u()}function s(t){{var r=e.style.width;e.style.width="0px";e.offsetWidth;e.style.width=r}e.style.overflowY=t}function l(e){var t=[];while(e&&e.parentNode&&e.parentNode instanceof Element){if(e.parentNode.scrollTop){t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop})}e=e.parentNode}return t}function c(){var r=e.style.height;var n=l(e);var o=document.documentElement&&document.documentElement.scrollTop;e.style.height="auto";var a=e.scrollHeight+t;if(e.scrollHeight===0){e.style.height=r;return}e.style.height=a+"px";i=e.clientWidth;n.forEach((function(e){e.node.scrollTop=e.scrollTop}));if(o){document.documentElement.scrollTop=o}}function u(){c();var t=Math.round(parseFloat(e.style.height));var r=window.getComputedStyle(e,null);var i=Math.round(parseFloat(r.height));if(i!==t){if(r.overflowY!=="visible"){s("visible");c();i=Math.round(parseFloat(window.getComputedStyle(e,null).height))}}else{if(r.overflowY!=="hidden"){s("hidden");c();i=Math.round(parseFloat(window.getComputedStyle(e,null).height))}}if(o!==i){o=i;var a=n("autosize:resized");try{e.dispatchEvent(a)}catch(e){}}}var p=function t(){if(e.clientWidth!==i){u()}};var d=function(t){window.removeEventListener("resize",p,false);e.removeEventListener("input",u,false);e.removeEventListener("keyup",u,false);e.removeEventListener("autosize:destroy",d,false);e.removeEventListener("autosize:update",u,false);Object.keys(t).forEach((function(r){e.style[r]=t[r]}));r["delete"](e)}.bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",d,false);if("onpropertychange"in e&&"oninput"in e){e.addEventListener("keyup",u,false)}window.addEventListener("resize",p,false);e.addEventListener("input",u,false);e.addEventListener("autosize:update",u,false);e.style.overflowX="hidden";e.style.wordWrap="break-word";r.set(e,{destroy:d,update:u});a()}function o(e){var t=r.get(e);if(t){t.destroy()}}function a(e){var t=r.get(e);if(t){t.update()}}var s=null;if(typeof window==="undefined"||typeof window.getComputedStyle!=="function"){s=function(e){return e};s.destroy=function(e){return e};s.update=function(e){return e}}else{s=function(e,t){if(e){Array.prototype.forEach.call(e.length?e:[e],(function(e){return i(e,t)}))}return e};s.destroy=function(e){if(e){Array.prototype.forEach.call(e.length?e:[e],o)}return e};s.update=function(e){if(e){Array.prototype.forEach.call(e.length?e:[e],a)}return e}}t.exports=s}))},"./node_modules/clipboard/dist/clipboard.js":function(e,t,r){(function t(r,n){if(true)e.exports=n();else{}})(this,(function(){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=e;r.c=t;r.i=function(e){return e};r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:n})}};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=3)}([function(e,t,r){var n,i,o;(function(a,s){if(true){!(i=[e,r(7)],n=s,o=typeof n==="function"?n.apply(t,i):n,o!==undefined&&(e.exports=o))}else{var l}})(this,(function(e,t){"use strict";var r=n(t);function n(e){return e&&e.__esModule?e:{default:e}}var i=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var s=function(){function e(t){o(this,e);this.resolveOptions(t);this.initSelection()}a(e,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=t.action;this.container=t.container;this.emitter=t.emitter;this.target=t.target;this.text=t.text;this.trigger=t.trigger;this.selectedText=""}},{key:"initSelection",value:function e(){if(this.text){this.selectFake()}else if(this.target){this.selectTarget()}}},{key:"selectFake",value:function e(){var t=this;var n=document.documentElement.getAttribute("dir")=="rtl";this.removeFake();this.fakeHandlerCallback=function(){return t.removeFake()};this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||true;this.fakeElem=document.createElement("textarea");this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[n?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;this.container.appendChild(this.fakeElem);this.selectedText=(0,r.default)(this.fakeElem);this.copyText()}},{key:"removeFake",value:function e(){if(this.fakeHandler){this.container.removeEventListener("click",this.fakeHandlerCallback);this.fakeHandler=null;this.fakeHandlerCallback=null}if(this.fakeElem){this.container.removeChild(this.fakeElem);this.fakeElem=null}}},{key:"selectTarget",value:function e(){this.selectedText=(0,r.default)(this.target);this.copyText()}},{key:"copyText",value:function e(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=false}this.handleResult(t)}},{key:"handleResult",value:function e(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function e(){if(this.trigger){this.trigger.focus()}window.getSelection().removeAllRanges()}},{key:"destroy",value:function e(){this.removeFake()}},{key:"action",set:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"copy";this._action=t;if(this._action!=="copy"&&this._action!=="cut"){throw new Error('Invalid "action" value, use either "copy" or "cut"')}},get:function e(){return this._action}},{key:"target",set:function e(t){if(t!==undefined){if(t&&(typeof t==="undefined"?"undefined":i(t))==="object"&&t.nodeType===1){if(this.action==="copy"&&t.hasAttribute("disabled")){throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute')}if(this.action==="cut"&&(t.hasAttribute("readonly")||t.hasAttribute("disabled"))){throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}this._target=t}else{throw new Error('Invalid "target" value, use a valid Element')}}},get:function e(){return this._target}}]);return e}();e.exports=s}))},function(e,t,r){var n=r(6);var i=r(5);function o(e,t,r){if(!e&&!t&&!r){throw new Error("Missing required arguments")}if(!n.string(t)){throw new TypeError("Second argument must be a String")}if(!n.fn(r)){throw new TypeError("Third argument must be a Function")}if(n.node(e)){return a(e,t,r)}else if(n.nodeList(e)){return s(e,t,r)}else if(n.string(e)){return l(e,t,r)}else{throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}}function a(e,t,r){e.addEventListener(t,r);return{destroy:function(){e.removeEventListener(t,r)}}}function s(e,t,r){Array.prototype.forEach.call(e,(function(e){e.addEventListener(t,r)}));return{destroy:function(){Array.prototype.forEach.call(e,(function(e){e.removeEventListener(t,r)}))}}}function l(e,t,r){return i(document.body,e,t,r)}e.exports=o},function(e,t){function r(){}r.prototype={on:function(e,t,r){var n=this.e||(this.e={});(n[e]||(n[e]=[])).push({fn:t,ctx:r});return this},once:function(e,t,r){var n=this;function i(){n.off(e,i);t.apply(r,arguments)}i._=t;return this.on(e,i,r)},emit:function(e){var t=[].slice.call(arguments,1);var r=((this.e||(this.e={}))[e]||[]).slice();var n=0;var i=r.length;for(n;n<i;n++){r[n].fn.apply(r[n].ctx,t)}return this},off:function(e,t){var r=this.e||(this.e={});var n=r[e];var i=[];if(n&&t){for(var o=0,a=n.length;o<a;o++){if(n[o].fn!==t&&n[o].fn._!==t)i.push(n[o])}}i.length?r[e]=i:delete r[e];return this}};e.exports=r},function(e,t,r){var n,i,o;(function(a,s){if(true){!(i=[e,r(0),r(2),r(1)],n=s,o=typeof n==="function"?n.apply(t,i):n,o!==undefined&&(e.exports=o))}else{var l}})(this,(function(e,t,r,n){"use strict";var i=s(t);var o=s(r);var a=s(n);function s(e){return e&&e.__esModule?e:{default:e}}var l=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h=function(e){d(t,e);function t(e,r){c(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.resolveOptions(r);n.listenClick(e);return n}u(t,[{key:"resolveOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.action=typeof t.action==="function"?t.action:this.defaultAction;this.target=typeof t.target==="function"?t.target:this.defaultTarget;this.text=typeof t.text==="function"?t.text:this.defaultText;this.container=l(t.container)==="object"?t.container:document.body}},{key:"listenClick",value:function e(t){var r=this;this.listener=(0,a.default)(t,"click",(function(e){return r.onClick(e)}))}},{key:"onClick",value:function e(t){var r=t.delegateTarget||t.currentTarget;if(this.clipboardAction){this.clipboardAction=null}this.clipboardAction=new i.default({action:this.action(r),target:this.target(r),text:this.text(r),container:this.container,trigger:r,emitter:this})}},{key:"defaultAction",value:function e(t){return m("action",t)}},{key:"defaultTarget",value:function e(t){var r=m("target",t);if(r){return document.querySelector(r)}}},{key:"defaultText",value:function e(t){return m("text",t)}},{key:"destroy",value:function e(){this.listener.destroy();if(this.clipboardAction){this.clipboardAction.destroy();this.clipboardAction=null}}}],[{key:"isSupported",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["copy","cut"];var r=typeof t==="string"?[t]:t;var n=!!document.queryCommandSupported;r.forEach((function(e){n=n&&!!document.queryCommandSupported(e)}));return n}}]);return t}(o.default);function m(e,t){var r="data-clipboard-"+e;if(!t.hasAttribute(r)){return}return t.getAttribute(r)}e.exports=h}))},function(e,t){var r=9;if(typeof Element!=="undefined"&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}function i(e,t){while(e&&e.nodeType!==r){if(typeof e.matches==="function"&&e.matches(t)){return e}e=e.parentNode}}e.exports=i},function(e,t,r){var n=r(4);function i(e,t,r,n,i){var o=a.apply(this,arguments);e.addEventListener(r,o,i);return{destroy:function(){e.removeEventListener(r,o,i)}}}function o(e,t,r,n,o){if(typeof e.addEventListener==="function"){return i.apply(null,arguments)}if(typeof r==="function"){return i.bind(null,document).apply(null,arguments)}if(typeof e==="string"){e=document.querySelectorAll(e)}return Array.prototype.map.call(e,(function(e){return i(e,t,r,n,o)}))}function a(e,t,r,i){return function(r){r.delegateTarget=n(r.target,t);if(r.delegateTarget){i.call(e,r)}}}e.exports=o},function(e,t){t.node=function(e){return e!==undefined&&e instanceof HTMLElement&&e.nodeType===1};t.nodeList=function(e){var r=Object.prototype.toString.call(e);return e!==undefined&&(r==="[object NodeList]"||r==="[object HTMLCollection]")&&"length"in e&&(e.length===0||t.node(e[0]))};t.string=function(e){return typeof e==="string"||e instanceof String};t.fn=function(e){var t=Object.prototype.toString.call(e);return t==="[object Function]"}},function(e,t){function r(e){var t;if(e.nodeName==="SELECT"){e.focus();t=e.value}else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var r=e.hasAttribute("readonly");if(!r){e.setAttribute("readonly","")}e.select();e.setSelectionRange(0,e.value.length);if(!r){e.removeAttribute("readonly")}t=e.value}else{if(e.hasAttribute("contenteditable")){e.focus()}var n=window.getSelection();var i=document.createRange();i.selectNodeContents(e);n.removeAllRanges();n.addRange(i);t=n.toString()}return t}e.exports=r}])}))},"./node_modules/filepicker-js/dist/filepicker.js":function(module,exports,__webpack_require__){"use strict";(function(){var e=function(){var e={};var t=function(t,r,n){var i=t.split(".");for(var o=0;o<i.length-1;o++){if(!n[i[o]]){n[i[o]]={}}n=n[i[o]]}if(typeof r==="function"){if(r.isClass){n[i[o]]=r}else{n[i[o]]=function(){return r.apply(e,arguments)}}}else{n[i[o]]=r}};var r=function(r,n,i){t(r,n,e);if(i){t(r,n,window.filepicker)}};var n=function(t,n,i){if(typeof t==="function"){i=n;n=t;t=""}if(t){t+="."}var o=n.call(e);for(var a in o){r(t+a,o[a],i)}};var i=function(t){t.apply(e,arguments)};return{extend:n,internal:i}}();if(!window.filepicker){window.filepicker=e}else{for(var t in e){window.filepicker[t]=e[t]}}})();"use strict";filepicker.extend("comm",(function(){var e=this;var t="filepicker_comm_iframe";var r="fpapi_comm_iframe";var n=function(){if(window.frames[t]===undefined){a();var n;n=document.createElement("iframe");n.id=n.name=t;n.src=e.urls.COMM;n.style.display="none";document.body.appendChild(n)}if(window.frames[r]===undefined){a();var i;i=document.createElement("iframe");i.id=i.name=r;i.src=e.urls.API_COMM;i.style.display="none";document.body.appendChild(i)}};var i=function(t){if(t.origin!==e.urls.BASE&&t.origin!==e.urls.DIALOG_BASE){return}try{var r=e.json.parse(t.data)}catch(e){console.log("[Filepicker] Failed processing message:",t.data)}if(r){e.handlers.run(r)}};var o=false;var a=function(){if(o){return}else{o=true}if(window.addEventListener){window.addEventListener("message",i,false)}else if(window.attachEvent){window.attachEvent("onmessage",i)}else{throw new e.FilepickerException("Unsupported browser")}};var s=function(){if(window.removeEventListener){window.removeEventListener("message",i,false)}else if(window.attachEvent){window.detachEvent("onmessage",i)}else{throw new e.FilepickerException("Unsupported browser")}if(!o){return}else{o=false}var n=document.getElementsByName(t);for(var a=0;a<n.length;a++){n[a].parentNode.removeChild(n[a])}try{delete window.frames[t]}catch(e){}var s=document.getElementsByName(r);for(var l=0;l<s.length;l++){s[l].parentNode.removeChild(s[l])}try{delete window.frames[r]}catch(e){}};return{openChannel:n,closeChannel:s}}));"use strict";filepicker.extend("comm_fallback",(function(){var e=this;var t="filepicker_comm_iframe";var r="host_comm_iframe";var n="";var i=200;var o=function(){a()};var a=function(){if(window.frames[r]===undefined){var t;t=document.createElement("iframe");t.id=t.name=r;n=t.src=e.urls.constructHostCommFallback();t.style.display="none";var i=function(){n=t.contentWindow.location.href;s()};if(t.attachEvent){t.attachEvent("onload",i)}else{t.onload=i}document.body.appendChild(t)}};var s=function(){if(window.frames[t]===undefined){var r;r=document.createElement("iframe");r.id=r.name=t;r.src=e.urls.FP_COMM_FALLBACK+"?host_url="+encodeURIComponent(n);r.style.display="none";document.body.appendChild(r)}d()};var l=false;var c;var u="";var p=function(){var n=window.frames[t];if(!n){return}var i=n.frames[r];if(!i){return}var o=i.location.hash;if(o&&o.charAt(0)==="#"){o=o.substr(1)}if(o===u){return}u=o;if(!u){return}var a;try{a=e.json.parse(o)}catch(e){}if(a){e.handlers.run(a)}};var d=function(){if(l){return}else{l=true}c=window.setInterval(p,i)};var h=function(){window.clearInterval(c);if(!l){return}else{l=false}var e=document.getElementsByName(t);for(var n=0;n<e.length;n++){e[n].parentNode.removeChild(e[n])}try{delete window.frames[t]}catch(e){}e=document.getElementsByName(r);for(n=0;n<e.length;n++){e[n].parentNode.removeChild(e[n])}try{delete window.frames[r]}catch(e){}};var m=!("postMessage"in window);var f=function(e){if(e!==m){m=!!e;if(m){y()}else{b()}}};var g;var y=function(){g=e.comm;e.comm={openChannel:o,closeChannel:h}};var b=function(){e.comm=g;g=undefined};if(m){y()}return{openChannel:o,closeChannel:h,isEnabled:m}}));"use strict";filepicker.extend("cookies",(function(){var e=this;var t=function(t){var r=function(r){if(r.type!=="ThirdPartyCookies"){return}e.cookies.THIRD_PARTY_COOKIES=!!r.payload;if(t&&typeof t==="function"){t(!!r.payload)}};return r};var r=function(r){var n=t(r);e.handlers.attach("cookies",n);e.comm.openChannel()};return{checkThirdParty:r}}));"use strict";filepicker.extend("handlers",(function(){var e=this;var t={};var r=function(e,r){if(t.hasOwnProperty(e)){t[e].push(r)}else{t[e]=[r]}return r};var n=function(e,r){var n=t[e];if(!n){return}if(r){for(var i=0;i<n.length;i++){if(n[i]===r){n.splice(i,1);break}}if(n.length===0){delete t[e]}}else{delete t[e]}};var i=function(e){if(e==null||e.id==null){return false}var r=e.id;if(t.hasOwnProperty(r)){var n=t[r];for(var i=0;i<n.length;i++){n[i](e)}return true}return false};return{attach:r,detach:n,run:i}}));"use strict";filepicker.extend("exporter",(function(){var e=this;var t=function(t){var r=function(r,n,i){if(t[n]&&!e.util.isArray(t[n])){t[n]=[t[n]]}else if(t[r]){t[n]=[t[r]]}else if(i){t[n]=i}};if(t.mimetype&&t.extension){throw e.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the export function")}r("service","services");if(t.services){for(var n=0;n<t.services.length;n++){var i=(""+t.services[n]).replace(" ","");var o=e.services[i];t.services[n]=o===undefined?i:o}}if(t.openTo){t.openTo=e.services[t.openTo]||t.openTo}e.util.setDefault(t,"container",e.browser.openInModal()?"modal":"window")};var r=function(t,r){var n=function(n){if(n.type!=="filepickerUrl"){return}if(n.error){e.util.console.error(n.error);r(e.errors.FPError(132))}else{var i={};i.url=n.payload.url;i.filename=n.payload.data.filename;i.mimetype=n.payload.data.type;i.size=n.payload.data.size;i.client=n.payload.data.client;i.isWriteable=true;t(i)}e.modal.close()};return n};var n=function(i,o,a,s){t(o);var l={close:function(){e.modal.close()}};if(o.debug){setTimeout((function(){a({id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"})}),1);return l}if(e.cookies.THIRD_PARTY_COOKIES===undefined){var c=false;e.cookies.checkThirdParty((function(){if(!c){n(i,o,a,s);c=true}}));return l}var u=e.util.getId();var p=false;var d=function(e){p=true;a(e)};var h=function(e){p=true;s(e)};var m=function(){if(!p){p=true;s(e.errors.FPError(131))}};e.window.open(o.container,e.urls.constructExportUrl(i,o,u),m);e.handlers.attach(u,r(d,h));return l};return{createExporter:n}}));"use strict";filepicker.extend("modal",(function(){var e=this,t="filepicker_shade",r="filepicker_dialog_container";var n=h();if(n){var i=n.style.overflow}var o=function(t,r){d();var n=a(r),i=s(),o=l(r),c=document.createElement("iframe");c.name=e.window.WINDOW_NAME;c.id=e.window.WINDOW_NAME;c.style.width="100%";c.style.height="100%";c.style.border="none";c.style.position="relative";c.setAttribute("border",0);c.setAttribute("frameborder",0);c.setAttribute("frameBorder",0);c.setAttribute("marginwidth",0);c.setAttribute("marginheight",0);c.src=t;i.appendChild(c);n.appendChild(o);n.appendChild(i);document.body.appendChild(n);var u=h();if(u){u.style.overflow="hidden"}return c};var a=function(e){var r=document.createElement("div");r.id=t;r.className="fp__overlay";r.onclick=c(e);return r};var s=function(){var e=document.createElement("div");e.id=r;e.className="fp__container";return e};var l=function(e){var t=document.createElement("div");t.className="fp__close";var r=document.createElement("a");r.appendChild(document.createTextNode("X"));t.appendChild(r);r.onclick=c(e);document.onkeydown=function(t){t=t||window.event;if(t.keyCode===27){c(e)()}};return t};var c=function(n,i){i=!!i;return function(){if(e.uploading&&!i){if(!window.confirm('You are currently uploading. If you choose "OK", the window will close and your upload will not finish. Do you want to stop uploading and close the window?')){return}}e.uploading=false;document.onkeydown=null;p();var o=document.getElementById(t);if(o){document.body.removeChild(o)}var a=document.getElementById(r);if(a){document.body.removeChild(a)}try{delete window.frames[e.window.WINDOW_NAME]}catch(e){}if(n){n()}}};function u(){var e=document.getElementById(t);if(e){e.hidden=true}var n=document.getElementById(r);if(n){n.hidden=true}p()}function p(){var e=h();if(e){e.style.overflow=i}}function d(){var e=".fp__overlay {top: 0;right: 0;bottom: 0;left: 0;z-index: 1000;background: rgba(0, 0, 0, 0.8);}"+".fp__close {top: 104px; right: 108px; width: 35px; height: 35px; z-index: 20; cursor: pointer}"+"@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__close {top: 15px; right: 12px;}}"+".fp__close a {text-indent: -9999px; overflow: hidden; display: block; width: 100%; height: 100%; background: url(https://d1zyh3sbxittvg.cloudfront.net/close.png) 50% 50% no-repeat;}"+".fp__close a:hover {background-color: rgba(0,0,0, .02); opacity: .8;}"+"@media screen and (max-width: 768px), screen and (max-height: 500px) {top: 14px; right: 14px;}"+".fp__copy {display: none;}"+".fp__container {-webkit-overflow-scrolling: touch; overflow: hidden; min-height: 300px; top: 100px;right: 100px;bottom: 100px;left: 100px;background: #eee; box-sizing:content-box; -webkit-box-sizing:content-box; -moz-box-sizing:content-box;}"+"@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy {bottom: 0; left: 0; right: 0; height: 20px; background: #333;}}"+"@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__copy a {margin-left: 5px;}}"+"@media screen and (max-width: 768px), screen and (max-height: 500px) {.fp__container {top: 0;right: 0;bottom: 0;left: 0;}}"+".fp__overlay, .fp__close, .fp__copy, .fp__container {position: fixed;}";var t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(document.createTextNode(e))}t.appendChild(r)}function h(){try{return document.getElementsByTagName("html")[0]}catch(e){return null}}var m=c((function(){}));return{generate:o,close:m,hide:u}}));"use strict";filepicker.extend("picker",(function(){var e=this;var t=function(t){var r=function(r,n,i){if(t[n]){if(!e.util.isArray(t[n])){t[n]=[t[n]]}}else if(t[r]){t[n]=[t[r]]}else if(i){t[n]=i}};r("service","services");r("mimetype","mimetypes");r("extension","extensions");if(t.services){for(var n=0;n<t.services.length;n++){var i=(""+t.services[n]).replace(" ","");if(e.services[i]!==undefined){i=e.services[i]}t.services[n]=i}}if(t.mimetypes&&t.extensions){throw e.FilepickerException("Error: Cannot pass in both mimetype and extension parameters to the pick function")}if(!t.mimetypes&&!t.extensions){t.mimetypes=["*/*"]}if(t.openTo){t.openTo=e.services[t.openTo]||t.openTo}e.util.setDefault(t,"container",e.browser.openInModal()?"modal":"window")};var r=function(t,r,n){var i=function(i){if(c(i,n)){return}e.uploading=false;if(i.error){e.util.console.error(i.error);if(i.error.code){r(e.errors.FPError(i.error.code))}else{r(e.errors.FPError(102));e.modal.close()}}else{var o=a(i.payload);t(o);e.modal.close()}};return i};var n=function(t,r,n){var i=function(i){if(c(i,n)){return}e.uploading=false;if(i.error){e.util.console.error(i.error);r(e.errors.FPError(102))}else{i.payload.data.url=i.payload.url;t(i.payload.data)}e.modal.close()};return i};var i=function(t){t=t||function(){};var r=function(r){if(r.type!=="uploading"){return}e.uploading=!!r.payload;t(e.uploading)};return r};var o=function(e,t,r){if(e[r]){t[r]=e[r]}};var a=function(e){var t={};var r=e.url;if(r&&r.url){r=r.url}t.url=r;var n=e.url.data||e.data;t.filename=n.filename;t.mimetype=n.type;t.size=n.size;if(n.cropped!==undefined){t.cropped=n.cropped}if(n.rotated!==undefined){t.rotated=n.rotated}if(n.converted!==undefined){t.converted=n.converted}o(n,t,"id");o(n,t,"key");o(n,t,"container");o(n,t,"path");o(n,t,"client");t.isWriteable=true;return t};var s=function(t,r,n){var i=function(i){if(c(i,n)){return}e.uploading=false;if(i.error){e.util.console.error(i.error);r(e.errors.FPError(102))}else{var o=[];if(!e.util.isArray(i.payload)){i.payload=[i.payload]}for(var s=0;s<i.payload.length;s++){var l=a(i.payload[s]);o.push(l)}t(o)}e.modal.close()};return i};var l=function(o,a,c,u,p,d,h){t(o);var m={close:function(){e.modal.close()}};if(o.debug){var f={id:1,url:"https://www.filepicker.io/api/file/-nBq2onTSemLBxlcBWn1",filename:"test.png",mimetype:"image/png",size:58979,client:"computer"};var g;if(u||o.storeLocation){g=[f,f,f]}else{g=f}setTimeout((function(){a(g)}),1);return m}if(e.cookies.THIRD_PARTY_COOKIES===undefined){var y=false;e.cookies.checkThirdParty((function(){if(!y){l(o,a,c,!!u,p,d);y=true}}));return m}var b=e.util.getId();var v=false;var w=function(e){if(o.container==="window"){window.onbeforeunload=null}v=true;a(e)};var E=function(e){v=true;c(e)};var S=function(){if(!v){v=true;c(e.errors.FPError(101))}};var _;var x;if(h){_=e.urls.constructConvertUrl(o,b);x=r(w,E,d)}else if(u){_=e.urls.constructPickUrl(o,b,true);x=s(w,E,d)}else if(p){_=e.urls.constructPickFolderUrl(o,b);x=n(w,E,d)}else{_=e.urls.constructPickUrl(o,b,false);x=r(w,E,d)}e.window.open(o.container,_,S);e.handlers.attach(b,x);var D=b+"-upload";e.handlers.attach(D,i((function(){e.handlers.detach(D)})));return m};function c(t,r){if(t.type==="filepickerProgress"){e.uploading=true;if(r){r(t.payload.data)}}else if(t.type==="notUploading"){e.uploading=false}else if(t.type==="closeModal"){e.modal.close()}else if(t.type==="hideModal"){e.modal.hide()}else if(t.type==="filepickerUrl"||t.type==="serverHttpError"){return false}return true}return{createPicker:l}}));"use strict";filepicker.extend("window",(function(){var e=this;var t={OPEN:"/dialog/open/",SAVEAS:"/dialog/save/"};var r="filepicker_dialog";var n="left=100,top=100,height=600,width=800,menubar=no,toolbar=no,location=no,personalbar=no,status=no,resizable=yes,scrollbars=yes,dependent=yes,dialog=yes";var i=100;var o=function(t,o,a){a=a||function(){};if(!t&&e.browser.openInModal()){t="modal"}else if(!t){t="window"}if(t==="window"){var s=r+e.util.getId();window.onbeforeunload=function e(){return"Filepicker upload does not complete."};var l=window.open(o,s,n);if(!l){window.onbeforeunload=null;window.alert("Please disable your popup blocker to upload files.")}var c=window.setInterval((function(){if(!l||l.closed){window.onbeforeunload=null;window.clearInterval(c);a()}}),i)}else if(t==="modal"){e.modal.generate(o,a)}else{var u=document.getElementById(t);if(!u){throw new e.FilepickerException('Container "'+t+'" not found. This should either be set to "window","modal", or the ID of an iframe that is currently in the document.')}u.src=o}};return{open:o,WINDOW_NAME:r}}));"use strict";filepicker.extend("conversions",(function(){var e=this;var t={align:"string",blurAmount:"number",crop:"string or array",crop_first:"boolean",compress:"boolean",exif:"string or boolean",filter:"string",fit:"string",format:"string",height:"number",policy:"string",quality:"number",page:"number",rotate:"string or number",secure:"boolean",sharpenAmount:"number",signature:"string",storeAccess:"string",storeContainer:"string",storeRegion:"string",storeLocation:"string",storePath:"string",text:"string",text_align:"string",text_color:"string",text_font:"string",text_padding:"number",text_size:"number",watermark:"string",watermark_position:"string",watermark_size:"number",width:"number"};var r={w:"width",h:"height"};var n=function(e){var n={};for(var i in e){n[r[i]||i]=e[i];if(t[r[i]||i]==="number"){n[r[i]||i]=Number(e[i])}}return n};var i=function(r){var n;for(var i in r){n=false;for(var o in t){if(i===o){n=true;if(t[o].indexOf(e.util.typeOf(r[i]))===-1){throw new e.FilepickerException("Conversion parameter "+i+" is not the right type: "+r[i]+". Should be a "+t[o])}}}if(!n){throw new e.FilepickerException("Conversion parameter "+i+" is not a valid parameter.")}}};var o=function(t,r,n,o,a){i(r);if(r.crop&&e.util.isArray(r.crop)){r.crop=r.crop.join(",")}e.ajax.post(t+"/convert",{data:r,json:true,success:function(t){n(e.util.standardizeFPFile(t))},error:function(t,r,n){if(t==="not_found"){o(new e.errors.FPError(141))}else if(t==="bad_params"){o(new e.errors.FPError(142))}else if(t==="not_authorized"){o(new e.errors.FPError(403))}else{o(new e.errors.FPError(143))}},progress:a})};return{convert:o,mapRestParams:n}}));"use strict";filepicker.extend("errors",(function(){var e=this;var t=function(e){if(this===window){return new t(e)}this.code=e;if(filepicker.debug){var r=filepicker.error_map[this.code];this.message=r.message;this.moreInfo=r.moreInfo;this.toString=function(){return"FPError "+this.code+": "+this.message+". For help, see "+this.moreInfo}}else{this.toString=function(){return"FPError "+this.code+". Include filepicker_debug.js for more info"}}return this};t.isClass=true;var r=function(t){if(filepicker.debug){e.util.console.error(t.toString())}};return{FPError:t,handleError:r}}),true);"use strict";filepicker.extend((function(){var e=this,t="2.4.18";e.API_VERSION="v2";var r=function(t){e.apikey=t};var n=function(e){this.text=e;this.toString=function(){return"FilepickerException: "+this.text};return this};n.isClass=true;var i=function(t,r,n,i){e.util.checkApiKey();if(typeof t==="function"){n=r;r=t;t={}}t=t||{};r=r||function(){};n=n||e.errors.handleError;return e.picker.createPicker(t,r,n,false,false,i)};var o=function(t,r,n,i){e.util.checkApiKey();if(typeof t==="function"){i=n;n=r;r=t;t={}}t=t||{};r=r||function(){};n=n||e.errors.handleError;return e.picker.createPicker(t,r,n,true,false,i)};var a=function(t,r,n,i,o){e.util.checkApiKey();if(!t||!r||typeof t==="function"||typeof t==="function"){throw new e.FilepickerException("Not all required parameters given, missing picker or store options")}i=i||e.errors.handleError;var a=!!t.multiple;var s=!!t?e.util.clone(t):{};s.storeLocation=r.location||"S3";s.storePath=r.path;s.storeContainer=r.storeContainer||r.container;s.storeRegion=r.storeRegion;s.storeAccess=r.access||"private";if(a&&s.storePath){if(s.storePath.charAt(s.storePath.length-1)!=="/"){throw new e.FilepickerException("pickAndStore with multiple files requires a path that ends in "/"")}}var l=n;if(!a){l=function(e){n([e])}}return e.picker.createPicker(s,l,i,a,false,o)};var s=function(t,r,n,i){e.util.checkApiKey();if(typeof t==="function"){n=r;r=t;t={}}t=t||{};r=r||function(){};n=n||e.errors.handleError;return e.picker.createPicker(t,r,n,false,true,i)};var l=function(t,r,n,i,o){e.util.checkApiKey();if(!t){throw new e.FilepickerException("No input given - nothing to read!")}if(typeof r==="function"){o=i;i=n;n=r;r={}}r=r||{};n=n||function(){};i=i||e.errors.handleError;o=o||function(){};if(typeof t==="string"){if(e.util.isFPUrl(t)){e.files.readFromFPUrl(t,r,n,i,o)}else{e.files.readFromUrl(t,r,n,i,o)}}else if(e.util.isFileInputElement(t)){if(!t.files){c(t,r,n,i,o)}else if(t.files.length===0){i(new e.errors.FPError(115))}else{e.files.readFromFile(t.files[0],r,n,i,o)}}else if(e.util.isFile(t)){e.files.readFromFile(t,r,n,i,o)}else if(t.url){e.files.readFromFPUrl(t.url,r,n,i,o)}else{throw new e.FilepickerException("Cannot read given input: "+t+". Not a url, file input, DOM File, or FPFile object.")}};var c=function(t,r,n,i,o){o(10);e.store(t,(function(t){o(50);e.read(t,r,n,i,(function(e){o(50+e/2)}))}),i)};var u=function(t,r,n,i,o,a){e.util.checkApiKey();if(!t){throw new e.FilepickerException("No fpfile given - nothing to write to!")}if(r===undefined||r===null){throw new e.FilepickerException("No input given - nothing to write!")}if(typeof n==="function"){a=o;o=i;i=n;n={}}n=n||{};i=i||function(){};o=o||e.errors.handleError;a=a||function(){};var s;if(e.util.isFPUrl(e.util.getFPUrl(t))){s=t}else if(t.url){s=t.url}else{throw new e.FilepickerException("Invalid file to write to: "+t+". Not a filepicker url or FPFile object.")}s=e.util.trimConvert(e.util.getFPUrl(s));if(typeof r==="string"){e.files.writeDataToFPUrl(s,r,n,i,o,a)}else{if(e.util.isFileInputElement(r)){if(!r.files){e.files.writeFileInputToFPUrl(s,r,n,i,o,a)}else if(r.files.length===0){o(new e.errors.FPError(115))}else{e.files.writeFileToFPUrl(s,r.files[0],n,i,o,a)}}else if(e.util.isFile(r)){e.files.writeFileToFPUrl(s,r,n,i,o,a)}else if(r.url){e.files.writeUrlToFPUrl(s,r.url,n,i,o,a)}else{throw new e.FilepickerException("Cannot read from given input: "+r+". Not a string, file input, DOM File, or FPFile object.")}}};var p=function(t,r,n,i,o,a){e.util.checkApiKey();if(!t){throw new e.FilepickerException("No fpfile given - nothing to write to!")}if(r===undefined||r===null){throw new e.FilepickerException("No input given - nothing to write!")}if(typeof n==="function"){a=o;o=i;i=n;n={}}n=n||{};i=i||function(){};o=o||e.errors.handleError;a=a||function(){};var s;if(e.util.isFPUrl(e.util.getFPUrl(t))){s=t}else if(t.url){s=t.url}else{throw new e.FilepickerException("Invalid file to write to: "+t+". Not a filepicker url or FPFile object.")}s=e.util.getFPUrl(s);e.files.writeUrlToFPUrl(e.util.trimConvert(s),r,n,i,o,a)};var d=function(t,r,n,i){e.util.checkApiKey();if(typeof r==="function"){i=n;n=r;r={}}r=!!r?e.util.clone(r):{};n=n||function(){};i=i||e.errors.handleError;var o;if(typeof t==="string"&&e.util.isUrl(t)){o=t}else if(t.url){o=t.url;if(!r.mimetype&&!r.extension){r.mimetype=t.mimetype}if(!r.suggestedFilename){r.suggestedFilename=t.filename}}else{throw new e.FilepickerException("Invalid file to export: "+t+". Not a valid url or FPFile object. You may want to use filepicker.store() to get an FPFile to export")}if(r.suggestedFilename){r.suggestedFilename=encodeURI(r.suggestedFilename)}return e.exporter.createExporter(o,r,n,i)};var h=function(t,r,n,i,o){var a;e.util.checkApiKey();if(typeof r==="function"){i=n;n=r;r={}}r=r||{};n=n||function(){};i=i||e.errors.handleError;if(typeof t==="string"){a=t}else if(t.url){a=t.url;if(!r.filename){r.filename=t.filename}}else{throw new e.FilepickerException("Invalid file to convert: "+t+". Not a valid url or FPFile object or not filepicker url. You can convert only filepicker url images.")}r.convertUrl=a;r.multiple=false;r.services=["CONVERT","COMPUTER"];r.backgroundUpload=true;r.hide=false;return e.picker.createPicker(r,n,i,false,false,o,true)};var m=function(t,r,n,i,o){e.util.checkApiKey();if(typeof r==="function"){o=i;i=n;n=r;r={}}r=!!r?e.util.clone(r):{};n=n||function(){};i=i||e.errors.handleError;o=o||function(){};if(typeof t==="string"){e.files.storeData(t,r,n,i,o)}else{if(e.util.isFileInputElement(t)){if(!t.files){e.files.storeFileInput(t,r,n,i,o)}else if(t.files.length===0){i(new e.errors.FPError(115))}else{e.files.storeFile(t.files[0],r,n,i,o)}}else if(e.util.isFile(t)){e.files.storeFile(t,r,n,i,o)}else if(t.url){if(!r.filename){r.filename=t.filename}e.files.storeUrl(t.url,r,n,i,o)}else{throw new e.FilepickerException("Cannot store given input: "+t+". Not a string, file input, DOM File, or FPFile object.")}}};var f=function(t,r,n,i,o){e.util.checkApiKey();if(typeof r==="function"){o=i;i=n;n=r;r={}}r=r||{};n=n||function(){};i=i||e.errors.handleError;o=o||function(){};e.files.storeUrl(t,r,n,i,o)};var g=function(t,r,n,i){e.util.checkApiKey();if(typeof r==="function"){i=n;n=r;r={}}r=r||{};n=n||function(){};i=i||e.errors.handleError;var o;if(e.util.isFPUrl(e.util.getFPUrl(t))){o=t}else if(t.url){o=t.url}else{throw new e.FilepickerException("Invalid file to get metadata for: "+t+". Not a filepicker url or FPFile object.")}o=e.util.getFPUrl(o);e.files.stat(e.util.trimConvert(o),r,n,i)};var y=function(t,r,n,i){e.util.checkApiKey();if(typeof r==="function"){i=n;n=r;r={}}r=r||{};n=n||function(){};i=i||e.errors.handleError;var o;if(e.util.isFPUrl(e.util.getFPUrl(t))){o=t}else if(t.url){o=t.url}else{throw new e.FilepickerException("Invalid file to remove: "+t+". Not a filepicker url or FPFile object.")}o=e.util.getFPUrl(o);e.files.remove(e.util.trimConvert(o),r,n,i)};var b=function(t,r,n,i,o,a){e.util.checkApiKey();if(!t){throw new e.FilepickerException("No fpfile given - nothing to convert!")}if(typeof n==="function"){a=o;o=i;i=n;n={}}var s=!!r?e.util.clone(r):{};n=n||{};i=i||function(){};o=o||e.errors.handleError;a=a||function(){};if(n.location){s.storeLocation=n.location}if(n.path){s.storePath=n.path}if(n.container){s.storeContainer=n.container}s.storeAccess=n.access||"private";var l;if(e.util.isFPUrl(e.util.getFPUrl(t))){l=t}else if(t.url){l=t.url;if(!e.mimetypes.matchesMimetype(t.mimetype,"image/*")&&!e.mimetypes.matchesMimetype(t.mimetype,"application/pdf")){o(new e.errors.FPError(142));return}}else{throw new e.FilepickerException("Invalid file to convert: "+t+". Not a filepicker url or FPFile object.")}l=e.util.getFPUrl(l);if(l.indexOf("/convert")>-1){var c=e.util.parseUrl(l).params;c=e.conversions.mapRestParams(c);if(c.crop){e.util.setDefault(c,"crop_first",true)}for(var u in c){e.util.setDefault(s,u,c[u])}}e.conversions.convert(e.util.trimConvert(l),s,i,o,a)};var v=function(t){return e.widgets.constructWidget(t)};var w=function(t,r){return e.dragdrop.makeDropPane(t,r)};var E=function(t){return e.responsiveImages.setResponsiveOptions(t)};var S=function(){e.responsiveImages.update.apply(null,arguments)};var _=function(t){t=t||{};e.ajax.get(e.urls.LOGOUT,{success:t.onSuccess,error:t.onError,withCredentials:true})};return{setKey:r,setResponsiveOptions:E,pick:i,pickFolder:s,pickMultiple:o,pickAndStore:a,read:l,write:u,writeUrl:p,export:d,exportFile:d,processImage:h,store:m,storeUrl:f,stat:g,metadata:g,remove:y,convert:b,constructWidget:v,makeDropPane:w,FilepickerException:n,responsive:S,logout:_,version:t}}),true);"use strict";filepicker.extend("mimetypes",(function(){var e=this;var t={".stl":"application/sla",".hbs":"text/html",".pdf":"application/pdf",".jpg":"image/jpeg",".jpeg":"image/jpeg",".jpe":"image/jpeg",".imp":"application/x-impressionist",".vob":"video/dvd"};var r=["application/octet-stream","application/download","application/force-download","octet/stream","application/unknown","application/x-download","application/x-msdownload","application/x-secure-download"];var n=function(e){if(e.type){var n=e.type;n=n.toLowerCase();var i=false;for(var o=0;o<r.length;o++){i=i||n===r[o]}if(!i){return e.type}}var a=e.name||e.fileName;var s=a.match(/\.\w*$/);if(s){return t[s[0].toLowerCase()]||""}else{if(e.type){return e.type}else{return""}}};var i=function(t,n){if(!t){return n==="*/*"}t=e.util.trim(t).toLowerCase();n=e.util.trim(n).toLowerCase();for(var i=0;i<r.length;i++){if(t===r[i]){return true}}var o=t.split("/"),a=n.split("/");if(a[0]==="*"){return true}if(a[0]!==o[0]){return false}if(a[1]==="*"){return true}return a[1]===o[1]};return{getMimetype:n,matchesMimetype:i}}));"use strict";filepicker.extend("services",(function(){return{COMPUTER:1,DROPBOX:2,FACEBOOK:3,GITHUB:4,GMAIL:5,IMAGE_SEARCH:6,URL:7,WEBCAM:8,GOOGLE_DRIVE:9,SEND_EMAIL:10,INSTAGRAM:11,FLICKR:12,VIDEO:13,EVERNOTE:14,PICASA:15,WEBDAV:16,FTP:17,ALFRESCO:18,BOX:19,SKYDRIVE:20,GDRIVE:21,CUSTOMSOURCE:22,CLOUDDRIVE:23,GENERIC:24,CONVERT:25,AUDIO:26}}),true);"use strict";filepicker.extend("urls",(function(){var e=this;var t="https://www.filepicker.io";if(window.filepicker.hostname){t=window.filepicker.hostname}var r=t.replace("www","dialog"),n=r+"/dialog/open/",i=r+"/dialog/save/",o=r+"/dialog/process/",a=r+"/dialog/folder/",s=t+"/api/store/";var l=["crop","rotate","filter"];var c=function(e,t,r){return n+g(e,t)+(r?"&multi="+!!r:"")+(e.mimetypes!==undefined?"&m="+e.mimetypes.join(","):"")+(e.extensions!==undefined?"&ext="+e.extensions.join(","):"")+(e.maxSize?"&maxSize="+e.maxSize:"")+(e.customSourceContainer?"&customSourceContainer="+e.customSourceContainer:"")+(e.customSourcePath?"&customSourcePath="+e.customSourcePath:"")+(e.maxFiles?"&maxFiles="+e.maxFiles:"")+(e.folders!==undefined?"&folders="+e.folders:"")+(e.storeLocation?"&storeLocation="+e.storeLocation:"")+(e.storePath?"&storePath="+e.storePath:"")+(e.storeContainer?"&storeContainer="+e.storeContainer:"")+(e.storeRegion?"&storeRegion="+e.storeRegion:"")+(e.storeAccess?"&storeAccess="+e.storeAccess:"")+(e.webcam&&e.webcam.webcamDim?"&wdim="+e.webcam.webcamDim.join(","):"")+(e.webcamDim?"&wdim="+e.webcamDim.join(","):"")+(e.webcam&&e.webcam.videoRes?"&videoRes="+e.webcam.videoRes:"")+(e.webcam&&e.webcam.videoLen?"&videoLen="+e.webcam.videoLen:"")+(e.webcam&&e.webcam.audioLen?"&audioLen="+e.webcam.audioLen:"")+v(e.conversions)};var u=function(e,t){var r=e.convertUrl;if(r.indexOf("&")>=0||r.indexOf("?")>=0){r=encodeURIComponent(r)}return o+g(e,t)+"&curl="+r+v(e.conversions)};var p=function(e,t){return a+g(e,t)};var d=function(e,t,r){if(e.indexOf("&")>=0||e.indexOf("?")>=0){e=encodeURIComponent(e)}return i+g(t,r)+"&url="+e+(t.mimetype!==undefined?"&m="+t.mimetype:"")+(t.extension!==undefined?"&ext="+t.extension:"")+(t.suggestedFilename?"&defaultSaveasName="+t.suggestedFilename:"")};var h=function(t){return s+t.location+"?key="+e.apikey+(t.base64decode?"&base64decode=true":"")+(t.mimetype?"&mimetype="+t.mimetype:"")+(t.filename?"&filename="+encodeURIComponent(t.filename):"")+(t.path?"&path="+t.path:"")+(t.container?"&container="+t.container:"")+(t.access?"&access="+t.access:"")+y(t)+"&plugin="+b()};var m=function(e,t){return e+"?nonce=fp"+(!!t.base64decode?"&base64decode=true":"")+(t.mimetype?"&mimetype="+t.mimetype:"")+y(t)+"&plugin="+b()};var f=function(){var t=e.util.parseUrl(window.location.href);return t.origin+"/404"};function g(t,r){return"?key="+e.apikey+"&id="+r+"&referrer="+window.location.hostname+"&iframe="+(t.container!=="window")+"&version="+e.API_VERSION+(t.services?"&s="+t.services.join(","):"")+(t.container!==undefined?"&container="+t.container:"modal")+(t.openTo?"&loc="+t.openTo:"")+"&language="+(t.language||e.browser.getLanguage())+(t.mobile!==undefined?"&mobile="+t.mobile:"")+(t.backgroundUpload!==undefined?"&bu="+t.backgroundUpload:"")+(t.cropRatio?"&cratio="+t.cropRatio:"")+(t.cropDim?"&cdim="+t.cropDim.join(","):"")+(t.cropMax?"&cmax="+t.cropMax.join(","):"")+(t.cropMin?"&cmin="+t.cropMin.join(","):"")+(t.cropForce!==undefined?"&cforce="+t.cropForce:"")+(t.hide!==undefined?"&hide="+t.hide:"")+(t.customCss?"&css="+encodeURIComponent(t.customCss):"")+(t.customText?"&text="+encodeURIComponent(t.customText):"")+(t.imageMin?"&imin="+t.imageMin.join(","):"")+(t.imageMax?"&imax="+t.imageMax.join(","):"")+(t.imageDim?"&idim="+t.imageDim.join(","):"")+(t.imageQuality?"&iq="+t.imageQuality:"")+(t.noFileReader?"&nfl="+t.noFileReader:"")+(e.util.isCanvasSupported()?"":"&canvas=false")+(t.redirectUrl?"&redirect_url="+t.redirectUrl:"")+(t.showClose&&t.container!=="modal"?"&showClose="+t.showClose:"")+y(t)+"&plugin="+b()}function y(e){return(e.signature?"&signature="+e.signature:"")+(e.policy?"&policy="+e.policy:"")}function b(){return filepicker.plugin||"js_lib"}function v(e){e=e||[];var t=[],r,n;for(r in e){for(n in l){if(e[r]===l[n]&&e.hasOwnProperty(r)){t.push(e[r])}}}if(!t.length){t.push("crop")}return"&co="+t.join(",")}return{BASE:t,DIALOG_BASE:r,API_COMM:t+"/dialog/comm_iframe/",COMM:r+"/dialog/comm_iframe/",FP_COMM_FALLBACK:r+"/dialog/comm_hash_iframe/",STORE:s,PICK:n,EXPORT:i,LOGOUT:t+"/api/clients/unauth",constructPickUrl:c,constructConvertUrl:u,constructPickFolderUrl:p,constructExportUrl:d,constructWriteUrl:m,constructStoreUrl:h,constructHostCommFallback:f,getPlugin:b}}));"use strict";filepicker.extend("ajax",(function(){var e=this;var t=function(e,t){t.method="GET";o(e,t)};var r=function(t,r){r.method="POST";t+=(t.indexOf("?")>=0?"&":"?")+"_cacheBust="+e.util.getId();o(t,r)};var n=function(t,r){var i=[];for(var o in t){var a=t[o];if(r){o=r+". + key + "}var s;switch(e.util.typeOf(a)){case"object":s=n(a,o);break;case"array":var l={};for(var c=0;c<a.length;c++){l[c]=a[c]}s=n(l,o);break;default:s=o+"="+encodeURIComponent(a);break}if(a!==null){i.push(s)}}return i.join("&")};var i=function(){try{return new window.XMLHttpRequest}catch(e){try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){return null}}}};var o=function(t,r){t=t||"";var o=r.method?r.method.toUpperCase():"POST";var s=r.success||function(){};var l=r.error||function(){};var c=r.async===undefined?true:r.async;var u=r.data||null;var p=r.processData===undefined?true:r.processData;var d=r.headers||{};var h=e.util.parseUrl(t);var m=window.location.protocol+"//"+window.location.host;var f=m!==h.origin;var g=false;t+=(t.indexOf("?")>=0?"&":"?")+"plugin="+e.urls.getPlugin();if(u&&p){u=n(r.data)}var y;if(r.xhr){y=r.xhr}else{y=i();if(!y){r.error("Ajax not allowed");return y}}if(f&&window.XDomainRequest&&!("withCredentials"in y)){return new a(t,r)}if(r.progress&&y.upload){y.upload.addEventListener("progress",(function(e){if(e.lengthComputable){r.progress(Math.round(e.loaded*95/e.total))}}),false)}var b=function(){if(y.readyState==4&&!g){if(r.progress){r.progress(100)}if(y.status>=200&&y.status<300){var t=y.responseText;if(r.json){try{t=e.json.decode(t)}catch(e){v.call(y,"Invalid json: "+t);return}}s(t,y.status,y);g=true}else{v.call(y,y.responseText);g=true}}};y.onreadystatechange=b;var v=function(e){if(g){return}if(r.progress){r.progress(100)}g=true;if(this.status==400){l("bad_params",this.status,this);return}else if(this.status==403){l("not_authorized",this.status,this);return}else if(this.status==404){l("not_found",this.status,this);return}if(f){if(this.readyState==4&&this.status===0){l("CORS_not_allowed",this.status,this);return}else{l("CORS_error",this.status,this);return}}l(e,this.status,this)};y.onerror=v;if(u&&o=="GET"){t+=(t.indexOf("?")!==-1?"&":"?")+u;u=null}if(r.withCredentials){y.withCredentials=true}y.open(o,t,c);if(r.json){y.setRequestHeader("Accept","application/json, text/javascript")}else{y.setRequestHeader("Accept","text/javascript, text/html, application/xml, text/xml, */*")}var w=d["Content-Type"]||d["content-type"];if(u&&p&&(o=="POST"||o=="PUT")&&w===undefined){y.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")}if(d){for(var E in d){y.setRequestHeader(E,d[E])}}y.send(u);return y};var a=function(t,r){if(!window.XDomainRequest){return null}var i=r.method?r.method.toUpperCase():"POST";var o=r.success||function(){};var a=r.error||function(){};var s=r.data||{};if(window.location.protocol=="http:"){t=t.replace("https:","http:")}else if(window.location.protocol=="https:"){t=t.replace("http:","https:")}if(r.async){throw new e.FilepickerException("Asyncronous Cross-domain requests are not supported")}if(i!=="GET"&&i!=="POST"){s._method=i;i="POST"}if(r.processData!==false){s=s?n(s):null}if(s&&i=="GET"){t+=(t.indexOf("?")>=0?"&":"?")+s;s=null}t+=(t.indexOf("?")>=0?"&":"?")+"_xdr=true&_cacheBust="+e.util.getId();var l=new window.XDomainRequest;l.onload=function(){var t=l.responseText;if(r.progress){r.progress(100)}if(r.json){try{t=e.json.decode(t)}catch(e){a("Invalid json: "+t,200,l);return}}o(t,200,l)};l.onerror=function(){if(r.progress){r.progress(100)}a(l.responseText||"CORS_error",this.status||500,this)};l.onprogress=function(){};l.ontimeout=function(){};l.timeout=3e4;l.open(i,t,true);l.send(s);return l};return{get:t,post:r,request:o}}));"use strict";filepicker.extend("files",(function(){var e=this;var t=function(t,n,i,o,a){var s=n.base64encode===undefined;if(s){n.base64encode=true}n.base64encode=n.base64encode!==false;var l=function(t){if(s){t=e.base64.decode(t,!!n.asText)}i(t)};r.call(this,t,n,l,o,a)};var r=function(t,r,n,i,o){if(r.cache!==true){r._cacheBust=e.util.getId()}e.ajax.get(t,{data:r,headers:{"X-NO-STREAM":true},success:n,error:function(t,r,n){if(t==="CORS_not_allowed"){i(new e.errors.FPError(113))}else if(t==="CORS_error"){i(new e.errors.FPError(114))}else if(t==="not_found"){i(new e.errors.FPError(115))}else if(t==="bad_params"){i(new e.errors.FPError(400))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{i(new e.errors.FPError(118))}},progress:o})};var n=function(t,r,n,i,o){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob)){o(10);e.files.storeFile(t,{},(function(t){o(50);e.files.readFromFPUrl(t.url,r,n,i,(function(e){o(50+e/2)}))}),i,(function(e){o(e/2)}));return}var a=!!r.base64encode;var s=!!r.asText;var l=new FileReader;l.onprogress=function(e){if(e.lengthComputable){o(Math.round(e.loaded/e.total*100))}};l.onload=function(t){o(100);if(a){n(e.base64.encode(t.target.result,s))}else{n(t.target.result)}};l.onerror=function(t){switch(t.target.error.code){case t.target.error.NOT_FOUND_ERR:i(new e.errors.FPError(115));break;case t.target.error.NOT_READABLE_ERR:i(new e.errors.FPError(116));break;case t.target.error.ABORT_ERR:i(new e.errors.FPError(117));break;default:i(new e.errors.FPError(118));break}};if(s||!l.readAsBinaryString){l.readAsText(t)}else{l.readAsBinaryString(t)}};var i=function(t,r,n,i,o,a){var s=n.mimetype||"text/plain";e.ajax.post(e.urls.constructWriteUrl(t,n),{headers:{"Content-Type":s},data:r,processData:false,json:true,success:function(t){i(e.util.standardizeFPFile(t))},error:function(t,r,n){if(t==="not_found"){o(new e.errors.FPError(121))}else if(t==="bad_params"){o(new e.errors.FPError(122))}else if(t==="not_authorized"){o(new e.errors.FPError(403))}else{o(new e.errors.FPError(123))}},progress:a})};var o=function(t,r,n,i,o,a){var s=function(t,r,n){if(t==="not_found"){o(new e.errors.FPError(121))}else if(t==="bad_params"){o(new e.errors.FPError(122))}else if(t==="not_authorized"){o(new e.errors.FPError(403))}else{o(new e.errors.FPError(123))}};var l=function(t){i(e.util.standardizeFPFile(t))};u(r,e.urls.constructWriteUrl(t,n),l,s,a)};var a=function(t,r,n,i,o,a){var s=function(t,r,n){if(t==="not_found"){o(new e.errors.FPError(121))}else if(t==="bad_params"){o(new e.errors.FPError(122))}else if(t==="not_authorized"){o(new e.errors.FPError(403))}else{o(new e.errors.FPError(123))}};var l=function(t){i(e.util.standardizeFPFile(t))};n.mimetype=r.type;u(r,e.urls.constructWriteUrl(t,n),l,s,a)};var s=function(t,r,n,i,o,a){e.ajax.post(e.urls.constructWriteUrl(t,n),{data:{url:r},json:true,success:function(t){i(e.util.standardizeFPFile(t))},error:function(t,r,n){if(t==="not_found"){o(new e.errors.FPError(121))}else if(t==="bad_params"){o(new e.errors.FPError(122))}else if(t==="not_authorized"){o(new e.errors.FPError(403))}else{o(new e.errors.FPError(123))}},progress:a})};var l=function(t,r,n,i,o){if(t.files){if(t.files.length===0){i(new e.errors.FPError(115))}else{c(t.files[0],r,n,i,o)}return}e.util.setDefault(r,"location","S3");if(!r.filename){r.filename=t.value.replace("C:\\fakepath\\","")||t.name}var a=t.name;t.name="fileUpload";e.iframeAjax.post(e.urls.constructStoreUrl(r),{data:t,processData:false,json:true,success:function(r){t.name=a;n(e.util.standardizeFPFile(r))},error:function(t,r,n){if(t==="not_found"){i(new e.errors.FPError(121))}else if(t==="bad_params"){i(new e.errors.FPError(122))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{i(new e.errors.FPError(123))}}})};var c=function(t,r,n,i,o){e.util.setDefault(r,"location","S3");var a=function(t,r,n){if(t==="not_found"){i(new e.errors.FPError(121))}else if(t==="bad_params"){i(new e.errors.FPError(122))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{e.util.console.error(t);i(new e.errors.FPError(123))}};var s=function(t){n(e.util.standardizeFPFile(t))};if(!r.filename){r.filename=t.name||t.fileName}u(t,e.urls.constructStoreUrl(r),s,a,o)};var u=function(t,r,n,i,o){if(t.files){t=t.files[0]}var a=!!window.FormData&&!!window.XMLHttpRequest;if(a){var s=new window.FormData;s.append("fileUpload",t);e.ajax.post(r,{json:true,processData:false,data:s,success:n,error:i,progress:o})}else{e.iframeAjax.post(r,{data:t,json:true,success:n,error:i})}};var p=function(t,r,n,i,o){e.util.setDefault(r,"location","S3");e.util.setDefault(r,"mimetype","text/plain");e.ajax.post(e.urls.constructStoreUrl(r),{headers:{"Content-Type":r.mimetype},data:t,processData:false,json:true,success:function(t){n(e.util.standardizeFPFile(t))},error:function(t,r,n){if(t==="not_found"){i(new e.errors.FPError(121))}else if(t==="bad_params"){i(new e.errors.FPError(122))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{i(new e.errors.FPError(123))}},progress:o})};var d=function(t,r,n,i,o){e.util.setDefault(r,"location","S3");e.ajax.post(e.urls.constructStoreUrl(r),{data:{url:e.util.getFPUrl(t)},json:true,success:function(t){n(e.util.standardizeFPFile(t))},error:function(t,r,n){if(t==="not_found"){i(new e.errors.FPError(151))}else if(t==="bad_params"){i(new e.errors.FPError(152))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{i(new e.errors.FPError(153))}},progress:o})};var h=function(t,r,n,i){var o=["uploaded","modified","created"];if(r.cache!==true){r._cacheBust=e.util.getId()}e.ajax.get(t+"/metadata",{json:true,data:r,success:function(e){for(var t=0;t<o.length;t++){if(e[o[t]]){e[o[t]]=new Date(e[o[t]])}}n(e)},error:function(t,r,n){if(t==="not_found"){i(new e.errors.FPError(161))}else if(t==="bad_params"){i(new e.errors.FPError(400))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{i(new e.errors.FPError(162))}}})};var m=function(t,r,n,i){r.key=e.apikey;e.ajax.post(t+"/remove",{data:r,success:function(e){n()},error:function(t,r,n){if(t==="not_found"){i(new e.errors.FPError(171))}else if(t==="bad_params"){i(new e.errors.FPError(400))}else if(t==="not_authorized"){i(new e.errors.FPError(403))}else{i(new e.errors.FPError(172))}}})};return{readFromUrl:r,readFromFile:n,readFromFPUrl:t,writeDataToFPUrl:i,writeFileToFPUrl:a,writeFileInputToFPUrl:o,writeUrlToFPUrl:s,storeFileInput:l,storeFile:c,storeUrl:d,storeData:p,stat:h,remove:m}}));"use strict";filepicker.extend("iframeAjax",(function(){var e=this;var t="ajax_iframe";var r=[];var n=false;var i=function(e,t){t.method="GET";s(e,t)};var o=function(t,r){r.method="POST";t+=(t.indexOf("?")>=0?"&":"?")+"_cacheBust="+e.util.getId();s(t,r)};var a=function(){if(r.length>0){var e=r.shift();s(e.url,e.options)}};var s=function(i,o){if(n){r.push({url:i,options:o});return}i+=(i.indexOf("?")>=0?"&":"?")+"plugin="+e.urls.getPlugin()+"&_cacheBust="+e.util.getId();i+="&Content-Type=text%2Fhtml";e.comm.openChannel();var a;try{a=document.createElement('<iframe name="'+t+'">')}catch(e){a=document.createElement("iframe")}a.id=a.name=t;a.style.display="none";var s=function(){n=false};if(a.attachEvent){a.attachEvent("onload",s);a.attachEvent("onerror",s)}else{a.onerror=a.onload=s}a.id=t;a.name=t;a.style.display="none";a.onerror=a.onload=function(){n=false};document.body.appendChild(a);e.handlers.attach("upload",l(o));var u=document.createElement("form");u.method=o.method||"GET";u.action=i;u.target=t;var p=o.data;if(e.util.isFileInputElement(p)||e.util.isFile(p)){u.encoding=u.enctype="multipart/form-data"}document.body.appendChild(u);var d;if(e.util.isFile(p)){var h=c(p);if(!h){throw e.FilepickerException("Couldn't find corresponding file input.")}p={fileUpload:h}}else if(e.util.isFileInputElement(p)){d=p;p={};p.fileUpload=d}else if(p&&e.util.isElement(p)&&p.tagName==="INPUT"){d=p;p={};p[d.name]=d}else if(o.processData!==false){p={data:p}}p.format="iframe";var m={};for(var f in p){var g=p[f];if(e.util.isElement(g)&&g.tagName==="INPUT"){m[f]={par:g.parentNode,sib:g.nextSibling,name:g.name,input:g,focused:g===document.activeElement};g.name=f;u.appendChild(g)}else{var y=document.createElement("input");y.name=f;y.value=g;u.appendChild(y)}}n=true;window.setTimeout((function(){u.submit();for(var e in m){var t=m[e];t.par.insertBefore(t.input,t.sib);t.input.name=t.name;if(t.focused){t.input.focus()}}u.parentNode.removeChild(u)}),1)};var l=function(t){var r=t.success||function(){};var i=t.error||function(){};var o=function(t){if(t.type!=="Upload"){return}n=false;var o=t.payload;if(o.error){i(o.error)}else{r(o)}e.handlers.detach("upload");a()};return o};var c=function(e){var t=document.getElementsByTagName("input");for(var r=0;r<t.length;r++){var n=t[0];if(n.type!=="file"||!n.files||!n.files.length){continue}for(var i=0;i<n.files.length;i++){if(n.files[i]===e){return n}}}return null};return{get:i,post:o,request:s}}));"use strict";filepicker.extend("base64",(function(){var e=this;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var r=function(e,r){r=r||r===undefined;var n="";var o,a,s,l,c,u,p;var d=0;if(r){e=i(e)}while(d<e.length){o=e.charCodeAt(d);a=e.charCodeAt(d+1);s=e.charCodeAt(d+2);d+=3;l=o>>2;c=(o&3)<<4|a>>4;u=(a&15)<<2|s>>6;p=s&63;if(isNaN(a)){u=p=64}else if(isNaN(s)){p=64}n=n+t.charAt(l)+t.charAt(c)+t.charAt(u)+t.charAt(p)}return n};var n=function(e,r){r=r||r===undefined;var n="";var i,a,s;var l,c,u,p;var d=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(d<e.length){l=t.indexOf(e.charAt(d));c=t.indexOf(e.charAt(d+1));u=t.indexOf(e.charAt(d+2));p=t.indexOf(e.charAt(d+3));d+=4;i=l<<2|c>>4;a=(c&15)<<4|u>>2;s=(u&3)<<6|p;n=n+String.fromCharCode(i);if(u!=64){n=n+String.fromCharCode(a)}if(p!=64){n=n+String.fromCharCode(s)}}if(r){n=o(n)}return n};var i=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<128){t+=String.fromCharCode(n)}else if(n>127&&n<2048){t+=String.fromCharCode(n>>6|192);t+=String.fromCharCode(n&63|128)}else{t+=String.fromCharCode(n>>12|224);t+=String.fromCharCode(n>>6&63|128);t+=String.fromCharCode(n&63|128)}}return t};var o=function(e){var t="",r=0,n=0,i=0;while(r<e.length){n=e.charCodeAt(r);if(n<128){t+=String.fromCharCode(n);r++}else if(n>191&&n<224){i=e.charCodeAt(r+1);t+=String.fromCharCode((n&31)<<6|i&63);r+=2}else{i=e.charCodeAt(r+1);c3=e.charCodeAt(r+2);t+=String.fromCharCode((n&15)<<12|(i&63)<<6|c3&63);r+=3}}return t};return{encode:r,decode:n}}),true);"use strict";filepicker.extend("browser",(function(){var e=this;var t=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i))};var r=function(){return!!navigator.userAgent.match(/Android/i)};var n=function(){var e=window.navigator.userLanguage||window.navigator.language;if(e===undefined){e="en"}e=e.replace("-","_").toLowerCase();return e};return{getLanguage:n,openInModal:function(){return!(t()||r())||!!window.navigator.standalone},isMobile:function(){return t()||r()}}}));"use strict";filepicker.extend("conversionsUtil",(function(){var e=this,t=e.urls.BASE.replace("www","process")+"/";var r=function(e){if(!e){return{url:null,optionsDict:{}}}e=e.replace(t,"");var r=e.substring(e.indexOf("/http")+1);e=e.replace("/"+r,"");var n=e.substring(0,e.indexOf("/"));e=e.replace(n+"/","");var i=e.split("/"),o={},a,s,l,c,u;for(c in i){a=i[c].split("=");if(a.length>1){o[a[0]]={};s=a[1].split(",");for(u in s){l=s[u].split(":");if(l.length>1){o[a[0]][l[0]]=l[1]}}}else if(i[c]){o[i[c]]=null}}return{url:r,apikey:n,optionsDict:o}};var n=function(r,n,i){var o=t+i,a,s,l;n=n||{};for(a in n){o+="/"+a;l=e.util.objectKeys(n[a]||{}).length;if(l){o+="="}for(s in n[a]){o+=s+":"+n[a][s];if(--l!==0){o+=","}}}o+="/"+r;return o};return{CONVERSION_DOMAIN:t,parseUrl:r,buildUrl:n}}));"use strict";filepicker.extend("json",(function(){var fp=this;var special={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var escape=function(e){return special[e]||"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)};var validate=function(e){e=e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");return/^[\],:{}\s]*$/.test(e)};var encode=function(e){if(window.JSON&&window.JSON.stringify){return window.JSON.stringify(e)}if(e&&e.toJSON){e=e.toJSON()}var t=[];switch(fp.util.typeOf(e)){case"string":return'"'+e.replace(/[\x00-\x1f\\"]/g,escape)+'"';case"array":for(var r=0;r<e.length;r++){t.push(encode(e[r]))}return"["+t+"]";case"object":case"hash":var n;var i;for(i in e){n=encode(e[i]);if(n){t.push(encode(i)+":"+n)}n=null}return"{"+t+"}";case"number":case"boolean":return""+e;case"null":return"null";default:return"null"}return null};var decode=function(string,secure){if(!string||fp.util.typeOf(string)!=="string"){return null}if(window.JSON&&window.JSON.parse){return window.JSON.parse(string)}else{if(secure){if(!validate(string)){throw new Error("JSON could not decode the input; security is enabled and the value is not secure.")}}return eval("("+string+")")}};return{validate:validate,encode:encode,stringify:encode,decode:decode,parse:decode}}));"use strict";filepicker.extend("util",(function(){var e=this;var t=function(e){return e.replace(/^\s+|\s+$/g,"")};var r=function(e){return e.replace(/\/convert\b.*/,"")};var n=/^(http|https)\:.*\/\//i;var i=function(e){return!!e.match(n)};var o=function(e){if(!e||e.charAt(0)==="/"){e=window.location.protocol+"//"+window.location.host+e}var t=document.createElement("a");t.href=e;var r=t.hostname.indexOf(":")===-1?t.hostname:t.host;var n={source:e,protocol:t.protocol.replace(":",""),host:r,port:t.port,query:t.search,params:function(){var e={},r=t.search.replace(/^\?/,"").split("&"),n=r.length,i=0,o;for(;i<n;i++){if(!r[i]){continue}o=r[i].split("=");e[o[0]]=o[1]}return e}(),file:(t.pathname.match(/\/([^\/?#]+)$/i)||[undefined,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^\/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[undefined,""])[1],segments:t.pathname.replace(/^\//,"").split("/")};n.origin=n.protocol+"://"+n.host+(n.port?":"+n.port:"");n.rawUrl=(n.origin+n.path).replace("/convert","");return n};var a=function(e,t){return e.indexOf(t,e.length-t.length)!==-1};var s=function(e,t,r){return e+(e.indexOf("?")>=0?"&":"?")+t+"="+r};return{trim:t,trimConvert:r,parseUrl:o,isUrl:i,endsWith:a,appendQueryToUrl:s}}));"use strict";filepicker.extend("util",(function(){var e=this;var t=function(e){return e&&Object.prototype.toString.call(e)==="[object Array]"};var r=function(e){return e&&(Object.prototype.toString.call(e)==="[object File]"||Object.prototype.toString.call(e)==="[object Blob]")};var n=function(e){if(typeof window.HTMLElement==="object"){return e instanceof window.HTMLElement}else{return e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"}};var i=function(e){return n(e)&&e.tagName==="INPUT"&&e.type==="file"};var o=function(e){if(e===null){return"null"}else if(t(e)){return"array"}else if(r(e)){return"file"}return typeof e};var a=function(){var e=new Date;return e.getTime().toString()};var s=function(e,t,r){if(e[t]===undefined){e[t]=r}};var l=function(e){if(window.jQuery){window.jQuery((function(){e()}))}else{var t="load";if(window.addEventListener){window.addEventListener(t,e,false)}else if(window.attachEvent){window.attachEvent("on"+t,e)}else{if(window.onload){var r=window.onload;window.onload=function(){r();e()}}else{window.onload=e}}}};var c=function(t){return typeof t==="string"&&t.match(e.urls.BASE+"/api/file/")};var u=function(e){return typeof e==="string"&&e.match("/api/file/")};var p=function(t){if(typeof t==="string"){var r=t.match(/(?:^https?:\/\/cdn.filestackcontent.com|^https?:\/\/cdn.filepicker.io)[\S]*\/([\S]{20,})/);if(r&&r.length>1){return e.urls.BASE+"/api/file/"+r[1]}}return t};var d=function(e){return function(){if(window.console&&typeof window.console[e]==="function"){try{window.console[e].apply(window.console,arguments)}catch(e){window.alert(Array.prototype.join.call(arguments,","))}}}};var h={};h.log=d("log");h.error=d("error");var m=function(e){var t={};for(var r in e){t[r]=e[r]}return t};var f=function(e){var t={};t.url=e.url;t.filename=e.filename||e.name;t.mimetype=e.mimetype||e.type;t.size=e.size;t.key=e.key||e.s3_key;t.isWriteable=!!(e.isWriteable||e.writeable);return t};var g=function(){try{var e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}catch(e){return false}};var y=function(e,t){for(var r in e){if(e.hasOwnProperty(r)){t[r]=e[r]}}return t};var b=function(){if(!e.apikey){throw new e.FilepickerException("API Key not found")}};var v=function(e){if(typeof Object.keys!=="function"){return function(e){var t=[];for(var r in e){if(e.hasOwnProperty(r)){t.push(r)}}return t}}else{return Object.keys(e)}};return{isArray:t,isFile:r,isElement:n,isFileInputElement:i,getId:a,setDefault:s,typeOf:o,addOnLoad:l,isFPUrl:c,getFPUrl:p,isFPUrlCdn:u,console:h,clone:m,standardizeFPFile:f,isCanvasSupported:g,extend:y,checkApiKey:b,objectKeys:v}}));"use strict";filepicker.extend("windowUtils",(function(){return{getWidth:e,getHeight:t};function e(){return document.documentElement.clientWidth||document.body&&document.body.clientWidth||1024}function t(){return document.documentElement.clientHeight||document.body&&document.body.clientHeight||768}}));"use strict";filepicker.extend("dragdrop",(function(){var e=this;var t=function(){return(!!window.FileReader||navigator.userAgent.indexOf("Safari")>=0)&&"draggable"in document.createElement("span")};var r=function(r,n){var i="No DOM element found to create drop pane";if(!r){throw new e.FilepickerException(i)}if(r.jquery){if(r.length===0){throw new e.FilepickerException(i)}r=r[0]}if(!t()){e.util.console.error("Your browser doesn't support drag-drop functionality");return false}n=n||{};var o=n.dragEnter||function(){};var a=n.dragLeave||function(){};var s=n.onStart||function(){};var l=n.onSuccess||function(){};var c=n.onError||function(){};var u=n.onProgress||function(){};var p=n.mimetypes;if(!p){if(n.mimetype){p=[n.mimetype]}else{p=["*/*"]}}if(e.util.typeOf(p)==="string"){p=p.split(",")}var d=n.extensions;if(!d){if(n.extension){d=[n.extension]}}if(e.util.typeOf(d)==="string"){d=d.replace(/ /g,"").split(",")}if(d){for(var h=0;h<d.length;h++){d[h]=d[h].toLowerCase()}}var m={location:n.location,path:n.path,container:n.container,access:n.access,policy:n.policy,signature:n.signature};var f=function(){return r&&(r.getAttribute("disabled")||"enabled")!=="disabled"};r.addEventListener("dragenter",(function(e){if(f()){o()}e.stopPropagation();e.preventDefault();return false}),false);r.addEventListener("dragleave",(function(e){if(f()){a()}e.stopPropagation();e.preventDefault();return false}),false);r.addEventListener("dragover",(function(e){e.dataTransfer.dropEffect="copy";e.preventDefault();return false}),false);r.addEventListener("drop",(function(e){e.stopPropagation();e.preventDefault();if(!f()){return false}if(O(e)){return false}var t=e.dataTransfer.files,r=x(e.dataTransfer);if(t.length){C(t)}else if(r){T(r)}else{c("NoFilesFound","No files uploaded")}return false}));var g=function(){r.setAttribute("disabled","enabled");if(window.$){window.$(r).prop("disabled",false)}};var y={};var b=[];var v=function(e,t){return function(r){if(!n.multiple){l([r])}else{b.push(r);if(b.length===t){l(b);b=[];y={}}else{y[e]=100;S(t)}}g()}};var w=function(e){c("UploadError",e.toString());g()};var E=function(e,t){return function(r){y[e]=r;S(t)}};var S=function(e){var t=0;for(var r in y){t+=y[r]}var n=t/e;u(n)};var _=function(t){if(t.length>0){if(t.length>1&&!n.multiple){c("TooManyFiles","Only one file at a time");return false}if(n.maxFiles>0&&t.length>n.maxFiles){c("TooManyFiles","Only "+n.maxFiles+" files at a time");return false}var r;var i;var o;for(var a=0;a<t.length;a++){r=false;i=t[a];o=i.name||i.fileName||"Unknown file";for(var s=0;s<p.length;s++){var l=e.mimetypes.getMimetype(i);r=r||e.mimetypes.matchesMimetype(l,p[s])}if(!r){c("WrongType",o+" isn't the right type of file");return false}if(d){r=false;for(s=0;s<d.length;s++){r=r||e.util.endsWith(o,d[s])}if(!r){c("WrongType",o+" isn't the right type of file");return false}}if(i.size&&!!n.maxSize&&i.size>n.maxSize){c("WrongSize",o+" is too large ("+i.size+" Bytes)");return false}}return true}else{c("NoFilesFound","No files uploaded")}return false};var x=function(t){var r,n;if(t&&typeof t.getData==="function"){r=t.getData("text");try{r=r||t.getData("text/html")}catch(t){e.util.console.error(t)}if(r&&!e.util.isUrl(r)){n=r.match(/<img.*?src="(.*?)"/i);r=n&&n.length>1?n[1]:null}}return r};return true;function D(t){var r=v(0,1);var n=e.util.clone(t);n.name=n.filename;if(_([n])){r(t)}else{e.files.remove(t.url,m,(function(){}),(function(){}))}}function C(t){var n=t.length,i;if(_(t)){s(t);r.setAttribute("disabled","disabled");for(i=0;i<t.length;i++){e.store(t[i],m,v(i,n),w,E(i,n))}}}function T(t){var r=E(0,1);e.storeUrl(t,D,w,r)}function O(e){var t,r,n;if(e.dataTransfer.items){r=e.dataTransfer.items;for(n=0;n<r.length;n++){t=r[n]&&r[n].webkitGetAsEntry?r[n].webkitGetAsEntry():undefined;if(t&&!!t.isDirectory){c("WrongType","Uploading a folder is not allowed");return true}}}return false}};return{enabled:t,makeDropPane:r}}));"use strict";filepicker.extend("responsiveImages",(function(){var e=this;var t=200;var r=w((function(){a()}),t);return{activate:n,deactivate:i,update:o,setResponsiveOptions:x,getResponsiveOptions:_,getElementDims:l,replaceSrc:c,getCurrentResizeParams:y,construct:b,constructParams:v,shouldConstruct:s,roundWithStep:D,addWindowResizeEvent:E,removeWindowResizeEvent:S};function n(){a();E(r)}function i(){S(r)}function o(t){if(t!==undefined){if(t.nodeName==="IMG"){b(t)}else{throw new e.FilepickerException("Passed object is not an image")}}else{a(true)}}function a(e){var t=document.querySelectorAll("img[data-fp-src]"),r,n;for(n=0;n<t.length;n++){r=t[n];if(s(r)||e===true){b(r)}}}function s(e){var t=d(e),r=u(e)||_().onResize||"all";if(!t||r==="all"){return true}if(r==="none"){return false}var n=y(t).width<l(e).width;if(n&&r==="up"||!n&&r==="down"){return true}return false}function l(t){var r={};if(t.parentNode===null){r.width=e.windowUtils.getWidth();r.height=e.windowUtils.getWidth();return r}if(t.alt&&!t.fpAltCheck){t.parentNode.fpAltCheck=true;return l(t.parentNode)}r.width=t.offsetWidth;r.height=t.offsetHeight;if(!r.width){return l(t.parentNode)}return r}function c(e,t){var r=d(e)||h(e);if(r!==t){e.src=t;if(r){e.onerror=function(){e.src=r;e.onerror=null}}}}function u(e){return e.getAttribute("data-fp-on-resize")}function p(e){return e.getAttribute("data-fp-pixel-round")}function d(e){return e.getAttribute("src")}function h(e){return e.getAttribute("data-fp-src")}function m(e){return e.getAttribute("data-fp-apikey")}function f(e){return e.getAttribute("data-fp-signature")}function g(e){return e.getAttribute("data-fp-policy")}function y(t){return e.conversionsUtil.parseUrl(t).optionsDict.resize||{}}function b(t){var r=h(t)||d(t),n=m(t)||e.apikey,i=_();if(!e.apikey){e.setKey(n);e.util.checkApiKey()}c(t,e.conversionsUtil.buildUrl(r,v(t,i),n))}function v(e,t){t=t||{};var r=l(e),n=p(e)||t.pixelRound||10,i={resize:{width:D(r.width,n)}},o=t.signature||f(e);if(o){i.security={signature:o,policy:t.policy||g(e)}}return i}function w(e,t){var r;return function(){var n=this;var i=arguments;var o=function(){r=null;e.apply(n,i)};clearTimeout(r);r=setTimeout(o,t)}}function E(e){if(window.addEventListener){window.addEventListener("resize",e,false)}else if(window.attachEvent){window.attachEvent("onresize",e)}}function S(e){if(window.removeEventListener){window.removeEventListener("resize",e,false)}else if(window.detachEvent){window.detachEvent("onresize",e)}}function _(){return e.responsiveOptions||{}}function x(t){t=t||{};if(typeof t!=="object"){throw new e.FilepickerException("Responsive options must be an object.")}e.responsiveOptions=t}function D(e,t){var r=t===0?1:t;return Math.ceil(e/r)*r}}));"use strict";filepicker.extend("widgets",(function(){var e=this;var t=function(e,t,r,n){var i=n.getAttribute(r);if(i){t[e]=i}};var r=function(e,t){var r;if(document.createEvent){r=document.createEvent("Event");r.initEvent("change",true,false);r.fpfile=t?t[0]:undefined;r.fpfiles=t;e.dispatchEvent(r)}else if(document.createEventObject){r=document.createEventObject("Event");r.eventPhase=2;r.currentTarget=r.srcElement=r.target=e;r.fpfile=t?t[0]:undefined;r.fpfiles=t;e.fireEvent("onchange",r)}else if(e.onchange){e.onchange(t)}};var n=function(e,t){if(t[e]){t[e]=t[e].split(",")}};var i=function(e,r,n){for(var i in n){t(n[i],e,i,r)}};var o=function(r,o){o=o||"pick";var a={},s={"data-fp-container":"container","data-fp-mimetype":"mimetype","data-fp-extension":"extension","data-fp-openTo":"openTo","data-fp-debug":"debug","data-fp-signature":"signature","data-fp-policy":"policy","data-fp-language":"language","data-fp-background-upload":"backgroundUpload","data-fp-hide":"hide","data-fp-custom-css":"customCss","data-fp-crop-force":"cropForce","data-fp-crop-ratio":"cropRatio","data-fp-crop-dim":"cropDim","data-fp-crop-max":"cropMax","data-fp-crop-min":"cropMin","data-fp-show-close":"showClose","data-fp-conversions":"conversions","data-fp-custom-text":"customText","data-fp-custom-source-container":"customSourceContainer","data-fp-custom-source-path":"customSourcePath"},l={"data-fp-mimetypes":"mimetypes","data-fp-extensions":"extensions","data-fp-maxSize":"maxSize","data-fp-maxFiles":"maxFiles","data-fp-store-location":"storeLocation","data-fp-store-path":"storePath","data-fp-store-container":"storeContainer","data-fp-store-region":"storeRegion","data-fp-store-access":"storeAccess","data-fp-image-quality":"imageQuality","data-fp-image-dim":"imageDim","data-fp-image-max":"imageMax","data-fp-image-min":"imageMin"},c={"data-fp-video-recording-resolution":"videoRes","data-fp-webcam-dim":"webcamDim","data-fp-video-length":"videoLen","data-fp-audio-length":"audioLen"};i(a,r,s);if(o==="export"){t("suggestedFilename",a,"data-fp-suggestedFilename",r)}else if(o==="pick"){i(a,r,l);a.webcam={};i(a.webcam,r,c)}var u=r.getAttribute("data-fp-services");if(u){u=u.split(",");for(var p=0;p<u.length;p++){u[p]=e.services[u[p].replace(" ","")]||u[p]}a.services=u}var d=r.getAttribute("data-fp-service");if(d){a.service=e.services[d.replace(" ","")]||d}var h=["extensions","mimetypes","imageDim","imageMin","imageMax","cropDim","cropMax","cropMin","webcamDim","conversions"];for(var m in h){n(h[m],a)}var f=r.getAttribute("data-fp-apikey");if(f){e.setKey(f)}a.folders=r.getAttribute("data-fp-folders")==="true";return a};var a=function(e){return e.getAttribute("data-fp-multiple")==="true"};var s=function(t){var n=document.createElement("button");n.setAttribute("type","button");n.innerHTML=t.getAttribute("data-fp-button-text")||"Pick File";n.className=t.getAttribute("data-fp-button-class")||t.className||"fp__btn";t.style.display="none";var i=o(t);if(a(t)){n.onclick=function(){n.blur();e.pickMultiple(i,(function(e){var n=[];for(var i=0;i<e.length;i++){n.push(e[i].url)}t.value=n.join();r(t,e)}));return false}}else{n.onclick=function(){n.blur();e.pick(i,(function(e){t.value=e.url;r(t,[e])}));return false}}t.parentNode.insertBefore(n,t.nextSibling)};var l=function(t){var n=t.getAttribute("data-fp-url");if(!n){return true}var i=document.createElement("button");i.setAttribute("type","button");i.innerHTML=t.getAttribute("data-fp-button-text")||"Convert File";i.className=t.getAttribute("data-fp-button-class")||t.className||"fp__btn";t.style.display="none";var a=o(t,"convert");i.onclick=function(){i.blur();e.processImage(n,a,(function(e){t.value=e.url;r(t,[e])}));return false};t.parentNode.insertBefore(i,t.nextSibling)};var c=function(t){var n=document.createElement("div");n.className=t.getAttribute("data-fp-class")||t.className;n.style.padding="1px";t.style.display="none";t.parentNode.insertBefore(n,t.nextSibling);var i=document.createElement("button");i.setAttribute("type","button");i.innerHTML=t.getAttribute("data-fp-button-text")||"Pick File";i.className=t.getAttribute("data-fp-button-class")||"fp__btn";n.appendChild(i);var s=document.createElement("div");p(s);s.innerHTML=t.getAttribute("data-fp-drag-text")||"Or drop files here";s.className=t.getAttribute("data-fp-drag-class")||"";n.appendChild(s);var l=o(t),c=a(t);if(e.dragdrop.enabled()){d(s,c,l,t)}else{s.innerHTML="&nbsp;"}if(c){s.onclick=i.onclick=function(){i.blur();e.pickMultiple(l,(function(e){var n=[];var i=[];for(var o=0;o<e.length;o++){n.push(e[o].url);i.push(e[o].filename)}t.value=n.join();u(t,s,i.join(", "));r(t,e)}));return false}}else{s.onclick=i.onclick=function(){i.blur();e.pick(l,(function(e){t.value=e.url;u(t,s,e.filename);r(t,[e])}));return false}}};var u=function(t,n,i){n.innerHTML=i;n.style.padding="2px 4px";n.style.cursor="default";n.style.width="";var o=document.createElement("span");o.innerHTML="X";o.style.borderRadius="8px";o.style.fontSize="14px";o.style.cssFloat="right";o.style.padding="0 3px";o.style.color="#600";o.style.cursor="pointer";var a=function(i){if(!i){i=window.event}i.cancelBubble=true;if(i.stopPropagation){i.stopPropagation()}p(n);if(!e.dragdrop.enabled){n.innerHTML="&nbsp;"}else{n.innerHTML=t.getAttribute("data-fp-drag-text")||"Or drop files here"}t.value="";r(t);return false};if(o.addEventListener){o.addEventListener("click",a,false)}else if(o.attachEvent){o.attachEvent("onclick",a)}n.appendChild(o)};var p=function(e){e.style.border="1px dashed #AAA";e.style.display="inline-block";e.style.margin="0 0 0 4px";e.style.borderRadius="3px";e.style.backgroundColor="#F3F3F3";e.style.color="#333";e.style.fontSize="14px";e.style.lineHeight="22px";e.style.padding="2px 4px";e.style.verticalAlign="middle";e.style.cursor="pointer";e.style.overflow="hidden"};var d=function(t,n,i,o){var a=t.innerHTML;var s;e.dragdrop.makeDropPane(t,{multiple:n,maxSize:i.maxSize,mimetypes:i.mimetypes,mimetype:i.mimetype,extensions:i.extensions,extension:i.extension,location:i.storeLocation,path:i.storePath,container:i.storeContainer,region:i.storeRegion,access:i.storeAccess,policy:i.policy,signature:i.signature,dragEnter:function(){t.innerHTML="Drop to upload";t.style.backgroundColor="#E0E0E0";t.style.border="1px solid #000"},dragLeave:function(){t.innerHTML=a;t.style.backgroundColor="#F3F3F3";t.style.border="1px dashed #AAA"},onError:function(e,r){if(e==="TooManyFiles"){t.innerHTML=r}else if(e==="WrongType"){t.innerHTML=r}else if(e==="NoFilesFound"){t.innerHTML=r}else if(e==="UploadError"){t.innerHTML="Oops! Had trouble uploading."}},onStart:function(e){s=h(t)},onProgress:function(e){if(s){s.style.width=e+"%"}},onSuccess:function(e){var n=[];var i=[];for(var a=0;a<e.length;a++){n.push(e[a].url);i.push(e[a].filename)}o.value=n.join();u(o,t,i.join(", "));r(o,e)}})};var h=function(e){var t=document.createElement("div");var r=e.offsetHeight-2;t.style.height=r+"px";t.style.backgroundColor="#0E90D2";t.style.width="2%";t.style.borderRadius="3px";e.style.width=e.offsetWidth+"px";e.style.padding="0";e.style.border="1px solid #AAA";e.style.backgroundColor="#F3F3F3";e.style.boxShadow="inset 0 1px 2px rgba(0, 0, 0, 0.1)";e.innerHTML="";e.appendChild(t);return t};var m=function(t){t.onclick=function(){var r=t.getAttribute("data-fp-url");if(!r){return true}var n=o(t,"export");e.exportFile(r,n);return false}};var f=function(){if(document.querySelectorAll){var e;var t=document.querySelectorAll('input[type="filepicker"]');for(e=0;e<t.length;e++){s(t[e])}var r=document.querySelectorAll('input[type="filepicker-dragdrop"]');for(e=0;e<r.length;e++){c(r[e])}var n=document.querySelectorAll('input[type="filepicker-convert"]');for(e=0;e<n.length;e++){l(n[e])}var i=[];var o=document.querySelectorAll("button[data-fp-url]");for(e=0;e<o.length;e++){i.push(o[e])}o=document.querySelectorAll("a[data-fp-url]");for(e=0;e<o.length;e++){i.push(o[e])}o=document.querySelectorAll('input[type="button"][data-fp-url]');for(e=0;e<o.length;e++){i.push(o[e])}for(e=0;e<i.length;e++){m(i[e])}var a=document.querySelectorAll('[type="filepicker-preview"][data-fp-url]');for(e=0;e<a.length;e++){y(a[e])}b()}};var g=function(t){if(t.jquery){t=t[0]}var r=t.getAttribute("type");if(r==="filepicker"){s(t)}else if(r==="filepicker-dragdrop"){c(t)}else if(r==="filepicker-preview"){y(t)}else if(t.getAttribute("data-fp-src")){e.responsiveImages.construct(t)}else{m(t)}};var y=function(t){var r=t.getAttribute("data-fp-url"),n=t.getAttribute("data-fp-custom-css");var r=e.util.getFPUrl(r);if(!r||!e.util.isFPUrl(r)){return true}else{r=r.replace("api/file/","api/preview/")}var i=document.createElement("iframe");if(n){r=e.util.appendQueryToUrl(r,"css",n)}i.src=r;i.width="100%";i.height="100%";t.appendChild(i)};function b(){try{var e='.fp__btn{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;height:34px;padding:4px 30px 5px 40px;position:relative;margin-bottom:0;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Open Sans", sans-serif;font-size:12px;font-weight:600;line-height:1.42857143;color:#fff;text-align:center;white-space:nowrap;background:#ef4925;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAVCAYAAABLy77vAAAABGdBTUEAALGPC/xhBQAAAJRJREFUOBHNUcEWgCAIy14fbl9egK5MRarHQS7ocANmOCgWh1gdNERig1CgwPlLxkZuE80ndHlU+4Lda1zz0m01dSKtcz0h7qpQb7WR+HyrqRPxahzwwMqqkEVs6qnv+86NQAbcJlK/X+vMeMe7XcBOYaRzcbItUR7/8QgcykmElQrQPErnmxNxl2yyiwcgEvQUocIJaE6yERwqXDIAAAAASUVORK5CYII=");background-repeat:no-repeat;background-position:15px 6px;border:1px solid transparent;border-radius:17px}.fp__btn:hover{background-color:#d64533}.fp__btn::after{position:absolute;content:"";top:15px;right:14px;width:7px;height:4px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAABGdBTUEAALGPC/xhBQAAAGlJREFUCB1j/P//vw4DA4MiEKOD+0xAkatA/AJNBsS/ysTIyPgfyDgHxO+hCkD0Oag4RAhoPDsQm4NoqCIGBiBnAhBjAxNAkkxAvBZNFsQHuQesmxPIOQZVAKI54UZDFYgABbcBsQhMAgDIVGYSqZsn6wAAAABJRU5ErkJggg==");}.fp__btn:hover::after{background-position:0 -4px;}.fp__btn:active,.fp__btn:focus{outline:none}@media only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2 / 1), only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2){.fp__btn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAqCAYAAADbCvnoAAAABGdBTUEAALGPC/xhBQAAAQFJREFUWAntWEESwjAIbBwfHl+upNoRNjKUJhk5kIvZQGG7bHOwPGltgdYtEJedShKyJnLHhEILz1Zi9HCOzFI7FUqFLAWseDgPdfeQ9QZ4b1j53nstnEJJyBqx20NeT1gEMB5uZG6Fzn5lV5UMp1ASQhMjdnvoqjewsYbDjcytEH5lsxULp1AS0sx8nJfVnjganf3NkVlKhVPIfQ9Zb6jF0atK3mNriXwpicPHvIeyr3sTDA53VgpgH8BvMu1ZCCz7ew/7MPwlE4CQJPNnQj2ZX4SYlEPbVpsvKFZ5TOwhcRoUTQiwwhVjArPEqVvRhMCneMXzDk9lwYphIwrZZOihF32oehMAa1qSAAAAAElFTkSuQmCC");background-size:18px 21px}.fp__btn::after{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAQCAYAAAAmlE46AAAABGdBTUEAALGPC/xhBQAAANpJREFUKBWVkU8KglAYxJ/u3HuBwmUX8BqepKN4ka4RguDOVYu2QVCrhIJ6/caekqLiGxi+PzPD58PAWrszxmygD84h7hpePFLy1mEQBJamgvcVYXkqZXTR0LwpJWw0z0Ba6bymDcrI4kkp4EvzCNoVztNKfVATwoOiyx/NDup1SVqPQVBbDDeK3txBb9JuHfhNW3HWjZhDX+SGRAgPHkl5f0+kieBxRVieaPD5LGJ4WghLiwehbkBI4HUirF3S+SYrhhQ2f2H16aR5vMSYwbdjNtYXZ0J7cc70BXnFMHIGznzEAAAAAElFTkSuQmCC");background-size:7px 8px;}}';var t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(document.createTextNode(e))}t.appendChild(r)}catch(e){}}return{constructPickWidget:s,constructDragWidget:c,constructExportWidget:m,buildWidgets:f,constructWidget:g}}));"use strict";(function(){filepicker.internal((function(){var e=this;e.util.addOnLoad(e.cookies.checkThirdParty);e.util.addOnLoad(e.widgets.buildWidgets);e.util.addOnLoad(e.responsiveImages.activate)}));delete filepicker.internal;delete filepicker.extend;var e=filepicker._queue||[];var t;var r=e.length;if(r){for(var n=0;n<r;n++){t=e[n];filepicker[t[0]].apply(filepicker,t[1])}}if(filepicker._queue){delete filepicker._queue}})()},"./node_modules/filepicker-js/index.js":function(e,t,r){r("./node_modules/filepicker-js/dist/filepicker.js");e.exports=filepicker},"./node_modules/google-code-prettify/bin/prettify.min.js":function(e,t,r){var n,i;!function(){var r=null;window.PR_SHOULD_USE_CONTINUATION=!0;(function(){function o(e){function t(e){var t=e.charCodeAt(0);if(t!==92)return t;var r=e.charAt(1);return(t=p[r])?t:"0"<=r&&r<="7"?parseInt(e.substring(1),8):r==="u"||r==="x"?parseInt(e.substring(2),16):e.charCodeAt(1)}function r(e){if(e<32)return(e<16?"\\x0":"\\x")+e.toString(16);e=String.fromCharCode(e);return e==="\\"||e==="-"||e==="]"||e==="^"?"\\"+e:e}function n(e){var n=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],i=n[0]==="^",o=["["];i&&o.push("^");for(var i=i?1:0,a=n.length;i<a;++i){var s=n[i];if(/\\[bdsw]/i.test(s))o.push(s);else{var s=t(s),l;i+2<a&&"-"===n[i+1]?(l=t(n[i+2]),i+=2):l=s;e.push([s,l]);l<65||s>122||(l<65||s>90||e.push([Math.max(65,s)|32,Math.min(l,90)|32]),l<97||s>122||e.push([Math.max(97,s)&-33,Math.min(l,122)&-33]))}}e.sort((function(e,t){return e[0]-t[0]||t[1]-e[1]}));n=[];a=[];for(i=0;i<e.length;++i)s=e[i],s[0]<=a[1]+1?a[1]=Math.max(a[1],s[1]):n.push(a=s);for(i=0;i<n.length;++i)s=n[i],o.push(r(s[0])),s[1]>s[0]&&(s[1]+1>s[0]&&o.push("-"),o.push(r(s[1])));o.push("]");return o.join("")}function i(e){for(var t=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),i=t.length,s=[],l=0,c=0;l<i;++l){var u=t[l];u==="("?++c:"\\"===u.charAt(0)&&(u=+u.substring(1))&&(u<=c?s[u]=-1:t[l]=r(u))}for(l=1;l<s.length;++l)-1===s[l]&&(s[l]=++o);for(c=l=0;l<i;++l)u=t[l],u==="("?(++c,s[c]||(t[l]="(?:")):"\\"===u.charAt(0)&&(u=+u.substring(1))&&u<=c&&(t[l]="\\"+s[u]);for(l=0;l<i;++l)"^"===t[l]&&"^"!==t[l+1]&&(t[l]="");if(e.ignoreCase&&a)for(l=0;l<i;++l)u=t[l],e=u.charAt(0),u.length>=2&&e==="["?t[l]=n(u):e!=="\\"&&(t[l]=u.replace(/[A-Za-z]/g,(function(e){e=e.charCodeAt(0);return"["+String.fromCharCode(e&-33,e|32)+"]"})));return t.join("")}for(var o=0,a=!1,s=!1,l=0,c=e.length;l<c;++l){var u=e[l];if(u.ignoreCase)s=!0;else if(/[a-z]/i.test(u.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){a=!0;s=!1;break}}for(var p={b:8,t:9,n:10,v:11,f:12,r:13},d=[],l=0,c=e.length;l<c;++l){u=e[l];if(u.global||u.multiline)throw Error(""+u);d.push("(?:"+i(u)+")")}return RegExp(d.join("|"),s?"gi":"g")}function a(e,t){function r(e){var l=e.nodeType;if(l==1){if(!n.test(e.className)){for(l=e.firstChild;l;l=l.nextSibling)r(l);l=e.nodeName.toLowerCase();if("br"===l||"li"===l)i[s]="\n",a[s<<1]=o++,a[s++<<1|1]=e}}else if(l==3||l==4)l=e.nodeValue,l.length&&(l=t?l.replace(/\r\n?/g,"\n"):l.replace(/[\t\n\r ]+/g," "),i[s]=l,a[s<<1]=o,o+=l.length,a[s++<<1|1]=e)}var n=/(?:^|\s)nocode(?:\s|$)/,i=[],o=0,a=[],s=0;r(e);return{a:i.join("").replace(/\n$/,""),d:a}}function s(e,t,r,n){t&&(e={a:t,e:e},r(e),n.push.apply(n,e.g))}function l(e){for(var t=void 0,r=e.firstChild;r;r=r.nextSibling)var n=r.nodeType,t=n===1?t?e:r:n===3?D.test(r.nodeValue)?e:t:t;return t===e?void 0:t}function c(e,t){function n(e){for(var r=e.e,o=[r,"pln"],c=0,u=e.a.match(a)||[],p={},d=0,m=u.length;d<m;++d){var f=u[d],g=p[f],y=void 0,b;if(typeof g==="string")b=!1;else{var v=i[f.charAt(0)];if(v)y=f.match(v[1]),g=v[0];else{for(b=0;b<l;++b)if(v=t[b],y=f.match(v[1])){g=v[0];break}y||(g="pln")}if((b=g.length>=5&&"lang-"===g.substring(0,5))&&!(y&&typeof y[1]==="string"))b=!1,g="src";b||(p[f]=g)}v=c;c+=f.length;if(b){b=y[1];var w=f.indexOf(b),E=w+b.length;y[2]&&(E=f.length-y[2].length,w=E-b.length);g=g.substring(5);s(r+v,f.substring(0,w),n,o);s(r+v+w,b,h(g,b),o);s(r+v+E,f.substring(E),n,o)}else o.push(r+v,g)}e.g=o}var i={},a;(function(){for(var n=e.concat(t),s=[],l={},c=0,u=n.length;c<u;++c){var p=n[c],d=p[3];if(d)for(var h=d.length;--h>=0;)i[d.charAt(h)]=p;p=p[1];d=""+p;l.hasOwnProperty(d)||(s.push(p),l[d]=r)}s.push(/[\S\s]/);a=o(s)})();var l=t.length;return n}function u(e){var t=[],n=[];e.tripleQuotedStrings?t.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,r,"'\""]):e.multiLineStrings?t.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,r,"'\"`"]):t.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,r,"\"'"]);e.verbatimStrings&&n.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,r]);var i=e.hashComments;i&&(e.cStyleComments?(i>1?t.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,r,"#"]):t.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,r,"#"]),n.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,r])):t.push(["com",/^#[^\n\r]*/,r,"#"]));e.cStyleComments&&(n.push(["com",/^\/\/[^\n\r]*/,r]),n.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,r]));if(i=e.regexLiterals){var o=(i=i>1?"":"\n\r")?".":"[\\S\\s]";n.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+i+"])(?:[^/\\x5B\\x5C"+i+"]|\\x5C"+o+"|\\x5B(?:[^\\x5C\\x5D"+i+"]|\\x5C"+o+")*(?:\\x5D|$))+/")+")")])}(i=e.types)&&n.push(["typ",i]);i=(""+e.keywords).replace(/^ | $/g,"");i.length&&n.push(["kwd",RegExp("^(?:"+i.replace(/[\s,]+/g,"|")+")\\b"),r]);t.push(["pln",/^\s+/,r," \r\n\t "]);i="^.[^\\s\\w.$@'\"`/\\\\]*";e.regexLiterals&&(i+="(?!s*/)");n.push(["lit",/^@[$_a-z][\w$@]*/i,r],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,r],["pln",/^[$_a-z][\w$@]*/i,r],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,r,"0123456789"],["pln",/^\\[\S\s]?/,r],["pun",RegExp(i),r]);return c(t,n)}function p(e,t,r){function n(e){var t=e.nodeType;if(t==1&&!o.test(e.className))if("br"===e.nodeName)i(e),e.parentNode&&e.parentNode.removeChild(e);else for(e=e.firstChild;e;e=e.nextSibling)n(e);else if((t==3||t==4)&&r){var l=e.nodeValue,c=l.match(a);if(c)t=l.substring(0,c.index),e.nodeValue=t,(l=l.substring(c.index+c[0].length))&&e.parentNode.insertBefore(s.createTextNode(l),e.nextSibling),i(e),t||e.parentNode.removeChild(e)}}function i(e){function t(e,r){var n=r?e.cloneNode(!1):e,i=e.parentNode;if(i){var i=t(i,1),o=e.nextSibling;i.appendChild(n);for(var a=o;a;a=o)o=a.nextSibling,i.appendChild(a)}return n}for(;!e.nextSibling;)if(e=e.parentNode,!e)return;for(var e=t(e.nextSibling,0),r;(r=e.parentNode)&&r.nodeType===1;)e=r;c.push(e)}for(var o=/(?:^|\s)nocode(?:\s|$)/,a=/\r\n?|\n/,s=e.ownerDocument,l=s.createElement("li");e.firstChild;)l.appendChild(e.firstChild);for(var c=[l],u=0;u<c.length;++u)n(c[u]);t===(t|0)&&c[0].setAttribute("value",t);var p=s.createElement("ol");p.className="linenums";for(var t=Math.max(0,t-1|0)||0,u=0,d=c.length;u<d;++u)l=c[u],l.className="L"+(u+t)%10,l.firstChild||l.appendChild(s.createTextNode(" ")),p.appendChild(l);e.appendChild(p)}function d(e,t){for(var r=t.length;--r>=0;){var n=t[r];T.hasOwnProperty(n)?f.console&&console.warn("cannot override language handler %s",n):T[n]=e}}function h(e,t){if(!e||!T.hasOwnProperty(e))e=/^\s*</.test(t)?"default-markup":"default-code";return T[e]}function m(e){var t=e.h;try{var r=a(e.c,e.i),n=r.a;e.a=n;e.d=r.d;e.e=0;h(t,n)(e);var i=/\bMSIE\s(\d+)/.exec(navigator.userAgent),i=i&&+i[1]<=8,t=/\n/g,o=e.a,s=o.length,r=0,l=e.d,c=l.length,n=0,u=e.g,p=u.length,d=0;u[p]=s;var m,g;for(g=m=0;g<p;)u[g]!==u[g+2]?(u[m++]=u[g++],u[m++]=u[g++]):g+=2;p=m;for(g=m=0;g<p;){for(var y=u[g],b=u[g+1],v=g+2;v+2<=p&&u[v+1]===b;)v+=2;u[m++]=y;u[m++]=b;g=v}u.length=m;var w=e.c,E;if(w)E=w.style.display,w.style.display="none";try{for(;n<c;){var S=l[n+2]||s,_=u[d+2]||s,v=Math.min(S,_),x=l[n+1],D;if(x.nodeType!==1&&(D=o.substring(r,v))){i&&(D=D.replace(t,"\r"));x.nodeValue=D;var C=x.ownerDocument,T=C.createElement("span");T.className=u[d+1];var O=x.parentNode;O.replaceChild(T,x);T.appendChild(x);r<S&&(l[n+1]=x=C.createTextNode(o.substring(v,S)),O.insertBefore(x,T.nextSibling))}r=v;r>=S&&(n+=2);r>=_&&(d+=2)}}finally{if(w)w.style.display=E}}catch(e){f.console&&console.log(e&&e.stack||e)}}var f=window,g=["break,continue,do,else,for,if,return,while"],y=[[g,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],b=[y,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],v=[y,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],w=[v,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],y=[y,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],E=[g,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],S=[g,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],_=[g,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],g=[g,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],x=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,D=/\S/,C=u({keywords:[b,w,y,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",E,S,g],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),T={};d(C,["default-code"]);d(c([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]);d(c([["pln",/^\s+/,r," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,r,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]);d(c([],[["atv",/^[\S\s]+/]]),["uq.val"]);d(u({keywords:b,hashComments:!0,cStyleComments:!0,types:x}),["c","cc","cpp","cxx","cyc","m"]);d(u({keywords:"null,true,false"}),["json"]);d(u({keywords:w,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:x}),["cs"]);d(u({keywords:v,cStyleComments:!0}),["java"]);d(u({keywords:g,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]);d(u({keywords:E,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]);d(u({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]);d(u({keywords:S,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]);d(u({keywords:y,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]);d(u({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]);d(u({keywords:_,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]);d(c([],[["str",/^[\S\s]+/]]),["regex"]);var O=f.PR={createSimpleLexer:c,registerLangHandler:d,sourceDecorator:u,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:f.prettyPrintOne=function(e,t,r){var n=document.createElement("div");n.innerHTML="<pre>"+e+"</pre>";n=n.firstChild;r&&p(n,r,!0);m({h:t,j:r,c:n,i:1});return n.innerHTML},prettyPrint:f.prettyPrint=function(e,t){function n(){for(var t=f.PR_SHOULD_USE_CONTINUATION?d.now()+250:Infinity;h<a.length&&d.now()<t;h++){for(var i=a[h],s=_,c=i;c=c.previousSibling;){var u=c.nodeType,x=(u===7||u===8)&&c.nodeValue;if(x?!/^\??prettify\b/.test(x):u!==3||/\S/.test(c.nodeValue))break;if(x){s={};x.replace(/\b(\w+)=([\w%+\-.:]+)/g,(function(e,t,r){s[t]=r}));break}}c=i.className;if((s!==_||b.test(c))&&!v.test(c)){u=!1;for(x=i.parentNode;x;x=x.parentNode)if(S.test(x.tagName)&&x.className&&b.test(x.className)){u=!0;break}if(!u){i.className+=" prettyprinted";u=s.lang;if(!u){var u=c.match(y),D;if(!u&&(D=l(i))&&E.test(D.tagName))u=D.className.match(y);u&&(u=u[1])}if(w.test(i.tagName))x=1;else var x=i.currentStyle,C=o.defaultView,x=(x=x?x.whiteSpace:C&&C.getComputedStyle?C.getComputedStyle(i,r).getPropertyValue("white-space"):0)&&"pre"===x.substring(0,3);C=s.linenums;if(!(C=C==="true"||+C))C=(C=c.match(/\blinenums\b(?::(\d+))?/))?C[1]&&C[1].length?+C[1]:!0:!1;C&&p(i,C,x);g={h:u,c:i,j:C,i:x};m(g)}}}h<a.length?setTimeout(n,250):"function"===typeof e&&e()}for(var i=t||document.body,o=i.ownerDocument||document,i=[i.getElementsByTagName("pre"),i.getElementsByTagName("code"),i.getElementsByTagName("xmp")],a=[],s=0;s<i.length;++s)for(var c=0,u=i[s].length;c<u;++c)a.push(i[s][c]);var i=r,d=Date;d.now||(d={now:function(){return+new Date}});var h=0,g,y=/\blang(?:uage)?-([\w.]+)(?!\S)/,b=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,E=/^code$/i,S=/^(?:pre|code|xmp)$/i,_={};n()}};true&&!(n=[],i=function(){return O}.apply(t,n),i!==undefined&&(e.exports=i))})()}()},"./node_modules/is-function/index.js":function(e,t){e.exports=n;var r=Object.prototype.toString;function n(e){var t=r.call(e);return t==="[object Function]"||typeof e==="function"&&t!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}},"./node_modules/keycode/index.js":function(e,t){function r(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;if(t)e=t}if("number"===typeof e)return a[e];var r=String(e);var o=n[r.toLowerCase()];if(o)return o;var o=i[r.toLowerCase()];if(o)return o;if(r.length===1)return r.charCodeAt(0);return undefined}r.isEventKey=function e(t,r){if(t&&"object"===typeof t){var o=t.which||t.keyCode||t.charCode;if(o===null||o===undefined){return false}if(typeof r==="string"){var a=n[r.toLowerCase()];if(a){return a===o}var a=i[r.toLowerCase()];if(a){return a===o}}else if(typeof r==="number"){return r===o}return false}};t=e.exports=r;var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var a=t.names=t.title={};for(o in n)a[n[o]]=o;for(var s in i){n[s]=i[s]}},"./node_modules/react-fast-compare/index.js":function(e,t){var r=typeof Element!=="undefined";var n=typeof Map==="function";var i=typeof Set==="function";var o=typeof ArrayBuffer==="function"&&!!ArrayBuffer.isView;function a(e,t){if(e===t)return true;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return false;var s,l,c;if(Array.isArray(e)){s=e.length;if(s!=t.length)return false;for(l=s;l--!==0;)if(!a(e[l],t[l]))return false;return true}var u;if(n&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return false;u=e.entries();while(!(l=u.next()).done)if(!t.has(l.value[0]))return false;u=e.entries();while(!(l=u.next()).done)if(!a(l.value[1],t.get(l.value[0])))return false;return true}if(i&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return false;u=e.entries();while(!(l=u.next()).done)if(!t.has(l.value[0]))return false;return true}if(o&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){s=e.length;if(s!=t.length)return false;for(l=s;l--!==0;)if(e[l]!==t[l])return false;return true}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();c=Object.keys(e);s=c.length;if(s!==Object.keys(t).length)return false;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[l]))return false;if(r&&e instanceof Element)return false;for(l=s;l--!==0;){if((c[l]==="_owner"||c[l]==="__v"||c[l]==="__o")&&e.$$typeof){continue}if(!a(e[c[l]],t[c[l]]))return false}return true}return e!==e&&t!==t}e.exports=function e(t,r){try{return a(t,r)}catch(e){if((e.message||"").match(/stack|recursion/i)){console.warn("react-fast-compare cannot handle circular refs");return false}throw e}}},"./node_modules/react-helmet/es/Helmet.js":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return se}));var n=r("./node_modules/prop-types/index.js");var i=r.n(n);var o=r("./node_modules/react-side-effect/lib/index.js");var a=r.n(o);var s=r("./node_modules/react-fast-compare/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./node_modules/object-assign/index.js");var d=r.n(p);var h={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var m={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};var f=Object.keys(m).map((function(e){return m[e]}));var g={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"};var y={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"};var b={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"};var v=Object.keys(y).reduce((function(e,t){e[y[t]]=t;return e}),{});var w=[m.NOSCRIPT,m.SCRIPT,m.STYLE];var E="data-react-helmet";var S=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var _=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var x=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var C=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var T=function(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r};var O=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var k=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(r===false){return String(t)}return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")};var P=function e(t){var r=N(t,m.TITLE);var n=N(t,b.TITLE_TEMPLATE);if(n&&r){return n.replace(/%s/g,(function(){return Array.isArray(r)?r.join(""):r}))}var i=N(t,b.DEFAULT_TITLE);return r||i||undefined};var A=function e(t){return N(t,b.ON_CHANGE_CLIENT_STATE)||function(){}};var I=function e(t,r){return r.filter((function(e){return typeof e[t]!=="undefined"})).map((function(e){return e[t]})).reduce((function(e,t){return D({},e,t)}),{})};var j=function e(t,r){return r.filter((function(e){return typeof e[m.BASE]!=="undefined"})).map((function(e){return e[m.BASE]})).reverse().reduce((function(e,r){if(!e.length){var n=Object.keys(r);for(var i=0;i<n.length;i++){var o=n[i];var a=o.toLowerCase();if(t.indexOf(a)!==-1&&r[a]){return e.concat(r)}}}return e}),[])};var R=function e(t,r,n){var i={};return n.filter((function(e){if(Array.isArray(e[t])){return true}if(typeof e[t]!=="undefined"){F("Helmet: "+t+' should be of type "Array". Instead found type "'+S(e[t])+'"')}return false})).map((function(e){return e[t]})).reverse().reduce((function(e,t){var n={};t.filter((function(e){var t=void 0;var o=Object.keys(e);for(var a=0;a<o.length;a++){var s=o[a];var l=s.toLowerCase();if(r.indexOf(l)!==-1&&!(t===g.REL&&e[t].toLowerCase()==="canonical")&&!(l===g.REL&&e[l].toLowerCase()==="stylesheet")){t=l}if(r.indexOf(s)!==-1&&(s===g.INNER_HTML||s===g.CSS_TEXT||s===g.ITEM_PROP)){t=s}}if(!t||!e[t]){return false}var c=e[t].toLowerCase();if(!i[t]){i[t]={}}if(!n[t]){n[t]={}}if(!i[t][c]){n[t][c]=true;return true}return false})).reverse().forEach((function(t){return e.push(t)}));var o=Object.keys(n);for(var a=0;a<o.length;a++){var s=o[a];var l=d()({},i[s],n[s]);i[s]=l}return e}),[]).reverse()};var N=function e(t,r){for(var n=t.length-1;n>=0;n--){var i=t[n];if(i.hasOwnProperty(r)){return i[r]}}return null};var L=function e(t){return{baseTag:j([g.HREF,g.TARGET],t),bodyAttributes:I(h.BODY,t),defer:N(t,b.DEFER),encode:N(t,b.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:I(h.HTML,t),linkTags:R(m.LINK,[g.REL,g.HREF],t),metaTags:R(m.META,[g.NAME,g.CHARSET,g.HTTPEQUIV,g.PROPERTY,g.ITEM_PROP],t),noscriptTags:R(m.NOSCRIPT,[g.INNER_HTML],t),onChangeClientState:A(t),scriptTags:R(m.SCRIPT,[g.SRC,g.INNER_HTML],t),styleTags:R(m.STYLE,[g.CSS_TEXT],t),title:P(t),titleAttributes:I(h.TITLE,t)}};var M=function(){var e=Date.now();return function(t){var r=Date.now();if(r-e>16){e=r;t(r)}else{setTimeout((function(){M(t)}),0)}}}();var q=function e(t){return clearTimeout(t)};var U=typeof window!=="undefined"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||M:e.requestAnimationFrame||M;var H=typeof window!=="undefined"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||q:e.cancelAnimationFrame||q;var F=function e(t){return console&&typeof console.warn==="function"&&console.warn(t)};var B=null;var z=function e(t){if(B){H(B)}if(t.defer){B=U((function(){V(t,(function(){B=null}))}))}else{V(t);B=null}};var V=function e(t,r){var n=t.baseTag,i=t.bodyAttributes,o=t.htmlAttributes,a=t.linkTags,s=t.metaTags,l=t.noscriptTags,c=t.onChangeClientState,u=t.scriptTags,p=t.styleTags,d=t.title,h=t.titleAttributes;K(m.BODY,i);K(m.HTML,o);G(d,h);var f={baseTag:$(m.BASE,n),linkTags:$(m.LINK,a),metaTags:$(m.META,s),noscriptTags:$(m.NOSCRIPT,l),scriptTags:$(m.SCRIPT,u),styleTags:$(m.STYLE,p)};var g={};var y={};Object.keys(f).forEach((function(e){var t=f[e],r=t.newTags,n=t.oldTags;if(r.length){g[e]=r}if(n.length){y[e]=f[e].oldTags}}));r&&r();c(t,g,y)};var W=function e(t){return Array.isArray(t)?t.join(""):t};var G=function e(t,r){if(typeof t!=="undefined"&&document.title!==t){document.title=W(t)}K(m.TITLE,r)};var K=function e(t,r){var n=document.getElementsByTagName(t)[0];if(!n){return}var i=n.getAttribute(E);var o=i?i.split(","):[];var a=[].concat(o);var s=Object.keys(r);for(var l=0;l<s.length;l++){var c=s[l];var u=r[c]||"";if(n.getAttribute(c)!==u){n.setAttribute(c,u)}if(o.indexOf(c)===-1){o.push(c)}var p=a.indexOf(c);if(p!==-1){a.splice(p,1)}}for(var d=a.length-1;d>=0;d--){n.removeAttribute(a[d])}if(o.length===a.length){n.removeAttribute(E)}else if(n.getAttribute(E)!==s.join(",")){n.setAttribute(E,s.join(","))}};var $=function e(t,r){var n=document.head||document.querySelector(m.HEAD);var i=n.querySelectorAll(t+"["+E+"]");var o=Array.prototype.slice.call(i);var a=[];var s=void 0;if(r&&r.length){r.forEach((function(e){var r=document.createElement(t);for(var n in e){if(e.hasOwnProperty(n)){if(n===g.INNER_HTML){r.innerHTML=e.innerHTML}else if(n===g.CSS_TEXT){if(r.styleSheet){r.styleSheet.cssText=e.cssText}else{r.appendChild(document.createTextNode(e.cssText))}}else{var i=typeof e[n]==="undefined"?"":e[n];r.setAttribute(n,i)}}}r.setAttribute(E,"true");if(o.some((function(e,t){s=t;return r.isEqualNode(e)}))){o.splice(s,1)}else{a.push(r)}}))}o.forEach((function(e){return e.parentNode.removeChild(e)}));a.forEach((function(e){return n.appendChild(e)}));return{oldTags:o,newTags:a}};var X=function e(t){return Object.keys(t).reduce((function(e,r){var n=typeof t[r]!=="undefined"?r+'="'+t[r]+'"':""+r;return e?e+" "+n:n}),"")};var Y=function e(t,r,n,i){var o=X(n);var a=W(r);return o?"<"+t+" "+E+'="true" '+o+">"+k(a,i)+"</"+t+">":"<"+t+" "+E+'="true">'+k(a,i)+"</"+t+">"};var Q=function e(t,r,n){return r.reduce((function(e,r){var i=Object.keys(r).filter((function(e){return!(e===g.INNER_HTML||e===g.CSS_TEXT)})).reduce((function(e,t){var i=typeof r[t]==="undefined"?t:t+'="'+k(r[t],n)+'"';return e?e+" "+i:i}),"");var o=r.innerHTML||r.cssText||"";var a=w.indexOf(t)===-1;return e+"<"+t+" "+E+'="true" '+i+(a?"/>":">"+o+"</"+t+">")}),"")};var J=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.keys(t).reduce((function(e,r){e[y[r]||r]=t[r];return e}),r)};var Z=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return Object.keys(t).reduce((function(e,r){e[v[r]||r]=t[r];return e}),r)};var ee=function e(t,r,n){var i;var o=(i={key:r},i[E]=true,i);var a=J(n,o);return[u.a.createElement(m.TITLE,a,r)]};var te=function e(t,r){return r.map((function(e,r){var n;var i=(n={key:r},n[E]=true,n);Object.keys(e).forEach((function(t){var r=y[t]||t;if(r===g.INNER_HTML||r===g.CSS_TEXT){var n=e.innerHTML||e.cssText;i.dangerouslySetInnerHTML={__html:n}}else{i[r]=e[t]}}));return u.a.createElement(t,i)}))};var re=function e(t,r,n){switch(t){case m.TITLE:return{toComponent:function e(){return ee(t,r.title,r.titleAttributes,n)},toString:function e(){return Y(t,r.title,r.titleAttributes,n)}};case h.BODY:case h.HTML:return{toComponent:function e(){return J(r)},toString:function e(){return X(r)}};default:return{toComponent:function e(){return te(t,r)},toString:function e(){return Q(t,r,n)}}}};var ne=function e(t){var r=t.baseTag,n=t.bodyAttributes,i=t.encode,o=t.htmlAttributes,a=t.linkTags,s=t.metaTags,l=t.noscriptTags,c=t.scriptTags,u=t.styleTags,p=t.title,d=p===undefined?"":p,f=t.titleAttributes;return{base:re(m.BASE,r,i),bodyAttributes:re(h.BODY,n,i),htmlAttributes:re(h.HTML,o,i),link:re(m.LINK,a,i),meta:re(m.META,s,i),noscript:re(m.NOSCRIPT,l,i),script:re(m.SCRIPT,c,i),style:re(m.STYLE,u,i),title:re(m.TITLE,{title:d,titleAttributes:f},i)}};var ie=function e(t){var r,n;return n=r=function(e){C(r,e);function r(){_(this,r);return O(this,e.apply(this,arguments))}r.prototype.shouldComponentUpdate=function e(t){return!l()(this.props,t)};r.prototype.mapNestedChildrenToProps=function e(t,r){if(!r){return null}switch(t.type){case m.SCRIPT:case m.NOSCRIPT:return{innerHTML:r};case m.STYLE:return{cssText:r}}throw new Error("<"+t.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")};r.prototype.flattenArrayTypeChildren=function e(t){var r;var n=t.child,i=t.arrayTypeChildren,o=t.newChildProps,a=t.nestedChildren;return D({},i,(r={},r[n.type]=[].concat(i[n.type]||[],[D({},o,this.mapNestedChildrenToProps(n,a))]),r))};r.prototype.mapObjectTypeChildren=function e(t){var r,n;var i=t.child,o=t.newProps,a=t.newChildProps,s=t.nestedChildren;switch(i.type){case m.TITLE:return D({},o,(r={},r[i.type]=s,r.titleAttributes=D({},a),r));case m.BODY:return D({},o,{bodyAttributes:D({},a)});case m.HTML:return D({},o,{htmlAttributes:D({},a)})}return D({},o,(n={},n[i.type]=D({},a),n))};r.prototype.mapArrayTypeChildrenToProps=function e(t,r){var n=D({},r);Object.keys(t).forEach((function(e){var r;n=D({},n,(r={},r[e]=t[e],r))}));return n};r.prototype.warnOnInvalidChildren=function e(t,r){if(false){}return true};r.prototype.mapChildrenToProps=function e(t,r){var n=this;var i={};u.a.Children.forEach(t,(function(e){if(!e||!e.props){return}var t=e.props,o=t.children,a=T(t,["children"]);var s=Z(a);n.warnOnInvalidChildren(e,o);switch(e.type){case m.LINK:case m.META:case m.NOSCRIPT:case m.SCRIPT:case m.STYLE:i=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:i,newChildProps:s,nestedChildren:o});break;default:r=n.mapObjectTypeChildren({child:e,newProps:r,newChildProps:s,nestedChildren:o});break}}));r=this.mapArrayTypeChildrenToProps(i,r);return r};r.prototype.render=function e(){var r=this.props,n=r.children,i=T(r,["children"]);var o=D({},i);if(n){o=this.mapChildrenToProps(n,o)}return u.a.createElement(t,o)};x(r,null,[{key:"canUseDOM",set:function e(r){t.canUseDOM=r}}]);return r}(u.a.Component),r.propTypes={base:i.a.object,bodyAttributes:i.a.object,children:i.a.oneOfType([i.a.arrayOf(i.a.node),i.a.node]),defaultTitle:i.a.string,defer:i.a.bool,encodeSpecialCharacters:i.a.bool,htmlAttributes:i.a.object,link:i.a.arrayOf(i.a.object),meta:i.a.arrayOf(i.a.object),noscript:i.a.arrayOf(i.a.object),onChangeClientState:i.a.func,script:i.a.arrayOf(i.a.object),style:i.a.arrayOf(i.a.object),title:i.a.string,titleAttributes:i.a.object,titleTemplate:i.a.string},r.defaultProps={defer:true,encodeSpecialCharacters:true},r.peek=t.peek,r.rewind=function(){var e=t.rewind();if(!e){e=ne({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:true,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})}return e},n};var oe=function e(){return null};var ae=a()(L,z,ne)(oe);var se=ie(ae);se.renderStatic=se.rewind;var le=se}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/react-image-crop/dist/ReactCrop.js":function(e,t,r){(function t(n,i){if(true)e.exports=i(r("./node_modules/react/index.js"));else{}})(this,(function(e){return function(e){var t={};function r(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,r);i.l=true;return i.exports}r.m=e;r.c=t;r.d=function(e,t,n){if(!r.o(e,t)){Object.defineProperty(e,t,{configurable:false,enumerable:true,get:n})}};r.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};r.d(t,"a",t);return t};r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};r.p="";return r(r.s=5)}([function(e,t){var r=e.exports={};var n;var i;function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){n=setTimeout}else{n=o}}catch(e){n=o}try{if(typeof clearTimeout==="function"){i=clearTimeout}else{i=a}}catch(e){i=a}})();function s(e){if(n===setTimeout){return setTimeout(e,0)}if((n===o||!n)&&setTimeout){n=setTimeout;return setTimeout(e,0)}try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function l(e){if(i===clearTimeout){return clearTimeout(e)}if((i===a||!i)&&clearTimeout){i=clearTimeout;return clearTimeout(e)}try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}var c=[];var u=false;var p;var d=-1;function h(){if(!u||!p){return}u=false;if(p.length){c=p.concat(c)}else{d=-1}if(c.length){m()}}function m(){if(u){return}var e=s(h);u=true;var t=c.length;while(t){p=c;c=[];while(++d<t){if(p){p[d].run()}}d=-1;t=c.length}p=null;u=false;l(e)}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var r=1;r<arguments.length;r++){t[r-1]=arguments[r]}}c.push(new f(e,t));if(c.length===1&&!u){s(m)}};function f(e,t){this.fun=e;this.array=t}f.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=true;r.env={};r.argv=[];r.version="";r.versions={};function g(){}r.on=g;r.addListener=g;r.once=g;r.off=g;r.removeListener=g;r.removeAllListeners=g;r.emit=g;r.prependListener=g;r.prependOnceListener=g;r.listeners=function(e){return[]};r.binding=function(e){throw new Error("process.binding is not supported")};r.cwd=function(){return"/"};r.chdir=function(e){throw new Error("process.chdir is not supported")};r.umask=function(){return 0}},function(e,t,r){"use strict";function n(e){return function(){return e}}var i=function e(){};i.thatReturns=n;i.thatReturnsFalse=n(false);i.thatReturnsTrue=n(true);i.thatReturnsNull=n(null);i.thatReturnsThis=function(){return this};i.thatReturnsArgument=function(e){return e};e.exports=i},function(e,t,r){"use strict";(function(t){var r=function e(t){};if(t.env.NODE_ENV!=="production"){r=function e(t){if(t===undefined){throw new Error("invariant requires an error message argument")}}}function n(e,t,n,i,o,a,s,l){r(t);if(!e){var c;if(t===undefined){c=new Error("Minified exception occurred; use the non-minified dev environment "+"for the full error message and additional helpful warnings.")}else{var u=[n,i,o,a,s,l];var p=0;c=new Error(t.replace(/%s/g,(function(){return u[p++]})));c.name="Invariant Violation"}c.framesToPop=1;throw c}}e.exports=n}).call(t,r(0))},function(e,t,r){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=n},function(e,t,r){"use strict";(function(t){var n=r(1);var i=n;if(t.env.NODE_ENV!=="production"){var o=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}var o=0;var a="Warning: "+t.replace(/%s/g,(function(){return n[o++]}));if(typeof console!=="undefined"){console.error(a)}try{throw new Error(a)}catch(e){}};i=function e(t,r){if(r===undefined){throw new Error("`warning(condition, format, ...args)` requires a warning "+"message argument")}if(r.indexOf("Failed Composite propType: ")===0){return}if(!t){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++){i[a-2]=arguments[a]}o.apply(undefined,[r].concat(i))}}}e.exports=i}).call(t,r(0))},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=r(6);var a=c(o);var s=r(7);var l=c(s);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function m(e){var t=e.getBoundingClientRect();var r=document.documentElement;var n=t.top+window.pageYOffset-r.clientTop;var i=t.left+window.pageXOffset-r.clientLeft;return{top:n,left:i}}function f(e){var t=void 0;var r=void 0;if(e.touches){t=e.touches[0].pageX;r=e.touches[0].pageY}else{t=e.pageX;r=e.pageY}return{x:t,y:r}}function g(e,t,r){return Math.min(Math.max(e,t),r)}function y(e){return e&&e.width&&e.height}function b(e){var t=void 0;if(e==="n")t="s";else if(e==="ne")t="sw";else if(e==="e")t="w";else if(e==="se")t="nw";else if(e==="s")t="n";else if(e==="sw")t="ne";else if(e==="w")t="e";else if(e==="nw")t="se";return t}function v(e,t){var r=i({},e);if(e.width){r.height=e.width/e.aspect*t}if(e.height){r.width=(r.height||e.height)*e.aspect/t}if(e.y+(r.height||e.height)>100){r.height=100-e.y;r.width=r.height*e.aspect/t}if(e.x+(r.width||e.width)>100){r.width=100-e.x;r.height=r.width/e.aspect*t}return r}function w(e,t){var r=i({},e);var n=false;if(r.x+r.width>100){r.width=e.width+(100-(e.x+e.width));r.x=e.x+(100-(e.x+r.width));n=true}else if(r.x<0){r.width=e.x+e.width;r.x=0;n=true}if(n&&e.aspect){r.height=r.width/e.aspect*t;if(r.y<e.y){r.y=e.y+(e.height-r.height)}}var o=false;if(r.y+r.height>100){r.height=e.height+(100-(e.y+e.height));r.y=e.y+(100-(e.y+r.height));o=true}else if(r.y<0){r.height=e.y+e.height;r.y=0;o=true}if(o&&e.aspect){r.width=r.height*e.aspect/t;if(r.x<e.x){r.x=e.x+(e.width-r.width)}}return r}var E=function(e){d(t,e);function t(){var e;var r,n,i;u(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++){a[s]=arguments[s]}return i=(r=(n=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n),n.state={},n.onCropMouseTouchDown=function(e){var t=n.props,r=t.crop,i=t.disabled;if(i){return}e.preventDefault();var o=f(e);n.componentRef.focus();var a=e.target.dataset.ord;var s=a==="nw"||a==="w"||a==="sw";var l=a==="nw"||a==="n"||a==="ne";var c=void 0;if(r.aspect){c=m(n.cropSelectRef)}n.evData={clientStartX:o.x,clientStartY:o.y,cropStartWidth:r.width,cropStartHeight:r.height,cropStartX:s?r.x+r.width:r.x,cropStartY:l?r.y+r.height:r.y,xInversed:s,yInversed:l,xCrossOver:s,yCrossOver:l,startXCrossOver:s,startYCrossOver:l,isResize:e.target!==n.cropSelectRef,ord:a,cropOffset:c};n.mouseDownOnCrop=true;n.setState({cropIsActive:true})},n.onComponentMouseTouchDown=function(e){var t=n.props,r=t.crop,i=t.disabled,o=t.keepSelection,a=t.onChange;if(e.target!==n.imageRef){return}if(i||o&&y(r)){return}e.preventDefault();var s=f(e);n.componentRef.focus();var l=m(n.imageRef);var c=(s.x-l.left)/n.imageRef.width*100;var u=(s.y-l.top)/n.imageRef.height*100;var p={aspect:r?r.aspect:undefined,x:c,y:u,width:0,height:0};n.evData={clientStartX:s.x,clientStartY:s.y,cropStartWidth:p.width,cropStartHeight:p.height,cropStartX:p.x,cropStartY:p.y,xInversed:false,yInversed:false,xCrossOver:false,yCrossOver:false,startXCrossOver:false,startYCrossOver:false,isResize:true,ord:"nw"};n.mouseDownOnCrop=true;a(p,n.getPixelCrop(p));n.setState({cropIsActive:true})},n.onDocMouseTouchMove=function(e){var t=n.props,r=t.crop,i=t.disabled,o=t.onChange,a=t.onDragStart;a();if(i){return}if(!n.mouseDownOnCrop){return}e.preventDefault();var s=n.evData;var l=f(e);if(s.isResize&&r.aspect&&s.cropOffset){l.y=n.straightenYPath(l.x)}var c=l.x-s.clientStartX;s.xDiffPc=c/n.imageRef.width*100;var u=l.y-s.clientStartY;s.yDiffPc=u/n.imageRef.height*100;var p=void 0;if(s.isResize){p=n.resizeCrop()}else{p=n.dragCrop()}o(p,n.getPixelCrop(p))},n.onComponentKeyDown=function(e){var r=n.props,i=r.crop,o=r.disabled,a=r.onChange,s=r.onComplete;if(o){return}var l=e.which;var c=false;if(!y(i)){return}var u=n.makeNewCrop();if(l===t.arrowKey.left){u.x-=t.nudgeStep;c=true}else if(l===t.arrowKey.right){u.x+=t.nudgeStep;c=true}else if(l===t.arrowKey.up){u.y-=t.nudgeStep;c=true}else if(l===t.arrowKey.down){u.y+=t.nudgeStep;c=true}if(c){e.preventDefault();u.x=g(u.x,0,100-u.width);u.y=g(u.y,0,100-u.height);a(u,n.getPixelCrop(u));s(u,n.getPixelCrop(u))}},n.onDocMouseTouchEnd=function(){var e=n.props,t=e.crop,r=e.disabled,i=e.onComplete,o=e.onDragEnd;o();if(r){return}if(n.mouseDownOnCrop){n.mouseDownOnCrop=false;i(t,n.getPixelCrop(t));n.setState({cropIsActive:false})}},r),p(n,i)}n(t,[{key:"componentDidMount",value:function e(){document.addEventListener("mousemove",this.onDocMouseTouchMove);document.addEventListener("touchmove",this.onDocMouseTouchMove);document.addEventListener("mouseup",this.onDocMouseTouchEnd);document.addEventListener("touchend",this.onDocMouseTouchEnd);document.addEventListener("touchcancel",this.onDocMouseTouchEnd);if(this.imageRef.complete||this.imageRef.readyState){if(this.imageRef.naturalWidth===0){var t=this.imageRef.src;this.imageRef.src=h;this.imageRef.src=t}else{this.onImageLoad(this.imageRef)}}}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("mousemove",this.onDocMouseTouchMove);document.removeEventListener("touchmove",this.onDocMouseTouchMove);document.removeEventListener("mouseup",this.onDocMouseTouchEnd);document.removeEventListener("touchend",this.onDocMouseTouchEnd);document.removeEventListener("touchcancel",this.onDocMouseTouchEnd)}},{key:"onImageLoad",value:function e(t){this.props.onImageLoaded(t)}},{key:"getPixelCrop",value:function e(t){var r=this.imageRef;return{x:Math.round(r.naturalWidth*(t.x/100)),y:Math.round(r.naturalHeight*(t.y/100)),width:Math.round(r.naturalWidth*(t.width/100)),height:Math.round(r.naturalHeight*(t.height/100))}}},{key:"getCropStyle",value:function e(){var t=this.props.crop;return{top:t.y+"%",left:t.x+"%",width:t.width+"%",height:t.height+"%"}}},{key:"getNewSize",value:function e(){var t=this.props,r=t.crop,n=t.minWidth,i=t.maxWidth,o=t.minHeight,a=t.maxHeight;var s=this.evData;var l=this.imageRef.width/this.imageRef.height;var c=s.cropStartWidth+s.xDiffPc;if(s.xCrossOver){c=Math.abs(c)}c=g(c,n,i);var u=void 0;if(r.aspect){u=c/r.aspect*l}else{u=s.cropStartHeight+s.yDiffPc}if(s.yCrossOver){u=Math.min(Math.abs(u),s.cropStartY)}u=g(u,o,a);if(r.aspect){c=g(u*r.aspect/l,0,100)}return{width:c,height:u}}},{key:"dragCrop",value:function e(){var t=this.makeNewCrop();var r=this.evData;t.x=g(r.cropStartX+r.xDiffPc,0,100-t.width);t.y=g(r.cropStartY+r.yDiffPc,0,100-t.height);return t}},{key:"resizeCrop",value:function e(){var r=this.props.crop;var n=this.makeNewCrop();var i=this.evData;var o=i.ord;var a=this.imageRef.width/this.imageRef.height;if(i.xInversed){i.xDiffPc-=i.cropStartWidth*2}if(i.yInversed){i.yDiffPc-=i.cropStartHeight*2}var s=this.getNewSize();var l=i.cropStartX;var c=i.cropStartY;if(i.xCrossOver){l=n.x+(n.width-s.width)}if(i.yCrossOver){if(i.lastYCrossover===false){c=n.y-s.height}else{c=n.y+(n.height-s.height)}}var u=w({x:l,y:c,width:s.width,height:s.height,aspect:n.aspect},a);if(n.aspect||t.xyOrds.indexOf(o)>-1){n.x=u.x;n.y=u.y;n.width=u.width;n.height=u.height}else if(t.xOrds.indexOf(o)>-1){n.x=u.x;n.width=u.width}else if(t.yOrds.indexOf(o)>-1){n.y=u.y;n.height=u.height}i.lastYCrossover=i.yCrossOver;this.crossOverCheck();return n}},{key:"straightenYPath",value:function e(t){var r=this.evData;var n=r.ord;var i=r.cropOffset;var o=r.cropStartWidth/100*this.imageRef.width;var a=r.cropStartHeight/100*this.imageRef.height;var s=void 0;var l=void 0;if(n==="nw"||n==="se"){s=a/o;l=i.top-i.left*s}else{s=-a/o;l=i.top+(a-i.left*s)}return s*t+l}},{key:"createCropSelection",value:function e(){var t=this;var r=this.props.disabled;var n=this.getCropStyle();return a.default.createElement("div",{ref:function e(r){t.cropSelectRef=r},style:n,className:"ReactCrop__crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown},!r&&a.default.createElement("div",{className:"ReactCrop__drag-elements"},a.default.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),a.default.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),a.default.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),a.default.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw"}),a.default.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w"})))}},{key:"makeNewCrop",value:function e(){return i({},t.defaultCrop,this.props.crop)}},{key:"crossOverCheck",value:function e(){var t=this.evData;if(!t.xCrossOver&&-Math.abs(t.cropStartWidth)-t.xDiffPc>=0||t.xCrossOver&&-Math.abs(t.cropStartWidth)-t.xDiffPc<=0){t.xCrossOver=!t.xCrossOver}if(!t.yCrossOver&&-Math.abs(t.cropStartHeight)-t.yDiffPc>=0||t.yCrossOver&&-Math.abs(t.cropStartHeight)-t.yDiffPc<=0){t.yCrossOver=!t.yCrossOver}var r=t.xCrossOver!==t.startXCrossOver;var n=t.yCrossOver!==t.startYCrossOver;t.inversedXOrd=r?b(t.ord):false;t.inversedYOrd=n?b(t.ord):false}},{key:"render",value:function e(){var t=this;var r=this.props,n=r.children,i=r.crossorigin,o=r.crop,s=r.disabled,l=r.imageAlt,c=r.src,u=r.style,p=r.imageStyle;var d=this.state.cropIsActive;var h=void 0;if(y(o)){h=this.createCropSelection()}var m=["ReactCrop"];if(d){m.push("ReactCrop--active")}if(o){if(o.aspect){m.push("ReactCrop--fixed-aspect")}if(d&&(!o.width||!o.height)){m.push("ReactCrop--crop-invisible")}}if(s){m.push("ReactCrop--disabled")}return a.default.createElement("div",{ref:function e(r){t.componentRef=r},className:m.join(" "),style:u,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,tabIndex:"1",onKeyDown:this.onComponentKeyDown},a.default.createElement("img",{ref:function e(r){t.imageRef=r},crossOrigin:i,className:"ReactCrop__image",style:p,src:c,onLoad:function e(r){return t.onImageLoad(r.target)},alt:l}),h,n)}}]);return t}(o.PureComponent);E.xOrds=["e","w"];E.yOrds=["n","s"];E.xyOrds=["nw","ne","se","sw"];E.arrowKey={left:37,up:38,right:39,down:40};E.nudgeStep=.2;E.defaultCrop={x:0,y:0,width:0,height:0};E.propTypes={src:l.default.string.isRequired,crop:l.default.shape({aspect:l.default.number,x:l.default.number,y:l.default.number,width:l.default.number,height:l.default.number}),imageAlt:l.default.string,minWidth:l.default.number,minHeight:l.default.number,maxWidth:l.default.number,maxHeight:l.default.number,keepSelection:l.default.bool,onChange:l.default.func.isRequired,onComplete:l.default.func,onImageLoaded:l.default.func,onDragStart:l.default.func,onDragEnd:l.default.func,disabled:l.default.bool,crossorigin:l.default.string,children:l.default.oneOfType([l.default.arrayOf(l.default.node),l.default.node]),style:l.default.object,imageStyle:l.default.object};E.defaultProps={crop:undefined,crossorigin:undefined,disabled:false,imageAlt:"",maxWidth:100,maxHeight:100,minWidth:0,minHeight:0,keepSelection:false,onComplete:function e(){},onImageLoaded:function e(){},onDragStart:function e(){},onDragEnd:function e(){},children:undefined,style:undefined,imageStyle:undefined};e.exports=E;e.exports.makeAspectCrop=v;e.exports.containCrop=w},function(t,r){t.exports=e},function(e,t,r){(function(t){if(t.env.NODE_ENV!=="production"){var n=typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103;var i=function(e){return typeof e==="object"&&e!==null&&e.$$typeof===n};var o=true;e.exports=r(8)(i,o)}else{e.exports=r(11)()}}).call(t,r(0))},function(e,t,r){"use strict";(function(t){var n=r(1);var i=r(2);var o=r(4);var a=r(9);var s=r(3);var l=r(10);e.exports=function(e,r){var c=typeof Symbol==="function"&&Symbol.iterator;var u="@@iterator";function p(e){var t=e&&(c&&e[c]||e[u]);if(typeof t==="function"){return t}}var d="<<anonymous>>";var h={array:y("array"),bool:y("boolean"),func:y("function"),number:y("number"),object:y("object"),string:y("string"),symbol:y("symbol"),any:b(),arrayOf:v,element:w(),instanceOf:E,node:D(),objectOf:_,oneOf:S,oneOfType:x,shape:C,exact:T};function m(e,t){if(e===t){return e!==0||1/e===1/t}else{return e!==e&&t!==t}}function f(e){this.message=e;this.stack=""}f.prototype=Error.prototype;function g(e){if(t.env.NODE_ENV!=="production"){var n={};var a=0}function l(l,c,u,p,h,m,g){p=p||d;m=m||u;if(g!==s){if(r){i(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use `PropTypes.checkPropTypes()` to call them. "+"Read more at http://fb.me/use-check-prop-types")}else if(t.env.NODE_ENV!=="production"&&typeof console!=="undefined"){var y=p+":"+u;if(!n[y]&&a<3){o(false,"You are manually calling a React.PropTypes validation "+"function for the `%s` prop on `%s`. This is deprecated "+"and will throw in the standalone `prop-types` package. "+"You may be seeing this warning due to a third-party PropTypes "+"library. See https://fb.me/react-warning-dont-call-proptypes "+"for details.",m,p);n[y]=true;a++}}}if(c[u]==null){if(l){if(c[u]===null){return new f("The "+h+" `"+m+"` is marked as required "+("in `"+p+"`, but its value is `null`."))}return new f("The "+h+" `"+m+"` is marked as required in "+("`"+p+"`, but its value is `undefined`."))}return null}else{return e(c,u,p,h,m)}}var c=l.bind(null,false);c.isRequired=l.bind(null,true);return c}function y(e){function t(t,r,n,i,o,a){var s=t[r];var l=P(s);if(l!==e){var c=A(s);return new f("Invalid "+i+" `"+o+"` of type "+("`"+c+"` supplied to `"+n+"`, expected ")+("`"+e+"`."))}return null}return g(t)}function b(){return g(n.thatReturnsNull)}function v(e){function t(t,r,n,i,o){if(typeof e!=="function"){return new f("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside arrayOf.")}var a=t[r];if(!Array.isArray(a)){var l=P(a);return new f("Invalid "+i+" `"+o+"` of type "+("`"+l+"` supplied to `"+n+"`, expected an array."))}for(var c=0;c<a.length;c++){var u=e(a,c,n,i,o+"["+c+"]",s);if(u instanceof Error){return u}}return null}return g(t)}function w(){function t(t,r,n,i,o){var a=t[r];if(!e(a)){var s=P(a);return new f("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return g(t)}function E(e){function t(t,r,n,i,o){if(!(t[r]instanceof e)){var a=e.name||d;var s=j(t[r]);return new f("Invalid "+i+" `"+o+"` of type "+("`"+s+"` supplied to `"+n+"`, expected ")+("instance of `"+a+"`."))}return null}return g(t)}function S(e){if(!Array.isArray(e)){t.env.NODE_ENV!=="production"?o(false,"Invalid argument supplied to oneOf, expected an instance of array."):void 0;return n.thatReturnsNull}function r(t,r,n,i,o){var a=t[r];for(var s=0;s<e.length;s++){if(m(a,e[s])){return null}}var l=JSON.stringify(e);return new f("Invalid "+i+" `"+o+"` of value `"+a+"` "+("supplied to `"+n+"`, expected one of "+l+"."))}return g(r)}function _(e){function t(t,r,n,i,o){if(typeof e!=="function"){return new f("Property `"+o+"` of component `"+n+"` has invalid PropType notation inside objectOf.")}var a=t[r];var l=P(a);if(l!=="object"){return new f("Invalid "+i+" `"+o+"` of type "+("`"+l+"` supplied to `"+n+"`, expected an object."))}for(var c in a){if(a.hasOwnProperty(c)){var u=e(a,c,n,i,o+"."+c,s);if(u instanceof Error){return u}}}return null}return g(t)}function x(e){if(!Array.isArray(e)){t.env.NODE_ENV!=="production"?o(false,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return n.thatReturnsNull}for(var r=0;r<e.length;r++){var i=e[r];if(typeof i!=="function"){o(false,"Invalid argument supplied to oneOfType. Expected an array of check functions, but "+"received %s at index %s.",I(i),r);return n.thatReturnsNull}}function a(t,r,n,i,o){for(var a=0;a<e.length;a++){var l=e[a];if(l(t,r,n,i,o,s)==null){return null}}return new f("Invalid "+i+" `"+o+"` supplied to "+("`"+n+"`."))}return g(a)}function D(){function e(e,t,r,n,i){if(!O(e[t])){return new f("Invalid "+n+" `"+i+"` supplied to "+("`"+r+"`, expected a ReactNode."))}return null}return g(e)}function C(e){function t(t,r,n,i,o){var a=t[r];var l=P(a);if(l!=="object"){return new f("Invalid "+i+" `"+o+"` of type `"+l+"` "+("supplied to `"+n+"`, expected `object`."))}for(var c in e){var u=e[c];if(!u){continue}var p=u(a,c,n,i,o+"."+c,s);if(p){return p}}return null}return g(t)}function T(e){function t(t,r,n,i,o){var l=t[r];var c=P(l);if(c!=="object"){return new f("Invalid "+i+" `"+o+"` of type `"+c+"` "+("supplied to `"+n+"`, expected `object`."))}var u=a({},t[r],e);for(var p in u){var d=e[p];if(!d){return new f("Invalid "+i+" `"+o+"` key `"+p+"` supplied to `"+n+"`."+"\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "))}var h=d(l,p,n,i,o+"."+p,s);if(h){return h}}return null}return g(t)}function O(t){switch(typeof t){case"number":case"string":case"undefined":return true;case"boolean":return!t;case"object":if(Array.isArray(t)){return t.every(O)}if(t===null||e(t)){return true}var r=p(t);if(r){var n=r.call(t);var i;if(r!==t.entries){while(!(i=n.next()).done){if(!O(i.value)){return false}}}else{while(!(i=n.next()).done){var o=i.value;if(o){if(!O(o[1])){return false}}}}}else{return false}return true;default:return false}}function k(e,t){if(e==="symbol"){return true}if(t["@@toStringTag"]==="Symbol"){return true}if(typeof Symbol==="function"&&t instanceof Symbol){return true}return false}function P(e){var t=typeof e;if(Array.isArray(e)){return"array"}if(e instanceof RegExp){return"object"}if(k(t,e)){return"symbol"}return t}function A(e){if(typeof e==="undefined"||e===null){return""+e}var t=P(e);if(t==="object"){if(e instanceof Date){return"date"}else if(e instanceof RegExp){return"regexp"}}return t}function I(e){var t=A(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function j(e){if(!e.constructor||!e.constructor.name){return d}return e.constructor.name}h.checkPropTypes=l;h.PropTypes=h;return h}}).call(t,r(0))},function(e,t,r){"use strict";var n=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty;var o=Object.prototype.propertyIsEnumerable;function a(e){if(e===null||e===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(e)}function s(){try{if(!Object.assign){return false}var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5"){return false}var t={};for(var r=0;r<10;r++){t["_"+String.fromCharCode(r)]=r}var n=Object.getOwnPropertyNames(t).map((function(e){return t[e]}));if(n.join("")!=="0123456789"){return false}var i={};"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e}));if(Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(e){return false}}e.exports=s()?Object.assign:function(e,t){var r;var s=a(e);var l;for(var c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var u in r){if(i.call(r,u)){s[u]=r[u]}}if(n){l=n(r);for(var p=0;p<l.length;p++){if(o.call(r,l[p])){s[l[p]]=r[l[p]]}}}}return s}},function(e,t,r){"use strict";(function(t){if(t.env.NODE_ENV!=="production"){var n=r(2);var i=r(4);var o=r(3);var a={}}function s(e,r,s,l,c){if(t.env.NODE_ENV!=="production"){for(var u in e){if(e.hasOwnProperty(u)){var p;try{n(typeof e[u]==="function","%s: %s type `%s` is invalid; it must be a function, usually from "+"the `prop-types` package, but received `%s`.",l||"React class",s,u,typeof e[u]);p=e[u](r,u,l,s,null,o)}catch(e){p=e}i(!p||p instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker "+"function must return `null` or an `Error` but returned a %s. "+"You may have forgotten to pass an argument to the type checker "+"creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and "+"shape all require an argument).",l||"React class",s,u,typeof p);if(p instanceof Error&&!(p.message in a)){a[p.message]=true;var d=c?c():"";i(false,"Failed %s type: %s%s",s,p.message,d!=null?d:"")}}}}}e.exports=s}).call(t,r(0))},function(e,t,r){"use strict";var n=r(1);var i=r(2);var o=r(3);e.exports=function(){function e(e,t,r,n,a,s){if(s===o){return}i(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. "+"Use PropTypes.checkPropTypes() to call them. "+"Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};r.checkPropTypes=n;r.PropTypes=r;return r}}])}))},"./node_modules/react-image-crop/index.js":function(e,t,r){e.exports=r("./node_modules/react-image-crop/dist/ReactCrop.js")},"./node_modules/react-side-effect/lib/index.js":function(e,t,r){"use strict";function n(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var i=r("./node_modules/react/index.js");var o=n(i);function a(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function s(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var l=!!(typeof window!=="undefined"&&window.document&&window.document.createElement);function c(e,t,r){if(typeof e!=="function"){throw new Error("Expected reducePropsToState to be a function.")}if(typeof t!=="function"){throw new Error("Expected handleStateChangeOnClient to be a function.")}if(typeof r!=="undefined"&&typeof r!=="function"){throw new Error("Expected mapStateOnServer to either be undefined or a function.")}function n(e){return e.displayName||e.name||"Component"}return function c(u){if(typeof u!=="function"){throw new Error("Expected WrappedComponent to be a React component.")}var p=[];var d;function h(){d=e(p.map((function(e){return e.props})));if(m.canUseDOM){t(d)}else if(r){d=r(d)}}var m=function(e){s(t,e);function t(){return e.apply(this,arguments)||this}t.peek=function e(){return d};t.rewind=function e(){if(t.canUseDOM){throw new Error("You may only call rewind() on the server. Call peek() to read the current state.")}var r=d;d=undefined;p=[];return r};var r=t.prototype;r.UNSAFE_componentWillMount=function e(){p.push(this);h()};r.componentDidUpdate=function e(){h()};r.componentWillUnmount=function e(){var t=p.indexOf(this);p.splice(t,1);h()};r.render=function e(){return o.createElement(u,this.props)};return t}(i.PureComponent);a(m,"displayName","SideEffect("+n(u)+")");a(m,"canUseDOM",l);return m}}e.exports=c},"./node_modules/react-sortablejs/lib/Sortable.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,r,n){if(r)e(t.prototype,r);if(n)e(t,n);return t}}();var a,s;var l=r("./node_modules/prop-types/index.js");var c=g(l);var u=r("./node_modules/react/index.js");var p=g(u);var d=r("./node_modules/react-dom/index.js");var h=g(d);var m=r("./node_modules/sortablejs/Sortable.js");var f=g(m);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var r={};for(var n in e){if(t.indexOf(n)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,n))continue;r[n]=e[n]}return r}function b(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var E={nextSibling:null,activeComponent:null};var S=(s=a=function(e){w(t,e);function t(){var e;var r,n,i;b(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++){a[s]=arguments[s]}return i=(r=(n=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n),n.sortable=null,r),v(n,i)}o(t,[{key:"componentDidMount",value:function e(){var t=this;var r=i({},this.props.options);["onChoose","onStart","onEnd","onAdd","onUpdate","onSort","onRemove","onFilter","onMove","onClone"].forEach((function(e){var i=r[e];r[e]=function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++){o[a]=arguments[a]}var s=o[0];if(e==="onChoose"){E.nextSibling=s.item.nextElementSibling;E.activeComponent=t}else if((e==="onAdd"||e==="onUpdate")&&t.props.onChange){var l=t.sortable.toArray();var c=E.activeComponent;var u=c.sortable.toArray();var p=E.nextSibling&&E.nextSibling.parentNode!==null?E.nextSibling:null;s.from.insertBefore(s.item,p);if(c!==t){var d=c.props.options||{};if(n(d.group)==="object"&&d.group.pull==="clone"){s.item.parentNode.removeChild(s.item)}c.props.onChange&&c.props.onChange(u,c.sortable,s)}t.props.onChange&&t.props.onChange(l,t.sortable,s)}if(s.type==="move"){var h=o[0],m=o[1];var f=i?i(h,m):true;return f}setTimeout((function(){i&&i(s)}),0)}}));this.sortable=f.default.create(h.default.findDOMNode(this),r)}},{key:"componentWillUnmount",value:function e(){if(this.sortable){this.sortable.destroy();this.sortable=null}}},{key:"render",value:function e(){var t=this.props,r=t.tag,n=y(t,["tag"]);delete n.options;delete n.onChange;return p.default.createElement(r,n)}}]);return t}(u.Component),a.propTypes={options:c.default.object,onChange:c.default.func,tag:c.default.string,style:c.default.object},a.defaultProps={options:{},tag:"div",style:{}},s);t.default=S},"./node_modules/react-sortablejs/lib/index.js":function(e,t,r){"use strict";var n=r("./node_modules/react-sortablejs/lib/Sortable.js");var i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}e.exports=i.default},"./node_modules/safe-json-parse/tuple.js":function(e,t){e.exports=r;function r(e,t){var r;var n=null;try{r=JSON.parse(e,t)}catch(e){n=e}return[n,r]}},"./node_modules/shaka-player/dist/shaka-player.compiled.js":function(e,t,r){(function(e){(function(){var r=typeof window!="undefined"?window:e;var n={};(function(e,t,r){var n;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){if(e==Array.prototype||e==Object.prototype)return e;e[t]=r.value;return e};function a(r){r=["object"==typeof globalThis&&globalThis,r,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<r.length;++n){var i=r[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}var s=a(this);function l(e,t){if(t)e:{var r=s;e=e.split(".");for(var n=0;n<e.length-1;n++){var i=e[n];if(!(i in r))break e;r=r[i]}e=e[e.length-1];n=r[e];t=t(n);t!=n&&null!=t&&o(r,e,{configurable:!0,writable:!0,value:t})}}l("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new r(n+(e||"")+"_"+i++,e)}function r(e,t){this.g=e;o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;r.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}));l("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var n=s[t[r]];"function"===typeof n&&"function"!=typeof n.prototype[e]&&o(n.prototype,e,{configurable:!0,writable:!0,value:function(){return c(i(this))}})}return e}));function c(e){e={next:e};e[Symbol.iterator]=function(){return this};return e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function p(e){if(!(e instanceof Array)){e=u(e);for(var t,r=[];!(t=e.next()).done;)r.push(t.value);e=r}return e}var d="function"==typeof Object.create?Object.create:function(e){function t(){}t.prototype=e;return new t},h;if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var m;e:{var f={a:!0},g={};try{g.__proto__=f;m=g.a;break e}catch(e){}m=!1}h=m?function(e,t){e.__proto__=t;if(e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=h;function b(e,t){e.prototype=d(t.prototype);e.prototype.constructor=e;if(y)y(e,t);else for(var r in t)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r];e.hi=t.prototype}function v(){this.o=!1;this.l=null;this.h=void 0;this.g=1;this.j=this.m=0;this.u=this.i=null}function w(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}v.prototype.s=function(e){this.h=e};function E(e,t){e.i={hf:t,qf:!0};e.g=e.m||e.j}v.prototype.return=function(e){this.i={return:e};this.g=this.j};function S(e,t,r){e.g=r;return{value:t}}v.prototype.B=function(e){this.g=e};function _(e){e.g=0}function x(e,t,r){e.m=t;void 0!=r&&(e.j=r)}function D(e){e.m=0;e.j=2}function C(e,t,r){e.g=t;e.m=r||0}function T(e,t){e.m=t||0;t=e.i.hf;e.i=null;return t}function O(e){e.u=[e.i];e.m=0;e.j=0}function k(e,t){var r=e.u.splice(0)[0];(r=e.i=e.i||r)?r.qf?e.g=e.m||e.j:void 0!=r.B&&e.j<r.B?(e.g=r.B,e.i=null):e.g=e.j:e.g=t}function P(e){this.g=new v;this.h=e}function A(e,t){w(e.g);var r=e.g.l;if(r)return I(e,"return"in r?r["return"]:function(e){return{value:e,done:!0}},t,e.g.return);e.g.return(t);return j(e)}function I(e,t,r,n){try{var i=t.call(e.g.l,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var o=i.value}catch(t){return e.g.l=null,E(e.g,t),j(e)}e.g.l=null;n.call(e.g,o);return j(e)}function j(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,E(e.g,t)}e.g.o=!1;if(e.g.i){t=e.g.i;e.g.i=null;if(t.qf)throw t.hf;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){w(e.g);e.g.l?t=I(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=j(e));return t};this.throw=function(t){w(e.g);e.g.l?t=I(e,e.g.l["throw"],t,e.g.s):(E(e.g,t),t=j(e));return t};this.return=function(t){return A(e,t)};this[Symbol.iterator]=function(){return this}}function N(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise((function(n,i){function o(e){e.done?n(e.value):Promise.resolve(e.value).then(t,r).then(o,i)}o(e.next())}))}function L(e){return N(new R(new P(e)))}function M(){for(var e=Number(this),t=[],r=e;r<arguments.length;r++)t[r-e]=arguments[r];return t}l("Promise",(function(e){function t(e){this.h=0;this.i=void 0;this.g=[];this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.g=null}function n(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=s.setTimeout;r.prototype.i=function(e){i(e,0)};r.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.j(e)}}}this.g=null};r.prototype.j=function(e){this.i((function(){throw e}))};t.prototype.j=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.F),reject:e(this.l)}};t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var r=null!=e;break e;case"function":r=!0;break e;default:r=!1}r?this.D(e):this.m(e)}};t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){this.l(e);return}"function"==typeof t?this.K(t,e):this.m(e)};t.prototype.l=function(e){this.s(2,e)};t.prototype.m=function(e){this.s(1,e)};t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e;this.i=t;2===this.h&&this.G();this.u()};t.prototype.G=function(){var e=this;i((function(){if(e.A()){var t=s.console;"undefined"!==typeof t&&t.error(e.i)}}),1)};t.prototype.A=function(){if(this.o)return!1;var e=s.CustomEvent,t=s.Event,r=s.dispatchEvent;if("undefined"===typeof r)return!0;"function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.i;return r(e)};t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new r;t.prototype.H=function(e){var t=this.j();e.hd(t.resolve,t.reject)};t.prototype.K=function(e,t){var r=this.j();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}};t.prototype.then=function(e,r){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e;o=t}));this.hd(n(e,i),n(r,o));return a};t.prototype.catch=function(e){return this.then(void 0,e)};t.prototype.hd=function(e,t){function r(){switch(n.h){case 1:e(n.i);break;case 2:t(n.i);break;default:throw Error("Unexpected state: "+n.h)}}var n=this;null==this.g?o.h(r):this.g.push(r);this.o=!0};t.resolve=n;t.reject=function(e){return new t((function(t,r){r(e)}))};t.race=function(e){return new t((function(t,r){for(var i=u(e),o=i.next();!o.done;o=i.next())n(o.value).hd(t,r)}))};t.all=function(e){var r=u(e),i=r.next();return i.done?n([]):new t((function(e,t){function o(t){return function(r){a[t]=r;s--;0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,n(i.value).hd(o(a.length-1),t),i=r.next()}while(!i.done)}))};return t}));function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}l("WeakMap",(function(e){function t(e){this.g=(l+=Math.random()+1).toString();if(e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function r(){}function n(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!q(e,s)){var t=new r;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){if(e instanceof r)return e;Object.isExtensible(e)&&i(e);return t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([[t,2],[r,3]]);if(2!=n.get(t)||3!=n.get(r))return!1;n.delete(t);n.set(r,4);return!n.has(t)&&4==n.get(r)}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze");a("preventExtensions");a("seal");var l=0;t.prototype.set=function(e,t){if(!n(e))throw Error("Invalid WeakMap key");i(e);if(!q(e,s))throw Error("WeakMap key fail: "+e);e[s][this.g]=t;return this};t.prototype.get=function(e){return n(e)&&q(e,s)?e[s][this.g]:void 0};t.prototype.has=function(e){return n(e)&&q(e,s)&&q(e[s],this.g)};t.prototype.delete=function(e){return n(e)&&q(e,s)&&q(e[s],this.g)?delete e[s][this.g]:!1};return t}));l("Map",(function(e){function t(){var e={};return e.ib=e.next=e.head=e}function r(e,t){var r=e.g;return c((function(){if(r){for(;r.head!=e.g;)r=r.ib;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}))}function n(e,t){var r=t&&typeof t;"object"==r||"function"==r?o.has(t)?r=o.get(t):(r=""+ ++a,o.set(t,r)):r="p_"+t;var n=e.h[r];if(n&&q(e.h,r))for(e=0;e<n.length;e++){var i=n[e];if(t!==t&&i.key!==i.key||t===i.key)return{id:r,list:n,index:e,entry:i}}return{id:r,list:n,index:-1,entry:void 0}}function i(e){this.h={};this.g=t();this.size=0;if(e){e=u(e);for(var r;!(r=e.next()).done;)r=r.value,this.set(r[0],r[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(u([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();if(i.done||i.value[0]!=t||"s"!=i.value[1])return!1;i=n.next();return i.done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done?!1:!0}catch(e){return!1}}())return e;var o=new WeakMap;i.prototype.set=function(e,t){e=0===e?0:e;var r=n(this,e);r.list||(r.list=this.h[r.id]=[]);r.entry?r.entry.value=t:(r.entry={next:this.g,ib:this.g.ib,head:this.g,key:e,value:t},r.list.push(r.entry),this.g.ib.next=r.entry,this.g.ib=r.entry,this.size++);return this};i.prototype.delete=function(e){e=n(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.ib.next=e.entry.next,e.entry.next.ib=e.entry.ib,e.entry.head=null,this.size--,!0):!1};i.prototype.clear=function(){this.h={};this.g=this.g.ib=t();this.size=0};i.prototype.has=function(e){return!!n(this,e).entry};i.prototype.get=function(e){return(e=n(this,e).entry)&&e.value};i.prototype.entries=function(){return r(this,(function(e){return[e.key,e.value]}))};i.prototype.keys=function(){return r(this,(function(e){return e.key}))};i.prototype.values=function(){return r(this,(function(e){return e.value}))};i.prototype.forEach=function(e,t){for(var r=this.entries(),n;!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)};i.prototype[Symbol.iterator]=i.prototype.entries;var a=0;return i}));l("Set",(function(e){function t(e){this.g=new Map;if(e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(u([t]));if(!r.has(t)||1!=r.size||r.add(t)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();if(i.done||i.value[0]!=t||i.value[1]!=t)return!1;i=n.next();return i.done||i.value[0]==t||4!=i.value[0].x||i.value[1]!=i.value[0]?!1:n.next().done}catch(e){return!1}}())return e;t.prototype.add=function(e){e=0===e?0:e;this.g.set(e,e);this.size=this.g.size;return this};t.prototype.delete=function(e){e=this.g.delete(e);this.size=this.g.size;return e};t.prototype.clear=function(){this.g.clear();this.size=0};t.prototype.has=function(e){return this.g.has(e)};t.prototype.entries=function(){return this.g.entries()};t.prototype.values=function(){return this.g.values()};t.prototype.keys=t.prototype.values;t.prototype[Symbol.iterator]=t.prototype.values;t.prototype.forEach=function(e,t){var r=this;this.g.forEach((function(n){return e.call(t,n,n,r)}))};return t}));function U(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,i=0;i<n;i++){var o=e[i];if(t.call(r,o,i,e))return{nf:i,v:o}}return{nf:-1,v:void 0}}l("Array.prototype.findIndex",(function(e){return e?e:function(e,t){return U(this,e,t).nf}}));l("Object.is",(function(e){return e?e:function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}));l("Array.prototype.includes",(function(e){return e?e:function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;t=t||0;for(0>t&&(t=Math.max(t+n,0));t<n;t++){var i=r[t];if(i===e||Object.is(i,e))return!0}return!1}}));function H(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""}l("String.prototype.includes",(function(e){return e?e:function(e,t){return-1!==H(this,e,"includes").indexOf(e,t||0)}}));l("Array.prototype.find",(function(e){return e?e:function(e,t){return U(this,e,t).v}}));l("String.prototype.startsWith",(function(e){return e?e:function(e,t){var r=H(this,e,"startsWith"),n=r.length,i=e.length;t=Math.max(0,Math.min(t|0,r.length));for(var o=0;o<i&&t<n;)if(r[t++]!=e[o++])return!1;return o>=i}}));function F(e,t){e instanceof String&&(e+="");var r=0,n=!1,i={next:function(){if(!n&&r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}n=!0;return{done:!0,value:void 0}}};i[Symbol.iterator]=function(){return i};return i}l("Array.prototype.keys",(function(e){return e?e:function(){return F(this,(function(e){return e}))}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)q(n,i)&&(e[i]=n[i])}return e};l("Object.assign",(function(e){return e||B}));l("Array.from",(function(e){return e?e:function(e,t,r){t=null!=t?t:function(e){return e};var n=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)n.push(t.call(r,i.value,o++))}else for(i=e.length,o=0;o<i;o++)n.push(t.call(r,e[o],o));return n}}));l("Array.prototype.values",(function(e){return e?e:function(){return F(this,(function(e,t){return t}))}}));l("Promise.prototype.finally",(function(e){return e?e:function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));l("Array.prototype.entries",(function(e){return e?e:function(){return F(this,(function(e,t){return[e,t]}))}}));l("String.prototype.repeat",(function(e){return e?e:function(e){var t=H(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)if(e&1&&(r+=t),e>>>=1)t+=t;return r}}));l("Number.isNaN",(function(e){return e?e:function(e){return"number"===typeof e&&isNaN(e)}}));l("Number.isFinite",(function(e){return e?e:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}}));l("Object.values",(function(e){return e?e:function(e){var t=[],r;for(r in e)q(e,r)&&t.push(e[r]);return t}}));l("Math.log2",(function(e){return e?e:function(e){return Math.log(e)/Math.LN2}}));l("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}));l("Math.trunc",(function(e){return e?e:function(e){e=Number(e);if(isNaN(e)||Infinity===e||-Infinity===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}));l("Object.entries",(function(e){return e?e:function(e){var t=[],r;for(r in e)q(e,r)&&t.push([r,e[r]]);return t}}));var z=this||self;function V(e,t){e=e.split(".");var r=z;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)e.length||void 0===t?r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}:r[n]=t}var W={};function G(e){this.g=Math.exp(Math.log(.5)/e);this.i=this.h=0}G.prototype.sample=function(e,t){var r=Math.pow(this.g,e);t=t*(1-r)+r*this.h;isNaN(t)||(this.h=t,this.i+=e)};function K(e){return e.h/(1-Math.pow(e.g,e.i))}function $(){this.h=new G(2);this.j=new G(5);this.g=0;this.i=128e3;this.l=16e3}$.prototype.configure=function(e){this.i=e.minTotalBytes;this.l=e.minBytes;this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife);this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)};$.prototype.sample=function(e,t){if(!(t<this.l)){var r=8e3*t/e;e/=1e3;this.g+=t;this.h.sample(e,r);this.j.sample(e,r)}};$.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(K(this.h),K(this.j))};function X(){}function Y(){}function Q(){}function J(e){var t=M.apply(1,arguments);ne.has(e)||(ne.add(e),Q.apply(X,p(t)))}function Z(){}function ee(){}function te(){}function re(){}var ne=new Set;e.console&&(Q=function(){return console.warn.apply(console,p(M.apply(0,arguments)))},Y=function(){console.error.apply(console,p(M.apply(0,arguments)))});function ie(e){if(oe.has(e))return oe.get(e);var t=MediaSource.isTypeSupported(e);oe.set(e,t);return t}var oe=new Map;function ae(){}ae.prototype.extract=function(){};ae.prototype.decode=function(){return[]};ae.prototype.clear=function(){};function se(){}se.prototype.init=function(){};se.prototype.parse=function(){return[]};function le(){}function ce(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ue(e)==ue(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var r=de(e);t=de(t);for(var n=0;n<e.byteLength;n++)if(r[n]!=t[n])return!1;return!0}function ue(e){return e instanceof ArrayBuffer?e:e.buffer}function pe(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function de(e,t,r){r=void 0===r?Infinity:r;return me(e,void 0===t?0:t,r,Uint8Array)}function he(e,t,r){r=void 0===r?Infinity:r;return me(e,void 0===t?0:t,r,DataView)}function me(e,t,r,n){var i=(e.byteOffset||0)+e.byteLength;t=Math.max(0,Math.min((e.byteOffset||0)+t,i));return new n(ue(e),t,Math.min(t+Math.max(r,0),i)-t)}V("shaka.util.BufferUtils",le);le.toDataView=he;le.toUint8=de;le.toArrayBuffer=pe;le.equal=ce;function fe(){}fe.prototype.init=function(){};fe.prototype.j=function(){};fe.prototype.i=function(){};V("shaka.media.IClosedCaptionParser",fe);function ge(e){this.h=new se;if(e=ye[e.toLowerCase()])this.h=e();this.g=new ae;if(e=be)this.g=e()}ge.prototype.init=function(e){this.h.init(e)};ge.prototype.j=function(e){e=this.h.parse(e);e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var r=de(t.packet);0<r.length&&this.g.extract(r,t.pts)}return this.g.decode()};ge.prototype.i=function(){this.g.clear()};V("shaka.media.ClosedCaptionParser",ge);ge.findDecoder=function(){return be};ge.unregisterDecoder=function(){be=null};ge.registerDecoder=function(e){be=e};ge.findParser=function(e){return ye[e]};ge.unregisterParser=function(e){delete ye[e]};ge.registerParser=function(e,t){ye[e]=t};var ye={},be=null;function ve(e,t){return"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)?!0:e===t}function we(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function Ee(e,t,r){r||(r=ve);if(e.length!=t.length)return!1;t=t.slice();var n={};e=u(e);for(var i=e.next();!i.done;n={Sd:n.Sd},i=e.next()){n.Sd=i.value;i=t.findIndex(function(e){return function(t){return r(e.Sd,t)}}(n));if(-1==i)return!1;t[i]=t[t.length-1];t.pop()}return 0==t.length}function Se(e,t,r){r||(r=ve);if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function _e(e,t,r){this.startTime=e;this.endTime=t;this.payload=r;this.region=new He;this.position=null;this.positionAlign=De;this.size=0;this.textAlign=Ce;this.direction=Pe;this.writingMode=Ae;this.lineInterpretation=Ie;this.line=null;this.lineHeight="";this.lineAlign=je;this.displayAlign=Oe;this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=Me;this.fontStyle=qe;this.linePadding=this.letterSpacing=this.fontFamily="";this.opacity=1;this.textDecoration=[];this.textStrokeWidth=this.textStrokeColor=this.textShadow="";this.wrapLine=!0;this.id="";this.nestedCues=[];this.lineBreak=this.isContainer=!1;this.cellResolution={bg:32,rows:15}}_e.prototype.clone=function(){var e=new _e(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function xe(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var r in e)if("startTime"!=r&&"endTime"!=r&&"payload"!=r)if("nestedCues"==r){if(!Se(e.nestedCues,t.nestedCues,xe))return!1}else if("region"==r||"cellResolution"==r)for(var n in e[r]){if(e[r][n]!=t[r][n])return!1}else if(Array.isArray(e[r])){if(!Se(e[r],t[r]))return!1}else if(e[r]!=t[r])return!1;return!0}V("shaka.text.Cue",_e);_e.equal=xe;_e.prototype.clone=_e.prototype.clone;var De="auto";_e.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:De};var Ce="center",Te={LEFT:"left",RIGHT:"right",CENTER:Ce,START:"start",END:"end"};_e.textAlign=Te;var Oe="after",ke={BEFORE:"before",CENTER:"center",AFTER:Oe};_e.displayAlign=ke;var Pe="ltr";_e.direction={HORIZONTAL_LEFT_TO_RIGHT:Pe,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Ae="horizontal-tb";_e.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Ae,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Ie=0;_e.lineInterpretation={LINE_NUMBER:Ie,PERCENTAGE:1};var je="start",Re={CENTER:"center",START:je,END:"end"};_e.lineAlign=Re;var Ne={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};_e.defaultTextColor=Ne;var Le={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};_e.defaultTextBackgroundColor=Le;var Me=400;_e.fontWeight={NORMAL:Me,BOLD:700};var qe="normal",Ue={NORMAL:qe,ITALIC:"italic",OBLIQUE:"oblique"};_e.fontStyle=Ue;_e.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function He(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Fe;this.scroll=Be}V("shaka.text.CueRegion",He);var Fe=1;He.units={PX:0,PERCENTAGE:Fe,LINES:2};var Be="";He.scrollMode={NONE:Be,UP:"up"};function ze(){}ze.prototype.destroy=function(){};function Ve(e,t,r){Ge[e.toLowerCase().split(";")[0]+"-"+r]={priority:r,Ld:t}}function We(e,t){for(var r=e.toLowerCase().split(";")[0],n=u([Ye,Xe,$e,Ke]),i=n.next();!i.done;i=n.next())if(i=Ge[r+"-"+i.value]){var o=i.Ld(),a=o.isSupported(e,t);o.destroy();if(a)return i.Ld}return null}V("shaka.transmuxer.TransmuxerEngine",ze);ze.findTransmuxer=We;ze.unregisterTransmuxer=function(e,t){delete Ge[e.toLowerCase().split(";")[0]+"-"+t]};ze.registerTransmuxer=Ve;ze.prototype.destroy=ze.prototype.destroy;var Ge={},Ke=1,$e=2,Xe=3,Ye=4;ze.PluginPriority={FALLBACK:Ke,PREFERRED_SECONDARY:$e,PREFERRED:Xe,APPLICATION:Ye};var Qe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function Je(e){var t;e instanceof Je?(Ze(this,e.Ma),this.Mb=e.Mb,this.Ra=e.Ra,et(this,e.cc),this.ta=e.ta,tt(this,e.g.clone()),this.xb=e.xb):e&&(t=String(e).match(Qe))?(Ze(this,t[1]||"",!0),this.Mb=rt(t[2]||""),this.Ra=rt(t[3]||"",!0),et(this,t[4]),this.ta=rt(t[5]||"",!0),tt(this,t[6]||"",!0),this.xb=rt(t[7]||"")):this.g=new ut(null)}n=Je.prototype;n.Ma="";n.Mb="";n.Ra="";n.cc=null;n.ta="";n.xb="";n.toString=function(){var e=[],t=this.Ma;t&&e.push(nt(t,ot,!0),":");if(t=this.Ra){e.push("//");var r=this.Mb;r&&e.push(nt(r,ot,!0),"@");e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));t=this.cc;null!=t&&e.push(":",String(t))}if(t=this.ta)this.Ra&&"/"!=t.charAt(0)&&e.push("/"),e.push(nt(t,"/"==t.charAt(0)?st:at,!0));(t=this.g.toString())&&e.push("?",t);(t=this.xb)&&e.push("#",nt(t,ct));return e.join("")};n.resolve=function(e){var t=this.clone();"data"===t.Ma&&(t=new Je);var r=!!e.Ma;r?Ze(t,e.Ma):r=!!e.Mb;r?t.Mb=e.Mb:r=!!e.Ra;r?t.Ra=e.Ra:r=null!=e.cc;var n=e.ta;if(r)et(t,e.cc);else if(r=!!e.ta){if("/"!=n.charAt(0))if(this.Ra&&!this.ta)n="/"+n;else{var i=t.ta.lastIndexOf("/");-1!=i&&(n=t.ta.substr(0,i+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){i=0==n.lastIndexOf("/",0);n=n.split("/");for(var o=[],a=0;a<n.length;){var s=n[a++];"."==s?i&&a==n.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==n.length&&o.push("")):(o.push(s),i=!0)}n=o.join("/")}}r?t.ta=n:r=""!==e.g.toString();r?tt(t,e.g.clone()):r=!!e.xb;r&&(t.xb=e.xb);return t};n.clone=function(){return new Je(this)};function Ze(e,t,r){e.Ma=r?rt(t,!0):t;e.Ma&&(e.Ma=e.Ma.replace(/:$/,""))}function et(e,t){if(t){t=Number(t);if(isNaN(t)||0>t)throw Error("Bad port number "+t);e.cc=t}else e.cc=null}function tt(e,t,r){t instanceof ut?e.g=t:(r||(t=nt(t,lt)),e.g=new ut(t))}function rt(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function nt(e,t,r){return null!=e?(e=encodeURI(e).replace(t,it),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function it(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var ot=/[#\/\?@]/g,at=/[#\?:]/g,st=/[#\?]/g,lt=/[#\?@]/g,ct=/#/g;function ut(e){this.g=e||null}function pt(e){if(!e.pa&&(e.pa={},e.Dc=0,e.g))for(var t=e.g.split("&"),r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var o=t[r].substring(0,n);i=t[r].substring(n+1)}else o=t[r];o=decodeURIComponent(o.replace(/\+/g," "));i=i||"";e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}n=ut.prototype;n.pa=null;n.Dc=null;n.add=function(e,t){pt(this);this.g=null;var r=this.pa.hasOwnProperty(e)?this.pa[e]:null;r||(this.pa[e]=r=[]);r.push(t);this.Dc++;return this};n.set=function(e,t){pt(this);this.g=null;this.pa.hasOwnProperty(e)?this.pa[e]=[t]:this.add(e,t);return this};n.toString=function(){if(this.g)return this.g;if(!this.pa)return"";var e=[],t;for(t in this.pa)for(var r=encodeURIComponent(t),n=this.pa[t],i=0;i<n.length;i++){var o=r;""!==n[i]&&(o+="="+encodeURIComponent(n[i]));e.push(o)}return this.g=e.join("&")};n.clone=function(){var e=new ut;e.g=this.g;if(this.pa){var t={},r;for(r in this.pa)t[r]=this.pa[r].concat();e.pa=t;e.Dc=this.Dc}return e};function dt(e,t,r){var n=M.apply(3,arguments);this.severity=e;this.category=t;this.code=r;this.data=n;this.handled=!1;this.message="Shaka Error "+this.code;if(ht)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}}dt.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};V("shaka.util.Error",dt);var ht=!0;dt.Severity={RECOVERABLE:1,CRITICAL:2};dt.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};dt.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function mt(e,t){return e.concat(t)}function ft(){}function gt(e){return null!=e}function yt(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length)return e=new Je(e[0]),t=new Je(t[0]),[e.resolve(t).toString()];var r=t.map((function(e){return new Je(e)}));return e.map((function(e){var t=new Je(e);return r.map((function(e){return t.resolve(e).toString()}))})).reduce(mt,[])}function bt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function vt(e,t){if(1==t.length)return t[0];e=wt(e,t);if(null!=e)return e;throw new dt(2,4,4025,t)}function wt(e,t){for(var r=u(_t[e]),n=r.next();!n.done;n=r.next()){n=n.value;for(var i=u(t),o=i.next();!o.done;o=i.next())if(o=o.value,n.test(o.trim()))return o.trim()}return e==Et?"":null}var Et="text",St={va:"video",pb:"audio",ca:Et,wc:"image",rh:"application"},_t={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function xt(){}function Dt(e,t){var r=e;t&&!At.includes(e)&&(r+='; codecs="'+t+'"');return r}function Ct(e,t){t&&(e+='; codecs="'+t+'"');return e}function Tt(e,t,r){var n=Dt(e,t);t=Ct(e,t);We(t)?(e=We(t))?(e=e(),r=e.convertCodecs(r,t),e.destroy()):r=t:r="video/mp2t"!=e&&"audio"==r?n.replace("video","audio"):n;return r}function Ot(e){var t=Pt(e);e=t[0];t=t[1].toLowerCase();switch(!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function kt(e){e=e.split(/ *; */);e.shift();return(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function Pt(e){e=e.split(".");var t=e[0];e.shift();return[t,e.join(".")]}V("shaka.util.MimeUtils",xt);xt.getFullTypeWithAllCodecs=Ct;xt.getFullType=Dt;(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var At=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function It(e){this.i=null;this.j=e;this.u=!1;this.l=this.s=0;this.m=Infinity;this.h=this.g=null;this.A="";this.o=new Map}function jt(e){return Ut[e]?!0:"application/cea-608"==e||"application/cea-708"==e?!!be:!1}It.prototype.destroy=function(){this.j=this.i=null;this.o.clear();return Promise.resolve()};function Rt(e,t,r,n){var i,o,a,s;return L((function(l){if(1==l.g)return S(l,Promise.resolve(),2);if(!e.i||!e.j)return l.return();if(null==r||null==n)return e.i.parseInit(de(t)),l.return();i=e.u?r:e.s;o={periodStart:e.s,segmentStart:r,segmentEnd:n,vttOffset:i};a=e.i.parseMedia(de(t),o);s=a.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m}));e.j.append(s);null==e.g&&(e.g=Math.max(r,e.l));e.h=Math.min(n,e.m);_(l)}))}It.prototype.remove=function(e,t){var r=this;return L((function(n){if(1==n.g)return S(n,Promise.resolve(),2);!r.j||!r.j.remove(e,t)||null==r.g||t<=r.g||e>=r.h||(e<=r.g&&t>=r.h?r.g=r.h=null:e<=r.g&&t<r.h?r.g=t:e>r.g&&t>=r.h&&(r.h=e));_(n)}))};function Nt(e,t,r){e.l=t;e.m=r}function Lt(e,t,r){e.A=t;if(t=e.o.get(t))for(var n=u(t.keys()),i=n.next();!i.done;i=n.next())(i=t.get(i.value).filter((function(e){return e.endTime<=r})))&&e.j.append(i)}function Mt(e,t,r){t.startTime+=r;t.endTime+=r;t=u(t.nestedCues);for(var n=t.next();!n.done;n=t.next())Mt(e,n.value,r)}function qt(e,t,r,n,i){var o=r+" "+n,a=new Map;t=u(t);for(var s=t.next();!s.done;s=t.next()){var l=s.value;s=l.stream;l=l.cue;a.has(s)||a.set(s,new Map);a.get(s).has(o)||a.get(s).set(o,[]);Mt(e,l,i);l.startTime>=e.l&&l.startTime<e.m&&(a.get(s).get(o).push(l),s==e.A&&e.j.append([l]))}i=u(a.keys());for(o=i.next();!o.done;o=i.next())for(o=o.value,e.o.has(o)||e.o.set(o,new Map),t=u(a.get(o).keys()),s=t.next();!s.done;s=t.next())s=s.value,l=a.get(o).get(s),e.o.get(o).set(s,l);e.g=null==e.g?Math.max(r,e.l):Math.min(e.g,Math.max(r,e.l));e.h=Math.max(e.h,Math.min(n,e.m))}V("shaka.text.TextEngine",It);It.prototype.destroy=It.prototype.destroy;It.findParser=function(e){return Ut[e]};It.unregisterParser=function(e){delete Ut[e]};It.registerParser=function(e,t){Ut[e]=t};var Ut={};function Ht(){}function Ft(e,t){e=Vt(e);t=Vt(t);return e.split("-")[0]==t.split("-")[0]}function Bt(e,t){e=Vt(e);t=Vt(t);e=e.split("-");t=t.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function zt(e,t){e=Vt(e);t=Vt(t);e=e.split("-");t=t.split("-");return 2==e.length&&2==t.length&&e[0]==t[0]}function Vt(e){var t=e.split("-x-"),r=t[0].split("-");e=r[0]||"";r=r[1]||"";t=t[1]?"x-"+t[1]:"";e=e.toLowerCase();e=Xt.get(e)||e;r=r.toUpperCase();return(r?e+"-"+r:e)+(t?"-"+t:"")}function Wt(e,t){e=Vt(e);t=Vt(t);return t==e?4:Bt(t,e)?3:zt(t,e)?2:Bt(e,t)?1:0}function Gt(e){var t=e.indexOf("-");e=0<=t?e.substring(0,t):e;e=e.toLowerCase();return e=Xt.get(e)||e}function Kt(e){return e.language?Vt(e.language):e.audio&&e.audio.language?Vt(e.audio.language):e.video&&e.video.language?Vt(e.video.language):"und"}function $t(e,t){e=Vt(e);var r=new Set,n=u(t);for(t=n.next();!t.done;t=n.next())r.add(Vt(t.value));n=u(r);for(t=n.next();!t.done;t=n.next())if(t=t.value,t==e)return t;n=u(r);for(t=n.next();!t.done;t=n.next())if(t=t.value,Bt(t,e))return t;n=u(r);for(t=n.next();!t.done;t=n.next())if(t=t.value,zt(t,e))return t;r=u(r);for(t=r.next();!t.done;t=r.next())if(t=t.value,Bt(e,t))return t;return null}V("shaka.util.LanguageUtils",Ht);Ht.findClosestLocale=$t;Ht.getLocaleForVariant=Kt;Ht.getLocaleForText=function(e){return Vt(e.language||"und")};Ht.getBase=Gt;Ht.relatedness=Wt;Ht.areSiblings=function(e,t){var r=Gt(e),n=Gt(t);return e!=r&&t!=n&&r==n};Ht.normalize=Vt;Ht.isSiblingOf=zt;Ht.isParentOf=Bt;Ht.areLanguageCompatible=Ft;Ht.areLocaleCompatible=function(e,t){e=Vt(e);t=Vt(t);return e==t};var Xt=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Yt(){this.g={}}n=Yt.prototype;n.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]};n.get=function(e){return(e=this.g[e])?e.slice():null};n.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])};n.forEach=function(e){for(var t in this.g)e(t,this.g[t])};n.size=function(){return Object.keys(this.g).length};n.keys=function(){return Object.keys(this.g)};function Qt(e){this.h=e;this.g=null}Qt.prototype.S=function(t){var r=this;this.stop();var n=!0,i=null;this.g=function(){e.clearTimeout(i);n=!1};i=e.setTimeout((function(){n&&r.h()}),1e3*t);return this};Qt.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Jt(e){this.h=e;this.g=null}Jt.prototype.ic=function(){this.stop();this.h();return this};Jt.prototype.S=function(e){var t=this;this.stop();this.g=new Qt((function(){t.h()})).S(e);return this};Jt.prototype.Ca=function(e){var t=this;this.stop();this.g=new Qt((function(){t.g.S(e);t.h()})).S(e);return this};Jt.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)};V("shaka.util.Timer",Jt);Jt.prototype.stop=Jt.prototype.stop;Jt.prototype.tickEvery=Jt.prototype.Ca;Jt.prototype.tickAfter=Jt.prototype.S;Jt.prototype.tickNow=Jt.prototype.ic;function Zt(){return e.MediaSource&&MediaSource.isTypeSupported?!0:!1}function er(e){return""!=cr().canPlayType(e)}function tr(){return navigator.userAgent.match(/Edge?\//)?!0:!1}function rr(){return lr("Xbox One")}function nr(){return lr("Tizen")}function ir(){return lr("Web0S")&&lr("Chrome/38.0.2125.122 Safari/537.36")}function or(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!nr()&&!lr("PC=EOS")&&!lr("VirginMedia")&&!lr("SOPOpenBrowser")&&!ar()&&!lr("AFT")}function ar(){return lr("PlayStation 4")}function sr(){if(!or())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function lr(e){return(navigator.userAgent||"").includes(e)}function cr(){if(pr)return pr;ur||(ur=new Jt((function(){pr=null})));(pr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(pr=document.createElement("video"));ur.S(1);return pr}var ur=null,pr=null;function dr(){}function hr(e,t,r,n,i){var o=e.variants;if(t.length||r.length)o=gr(o,t,r);o=Wr(o,n);t=mr(o);t=fr(t);var a=yr(t,i);e.variants=e.variants.filter((function(e){return wr(e)==a?!0:!1}))}function mr(e){var t=new Yt;e=u(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=wr(r);t.push(n,r)}return t}function fr(e){var t=0,r=new Map,n=e.size();e.forEach((function(e,i){i=u(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;var a=o.video;if(a&&a.width&&a.height){a=a.width*a.height*(a.frameRate||1);r.has(a)||r.set(a,new Yt);var s=r.get(a);s.push(e,o);s.size()===n&&(t=Math.max(t,a))}}}));return t?r.get(t):e}function gr(e,t,r){var n={};t=u(t);for(var i=t.next();!i.done;n={Xd:n.Xd},i=t.next())if(n.Xd=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Xd)}}(n)),i.length){e=i;break}n={};r=u(r);for(t=r.next();!t.done;n={Rd:n.Rd},t=r.next())if(n.Rd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Rd)}}(n)),t.length){e=t;break}return e}function yr(e,t){t=u(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r==Jr||r==Zr){if(e=br(e,r),1==e.size())return e.keys()[0]}else if(r==en)break;return vr(e)}function br(e,t){var r=0,n=new Yt;e.forEach((function(e,i){for(var o=0,a=0,s=u(i),l=s.next();!l.done;l=s.next())l=l.value,l.decodingInfos.length&&(o+=l.decodingInfos[0][t]?1:0,a++);o/=a;o>r?(n.g={},n.push(e,i),r=o):o==r&&n.push(e,i)}));return n}function vr(e){var t="",r=Infinity;e.forEach((function(e,n){var i=0,o=0;n=u(n);for(var a=n.next();!a.done;a=n.next())i+=a.value.bandwidth||0,++o;i/=o;i<r&&(t=e,r=i)}));return t}function wr(e){var t="";e.video&&(t=Ot(e.video.codecs));var r="";e.audio&&(r=Ot(e.audio.codecs));return t+"-"+r}function Er(e,t,r){e.variants=e.variants.filter((function(e){return Sr(e,t,r)}))}function Sr(e,t,r){function n(e,t,r){return e>=t&&e<=r}var i=e.video;return i&&i.width&&i.height&&(!n(i.width,t.minWidth,Math.min(t.maxWidth,r.width))||!n(i.height,t.minHeight,Math.min(t.maxHeight,r.height))||!n(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!n(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!n(e.bandwidth,t.minBandwidth,t.maxBandwidth)?!1:!0}function _r(e,t){return L((function(r){if(1==r.g)return S(r,xr(t,0<t.offlineSessionIds.length),2);Ar(e,t);Ir(t);return S(r,jr(t),0)}))}function xr(e,t){return L((function(r){if(1==r.g)return S(r,Tr(e.variants,t,!1,[]),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var r=Pr(t.codecs);if(t.codecs.includes(",")){var n=t.codecs.split(",");r=vt("video",n);r=Pr(r);n=vt("audio",n);n=kr(n);var i=Tt(t.mimeType,n,"audio");if(!ie(i))return!1;r=[r,n].join()}n=Tt(t.mimeType,r,"video");if(!ie(n))return!1;t.codecs=r}if(r=e.audio){n=kr(r.codecs);i=Tt(r.mimeType,n,"audio");if(!ie(i))return!1;r.codecs=n}if(rr()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3.")))return ee($r(e)),!1;(t=e.decodingInfos.some((function(e){return e.supported})))||ee($r(e));return t}));_(r)}))}function Dr(e){var t=[];for(r in e)t.push(r);t.sort();var r=[];t=u(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value;n=JSON.stringify(i);i=e[i];i instanceof Object?(i=Dr(i),r.push(n+":"+i)):(i=JSON.stringify(i),r.push(n+":"+i))}return"{"+r.join(",")+"}"}function Cr(e,t){var r,n,i;return L((function(o){switch(o.g){case 1:r=Dr(t);x(o,2);n=Yr;if(n[r]){e.decodingInfos.push(n[r]);o.B(4);break}return S(o,navigator.mediaCapabilities.decodingInfo(t),5);case 5:i=o.h,n[r]=i,e.decodingInfos.push(i);case 4:C(o,0);break;case 2:T(o),JSON.stringify(t),_(o)}}))}function Tr(e,t,r,n){var i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E;return L((function(_){switch(_.g){case 1:if(i=e.some((function(e){return e.decodingInfos.length})))return _.return();o={};a=u(n);s=a.next();case 2:if(s.done){_.B(4);break}o.Td=s.value;l=!1;c=u(e);p=c.next();case 5:if(p.done){_.B(7);break}d=p.value;h=Or(d,t,r).filter(function(e){return function(t){return(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.Td}}(o));m=u(h);f=m.next();case 8:if(f.done){_.B(10);break}g=f.value;return S(_,Cr(d,g),9);case 9:f=m.next();_.B(8);break;case 10:d.decodingInfos.length&&(l=!0);p=c.next();_.B(5);break;case 7:if(l)return _.return();o={Td:o.Td};s=a.next();_.B(2);break;case 4:y=u(e),p=y.next();case 12:if(p.done){_.B(0);break}b=p.value;v=Or(b,t,r).filter((function(e){e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem;return!e||!n.includes(e)}));w=u(v);f=w.next();case 15:if(f.done){p=y.next();_.B(12);break}E=f.value;return S(_,Cr(b,E),16);case 16:f=w.next(),_.B(15)}}))}function Or(e,t,r){var n=e.audio,i=e.video;r={type:r?"file":"media-source"};if(i){var o=i.codecs;if(i.codecs.includes(",")){var a=i.codecs.split(",");o=vt("video",a);o=Pr(o);a=vt("audio",a);a=kr(a);a=Tt(i.mimeType,a,"audio");r.audio={contentType:a,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}o=Pr(o);o=Tt(i.mimeType,o,"video");r.video={contentType:o,width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1};if(i.hdr)switch(i.hdr){case"SDR":r.video.transferFunction="srgb";break;case"PQ":r.video.transferFunction="pq";break;case"HLG":r.video.transferFunction="hlg"}}n&&(o=kr(n.codecs),o=Tt(n.mimeType,o,"audio"),r.audio={contentType:o,channels:n.channelsCount||2,bitrate:n.bandwidth||e.bandwidth||1,samplerate:n.audioSamplingRate||1,spatialRendering:n.spatialAudio});a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]);if(!a.length)return[r];e=[];o=new Map;a=u(a);for(var s=a.next();!s.done;s=a.next()){var l=s.value;o.get(l.keySystem)||o.set(l.keySystem,[]);o.get(l.keySystem).push(l)}a=t?"required":"optional";t=t?["persistent-license"]:["temporary"];l=u(o.keys());for(var c=l.next();!c.done;c=l.next()){var p=c.value;c=Object.assign({},r);var d=o.get(p);p={keySystem:p,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t};d=u(d);for(s=d.next();!s.done;s=d.next()){s=s.value;if(s.initData&&s.initData.length){for(var h=new Set,m=u(s.initData),f=m.next();!f.done;f=m.next())h.add(f.value.initDataType);p.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(p.distinctiveIdentifier="required");s.persistentStateRequired&&(p.persistentState="required");s.sessionType&&(p.sessionTypes=[s.sessionType]);n&&(""!=s.audioRobustness?p.audio?p.audio.robustness=p.audio.robustness||s.audioRobustness:p.audio={robustness:s.audioRobustness}:p.audio||(p.audio={}));i&&(""!=s.videoRobustness?p.video?p.video.robustness=p.video.robustness||s.videoRobustness:p.video={robustness:s.videoRobustness}:p.video||(p.video={}))}c.keySystemConfiguration=p;e.push(c)}return e}function kr(e){return"fLaC"===e?"flac":"Opus"===e?"opus":nr()?"ac-3"==e.toLowerCase()?"ec-3":e:e}function Pr(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Ar(e,t){t.variants=t.variants.filter((function(t){var r=t.audio;t=t.video;return r&&e&&e.audio&&!Nr(r,e.audio)||t&&e&&e.video&&!Nr(t,e.video)?!1:!0}))}function Ir(e){e.textStreams=e.textStreams.filter((function(e){e=Dt(e.mimeType,e.codecs);return jt(e)}))}function jr(e){var t,r,n,i,o,a,s,l;return L((function(c){switch(c.g){case 1:t=[],r=u(e.imageStreams),n=r.next();case 2:if(n.done){c.B(4);break}i=n.value;o=i.mimeType;if(tn.has(o)){c.B(5);break}a=rn.get(o);if(!a){tn.set(o,!1);c.B(5);break}return S(c,Rr(a),7);case 7:s=c.h,tn.set(o,s);case 5:(l=tn.get(o))&&t.push(i);n=r.next();c.B(2);break;case 4:e.imageStreams=t,_(c)}}))}function Rr(e){return new Promise((function(t){var r=new Image;r.src=e;"decode"in r?r.decode().then((function(){t(!0)})).catch((function(){t(!1)})):r.onload=r.onerror=function(){t(2===r.height)}}))}function Nr(e,t){return e.mimeType!=t.mimeType||e.codecs.split(".")[0]!=t.codecs.split(".")[0]?!1:!0}function Lr(e){var t=e.audio,r=e.video,n=t?t.mimeType:null,i=r?r.mimeType:null,o=t?t.codecs:null,a=r?r.codecs:null,s=[];a&&s.push(a);o&&s.push(o);var l=[];r&&l.push(r.mimeType);t&&l.push(t.mimeType);l=l[0]||null;var c=[];t&&c.push(t.kind);r&&c.push(r.kind);c=c[0]||null;var p=new Set;if(t)for(var d=u(t.roles),h=d.next();!h.done;h=d.next())p.add(h.value);if(r)for(d=u(r.roles),h=d.next();!h.done;h=d.next())p.add(h.value);e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:l,audioMimeType:n,videoMimeType:i,codecs:s.join(", "),audioCodec:o,videoCodec:a,primary:e.primary,roles:Array.from(p),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null};r&&(e.videoId=r.id,e.originalVideoId=r.originalId,e.width=r.width||null,e.height=r.height||null,e.frameRate=r.frameRate||null,e.pixelAspectRatio=r.pixelAspectRatio||null,e.videoBandwidth=r.bandwidth||null,e.hdr=r.hdr||null);t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage);return e}function Mr(e){return{id:e.id,active:!1,type:Et,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function qr(e){var t=e.width||null,r=e.height||null,n=null;e.segmentIndex&&(n=e.segmentIndex.get(0));var i=e.tilesLayout;n&&(i=n.tilesLayout||i);i&&null!=t&&(t/=Number(i.split("x")[0]));i&&null!=r&&(r/=Number(i.split("x")[1]));return{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:r,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Ur(e){e.__shaka_id||(e.__shaka_id=Qr++);return e.__shaka_id}function Hr(e){var t=Br(e);t.active="disabled"!=e.mode;t.type="text";t.originalTextId=e.id;"captions"==e.kind&&(t.mimeType="application/cea-608");"subtitles"==e.kind&&(t.mimeType="text/vtt");e.kind&&(t.roles=[e.kind]);"forced"==e.kind&&(t.forced=!0);return t}function Fr(e){var t=Br(e);t.active=e.enabled;t.type="variant";t.originalAudioId=e.id;"main"==e.kind&&(t.primary=!0);e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label);return t}function Br(e){var t=e.language;return{id:Ur(e),active:!1,type:"",bandwidth:0,language:Vt(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function zr(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function Vr(e){return e.filter((function(e){return zr(e)}))}function Wr(e,t){var r=e.filter((function(e){return e.audio&&e.audio.channelsCount})),n=new Map;r=u(r);for(var i=r.next();!i.done;i=r.next()){i=i.value;var o=i.audio.channelsCount;n.has(o)||n.set(o,[]);n.get(o).push(i)}r=Array.from(n.keys());if(0==r.length)return e;e=r.filter((function(e){return e<=t}));return e.length?n.get(Math.max.apply(Math,p(e))):n.get(Math.min.apply(Math,p(r)))}function Gr(e,t,r,n){var i=e,o=e.filter((function(e){return e.primary}));o.length&&(i=o);var a=i.length?i[0].language:"";i=i.filter((function(e){return e.language==a}));if(t){var s=$t(Vt(t),e.map((function(e){return e.language})));s&&(i=e.filter((function(e){return Vt(e.language)==s})))}i=i.filter((function(e){return e.forced==n}));if(r){if(e=Kr(i,r),e.length)return e}else if(e=i.filter((function(e){return 0==e.roles.length})),e.length)return e;e=i.map((function(e){return e.roles})).reduce(mt,[]);return e.length?Kr(i,e[0]):i}function Kr(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function $r(e){var t=[];e.audio&&t.push(Xr(e.audio));e.video&&t.push(Xr(e.video));return t.join(", ")}function Xr(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}V("shaka.util.StreamUtils",dr);dr.meetsRestrictions=Sr;var Yr={},Qr=0,Jr="smooth",Zr="powerEfficient",en="bandwidth",tn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),rn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function nn(){var e=this;this.l=null;this.o=!1;this.i=new $;this.u=null;navigator.connection&&navigator.connection.addEventListener&&(this.u=function(){if(e.o&&e.g.useNetworkInformation){e.i=new $;e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.u));this.m=[];this.A=1;this.F=!1;this.h=this.j=this.g=this.s=null;this.D=new Jt((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.l(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}))}n=nn.prototype;n.stop=function(){this.l=null;this.o=!1;this.m=[];this.A=1;this.j=this.s=null;this.h&&(this.h.disconnect(),this.h=null);this.D.stop()};n.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.u),this.u=null);this.D=null};n.init=function(e){this.l=e};n.chooseVariant=function(){var t=Infinity,r=Infinity;this.g.restrictToScreenSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*r,r*=e.screen.width);this.h&&this.g.restrictToElementSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientHeight*r,r*=this.j.clientWidth);t=an(this.g.restrictions,this.m,t,r);r=this.i.getBandwidthEstimate(on(this));this.m.length&&!t.length&&(t=an(null,this.m,Infinity,Infinity),t=[t[0]]);for(var n=t[0]||null,i=0;i<t.length;i++){for(var o=t[i],a=isNaN(this.A)?1:Math.abs(this.A),s=a*o.bandwidth/this.g.bandwidthDowngradeTarget,l={bandwidth:Infinity},c=i+1;c<t.length;c++)if(o.bandwidth!=t[c].bandwidth){l=t[c];break}a=a*l.bandwidth/this.g.bandwidthUpgradeTarget;r>=s&&r<=a&&n.bandwidth!=o.bandwidth&&(n=o)}this.s=Date.now();return n};n.enable=function(){this.o=!0};n.disable=function(){this.o=!1};n.segmentDownloaded=function(e,t){this.i.sample(e,t);if(null!=this.s&&this.o)e:{if(!this.F){e=this.i;if(!(e.g>=e.i))break e;this.F=!0}else if(Date.now()-this.s<1e3*this.g.switchInterval)break e;e=this.chooseVariant();this.i.getBandwidthEstimate(on(this));e&&this.l(e,this.g.clearBufferSwitch,this.g.safeMarginSwitch)}};n.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(on(this))};n.setVariants=function(e){this.m=e};n.playbackRateChanged=function(e){this.A=e};n.setMediaElement=function(t){var r=this;this.j=t;this.h&&(this.h.disconnect(),this.h=null);this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){r.D.S(sn)})),this.h.observe(this.j))};n.configure=function(e){this.g=e;this.i&&this.g&&this.i.configure(this.g.advanced)};function on(e){var t=e.g.defaultBandwidthEstimate;navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink);return t}function an(e,t,r,n){e&&(t=t.filter((function(t){return Sr(t,e,{width:n,height:r})})));return t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}V("shaka.abr.SimpleAbrManager",nn);nn.prototype.configure=nn.prototype.configure;nn.prototype.setMediaElement=nn.prototype.setMediaElement;nn.prototype.playbackRateChanged=nn.prototype.playbackRateChanged;nn.prototype.setVariants=nn.prototype.setVariants;nn.prototype.getBandwidthEstimate=nn.prototype.getBandwidthEstimate;nn.prototype.segmentDownloaded=nn.prototype.segmentDownloaded;nn.prototype.disable=nn.prototype.disable;nn.prototype.enable=nn.prototype.enable;nn.prototype.chooseVariant=nn.prototype.chooseVariant;nn.prototype.init=nn.prototype.init;nn.prototype.release=nn.prototype.release;nn.prototype.stop=nn.prototype.stop;var sn=1;function ln(e,t){this.g=e;this.h=t}ln.prototype.toString=function(){return"v"+this.g+"."+this.h};function cn(e,t){var r=new ln(5,0),n=dn,i=n.g,o=r.h-i.h;(0<(r.g-i.g||o)?n.i:n.h)(n.g,r,e,t)}function un(e,t,r,n){Q([r,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",n].join(" "))}function pn(e,t,r,n){Y([r,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",n].join(""))}var dn=null;V("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function hn(e,t){this.h=e;this.g=new Set([e]);t=t||[];e=u(t);for(t=e.next();!t.done;t=e.next())this.add(t.value)}hn.prototype.add=function(e){return mn(this.h,e)?(this.g.add(e),!0):!1};function mn(e,t){var r;if(!(r=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(r=e.audio&&t.audio)){r=e.audio;var n=t.audio;r=!((!(!r.channelsCount||!n.channelsCount||2<r.channelsCount||2<n.channelsCount)||r.channelsCount==n.channelsCount)&&fn(r,n)&&gn(r.roles,n.roles))}!r&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!(fn(e,t)&&gn(e.roles,t.roles)));return r?!1:!0}hn.prototype.values=function(){return this.g.values()};function fn(e,t){if(e.mimeType!=t.mimeType)return!1;e=e.codecs.split(",").map((function(e){return Pt(e)[0]}));t=t.codecs.split(",").map((function(e){return Pt(e)[0]}));if(e.length!=t.length)return!1;e.sort();t.sort();for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function gn(e,t){e=new Set(e);t=new Set(t);e.delete("main");t.delete("main");if(e.size!=t.size)return!1;e=u(e);for(var r=e.next();!r.done;r=e.next())if(!t.has(r.value))return!1;return!0}function yn(e){this.g=e;this.h=new bn(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"","")}yn.prototype.create=function(e){var t=this,r=e.filter((function(e){return mn(t.g,e)}));return r.length?new hn(r[0],r):this.h.create(e)};function bn(e,t,r,n,i){this.j=e;this.l=t;this.g=r;this.h=n;this.i=void 0===i?"":i}bn.prototype.create=function(e){var t=[];t=vn(e,this.j);var r=e.filter((function(e){return e.primary}));t=t.length?t:r.length?r:e;e=wn(t,this.l);e.length&&(t=e);this.h&&(e=Sn(t,this.h),e.length&&(t=e));this.g&&(e=Wr(t,this.g),e.length&&(t=e));this.i&&(e=En(t,this.i),e.length&&(t=e));e=new hn(t[0]);t=u(t);for(r=t.next();!r.done;r=t.next())r=r.value,mn(e.h,r)&&e.add(r);return e};function vn(e,t){t=Vt(t);var r=$t(t,e.map((function(e){return Kt(e)})));return r?e.filter((function(e){return r==Kt(e)})):[]}function wn(e,t){return e.filter((function(e){return e.audio?t?e.audio.roles.includes(t):0==e.audio.roles.length:!1}))}function En(e,t){return e.filter((function(e){return e.audio&&e.audio.label?e.audio.label.toLowerCase()==t.toLowerCase():!1}))}function Sn(t,r){"AUTO"==r&&(r=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");return t.filter((function(e){return e.video&&e.video.hdr&&e.video.hdr!=r?!1:!0}))}function _n(){this.g=Cn;this.h=(new Map).set(Cn,2).set(Dn,1)}function xn(e,t,r){e.h.set(Cn,r).set(Dn,t)}var Dn=0,Cn=1;function Tn(e,t){var r=kn();this.l=null==e.maxAttempts?r.maxAttempts:e.maxAttempts;this.j=null==e.baseDelay?r.baseDelay:e.baseDelay;this.o=null==e.fuzzFactor?r.fuzzFactor:e.fuzzFactor;this.m=null==e.backoffFactor?r.backoffFactor:e.backoffFactor;this.g=0;this.h=this.j;if(this.i=void 0===t?!1:t)this.g=1}function On(e){var t,r;return L((function(n){if(1==n.g){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new dt(2,7,1010);t=e.g;e.g++;if(0==t)return n.return();r=e.h*(1+(2*Math.random()-1)*e.o);return S(n,new Promise((function(e){new Jt(e).S(r/1e3)})),2)}e.h*=e.m;_(n)}))}function kn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Pn(){var e,t,r=new Promise((function(r,n){e=r;t=n}));r.resolve=e;r.reject=t;return r}Pn.prototype.resolve=function(){};Pn.prototype.reject=function(){};function An(e,t){this.promise=e;this.i=t;this.g=!1}function In(e){return new An(Promise.reject(e),(function(){return Promise.resolve()}))}function jn(){var e=Promise.reject(new dt(2,7,7001));e.catch((function(){}));return new An(e,(function(){return Promise.resolve()}))}function Rn(e){return new An(Promise.resolve(e),(function(){return Promise.resolve()}))}function Nn(e){return new An(e,(function(){return e.catch((function(){}))}))}An.prototype.abort=function(){this.g=!0;return this.i()};function Ln(e){return new An(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}An.prototype.finally=function(e){this.promise.then((function(){return e(!0)}),(function(){return e(!1)}));return this};An.prototype.ea=function(e,t){function r(r){return function(s){if(i.g&&r)o.reject(a);else{var l=r?e:t;l?n=Mn(l,s,o):(r?o.resolve:o.reject)(s)}}}function n(){o.reject(a);return i.abort()}var i=this,o=new Pn,a=new dt(2,7,7001);this.promise.then(r(!0),r(!1));return new An(o,(function(){return n()}))};function Mn(e,t,r){try{var n=e(t);if(n&&n.promise&&n.abort)return r.resolve(n.promise),function(){return n.abort()};r.resolve(n);return function(){return Promise.resolve(n).then((function(){}),(function(){}))}}catch(e){return r.reject(e),function(){return Promise.resolve()}}}V("shaka.util.AbortableOperation",An);An.prototype.chain=An.prototype.ea;An.prototype["finally"]=An.prototype.finally;An.all=Ln;An.prototype.abort=An.prototype.abort;An.notAbortable=Nn;An.completed=Rn;An.aborted=jn;An.failed=In;function qn(t,r){if(r)if(r instanceof Map)for(var n=u(r.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:r.get(i),writable:!0,enumerable:!0});else for(n in r)Object.defineProperty(this,n,{value:r[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now();this.type=t;this.isTrusted=!1;this.target=this.currentTarget=null;this.g=!1}function Un(e){var t=new qn(e.type),r;for(r in e)Object.defineProperty(t,r,{value:e[r],writable:!0,enumerable:!0});return t}qn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};qn.prototype.stopImmediatePropagation=function(){this.g=!0};qn.prototype.stopPropagation=function(){};V("shaka.util.FakeEvent",qn);var Hn={th:"abrstatuschanged",uh:"adaptation",vh:"buffering",wh:"downloadfailed",xh:"downloadheadersreceived",yh:"drmsessionupdate",Ah:"emsg",Mh:"prft",Error:"error",Bh:"expirationupdated",Ch:"gapjumped",Fh:"loaded",Gh:"loading",Ih:"manifestparsed",Jh:"mediaqualitychanged",Metadata:"metadata",Kh:"onstatechange",Lh:"onstateidle",Nh:"ratechange",Ph:"segmentappended",Qh:"sessiondata",Rh:"stalldetected",Sh:"streaming",Th:"textchanged",Uh:"texttrackvisibility",Vh:"timelineregionadded",Wh:"timelineregionenter",Xh:"timelineregionexit",Yh:"trackschanged",$h:"unloading",bi:"variantchanged"};function Fn(){this.aa=new Yt;this.yd=this}Fn.prototype.addEventListener=function(e,t){this.aa&&this.aa.push(e,t)};Fn.prototype.removeEventListener=function(e,t){this.aa&&this.aa.remove(e,t)};Fn.prototype.dispatchEvent=function(e){if(!this.aa)return!0;var t=this.aa.get(e.type)||[],r=this.aa.get("All");r&&(t=t.concat(r));t=u(t);for(r=t.next();!r.done;r=t.next()){r=r.value;e.target=this.yd;e.currentTarget=this.yd;try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented};Fn.prototype.release=function(){this.aa=null};function Bn(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(r.has(e))return null;var n=e.constructor==Array;if(e.constructor!=Object&&!n)return null;r.add(e);var i=n?[]:{},o;for(o in e)i[o]=t(e[o]);n&&(i.length=e.length);return i}}var r=new Set;return t(e)}function zn(e){var t={},r;for(r in e)t[r]=e[r];return t}function Vn(){this.g=[]}function Wn(e,t){e.g.push(t.finally((function(){we(e.g,t)})))}Vn.prototype.destroy=function(){for(var e=[],t=u(this.g),r=t.next();!r.done;r=t.next())r=r.value,r.promise.catch((function(){})),e.push(r.abort());this.g=[];return Promise.all(e)};function Gn(e,t,r,n){Fn.call(this);this.i=!1;this.m=new Vn;this.g=new Set;this.h=new Set;this.l=e||null;this.j=t||null;this.s=r||null;this.u=n||null;this.o=!1}b(Gn,Fn);n=Gn.prototype;n.Me=function(e){this.o=e};function Kn(e,t,r,n){r=r||ti;var i=ri[e];if(!i||r>=i.priority)ri[e]={priority:r,Ld:t,Wg:void 0===n?!1:n}}n.Xg=function(e){this.g.add(e)};n.nh=function(e){this.g.delete(e)};n.Zf=function(){this.g.clear()};n.Yg=function(e){this.h.add(e)};n.oh=function(e){this.h.delete(e)};n.$f=function(){this.h.clear()};function $n(e,t,r){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===r?null:r}}n.destroy=function(){this.i=!0;this.g.clear();this.h.clear();Fn.prototype.release.call(this);return this.m.destroy()};n.request=function(e,t,r){var n=this,i=new Jn;if(this.i){var o=Promise.reject(new dt(2,7,7001));o.catch((function(){}));return new Zn(o,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET";t.headers=t.headers||{};t.retryParameters=t.retryParameters?Bn(t.retryParameters):kn();t.uris=Bn(t.uris);o=Xn(this,e,t,r);var a=o.ea((function(){return Yn(n,e,t,new Tn(t.retryParameters,!1),0,null,i)})),s=a.ea((function(t){return Qn(n,e,t,r)})),l=Date.now(),c=0;o.promise.then((function(){c=Date.now()-l}),(function(){}));var u=0;a.promise.then((function(){u=Date.now()}),(function(){}));var p=s.ea((function(r){var i=Date.now()-u,o=r.response;o.timeMs+=c;o.timeMs+=i;r.Ig||!n.l||o.fromCache||"HEAD"==t.method||e!=ei||n.l(o.timeMs,o.data.byteLength);return o}),(function(e){e&&(e.severity=2);throw e}));o=new Zn(p.promise,(function(){return p.abort()}),i);Wn(this.m,o);return o};function Xn(e,t,r,n){function i(e){o=o.ea((function(){r.body&&(r.body=pe(r.body));return e(t,r,n)}))}var o=Rn(void 0);e.u&&i(e.u);e=u(e.g);for(var a=e.next();!a.done;a=e.next())i(a.value);return o.ea(void 0,(function(e){if(e instanceof dt&&7001==e.code)throw e;throw new dt(2,1,1006,e)}))}function Yn(e,t,r,n,i,o,a){e.o&&(r.uris[i]=r.uris[i].replace("http://","https://"));var s=new Je(r.uris[i]),l=s.Ma,c=!1;l||(l=location.protocol,l=l.slice(0,-1),Ze(s,l),r.uris[i]=s.toString());l=l.toLowerCase();var u=(l=ri[l])?l.Ld:null;if(!u)return In(new dt(2,1,1e3,s));var p=l.Wg,d=null,h=null,m=!1,f=!1,g;return Nn(On(n)).ea((function(){if(e.i)return jn();g=Date.now();var n=u(r.uris[i],r,t,(function(r,n,i){d&&d.stop();h&&h.S(s/1e3);e.l&&t==ei&&(e.l(r,n),c=!0,a.g=i)}),(function(n){e.j&&e.j(n,r,t);f=!0}));if(!p)return n;var o=r.retryParameters.connectionTimeout;o&&(d=new Jt((function(){m=!0;n.abort()})),d.S(o/1e3));var s=r.retryParameters.stallTimeout;s&&(h=new Jt((function(){m=!0;n.abort()})));return n})).ea((function(n){d&&d.stop();h&&h.stop();void 0==n.timeMs&&(n.timeMs=Date.now()-g);var i={response:n,Ig:c};!f&&e.j&&e.j(n.headers,r,t);return i}),(function(s){d&&d.stop();h&&h.stop();if(e.s){var l=null,c=0;s instanceof dt&&(l=s,1001==s.code&&(c=s.data[1]));e.s(r,l,c,m)}if(e.i)return jn();m&&(s=new dt(1,1,1003,r.uris[i],t));if(s instanceof dt){if(7001==s.code)throw s;if(1010==s.code)throw o;if(1==s.severity)return l=(new Map).set("error",s),l=new qn("retry",l),e.dispatchEvent(l),i=(i+1)%r.uris.length,Yn(e,t,r,n,i,s,a)}throw s}))}function Qn(e,t,r,n){var i=Rn(void 0),o={};e=u(e.h);for(var a=e.next();!a.done;o={Vd:o.Vd},a=e.next())o.Vd=a.value,i=i.ea(function(e){return function(){var i=r.response;i.data&&(i.data=pe(i.data));return e.Vd(t,i,n)}}(o));return i.ea((function(){return r}),(function(e){var t=2;if(e instanceof dt){if(7001==e.code)throw e;t=e.severity}throw new dt(t,1,1007,e)}))}V("shaka.net.NetworkingEngine",Gn);Gn.prototype.request=Gn.prototype.request;Gn.prototype.destroy=Gn.prototype.destroy;Gn.makeRequest=$n;Gn.defaultRetryParameters=function(){return kn()};Gn.prototype.clearAllResponseFilters=Gn.prototype.$f;Gn.prototype.unregisterResponseFilter=Gn.prototype.oh;Gn.prototype.registerResponseFilter=Gn.prototype.Yg;Gn.prototype.clearAllRequestFilters=Gn.prototype.Zf;Gn.prototype.unregisterRequestFilter=Gn.prototype.nh;Gn.prototype.registerRequestFilter=Gn.prototype.Xg;Gn.unregisterScheme=function(e){delete ri[e]};Gn.registerScheme=Kn;Gn.prototype.setForceHTTPS=Gn.prototype.Me;function Jn(){this.g=0}Gn.NumBytesRemainingClass=Jn;function Zn(e,t,r){An.call(this,e,t);this.h=r}b(Zn,An);Gn.PendingRequest=Zn;var ei=1;Gn.RequestType={MANIFEST:0,SEGMENT:ei,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};Gn.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var ti=3;Gn.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:ti};var ri={};function ni(e){this.g=!1;this.h=new Pn;this.i=e}ni.prototype.destroy=function(){var e=this;if(this.g)return this.h;this.g=!0;return this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()}))};function ii(e,t){if(e.g){if(t instanceof dt&&7003==t.code)throw t;throw new dt(2,7,7003,t)}}function oi(){this.g=new Yt}n=oi.prototype;n.release=function(){this.sb();this.g=null};n.C=function(e,t,r,n){this.g&&(e=new ai(e,t,r,n),this.g.push(t,e))};n.ja=function(e,t,r,n){function i(n){o.Xc(e,t,i);r(n)}var o=this;this.C(e,t,i,n)};n.Xc=function(e,t,r){if(this.g){var n=this.g.get(t)||[];n=u(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.target!=e||r!=i.listener&&r||(i.Xc(),this.g.remove(t,i))}};n.sb=function(){if(this.g){var e=this.g,t=[],r;for(r in e.g)t.push.apply(t,p(e.g[r]));e=u(t);for(t=e.next();!t.done;t=e.next())t.value.Xc();this.g.g={}}};V("shaka.util.EventManager",oi);oi.prototype.removeAll=oi.prototype.sb;oi.prototype.unlisten=oi.prototype.Xc;oi.prototype.listenOnce=oi.prototype.ja;oi.prototype.listen=oi.prototype.C;oi.prototype.release=oi.prototype.release;function ai(e,t,r,n){this.target=e;this.type=t;this.listener=r;this.g=si(e,n);this.target.addEventListener(t,r,this.g)}ai.prototype.Xc=function(){this.target.removeEventListener(this.type,this.listener,this.g);this.listener=this.target=null;this.g=!1};function si(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var r=new Set(["passive","capture"]);Object.keys(t).filter((function(e){return!r.has(e)}));return li(e)?t:t.capture||!1}function li(e){var t=ci;if(void 0==t){t=!1;try{var r={},n={get:function(){t=!0;return!1}};Object.defineProperty(r,"passive",n);Object.defineProperty(r,"capture",n);n=function(){};e.addEventListener("test",n,r);e.removeEventListener("test",n,r)}catch(e){t=!1}ci=t}return t||!1}var ci=void 0;function ui(e,t){var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next())r.push(t(n.value));return r}function pi(e,t){e=u(e);for(var r=e.next();!r.done;r=e.next())if(!t(r.value))return!1;return!0}function di(e){this.h=e;this.g=void 0}di.prototype.value=function(){void 0==this.g&&(this.g=this.h());return this.g};function hi(e){for(var t=new Map,r=u(Object.keys(e)),n=r.next();!n.done;n=r.next())n=n.value,t.set(n,e[n]);return t}function mi(e){var t={};e.forEach((function(e,r){t[r]=e}));return t}function fi(e,t){if(e||t){if(e&&!t||t&&!e)return!1}else return!0;if(e.size!=t.size)return!1;e=u(e);for(var r=e.next();!r.done;r=e.next()){var n=u(r.value);r=n.next().value;n=n.next().value;if(!t.has(r))return!1;r=t.get(r);if(r!=n||void 0==r)return!1}return!0}function gi(){}function yi(t){if(!t)return"";t=de(t);239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3));if(e.TextDecoder&&!ar())return t=(new TextDecoder).decode(t),t.includes("�")&&Y('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var r="",n=0;n<t.length;++n){var i=65533;0==(t[n]&128)?i=t[n]:t.length>=n+2&&192==(t[n]&224)&&128==(t[n+1]&192)?(i=(t[n]&31)<<6|t[n+1]&63,n+=1):t.length>=n+3&&224==(t[n]&240)&&128==(t[n+1]&192)&&128==(t[n+2]&192)?(i=(t[n]&15)<<12|(t[n+1]&63)<<6|t[n+2]&63,n+=2):t.length>=n+4&&240==(t[n]&241)&&128==(t[n+1]&192)&&128==(t[n+2]&192)&&128==(t[n+3]&192)&&(i=(t[n]&7)<<18|(t[n+1]&63)<<12|(t[n+2]&63)<<6|t[n+3]&63,n+=3);if(65535>=i)r+=String.fromCharCode(i);else{i-=65536;var o=i&1023;r+=String.fromCharCode(55296+(i>>10));r+=String.fromCharCode(56320+o)}}return r}function bi(e,t,r){if(!e)return"";if(!r&&0!=e.byteLength%2)throw new dt(2,2,2004);r=Math.floor(e.byteLength/2);var n=new Uint16Array(r);e=he(e);for(var i=0;i<r;i++)n[i]=e.getUint16(2*i,t);return Si.value()(n)}function vi(e){function t(e){return r.byteLength<=e||32<=r[e]&&126>=r[e]}if(!e)return"";var r=de(e);if(239==r[0]&&187==r[1]&&191==r[2])return yi(r);if(254==r[0]&&255==r[1])return bi(r.subarray(2),!1);if(255==r[0]&&254==r[1])return bi(r.subarray(2),!0);if(0==r[0]&&0==r[2])return bi(e,!1);if(0==r[1]&&0==r[3])return bi(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return yi(e);throw new dt(2,2,2003)}function wi(t){if(e.TextEncoder&&!ar()){var r=new TextEncoder;return pe(r.encode(t))}t=encodeURIComponent(t);t=unescape(t);r=new Uint8Array(t.length);for(var n=0;n<t.length;n++)r[n]=t[n].charCodeAt(0);return pe(r)}function Ei(e,t){for(var r=new ArrayBuffer(2*e.length),n=new DataView(r),i=0;i<e.length;++i)n.setUint16(2*i,e.charCodeAt(i),t);return r}V("shaka.util.StringUtils",gi);gi.resetFromCharCode=function(){Si.g=void 0};gi.toUTF16=Ei;gi.toUTF8=wi;gi.fromBytesAutoDetect=vi;gi.fromUTF16=bi;gi.fromUTF8=yi;var Si=new di((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={nb:65536};0<t.nb;t={nb:t.nb},t.nb/=2)if(e(t.nb))return function(e){return function(t){for(var r="",n=0;n<t.length;n+=e.nb)r+=String.fromCharCode.apply(null,t.subarray(n,n+e.nb));return r}}(t);return null}));function _i(e,t){this.h=he(e);this.i=t==Di;this.g=0}n=_i.prototype;n.ha=function(){return this.g<this.h.byteLength};n.fa=function(){return this.g};n.getLength=function(){return this.h.byteLength};n.qa=function(){try{var e=this.h.getUint8(this.g);this.g+=1;return e}catch(e){throw xi()}};n.Ia=function(){try{var e=this.h.getUint16(this.g,this.i);this.g+=2;return e}catch(e){throw xi()}};n.J=function(){try{var e=this.h.getUint32(this.g,this.i);this.g+=4;return e}catch(e){throw xi()}};n.yf=function(){try{var e=this.h.getInt32(this.g,this.i);this.g+=4;return e}catch(e){throw xi()}};n.dc=function(){try{if(this.i){var e=this.h.getUint32(this.g,!0);var t=this.h.getUint32(this.g+4,!0)}else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw xi()}if(2097151<t)throw new dt(2,3,3001);this.g+=8;return t*Math.pow(2,32)+e};n.jb=function(e){if(this.g+e>this.h.byteLength)throw xi();var t=de(this.h,this.g,e);this.g+=e;return t};n.skip=function(e){if(this.g+e>this.h.byteLength)throw xi();this.g+=e};n.eh=function(e){if(this.g<e)throw xi();this.g-=e};n.seek=function(e){if(0>e||e>this.h.byteLength)throw xi();this.g=e};n.Sc=function(){for(var e=this.g;this.ha()&&0!=this.h.getUint8(this.g);)this.g+=1;e=de(this.h,e,this.g-e);this.g+=1;return yi(e)};function xi(){return new dt(2,3,3e3)}V("shaka.util.DataViewReader",_i);_i.prototype.readTerminatedString=_i.prototype.Sc;_i.prototype.seek=_i.prototype.seek;_i.prototype.rewind=_i.prototype.eh;_i.prototype.skip=_i.prototype.skip;_i.prototype.readBytes=_i.prototype.jb;_i.prototype.readUint64=_i.prototype.dc;_i.prototype.readInt32=_i.prototype.yf;_i.prototype.readUint32=_i.prototype.J;_i.prototype.readUint16=_i.prototype.Ia;_i.prototype.readUint8=_i.prototype.qa;_i.prototype.getLength=_i.prototype.getLength;_i.prototype.getPosition=_i.prototype.fa;_i.prototype.hasMoreData=_i.prototype.ha;var Di=1;_i.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Di};function Ci(){this.i=[];this.h=[];this.g=!1}n=Ci.prototype;n.box=function(e,t){e=Ai(e);this.i[e]=Ri;this.h[e]=t;return this};n.M=function(e,t){e=Ai(e);this.i[e]=Ni;this.h[e]=t;return this};n.stop=function(){this.g=!0};n.parse=function(e,t,r){e=new _i(e,0);for(this.g=!1;e.ha()&&!this.g;)this.Qc(0,e,t,r)};n.Qc=function(e,t,r,n){var i=t.fa();if(n&&i+8>t.getLength())this.g=!0;else{var o=t.J(),a=t.J(),s=Ii(a),l=!1;switch(o){case 0:o=t.getLength()-i;break;case 1:if(n&&t.fa()+8>t.getLength()){this.g=!0;return}o=t.dc();l=!0}var c=this.h[a];if(c){var u=null,p=null;if(this.i[a]==Ni){if(n&&t.fa()+4>t.getLength()){this.g=!0;return}p=t.J();u=p>>>24;p&=16777215}a=i+o;r&&a>t.getLength()&&(a=t.getLength());n&&a>t.getLength()?this.g=!0:(n=a-t.fa(),t=0<n?t.jb(n):new Uint8Array(0),t=new _i(t,0),c({name:s,parser:this,partialOkay:r||!1,version:u,flags:p,reader:t,size:o,start:i+e,has64BitSize:l}))}else t.skip(Math.min(i+o-t.fa(),t.getLength()-t.fa()))}};function Ti(e){for(var t=ji(e);e.reader.ha()&&!e.parser.g;)e.parser.Qc(e.start+t,e.reader,e.partialOkay)}function Oi(e){for(var t=ji(e),r=e.reader.J(),n=0;n<r&&(e.parser.Qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);n++);}function ki(e){var t=ji(e);for(e.reader.skip(78);e.reader.ha()&&!e.parser.g;)e.parser.Qc(e.start+t,e.reader,e.partialOkay)}function Pi(e){return function(t){e(t.reader.jb(t.reader.getLength()-t.reader.fa()))}}function Ai(e){var t=0;e=u(e);for(var r=e.next();!r.done;r=e.next())t=t<<8|r.value.charCodeAt(0);return t}function Ii(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ji(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}V("shaka.util.Mp4Parser",Ci);Ci.headerSize=ji;Ci.typeToString=Ii;Ci.allData=Pi;Ci.visualSampleEntry=ki;Ci.sampleDescription=Oi;Ci.children=Ti;Ci.prototype.parseNext=Ci.prototype.Qc;Ci.prototype.parse=Ci.prototype.parse;Ci.prototype.stop=Ci.prototype.stop;Ci.prototype.fullBox=Ci.prototype.M;Ci.prototype.box=Ci.prototype.box;var Ri=0,Ni=1;function Li(){}function Mi(e){e=de(e);e=Si.value()(e);return btoa(e)}function qi(e,t){t=void 0==t?!0:t;e=Mi(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/[=]*$/,"")}function Ui(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}function Hi(t){for(var r=t.length/2,n=new Uint8Array(r),i=0;i<r;i++)n[i]=e.parseInt(t.substr(2*i,2),16);return n}function Fi(e){var t=de(e);e="";t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r=r.toString(16),1==r.length&&(r="0"+r),e+=r;return e}function Bi(){for(var e=M.apply(0,arguments),t=0,r=u(e),n=r.next();!n.done;n=r.next())t+=n.value.byteLength;t=new Uint8Array(t);r=0;e=u(e);for(n=e.next();!n.done;n=e.next())n=n.value,t.set(de(n),r),r+=n.byteLength;return t}V("shaka.util.Uint8ArrayUtils",Li);Li.concat=Bi;Li.toHex=Fi;Li.fromHex=Hi;Li.fromBase64=Ui;Li.toBase64=qi;Li.toStandardBase64=Mi;function zi(e){var t=this;this.g=[];this.h=[];this.data=[];(new Ci).box("moov",Ti).box("moof",Ti).M("pssh",(function(e){if(!(1<e.version)){var r=de(e.reader.h,-12,e.size);t.data.push(r);t.g.push(Fi(e.reader.jb(16)));if(0<e.version){r=e.reader.J();for(var n=0;n<r;n++){var i=Fi(e.reader.jb(16));t.h.push(i)}}}})).parse(e)}function Vi(e,t,r,n){var i=e.length,o=t.length+16+i;0<n&&(o+=4+16*r.size);var a=new Uint8Array(o),s=he(a),l=0;s.setUint32(l,o);l+=4;s.setUint32(l,1886614376);l+=4;1>n?s.setUint32(l,0):s.setUint32(l,16777216);l+=4;a.set(t,l);l+=t.length;if(0<n)for(s.setUint32(l,r.size),l+=4,t=u(r),r=t.next();!r.done;r=t.next())r=Hi(r.value),a.set(r,l),l+=r.length;s.setUint32(l,i);a.set(e,l+4);return a}function Wi(e,t){e=Ki(e,t);return 1!=e.length?null:e[0]}function Gi(e,t,r){e=Xi(e,t,r);return 1!=e.length?null:e[0]}function Ki(e,t){var r=[];e=u(e.childNodes);for(var n=e.next();!n.done;n=e.next())n=n.value,n instanceof Element&&n.tagName==t&&r.push(n);return r}function $i(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}function Xi(e,t,r){var n=[];e=u(e.childNodes);for(var i=e.next();!i.done;i=e.next())i=i.value,i instanceof Element&&i.localName==r&&i.namespaceURI==t&&n.push(i);return n}function Yi(e,t,r){return e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function Qi(e,t,r){t=u(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,e.hasAttributeNS(n,r))return e.getAttributeNS(n,r);return null}function Ji(e){return Array.from(e.childNodes).every(Zi)?e.textContent.trim():null}function Zi(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function eo(e,t,r,n){n=void 0===n?null:n;var i=null;e=e.getAttribute(t);null!=e&&(i=r(e));return null==i?n:i}function to(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");e=Date.parse(e);return isNaN(e)?null:e/1e3}function ro(e){if(!e)return null;e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!e)return null;e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null);return isFinite(e)?e:null}function no(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;e=Number(t[1]);if(!isFinite(e))return null;t=Number(t[2]);return isFinite(t)?{start:e,end:t}:null}function io(e){e=Number(e);return 0===e%1?e:null}function oo(e){e=Number(e);return 0===e%1&&0<e?e:null}function ao(e){e=Number(e);return 0===e%1&&0<=e?e:null}function so(e){e=Number(e);return isNaN(e)?null:e}function lo(e){return e?"true"===e.toLowerCase():!1}function co(e){var t;var r=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(r)?null:r}function uo(e,t){var r=new DOMParser,n=ho.value()(e);e=null;try{e=r.parseFromString(n,"text/xml")}catch(e){return null}r=e.documentElement;if(!r||r.getElementsByTagName("parsererror").length||r.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return r}function po(e,t){try{var r=vi(e);return uo(r,t)}catch(e){return null}}var ho=new di((function(){if("undefined"!==typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function mo(e,t){var r=this;t=void 0===t?1:t;this.D=e;this.G=new Set;this.m=this.s=null;this.ma=this.$=!1;this.H=0;this.g=null;this.A=new oi;this.i=new Map;this.u=new Map;this.l=new Pn;this.h=null;this.o=function(t){2==t.severity&&r.l.reject(t);e.onError(t)};this.U=new Map;this.aa=new Map;this.X=new Jt((function(){return qo(r)}));this.N=!1;this.L=[];this.P=!1;this.ba=new Jt((function(){Wo(r)})).Ca(t);this.l.catch((function(){}));this.j=new ni((function(){return fo(r)}));this.Y=!1;this.K=this.F=null}n=mo.prototype;n.destroy=function(){return this.j.destroy()};function fo(e){return L((function(t){switch(t.g){case 1:return e.A.release(),e.A=null,e.l.reject(),e.ba.stop(),e.ba=null,e.X.stop(),e.X=null,S(t,Fo(e),2);case 2:if(!e.m){t.B(3);break}x(t,4);return S(t,e.m.setMediaKeys(null),6);case 6:C(t,5);break;case 4:T(t);case 5:e.m=null;case 3:e.g=null,e.G.clear(),e.s=null,e.u=new Map,e.h=null,e.o=function(){},e.D=null,e.Y=!1,e.F=null,_(t)}}))}n.configure=function(e){this.h=e};function go(e,t,r){e.ma=!0;e.u=new Map;e.N=r;return vo(e,t)}function yo(e,t,r){e.u=new Map;r=u(r);for(var n=r.next();!n.done;n=r.next())e.u.set(n.value,{initData:null,initDataType:null});r=u(e.h.persistentSessionsMetadata);for(n=r.next();!n.done;n=r.next())n=n.value,e.u.set(n.sessionId,{initData:n.initData,initDataType:n.initDataType});e.N=0<e.u.size;return vo(e,t)}function bo(e,t,r,n,i,o){var a=new Map;i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t};i.drmInfos=[{keySystem:t,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:n,serverCertificateUri:"",initData:null,keyIds:null}];a.set(t,i);return Oo(e,a,[])}function vo(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v;return L((function(w){if(1==w.g){if(r=Ao(e))for(n=u(t),i=n.next();!i.done;i=n.next())o=i.value,o.video&&(o.video.drmInfos=[r]),o.audio&&(o.audio.drmInfos=[r]);a=t.some((function(e){return e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length?!0:!1}));a||(s=hi(e.h.servers),$o(t,s));l=new Set;c=u(t);for(i=c.next();!i.done;i=c.next())for(p=i.value,d=Vo(p),h=u(d),m=h.next();!m.done;m=h.next())f=m.value,l.add(f);g=u(l);for(m=g.next();!m.done;m=g.next())y=m.value,Yo(y,hi(e.h.servers),hi(e.h.advanced||{}),e.h.keySystemsMapping);return S(w,Tr(t,e.N,e.Y,e.h.preferredKeySystems),2)}b=a||Object.keys(e.h.servers).length;if(!b)return e.$=!0,w.return(Promise.resolve());v=Oo(e,void 0,t);return w.return(a?v:v.catch((function(){})))}))}function wo(e){var t;return L((function(r){switch(r.g){case 1:if(e.m.mediaKeys)return r.return();if(!e.F){r.B(2);break}return S(r,e.F,3);case 3:return ii(e.j),r.return();case 2:return x(r,4),e.F=e.m.setMediaKeys(e.s),S(r,e.F,6);case 6:C(r,5);break;case 4:t=T(r),e.o(new dt(2,6,6003,t.message));case 5:ii(e.j),_(r)}}))}function Eo(e,t){return L((function(r){if(1==r.g)return S(r,wo(e),2);Do(e,t.initDataType,de(t.initData));_(r)}))}n.yc=function(e){var t=this;return L((function(r){if(1==r.g){if(!t.s)return t.A.ja(e,"encrypted",(function(){t.o(new dt(2,6,6010))})),r.return();t.m=e;t.A.ja(t.m,"play",(function(){for(var e=u(t.L),r=e.next();!r.done;r=e.next())Lo(t,r.value);t.P=!0;t.L=[]}));"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.A.C(t.m,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Fo(t)}));t.K=t.g?t.g.initData.find((function(e){return 0<e.initData.length}))||null:null;return t.K||"com.apple.fps"!==t.g.keySystem||t.u.size?S(r,wo(t),2):r.B(2)}xo(t).catch((function(){}));t.K||t.u.size||t.h.parseInbandPsshEnabled||t.A.C(t.m,"encrypted",(function(e){return Eo(t,e)}));_(r)}))};function So(e){var t,r,n,i,o;return L((function(a){switch(a.g){case 1:if(!e.s||!e.g)return a.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){a.B(2);break}t=$n([e.g.serverCertificateUri],e.h.retryParameters);x(a,3);r=e.D.Ib.request(5,t);return S(a,r.promise,5);case 5:n=a.h;e.g.serverCertificate=de(n.data);C(a,4);break;case 3:throw i=T(a),new dt(2,6,6017,i);case 4:if(e.j.g)return a.return();case 2:if(!e.g.serverCertificate||!e.g.serverCertificate.length)return a.return();x(a,6);return S(a,e.s.setServerCertificate(e.g.serverCertificate),8);case 8:C(a,0);break;case 6:throw o=T(a),new dt(2,6,6004,o.message)}}))}function _o(e,t){var r,n,i;return L((function(o){if(1==o.g)return S(o,Ro(e,t,{initData:null,initDataType:null}),2);if(3!=o.g){r=o.h;if(!r)return o.return();n=[];if(i=e.i.get(r))i.Wa=new Pn,n.push(i.Wa);n.push(r.remove());return S(o,Promise.all(n),3)}e.i.delete(r);_(o)}))}function xo(e){var t,r,n,i,o;return L((function(a){if(1==a.g){if(!e.u.size)return a.B(2);e.u.forEach((function(t,r){Ro(e,r,t)}));return S(a,e.l,3)}if(2!=a.g){t=e.g&&e.g.keyIds||new Set([]);if(0<t.size&&Ko(e))return a.return(e.l);e.l=new Pn;e.l.catch((function(){}))}r=(e.g?e.g.initData:[])||[];n=u(r);for(i=n.next();!i.done;i=n.next())o=i.value,Do(e,o.initDataType,o.initData);r.length||e.l.resolve();return a.return(e.l)}))}function Do(e,t,r){if(r.length){var n=e.i.values();n=u(n);for(var i=n.next();!i.done;i=n.next())if(ce(r,i.value.initData)&&!lr("Tizen 2"))return;0<e.i.size&&Go(e)&&(e.l.resolve(),e.l=new Pn,e.l.catch((function(){})));No(e,t,r,e.g.sessionType)}}function Co(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function To(e){e=e.i.keys();e=ui(e,(function(e){return e.sessionId}));return Array.from(e)}n.ce=function(){var e=this,t=this.i.keys();t=ui(t,(function(t){var r=e.i.get(t);return{sessionId:t.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}));return Array.from(t)};n.Ic=function(){var e=Infinity,t=this.i.keys();t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,isNaN(r.expiration)||(e=Math.min(e,r.expiration));return e};n.pd=function(){return mi(this.aa)};function Oo(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b;return L((function(v){switch(v.g){case 1:n=new Map;if(r.length){i=ko(e,r,n);v.B(2);break}return S(v,Po(e,t),3);case 3:i=v.h;case 2:o=i;if(!o)throw new dt(2,6,6001);ii(e.j);x(v,4);e.G.clear();a=o.getConfiguration();s=a.audioCapabilities||[];l=a.videoCapabilities||[];c=u(s);for(p=c.next();!p.done;p=c.next())d=p.value,e.G.add(d.contentType.toLowerCase());h=u(l);for(p=h.next();!p.done;p=h.next())m=p.value,e.G.add(m.contentType.toLowerCase());if(r.length){var w=o.keySystem;var E=n.get(o.keySystem);var _=[],D=[],O=[],k=[],P=new Set;Xo(E,_,O,D,k,P);var A=e.N?"persistent-license":"temporary";w={keySystem:w,licenseServerUri:_[0],distinctiveIdentifierRequired:E[0].distinctiveIdentifierRequired,persistentStateRequired:E[0].persistentStateRequired,sessionType:E[0].sessionType||A,audioRobustness:E[0].audioRobustness||"",videoRobustness:E[0].videoRobustness||"",serverCertificate:O[0],serverCertificateUri:D[0],initData:k,keyIds:P};E=u(E);for(_=E.next();!_.done;_=E.next())_=_.value,_.distinctiveIdentifierRequired&&(w.distinctiveIdentifierRequired=_.distinctiveIdentifierRequired),_.persistentStateRequired&&(w.persistentStateRequired=_.persistentStateRequired);E=w}else E=o.keySystem,w=t.get(o.keySystem),_=[],D=[],O=[],k=[],P=new Set,Xo(w.drmInfos,_,O,D,k,P),E={keySystem:E,licenseServerUri:_[0],distinctiveIdentifierRequired:"required"==w.distinctiveIdentifier,persistentStateRequired:"required"==w.persistentState,sessionType:w.sessionTypes[0]||"temporary",audioRobustness:(w.audioCapabilities?w.audioCapabilities[0].robustness:"")||"",videoRobustness:(w.videoCapabilities?w.videoCapabilities[0].robustness:"")||"",serverCertificate:O[0],serverCertificateUri:D[0],initData:k,keyIds:P};e.g=E;if(!e.g.licenseServerUri)throw new dt(2,6,6012,e.g.keySystem);return S(v,o.createMediaKeys(),6);case 6:f=v.h;ii(e.j);e.s=f;if(!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.s)){v.B(7);break}x(v,8);return S(v,e.s.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:g=v.h;if("usable"!=g)throw new dt(2,6,6018);ii(e.j);C(v,7,4);break;case 8:y=T(v,4);if(y instanceof dt)throw y;throw new dt(2,6,6019,y.message);case 7:return e.$=!0,S(v,So(e),11);case 11:ii(e.j);C(v,0);break;case 4:b=T(v);ii(e.j,b);e.g=null;e.G.clear();if(b instanceof dt)throw b;throw new dt(2,6,6002,b.message)}}))}function ko(e,t,r){for(var n=u(t),i=n.next();!i.done;i=n.next()){var o=u(Vo(i.value));for(i=o.next();!i.done;i=o.next())i=i.value,r.has(i.keySystem)||r.set(i.keySystem,[]),r.get(i.keySystem).push(i)}if(1==r.size&&r.has(""))throw new dt(2,6,6e3);n={};e=u(e.h.preferredKeySystems);for(i=e.next();!i.done;n={Ud:n.Ud},i=e.next())for(n.Ud=i.value,o=u(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Ud}}(n)))return i.keySystemAccess;e=u([!0,!1]);for(i=e.next();!i.done;i=e.next())for(n=i.value,o=u(t),i=o.next();!i.done;i=o.next()){var a=u(i.value.decodingInfos);for(i=a.next();!i.done;i=a.next()){var s=i.value;if(s.supported&&s.keySystemAccess){i=r.get(s.keySystemAccess.keySystem);var l=u(i);for(i=l.next();!i.done;i=l.next())if(!!i.value.licenseServerUri==n)return s.keySystemAccess}}}return null}function Po(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y;return L((function(b){switch(b.g){case 1:if(1==t.size&&t.has(""))throw new dt(2,6,6e3);n=u(t.values());for(i=n.next();!i.done;i=n.next())o=i.value,0==o.audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;a=u(e.h.preferredKeySystems);s=a.next();case 2:if(s.done){b.B(4);break}l=s.value;if(!t.has(l)){b.B(3);break}c=t.get(l);x(b,6);return S(b,navigator.requestMediaKeySystemAccess(l,[c]),8);case 8:return r=b.h,b.return(r);case 6:T(b);case 7:ii(e.j);case 3:s=a.next();b.B(2);break;case 4:p=u([!0,!1]),d=p.next();case 9:if(d.done){b.B(11);break}h=d.value;m=u(t.keys());s=m.next();case 12:if(s.done){d=p.next();b.B(9);break}f=s.value;g=t.get(f);y=g.drmInfos.some((function(e){return!!e.licenseServerUri}));if(y!=h){b.B(13);break}x(b,15);return S(b,navigator.requestMediaKeySystemAccess(f,[g]),17);case 17:return r=b.h,b.return(r);case 15:T(b);case 16:ii(e.j);case 13:s=m.next();b.B(12);break;case 11:return b.return(r)}}))}function Ao(t){t=hi(t.h.clearKeys);if(0==t.size)return null;var r=[],n=[];t.forEach((function(e,t){var i=t;22!=i.length&&(i=qi(Hi(t),!1));t=e;22!=t.length&&(t=qi(Hi(e),!1));e={kty:"oct",kid:i,k:t};r.push(e);n.push(e.kid)}));t=JSON.stringify({keys:r});var i=JSON.stringify({kids:n});i=[{initData:de(wi(i)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(n)}}function Io(e){Go(e)&&e.l.resolve()}function jo(e,t){new Jt((function(){t.loaded=!0;Io(e)})).S(Jo)}function Ro(e,t,r){var n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:try{n=e.s.createSession("persistent-license")}catch(t){return i=new dt(2,6,6005,t.message),e.o(i),u.return(Promise.reject(i))}e.A.C(n,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Lo(e,t)}));e.A.C(n,"keystatuseschange",(function(t){return Mo(e,t)}));o={initData:r.initData,initDataType:r.initDataType,loaded:!1,xe:Infinity,Wa:null,type:"persistent-license"};e.i.set(n,o);x(u,2);return S(u,n.load(t),4);case 4:return a=u.h,ii(e.j),a||(e.i.delete(n),s=e.h.persistentSessionOnlinePlayback?1:2,e.o(new dt(s,6,6013)),o.loaded=!0),jo(e,o),Io(e),u.return(n);case 2:l=T(u),ii(e.j,l),e.i.delete(n),c=e.h.persistentSessionOnlinePlayback?1:2,e.o(new dt(c,6,6005,l.message)),o.loaded=!0,Io(e);case 3:return u.return(Promise.resolve())}}))}function No(e,t,r,n){try{var i=e.s.createSession(n)}catch(t){e.o(new dt(2,6,6005,t.message));return}e.A.C(i,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Lo(e,t)}));e.A.C(i,"keystatuseschange",(function(t){return Mo(e,t)}));e.i.set(i,{initData:r,initDataType:t,loaded:!1,xe:Infinity,Wa:null,type:n});try{r=e.h.initDataTransform(r,t,e.g)}catch(r){t=r;r instanceof dt||(t=new dt(2,6,6016,r));e.o(t);return}e.h.logLicenseExchange&&qi(r);i.generateRequest(t,r).catch((function(t){if(!e.j.g){e.i.delete(i);var r=t.errorCode;if(r&&r.systemCode){var n=r.systemCode;0>n&&(n+=Math.pow(2,32));n="0x"+n.toString(16)}e.o(new dt(2,6,6006,t.message,t,n))}}))}function Lo(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f;L((function(g){switch(g.g){case 1:r=t.target;e.h.logLicenseExchange&&qi(t.message);n=e.i.get(r);i=e.g.licenseServerUri;o=e.h.advanced[e.g.keySystem];"individualization-request"==t.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer);a=$n([i],e.h.retryParameters);a.body=t.message;a.method="POST";a.licenseRequestType=t.messageType;a.sessionId=r.sessionId;a.drmInfo=e.g;n&&(a.initData=n.initData,a.initDataType=n.initDataType);if(Co(e.g.keySystem)){var y=bi(a.body,!0,!0);if(y.includes("PlayReadyKeyMessage")){y=uo(y,"PlayReadyKeyMessage");for(var b=u(y.getElementsByTagName("HttpHeader")),v=b.next();!v.done;v=b.next())v=v.value,a.headers[v.getElementsByTagName("name")[0].textContent]=v.getElementsByTagName("value")[0].textContent;a.body=Ui(y.getElementsByTagName("Challenge")[0].textContent)}else a.headers["Content-Type"]="text/xml; charset=utf-8"}s=Date.now();x(g,2);c=e.D.Ib.request(2,a);return S(g,c.promise,4);case 4:l=g.h;C(g,3);break;case 2:return p=T(g),d=new dt(2,6,6007,p),e.o(d),n&&n.Wa&&n.Wa.reject(d),g.return();case 3:if(e.j.g)return g.return();e.H+=(Date.now()-s)/1e3;e.h.logLicenseExchange&&qi(l.data);x(g,5);return S(g,r.update(l.data),7);case 7:C(g,6);break;case 5:return h=T(g),m=new dt(2,6,6008,h.message),e.o(m),n&&n.Wa&&n.Wa.reject(m),g.return();case 6:if(e.j.g)return g.return();f=new qn("drmsessionupdate");e.D.onEvent(f);n&&(n.Wa&&n.Wa.resolve(),jo(e,n));_(g)}}))}function Mo(e,t){t=t.target;var r=e.i.get(t),n=!1;t.keyStatuses.forEach((function(t,i){if("string"==typeof i){var o=i;i=t;t=o}if(Co(e.g.keySystem)&&16==i.byteLength&&(tr()||ar())){o=he(i);var a=o.getUint32(0,!0),s=o.getUint16(4,!0),l=o.getUint16(6,!0);o.setUint32(0,a,!1);o.setUint16(4,s,!1);o.setUint16(6,l,!1)}"status-pending"!=t&&(r.loaded=!0);"expired"==t&&(n=!0);i=Fi(i).slice(0,32);e.U.set(i,t)}));var i=t.expiration-Date.now();(0>i||n&&1e3>i)&&r&&!r.Wa&&(e.i.delete(t),t.close().catch((function(){})));Go(e)&&(e.l.resolve(),e.X.S(Zo))}function qo(e){var t=e.U,r=e.aa;r.clear();t.forEach((function(e,t){return r.set(t,e)}));t=Array.from(r.values());t.length&&t.every((function(e){return"expired"==e}))&&e.o(new dt(2,6,6014));e.D.Jd(mi(r))}function Uo(){var e,t,r,n,i,o,a,s;return L((function(l){return 1==l.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],r={initDataTypes:["cenc"],videoCapabilities:t},n={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},i=[n,r],o=new Map,a=function(e){var t,r,n;return L((function(a){switch(a.g){case 1:x(a,2);if("org.w3.clearkey"===e&&sr())throw Error("Unsupported keySystem");return S(a,navigator.requestMediaKeySystemAccess(e,i),4);case 4:return t=a.h,n=(r=t.getConfiguration().sessionTypes)?r.includes("persistent-license"):!1,lr("Tizen 3")&&(n=!1),o.set(e,{persistentState:n}),S(a,t.createMediaKeys(),5);case 5:C(a,0);break;case 2:T(a),o.set(e,null),_(a)}}))},s=e.map((function(e){return a(e)})),S(l,Promise.all(s),2)):l.return(mi(o))}))}function Ho(e){var t;return L((function(r){if(1==r.g)return t=new Promise((function(e,t){new Jt(t).S(Qo)})),x(r,2),S(r,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(2!=r.g)return C(r,0);T(r);_(r)}))}function Fo(e){var t;return L((function(r){t=Array.from(e.i.entries());e.i.clear();return S(r,Promise.all(t.map((function(t){t=u(t);var r=t.next().value,n=t.next().value;return L((function(t){if(1==t.g)return x(t,2),e.ma||e.u.has(r.sessionId)||"persistent-license"!==n.type||e.h.persistentSessionOnlinePlayback?S(t,Ho(r),5):S(t,r.remove(),5);if(2!=t.g)return C(t,0);T(t);_(t)}))}))),0)}))}function Bo(e,t){return e.length&&t.length&&e!==t?0<zo(e,t).length:!0}function zo(e,t){if(!e.length)return t;if(!t.length)return e;var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var i={},o=u(t),a=o.next();!a.done;i={La:i.La},a=o.next())if(a=a.value,n.keySystem==a.keySystem){i.La=[];i.La=i.La.concat(n.initData||[]);i.La=i.La.concat(a.initData||[]);i.La=i.La.filter(function(e){return function(t,r){return void 0===t.keyId||r===e.La.findIndex((function(e){return e.keyId===t.keyId}))}}(i));o=n.keyIds&&a.keyIds?new Set([].concat(p(n.keyIds),p(a.keyIds))):n.keyIds||a.keyIds;r.push({keySystem:n.keySystem,licenseServerUri:n.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:n.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:n.persistentStateRequired||a.persistentStateRequired,videoRobustness:n.videoRobustness||a.videoRobustness,audioRobustness:n.audioRobustness||a.audioRobustness,serverCertificate:n.serverCertificate||a.serverCertificate,serverCertificateUri:n.serverCertificateUri||a.serverCertificateUri,initData:i.La,keyIds:o});break}}return r}function Vo(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Wo(e){e.i.forEach((function(t,r){var n=t.xe,i=r.expiration;isNaN(i)&&(i=Infinity);i!=n&&(e.D.onExpirationUpdated(r.sessionId,i),t.xe=i)}))}function Go(e){e=e.i.values();return pi(e,(function(e){return e.loaded}))}function Ko(e){for(var t=u(e.g&&e.g.keyIds||new Set([])),r=t.next();!r.done;r=t.next())if("usable"!==e.U.get(r.value))return!1;return!0}function $o(e,t){var r=[];t.forEach((function(e,t){r.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));e=u(e);for(t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=r),t.audio&&(t.audio.drmInfos=r)}function Xo(e,t,r,n,i,o){var a={};e=u(e);for(var s=e.next();!s.done;a={ra:a.ra},s=e.next()){a.ra=s.value;t.includes(a.ra.licenseServerUri)||t.push(a.ra.licenseServerUri);n.includes(a.ra.serverCertificateUri)||n.push(a.ra.serverCertificateUri);a.ra.serverCertificate&&(r.some(function(e){return function(t){return ce(t,e.ra.serverCertificate)}}(a))||r.push(a.ra.serverCertificate));if(a.ra.initData){s={};for(var l=u(a.ra.initData),c=l.next();!c.done;s={ad:s.ad},c=l.next())s.ad=c.value,i.some(function(e){return function(t){var r=e.ad;return t.keyId&&t.keyId==r.keyId?!0:t.initDataType==r.initDataType&&ce(t.initData,r.initData)}}(s))||i.push(s.ad)}if(a.ra.keyIds)for(s=u(a.ra.keyIds),l=s.next();!l.done;l=s.next())o.add(l.value)}}function Yo(t,r,n,i){var o=t.keySystem;if(o&&("org.w3.clearkey"!=o||!t.licenseServerUri)){r.size&&(r=r.get(o)||"",t.licenseServerUri=r);t.keyIds||(t.keyIds=new Set);if(n=n.get(o))t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=n.persistentStateRequired),t.videoRobustness||(t.videoRobustness=n.videoRobustness),t.audioRobustness||(t.audioRobustness=n.audioRobustness),t.serverCertificate||(t.serverCertificate=n.serverCertificate),n.sessionType&&(t.sessionType=n.sessionType),t.serverCertificateUri||(t.serverCertificateUri=n.serverCertificateUri);i[o]&&(t.keySystem=i[o]);e.cast&&e.cast.__platform__&&"com.microsoft.playready"==o&&(t.keySystem="com.chromecast.playready")}}var Qo=1,Jo=5,Zo=.5,ea=new di((function(){return pe(new Uint8Array([0]))}));function ta(){}function ra(e,t,r,n){var i,o,a,s;return L((function(l){if(1==l.g){if(n&&(i=oa[n.toLowerCase()]))return l.return(i);if(o=ia(e))if(a=aa[o])return l.return(a);return n?l.B(2):S(l,na(e,t,r),3)}if(2!=l.g&&(n=l.h)&&(s=oa[n]))return l.return(s);throw new dt(2,4,4e3,e)}))}function na(e,t,r){var n,i,o;return L((function(a){if(1==a.g)return n=$n([e],r),n.method="HEAD",S(a,t.request(0,n).promise,2);i=a.h;o=i.headers["content-type"];return a.return(o?o.toLowerCase().split(";").shift():"")}))}function ia(e){e=new Je(e).ta.split("/").pop().split(".");return 1==e.length?"":e.pop().toLowerCase()}V("shaka.media.ManifestParser",ta);ta.unregisterParserByMime=function(e){delete oa[e]};ta.registerParserByMime=function(e,t){oa[e]=t};ta.registerParserByExtension=function(e,t){aa[e]=t};ta.AccessibilityPurpose={ai:"visually impaired",Dh:"hard of hearing"};var oa={},aa={};function sa(e){function t(){n=!0}function r(e){o.push(e);Ti(e)}e=de(e);var n=!1,i,o=[],a=[];(new Ci).box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).M("stsd",(function(e){i=e;o.push(e);Oi(e)})).M("encv",t).M("enca",t).M("hev1",(function(e){a.push({box:e,Jb:1701733238})})).M("hvc1",(function(e){a.push({box:e,Jb:1701733238})})).M("avc1",(function(e){a.push({box:e,Jb:1701733238})})).M("avc3",(function(e){a.push({box:e,Jb:1701733238})})).M("ac-3",(function(e){a.push({box:e,Jb:1701733217})})).M("ec-3",(function(e){a.push({box:e,Jb:1701733217})})).M("mp4a",(function(e){a.push({box:e,Jb:1701733217})})).parse(e);if(n)return e;if(0==a.length||!i)throw re(Fi(e)),new dt(2,3,3019);a.reverse();for(var s=u(a),l=s.next();!l.done;l=s.next())l=l.value,e=la(e,i,l.box,o,l.Jb);return e}function la(e,t,r,n,i){var o=ua.value(),a=e.subarray(r.start,r.start+r.size),s=he(a),l=new Uint8Array(r.size+o.byteLength);l.set(a,0);a=he(l);a.setUint32(4,i);l.set(o,r.size);i=s.getUint32(4);a.setUint32(r.size+16,i);ca(l,0,l.byteLength);i=new Uint8Array(e.byteLength+l.byteLength);r=rr()?r.start:r.start+r.size;o=e.subarray(r);i.set(e.subarray(0,r));i.set(l,r);i.set(o,r+l.byteLength);e=u(n);for(n=e.next();!n.done;n=e.next())n=n.value,ca(i,n.start,n.size+l.byteLength);l=he(i,t.start);t=ji(t);e=l.getUint32(t);l.setUint32(t,e+1);return i}function ca(e,t,r){e=he(e,t);t=e.getUint32(0);0!=t&&(1==t?(e.setUint32(8,r>>32),e.setUint32(12,r&4294967295)):e.setUint32(0,r))}var ua=new di((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function pa(e,t,r,n,i,o,a){this.wa=e;this.Ba=t;this.ia=r;this.re=void 0===n?null:n;this.timescale=void 0===i?null:i;this.g=void 0===o?null:o;this.s=void 0===a?null:a}pa.prototype.Kc=function(){return this.Ba};pa.prototype.Hc=function(){return this.ia};function da(e,t){return e&&t?e.Kc()==t.Kc()&&e.Hc()==t.Hc()&&Se(e.wa(),t.wa())&&ce(e.g,t.g):e==t}V("shaka.media.InitSegmentReference",pa);pa.prototype.getEndByte=pa.prototype.Hc;pa.prototype.getStartByte=pa.prototype.Kc;function ha(e,t,r,n,i,o,a,s,l,c,u,p,d,h,m){c=void 0===c?[]:c;h=void 0===h?ma:h;this.startTime=e;this.j=this.endTime=t;this.F=r;this.Ba=n;this.ia=i;this.h=o;this.timestampOffset=a;this.appendWindowStart=s;this.appendWindowEnd=l;this.i=c;this.tilesLayout=void 0===u?"":u;this.D=void 0===p?null:p;this.g=void 0===d?null:d;this.status=h;this.m=!1;this.u=!0;this.o=!1;this.s=void 0===m?null:m;this.A=null;this.l=0}n=ha.prototype;n.wa=function(){return this.F()};n.getStartTime=function(){return this.startTime};n.lg=function(){return this.endTime};n.Kc=function(){return this.Ba};n.Hc=function(){return this.ia};n.Dg=function(){return this.tilesLayout};n.Cg=function(){return this.D};n.Db=function(){return this.status};n.Pg=function(){this.status=fa};n.qe=function(){this.m=!0};n.Ng=function(){return this.m};n.uf=function(){this.u=!1};n.Mg=function(){return this.u};n.tf=function(){this.o=!0};n.Jg=function(){return this.o};n.If=function(e){this.A=e};n.Ag=function(){return this.A};n.offset=function(e){this.startTime+=e;this.endTime+=e;this.j+=e;for(var t=u(this.i),r=t.next();!r.done;r=t.next())r=r.value,r.startTime+=e,r.endTime+=e,r.j+=e};n.Pe=function(e){null==this.g?Y("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))};V("shaka.media.SegmentReference",ha);ha.prototype.syncAgainst=ha.prototype.Pe;ha.prototype.offset=ha.prototype.offset;ha.prototype.getThumbnailSprite=ha.prototype.Ag;ha.prototype.setThumbnailSprite=ha.prototype.If;ha.prototype.hasByterangeOptimization=ha.prototype.Jg;ha.prototype.markAsByterangeOptimization=ha.prototype.tf;ha.prototype.isIndependent=ha.prototype.Mg;ha.prototype.markAsNonIndependent=ha.prototype.uf;ha.prototype.isPreload=ha.prototype.Ng;ha.prototype.markAsPreload=ha.prototype.qe;ha.prototype.markAsUnavailable=ha.prototype.Pg;ha.prototype.getStatus=ha.prototype.Db;ha.prototype.getTileDuration=ha.prototype.Cg;ha.prototype.getTilesLayout=ha.prototype.Dg;ha.prototype.getEndByte=ha.prototype.Hc;ha.prototype.getStartByte=ha.prototype.Kc;ha.prototype.getEndTime=ha.prototype.lg;ha.prototype.getStartTime=ha.prototype.getStartTime;ha.prototype.getUris=ha.prototype.wa;var ma=0,fa=1;ha.Status={sh:ma,Zh:fa,Hh:2};function ga(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function ya(e,t){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function ba(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;var r=0;e=u(wa(e));for(var n=e.next();!n.done;n=e.next()){var i=n.value;n=i.start;i=i.end;i>t&&(r+=i-Math.max(n,t))}return r}function va(e,t,r){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;e=wa(e).findIndex((function(e,n,i){return e.start>t&&(0==n||i[n-1].end-t<=r)}));return 0<=e?e:null}function wa(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}function Ea(){}function Sa(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function _a(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function xa(e,t){var r=(e[t]&127)<<21;r|=(e[t+1]&127)<<14;r|=(e[t+2]&127)<<7;return r|=e[t+3]&127}function Da(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var r=e.data.subarray(1).indexOf(0);if(-1===r)return null;var n=yi(de(e.data,1,r));e=yi(de(e.data,2+r)).replace(/\0*$/,"");t.description=n;t.data=e;return t}if("WXXX"===e.type){if(2>e.size||3!==e.data[0])return null;r=e.data.subarray(1).indexOf(0);if(-1===r)return null;n=yi(de(e.data,1,r));e=yi(de(e.data,2+r)).replace(/\0*$/,"");t.description=n;t.data=e;return t}if("PRIV"===e.type){if(2>e.size)return null;n=e.data.indexOf(0);if(-1===n)return null;n=yi(de(e.data,0,n));t.description=n;"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=pe(e.data.subarray(n.length+1)),t.data=e);return t}if("T"===e.type[0]){if(2>e.size||3!==e.data[0])return null;e=yi(e.data.subarray(1)).replace(/\0*$/,"");t.data=e;return t}return"W"===e.type[0]?(e=yi(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=pe(e.data),t):null}function Ca(e){for(var t=0,r=[];Sa(e,t);){var n=xa(e,t+6);e[t+5]>>6&1&&(t+=10);t+=10;for(n=t+n;t+10<n;){var i=e.subarray(t),o=xa(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:o,data:i.subarray(10,10+o)};(o=Da(i))&&r.push(o);t+=i.size+10}_a(e,t)&&(t+=10)}return r}function Ta(e,t){for(var r=t=void 0===t?0:t,n=0;Sa(e,t);)e[t+5]>>6&1&&(n+=10),n+=10,n+=xa(e,t+6),_a(e,t+10)&&(n+=10),t+=n;return 0<n?e.subarray(r,r+n):new Uint8Array([])}V("shaka.util.Id3Utils",Ea);Ea.getID3Data=Ta;Ea.getID3Frames=Ca;function Oa(e,t){var r=null,n=null,i=null,o=e.J();t&1&&(i=e.dc());t&2&&e.skip(4);t&8&&(r=e.J());t&16&&(n=e.J());return{trackId:o,ff:r,eg:n,ci:i}}function ka(e,t){return 1==t?(t=e.J(),e=e.J(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.J()}}function Pa(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));t=e.J();e.skip(4);e=e.Ia();return{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Aa(e,t,r){var n=e.J(),i=[],o=null;r&1&&(o=e.J());r&4&&e.skip(4);for(var a=0;a<n;a++){var s={Ie:null,sampleSize:null,Md:null};r&256&&(s.Ie=e.J());r&512&&(s.sampleSize=e.J());r&1024&&e.skip(4);r&2048&&(s.Md=0==t?e.J():e.yf());i.push(s)}return{gi:n,Af:i,dg:o}}function Ia(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var r=e.J();1==t?e.skip(8):e.skip(4);e.skip(4);e.skip(8);e.skip(2);e.skip(2);e.skip(2);e.skip(2);e.skip(36);t=e.Ia()+e.Ia()/16;e=e.Ia()+e.Ia()/16;return{trackId:r,width:t,height:e}}function ja(e){var t="mp4a";e.skip(11);t+="."+this.g(e.qa());t+="."+this.g(e.qa()>>>2&63).replace(/^0/,"");return{oa:t}}function Ra(e,t){e.skip(87);return{oa:t+"."+this.g(e.qa())+this.g(e.qa())+this.g(e.qa())}}function Na(e){e=e.J();return{oa:Ii(e)}}function La(e){this.j=e;this.i=e.byteLength;this.g=this.h=0}function Ma(e){var t=e.j.byteLength-e.i,r=new Uint8Array(4),n=Math.min(4,e.i);0!==n&&(r.set(e.j.subarray(t,t+n)),e.h=new _i(r,0).J(),e.g=8*n,e.i-=n)}function qa(e,t){if(e.g<=t){t-=e.g;var r=Math.floor(t/8);t-=8*r;e.g-=r;Ma(e)}e.h<<=t;e.g-=t}function Ua(e,t){var r=Math.min(e.g,t),n=e.h>>>32-r;e.g-=r;0<e.g?e.h<<=r:0<e.i&&Ma(e);r=t-r;return 0<r?n<<r|Ua(e,r):n}function Ha(e){var t;for(t=0;t<e.g;++t)if(0!==(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;Ma(e);return t+Ha(e)}function Fa(e){qa(e,1+Ha(e))}function Ba(e){var t=Ha(e);return Ua(e,t+1)-1}function za(e,t){for(var r=8,n=8,i=0;i<t;i++)0!==n&&(n=Ba(e),n=(r+(1&n?1+n>>>1:-1*(n>>>1))+256)%256),r=0===n?r:n}function Va(e){Ua(e,8);Ba(e);return Ba(e)}V("shaka.util.ExpGolomb",La);function Wa(){this.s=null;this.u=!1;this.j=this.A=null;this.i=[];this.l=this.m=null;this.g=[];this.o=null;this.h=[]}n=Wa.prototype;n.clearData=function(){this.i=[];this.g=[];this.h=[]};n.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,$a(e)),r=e.length-(e.length+t)%188,n=!1,i=t;i<r;i+=188)if(71==e[i]){var o=!!(e[i+1]&64),a=((e[i+1]&31)<<8)+e[i+2];if(1<(e[i+3]&48)>>4){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(a){case 0:o&&(s+=e[s]+1);this.s=(e[s+10]&31)<<8|e[s+11];break;case 17:case 8191:break;case this.s:o&&(s+=e[s]+1);o=e;a={audio:-1,video:-1,xd:-1,audioCodec:"",videoCodec:""};var l=s+3+((o[s+1]&15)<<8|o[s+2])-4;for(s+=12+((o[s+10]&15)<<8|o[s+11]);s<l;){var c=(o[s+1]&31)<<8|o[s+2],u=(o[s+3]&15)<<8|o[s+4];switch(o[s]){case 6:if(-1==a.audio&&0<u)for(var p=s+5,d=u;2<d;){switch(o[p]){case 106:a.audio=c;a.audioCodec="ac3";break;case 122:a.audio=c,a.audioCodec="ec3"}var h=o[p+1]+2;p+=h;d-=h}break;case 15:-1==a.audio&&(a.audio=c,a.audioCodec="aac");break;case 21:-1==a.xd&&(a.xd=c);break;case 27:-1==a.video&&(a.video=c,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=c,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=c,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=c,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=c,a.audioCodec="ec3")}s+=u+5}o=a;-1!=o.video&&(this.A=o.video,this.j=o.videoCodec);-1!=o.audio&&(this.m=o.audio,this.l=o.audioCodec);-1!=o.xd&&(this.o=o.xd);n&&!this.u&&(n=!1,i=t-188);this.u=!0;break;case this.A:s=e.subarray(s,i+188);o?this.i.push(s):this.i.length&&(o=this.i[this.i.length-1])&&(this.i[this.i.length-1]=Bi(o,s));break;case this.m:s=e.subarray(s,i+188);o?this.g.push(s):this.g.length&&(o=this.g[this.g.length-1])&&(this.g[this.g.length-1]=Bi(o,s));break;case this.o:s=e.subarray(s,i+188);o?this.h.push(s):this.h.length&&(o=this.h[this.h.length-1])&&(this.h[this.h.length-1]=Bi(o,s));break;default:n=!0}}return this};function Ga(e){if(1!==(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),Ae:e[4]<<8|e[5],pts:null,dts:null};if(t.Ae&&t.Ae>e.byteLength-6)return null;var r=e[7];r&192&&(t.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,t.dts=t.pts,r&64&&(t.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2));r=e[8]+9;if(e.byteLength<=r)return null;t.data=e.subarray(r);return t}n.Be=function(e,t){for(var r=e.pts?e.pts/9e4:null,n=e.data,i=n.byteLength,o=0,a=[],s=-1,l=0,c=!1,u,p=0;p<i;++p){var d=n[p];if(d)if(2<=o&&1==d&&c){e=p-(3<o?3:o);if(0==e)break;u.data=Bi(u.data,n.subarray(0,e));u.ab=Bi(u.ab,n.subarray(0,e));break}else{if(2<=o&&1==d){0<=s&&(o=p-((3<o?3:o)+1),a.push({data:n.subarray(s+1,o+1),ab:n.subarray(s,o+1),type:l,time:r}));if(p>=i-1)return a;p++;s=p;l=n[p]&31}o=0}else o++;p>=i-1&&0<=s&&0<=o&&(c?(u.data=Bi(u.data,n),u.ab=Bi(u.ab,n)):(c=!0,u={data:n.subarray(s+1,i),ab:n.subarray(s,i),type:l,time:r},t&&0==e.Ae&&(n=t.data,i=n.byteLength,p=-1)))}u&&a.push(u);return a};n.getMetadata=function(){for(var e=[],t=u(this.h),r=t.next();!r.done;r=t.next())(r=Ga(r.value))&&e.push({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:Ca(r.data),dts:r.dts,pts:r.pts});return e};n.yb=function(){for(var e=[],t=u(this.g),r=t.next();!r.done;r=t.next())(r=Ga(r.value))&&e.push(r);return e};n.td=function(){for(var e=[],t=u(this.i),r=t.next();!r.done;r=t.next()){r=r.value;var n=Ga(r);n&&null!=n.pts&&null!=n.dts?e.push(n):e.length&&(r=n?n.data:r)&&(n=e.pop(),n.data=Bi(n.data,r),e.push(n))}return e};n.getStartTime=function(){for(var e=null,t=u(this.yb()),r=t.next();!r.done;r=t.next()){var n=r.value;n&&null!=n.pts&&(n=Math.min(n.dts,n.pts)/9e4,null==e||e>n)&&(e=n)}t=null;n=u(this.td());for(r=n.next();!r.done;r=n.next())(r=r.value)&&null!=r.pts&&(r=Math.min(r.dts,r.pts)/9e4,null==t||t>r)&&(t=r);return{audio:e,video:t}};n.nd=function(){return{audio:this.l,video:this.j}};n.ge=function(){var e=[];if("avc"!=this.j)return e;for(var t=this.td(),r=0;r<t.length;r++){var n=t[r],i=void 0;r+1<t.length&&(i=t[r+1]);e.push.apply(e,p(this.Be(n,i)))}return e};n.Gg=function(){cn("TsParser","Please use getVideoInfo function instead.");var e=this.fe();return{height:e.height,width:e.width}};n.fe=function(){var e={height:null,width:null,oa:null},t=this.ge();if(!t.length)return e;t=t.find((function(e){return 7==e.type}));if(!t)return e;t=new La(t.data);var r=Ua(t,8),n=Ua(t,8),i=Ua(t,8);Fa(t);if(Xa.includes(r)){var o=Ba(t);3===o&&qa(t,1);Fa(t);Fa(t);qa(t,1);if(1===Ua(t,1)){o=3!==o?8:12;for(var a=0;a<o;a++)1===Ua(t,1)&&(6>a?za(t,16):za(t,64))}}Fa(t);o=Ba(t);if(0===o)Ba(t);else if(1===o)for(qa(t,1),Fa(t),Fa(t),o=Ba(t),a=0;a<o;a++)Fa(t);Fa(t);qa(t,1);o=Ba(t);a=Ba(t);var s=Ua(t,1);0===s&&qa(t,1);qa(t,1);var l=0,c=0,u=0,p=0;1===Ua(t,1)&&(l=Ba(t),c=Ba(t),u=Ba(t),p=Ba(t));e.height=String((2-s)*(a+1)*16-2*u-2*p);e.width=String(16*(o+1)-2*l-2*c);e.oa="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2);return e};function Ka(e){return 0>$a(e)?!1:!0}function $a(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71==e[r]&&71==e[r+188]&&71==e[r+376])return r;r++}return-1}V("shaka.util.TsParser",Wa);Wa.syncOffset=$a;Wa.probe=Ka;Wa.prototype.getVideoInfo=Wa.prototype.fe;Wa.prototype.getVideoResolution=Wa.prototype.Gg;Wa.prototype.getVideoNalus=Wa.prototype.ge;Wa.prototype.getCodecs=Wa.prototype.nd;Wa.prototype.getStartTime=Wa.prototype.getStartTime;Wa.prototype.getVideoData=Wa.prototype.td;Wa.prototype.getAudioData=Wa.prototype.yb;Wa.prototype.getMetadata=Wa.prototype.getMetadata;Wa.prototype.parseAvcNalus=Wa.prototype.Be;Wa.prototype.parse=Wa.prototype.parse;Wa.prototype.clearData=Wa.prototype.clearData;Wa.Timescale=9e4;var Xa=[100,110,122,244,44,83,86,118,128,138,139,134];function Ya(e,t,r){this.g=null;this.i=-1;this.j=e;this.h=t;this.l=r;"undefined"===typeof libDPIModule&&Q("Could not Find LCEVC Library dependencies on this page");"undefined"===typeof LcevcDil?Q("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Q(LcevcDil.SupportObject.SupportError);"undefined"!==typeof LcevcDil&&"undefined"!==typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}Ya.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Qa(e,t){var r=Ja;switch(t.mimeType){case"video/webm":r=Za;break;case"video/mp4":r=es}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r))}V("shaka.lcevc.Dil",Ya);Ya.prototype.release=Ya.prototype.release;var Ja=0,Za=1,es=2;function ts(e,t,r,n){var i=this;this.l=e;this.D=null;this.u=t;this.h={};this.H={};this.Y={};this.g=null;this.P=!1;this.aa=r||function(){};this.L=n||null;this.j={};this.A=new oi;this.m={};this.F=null;this.G=new Pn;this.U="";this.i=rs(this,this.G);this.o=!1;this.K=new ni((function(){return ns(i)}));this.s=!1;this.N="UNKNOWN";this.X=this.$=!1;this.ba=new Pn}function rs(e,t){var r=new MediaSource;e.A.ja(r,"sourceopen",(function(){URL.revokeObjectURL(e.U);t.resolve()}));e.U=Ps(r);e.l.src=e.U;return r}n=ts.prototype;n.destroy=function(){return this.K.destroy()};function ns(e){var t,r,n,i,o,a,s,l;return L((function(c){if(1==c.g){t=[];for(r in e.j)for(n=e.j[r],i=n[0],e.j[r]=n.slice(0,1),i&&t.push(i.p.catch(ft)),o=u(n.slice(1)),a=o.next();!a.done;a=o.next())s=a.value,s.p.reject(new dt(2,7,7003,void 0));e.g&&t.push(e.g.destroy());e.u&&t.push(e.u.destroy());for(l in e.m)t.push(e.m[l].destroy());return S(c,Promise.all(t),2)}e.A&&(e.A.release(),e.A=null);e.l&&(e.l.removeAttribute("src"),e.l.load(),e.l=null);e.D=null;e.i=null;e.g=null;e.u=null;e.h={};e.m={};e.F=null;e.j={};e.L=null;_(c)}))}n.init=function(e,t,r,n){t=void 0===t?!1:t;r=void 0===r?"UNKNOWN":r;n=void 0===n?!1:n;var i=this,o,a,s,l;return L((function(c){if(1==c.g)return S(c,i.G,2);i.s=t;i.N=r;i.$=n;i.X=!i.s&&"HLS"==i.N&&!i.$;o=u(e.keys());for(a=o.next();!a.done;a=o.next())s=a.value,l=e.get(s),is(i,s,l),i.j[s]=[];_(c)}))};function is(e,t,r){var n=Dt(r.mimeType,r.codecs);if(t==Et)os(e,n,e.s,r.external);else{var i=e.D.forceTransmux;if(!ie(n)||!e.s&&At.includes(n))i=!0;var o=Ct(r.mimeType,r.codecs);i&&(i=We(o))&&(n=i(),e.m[t]=n,n=n.convertCodecs(t,o));o=n+e.D.sourceBufferExtraFeatures;ii(e.K);try{var a=e.i.addSourceBuffer(o)}catch(t){throw new dt(2,3,3015,t,"The mediaSource_ status was"+e.i.readyState+"expected 'open'")}e.s&&(a.mode=As);e.A.C(a,"error",(function(){e.j[t][0].p.reject(new dt(2,3,3014,e.l.error?e.l.error.code:0))}));e.A.C(a,"updateend",(function(){return ws(e,t)}));e.h[t]=a;e.H[t]=n;e.Y[t]=!!r.drmInfos.length}}n.configure=function(e){this.D=e};function os(e,t,r,n){e.g||(e.g=new It(e.u));var i=e.g;n=n||e.P;e=e.N;"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=(0,Ut[t])(),i.i.setSequenceMode?i.i.setSequenceMode(r):Q('Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):Q('Text parsers should have a "setManifestType" method!'),i.u=n)}function as(e){return e.o?!1:e.i?"ended"==e.i.readyState:!0}function ss(e,t){e.o?e=null:t==Et?e=e.g.g:(e=us(e,t),e=!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null);return e}function ls(e,t){return e.o?null:t==Et?e.g.h:ga(us(e,t))}function cs(e,t,r){if(e.o)return 0;if(t==Et)return e=e.g,null==e.h||e.h<r?0:e.h-Math.max(r,e.g);e=us(e,t);return ba(e,r)}n.bb=function(){var e={total:this.o?[]:wa(this.l.buffered),audio:this.o?[]:wa(us(this,"audio")),video:this.o?[]:wa(us(this,"video")),text:[]};if(this.g){var t=this.g.g,r=this.g.h;null!=t&&null!=r&&e.text.push({start:t,end:r})}return e};function us(e,t){try{return e.h[t].buffered}catch(e){return null}}function ps(e,t,r,n,i,o){var a=null,s=de(r);if(At.includes(i))o=Ca(s),o.length&&n&&((t=o.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&t.data&&(a=Math.round(t.data)/1e3),e.aa([{cueTime:n.startTime,data:s,frames:o,dts:n.startTime,pts:n.startTime}],0,n.endTime));else if(i.includes("/mp4")&&n&&0==n.timestampOffset&&n.h&&n.h.timescale){var l=n.h.timescale;if(!isNaN(l)){var c=0,u=!1;(new Ci).box("moof",Ti).box("traf",Ti).M("tfdt",(function(e){c=ka(e.reader,e.version).baseMediaDecodeTime/l;u=!0;e.parser.stop()})).parse(r,!0);u&&(a=c)}}else i.includes("/mp4")||i.includes("/webm")||!Ka(s)||(s=(new Wa).parse(s),t=s.getStartTime()[t],null!=t&&(a=t),s=s.getMetadata(),s.length&&e.aa(s,o,n?n.endTime:null));return a}function ds(e,t,r,n,i,o,a,s){a=void 0===a?!1:a;s=void 0===s?!1:s;var l,c,u,p,d,h,m,f,g,y,b;return L((function(v){switch(v.g){case 1:l=St;if(t!=l.ca){v.B(2);break}if(!e.s){v.B(3);break}return S(v,e.ba,4);case 4:c=v.h,e.g.s=c;case 3:return S(v,Rt(e.g,r,n?n.startTime:null,n?n.endTime:null),5);case 5:return v.return();case 2:u=e.h[t].timestampOffset;p=e.H[t];e.m[t]&&(p=e.m[t].getOrginalMimeType());if(n&&(d=ps(e,t,r,n,p,u),null!=d)){h=n.startTime-d;m=Math.abs(u-h);if(.1<=m||a||s)u=h,e.X&&(Es(e,t,(function(){return bs(e,t)})),Es(e,t,(function(){return vs(e,t,u)})));f=t==l.va||!(l.va in e.h);e.s&&f&&e.ba.resolve(u)}o&&t==l.va&&(e.g||os(e,"application/cea-608",e.s,!1),e.F||(g=p.split(";",1)[0],e.F=new ge(g)),n?(y=e.F.j(r),y.length&&qt(e.g,y,n.startTime,n.endTime,u)):e.F.init(r));if(!e.m[t]){v.B(6);break}return S(v,e.m[t].transmux(r,i,n,e.i.duration,t),7);case 7:r=v.h;case 6:return r=Ds(e,r,n?n.startTime:null,t),n&&e.s&&t!=l.ca&&(a||s)&&(b=n.startTime,Es(e,t,(function(){return bs(e,t)})),Es(e,t,(function(){return vs(e,t,b)}))),S(v,Es(e,t,(function(){var n=r;if("video"==t&&e.L){var i=e.L;i.g&&i.g.appendBuffer(n,"video",i.i)}e.h[t].appendBuffer(n)})),8);case 8:_(v)}}))}function hs(e,t){var r=ls(e,"video")||0;Lt(e.g,t,r)}function ms(e){e.g&&Lt(e.g,"",0)}n.remove=function(e,t,r){var n=this,i;return L((function(o){i=St;return e==i.ca?S(o,n.g.remove(t,r),0):S(o,Es(n,e,(function(){r<=t?ws(n,e):n.h[e].remove(t,r)})),0)}))};function fs(e,t){var r;return L((function(n){r=St;return t==r.ca?e.g?S(n,e.g.remove(0,Infinity),0):n.return():S(n,Es(e,t,(function(){var r=e.i.duration;0>=r?ws(e,t):e.h[t].remove(0,r)})),0)}))}n.flush=function(e){var t=this,r;return L((function(n){r=St;return e==r.ca?n.return():S(n,Es(t,e,(function(){t.l.currentTime-=.001;ws(t,e)})),0)}))};function gs(e,t,r,n,i,o,a,s){var l,c,u;return L((function(p){if(1==p.g){l=St;if(t==l.ca)return o||(e.g.s=r),Nt(e.g,n,i),p.return();c=[];return S(p,ks(e,t,a,s),2)}(u=p.h)||c.push(Es(e,t,(function(){return bs(e,t)})));o||c.push(Es(e,t,(function(){return vs(e,t,r)})));c.push(Es(e,t,(function(){e.h[t].appendWindowStart=0;e.h[t].appendWindowEnd=i;e.h[t].appendWindowStart=n;ws(e,t)})));return S(p,Promise.all(c),0)}))}function ys(e,t,r){var n;return L((function(i){n=St;if(t==n.ca)return i.return();Es(e,t,(function(){return bs(e,t)}));return S(i,Es(e,t,(function(){return vs(e,t,r)})),0)}))}n.endOfStream=function(e){var t=this;return L((function(r){return S(r,Ss(t,(function(){as(t)||"closed"===t.i.readyState||(e?t.i.endOfStream(e):t.i.endOfStream())})),0)}))};n.Aa=function(e){var t=this;return L((function(r){return S(r,Ss(t,(function(){if(e<t.i.duration)for(var r in t.h){var n={start:function(){},p:new Pn};t.j[r].unshift(n)}t.i.duration=e})),0)}))};n.getDuration=function(){return this.i.duration};function bs(e,t){var r=e.h[t].appendWindowStart,n=e.h[t].appendWindowEnd;e.h[t].abort();e.h[t].appendWindowStart=r;e.h[t].appendWindowEnd=n;ws(e,t)}function vs(e,t,r){0>r&&(r+=.001);e.h[t].timestampOffset=r;ws(e,t)}function ws(e,t){if(!e.o){var r=e.j[t][0];r&&(r.p.resolve(),_s(e,t))}}function Es(e,t,r){ii(e.K);r={start:r,p:new Pn};e.j[t].push(r);1==e.j[t].length&&xs(e,t);return r.p}function Ss(e,t){var r,n,i,o,a,s,l;return L((function(c){switch(c.g){case 1:ii(e.K);r=[];n={};for(i in e.h)n.rc=new Pn,o={start:function(e){return function(){return e.rc.resolve()}}(n),p:n.rc},e.j[i].push(o),r.push(n.rc),1==e.j[i].length&&o.start(),n={rc:n.rc};x(c,2);return S(c,Promise.all(r),4);case 4:C(c,3);break;case 2:throw a=T(c),a;case 3:return x(c,5,6),S(c,t(),6);case 6:O(c);for(s in e.h)_s(e,s);k(c,0);break;case 5:throw l=T(c),new dt(2,3,3015,l,e.l.error||"No error in the media element")}}))}function _s(e,t){e.j[t].shift();xs(e,t)}function xs(e,t){var r=e.j[t][0];if(r)try{r.start()}catch(n){"QuotaExceededError"==n.name?r.p.reject(new dt(2,3,3017,t)):r.p.reject(new dt(2,3,3015,n,e.l.error||"No error in the media element")),_s(e,t)}}function Ds(e,t,r,n){var i=e.Y[n];e.D.insertFakeEncryptionInInit&&null==r&&i&&(nr()||rr())&&"mp4"==e.H[n].split(";")[0].split("/")[1]&&(t=sa(t));return t}function Cs(t,r,n,i){return Es(t,r,(function(){r!==Et&&(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType&&(t.m[r]&&t.m[r].destroy(),i&&(t.m[r]=i),t.h[r].changeType(n+t.D.sourceBufferExtraFeatures),t.H[r]=n),ws(t,r))}))}function Ts(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,_;return L((function(x){switch(x.g){case 1:e.o=!0;r=e.l.currentTime;D(x);e.A.sb();n=[];for(i in e.m)n.push(e.m[i].destroy());for(o in e.j)for(a=e.j[o],s=a[0],e.j[o]=a.slice(0,1),s&&n.push(s.p.catch(ft)),l=u(a.slice(1)),c=l.next();!c.done;c=l.next())p=c.value,p.p.reject(new dt(2,7,7003,void 0));for(d in e.h){h=e.h[d];try{e.i.removeSourceBuffer(h)}catch(e){}}return S(x,Promise.all(n),4);case 4:return e.m={},e.j={},e.h={},m=e.i.duration,e.G=new Pn,e.i=rs(e,e.G),S(x,e.G,5);case 5:e.i.duration=m;f=new Pn;g=e.i.sourceBuffers;y=t.size;b=0;e.A.C(g,"addsourcebuffer",(function(){b++;b===y&&f.resolve()}));v=u(t.keys());for(w=v.next();!w.done;w=v.next())E=w.value,_=t.get(E),is(e,E,_);e.l.currentTime=r;return S(x,f,2);case 2:O(x),e.o=!1,k(x,0)}}))}function Os(e,t){return Ss(e,(function(){return Ts(e,t)}))}function ks(t,r,n,i){var o,a,s,l,c,u,p,d,h;return L((function(m){if(1==m.g){o=Pt(kt(t.H[r]))[0];a=t.H[r].split(";")[0];l=Dt(n.mimeType,n.codecs);c=t.D.forceTransmux;if(!ie(l)||!t.s&&At.includes(l))c=!0;u=Ct(n.mimeType,n.codecs);c&&(p=We(u))&&(s=p(),l=s.convertCodecs(r,u));d=Pt(kt(l))[0];h=l.split(";")[0];if(o===d&&a===h)return m.return(!1);if(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType)return S(m,Cs(t,r,l,s),3);s&&s.destroy();return S(m,Os(t,i),3)}return m.return(!0)}))}var Ps=e.URL.createObjectURL,As="sequence";function Is(e,t,r){this.i=e;this.m=t;this.s=this.j=Infinity;this.g=1;this.h=this.l=null;this.o=0;this.D=!0;this.F=0;this.u=void 0===r?!0:r;this.G=0;this.A=!1}n=Is.prototype;n.getDuration=function(){return this.j};n.sg=function(){return this.g};n.Hf=function(e){this.i=e};n.Aa=function(e){this.j=e};n.xg=function(){return this.i};n.Ff=function(e){this.o=e};n.fc=function(e){this.D=e};n.Nd=function(e){this.s=e};n.Gf=function(e){this.m=e};n.kg=function(){return this.m};n.xf=function(e,t){if(0!=e.length){var r=e[e.length-1].end+t;this.Gd(e[0].start+t);this.g=e.reduce((function(e,t){return Math.max(e,t.end-t.start)}),this.g);this.h=Math.max(this.h,r);null!=this.i&&this.u&&!this.A&&(this.i=(Date.now()+this.o)/1e3-this.h-this.g)}};n.Pc=function(e){if(0!=e.length){var t=e[0].startTime,r=e[0].endTime,n=(Date.now()+this.o)/1e3;e=u(e);for(var i=e.next();!i.done;i=e.next())i=i.value,n<i.startTime||(t=Math.min(t,i.startTime),r=Math.max(r,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime));this.Gd(t);this.h=Math.max(this.h,r);null!=this.i&&this.u&&!this.A&&(this.i=n-this.h-this.g)}};n.Dd=function(){this.A=!0};n.Gd=function(e){this.l=null==this.l?e:Math.min(this.l,e)};n.ve=function(e){this.g=Math.max(this.g,e)};n.offset=function(e){null!=this.l&&(this.l+=e);null!=this.h&&(this.h+=e)};n.T=function(){return Infinity==this.j&&!this.D};n.Gb=function(){return Infinity!=this.j&&!this.D};n.eb=function(){return Math.max(this.F,this.Cb()-this.s)};n.Jf=function(e){this.F=e};n.Cb=function(){return this.T()||this.Gb()?Math.min(Math.max(0,(Date.now()+this.o)/1e3-this.g-this.i)+this.G,this.j):this.h?Math.min(this.h,this.j):this.j};n.Jc=function(e){var t=Math.max(this.l,this.F);return Infinity==this.s?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Cb()-this.s+e,this.cb()))};n.Yb=function(){return this.Jc(0)};n.cb=function(){return Math.max(0,this.Cb()-(this.T()||this.Gb()?this.m:0))};n.Of=function(){return null==this.i||null!=this.h&&this.u?!1:!0};n.Ef=function(e){this.G=e};V("shaka.media.PresentationTimeline",Is);Is.prototype.setAvailabilityTimeOffset=Is.prototype.Ef;Is.prototype.usingPresentationStartTime=Is.prototype.Of;Is.prototype.getSeekRangeEnd=Is.prototype.cb;Is.prototype.getSeekRangeStart=Is.prototype.Yb;Is.prototype.getSafeSeekRangeStart=Is.prototype.Jc;Is.prototype.getSegmentAvailabilityEnd=Is.prototype.Cb;Is.prototype.setUserSeekStart=Is.prototype.Jf;Is.prototype.getSegmentAvailabilityStart=Is.prototype.eb;Is.prototype.isInProgress=Is.prototype.Gb;Is.prototype.isLive=Is.prototype.T;Is.prototype.offset=Is.prototype.offset;Is.prototype.notifyMaxSegmentDuration=Is.prototype.ve;Is.prototype.notifyMinSegmentStartTime=Is.prototype.Gd;Is.prototype.lockStartTime=Is.prototype.Dd;Is.prototype.notifySegments=Is.prototype.Pc;Is.prototype.notifyTimeRange=Is.prototype.xf;Is.prototype.getDelay=Is.prototype.kg;Is.prototype.setDelay=Is.prototype.Gf;Is.prototype.setSegmentAvailabilityDuration=Is.prototype.Nd;Is.prototype.setStatic=Is.prototype.fc;Is.prototype.setClockOffset=Is.prototype.Ff;Is.prototype.getPresentationStartTime=Is.prototype.xg;Is.prototype.setDuration=Is.prototype.Aa;Is.prototype.setPresentationStartTime=Is.prototype.Hf;Is.prototype.getMaxSegmentDuration=Is.prototype.sg;Is.prototype.getDuration=Is.prototype.getDuration;function js(e,t,r){this.l=r;this.j=e;this.s=Ls(e);this.g=e.g.currentTime;this.m=Date.now()/1e3;this.h=!1;this.o=0;this.u=t;this.i=function(){}}js.prototype.release=function(){this.l=this.j=null;this.i=function(){}};function Rs(e,t){e.i=t}function Ns(e){this.g=e}function Ls(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;e=u(wa(e.g.buffered));for(var r=e.next();!r.done;r=e.next())if(r=r.value,!(t<r.start-.1||t>r.end-.5)){t=!0;break e}t=!1}return t}function Ms(e,t,r,n,i){var o=this;this.u=i;this.g=e;this.A=t;this.s=r;this.l=new oi;this.j=!1;this.F=e.readyState;this.D=this.i=0;this.h=n;this.o=!1;this.l.C(e,"waiting",(function(){return qs(o)}));this.m=new Jt((function(){qs(o)})).Ca(this.s.gapJumpTimerTime)}Ms.prototype.release=function(){this.l&&(this.l.release(),this.l=null);null!=this.m&&(this.m.stop(),this.m=null);this.h&&(this.h.release(),this.h=null);this.g=this.A=this.u=null};Ms.prototype.ye=function(){this.o=!0;qs(this)};function qs(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var r=t.j,n=Ls(r),i=r.g.currentTime,o=Date.now()/1e3;if(t.g!=i||t.s!=n)t.m=o,t.g=i,t.s=n,t.h=!1;i=o-t.m;if(n=i>=t.u&&n&&!t.h)t.i(t.g,i),t.h=!0,t.g=r.g.currentTime,t.o++,t.l(new qn("stalldetected"));t=!n}t&&(t=e.g.currentTime,r=e.g.buffered,n=va(r,t,e.s.gapDetectionThreshold),null==n||0==n&&!e.o||(i=r.start(n),i>=e.A.cb()||.001>i-t||(0!=n&&r.end(n-1),e.g.currentTime=i,t==e.i&&(e.i=i),e.D++,e.u(new qn("gapjumped")))))}}}function Us(e,t,r,n){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?n():(t=Hs.value().get(t),r.ja(e,t,n))}var Hs=new di((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function Fs(e,t,r,n){var i=this;this.g=e;this.m=t;this.s=r;this.l=null;this.j=function(){null==i.l&&(i.l=n());return i.l};this.o=!1;this.h=new oi;this.i=new Gs(e);Us(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){Vs(i,i.j())}))}Fs.prototype.release=function(){this.h&&(this.h.release(),this.h=null);null!=this.i&&(this.i.release(),this.i=null);this.m=function(){};this.g=null};function Bs(e){return e.o?e.g.currentTime:e.j()}function zs(e,t){0<e.g.readyState?Ks(e.i,t):Us(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){Vs(e,e.j())}))}function Vs(e,t){.001>Math.abs(e.g.currentTime-t)?Ws(e):(e.h.ja(e.g,"seeking",(function(){Ws(e)})),Ks(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Ws(e){e.o=!0;e.h.C(e.g,"seeking",(function(){return e.m()}));e.s(e.g.currentTime)}function Gs(e){var t=this;this.h=e;this.m=10;this.l=this.j=this.i=0;this.g=new Jt((function(){0>=t.i?t.g.stop():t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}Gs.prototype.release=function(){this.g&&(this.g.stop(),this.g=null);this.h=null};function Ks(e,t){e.j=e.h.currentTime;e.l=t;e.i=e.m;e.h.currentTime=t;e.g.Ca(.1)}function $s(e){this.g=e;this.j=!1;this.h=null;this.i=new oi}n=$s.prototype;n.Yd=function(){function e(){null==t.h||0==t.h?t.j=!0:(t.i.ja(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Us(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){e()}))};n.release=function(){this.i&&(this.i.release(),this.i=null);this.g=null};n.Zd=function(e){this.h=this.j?this.h:e};n.fd=function(){return(this.j?this.g.currentTime:this.h)||0};n.Xe=function(){return 0};n.We=function(){return 0};n.wf=function(){};function Xs(e,t,r,n,i,o){var a=this;this.i=e;this.g=t.presentationTimeline;this.A=t.minBufferTime||0;this.l=r;this.u=i;this.s=null;this.o=Zs(e,r,o);this.j=new Ms(e,t.presentationTimeline,r,this.o,o);this.h=new Fs(e,(function(){e:{var e=a.j;e.j=!0;e.o=!1;var t=Bs(a.h);e=Qs(a,t);if(.001<Math.abs(e-t)&&(t=Date.now()/1e3,!a.s||a.s<t-1)){a.s=t;zs(a.h,e);e=void 0;break e}a.u();e=void 0}return e}),(function(e){var t=a.j;t.g.seeking&&!t.j&&(t.j=!0,t.i=e)}),(function(){var e=n;null==e?e=Infinity>a.g.getDuration()?a.g.Yb():a.g.cb():0>e&&(e=a.g.cb()+e);return Ys(a,Js(a,e))}));this.m=new Jt((function(){if(0!=a.i.readyState&&!a.i.paused){var e=Bs(a.h),t=a.g.Yb(),r=a.g.cb();3>r-t&&(t=r-3);e<t&&(e=Qs(a,e),a.i.currentTime=e)}}))}n=Xs.prototype;n.Yd=function(){this.m.Ca(.25)};n.release=function(){this.h&&(this.h.release(),this.h=null);this.j&&(this.j.release(),this.j=null);this.m&&(this.m.stop(),this.m=null);this.i=this.h=this.g=this.l=null;this.u=function(){}};n.Zd=function(e){zs(this.h,e)};n.fd=function(){var e=Bs(this.h);return 0<this.i.readyState&&!this.i.paused?Js(this,e):e};n.Xe=function(){return this.o?this.o.o:0};n.We=function(){return this.j.D};n.wf=function(){this.j.ye()};function Ys(e,t){var r=e.g.getDuration();return t>=r?r-e.l.durationBackoff:t}function Qs(e,t){var r=Math.max(e.A,e.l.rebufferingGoal),n=e.l.safeSeekOffset,i=e.g.Yb(),o=e.g.cb(),a=e.g.getDuration();3>o-i&&(i=o-3);var s=e.g.Jc(r),l=e.g.Jc(n);r=e.g.Jc(r+n);return t>=a?Ys(e,t):t>o?o:t<i?ya(e.i.buffered,l)?l:r:t>=s||ya(e.i.buffered,t)?t:r}function Js(e,t){var r=e.g.Yb();if(t<r)return r;e=e.g.cb();return t>e?e:t}function Zs(e,t,r){if(!t.stallEnabled)return null;var n=t.stallSkip;t=new js(new Ns(e),t.stallThreshold,r);Rs(t,(function(){n?e.currentTime+=n:(e.pause(),e.play())}));return t}function el(e){this.g=e;this.l=null;this.i=0;this.m=!1}n=el.prototype;n.Bb=function(){return this.g.length};n.release=function(){this.m||(this.g=[],this.l&&this.l.stop(),this.l=null)};n.Qg=function(){this.m=!0};function tl(e,t){e=u(e.g);for(var r=e.next();!r.done;r=e.next())t(r.value)}n.find=function(e){for(var t=this.g.length-1,r=t;0<=r;--r){var n=this.g[r],i=r<t?this.g[r+1].startTime:n.endTime;if(e>=n.startTime&&e<i)return r+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null};n.get=function(e){if(0==this.g.length)return null;e-=this.i;return 0>e||e>=this.g.length?null:this.g[e]};n.offset=function(e){if(!this.m)for(var t=u(this.g),r=t.next();!r.done;r=t.next())r.value.offset(e)};n.Fd=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t}));this.g.push.apply(this.g,p(e))}};n.Oc=function(e,t){var r=this;e=e.filter((function(e){return e.endTime>t&&(0==r.g.length||e.endTime>r.g[0].startTime)}));this.Fd(e);this.Sa(t)};n.Sa=function(e){if(!this.m){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e}));this.i+=t-this.g.length}};n.Vb=function(e,t,r){r=void 0===r?!1:r;if(!this.m){for(;this.g.length;)if(this.g[this.g.length-1].startTime>=t)this.g.pop();else break;for(;this.g.length;)if(this.g[0].endTime<=e)this.g.shift(),r||this.i++;else break;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new ha(e.startTime,t,e.F,e.Ba,e.ia,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.D,e.g,e.status,e.s),this.g[this.g.length-1].l=e.l)}};n.Pd=function(e,t){var r=this;this.m||(this.l&&this.l.stop(),this.l=new Jt((function(){var e=t();e?r.g.push.apply(r.g,p(e)):(r.l.stop(),r.l=null)})),this.l.Ca(e))};el.prototype[Symbol.iterator]=function(){return this.zb(0)};el.prototype.zb=function(e){var t=this.find(e);if(null==t)return null;t--;var r=this.get(t+1),n=-1;if(r&&0<r.i.length)for(var i=r.i.length-1;0<=i;--i){var o=r.i[i];if(e>=o.startTime&&e<o.endTime){for(;i&&!o.u;)i--,o=r.i[i];if(!o.u)return Y("No independent partial segment found!"),null;t++;n=i-1;break}}return new nl(this,t,n)};function rl(e,t,r){return new el([new ha(e,e+t,(function(){return r}),0,null,null,e,e,e+t)])}V("shaka.media.SegmentIndex",el);el.forSingleSegment=rl;el.prototype.getIteratorForTime=el.prototype.zb;el.prototype.updateEvery=el.prototype.Pd;el.prototype.fit=el.prototype.Vb;el.prototype.evict=el.prototype.Sa;el.prototype.mergeAndEvict=el.prototype.Oc;el.prototype.offset=el.prototype.offset;el.prototype.get=el.prototype.get;el.prototype.find=el.prototype.find;el.prototype.markImmutable=el.prototype.Qg;el.prototype.release=el.prototype.release;function nl(e,t,r){this.i=e;this.g=t;this.h=r}nl.prototype.cg=function(){return this.g};nl.prototype.current=function(){var e=this.i.get(this.g);e&&0<e.i.length&&e.wa().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g));return e&&0<e.i.length?e.i[this.h]:e};nl.prototype.next=function(){var e=this.i.get(this.g);e&&0<e.i.length?(this.h++,e.wa().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0);e=this.current();return{value:e,done:!e}};V("shaka.media.SegmentIterator",nl);nl.prototype.next=nl.prototype.next;nl.prototype.current=nl.prototype.current;nl.prototype.currentPosition=nl.prototype.cg;function il(){el.call(this,[]);this.h=[]}b(il,el);n=il.prototype;n.clone=function(){var e=new il;e.h=this.h.slice();return e};n.release=function(){for(var e=u(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]};n.find=function(e){for(var t=0,r=u(this.h),n=r.next();!n.done;n=r.next()){n=n.value;var i=n.find(e);if(null!=i)return i+t;t+=n.i+n.Bb()}return null};n.get=function(e){for(var t=0,r=u(this.h),n=r.next();!n.done;n=r.next()){n=n.value;var i=n.get(e-t);if(i)return i;t+=n.i+n.Bb()}return null};n.offset=function(){};n.Fd=function(){};n.Sa=function(){};n.Oc=function(){};n.Vb=function(){};n.Pd=function(){};V("shaka.media.MetaSegmentIndex",il);il.prototype.updateEvery=il.prototype.Pd;il.prototype.fit=il.prototype.Vb;il.prototype.mergeAndEvict=il.prototype.Oc;il.prototype.evict=il.prototype.Sa;il.prototype.merge=il.prototype.Fd;il.prototype.offset=il.prototype.offset;il.prototype.get=il.prototype.get;il.prototype.find=il.prototype.find;il.prototype.release=il.prototype.release;function ol(e){var t=this;this.g=e;this.j=!1;this.i=this.g.sd();this.h=new Jt((function(){t.g.vf(.25*t.i)}))}ol.prototype.release=function(){this.h&&(this.h.stop(),this.h=null);this.g=null};ol.prototype.set=function(e){this.i=e;al(this)};ol.prototype.od=function(){return this.g.od()};function al(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.sd()!=t&&e.g.Oe(t);return}catch(e){}e.h.Ca(.25);0!=e.g.sd()&&e.g.Oe(0)}function sl(e){var t=this;this.h=e;this.g=new Set;this.i=new Jt((function(){ll(t,!1)})).Ca(.25)}sl.prototype.release=function(){this.i.stop();for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function ll(e,t){for(var r=u(e.g),n=r.next();!n.done;n=r.next())n.value.j(e.h.currentTime,t)}function cl(e){Fn.call(this);this.g=new Map;this.h=e}b(cl,Fn);cl.prototype.release=function(){this.g.clear();Fn.prototype.release.call(this)};function ul(e,t){var r=e.g.get(t);r||(r={Rc:[],df:null,contentType:t},e.g.set(t,r));return r}function pl(e,t,r){var n=ul(e,t.contentType);dl(e,n);e={re:t,position:r};n=n.Rc;t=n.findIndex((function(e){return e.position>=r}));0<=t?n.splice(t,n[t].position==r?1:0,e):n.push(e)}cl.prototype.j=function(e){for(var t=u(this.g.values()),r=t.next();!r.done;r=t.next()){r=r.value;e:{var n=r.Rc;for(var i=n.length-1;0<=i;i--){var o=n[i];if(o.position<=e){n=o.re;break e}}n=null}if(i=n)i=r.df,i=!(i===n||i&&n&&i.bandwidth==n.bandwidth&&i.audioSamplingRate==n.audioSamplingRate&&i.codecs==n.codecs&&i.contentType==n.contentType&&i.frameRate==n.frameRate&&i.height==n.height&&i.mimeType==n.mimeType&&i.channelsCount==n.channelsCount&&i.pixelAspectRatio==n.pixelAspectRatio&&i.width==n.width);if(i)e:{i=e;o=n.contentType;if((o=this.h()[o])&&0<o.length){var a=o[o.length-1].end;if(i>=o[0].start&&i<a){i=!0;break e}}i=!1}i&&(r.df=n,JSON.stringify(n),r=new qn("qualitychange",new Map([["quality",n],["position",e]])),this.dispatchEvent(r))}};function dl(e,t){if((e=e.h()[t.contentType])&&0<e.length){var r=e[0].start,n=e[e.length-1].end,i=t.Rc;t.Rc=i.filter((function(e,t){return e.position<=r&&t+1<i.length&&i[t+1].position<=r||e.position>=n?!1:!0}))}else t.Rc=[]}function hl(e){Fn.call(this);var t=this;this.g=new Set;this.i=e;this.h=new Jt((function(){for(var e=t.i(),r=u(t.g),n=r.next();!n.done;n=r.next())n=n.value,n.endTime<e.start&&(t.g.delete(n),n=new qn("regionremove",new Map([["region",n]])),t.dispatchEvent(n))})).Ca(2)}b(hl,Fn);hl.prototype.release=function(){this.g.clear();this.h.stop();Fn.prototype.release.call(this)};function ml(e,t){Fn.call(this);var r=this;this.i=e;this.l=t;this.g=new Map;this.m=[{Ob:null,Nb:yl,Fb:function(e,t){return fl(r,"enter",e,t)}},{Ob:gl,Nb:yl,Fb:function(e,t){return fl(r,"enter",e,t)}},{Ob:bl,Nb:yl,Fb:function(e,t){return fl(r,"enter",e,t)}},{Ob:yl,Nb:gl,Fb:function(e,t){return fl(r,"exit",e,t)}},{Ob:yl,Nb:bl,Fb:function(e,t){return fl(r,"exit",e,t)}},{Ob:gl,Nb:bl,Fb:function(e,t){return fl(r,"skip",e,t)}},{Ob:bl,Nb:gl,Fb:function(e,t){return fl(r,"skip",e,t)}}];this.h=new oi;this.h.C(this.i,"regionremove",(function(e){r.g.delete(e.region)}))}b(ml,Fn);ml.prototype.release=function(){this.i=null;this.g.clear();this.h.release();this.h=null;Fn.prototype.release.call(this)};ml.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var r=u(this.i.g),n=r.next();!n.done;n=r.next()){n=n.value;var i=this.g.get(n),o=e<n.startTime?gl:e>n.endTime?bl:yl;this.g.set(n,o);for(var a=u(this.m),s=a.next();!s.done;s=a.next())s=s.value,s.Ob==i&&s.Nb==o&&s.Fb(n,t)}}};function fl(e,t,r,n){t=new qn(t,new Map([["region",r],["seeking",n]]));e.dispatchEvent(t)}var gl=1,yl=2,bl=3;function vl(e,t,r){this.j=e;this.h=t;this.i=0;this.l=r;this.g=new Map}function wl(e,t){if(e.h.segmentIndex){var r=e.h.segmentIndex.zb(Math.max(t.startTime,e.i));if(r)for(;e.g.size<e.j&&null!=t;){var n=!0;t.m&&null!=t.ia&&(n=!1);2==t.Db()&&(n=!1);n&&!e.g.has(t)&&(n=new xl(e.l),Dl(n,t,e.h),e.g.set(t,n));e.i=t.startTime;t=r.next().value}}}function El(e){if(0!==e.g.size){for(var t=u(e.g.keys()),r=t.next();!r.done;r=t.next())(r=r.value)&&_l(e,r);e.i=0}}function Sl(e,t){t&&t!==e.h&&(El(e),e.h=t)}function _l(e,t){var r=e.g.get(t);e.g.delete(t);r&&r.abort()}function xl(e){this.i=e;this.g=this.h=null}function Dl(e,t,r){e.g=e.i(t,r,(function(t){return L((function(r){return e.h?S(r,e.h(t),0):r.B(0)}))}))}xl.prototype.abort=function(){this.g&&this.g.abort()};function Cl(e,t,r,n,i){e=$n(e,n,i);if(0!=t||null!=r)e.headers.Range=r?"bytes="+t+"-"+r:"bytes="+t+"-";return e}function Tl(e,t){var r=this;this.g=t;this.m=e;this.i=null;this.u=1;this.o=this.j=null;this.F=0;this.D=!1;this.h=new Map;this.A=!1;this.G=null;this.s=!1;this.l=new ni((function(){return Ol(r)}))}n=Tl.prototype;n.destroy=function(){return this.l.destroy()};function Ol(e){var t,r,n,i;return L((function(o){if(1==o.g){t=[];r=u(e.h.values());for(n=r.next();!n.done;n=r.next())i=n.value,tc(i),t.push(rc(i));return S(o,Promise.all(t),2)}e.h.clear();e.g=null;e.m=null;e.i=null;_(o)}))}n.configure=function(e){this.i=e;this.G=new Tn({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=u(this.h.keys()),r=t.next();!r.done;r=t.next())if(r=this.h.get(r.value),r.za){var n=r.za,i=e.segmentPrefetchLimit;n.j=i;for(var o=Array.from(n.g.keys());o.length>i;){var a=o.pop();a&&_l(n,a)}0<e.segmentPrefetchLimit||(r.za=null)}else 0<e.segmentPrefetchLimit&&(r.za=Ul(this,r.stream))};n.start=function(){var e=this;return L((function(t){if(1==t.g)return S(t,Ml(e),2);ii(e.l);e.A=!0;_(t)}))};function kl(e,t){var r,n,i,o,a,s,l;L((function(c){switch(c.g){case 1:return r=St,e.F++,n=e.F,x(c,2),S(c,fs(e.g.R,r.ca),4);case 4:C(c,3);break;case 2:if(i=T(c),e.g)e.g.onError(i);case 3:o=Dt(t.mimeType,t.codecs),os(e.g.R,o,e.m.sequenceMode,t.external),a=e.g.R.u,(s=a.isTextVisible()||e.i.alwaysStreamText)&&e.F==n&&(l=ql(e,t),e.h.set(r.ca,l),ec(e,l,0)),_(c)}}))}function Pl(e){var t=e.h.get(Et);t&&(tc(t),rc(t).catch((function(){})),e.h.delete(Et));e.o=null}function Al(e,t){var r=e.h.get("video");if(r){var n=r.stream;if(n)if(t)(t=n.trickModeVideo)&&!r.Lb&&(Rl(e,t,!1,0,!1),r.Lb=n);else if(n=r.Lb)r.Lb=null,Rl(e,n,!0,0,!1)}}function Il(e,t,r,n,i,o){r=void 0===r?!1:r;n=void 0===n?0:n;i=void 0===i?!1:i;o=void 0===o?!1:o;e.j=t;e.A&&(t.video&&Rl(e,t.video,r,n,i,o),t.audio&&Rl(e,t.audio,r,n,i,o))}function jl(e,t){L((function(r){if(1==r.g)return e.o=t,e.A?t.segmentIndex?r.B(2):S(r,t.createSegmentIndex(),2):r.return();Rl(e,t,!0,0,!1);_(r)}))}function Rl(e,t,r,n,i,o){var a=e.h.get(t.type);a||t.type!=Et?a&&(a.Lb&&(t.trickModeVideo?(a.Lb=t,t=t.trickModeVideo):a.Lb=null),a.stream!=t||i)&&(a.za&&Sl(a.za,t),t.type==Et&&(i=Dt(t.mimeType,t.codecs),os(e.g.R,i,e.m.sequenceMode,t.external)),a.stream.closeSegmentIndex&&a.stream.closeSegmentIndex(),a.stream=t,a.W=null,a.Ye=!!o,r&&(a.Bc?a.Qd=!0:a.ua?(a.vb=!0,a.ld=n,a.Qd=!0):(tc(a),Zl(e,a,!0,n).catch((function(t){if(e.g)e.g.onError(t)})))),Nl(e,a).catch((function(t){if(e.g)e.g.onError(t)}))):kl(e,t)}function Nl(e,t){var r,n;return L((function(i){if(1==i.g){if(!t.ya)return i.return();r=t.stream;n=t.ya;return r.segmentIndex?i.B(2):S(i,r.createSegmentIndex(),2)}if(t.ya!=n||t.stream!=r)return i.return();var o=e.g.rd();var a=ls(e.g.R,t.type),s=t.stream.segmentIndex.find(t.sa?t.sa.endTime:o),l=null==s?null:t.stream.segmentIndex.get(s);s=l?l.ia?l.ia-l.Ba:null:null;l&&!s&&(s=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8);s?((l=l.h)&&(s+=(l.ia?l.ia-l.Ba:null)||0),l=e.g.getBandwidthEstimate(),o=8*s/l<(a||0)-o-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.ya.h.g>s?!0:!1):o=!1;o&&t.ya.abort();_(i)}))}n.Uc=function(){if(this.g)for(var e=this.g.rd(),t=u(this.h.keys()),r=t.next();!r.done;r=t.next()){var n=r.value;r=this.h.get(n);var i=null;r.W&&(i=r.W.current());if(!i||i.startTime>e||i.endTime<e)r.W=null;i=this.g.R;i.o?i=!1:n==Et?(i=i.g,i=null==i.g||null==i.h?!1:e>=i.g&&e<i.h):(i=us(i,n),i=ya(i,e));i||((null!=ls(this.g.R,n)||r.ua)&&Ll(this,r),r.ya&&(r.ya.abort(),r.ya=null),n===Et&&(n=this.g.R,n.F&&n.F.i()),r.Uc=!0)}};function Ll(e,t){t.Bc||t.vb||(t.ua?(t.vb=!0,t.ld=0):null==ss(e.g.R,t.type)?null==t.Xa&&ec(e,t,0):(tc(t),Zl(e,t,!1,0).catch((function(t){if(e.g)e.g.onError(t)}))))}function Ml(e){var t,r,n,i,o,a,s,l,c;return L((function(p){if(1==p.g){t=St;if(!e.j)throw new dt(2,5,5006);r=new Map;n=new Set;e.j.audio&&(r.set(t.pb,e.j.audio),n.add(e.j.audio));e.j.video&&(r.set(t.va,e.j.video),n.add(e.j.video));e.o&&(r.set(t.ca,e.o),n.add(e.o));i=e.g.R;return S(p,i.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}ii(e.l);e.updateDuration();o=u(r.keys());for(a=o.next();!a.done;a=o.next())s=a.value,l=r.get(s),e.h.has(s)||(c=ql(e,l),e.h.set(s,c),ec(e,c,0));_(p)}))}function ql(e,t){return{stream:t,type:t.type,W:null,za:Ul(e,t),sa:null,$b:null,ne:null,le:null,ke:null,Lb:null,endOfStream:!1,ua:!1,Xa:null,vb:!1,ld:0,Qd:!1,Bc:!1,Uc:!0,ue:!1,Fe:!1,Mc:!1,ya:null}}function Ul(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.i.segmentPrefetchLimit?new vl(e.i.segmentPrefetchLimit,t,(function(t,r,n){return Jl(e,t,r,n)})):null}n.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();Infinity>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))};function Hl(e,t){var r,n,i,o,a;return L((function(s){switch(s.g){case 1:ii(e.l);if(t.ua||null==t.Xa||t.Bc)return s.return();t.Xa=null;if(!t.vb){s.B(2);break}return S(s,Zl(e,t,t.Qd,t.ld),3);case 3:return s.return();case 2:if(t.stream.segmentIndex){s.B(4);break}r=t.stream;return S(s,t.stream.createSegmentIndex(),5);case 5:if(r!=t.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),t.ua||t.Xa||ec(e,t,0),s.return();case 4:x(s,6);n=Fl(e,t);null!=n&&(ec(e,t,n),t.Mc=!1);C(s,7);break;case 6:return i=T(s),S(s,nc(e,t,i),8);case 8:return s.return();case 7:o=Array.from(e.h.values());if(!e.A||!o.every((function(e){return e.endOfStream}))){s.B(0);break}return S(s,e.g.R.endOfStream(),10);case 10:ii(e.l),a=e.g.R.getDuration(),0!=a&&a<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Aa(a),_(s)}}))}function Fl(e,t){if(Yl(t))return hs(e.g.R,t.stream.originalId||""),null;t.type==Et&&ms(e.g.R);var r=e.g.rd(),n=t.sa?t.sa.endTime:r,i=cs(e.g.R,t.type,r),o=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.u,a=e.m.presentationTimeline.getDuration()-n,s=ls(e.g.R,t.type);if(1e-6>a&&s)return t.endOfStream=!0,"video"==t.type&&(e=e.h.get(Et))&&Yl(e)&&(e.endOfStream=!0),null;t.endOfStream=!1;if(i>=o)return e.i.updateIntervalSeconds/2;i=Bl(e,t,r,s);if(!i)return e.i.updateIntervalSeconds;o=Infinity;a=Array.from(e.h.values());a=u(a);for(s=a.next();!s.done;s=a.next())s=s.value,Yl(s)||s.W&&!s.W.current()||(o=Math.min(o,s.sa?s.sa.endTime:r));if(n>=o+e.m.presentationTimeline.g)return e.i.updateIntervalSeconds;t.za&&t.W&&wl(t.za,i);zl(e,t,r,i).catch((function(){}));return null}function Bl(e,t,r,n){if(t.W)return t.W.current();if(t.sa||n)return r=t.sa?t.sa.endTime:n,t.ue=!0,t.W=t.stream.segmentIndex.zb(r),t.W&&t.W.next().value;e=e.i.inaccurateManifestTolerance;n=Math.max(r-e,0);var i=null;e&&(t.W=t.stream.segmentIndex.zb(n),i=t.W&&t.W.next().value);i||(t.W=t.stream.segmentIndex.zb(r),i=t.W&&t.W.next().value);return i}function zl(t,r,n,i){var o,a,s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:o=St;a=r.stream;s=r.W;r.ua=!0;x(w,2);if(2==i.Db())throw new dt(1,1,1011);return S(w,Kl(t,r,i),4);case 4:ii(t.l);if(t.s)return w.return();l="video/mp4"==a.mimeType||"audio/mp4"==a.mimeType;c=e.ReadableStream;if(t.i.lowLatencyMode&&c&&l&&("HLS"!=t.m.type||i.o))return d=new Uint8Array(0),m=h=!1,f=function(e){var o,s,l;return L((function(c){if(h)return c.return();m=!0;ii(t.l);if(t.s)return c.return();d=Wl(d,e);o=!1;s=0;(new Ci).box("mdat",(function(e){s=e.size+e.start;o=!0})).parse(d,!1,!0);if(!o)return c.B(0);l=d.subarray(0,s);d=d.subarray(s);return S(c,$l(t,r,n,a,i,l),0)}))},S(w,Ql(t,r,i,f),9);u=Ql(t,r,i);return S(w,u,7);case 7:p=w.h;ii(t.l);if(t.s)return w.return();ii(t.l);return r.vb?(r.ua=!1,ec(t,r,0),w.return()):S(w,$l(t,r,n,a,i,p),6);case 9:g=w.h;if(m){w.B(6);break}h=!0;ii(t.l);return t.s?w.return():r.vb?(r.ua=!1,ec(t,r,0),w.return()):S(w,$l(t,r,n,a,i,g),6);case 6:ii(t.l);if(t.s)return w.return();r.sa=i;s.next();r.ua=!1;r.Fe=!1;y=t.g.R.bb();b=y[r.type];te(JSON.stringify(b));r.vb||t.g.ye(i.startTime,i.endTime,r.type);ec(t,r,0);C(w,0);break;case 2:v=T(w);ii(t.l,v);if(t.s)return w.return();r.ua=!1;if(7001==v.code)r.ua=!1,tc(r),ec(t,r,0),w.B(0);else if(r.type==o.ca&&t.i.ignoreTextStreamFailures)t.h.delete(o.ca),w.B(0);else if(3017==v.code)Gl(t,r,v),w.B(0);else return r.Mc=!0,v.severity=2,S(w,nc(t,r,v),0)}}))}function Vl(t,r,n){var i,o,a,s;return L((function(l){if(1==l.g)return i=r,i.cryptoKey?l.B(2):S(l,i.fetchKey(),3);o=i.iv;if(!o)for(o=de(new ArrayBuffer(16)),a=i.firstMediaSequenceNumber+n.g,s=o.byteLength-1;0<=s;s--)o[s]=a&255,a>>=8;return l.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:o},i.cryptoKey,t))}))}function Wl(e,t){var r=new Uint8Array(e.length+t.length);r.set(e);r.set(t,e.length);return r}function Gl(e,t,r){if(!Array.from(e.h.values()).some((function(e){return e!=t&&e.Fe}))){var n=Math.round(100*e.u);if(20<n)e.u-=.2;else if(4<n)e.u-=.04;else{t.Mc=!0;e.s=!0;e.g.onError(r);return}t.Fe=!0}ec(e,t,4)}function Kl(e,t,r){var n,i,o,a,s,l,c,u,p,d,h,m,f;return L((function(g){n=St;i=[];o=Math.max(0,r.appendWindowStart-.1);a=r.appendWindowEnd+.01;s=Pt(t.stream.codecs)[0];l=t.stream.mimeType.split(";")[0];c=r.timestampOffset;if(c!=t.ne||o!=t.le||a!=t.ke||s!=t.Cd||l!=t.me){if(t.Cd&&s!=t.Cd||t.me&&l!=t.me)if(t.type===n.va){if(u=e.h.get(n.pb))u.$b=null,rc(u)}else t.type===n.pb&&(p=e.h.get(n.va))&&(p.$b=null,rc(p));d=function(){var r,i,u;return L((function(p){if(1==p.g)return r=new Map,e.j.audio&&r.set(n.pb,e.j.audio),e.j.video&&r.set(n.va,e.j.video),x(p,2),t.le=o,t.ke=a,t.Cd=s,t.me=l,t.ne=c,i=e.m.sequenceMode||"HLS"==e.m.type,S(p,gs(e.g.R,t.type,c,o,a,i,t.stream,r),4);if(2!=p.g)return C(p,0);u=T(p);t.le=null;t.ke=null;t.Cd=null;t.ne=null;throw u}))};i.push(d())}!da(r.h,t.$b)&&(t.$b=r.h)&&(h=Ql(e,t,r.h,void 0,!0),m=function(){var i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:return x(u,2),S(u,h,4);case 4:return i=u.h,ii(e.l),o=null,a=new Map,s=new Ci,s.box("moov",Ti).box("trak",Ti).box("mdia",Ti).M("mdhd",(function(e){o=Pa(e.reader,e.version).timescale})).box("hdlr",(function(e){e=e.reader;e.skip(8);e=e.jb(4);var t=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);switch(t){case"soun":a.set(n.pb,o);break;case"vide":a.set(n.va,o)}o=null})).parse(i),a.has(t.type)?r.h.timescale=a.get(t.type):null!=o&&(r.h.timescale=o),l=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,S(u,e.g.Ze(t.type,i),5);case 5:return S(u,ds(e.g.R,t.type,i,null,t.stream,l),6);case 6:C(u,0);break;case 2:throw c=T(u),t.$b=null,c}}))},e.g.Tg(r.startTime,r.h),i.push(m()));e.m.sequenceMode&&(f=t.sa?t.sa.l:null,r.l!=f||t.ue)&&(t.ue=!1,i.push(ys(e.g.R,t.type,r.startTime)));return S(g,Promise.all(i),0)}))}function $l(e,t,r,n,i,o){var a,s,l,c,u,p;return L((function(d){switch(d.g){case 1:a=n.closedCaptions&&0<n.closedCaptions.size;l=null!=n.emsgSchemeIdUris&&0<n.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes;c=e.i.parsePrftBox&&!e.D;if(l||c)s=new Ci;l&&s.M("emsg",(function(t){var r=n.emsgSchemeIdUris;if(0===t.version){var o=t.reader.Sc();var a=t.reader.Sc();var s=t.reader.J();var l=t.reader.J();var c=t.reader.J();var u=t.reader.J();var p=i.startTime+l/s}else s=t.reader.J(),p=t.reader.dc()/s+i.timestampOffset,l=p-i.startTime,c=t.reader.J(),u=t.reader.J(),o=t.reader.Sc(),a=t.reader.Sc();t=t.reader.jb(t.reader.getLength()-t.reader.fa());if(r&&r.includes(o)||e.i.dispatchAllEmsgBoxes)"urn:mpeg:dash:event:2012"==o?e.g.Ug():(r=(new Map).set("detail",{startTime:p,endTime:p+c/s,schemeIdUri:o,value:a,timescale:s,presentationTimeDelta:l,eventDuration:c,id:u,messageData:t}),r=new qn("emsg",r),r.cancelable=!0,e.g.onEvent(r),r.defaultPrevented||"https://aomedia.org/emsg/ID3"!=o&&"https://developer.apple.com/streaming/emsg-id3"!=o||(o=Ca(t),o.length&&i&&e.g.Vg([{cueTime:i.startTime,data:t,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime)))}));c&&s.M("prft",(function(t){if(!e.D&&i.h.timescale){var r=t.reader,n=t.version;r.J();t=r.J();var o=r.J();t=1e3*t+o/Math.pow(2,32)*1e3;0===n?r=r.J():(n=r.J(),r=r.J(),r=n*Math.pow(2,32)+r);t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime();r=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-r/i.h.timescale*1e3)});r=new qn("prft",r);e.g.onEvent(r);e.D=!0}}));(l||c)&&s.parse(o);return S(d,Xl(e,t,r),2);case 2:return ii(e.l),u=t.Uc,t.Uc=!1,p=t.Ye,t.Ye=!1,S(d,e.g.Ze(t.type,o),3);case 3:return S(d,ds(e.g.R,t.type,o,i,n,a,u,p),4);case 4:ii(e.l),_(d)}}))}function Xl(e,t,r){var n,i,o,a;return L((function(s){if(1==s.g){n=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g);i=ss(e.g.R,t.type);if(null==i)return s.return();o=r-i;a=o-n;return.01>=a?s.return():S(s,e.g.R.remove(t.type,i,i+a),2)}ii(e.l);_(s)}))}function Yl(e){return e&&e.type==Et&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Ql(e,t,r,n,i){var o,a,s,l,c;return L((function(u){switch(u.g){case 1:if(r instanceof pa&&(o=r.g))return u.return(o);a=null;if(t.za&&r instanceof ha){var p=t.za;if(p.g.has(r)){var d=p.g.get(r);n&&(d.h=n);p.g.delete(r);a=d.g}else a=null}a||(a=Jl(e,r,t.stream,n,i));t.ya=a;return S(u,a.promise,2);case 2:s=u.h;t.ya=null;l=s.data;if(!r.s){u.B(3);break}c=t.W;return S(u,Vl(l,r.s,c),4);case 4:l=u.h;case 3:return u.return(l)}}))}function Jl(e,t,r,n,i){i=i?0:1;var o=t instanceof ha?t:void 0;t=Cl(t.wa(),t.Ba,t.ia,e.i.retryParameters,n);return e.g.Ib.request(ei,t,{type:i,stream:r,segment:o})}function Zl(e,t,r,n){var i,o;return L((function(a){if(1==a.g)return t.vb=!1,t.Qd=!1,t.ld=0,t.Bc=!0,t.sa=null,t.$b=null,t.W=null,t.za&&El(t.za),n?(i=e.g.rd(),o=e.g.R.getDuration(),S(a,e.g.R.remove(t.type,i+n,o),3)):S(a,fs(e.g.R,t.type),4);if(3!=a.g)return ii(e.l),r?S(a,e.g.R.flush(t.type),3):a.B(3);ii(e.l);t.Bc=!1;t.endOfStream=!1;t.ua||t.Xa||ec(e,t,0);_(a)}))}function ec(e,t,r){var n=t.type;if(n!=Et||e.h.has(n))t.Xa=new Qt((function(){var r;return L((function(n){if(1==n.g)return x(n,2),S(n,Hl(e,t),4);if(2!=n.g)return C(n,0);r=T(n);if(e.g)e.g.onError(r);_(n)}))})).S(r)}function tc(e){null!=e.Xa&&(e.Xa.stop(),e.Xa=null)}function rc(e){return L((function(t){return e.ya?S(t,e.ya.abort(),0):t.B(0)}))}function nc(e,t,r){var n;return L((function(i){if(1==i.g)return S(i,On(e.G),2);ii(e.l);n=0===e.i.maxDisabledTime&&1011==r.code?1:e.i.maxDisabledTime;1===r.category&&0<n&&(r.handled=e.g.ae(t.stream,n),r.handled&&(r.severity=1));e.g.onError(r);r.handled||e.i.failureCallback(r);_(i)}))}function ic(e,t){var r=Ap(),n=this;this.j=t;this.i=e;this.l=r;this.o=null;this.m=[];this.h=this.g=null;this.u=Promise.resolve().then((function(){return sc(n)}));this.s=new ni((function(){return oc(n)}))}ic.prototype.destroy=function(){return this.s.destroy()};function oc(e){var t,r,n;return L((function(i){if(1==i.g)return e.h&&e.h.abort(),cc(e),S(i,e.u,2);e.g&&e.g.Va.Kb();t=u(e.m);for(r=t.next();!r.done;r=t.next())n=r.value,n.Va.Kb();e.g=null;e.m=[];e.j=null;_(i)}))}function ac(e,t){var r={bc:function(){},Id:function(){},Kb:function(){},onError:function(){},Kd:function(){},fi:function(){}};e.m.push({create:t,Va:r});e.h&&e.h.abort();cc(e);return r}function sc(e){return L((function(t){if(e.s.g)t=t.B(0);else{if(0==e.m.length||e.g&&!e.g.Eb)var r=!1;else{e.g&&(e.g.Va.Kb(),e.g=null);r=e.m.shift();var n=r.create(e.l);n?(r.Va.bc(),e.g={node:n.node,payload:n.payload,Eb:n.Eb,Va:r.Va}):r.Va.Kd();r=!0}r?r=Promise.resolve():e.g?r=lc(e):(e.j.Sg(e.i),e.o=new Pn,r=e.o);t=S(t,r,1)}return t}))}function lc(e){var t,r;return L((function(n){switch(n.g){case 1:return e.i=e.j.ug(e.i,e.l,e.g.node,e.g.payload),x(n,2),e.h=e.j.fg(e.i,e.l,e.g.payload),S(n,e.h.promise,4);case 4:e.h=null;e.i==e.g.node&&(e.g.Va.Id(),e.g=null);C(n,0);break;case 2:t=T(n);if(7001==t.code)e.g.Va.Kb();else e.g.Va.onError(t);e.g=null;e.h=null;r=e;return S(n,e.j.handleError(e.l,t),5);case 5:r.i=n.h,_(n)}}))}function cc(e){e.o&&(e.o.resolve(),e.o=null)}function uc(e){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(uc).join("");var t=[],r=700<=e.fontWeight,n="italic"==e.fontStyle,i=e.textDecoration.includes("underline");r&&t.push(["b"]);n&&t.push(["i"]);i&&t.push(["u"]);r="";(n=pc(e.color))&&(r+="."+n);(n=pc(e.backgroundColor))&&(r+=".bg_"+n);r&&t.push(["c",r]);return t.reduceRight((function(e,t){var r=u(t);t=r.next().value;r=r.next().value;return"<"+t+(void 0===r?"":r)+">"+e+"</"+t+">"}),e.payload)}function pc(e){switch(e.toLowerCase()){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function dc(e,t){e=u(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)dc(r.nestedCues,t);else{var n=r.clone();n.nestedCues=[];n.payload=uc(r);t.push(n)}return t}function hc(e){this.g=null;for(var t=u(Array.from(e.textTracks)),r=t.next();!r.done;r=t.next())r=r.value,r.mode="disabled","Shaka Player TextTrack"==r.label&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack"));this.g.mode="hidden"}n=hc.prototype;n.remove=function(e,t){if(!this.g)return!1;fc(this.g,(function(r){return r.startTime<t&&r.endTime>e}));return!0};n.append=function(e){var t=dc(e,[]),r=[];e=this.g.cues?Array.from(this.g.cues):[];var n={};t=u(t);for(var i=t.next();!i.done;n={Pb:n.Pb},i=t.next())n.Pb=i.value,e.some(function(e){return function(t){return t.startTime==e.Pb.startTime&&t.endTime==e.Pb.endTime&&t.text==e.Pb.payload?!0:!1}}(n))||(i=mc(n.Pb))&&r.push(i);e=r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)}));e=u(e);for(n=e.next();!n.done;n=e.next())this.g.addCue(n.value)};n.destroy=function(){this.g&&(fc(this.g,(function(){return!0})),this.g.mode="disabled");this.g=null;return Promise.resolve()};n.isTextVisible=function(){return"showing"==this.g.mode};n.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function mc(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign;t.positionAlign=e.positionAlign;e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}"center"==e.textAlign&&"center"!=t.align&&(t.align="middle");"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl");1==e.lineInterpretation&&(t.snapToLines=!1);null!=e.line&&(t.line=e.line);null!=e.position&&(t.position=e.position);return t}function fc(e,t){var r=e.mode;e.mode="showing"==r?"showing":"hidden";for(var n=u(Array.from(e.cues)),i=n.next();!i.done;i=n.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=r}V("shaka.text.SimpleTextDisplayer",hc);hc.prototype.setTextVisibility=hc.prototype.setTextVisibility;hc.prototype.isTextVisible=hc.prototype.isTextVisible;hc.prototype.destroy=hc.prototype.destroy;hc.prototype.append=hc.prototype.append;hc.prototype.remove=hc.prototype.remove;function gc(){}function yc(e){for(;e.firstChild;)e.removeChild(e.firstChild)}V("shaka.util.Dom",gc);gc.removeAllChildren=yc;function bc(t,r){var n=this;this.j=!1;this.i=[];this.A=t;this.m=r;this.g=document.createElement("div");this.g.classList.add("shaka-text-container");this.g.style.textAlign="center";this.g.style.display="flex";this.g.style.flexDirection="column";this.g.style.alignItems="center";this.g.style.justifyContent="flex-end";this.m.appendChild(this.g);this.u=new Jt((function(){Ec(n)})).Ca(.25);this.h=new Map;this.s=new oi;this.s.C(document,"fullscreenchange",(function(){Ec(n,!0)}));this.l=null;"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){Ec(n,!0)})),this.l.observe(this.g));this.o=new Map}n=bc.prototype;n.append=function(e){var t=[].concat(p(this.i)),r={};e=u(e);for(var n=e.next();!n.done;r={$c:r.$c},n=e.next())r.$c=n.value,t.some(function(e){return function(t){return xe(t,e.$c)}}(r))||this.i.push(r.$c);Ec(this)};n.destroy=function(){this.m.removeChild(this.g);this.g=null;this.j=!1;this.i=[];this.u&&this.u.stop();this.h.clear();this.s&&(this.s.release(),this.s=null);this.l&&(this.l.disconnect(),this.l=null)};n.remove=function(e,t){if(!this.g)return!1;var r=this.i.length;this.i=this.i.filter((function(r){return r.startTime<e||r.endTime>=t}));Ec(this,r>this.i.length);return!0};n.isTextVisible=function(){return this.j};n.setTextVisibility=function(e){this.j=e};function vc(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function wc(e,t,r,n,i){var o=!1,a=[],s=[];t=u(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;i.push(l);var c=e.h.get(l),p=l.startTime<=n&&l.endTime>n,d=c?c.Pf:null;c&&(a.push(c.$d),c.Tc&&a.push(c.Tc),p||(o=!0,e.h.delete(l),c=null));p&&(s.push(l),c?vc(e,d)||(o=!0):(Sc(e,l,i),c=e.h.get(l),d=c.Pf,o=!0));0<l.nestedCues.length&&d&&wc(e,l.nestedCues,d,n,i);i.pop()}if(o){n=u(a);for(i=n.next();!i.done;i=n.next())i=i.value,i.parentElement&&i.parentElement.removeChild(i);s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}));s=u(s);for(l=s.next();!l.done;l=s.next())n=e.h.get(l.value),n.Tc?(r.appendChild(n.Tc),n.Tc.appendChild(n.$d)):r.appendChild(n.$d)}}function Ec(e,t){if(e.g){var r=e.A.currentTime;if(!e.j||(void 0===t?0:t)){t=u(e.o.values());for(var n=t.next();!n.done;n=t.next())yc(n.value);yc(e.g);e.h.clear();e.o.clear()}if(e.j){t=new Map;n=u(e.h.keys());for(var i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e.h.get(i));wc(e,e.i,e.g,r,[])}}}function Sc(e,t,r){var n=1<r.length,i=n?"span":"div";t.lineBreak&&(i="br");n=!n&&0<t.nestedCues.length;var o=document.createElement(i);"br"!=i&&xc(e,o,t,r,n);r=null;if(t.region&&t.region.id)if(r=t.region,i=r.id+"_"+r.width+"x"+r.height+(r.heightUnits==Fe?"%":"px")+"-"+r.viewportAnchorX+"x"+r.viewportAnchorY+(r.viewportAnchorUnits==Fe?"%":"px"),e.o.has(i))r=e.o.get(i);else{var a=document.createElement("span"),s=r.heightUnits==Fe?"%":"px",l=r.widthUnits==Fe?"%":"px",c=r.viewportAnchorUnits==Fe?"%":"px";a.id="shaka-text-region---"+i;a.classList.add("shaka-text-region");a.style.height=r.height+s;a.style.width=r.width+l;a.style.position="absolute";a.style.top=r.viewportAnchorY+c;a.style.left=r.viewportAnchorX+c;a.style.display="flex";a.style.flexDirection="column";a.style.alignItems="center";a.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end";e.o.set(i,a);r=a}i=o;n&&(i=document.createElement("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i));e.h.set(t,{$d:o,Pf:i,Tc:r})}function _c(e){var t=e.direction,r=e.positionAlign;e=e.textAlign;return r!==De?r:"left"===e||"start"===e&&t===Pe||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Pe?"line-right":"center"}function xc(e,t,r,n,i){var o=t.style,a=0==r.nestedCues.length,s=1<n.length;o.whiteSpace="pre-wrap";var l=r.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));o.webkitTextStrokeColor=r.textStrokeColor;o.webkitTextStrokeWidth=r.textStrokeWidth;o.color=r.color;o.direction=r.direction;o.opacity=r.opacity;o.paddingLeft=Dc(r.linePadding,r,e.m);o.paddingRight=Dc(r.linePadding,r,e.m);o.textShadow=r.textShadow;if(r.backgroundImage)o.backgroundImage="url('"+r.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(r.nestedCues.length)var c=t;else c=document.createElement("span"),t.appendChild(c);r.border&&(c.style.border=r.border);i||((t=Cc(n,(function(e){return e.backgroundColor})))?c.style.backgroundColor=t:l&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)"));l&&(c.textContent=l)}s&&!n[n.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==r.displayAlign?"flex-start":"center"==r.displayAlign?"center":"flex-end");a||(o.margin="0");o.fontFamily=r.fontFamily;o.fontWeight=r.fontWeight.toString();o.fontStyle=r.fontStyle;o.letterSpacing=r.letterSpacing;o.fontSize=Dc(r.fontSize,r,e.m);null!=r.line&&(e=r.lineInterpretation,0==r.line&&e==Ie&&(e=1),1==e&&(o.position="absolute",r.writingMode==Ae?(o.width="100%",r.lineAlign==je?o.top=r.line+"%":"end"==r.lineAlign&&(o.bottom=100-r.line+"%")):"vertical-lr"==r.writingMode?(o.height="100%",r.lineAlign==je?o.left=r.line+"%":"end"==r.lineAlign&&(o.right=100-r.line+"%")):(o.height="100%",r.lineAlign==je?o.right=r.line+"%":"end"==r.lineAlign&&(o.left=100-r.line+"%"))));o.lineHeight=r.lineHeight;null!=r.position&&(r.writingMode==Ae?o.paddingLeft=r.position:o.paddingTop=r.position);e=_c(r);"line-left"==e?o.cssFloat="left":"line-right"==e&&(o.cssFloat="right");o.textAlign=r.textAlign;o.textDecoration=r.textDecoration.join(" ");o.writingMode=r.writingMode;"writingMode"in document.documentElement.style&&o.writingMode==r.writingMode||(o.webkitWritingMode=r.writingMode);r.size&&(r.writingMode==Ae?o.width=r.size+"%":o.height=r.size+"%")}function Dc(e,t,r){var n=(n=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(n[1]),unit:n[2]}:null;if(!n)return e;var i=n.value;switch(n.unit){case"%":return i/100*r.clientHeight/t.cellResolution.rows+"px";case"c":return r.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function Cc(e,t){for(var r=e.length-1;0<=r;r--){var n=t(e[r]);if(n||0===n)return n}return null}V("shaka.text.UITextDisplayer",bc);bc.prototype.setTextVisibility=bc.prototype.setTextVisibility;bc.prototype.isTextVisible=bc.prototype.isTextVisible;bc.prototype.remove=bc.prototype.remove;bc.prototype.destroy=bc.prototype.destroy;bc.prototype.append=bc.prototype.append;function Tc(e,t){function r(e){for(var r=e,n=u(t),i=n.next();!i.done;i=n.next())i=i.value,i.end&&i.start<e&&(r+=i.end-i.start);e=Math.floor(r/3600);n=Math.floor(r/60%60);i=Math.floor(r%60);r=Math.floor(1e3*r%1e3);return(10>e?"0":"")+e+":"+(10>n?"0":"")+n+":"+(10>i?"0":"")+i+"."+(100>r?10>r?"00":"0":"")+r}var n=dc(e,[]);e="WEBVTT\n\n";n=u(n);for(var i=n.next();!i.done;i=n.next())i=i.value,e+=r(i.startTime)+" --\x3e "+r(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Ce:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}V("shaka.text.WebVttGenerator",(function(){}));function Oc(e,t){this.h=e;this.g=t;this.j="";this.o=void 0;this.i=!1;this.m=!0;this.l=!1}Oc.prototype.configure=function(e){this.g=e};function kc(e,t,r){try{if(!e.g.enabled)return t;var n=Pc(e);e:{switch(r.toLowerCase()){case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":var i=Fc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":i=qc;break e}i=void 0}n.ot=i;n.su=!0;var o=Nc(n);return Mc(t,o)}catch(e){return J("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function Pc(t){t.j||(t.j=t.g.sessionId||e.crypto.randomUUID());return{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Ac(e,t,r){r=void 0===r?{}:r;var n=void 0===n?e.g.useHeaders:n;if(e.g.enabled){Object.assign(r,Pc(e));r.pr=e.h.qd();var i=r.ot===Hc||r.ot===Fc;e.l&&i&&(r.bs=!0,r.su=!0,e.l=!1);null==r.su&&(r.su=e.m);if(n)e=Lc(r),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Nc(r);o&&(t.uris=t.uris.map((function(e){return Mc(e,o)})))}}}function Ic(e){if(0===e.type)return Bc;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Fc:Hc;if("audio"==t)return Uc;if("text"==t)return"application/mp4"===e.mimeType?Vc:zc}}function jc(e,t){t=e.h.bb()[t];if(!t.length)return NaN;var r=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=r&&e.end>=r})))?1e3*(e.end-r):NaN}function Rc(e,t){var r=e.h.rb();if(!r.length)return NaN;e=r[0];r=u(r);for(var n=r.next();!n.done;n=r.next())n=n.value,"variant"===n.type&&n.bandwidth>e.bandwidth&&(e=n);switch(t){case Hc:return e.videoBandwidth||NaN;case Uc:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Nc(e){function t(e){return 100*r(e/100)}function r(e){return Math.round(e)}function n(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}var i=[],o={br:r,d:r,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:r},a=Object.keys(e||{}).sort();a=u(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var l=e[s];if(n(l)&&("v"!==s||1!==l)&&("pr"!=s||1!==l)){var c=o[s];c&&(l=c(l));c=typeof l;var p=void 0;p="string"===c&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(l):"boolean"===c?s:"symbol"===c?s+"="+l.description:s+"="+l;i.push(p)}}return i.join(",")}function Lc(e){var t=Object.keys(e),r={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=u(t);for(var a=t.next();!a.done;a=t.next())a=a.value,i[null!=o[a]?o[a]:1][a]=e[a];for(e=0;e<i.length;e++)(o=Nc(i[e]))&&(r["CMCD-"+n[e]]=o);return r}function Mc(e,t){if(!t||e.includes("offline:"))return e;e=new Je(e);e.g.set("CMCD",t);return e.toString()}var qc="m",Uc="a",Hc="v",Fc="av",Bc="i",zc="c",Vc="tt";V("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Oh:"s",OTHER:"o"});function Wc(){}function Gc(e,t,r,n,i){var o=i in n,a=!0,s;for(s in t){var l=i+"."+s,c=o?n[i]:r[s];o||s in r?void 0===t[s]?void 0===c||o?delete e[s]:e[s]=Bn(c):c.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=Bn(c)),l=Gc(e[s],t[s],c,n,l),a=a&&l):typeof t[s]!=typeof c||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=c.constructor?(Y("Invalid config, wrong type for "+l),a=!1):("function"==typeof r[s]&&r[s].length!=t[s].length&&Q("Unexpected number of arguments for "+l),e[s]=t[s]):(Y("Invalid config, unrecognized key "+l),a=!1)}return a}function Kc(e,t){for(var r={},n=r,i=0,o=0;;){i=e.indexOf(".",i);if(0>i)break;if(0==i||"\\"!=e[i-1])o=e.substring(o,i).replace(/\\\./g,"."),n[o]={},n=n[o],o=i+1;i+=1}n[e.substring(o).replace(/\\\./g,".")]=t;return r}function $c(e,t){return e&&t}V("shaka.util.ConfigUtils",Wc);Wc.convertToConfigObject=Kc;Wc.mergeConfigObjects=Gc;function Xc(){}function Yc(e){e=vi(e);return new Je(e).Ra}function Qc(e,t,r){function n(e){he(o).setUint32(a,e.byteLength,!0);a+=4;o.set(de(e),a);a+=e.byteLength}if(!r||!r.byteLength)throw new dt(2,6,6015);var i;"string"==typeof t?i=Ei(t,!0):i=t;e=vi(e);e=Ei(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+r.byteLength),a=0;n(e);n(i);n(r);return o}function Jc(e,t,r){if("skd"!==t)return e;t=r.serverCertificate;r=vi(e).split("skd://").pop();return Qc(e,r,t)}function Zc(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}V("shaka.util.FairPlayUtils",Xc);Xc.commonFairPlayResponse=function(e,t){if(2===e){try{var r=yi(t.data)}catch(e){return}e=!1;r=r.trim();"<ckc>"===r.substr(0,5)&&"</ckc>"===r.substr(-6)&&(r=r.slice(5,-6),e=!0);try{var n=JSON.parse(r);n.ckc&&(r=n.ckc,e=!0);n.CkcMessage&&(r=n.CkcMessage,e=!0);n.License&&(r=n.License,e=!0)}catch(e){}e&&(t.data=pe(Ui(r)))}};Xc.expressplayFairPlayRequest=function(e,t){Zc(e,t)};Xc.conaxFairPlayRequest=function(e,t){Zc(e,t)};Xc.ezdrmFairPlayRequest=function(e,t){Zc(e,t)};Xc.verimatrixFairPlayRequest=function(e,t){2===e&&(e=de(t.body),e=qi(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=wi("spc="+e))};Xc.expressplayInitDataTransform=function(e,t,r){return Jc(e,t,r)};Xc.conaxInitDataTransform=function(t,r,n){if("skd"!==r)return t;r=n.serverCertificate;n=vi(t).split("skd://").pop().split("?").shift();n=e.atob(n);var i=new ArrayBuffer(2*n.length);i=new Uint16Array(i);for(var o=0,a=n.length;o<a;o++)i[o]=n.charCodeAt(o);return Qc(t,i,r)};Xc.ezdrmInitDataTransform=function(e,t,r){if("skd"!==t)return e;t=r.serverCertificate;r=vi(e).split(";").pop();return Qc(e,r,t)};Xc.verimatrixInitDataTransform=function(e,t,r){return Jc(e,t,r)};Xc.initDataTransform=Qc;Xc.defaultGetContentId=Yc;Xc.isFairPlaySupported=function(){var e;return L((function(t){if(1==t.g)return e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},x(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4);if(2!=t.g)return t.return(!0);T(t);return t.return(!1)}))};function eu(){}function tu(){var t=Infinity;navigator.connection&&navigator.connection.saveData&&(t=360);var r={retryParameters:kn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,r,n){e.shakaMediaKeysPolyfill&&"skd"==r&&(r=n.serverCertificate,n=Yc(t),t=Qc(t,n,r));return t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:rr(),minHdcpVersion:""},n={retryParameters:kn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return $c([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:lr("Tizen 3")||lr("Tizen 2")||ir()||ar()?!1:!0,ignoreManifestTimestampsInSegmentsMode:!1},mss:{manifestPreprocessor:function(e){return $c([e],e)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},i={retryParameters:kn(),failureCallback:function(e){return $c([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1};if(lr("Web0S")||nr()||lr("CrKey"))i.stallSkip=0;var o={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(r){if(1==r.g)return navigator.storage&&navigator.storage.estimate?S(r,navigator.storage.estimate(),3):r.return(!0);t=r.h;return r.return(t.usage+e<.95*t.quota)}))},progressCallback:function(e,t){return $c([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:r,manifest:n,streaming:i,mediaSource:{sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:o,abrFactory:function(){return new nn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:t,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};o.trackSelectionCallback=function(e){return L((function(t){return t.return(nu(e,a.preferredAudioLanguage))}))};return a}function ru(e,t,r){var n={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Gc(e,t,r||tu(),n,"")}function nu(e,t){var r=e.filter((function(e){return"variant"==e.type})),n=[],i=$t(t,r.map((function(e){return e.language})));i&&(n=r.filter((function(e){return Vt(e.language)==i})));0==n.length&&(n=r.filter((function(e){return e.primary})));0==n.length&&(r.map((function(e){return e.language})),n=r);var o=n.filter((function(e){return e.height&&480>=e.height}));o.length&&(o.sort((function(e,t){return t.height-e.height})),n=o.filter((function(e){return e.height==o[0].height})));t=[];n.length&&(r=Math.floor(n.length/2),n.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(n[r]));e=u(e);for(n=e.next();!n.done;n=e.next())n=n.value,n.type!=Et&&"image"!=n.type||t.push(n);return t}V("shaka.util.PlayerConfiguration",eu);eu.mergeConfigObjects=ru;eu.createDefault=tu;function iu(){this.g=null;this.h=[]}function ou(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var r=Date.now()/1e3;e.g.duration=r-e.g.timestamp;e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:r,state:t,duration:0})}}function au(e,t){var r=0;e.g&&e.g.state==t&&(r+=e.g.duration);e=u(e.h);for(var n=e.next();!n.done;n=e.next())n=n.value,r+=n.state==t?n.duration:0;return r}function su(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var r=[],n=u(e.h),i=n.next();!i.done;i=n.next())r.push(t(i.value));e.g&&r.push(t(e.g));return r}function lu(){this.i=this.h=null;this.g=[]}function cu(e,t,r){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:r,bandwidth:null}))}function uu(){this.u=this.A=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.N=this.P=this.H=this.K=this.L=this.l=this.o=NaN;this.g=new iu;this.h=new lu}function pu(t,r){Fn.call(this);var n=this;this.l=Rp;this.md=this.h=null;this.$=!1;this.zd=new oi;this.xc=new oi;this.o=new oi;this.jc=this.i=this.Bd=this.K=this.j=this.ma=this.L=this.Nf=this.U=this.Na=this.N=this.ud=this.H=this.Sb=this.A=this.G=this.m=this.F=null;this.Fc=!1;this.pe=this.s=null;this.De=1e9;this.g=Xu(this);this.Ce={width:Infinity,height:Infinity};this.u=null;this.Ya=new bn(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel);this.Qb=this.g.preferredTextLanguage;this.Ec=this.g.preferredTextRole;this.Ac=this.g.preferForcedSubs;this.zc=[];this.Gc=null;r&&r(this);this.U=Uu(this);this.F=ju(this);this.F.Me(this.g.streaming.forceHTTPS);this.D=null;Hp&&(this.D=Hp());this.zd.C(e,"online",(function(){yp(n);n.Ge()}));this.P={name:"detach"};this.X={name:"attach"};this.ba={name:"unload"};this.He={name:"manifest-parser"};this.ze={name:"manifest"};this.Rb={name:"media-source"};this.te={name:"drm-engine"};this.Y={name:"load"};this.Qe={name:"src-equals-drm-engine"};this.Tb={name:"src-equals"};var i=new Map;i.set(this.X,(function(e,t){return Nn(gu(n,e,t))}));i.set(this.P,(function(e){e.mediaElement&&(n.xc.sb(),e.mediaElement=null);n.D&&n.D.release();n.h=null;e=Promise.resolve();return Nn(e)}));i.set(this.ba,(function(e){return Nn(yu(n,e))}));i.set(this.Rb,(function(e){e=bu(n,e);return Nn(e)}));i.set(this.He,(function(e,t){e=vu(n,e,t);return Nn(e)}));i.set(this.ze,(function(e){return wu(n,e)}));i.set(this.te,(function(e){e=Eu(n,e);return Nn(e)}));i.set(this.Y,(function(e,t){return Nn(Su(n,e,t))}));i.set(this.Qe,(function(e,t){e=_u(n,e,t);return Nn(e)}));i.set(this.Tb,(function(e,t){return xu(n,e,t)}));this.Oa=new ic(this.P,{ug:function(e,t,r,i){var o=null;e==n.P&&(o=r==n.P?n.P:n.X);e==n.X&&(o=r==n.P||t.mediaElement!=i.mediaElement?n.P:r==n.X?n.X:r==n.Rb||r==n.Y?n.Rb:r==n.Tb?n.Qe:null);e==n.Rb&&(o=r==n.Y&&t.mediaElement==i.mediaElement?n.He:n.ba);e==n.He&&(o=Pp(n.Y,n.ze,n.ba,r,t,i));e==n.ze&&(o=Pp(n.Y,n.te,n.ba,r,t,i));e==n.te&&(o=Pp(n.Y,n.Y,n.ba,r,t,i));e==n.Qe&&(o=r==n.Tb&&t.mediaElement==i.mediaElement?n.Tb:n.ba);if(e==n.Y||e==n.Tb)o=n.ba;e==n.ba&&(o=i.mediaElement&&t.mediaElement==i.mediaElement?n.X:n.P);return o},fg:function(e,t,r){n.dispatchEvent(mu("onstatechange",(new Map).set("state",e.name)));return i.get(e)(t,r)},handleError:function(e){return L((function(t){return 1==t.g?S(t,yu(n,e),2):t.return(e.mediaElement?n.X:n.P)}))},Sg:function(e){n.dispatchEvent(mu("onstateidle",(new Map).set("state",e.name)))}});this.wd=new Jt((function(){return sp(n)}));t&&this.yc(t,!0)}b(pu,Fn);function du(e){null!=e.L&&(e.L.release(),e.L=null)}function hu(e,t){if(t.lcevc.enabled){var r=e.rb();r&&r[0]&&r[0].videoMimeType==Fp.ts&&(tr()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Q("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled."));du(e);null==e.L&&(e.L=new Ya(e.h,e.Nf,t.lcevc),e.G&&(e.G.L=e.L))}else du(e)}function mu(e,t){return new qn(e,t)}n=pu.prototype;n.destroy=function(){var e=this,t;return L((function(r){switch(r.g){case 1:if(e.l==jp)return r.return();du(e);e.l=jp;t=ac(e.Oa,(function(){return{node:e.P,payload:Ap(),Eb:!1}}));return S(r,new Promise((function(e){t.bc=function(){};t.Id=function(){e()};t.Kb=function(){e()};t.onError=function(){e()};t.Kd=function(){e()}})),2);case 2:return S(r,e.Oa.destroy(),3);case 3:e.zd&&(e.zd.release(),e.zd=null);e.xc&&(e.xc.release(),e.xc=null);e.o&&(e.o.release(),e.o=null);e.pe=null;e.g=null;e.u=null;e.md=null;e.U=null;if(!e.F){r.B(4);break}return S(r,e.F.destroy(),5);case 5:e.F=null;case 4:e.s&&(e.s.release(),e.s=null),Fn.prototype.release.call(e),_(r)}}))};n.yc=function(e,t){t=void 0===t?!0:t;if(this.l==jp)return Promise.reject(kp());var r=Ap();r.mediaElement=e;Zt()||(t=!1);var n=t?this.Rb:this.X;e=ac(this.Oa,(function(){return{node:n,payload:r,Eb:!1}}));e.bc=function(){};return Ip(e)};n.Vf=function(e){this.Nf=e};n.detach=function(){var e=this;if(this.l==jp)return Promise.reject(kp());var t=ac(this.Oa,(function(){return{node:e.P,payload:Ap(),Eb:!1}}));t.bc=function(){};return Ip(t)};n.Te=function(e){var t=this;e=void 0===e?!0:e;if(this.l==jp)return Promise.reject(kp());this.Fc=!1;Zt()||(e=!1);du(this);var r=Ap(),n=ac(this.Oa,(function(n){var i=n.mediaElement&&e?t.Rb:n.mediaElement?t.X:t.P;r.mediaElement=n.mediaElement;return{node:i,payload:r,Eb:!1}}));n.bc=function(){};return Ip(n)};n.qh=function(e){this.Gc=e};n.load=function(e,t,r){var n=this;this.Gc=null;this.Fc=!1;if(this.l==jp)return Promise.reject(kp());this.dispatchEvent(mu("loading"));var i=Ap();i.uri=e;i.Od=Date.now()/1e3;r&&(i.mimeType=r);void 0!==t&&(i.startTime=t);var o=fu(this,i)?this.Tb:this.Y,a=ac(this.Oa,(function(e){if(null==e.mediaElement)return null;i.mediaElement=e.mediaElement;return{node:o,payload:i,Eb:!0}}));this.u=new uu;a.bc=function(){};return new Promise((function(e,t){a.Kd=function(){return t(new dt(2,7,7002))};a.Id=function(){e();n.dispatchEvent(mu("loaded"))};a.Kb=function(){return t(kp())};a.onError=function(e){return t(e)}}))};function fu(e,t){if(!Zt())return!0;var r=t.mimeType,n=t.uri||"";r||(r=ia(n),r=Fp[r]);if(r){if(""==(t.mediaElement||cr()).canPlayType(r))return!1;if(!Zt()||!(r in oa||ia(n)in aa)||("application/x-mpegurl"===r||"application/vnd.apple.mpegurl"===r)&&e.g.streaming.preferNativeHls)return!0;if(or())return e.g.streaming.useNativeHlsOnSafari}return!1}function gu(e,t,r){null==t.mediaElement&&(t.mediaElement=r.mediaElement,e.xc.C(t.mediaElement,"error",(function(){var t=wp(e);t&&bp(e,t)})));e.h=t.mediaElement;return Promise.resolve()}function yu(e,t){var r,n,i,o,a,s,l,c,p;return L((function(d){switch(d.g){case 1:return e.l!=jp&&(e.l=Rp),r=e.zc.map((function(e){return e()})),e.zc=[],S(d,Promise.all(r),2);case 2:e.dispatchEvent(mu("unloading"));t.mimeType=null;t.startTime=null;t.uri=null;e.Na&&(e.Na.release(),e.Na=null);t.mediaElement&&e.o.sb();e.wd.stop();e.Sb&&(e.Sb.release(),e.Sb=null);e.ud&&(e.ud.stop(),e.ud=null);if(!e.K){d.B(3);break}return S(d,e.K.stop(),4);case 4:e.K=null,e.Bd=null;case 3:if(!e.s){d.B(5);break}return S(d,e.s.stop(),5);case 5:if(!e.j){d.B(7);break}return S(d,e.j.destroy(),8);case 8:e.j=null;case 7:e.H&&(e.H.release(),e.H=null);e.A&&(e.A.release(),e.A=null);if(!e.G){d.B(9);break}return S(d,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.D)e.D.onAssetUnload();if(!t.mediaElement||!t.mediaElement.src){d.B(11);break}return S(d,new Promise((function(e){return new Jt(e).S(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){d.B(13);break}return S(d,e.m.destroy(),14);case 14:e.m=null;case 13:e.jc=null;e.N=null;if(e.i){n=u(e.i.variants);for(i=n.next();!i.done;i=n.next())for(o=i.value,a=u([o.audio,o.video]),s=a.next();!s.done;s=a.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();c=u(e.i.textStreams);for(s=c.next();!s.done;s=c.next())p=s.value,p.segmentIndex&&p.segmentIndex.release()}e.i=null;e.u=new uu;e.we=null;rp(e);_(d)}}))}function bu(e,t){var r,n,i,o,a;return L((function(s){if(1==s.g)return r=e.g.textDisplayFactory,n=r(),e.we=r,i=qu(t.mediaElement,n,(function(t,r,n){Ou(e,t,r,n)}),e.L),i.configure(e.g.mediaSource),o=e.g.manifest,a=o.segmentRelativeVttTiming,i.P=a,S(s,i.G,2);e.G=i;_(s)}))}function vu(e,t,r){var n,i,o,a;return L((function(s){if(1==s.g)return t.mimeType=r.mimeType,t.uri=r.uri,n=t.uri,i=e.F,e.jc=n,o=e,S(s,ra(n,i,e.g.manifest.retryParameters,t.mimeType),2);o.Bd=s.h;e.K=e.Bd();a=Bn(e.g.manifest);r.mediaElement&&"AUDIO"===r.mediaElement.nodeName&&(a.disableVideo=!0);e.K.configure(a);_(s)}))}function wu(e,t){var r=t.uri;t=e.F;e.Na=new hl((function(){return e.ec()}));e.Na.addEventListener("regionadd",(function(t){t=t.region;vp(e,"timelineregionadded",t);if(e.D)e.D.onDashTimedMetadata(t)}));e.ma=null;e.g.streaming.observeQualityChanges&&(e.ma=new cl((function(){return e.bb()})),e.ma.addEventListener("qualitychange",(function(t){var r=t.quality;t=t.position;r=(new Map).set("mediaQuality",{bandwidth:r.bandwidth,audioSamplingRate:r.audioSamplingRate,codecs:r.codecs,contentType:r.contentType,frameRate:r.frameRate,height:r.height,mimeType:r.mimeType,channelsCount:r.channelsCount,pixelAspectRatio:r.pixelAspectRatio,width:r.width}).set("position",t);e.dispatchEvent(mu("mediaqualitychanged",r))})));var n={networkingEngine:t,filter:function(t){return Qu(e,t)},makeTextStreamsForClosedCaptions:function(t){return Yu(e,t)},onTimelineRegionAdded:function(t){var r=e.Na;e:{var n=u(r.g);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){n=i;break e}n=null}null==n&&(r.g.add(t),t=new qn("regionadd",new Map([["region",t]])),r.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return bp(e,t)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var r=e.m?e.m.g:null;r&&e.m.s&&ep(e,r.keySystem,t)}},i=Date.now()/1e3;return new An(function(){var t,o,a,s;return L((function(l){if(1==l.g)return t=e,S(l,e.K.start(r,n),2);t.i=l.h;o=mu("manifestparsed");e.dispatchEvent(o);if(0==e.i.variants.length)throw new dt(2,4,4036);Au(e.i);a=Date.now()/1e3;s=a-i;e.u.F=s;_(l)}))}(),(function(){return e.K.stop()}))}function Eu(e,t){var r,n;return L((function(i){return 1==i.g?(r=Date.now()/1e3,n=!0,e.m=Iu(e,{Ib:e.F,onError:function(t){bp(e,t)},Jd:function(t){Ep(e,t)},onExpirationUpdated:function(t,r){Sp(e,t,r)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&n&&(n=!1,e.u.j=Date.now()/1e3-r,e.L&&(t=e.L,t.g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.g.drm),S(i,yo(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=i.g?S(i,e.m.yc(t.mediaElement),3):S(i,Qu(e,e.i),0)}))}function Su(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E;return L((function(x){switch(x.g){case 1:t.startTime=r.startTime;null!=e.Gc&&(t.startTime=e.Gc,e.Gc=null);n=t.mediaElement;i=t.uri;e.jc=i;e.H=new ol({sd:function(){return n.playbackRate},od:function(){return n.defaultPlaybackRate},Oe:function(e){n.playbackRate=e},vf:function(e){n.currentTime+=e}});o=function(){return ip(e)};a=function(){return np(e)};e.o.C(n,"playing",o);e.o.C(n,"pause",o);e.o.C(n,"ended",o);e.o.C(n,"ratechange",a);hu(e,e.g);s=e.g.abrFactory;e.s&&e.pe==s||(e.pe=s,e.s=s(),"function"!=typeof e.s.setMediaElement&&(cn("AbrManager","Please use an AbrManager with setMediaElement function."),e.s.setMediaElement=function(){}),e.s.configure(e.g.abr));e.Ya=new bn(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferredAudioLabel);e.Qb=e.g.preferredTextLanguage;e.Ec=e.g.preferredTextRole;e.Ac=e.g.preferForcedSubs;_p(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.s.init((function(t,r,n){e.j&&t!=e.j.j&&cp(e,t,!0,void 0===r?!1:r,void 0===n?0:n)}));e.s.setMediaElement(n);hr(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredAudioChannelCount,e.g.preferredDecodingAttributes);e.j=Hu(e);e.j.configure(e.g.streaming);e.l=Np;n.textTracks&&e.o.C(n.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":Pu(e,t)}}));e.dispatchEvent(mu("streaming"));l=null;(c=e.j.j)||(l=ap(e)?e.s.chooseVariant():null);p=[];d=c||l;h=u([d.video,d.audio]);for(m=h.next();!m.done;m=h.next())(f=m.value)&&!f.segmentIndex&&p.push(f.createSegmentIndex());if(!(0<p.length)){x.B(2);break}return S(x,Promise.all(p),2);case 2:_p(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.A=Ru(e,t.startTime);e.Sb=Nu(e,t.Od);g=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal);Lu(e,g);if(c){x.B(4);break}cp(e,l,!0,!1,0);if(!e.g.streaming.startAtSegmentBoundary){x.B(4);break}y=e.A.fd();return S(x,tp(l,y),6);case 6:b=x.h,e.A.Zd(b);case 4:return e.A.Yd(),v=e.Zb().find((function(e){return e.active})),v||((w=Gr(e.i.textStreams,e.Qb,e.Ec,e.Ac)[0]||null)&&cu(e.u.h,w,!0),l&&(w?(l.audio&&pp(e,l.audio,w)&&(e.$=!0),e.$&&e.G.u.setTextVisibility(!0),fp(e)):e.$=!1),w&&(e.g.streaming.alwaysStreamText||e.je())&&jl(e.j,w)),S(x,e.j.start(),7);case 7:e.g.abr.enabled&&(e.s.enable(),gp(e)),Ar(e.j?e.j.j:null,e.i),Dp(e.i),dp(e),ap(e),e.i.variants.some((function(e){return e.primary})),e.T()&&(e.g.streaming.liveSync||e.i.serviceDescription)&&(E=function(){return op(e)},e.o.C(n,"timeupdate",E)),e.Fc=!0,e.o.ja(n,"loadedmetadata",(function(){e.u.m=Date.now()/1e3-r.Od})),_(x)}}))}function _u(e,t,r){var n,i,o,a,s,l,c;return L((function(u){return 1==u.g?(n=St,i=Date.now()/1e3,o=!0,e.m=Iu(e,{Ib:e.F,onError:function(t){bp(e,t)},Jd:function(t){Ep(e,t)},onExpirationUpdated:function(t,r){Sp(e,t,r)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&o&&(o=!1,e.u.j=Date.now()/1e3-i)}}),e.m.configure(e.g.drm),a=r.uri||"",s=ia(a),l=Fp[s],"application/x-mpegurl"==l&&or()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:r.mimeType?r.mimeType.split(";")[0]:l,codecs:r.mimeType?kt(r.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Y=!0,S(u,yo(e.m,[c],[]),2)):S(u,e.m.yc(t.mediaElement),0)}))}function xu(e,t,r){function n(){return ip(e)}t.uri=r.uri;t.startTime=r.startTime;e.jc=t.uri;var i=t.mediaElement;e.A=new $s(i);var o=!1;e.zc.push((function(){o=!0}));null!=t.startTime&&e.A.Zd(t.startTime);e.H=new ol({sd:function(){return i.playbackRate},od:function(){return i.defaultPlaybackRate},Oe:function(e){i.playbackRate=e},vf:function(e){i.currentTime+=e}});Lu(e,e.g.streaming.rebufferingGoal);e.o.C(i,"playing",n);e.o.C(i,"pause",n);e.o.C(i,"ended",n);e.o.C(i,"ratechange",(function(){return np(e)}));"none"!=i.preload&&e.o.ja(i,"loadedmetadata",(function(){e.u.m=Date.now()/1e3-r.Od}));i.audioTracks&&(e.o.C(i.audioTracks,"addtrack",(function(){return dp(e)})),e.o.C(i.audioTracks,"removetrack",(function(){return dp(e)})),e.o.C(i.audioTracks,"change",(function(){return dp(e)})));i.textTracks&&(e.o.C(i.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":Tu(e,t);break;case"chapters":Pu(e,t);break;default:dp(e)}})),e.o.C(i.textTracks,"removetrack",(function(){return dp(e)})),e.o.C(i.textTracks,"change",(function(){return dp(e)})));var a=ia(t.uri);i.src=kc(e.U,t.uri,Fp[a]);(nr()||lr("Web0S"))&&i.load();e.l=Lp;e.dispatchEvent(mu("streaming"));var s=new Pn;Us(i,HTMLMediaElement.HAVE_METADATA,e.o,(function(){e.A.Yd();s.resolve()}));Us(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.o,(function(){var t;return L((function(r){if(1==r.g)return Du(e),t=Bu(e),t.find((function(e){return"disabled"!=e.mode}))?(0<t.length&&(e.$=!0),r.B(2)):S(r,new Promise((function(t){e.o.ja(i.textTracks,"change",t);new Jt(t).S(1)})),2);if(o)return r.return();Cu(e);_(r)}))}));i.error?s.reject(wp(e)):"none"==i.preload&&(Q('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve());e.o.ja(i,"error",(function(){s.reject(wp(e))}));return new An(s,(function(){s.reject(new dt(2,7,7001));return Promise.resolve()})).ea((function(){e.T()&&e.g.streaming.liveSync&&e.o.C(i,"timeupdate",(function(){return op(e)}));e.Fc=!0}))}function Du(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Bf(t,e.g.preferredVariantRole)}function Cu(e){var t=e.g.preferredTextLanguage;""!=t&&e.Cf(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function Tu(e,t){if("metadata"==t.kind){t.mode="hidden";e.o.C(t,"cuechange",(function(){if(t.activeCues)for(var r=u(t.activeCues),n=r.next();!n.done;n=r.next())if(n=n.value,ku(e,n.startTime,n.endTime,n.type,n.value),e.D)e.D.onCueMetadataChange(n.value)}));var r=new Jt((function(){var t=zu(e);t=u(t);for(var r=t.next();!r.done;r=t.next())r.value.mode="hidden"})).ic().S(.5);e.zc.push((function(){r.stop()}))}}function Ou(e,t,r,n){t=u(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,i.data&&i.cueTime&&i.frames){var o=i.cueTime+r,a=n;a&&o>a&&(a=o);for(var s=u(i.frames),l=s.next();!l.done;l=s.next())ku(e,o,a,"org.id3",l.value);if(e.D)e.D.onHlsTimedMetadata(i,o)}}function ku(e,t,r,n,i){t=(new Map).set("startTime",t).set("endTime",r).set("metadataType",n).set("payload",i);e.dispatchEvent(mu("metadata",t))}function Pu(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var r=new Jt((function(){t.mode="hidden"})).ic().S(.5);e.zc.push((function(){r.stop()}))}}function Au(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function Iu(e,t){return new mo(t,e.g.drm.updateExpirationTime)}function ju(e){return new Gn((function(t,r){e.s&&e.s.segmentDownloaded(t,r)}),(function(t,r,n){t=(new Map).set("headers",t).set("request",r).set("requestType",n);e.dispatchEvent(mu("downloadheadersreceived",t))}),(function(t,r,n,i){t=(new Map).set("request",t).set("error",r).set("httpResponseCode",n).set("aborted",i);e.dispatchEvent(mu("downloadfailed",t))}),(function(t,r,n){var i=e.U;n=void 0===n?{}:n;if(i.g.enabled)if("HEAD"===r.method)Ac(i,r);else switch(t){case 0:try{if(i.g.enabled){if(n.type){e:{switch(n.type){case 4:var o="d";break e;case 3:case 2:o="h";break e;case 5:o="s";break e}o=void 0}i.o=o}Ac(i,r,{ot:qc,su:!i.i})}}catch(e){J("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case ei:t=n;try{if(i.g.enabled){var a=t.segment;o=0;a&&(o=a.endTime-a.startTime);var s={d:1e3*o,st:i.h.T()?"l":"v"};s.ot=Ic(t);var l=s.ot===Hc||s.ot===Uc||s.ot===Fc||s.ot===Vc,c=t.stream;c&&(l&&(s.bl=jc(i,c.type)),c.bandwidth&&(s.br=c.bandwidth/1e3));l&&s.ot!==Vc&&(s.tb=Rc(i,s.ot)/1e3);Ac(i,r,s)}}catch(e){J("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:Ac(i,r,{ot:"k"});break;case 4:Ac(i,r,{ot:"o"})}}))}function Ru(e,t){return new Xs(e.h,e.i,e.g.streaming,t,(function(){e.Sb&&ll(e.Sb,!0);e.j&&e.j.Uc();e.N&&Mu(e)}),(function(t){return e.dispatchEvent(t)}))}function Nu(e,t){t=new ml(e.Na,e.T()||0<t);t.addEventListener("enter",(function(t){vp(e,"timelineregionenter",t.region)}));t.addEventListener("exit",(function(t){vp(e,"timelineregionexit",t.region)}));t.addEventListener("skip",(function(t){var r=t.region;t.seeking||(vp(e,"timelineregionenter",r),vp(e,"timelineregionexit",r))}));var r=new sl(e.h);r.g.add(t);e.ma&&r.g.add(e.ma);return r}function Lu(e,t){e.N=new _n;e.N.g=Dn;xn(e.N,t,Math.min(.5,t/2));rp(e);e.ud=new Jt((function(){Mu(e)})).Ca(.25)}function Mu(e){switch(e.l){case Lp:if(e.h.ended)var t=!0;else{var r=ga(e.h.buffered);t=null!=r&&r>=e.h.duration-1}break;case Np:e:if(e.h.ended||as(e.G))t=!0;else{if(e.i.presentationTimeline.T()){r=e.i.presentationTimeline.Cb();var n=ga(e.h.buffered);if(null!=n&&n>=r){t=!0;break e}}t=!1}break;default:t=!1}n=ba(e.h.buffered,e.h.currentTime);r=e.N;var i=t,o=r.h.get(r.g);t=r.g;n=i||n>=o?Cn:Dn;r.g=n;t!=n&&rp(e)}function qu(e,t,r,n){return new ts(e,t,r,n)}function Uu(e){return new Oc({getBandwidthEstimate:function(){return e.s?e.s.getBandwidthEstimate():NaN},bb:function(){return e.bb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},qd:function(){return e.qd()},Ab:function(){return e.Ab()},rb:function(){return e.rb()},T:function(){return e.T()}},e.g.cmcd)}function Hu(e){return new Tl(e.i,{rd:function(){return e.A?e.A.fd():0},getBandwidthEstimate:function(){return e.s.getBandwidthEstimate()},R:e.G,Ib:e.F,onError:function(t){return bp(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Ug:function(){e.K&&e.K.update&&e.K.update()},ye:function(t,r,n){e.A&&e.A.wf();Mu(e);t=(new Map).set("start",t).set("end",r).set("contentType",n);e.dispatchEvent(mu("segmentappended",t))},Tg:function(t,r){(r=r.re)&&e.ma&&pl(e.ma,r,t)},Ze:function(t,r){var n=e.m;if(n.h.parseInbandPsshEnabled&&!n.K&&["audio","video"].includes(t)){r=new zi(de(r));var i=0,o=u(r.data);for(t=o.next();!t.done;t=o.next())i+=t.value.length;if(0==i)n=Promise.resolve();else{i=new Uint8Array(i);o=0;r=u(r.data);for(t=r.next();!t.done;t=r.next())t=t.value,i.set(t,o),o+=t.length;Do(n,"cenc",i);n=n.l}}else n=Promise.resolve();return n},Vg:function(t,r,n){Ou(e,t,r,n)},ae:function(t,r){return e.ae(t,r)}})}n.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Kc(e,t));e.streaming&&"forceTransmuxTS"in e.streaming&&(cn("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS);e.streaming&&"forceTransmux"in e.streaming&&(cn("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux);e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2));var r=ru(this.g,e,Xu(this));Fu(this);return r};function Fu(e){if(e.K){var t=Bn(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0);e.K.configure(t)}e.m&&e.m.configure(e.g.drm);if(e.j){e.j.configure(e.g.streaming);try{Zu(e,e.i)}catch(t){bp(e,t)}e.s&&ap(e);t=e.j.j;!t||t.allowedByApplication&&t.allowedByKeySystem||lp(e)}e.F&&e.F.Me(e.g.streaming.forceHTTPS);if(e.G&&(e.G.configure(e.g.mediaSource),e.G.P=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.we!=t)){var r=t(),n=e.G,i=n.u;n.u=r;i&&(r.setTextVisibility(i.isTextVisible()),i.destroy());n.g&&(n.g.j=r);e.we=t;e.j&&(t=e.j,(r=t.h.get(Et))&&Rl(t,r.stream,!0,0,!0))}e.s&&(e.s.configure(e.g.abr),e.g.abr.enabled?e.s.enable():e.s.disable(),gp(e));e.N&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),xn(e.N,t,Math.min(.5,t/2)));e.i&&_p(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.D&&e.D.configure(e.g.ads);e.U&&e.U.configure(e.g.cmcd)}n.getConfiguration=function(){var e=Xu(this);ru(e,this.g,Xu(this));return e};n.ig=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;t=Math.min(this.h.currentTime+t,this.ec().end);if(e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0};n.dh=function(){for(var e in this.g)delete this.g[e];ru(this.g,Xu(this),Xu(this));Fu(this)};n.og=function(){return this.l};n.rg=function(){return this.i?this.i.type:null};n.tg=function(){return this.h};n.Ab=function(){return this.F};n.de=function(){return this.jc};n.kf=function(){return this.D?this.D:null};n.T=function(){return this.i?this.i.presentationTimeline.T():this.h&&this.h.src?Infinity==this.h.duration:!1};n.Gb=function(){return this.i?this.i.presentationTimeline.Gb():!1};n.Kg=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight:!1};n.ec=function(){if(!this.Fc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Yb(),end:e.cb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}};n.Hg=function(){this.T()&&(this.h.currentTime=this.ec().end)};n.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""};n.drmInfo=function(){return this.m?this.m.g:null};n.Ic=function(){return this.m?this.m.Ic():Infinity};n.ce=function(){return this.m?this.m.ce():[]};n.pd=function(){return this.m?this.m.pd():{}};n.he=function(){return this.N?this.N.g==Dn:!1};n.qd=function(){return this.h?this.H?this.H.i:1:0};n.Mf=function(e){0==e?Q("A trick play rate of 0 is unsupported!"):(this.h.paused&&this.h.play(),this.H.set(e),this.l==Np&&(this.s.playbackRateChanged(e),Al(this.j,1<Math.abs(e))))};n.$e=function(){var e=this.H.od();this.l==Lp&&this.H.set(e);this.l==Np&&(this.H.set(e),this.s.playbackRateChanged(e),Al(this.j,!1))};n.rb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],r=0,n=u(this.i.variants),i=n.next();!i.done;i=n.next())if(i=i.value,zr(i)){var o=Lr(i);o.active=i==e;o.active||1==r||null==e||i.video!=e.video||i.audio!=e.audio||(o.active=!0);o.active&&r++;t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map((function(e){return Fr(e)})):[]};n.Zb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],r=u(this.i.textStreams),n=r.next();!n.done;n=r.next()){n=n.value;var i=Mr(n);i.active=n==e;t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?Bu(this).map((function(e){return Hr(e)})):[]};n.ng=function(){return this.i?this.i.imageStreams.map((function(e){return qr(e)})):[]};n.Bg=function(e,t){var r=this,n,i,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v,w,E,_;return L((function(x){if(1==x.g)return r.i?(n=r.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?x.B(3):S(x,n.createSegmentIndex(),3):x.return(null):x.B(2);if(2!=x.g){i=n.segmentIndex.find(t);if(null==i)return x.return(null);o=n.segmentIndex.get(i);a=o.tilesLayout||n.tilesLayout;s=/(\d+)x(\d+)/.exec(a);if(!s)return x.return(null);l=n.width||0;c=n.height||0;u=parseInt(s[1],10);p=parseInt(s[2],10);d=l/u;h=c/p;m=u*p;f=o.j-o.startTime;g=o.D||f/m;y=o.startTime;v=b=0;1<m&&(w=Math.floor((t-o.startTime)/g),y=o.startTime+w*g,b=w%u*d,v=Math.floor(w/u)*h);E=!1;if(_=o.A)E=!0,h=_.height,b=_.positionX,v=_.positionY,d=_.width;return x.return({imageHeight:c,imageWidth:l,height:h,positionX:b,positionY:v,startTime:y,duration:g,uris:o.wa(),width:d,sprite:E})}return x.return(null)}))};n.Df=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(cu(this.u.h,t,!1),jl(this.j,t),mp(this),this.Qb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Bu(this);t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,Ur(r)==e.id?r.mode=this.$?"showing":"hidden":r.mode="disabled";mp(this)}};n.Ke=function(e,t,r){t=void 0===t?!1:t;r=void 0===r?0:r;if(this.i&&this.j){this.g.abr.enabled&&Q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var n=this.i.variants.find((function(t){return t.id==e.id}));n&&zr(n)&&(cp(this,n,!1,t,r),this.Ya=new yn(n),ap(this))}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=u(t),r=t.next();!r.done;r=t.next())if(r=r.value,Ur(r)==e.id){up(this,r);break}};n.hg=function(){return Op(this.rb())};n.zg=function(){return Op(this.Zb())};n.gg=function(){return Array.from(Tp(this.rb()))};n.yg=function(){return Array.from(Tp(this.Zb()))};n.Bf=function(e,t,r,n){r=void 0===r?0:r;n=void 0===n?0:n;if(this.i&&this.A){this.Ya=new bn(e,t||"",r,"","");e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):Infinity:0};t=this.j.j;var i=this.Ya.create(this.i.variants);r=null;i=u(i.values());for(var o=i.next();!o.done;o=i.next())if(o=o.value,!r||e(r,t)>e(o,t))r=o;r?(e=Lr(r),this.Ke(e,!0,n)):lp(this)}else this.h&&this.h.audioTracks&&(n=Gr(this.rb(),e,t||"",!1)[0])&&this.Ke(n)};n.Cf=function(e,t,r){r=void 0===r?!1:r;if(this.i&&this.A){if(this.Qb=e,this.Ec=t||"",this.Ac=r,(e=Gr(this.i.textStreams,this.Qb,this.Ec,this.Ac)[0]||null)&&e!=this.j.o&&(cu(this.u.h,e,!1),this.g.streaming.alwaysStreamText||this.je()))jl(this.j,e),mp(this)}else(e=Gr(this.Zb(),e,t||"",r)[0])&&this.Df(e)};n.gh=function(e,t,r){t=void 0===t?!0:t;r=void 0===r?0:r;if(this.i&&this.A){for(var n=null,i=u(this.i.variants),o=i.next();!o.done;o=i.next())if(o=o.value,o.audio.label==e){n=o;break}null!=n&&(this.Ya=new bn(n.language,"",0,"",e),lp(this,t,r))}else if(this.h&&this.h.audioTracks){r=Array.from(this.h.audioTracks);t=null;r=u(r);for(n=r.next();!n.done;n=r.next())n=n.value,n.label==e&&(t=n);t&&up(this,t)}};n.je=function(){var e=this.$;return this.G?this.G.u.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Bu(this).some((function(e){return"showing"==e.mode})):e};n.lf=function(){return this.h&&this.h.src&&this.h.textTracks?Vu(this).map((function(e){return Hr(e)})):[]};n.jg=function(e){var t=Vt(e),r=Vu(this).filter((function(e){return Vt(e.language)==t}));if(!r||!r.length)return[];e=[];var n=new Set;r=u(r);for(var i=r.next();!i.done;i=r.next())if((i=i.value)&&i.cues){i=u(i.cues);for(var o=i.next();!o.done;o=i.next()){var a=o.value;(o=a.id)&&""!=o||(o=a.startTime+"-"+a.endTime+"-"+a.text);a={id:o,title:a.text,startTime:a.startTime,endTime:a.endTime};n.has(o)||(e.push(a),n.add(o))}}return e};function Bu(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function zu(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"==e.kind}))}function Vu(e){return Array.from(e.h.textTracks).filter((function(e){return"chapters"==e.kind}))}n.lh=function(e){e=!!e;if(this.$!=e){this.$=e;if(this.l==Np)this.G.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.o||(e=Gr(this.i.textStreams,this.Qb,this.Ec,this.Ac),0<e.length&&(jl(this.j,e[0]),mp(this))):Pl(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Bu(this);t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,"disabled"!=r.mode&&(r.mode=e?"showing":"hidden")}fp(this)}};n.wg=function(){if(!this.T())return null;var e=this.Oa.l,t=0;if(this.A)t=this.A.fd();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null};n.mf=function(){if(!this.T())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null};n.bb=function(){if(this.l==Np)return this.G.bb();var e={total:[],audio:[],video:[],text:[]};this.l==Lp&&(e.total=wa(this.h.buffered));return e};n.getStats=function(){if(this.l!=Np&&this.l!=Lp)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};ip(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var r=this.u;t=Math.round(100*t);r.i=isNaN(r.i)?t:Math.max(r.i,t)}this.A&&(this.u.N=this.A.We(),this.u.P=this.A.Xe());if(e.getVideoPlaybackQuality){r=e.getVideoPlaybackQuality();t=this.u;var n=Number(r.totalVideoFrames);t.L=Number(r.droppedVideoFrames);t.K=n;this.u.H=Number(r.corruptedVideoFrames)}this.m?(r=this.m,r=r.H?r.H:NaN):r=NaN;this.u.s=r;if(this.l==Np){if(r=this.j.j)this.u.A=(this.H?this.H.i:1)*r.bandwidth;r&&r.video&&(t=this.u,n=r.video.height||NaN,t.o=r.video.width||NaN,t.l=n);this.T()&&(r=this.mf().valueOf()+1e3*this.ec().end,this.u.D=(Date.now()-r)/1e3);this.i&&this.i.presentationTimeline&&(this.u.G=this.i.presentationTimeline.g);r=this.s.getBandwidthEstimate();this.u.u=r}this.l==Lp&&(r=this.u,t=e.videoHeight||NaN,r.o=e.videoWidth||NaN,r.l=t);var i=this.u;e=i.o;r=i.l;t=i.A;n=i.K;var o=i.L,a=i.H,s=i.P,l=i.N,c=i.u,p=i.i,d=i.m,h=i.F,m=i.j,f=au(i.g,"playing"),g=au(i.g,"paused"),y=au(i.g,"buffering"),b=i.s,v=i.D,w=i.G,E=su(i.g),S=[];i=u(i.h.g);for(var _=i.next();!_.done;_=i.next())_=_.value,S.push({timestamp:_.timestamp,id:_.id,type:_.type,fromAdaptation:_.fromAdaptation,bandwidth:_.bandwidth});return{width:e,height:r,streamBandwidth:t,decodedFrames:n,droppedFrames:o,corruptedFrames:a,stallsDetected:s,gapsJumped:l,estimatedBandwidth:c,completionPercent:p,loadLatency:d,manifestTimeSeconds:h,drmTimeSeconds:m,playTime:f,pauseTime:g,bufferingTime:y,licenseTime:b,liveLatency:v,maxSegmentDuration:w,stateHistory:E,switchHistory:S}};n.Sf=function(e,t,r,n,i,o,a){a=void 0===a?!1:a;var s=this,l,c,u,p,d,h,m,f,g,y,b;return L((function(v){switch(v.g){case 1:if(s.l!=Np&&s.l!=Lp)throw new dt(1,7,7004);if(n){v.B(2);break}return S(v,Wu(s,e),3);case 3:n=v.h;case 2:l=[];if(s.D)try{l=s.D.getServerSideCuePoints()}catch(e){}if(s.l!=Lp){v.B(4);break}a&&(r="forced");return S(v,Gu(s,e,t,r,n,o||"",l),5);case 5:c=s.Zb();if(u=c.find((function(e){return e.language==t&&e.label==(o||"")&&e.kind==r})))return dp(s),v.return(u);throw new dt(1,2,2012);case 4:p=St;d=s.i.presentationTimeline.getDuration();if(Infinity==d)throw new dt(1,4,4033);if(!l.length){v.B(6);break}return S(v,Ku(s,e,s.F,s.g.streaming.retryParameters),7);case 7:h=v.h,m=$u(s,h,n,l),f=new Blob([m],{type:"text/vtt"}),e=Ps(f),n="text/vtt";case 6:g={id:s.De++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:rl(0,d,[e]),mimeType:n||"",codecs:i||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:p.ca,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0};y=Dt(g.mimeType,g.codecs);b=jt(y);if(!b)throw new dt(2,2,2014,n);s.i.textStreams.push(g);dp(s);return v.return(Mr(g))}}))};n.Tf=function(e,t){var r=this,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:if(r.l!=Np&&r.l!=Lp)throw new dt(1,7,7004);if(r.l==Lp)throw new dt(1,2,2016);if(t){w.B(2);break}return S(w,Wu(r,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new dt(1,2,2017,e);n=St;i=r.i.presentationTimeline.getDuration();if(Infinity==i)throw new dt(1,4,4045);return S(w,Ku(r,e,r.F,r.g.streaming.retryParameters),4);case 4:o=w.h;a=Ut[t];if(!a)throw new dt(2,2,2014,t);s=a();l={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0};c=de(o);p=s.parseMedia(c,l);d=[];h={};m=u(p);for(f=m.next();!f.done;h={nc:h.nc},f=m.next())g=f.value,h.nc=yt([e],[g.payload])[0],y=new ha(g.startTime,g.endTime,function(e){return function(){return[e.nc]}}(h),0,null,null,0,0,Infinity),h.nc.includes("#xywh")&&(b=h.nc.split("#xywh=")[1].split(","),4===b.length&&y.If({height:parseInt(b[3],10),positionX:parseInt(b[0],10),positionY:parseInt(b[1],10),width:parseInt(b[2],10)})),d.push(y);v={id:r.De++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new el(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.wc,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0};r.i.imageStreams.push(v);dp(r);return w.return(qr(v))}}))};n.Rf=function(e,t,r){var n=this,i,o,a,s;return L((function(l){switch(l.g){case 1:if(n.l!=Np&&n.l!=Lp)throw new dt(1,7,7004);if(r){l.B(2);break}return S(l,Wu(n,e),3);case 3:r=l.h;case 2:i=[];if(n.D)try{i=n.D.getServerSideCuePoints()}catch(e){}return S(l,Gu(n,e,t,"chapters",r,"",i),4);case 4:o=l.h;a=n.lf();s=a.find((function(e){return e.language==t}));if(!s){l.B(5);break}return S(l,new Promise((function(e,t){n.o.ja(o,"load",e);n.o.ja(o,"error",(function(){t(new dt(1,2,2015))}))})),6);case 6:return l.return(s);case 5:throw new dt(1,2,2012)}}))};function Wu(e,t){var r,n;return L((function(i){switch(i.g){case 1:r=ia(t);if(n=Bp[r])return i.return(n);x(i,2);return S(i,na(t,e.F,e.g.streaming.retryParameters),4);case 4:n=i.h;C(i,3);break;case 2:T(i);case 3:if(n)return i.return(n);throw new dt(1,2,2011,r)}}))}function Gu(e,t,r,n,i,o,a){var s,l,c,u;return L((function(p){if(1==p.g)return"text/vtt"!=i||a.length?S(p,Ku(e,t,e.F,e.g.streaming.retryParameters),3):p.B(2);2!=p.g&&(s=p.h,l=$u(e,s,i,a),c=new Blob([l],{type:"text/vtt"}),t=Ps(c),i="text/vtt");u=document.createElement("track");var d=e.U,h=t;try{if(d.g.enabled){var m=Pc(d);m.ot=zc;m.su=!0;var f=Nc(m);var g=Mc(h,f)}else g=h}catch(e){J("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),g=h}u.src=g;u.label=o;u.kind=n;u.srclang=r;e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous");e.h.appendChild(u);return p.return(u)}))}function Ku(e,t,r,n){var i,o,a;return L((function(s){if(1==s.g){i=ei;o=$n([t],n);o.method="GET";var l=e.U;try{l.g.enabled&&Ac(l,o,{ot:zc,su:!0})}catch(e){J("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return S(s,r.request(i,o).promise,2)}a=s.h;return s.return(a.data)}))}function $u(e,t,r,n){var i=Ut[r];if(i)return r=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=de(t),t=r.parseMedia(t,e),Tc(t,n);throw new dt(2,2,2014,r)}n.Ne=function(e,t){this.Ce.width=e;this.Ce.height=t};n.Ge=function(e){if(this.l==Np){var t=this.j;e=void 0===e?.1:e;if(t.l.g)t=!1;else if(t.s)t=!1;else{for(var r=u(t.h.values()),n=r.next();!n.done;n=r.next())n=n.value,!n.Mc||n.ua||n.Xa||(n.Mc=!1,ec(t,n,e));t=!0}}else t=!1;return t};n.pg=function(){Q("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return this.i};n.qg=function(){return this.Bd};function Xu(e){var t=tu();t.streaming.failureCallback=function(t){if(e.T()){var r=null;1001==t.code||1002==t.code?r=1:1003==t.code&&(r=.1);null!=r&&(t.severity=1,e.Ge(r))}};t.textDisplayFactory=function(){return e.md?new bc(e.h,e.md):new hc(e.h)};return t}n.Kf=function(e){this.md=e};function Yu(e,t){for(var r=new Set,n=u(t.textStreams),i=n.next();!i.done;i=n.next())i=i.value,"application/cea-608"!=i.mimeType&&"application/cea-708"!=i.mimeType||r.add(i.originalId);n=u(t.variants);for(i=n.next();!i.done;i=n.next())if((i=i.value.video)&&i.closedCaptions)for(var o=u(i.closedCaptions.keys()),a=o.next();!a.done;a=o.next())if(a=a.value,!r.has(a)){var s=a.startsWith("CC")?"application/cea-608":"application/cea-708",l=new il,c=i.closedCaptions.get(a);s={id:e.De++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:c,originalLanguage:c,label:null,type:Et,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1};t.textStreams.push(s);r.add(a)}}function Qu(e,t){return L((function(r){if(1==r.g)return S(r,Ju(e,t),2);Zu(e,t);_(r)}))}function Ju(e,t){var r;return L((function(n){if(1==n.g)return r=e.j?e.j.j:null,S(n,_r(r,t),2);Dp(t);_(n)}))}function Zu(e,t){if(e.l!=jp){for(var r=e.g.restrictions,n=e.Ce,i=!1,o=u(t.variants),a=o.next();!a.done;a=o.next()){a=a.value;var s=a.allowedByApplication;a.allowedByApplication=Sr(a,r,n);s!=a.allowedByApplication&&(i=!0)}i&&e.j&&dp(e);if((r=e.m?e.m.g:null)&&e.m.s)for(n=u(t.variants),i=n.next();!i.done;i=n.next())i=i.value,ep(e,r.keySystem,i.video),ep(e,r.keySystem,i.audio);xp(e,t)}}function ep(e,t,r){if(r){r=u(r.drmInfos);for(var n=r.next();!n.done;n=r.next())if(n=n.value,n.keySystem==t){n=u(n.initData||[]);for(var i=n.next();!i.done;i=n.next())i=i.value,Do(e.m,i.initDataType,i.initData)}}}function tp(e,t){var r,n,i,o,a;return L((function(s){if(1==s.g)return r=e.audio,n=e.video,i=function(e,t){var r,n,i;return L((function(o){if(1==o.g)return e?S(o,e.createSegmentIndex(),2):o.return(null);n=(r=e.segmentIndex.zb(t))?r.next().value:null;if(!n)return o.return(null);i=n.startTime;return o.return(i)}))},S(s,i(r,t),2);if(3!=s.g)return o=s.h,S(s,i(n,t),3);a=s.h;return null!=a&&null!=o?s.return(Math.max(a,o)):null!=a?s.return(a):null!=o?s.return(o):s.return(t)}))}function rp(e){var t=e.he();if(e.u&&e.N&&e.A){var r=e.H;r.j=t;al(r);e.U&&(r=e.U,t||r.i||(r.i=!0),r.i&&t&&(r.l=!0),r.m=t);ip(e)}t=(new Map).set("buffering",t);e.dispatchEvent(mu("buffering",t))}function np(e){var t=e.h.playbackRate;0!=t&&(e.H&&e.H.set(t),t=mu("ratechange"),e.dispatchEvent(t))}function ip(e){if(e.u&&e.N){var t=e.u.g;e.N.g==Dn?ou(t,"buffering"):e.h.paused?ou(t,"paused"):e.h.ended?ou(t,"ended"):ou(t,"playing")}}function op(e){if(e.T()){var t=e.ec();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync){var r=e.g.streaming.liveSyncMaxLatency;var n=e.g.streaming.liveSyncPlaybackRate}else e.i&&e.i.serviceDescription&&(r=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,n=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);var i=e.h.playbackRate,o=t.end-e.h.currentTime,a=0;if(e.l==Lp){var s=e.h.buffered;0<s.length&&(a=s.end(s.length-1),a=Math.max(n,a-t.end))}r&&n&&o-a>r?i!=n&&e.Mf(n):1!==i&&0!==i&&e.$e()}}}function ap(e){try{xp(e,e.i)}catch(t){return bp(e,t),!1}var t=Vr(e.i.variants);t=e.Ya.create(t);e.s.setVariants(Array.from(t.values()));return!0}function sp(e){function t(e){var t="";e.video&&(t+="video:"+e.video.id);e.audio&&(t=t+(t?"&":"")+("audio:"+e.audio.id));return t}for(var r=Date.now()/1e3,n=!1,i=u(e.i.variants),o=i.next();!o.done;o=i.next())o=o.value,0<o.disabledUntilTime&&o.disabledUntilTime<=r&&(o.disabledUntilTime=0,n=!0,re("Re-enabled variant with "+t(o)));e.i.variants.every((function(e){return 0===e.disabledUntilTime}))&&e.wd.stop();n&&lp(e,!0,void 0,!1,!1)}function lp(e,t,r,n,i){t=void 0===t?!0:t;r=void 0===r?0:r;n=void 0===n?!1:n;i=void 0===i?!0:i;var o;(o=ap(e)?e.s.chooseVariant():null)&&cp(e,o,i,t,r,n)}function cp(e,t,r,n,i,o){o=void 0===o?!1:o;var a=e.j.j;if(t==a)n&&Il(e.j,t,n,i,!0);else{var s=e.u.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:r,bandwidth:t.bandwidth}));Il(e.j,t,n,i,o,r);n=null;a&&(n=Lr(a));t=Lr(t);r?(r=(new Map).set("oldTrack",n).set("newTrack",t),e.L&&Qa(e.L,t),r=mu("adaptation",r),Cp(e,r)):hp(e,n,t)}}function up(e,t){var r=Array.from(e.h.audioTracks).find((function(e){return e.enabled}));t.enabled=!0;t.id!==r.id&&(r.enabled=!1);r=Fr(r);t=Fr(t);hp(e,r,t)}function pp(e,t,r){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var n=Vt(e.g.preferredTextLanguage);r=Vt(r.language);if(2==e.g.autoShowText)return Ft(r,n);if(3==e.g.autoShowText)return e=Vt(t.language),Ft(r,n)&&!Ft(e,r);Q("Invalid autoShowText setting!");return!1}function dp(e){var t=mu("trackschanged");Cp(e,t)}function hp(e,t,r){t=(new Map).set("oldTrack",t).set("newTrack",r);e.L&&Qa(e.L,r);r=mu("variantchanged",t);Cp(e,r)}function mp(e){var t=mu("textchanged");Cp(e,t)}function fp(e){var t=mu("texttrackvisibility");Cp(e,t)}function gp(e){e.g.abr.enabled||yp(e);var t=(new Map).set("newStatus",e.g.abr.enabled);Cp(e,mu("abrstatuschanged",t))}function yp(e,t){t=void 0===t?!0:t;if(e.l==Np){e.wd.stop();for(var r=u(e.i.variants),n=r.next();!n.done;n=r.next())n.value.disabledUntilTime=0;t&&ap(e)}}n.ae=function(e,t){if(!this.g.abr.enabled||this.l===jp||!navigator.onLine)return!1;if(this.i.variants.some((function(t){return(t=t[e.type])&&t.id!==e.id?"audio"==e.type?e.language===t.language:!0:!1}))){for(var r=u(this.i.variants),n=r.next();!n.done;n=r.next()){n=n.value;var i=n[e.type];i&&i.id===e.id&&(n.disabledUntilTime=Date.now()/1e3+t)}this.wd.Ca(1);t=this.bb().video.reduce((function(e,t){return e+t.end-t.start}),0);lp(this,!0,t,!0,!1);return!0}return!1};function bp(e,t){if(e.l!=jp){2===t.severity&&yp(e,!1);var r=mu("error",(new Map).set("detail",t));e.dispatchEvent(r);r.defaultPrevented&&(t.handled=!0)}}function vp(e,t,r){r=(new Map).set("detail",{schemeIdUri:r.schemeIdUri,value:r.value,startTime:r.startTime,endTime:r.endTime,id:r.id,eventElement:r.eventElement});e.dispatchEvent(mu(t,r))}function wp(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var r=e.h.error.msExtendedCode;r&&(0>r&&(r+=Math.pow(2,32)),r=r.toString(16));return new dt(2,3,3016,t,r,e.h.error.message)}function Ep(e,t){if(e.j){var r=Object.keys(t),n=1==r.length&&"00"==r[0],i=!1;if(r.length){r=u(e.i.variants);for(var o=r.next();!o.done;o=r.next()){o=o.value;var a=[];o.audio&&a.push(o.audio);o.video&&a.push(o.video);a=u(a);for(var s=a.next();!s.done;s=a.next()){var l=s.value;s=o.allowedByKeySystem;if(l.keyIds.size){o.allowedByKeySystem=!0;l=u(l.keyIds);for(var c=l.next();!c.done;c=l.next())c=c.value,c=t[n?"00":c],o.allowedByKeySystem=o.allowedByKeySystem&&!!c&&!qp.includes(c)}s!=o.allowedByKeySystem&&(i=!0)}}}if(!i||ap(e))(t=e.j.j)&&!t.allowedByKeySystem&&lp(e),i&&dp(e)}}function Sp(e,t,r){if(e.K&&e.K.onExpirationUpdated)e.K.onExpirationUpdated(t,r);t=mu("expirationupdated");e.dispatchEvent(t)}function _p(e,t,r){0<t&&(e.T()||e.Jf(t));t=e.getDuration();r<t&&(e.T()||e.Aa(r))}function xp(e,t){e=e.m?e.m.pd():{};var r=Object.keys(e);r=r.length&&"00"==r[0];var n=!1,i=!1,o=new Set,a=new Set;t=u(t.variants);for(var s=t.next();!s.done;s=t.next()){s=s.value;var l=[];s.audio&&l.push(s.audio);s.video&&l.push(s.video);l=u(l);for(var c=l.next();!c.done;c=l.next())if(c=c.value,c.keyIds.size){c=u(c.keyIds);for(var p=c.next();!p.done;p=c.next()){p=p.value;var d=e[r?"00":p];d?qp.includes(d)&&a.add(d):o.add(p)}}s.allowedByApplication?s.allowedByKeySystem&&(n=!0):i=!0}if(!n)throw e={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(a)},new dt(2,4,4012,e)}function Dp(e){if(!e.variants.some(zr))throw new dt(2,4,4032)}function Cp(e,t){L((function(r){if(1==r.g)return S(r,Promise.resolve(),2);e.l!=jp&&e.dispatchEvent(t);_(r)}))}function Tp(e){var t=new Set;e=u(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.language?t.add(Vt(r.language)):t.add("und");return t}function Op(e){var t=new Map,r=new Map;e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i="und",o=[];n.language&&(i=Vt(n.language));"variant"==n.type?o=n.audioRoles:o=n.roles;o&&o.length||(o=[""]);t.has(i)||t.set(i,new Set);o=u(o);for(var a=o.next();!a.done;a=o.next())a=a.value,t.get(i).add(a),n.label&&(r.has(i)||r.set(i,new Map),r.get(i).set(a,n.label))}var s=[];t.forEach((function(e,t){e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=null;r.has(t)&&r.get(t).has(n)&&(i=r.get(t).get(n));s.push({language:t,role:n,label:i})}}));return s}function kp(){return new dt(2,7,7e3)}function Pp(e,t,r,n,i,o){return n==e&&i.mediaElement==o.mediaElement&&i.uri==o.uri&&i.mimeType==o.mimeType?t:r}function Ap(){return{mediaElement:null,mimeType:null,startTime:null,Od:NaN,uri:null}}function Ip(e){return new Promise((function(t,r){e.Kb=function(){return r(kp())};e.Id=function(){return t()};e.onError=function(e){return r(e)};e.Kd=function(){return r(kp())}}))}V("shaka.Player",pu);pu.prototype.setVideoContainer=pu.prototype.Kf;pu.prototype.getManifestParserFactory=pu.prototype.qg;pu.prototype.getManifest=pu.prototype.pg;pu.prototype.retryStreaming=pu.prototype.Ge;pu.prototype.setMaxHardwareResolution=pu.prototype.Ne;pu.prototype.addChaptersTrack=pu.prototype.Rf;pu.prototype.addThumbnailsTrack=pu.prototype.Tf;pu.prototype.addTextTrackAsync=pu.prototype.Sf;pu.prototype.getStats=pu.prototype.getStats;pu.prototype.getBufferedInfo=pu.prototype.bb;pu.prototype.getPresentationStartTimeAsDate=pu.prototype.mf;pu.prototype.getPlayheadTimeAsDate=pu.prototype.wg;pu.prototype.setTextTrackVisibility=pu.prototype.lh;pu.prototype.getChapters=pu.prototype.jg;pu.prototype.getChaptersTracks=pu.prototype.lf;pu.prototype.isTextTrackVisible=pu.prototype.je;pu.prototype.selectVariantsByLabel=pu.prototype.gh;pu.prototype.selectTextLanguage=pu.prototype.Cf;pu.prototype.selectAudioLanguage=pu.prototype.Bf;pu.prototype.getTextLanguages=pu.prototype.yg;pu.prototype.getAudioLanguages=pu.prototype.gg;pu.prototype.getTextLanguagesAndRoles=pu.prototype.zg;pu.prototype.getAudioLanguagesAndRoles=pu.prototype.hg;pu.prototype.selectVariantTrack=pu.prototype.Ke;pu.prototype.selectTextTrack=pu.prototype.Df;pu.prototype.getThumbnails=pu.prototype.Bg;pu.prototype.getImageTracks=pu.prototype.ng;pu.prototype.getTextTracks=pu.prototype.Zb;pu.prototype.getVariantTracks=pu.prototype.rb;pu.prototype.cancelTrickPlay=pu.prototype.$e;pu.prototype.trickPlay=pu.prototype.Mf;pu.prototype.getPlaybackRate=pu.prototype.qd;pu.prototype.isBuffering=pu.prototype.he;pu.prototype.getKeyStatuses=pu.prototype.pd;pu.prototype.getActiveSessionsMetadata=pu.prototype.ce;pu.prototype.getExpiration=pu.prototype.Ic;pu.prototype.drmInfo=pu.prototype.drmInfo;pu.prototype.keySystem=pu.prototype.keySystem;pu.prototype.goToLive=pu.prototype.Hg;pu.prototype.seekRange=pu.prototype.ec;pu.prototype.isAudioOnly=pu.prototype.Kg;pu.prototype.isInProgress=pu.prototype.Gb;pu.prototype.isLive=pu.prototype.T;pu.prototype.getAdManager=pu.prototype.kf;pu.prototype.getAssetUri=pu.prototype.de;pu.prototype.getNetworkingEngine=pu.prototype.Ab;pu.prototype.getMediaElement=pu.prototype.tg;pu.prototype.getManifestType=pu.prototype.rg;pu.prototype.getLoadMode=pu.prototype.og;pu.prototype.resetConfiguration=pu.prototype.dh;pu.prototype.getBufferFullness=pu.prototype.ig;pu.prototype.getConfiguration=pu.prototype.getConfiguration;pu.prototype.configure=pu.prototype.configure;pu.prototype.load=pu.prototype.load;pu.prototype.updateStartTime=pu.prototype.qh;pu.prototype.unload=pu.prototype.Te;pu.prototype.detach=pu.prototype.detach;pu.prototype.attachCanvas=pu.prototype.Vf;pu.prototype.attach=pu.prototype.yc;pu.probeSupport=function(e){e=void 0===e?!0:e;var t,r,n,i,o,a;return L((function(s){if(1==s.g)return t={},e?S(s,Uo(),3):s.B(2);2!=s.g&&(t=s.h);var l={};if(Zt()){for(var c in oa)l[c]=!0;for(var d in aa)l[d]=!0}c={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};d=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var h=d.next();!h.done;h=d.next())h=h.value,l[h]=Zt()?!!oa[h]:er(h);for(var m in c)l[m]=Zt()?!!aa[m]:er(c[m]);r=l;m='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(p(At));l={};m=u(m);for(c=m.next();!c.done;c=m.next())c=c.value,l[c]=Zt()?jt(c)?!0:ie(c)||(We(c)?!0:!1):er(c),d=c.split(";")[0],l[d]=l[d]||l[c];n=l;i={manifest:r,media:n,drm:t};o=Up;for(a in o)i[a]=o[a]();return s.return(i)}))};pu.isBrowserSupported=function(){e.Promise||Q("A Promise implementation or polyfill is required");if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||lr("Trident/"))return!1;var t=sr();return t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)?!1:Zt()?!0:er("application/x-mpegurl")};pu.setAdManagerFactory=function(e){Hp=e};pu.registerSupportPlugin=function(e,t){Up[e]=t};pu.prototype.destroy=pu.prototype.destroy;var jp=0,Rp=1,Np=2,Lp=3;pu.LoadMode={DESTROYED:jp,NOT_LOADED:Rp,MEDIA_SOURCE:Np,SRC_EQUALS:Lp};pu.version="v4.4.3";var Mp=["4","4"];dn=new function(e){this.g=e;this.i=un;this.h=pn}(new ln(Number(Mp[0]),Number(Mp[1])));var qp=["output-restricted","internal-error"],Up={},Hp=null,Fp={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Bp={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function zp(){this.h=[];this.j=this.i=this.g=0}function Vp(e,t,r){var n=this;this.g=e;this.h=t;this.m=r;this.i=!1;this.l=this.h.getVolume();this.j=new oi;this.j.C(this.h,google.ima.AdEvent.Type.PAUSED,(function(){n.i=!0}));this.j.C(this.h,google.ima.AdEvent.Type.RESUMED,(function(){n.i=!1}))}n=Vp.prototype;n.getDuration=function(){return this.g.getDuration()};n.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()};n.getRemainingTime=function(){return this.h.getRemainingTime()};n.isPaused=function(){return this.i};n.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()};n.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};n.canSkipNow=function(){return this.h.getAdSkippableState()};n.skip=function(){return this.h.skip()};n.pause=function(){return this.h.pause()};n.play=function(){return this.h.resume()};n.getVolume=function(){return this.h.getVolume()};n.setVolume=function(e){return this.h.setVolume(e)};n.isMuted=function(){return 0==this.h.getVolume()};n.isLinear=function(){return this.g.isLinear()};n.resize=function(e,t){var r=!1,n=this.m;document.fullscreenEnabled?r=!!document.fullscreenElement:n.webkitSupportsFullscreen&&(r=n.webkitDisplayingFullscreen);this.h.resize(e,t,r?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)};n.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)};n.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};n.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};n.getTitle=function(){return this.g.getTitle()};n.getDescription=function(){return this.g.getDescription()};n.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()};n.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};n.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};n.getAdId=function(){return this.g.getAdId()};n.getCreativeAdId=function(){return this.g.getCreativeAdId()};n.getAdvertiserName=function(){return this.g.getAdvertiserName()};n.getMediaUrl=function(){return this.g.getMediaUrl()};n.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};n.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};n.release=function(){this.h=this.g=null};V("shaka.ads.ClientSideAd",Vp);Vp.prototype.release=Vp.prototype.release;Vp.prototype.getPodIndex=Vp.prototype.getPodIndex;Vp.prototype.getTimeOffset=Vp.prototype.getTimeOffset;Vp.prototype.getMediaUrl=Vp.prototype.getMediaUrl;Vp.prototype.getAdvertiserName=Vp.prototype.getAdvertiserName;Vp.prototype.getCreativeAdId=Vp.prototype.getCreativeAdId;Vp.prototype.getAdId=Vp.prototype.getAdId;Vp.prototype.getVastMediaWidth=Vp.prototype.getVastMediaWidth;Vp.prototype.getVastMediaHeight=Vp.prototype.getVastMediaHeight;Vp.prototype.getVastMediaBitrate=Vp.prototype.getVastMediaBitrate;Vp.prototype.getDescription=Vp.prototype.getDescription;Vp.prototype.getTitle=Vp.prototype.getTitle;Vp.prototype.getPositionInSequence=Vp.prototype.getPositionInSequence;Vp.prototype.getSequenceLength=Vp.prototype.getSequenceLength;Vp.prototype.setMuted=Vp.prototype.setMuted;Vp.prototype.resize=Vp.prototype.resize;Vp.prototype.isLinear=Vp.prototype.isLinear;Vp.prototype.isMuted=Vp.prototype.isMuted;Vp.prototype.setVolume=Vp.prototype.setVolume;Vp.prototype.getVolume=Vp.prototype.getVolume;Vp.prototype.play=Vp.prototype.play;Vp.prototype.pause=Vp.prototype.pause;Vp.prototype.skip=Vp.prototype.skip;Vp.prototype.canSkipNow=Vp.prototype.canSkipNow;Vp.prototype.getTimeUntilSkippable=Vp.prototype.getTimeUntilSkippable;Vp.prototype.isSkippable=Vp.prototype.isSkippable;Vp.prototype.isPaused=Vp.prototype.isPaused;Vp.prototype.getRemainingTime=Vp.prototype.getRemainingTime;Vp.prototype.getMinSuggestedDuration=Vp.prototype.getMinSuggestedDuration;Vp.prototype.getDuration=Vp.prototype.getDuration;function Wp(e,t,r,n,i){var o=this;this.o=e;this.i=t;this.A=!1;this.s=this.D=null;this.F=NaN;this.m=i;this.j=null;this.h=new oi;google.ima.settings.setLocale(r);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);e=new google.ima.AdDisplayContainer(this.o,this.i);e.initialize();this.l=new google.ima.AdsLoader(e);this.l.getSettings().setPlayerType("shaka-player");this.l.getSettings().setPlayerVersion("v4.4.3");this.g=null;this.u=n||new google.ima.AdsRenderingSettings;this.h.C(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){Kp(o,e)}));this.h.C(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){Gp(o,e)}));this.h.C(this.i,"ended",(function(){o.l.contentComplete()}));this.h.ja(this.i,"play",(function(){o.A=!0}))}Wp.prototype.configure=function(e){this.D=e};Wp.prototype.stop=function(){this.g&&this.g.stop();this.o&&yc(this.o)};Wp.prototype.release=function(){this.stop();this.s&&this.s.disconnect();this.h&&this.h.release();this.g&&this.g.destroy();this.l.destroy()};function Gp(e,t){t.getError();t=(new Map).set("originalEvent",t);e.m(new qn("ad-error",t));Qp(e,null);e.m(new qn("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Kp(t,r){t.m(new qn("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.F)));if(t.D.customPlayheadTracker){var n={currentTime:t.i.currentTime};t.g=r.getAdsManager(n,t.u);t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume);t.h.C(t.i,"timeupdate",(function(){t.i.duration&&(n.currentTime=t.i.currentTime)}));t.h.C(t.i,"volumechange",(function(){t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume)}))}else t.g=r.getAdsManager(t.i,t.u);t.m(new qn("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){r=[];i=u(i);for(var o=i.next();!o.done;o=i.next())r.push({start:o.value,end:null});t.m(new qn("ad-cue-points-changed",(new Map).set("cuepoints",r)))}Xp(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,$p(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,$p(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,$p(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,$p(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.A?t.g.start():t.h.ja(t.i,"play",(function(){t.A=!0;t.g.start()}))}catch(e){Qp(t,null)}}function $p(e){if(document.fullscreenEnabled)return!!document.fullscreenElement;e=e.i;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1}function Xp(e){function t(t,r){t=(new Map).set("originalEvent",t);e.m(new qn(r,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){Gp(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){Yp(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.STARTED,(function(t){Yp(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")}));e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")}));e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")}));e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")}));e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){Qp(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){Qp(e,t)}));e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")}));e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")}));e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,(function(r){e.j&&(e.j.i=!0,t(r,"ad-paused"))}));e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,(function(r){e.j&&(e.j.i=!1,t(r,"ad-resumed"))}));e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(r){e.j&&t(r,"ad-skip-state-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")}));e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")}));e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")}));e.h.C(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")}));e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")}));e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")}));e.h.C(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")}));e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")}));e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}function Yp(e,t){var r=t.getAd();r?(e.j=new Vp(r,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",r).set("originalEvent",t),e.m(new qn("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))):Q("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Qp(e,t){e.m(new qn("ad-stopped",(new Map).set("originalEvent",t)));e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.ended||e.i.play())}function Jp(e,t){this.g=e;this.i=null;this.h=t}n=Jp.prototype;n.getDuration=function(){return this.i?this.i.duration:-1};n.getMinSuggestedDuration=function(){return this.getDuration()};n.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1};n.isPaused=function(){return this.h.paused};n.isSkippable=function(){return this.g.isSkippable()};n.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};n.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};n.skip=function(){this.h.currentTime+=this.getRemainingTime()};n.pause=function(){return this.h.pause()};n.play=function(){return this.h.play()};n.getVolume=function(){return this.h.volume};n.setVolume=function(e){this.h.volume=e};n.isMuted=function(){return this.h.muted};n.isLinear=function(){return!0};n.resize=function(){};n.setMuted=function(e){this.h.muted=e};n.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};n.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};n.getTitle=function(){return this.g.getTitle()};n.getDescription=function(){return this.g.getDescription()};n.getVastMediaBitrate=function(){return 0};n.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};n.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};n.getAdId=function(){return this.g.getAdId()};n.getCreativeAdId=function(){return this.g.getCreativeAdId()};n.getAdvertiserName=function(){return this.g.getAdvertiserName()};n.getMediaUrl=function(){return null};n.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};n.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};n.release=function(){this.h=this.i=this.g=null};V("shaka.ads.ServerSideAd",Jp);Jp.prototype.release=Jp.prototype.release;Jp.prototype.getPodIndex=Jp.prototype.getPodIndex;Jp.prototype.getTimeOffset=Jp.prototype.getTimeOffset;Jp.prototype.getMediaUrl=Jp.prototype.getMediaUrl;Jp.prototype.getAdvertiserName=Jp.prototype.getAdvertiserName;Jp.prototype.getCreativeAdId=Jp.prototype.getCreativeAdId;Jp.prototype.getAdId=Jp.prototype.getAdId;Jp.prototype.getVastMediaWidth=Jp.prototype.getVastMediaWidth;Jp.prototype.getVastMediaHeight=Jp.prototype.getVastMediaHeight;Jp.prototype.getVastMediaBitrate=Jp.prototype.getVastMediaBitrate;Jp.prototype.getDescription=Jp.prototype.getDescription;Jp.prototype.getTitle=Jp.prototype.getTitle;Jp.prototype.getPositionInSequence=Jp.prototype.getPositionInSequence;Jp.prototype.getSequenceLength=Jp.prototype.getSequenceLength;Jp.prototype.setMuted=Jp.prototype.setMuted;Jp.prototype.resize=Jp.prototype.resize;Jp.prototype.isLinear=Jp.prototype.isLinear;Jp.prototype.isMuted=Jp.prototype.isMuted;Jp.prototype.setVolume=Jp.prototype.setVolume;Jp.prototype.getVolume=Jp.prototype.getVolume;Jp.prototype.play=Jp.prototype.play;Jp.prototype.pause=Jp.prototype.pause;Jp.prototype.skip=Jp.prototype.skip;Jp.prototype.canSkipNow=Jp.prototype.canSkipNow;Jp.prototype.getTimeUntilSkippable=Jp.prototype.getTimeUntilSkippable;Jp.prototype.isSkippable=Jp.prototype.isSkippable;Jp.prototype.isPaused=Jp.prototype.isPaused;Jp.prototype.getRemainingTime=Jp.prototype.getRemainingTime;Jp.prototype.getMinSuggestedDuration=Jp.prototype.getMinSuggestedDuration;Jp.prototype.getDuration=Jp.prototype.getDuration;function Zp(e,t,r,n){var i=this;this.s=e;this.l=t;this.j=null;this.G=NaN;this.i=n;this.F=!1;this.u=this.m=this.o=null;this.A="";this.D=[];this.h=new oi;e=new google.ima.dai.api.UiSettings;e.setLocale(r);this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e);this.i(new qn("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g)));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){ed(i,e)}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){i.A.length?i.j.resolve(i.A):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");i.j=null}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd();i.m=new Jp(e,i.l);i.u&&(i.m.i=i.u);i.i(new qn("ad-started",(new Map).set("ad",i.m)));i.s.setAttribute("ad-active","true")}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){i.s.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){i.u=e.getStreamData().adProgressData;i.m&&(i.m.i=i.u)}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){i.i(new qn("ad-first-quartile"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){i.i(new qn("ad-midpoint"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){i.i(new qn("ad-third-quartile"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){i.i(new qn("ad-complete"));i.i(new qn("ad-stopped"));i.s.removeAttribute("ad-active");i.m=null}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){i.i(new qn("ad-skipped"));i.i(new qn("ad-stopped"))}));this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];t=u(t.cuepoints);for(var r=t.next();!r.done;r=t.next())r=r.value,e.push({start:r.start,end:r.end});i.D=e;i.i(new qn("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}Zp.prototype.configure=function(){};Zp.prototype.stop=function(){this.A="";this.o=null;this.D=[]};Zp.prototype.release=function(){this.stop();this.h&&this.h.release()};Zp.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data;this.g.onTimedMetadata(t)}};function ed(e,t){e.i(new qn("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G)));t=t.getStreamData().url;e.j.resolve(t);e.j=null;e.F||e.h.C(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var r=e.g.previousCuePointForStreamTime(t);r&&!r.played&&(e.o=t,e.l.currentTime=r.start)}}))}function td(){Fn.call(this);this.g=this.h=null;this.i=new zp;this.l=navigator.language;this.j=null}b(td,Fn);n=td.prototype;n.setLocale=function(e){this.l=e};n.configure=function(e){this.j=e;this.h&&this.h.configure(this.j);this.g&&this.g.configure(this.j)};n.initClientSide=function(t,r,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new dt(2,10,1e4);this.h&&this.h.release();this.h=new Wp(t,r,this.l,n,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.i.h.push(e.loadTime);break;case"ad-started":i.i.g++;break;case"ad-complete":i.i.i++;break;case"ad-skipped":i.i.j++}i.dispatchEvent(e)}));this.h.configure(this.j)};n.release=function(){this.h&&(this.h.release(),this.h=null);this.g&&(this.g.release(),this.g=null);Fn.prototype.release.call(this)};n.onAssetUnload=function(){this.h&&this.h.stop();this.g&&this.g.stop();this.dispatchEvent(new qn("ad-stopped"));this.i=new zp};n.requestClientSideAds=function(e){if(!this.h)throw new dt(1,10,10001);var t=this.h;t.g&&t.g.destroy();t.l&&t.l.contentComplete();t.F=Date.now()/1e3;t.l.requestAds(e)};n.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new dt(1,10,10001);var t=this.h;t.u=e;t.g&&t.g.updateAdsRenderingSettings(t.u)};n.initServerSide=function(t,r){var n=this;if(!e.google||!google.ima||!google.ima.dai)throw new dt(2,10,10002);this.g&&this.g.release();this.g=new Zp(t,r,this.l,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":n.i.h.push(e.loadTime);break;case"ad-started":n.i.g++;break;case"ad-complete":n.i.i++;break;case"ad-skipped":n.i.j++}n.dispatchEvent(e)}));this.g.configure(this.j)};n.requestServerSideStream=function(e,t){t=void 0===t?"":t;if(!this.g)throw new dt(1,10,10003);e.adTagParameters||(e.adTagParameters={});var r=e.adTagParameters;(r.mpt||r.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.adTagParameters.mpt="shaka-player";e.adTagParameters.mpv="v4.4.3";r=this.g;r.j?e=Promise.reject(new dt(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(r.F=!0),r.j=new Pn,r.g.requestStream(e),r.A=t||"",r.G=Date.now()/1e3,e=r.j);return e};n.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new dt(1,10,10003);(e.mpt||e.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.mpt="Shaka Player";e.mpv="v4.4.3";this.g.g.replaceAdTagParameters(e)};n.getServerSideCuePoints=function(){if(!this.g)throw new dt(1,10,10003);return this.g.D};n.getStats=function(){var e=this.i;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}};n.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,r=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,r,e.startTime)}};n.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)};n.onCueMetadataChange=function(e){if(this.g)this.g.onCueMetadataChange(e)};V("shaka.ads.AdManager",td);td.prototype.onCueMetadataChange=td.prototype.onCueMetadataChange;td.prototype.onHlsTimedMetadata=td.prototype.onHlsTimedMetadata;td.prototype.onDashTimedMetadata=td.prototype.onDashTimedMetadata;td.prototype.getStats=td.prototype.getStats;td.prototype.getServerSideCuePoints=td.prototype.getServerSideCuePoints;td.prototype.replaceServerSideAdTagParameters=td.prototype.replaceServerSideAdTagParameters;td.prototype.requestServerSideStream=td.prototype.requestServerSideStream;td.prototype.initServerSide=td.prototype.initServerSide;td.prototype.updateClientSideAdsRenderingSettings=td.prototype.updateClientSideAdsRenderingSettings;td.prototype.requestClientSideAds=td.prototype.requestClientSideAds;td.prototype.onAssetUnload=td.prototype.onAssetUnload;td.prototype.release=td.prototype.release;td.prototype.initClientSide=td.prototype.initClientSide;td.prototype.configure=td.prototype.configure;td.prototype.setLocale=td.prototype.setLocale;td.ADS_LOADED="ads-loaded";td.AD_STARTED="ad-started";td.AD_FIRST_QUARTILE="ad-first-quartile";td.AD_MIDPOINT="ad-midpoint";td.AD_THIRD_QUARTILE="ad-third-quartile";td.AD_COMPLETE="ad-complete";td.AD_STOPPED="ad-stopped";td.AD_SKIPPED="ad-skipped";td.AD_VOLUME_CHANGED="ad-volume-changed";td.AD_MUTED="ad-muted";td.AD_PAUSED="ad-paused";td.AD_RESUMED="ad-resumed";td.AD_SKIP_STATE_CHANGED="ad-skip-state-changed";td.CUEPOINTS_CHANGED="ad-cue-points-changed";td.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded";td.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded";td.AD_CLICKED="ad-clicked";td.AD_PROGRESS="ad-progress";td.AD_BUFFERING="ad-buffering";td.AD_IMPRESSION="ad-impression";td.AD_DURATION_CHANGED="ad-duration-changed";td.AD_CLOSED="ad-closed";td.AD_LOADED="ad-loaded";td.ALL_ADS_COMPLETED="all-ads-completed";td.AD_LINEAR_CHANGED="ad-linear-changed";td.AD_METADATA="ad-metadata";td.AD_RECOVERABLE_ERROR="ad-recoverable-error";td.AD_ERROR="ad-error";td.AD_BREAK_READY="ad-break-ready";td.AD_INTERACTION="ad-interaction";Hp=function(){return new td};function rd(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof qn){var r={};for(n in t)(e=t[n])&&"object"==typeof e?"detail"==n&&(r[n]=e):n in Event||(r[n]=e);return r}if(t instanceof Error){var n=new Set(["name","message","stack"]);for(r in t)n.add(r);e=u(Object.getOwnPropertyNames(t));for(r=e.next();!r.done;r=e.next())n.add(r.value);e={};n=u(n);for(r=n.next();!r.done;r=n.next())r=r.value,e[r]=t[r];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){n={__type__:"TimeRanges",length:t.length,start:[],end:[]};t=u(wa(t));for(r=t.next();!r.done;r=t.next())r=r.value,e=r.end,n.start.push(r.start),n.end.push(e);t=n}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function nd(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var r=NaN;else if("-Infinity"==t)r=-Infinity;else if("Infinity"==t)r=Infinity;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)r=id(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)r=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents;t=Error(e.message);for(r in e)t[r]=e[r];r=t}else r=t;return r}))}function id(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var od="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ad="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),sd=["loop","playbackRate"],ld=["pause","play"],cd={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},ud={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},pd={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},dd=[["getConfiguration","configure"]],hd=[["isTextTrackVisible","setTextTrackVisibility"]],md="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),fd=["attach","attachCanvas","detach","load","unload"];function gd(e,t,r,n,i,o,a){var s=this;this.G=e;this.N=a;this.j=new Jt(t);this.P=r;this.u=!1;this.s=n;this.F=i;this.K=o;this.h=this.m=!1;this.L="";this.o=null;this.A=function(){return Sd(s)};this.D=function(e,t){e=nd(t);switch(e.type){case"event":var r=e.targetName,n=Un(e.event);s.s(r,n);break;case"update":r=e.update;for(n in r){e=s.g[n]||{};for(var i in r[n])e[i]=r[n][i]}s.u&&(s.P(),s.u=!1);break;case"asyncComplete":if(n=e.id,i=e.error,e=s.i[n],delete s.i[n],e)if(i){n=new dt(i.severity,i.category,i.code);for(r in i)n[r]=i[r];e.reject(n)}else e.resolve()}};this.g={video:{},player:{}};this.H=0;this.i={};this.l=null;kd.add(this)}n=gd.prototype;n.destroy=function(){kd.delete(this);_d(this);Td&&Ed(this);this.j&&(this.j.stop(),this.j=null);this.F=this.s=null;this.h=this.m=!1;this.D=this.A=this.l=this.i=this.g=this.o=null;return Promise.resolve()};n.xa=function(){return this.h};n.Ee=function(){return this.L};n.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0;this.j.ic();var t=new chrome.cast.SessionRequest(this.G,[],null,this.N,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(kd),r=t.next();!r.done;r=t.next())wd(r.value,e)}),(function(e){for(var t=u(kd),r=t.next();!r.done;r=t.next())r=r.value,Cd="available"==e,r.j.ic()}),"origin_scoped");chrome.cast.initialize(t,(function(){}),(function(){}));Cd&&this.j.S(Dd);(t=Td)&&t.status!=chrome.cast.SessionStatus.STOPPED?wd(this,t):Td=null}else e.__onGCastApiAvailable!==Pd&&(Od=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Pd)};n.Le=function(e){this.o=e;this.h&&xd(this,{type:"appData",appData:this.o})};n.cast=function(e){var t=this;return L((function(r){if(!t.m)throw new dt(1,8,8e3);if(!Cd)throw new dt(1,8,8001);if(t.h)throw new dt(1,8,8002);t.l=new Pn;chrome.cast.requestSession((function(r){return bd(t,e,r)}),(function(e){return vd(t,e)}));return S(r,t.l,0)}))};function yd(e){if(e.h){var t=e.K();chrome.cast.requestSession((function(r){return bd(e,t,r)}),(function(t){return vd(e,t)}))}}n.Wb=function(){if(this.h){_d(this);if(Td){Ed(this);try{Td.stop((function(){}),(function(){}))}catch(e){}Td=null}Sd(this)}};n.get=function(e,t){var r=this;if("video"==e){if(ld.includes(t))return function(){return r.zf.apply(r,[e,t].concat(p(M.apply(0,arguments))))}}else if("player"==e){if(pd[t]&&!this.get("player","isLive")())return function(){};if(md.includes(t))return function(){return r.zf.apply(r,[e,t].concat(p(M.apply(0,arguments))))};if(fd.includes(t))return function(){return r.$g.apply(r,[e,t].concat(p(M.apply(0,arguments))))};if(cd[t]||ud[t])return function(){return r.g[e][t]}}return this.g[e][t]};n.set=function(e,t,r){this.g[e][t]=r;xd(this,{type:"set",targetName:e,property:t,value:r})};function bd(e,t,r){Td=r;r.addUpdateListener(e.A);r.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D);Sd(e);xd(e,{type:"init",initState:t,appData:e.o});e.l.resolve()}function vd(e,t){var r=8003;switch(t.code){case"cancel":r=8004;break;case"timeout":r=8005;break;case"receiver_unavailable":r=8006}e.l.reject(new dt(2,8,r,t))}n.zf=function(e,t){xd(this,{type:"call",targetName:e,methodName:t,args:M.apply(2,arguments)})};n.$g=function(e,t){var r=M.apply(2,arguments),n=new Pn,i=this.H.toString();this.H++;this.i[i]=n;try{xd(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:i})}catch(e){n.reject(e)}return n};function wd(e,t){var r=e.K();e.l=new Pn;e.u=!0;bd(e,r,t)}function Ed(e){var t=Td;t.removeUpdateListener(e.A);t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Sd(e){var t=Td?"connected"==Td.status:!1;if(e.h&&!t){e.F();for(var r in e.g)e.g[r]={};_d(e)}e.h=t;e.L=t?Td.receiver.friendlyName:"";e.j.ic()}function _d(e){for(var t in e.i){var r=e.i[t];delete e.i[t];r.reject(new dt(1,7,7e3))}}function xd(e,t){t=rd(t);var r=Td;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Z)}catch(n){throw t=new dt(2,8,8005,n),r=new qn("error",(new Map).set("detail",t)),e.s("player",r),e.Wb(),t}}var Dd=.02,Cd=!1,Td=null,Od=null,kd=new Set;function Pd(t){Od?e.__onGCastApiAvailable=Od:delete e.__onGCastApiAvailable;Od=null;if(t)for(var r=u(kd),n=r.next();!n.done;n=r.next())n.value.init();"function"===typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Ad(e,t,r,n){n=void 0===n?!1:n;Fn.call(this);var i=this;this.i=e;this.h=t;this.m=this.o=this.j=this.s=this.l=null;this.D=r;this.A=n;this.u=new Map;this.g=new gd(r,(function(){return Ld(i)}),(function(){return Md(i)}),(function(e,t){return Fd(i,e,t)}),(function(){return qd(i)}),(function(){return Nd(i)}),n);Id(this)}b(Ad,Fn);n=Ad.prototype;n.destroy=function(e){e&&this.g.Wb();this.m&&(this.m.release(),this.m=null);e=[];this.h&&(e.push(this.h.destroy()),this.h=null);this.g&&(e.push(this.g.destroy()),this.g=null);this.s=this.l=this.i=null;Fn.prototype.release.call(this);return Promise.all(e)};n.Fg=function(){return this.l};n.vg=function(){return this.s};n.Xf=function(){return this.g.m&&Cd};n.xa=function(){return this.g.xa()};n.Ee=function(){return this.g.Ee()};n.cast=function(){var e=this,t;return L((function(r){return 1==r.g?(t=Nd(e),S(r,e.g.cast(t),2)):e.h?S(r,e.h.Te(),0):r.return()}))};n.Le=function(e){this.g.Le(e)};n.mh=function(){yd(this.g)};n.Wb=function(){this.g.Wb()};n.Yf=function(e,t){t=void 0===t?!1:t;var r=this;return L((function(n){if(1==n.g){if(e==r.D&&t==r.A)return n.return();r.D=e;r.A=t;r.g.Wb();return S(n,r.g.destroy(),2)}r.g=null;r.g=new gd(e,(function(){return Ld(r)}),(function(){return Md(r)}),(function(e,t){return Fd(r,e,t)}),(function(){return qd(r)}),(function(){return Nd(r)}),t);r.g.init();_(n)}))};function Id(e){e.g.init();e.m=new oi;for(var t=u(od),r=t.next();!r.done;r=t.next())e.m.C(e.i,r.value,(function(t){e.g.xa()||(t=Un(t),e.j.dispatchEvent(t))}));for(var n in Hn)e.m.C(e.h,Hn[n],(function(t){e.g.xa()||e.o.dispatchEvent(t)}));e.l={};t={};for(var i in e.i)t.oc=i,Object.defineProperty(e.l,t.oc,{configurable:!1,enumerable:!0,get:function(t){return function(){return Ud(e,t.oc)}}(t),set:function(t){return function(r){var n=t.oc;e.g.xa()?e.g.set("video",n,r):e.i[n]=r}}(t)}),t={oc:t.oc};e.s={};Rd(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return Hd(e,t)}})}));jd(e);e.j=new Fn;e.j.yd=e.l;e.o=new Fn;e.o.yd=e.s}function jd(e){var t=new Map;Rd(e,(function(r,n){t.has(n)?(n=t.get(n),r.length<n.length?e.u.set(r,n):e.u.set(n,r)):t.set(n,r)}))}function Rd(e,t){function r(e){return"constructor"==e||"function"!=typeof n[e]?!1:!i.has(e)}var n=e.h,i=new Set,o;for(o in n)r(o)&&(i.add(o),t(o,n[o]));e=Object.getPrototypeOf(n);for(o=Object.getPrototypeOf({});e&&e!=o;){for(var a=u(Object.getOwnPropertyNames(e)),s=a.next();!s.done;s=a.next())s=s.value,r(s)&&(i.add(s),t(s,n[s]));e=Object.getPrototypeOf(e)}}function Nd(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.de(),startTime:null};e.i.pause();for(var r=u(sd),n=r.next();!n.done;n=r.next())n=n.value,t.video[n]=e.i[n];e.i.ended||(t.startTime=e.i.currentTime);r=u(dd);for(n=r.next();!n.done;n=r.next()){var i=n.value;n=i[1];i=e.h[i[0]]();t.player[n]=i}r=u(hd);for(n=r.next();!n.done;n=r.next())i=n.value,n=i[1],i=e.h[i[0]](),t.playerAfterLoad[n]=i;return t}function Ld(e){var t=new qn("caststatuschanged");e.dispatchEvent(t)}function Md(e){var t=new qn(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function qd(e){for(var t=u(dd),r=t.next();!r.done;r=t.next()){var n=r.value;r=n[1];n=e.g.get("player",n[0])();e.h[r](n)}var i=e.g.get("player","getAssetUri")();r=e.g.get("video","ended");t=Promise.resolve();var o=e.i.autoplay;n=null;r||(n=e.g.get("video","currentTime"));i&&(e.i.autoplay=!1,t=e.h.load(i,n));var a={};r=u(sd);for(n=r.next();!n.done;n=r.next())n=n.value,a[n]=e.g.get("video",n);t.then((function(){if(e.i){for(var t=u(sd),r=t.next();!r.done;r=t.next())r=r.value,e.i[r]=a[r];t=u(hd);for(r=t.next();!r.done;r=t.next()){var n=r.value;r=n[1];n=e.g.get("player",n[0])();e.h[r](n)}e.i.autoplay=o;i&&e.i.play()}}),(function(t){t=(new Map).set("detail",t);t=new qn("error",t);e.h.dispatchEvent(t)}))}function Ud(e,t){if("addEventListener"==t)return function(t,r,n){return e.j.addEventListener(t,r,n)};if("removeEventListener"==t)return function(t,r,n){return e.j.removeEventListener(t,r,n)};if(e.g.xa()&&0==Object.keys(e.g.g.video).length){var r=e.i[t];if("function"!=typeof r)return r}return e.g.xa()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function Hd(e,t){e.u.has(t)&&(t=e.u.get(t));if("addEventListener"==t)return function(t,r,n){return e.o.addEventListener(t,r,n)};if("removeEventListener"==t)return function(t,r,n){return e.o.removeEventListener(t,r,n)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Ab()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.kf()};if("setVideoContainer"==t)return function(t){return e.h.Kf(t)};if(e.g.xa()){if("getManifest"==t||"drmInfo"==t)return function(){Q(t+"() does not work while casting!");return null};if("attach"==t||"detach"==t)return function(){Q(t+"() does not work while casting!");return Promise.resolve()}}return e.g.xa()&&0==Object.keys(e.g.g.video).length&&(cd[t]||ud[t])||!e.g.xa()?e.h[t].bind(e.h):e.g.get("player",t)}function Fd(e,t,r){e.g.xa()&&("video"==t?e.j.dispatchEvent(r):"player"==t&&e.o.dispatchEvent(r))}V("shaka.cast.CastProxy",Ad);Ad.prototype.changeReceiverId=Ad.prototype.Yf;Ad.prototype.forceDisconnect=Ad.prototype.Wb;Ad.prototype.suggestDisconnect=Ad.prototype.mh;Ad.prototype.setAppData=Ad.prototype.Le;Ad.prototype.cast=Ad.prototype.cast;Ad.prototype.receiverName=Ad.prototype.Ee;Ad.prototype.isCasting=Ad.prototype.xa;Ad.prototype.canCast=Ad.prototype.Xf;Ad.prototype.getPlayer=Ad.prototype.vg;Ad.prototype.getVideo=Ad.prototype.Fg;Ad.prototype.destroy=Ad.prototype.destroy;function Bd(e,t,r,n){Fn.call(this);var i=this;this.g=e;this.h=t;this.j=new oi;this.H={video:e,player:t};this.D=r||function(){};this.K=n||function(e){return e};this.i=null;this.F=!1;this.o=!0;this.m=0;this.A=!1;this.u=!0;this.s=this.l=null;this.G=new Jt((function(){$d(i)}));zd(this)}b(Bd,Fn);n=Bd.prototype;n.isConnected=function(){return this.F};n.Lg=function(){return this.o};n.jh=function(e){this.i=e};n.ag=function(){this.i=null};n.kh=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.title=e};n.ih=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.images=[{url:e}]};n.hh=function(e){this.i||(this.i={});this.i.artist=e;this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK};n.destroy=function(){var e=this,t,r;return L((function(n){if(1==n.g)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.G&&(e.G.stop(),e.G=null),e.g=null,e.H=null,e.D=null,e.F=!1,e.o=!0,e.l=null,e.s=null,Fn.prototype.release.call(e),S(n,Promise.all(t),2);r=cast.receiver.CastReceiverManager.getInstance();r.stop();_(n)}))};function zd(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Vd(e)};t.onSenderDisconnected=function(){return Vd(e)};t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&eh(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l);eh(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)};e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media");e.s.onMessage=function(t){return Jd(e,t)};e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2");e.l.onMessage=function(t){return Qd(e,t)};t.start();t=u(od);for(var r=t.next();!r.done;r=t.next())e.j.C(e.g,r.value,(function(t){return Kd(e,"video",t)}));for(var n in Hn)e.j.C(e.h,Hn[n],(function(t){return Kd(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Ne(3840,2160):e.h.Ne(1920,1080);e.j.C(e.g,"loadeddata",(function(){e.A=!0}));e.j.C(e.h,"loading",(function(){e.o=!1;Wd(e)}));e.j.C(e.g,"playing",(function(){e.o=!1;Wd(e)}));e.j.C(e.g,"pause",(function(){Wd(e)}));e.j.C(e.h,"unloading",(function(){e.o=!0;Wd(e)}));e.j.C(e.g,"ended",(function(){new Jt((function(){e.g&&e.g.ended&&(e.o=!0,Wd(e))})).S(nh)}))}function Vd(e){e.m=0;e.u=!0;e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;Wd(e)}function Wd(e){var t;L((function(r){if(1==r.g)return S(r,Promise.resolve(),2);if(!e.h)return r.return();t=new qn("caststatuschanged");e.dispatchEvent(t);Xd(e)||th(e);_(r)}))}function Gd(e,t,r){var n,i,o,a,s,l,c,u,p,d;L((function(h){switch(h.g){case 1:for(n in t.player)i=t.player[n],e.h[n](i);e.D(r);o=e.g.autoplay;return t.manifest?(e.g.autoplay=!1,x(h,5),S(h,e.h.load(t.manifest,t.startTime),7)):S(h,Promise.resolve(),3);case 7:C(h,3);break;case 5:return a=T(h),s=(new Map).set("detail",a),l=new qn("error",s),e.h&&e.h.dispatchEvent(l),h.return();case 3:if(!e.h)return h.return();for(c in t.video)u=t.video[c],e.g[c]=u;for(p in t.playerAfterLoad)d=t.playerAfterLoad[p],e.h[p](d);e.g.autoplay=o;t.manifest&&(e.g.play(),th(e));_(h)}}))}function Kd(e,t,r){e.h&&($d(e),eh(e,{type:"event",targetName:t,event:r},e.l))}function $d(e){e.G.S(rh);for(var t={video:{},player:{}},r=u(ad),n=r.next();!n.done;n=r.next())n=n.value,t.video[n]=e.g[n];if(e.h.T())for(var i in pd)0==e.m%pd[i]&&(t.player[i]=e.h[i]());for(var o in cd)0==e.m%cd[o]&&(t.player[o]=e.h[o]());if(r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())t.video.volume=r.level,t.video.muted=r.muted;eh(e,{type:"update",update:t},e.l);for(var a in ud)0==e.m%ud[a]&&(t={player:{}},t.player[a]=e.h[a](),eh(e,{type:"update",update:t},e.l));e.A&&(e.m+=1);Xd(e)}function Xd(e){return e.u&&(e.g.duration||e.h.T())?(Yd(e),e.u=!1,!0):!1}function Yd(e,t){var r={contentId:e.h.de(),streamType:e.h.T()?"LIVE":"BUFFERED",contentType:""};e.h.T()||(r.duration=e.g.duration);e.i&&(r.metadata=e.i);th(e,void 0===t?0:t,r)}function Qd(e,t){var r=nd(t.data);switch(r.type){case"init":e.m=0;e.A=!1;e.u=!0;Gd(e,r.initState,r.appData);$d(e);break;case"appData":e.D(r.appData);break;case"set":var n=r.targetName,i=r.property;r=r.value;if("video"==n)if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(r);break}else if("muted"==i){t.setSystemVolumeMuted(r);break}e.H[n][i]=r;break;case"call":n=e.H[r.targetName];n[r.methodName].apply(n,r.args);break;case"asyncCall":n=r.targetName;i=r.methodName;"player"==n&&"load"==i&&(e.m=0,e.A=!1);var o=r.id,a=t.senderId;t=e.H[n];r=t[i].apply(t,r.args);"player"==n&&"load"==i&&(r=r.then((function(){e.u=!0})));r.then((function(){return Zd(e,a,o,null)}),(function(t){return Zd(e,a,o,t)}))}}function Jd(e,t){var r=nd(t.data);switch(r.type){case"PLAY":e.g.play();th(e);break;case"PAUSE":e.g.pause();th(e);break;case"SEEK":t=r.currentTime;var n=r.resumeState;null!=t&&(e.g.currentTime=Number(t));n&&"PLAYBACK_START"==n?(e.g.play(),th(e)):n&&"PLAYBACK_PAUSE"==n&&(e.g.pause(),th(e));break;case"STOP":e.h.Te().then((function(){e.h&&th(e)}));break;case"GET_STATUS":Yd(e,Number(r.requestId));break;case"VOLUME":n=r.volume;t=n.level;n=n.muted;var i=e.g.volume,o=e.g.muted;null!=t&&(e.g.volume=Number(t));null!=n&&(e.g.muted=n);i==e.g.volume&&o==e.g.muted||th(e);break;case"LOAD":e.m=0;e.A=!1;e.u=!1;t=r.media;n=r.currentTime;i=e.K(t.contentId);o=r.autoplay||!0;e.D(t.customData);o&&(e.g.autoplay=!0);e.h.load(i,n).then((function(){e.h&&Yd(e)})).catch((function(t){var n="LOAD_FAILED";7==t.category&&7e3==t.code&&(n="LOAD_CANCELLED");eh(e,{requestId:Number(r.requestId),type:n},e.s)}));break;default:eh(e,{requestId:Number(r.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}function Zd(e,t,r,n){e.h&&eh(e,{type:"asyncComplete",id:r,error:n},e.l,t)}function eh(e,t,r,n){e.F&&(e=rd(t),n?r.getCastChannel(n).send(e):r.broadcast(e))}function th(e,t,r){r=void 0===r?null:r;var n={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?ih:e.h.he()?ah:e.g.paused?sh:oh,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};r&&(n.media=r);eh(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[n]},e.s)}V("shaka.cast.CastReceiver",Bd);Bd.prototype.destroy=Bd.prototype.destroy;Bd.prototype.setContentArtist=Bd.prototype.hh;Bd.prototype.setContentImage=Bd.prototype.ih;Bd.prototype.setContentTitle=Bd.prototype.kh;Bd.prototype.clearContentMetadata=Bd.prototype.ag;Bd.prototype.setContentMetadata=Bd.prototype.jh;Bd.prototype.isIdle=Bd.prototype.Lg;Bd.prototype.isConnected=Bd.prototype.isConnected;var rh=.5,nh=5,ih="IDLE",oh="PLAYING",ah="BUFFERING",sh="PAUSED";function lh(e,t,r,n,i){if(n>=i)return null;for(var o=-1,a=-1,s=0;s<r.length;s++)if(r[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}for(s=r.length-1;0<=s;s--)if(r[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}if(-1===o||-1===a)return null;for(var l=s=!1,c="white",u="black",p=ch(n,i,s,l,c,u);o<=a;o++){for(var d=r[o],h=-1,m=-1,f=0;f<d.length;f++)if(null!=d[f]&&""!==d[f].g.trim()){h=f;break}for(f=d.length-1;0<=f;f--)if(null!=d[f]&&""!==d[f].g.trim()){m=f;break}if(-1===h||-1===m)d=uh(n,i),e.nestedCues.push(d);else{for(;h<=m;h++)if(f=d[h]){var g=f.l,y=f.i,b=f.j,v=f.h;if(g!=s||y!=l||b!=c||v!=u)p.payload&&e.nestedCues.push(p),p=ch(n,i,g,y,b,v),s=g,l=y,c=b,u=v;p.payload+=f.g}else p.payload+=" ";p.payload&&e.nestedCues.push(p);o!==a&&(p=uh(n,i),e.nestedCues.push(p));p=ch(n,i,s,l,c,u)}}return e.nestedCues.length?{cue:e,stream:t}:null}function ch(e,t,r,n,i,o){e=new _e(e,t,"");r&&e.textDecoration.push("underline");n&&(e.fontStyle="italic");e.color=i;e.backgroundColor=o;return e}function uh(e,t){e=new _e(e,t,"");e.lineBreak=!0;return e}function ph(e,t,r,n,i){this.g=e;this.l=t;this.i=r;this.h=n;this.j=i}function dh(e,t){this.i=[];this.g=1;this.h=0;this.u=e;this.s=t;this.j=this.m=!1;this.l="white";this.o="black";mh(this)}function hh(e,t,r){var n="CC"+(e.u<<1|e.s+1),i=new _e(t,r,"");i.lineInterpretation=1;i.line=e.g/16*100;return lh(i,n,e.i,t,r)}function mh(e){yh(e,0,15);e.g=1}function fh(e,t,r){if(!(32>r||127<r)){var n="";switch(t){case bh:n=Sh.has(r)?Sh.get(r):String.fromCharCode(r);break;case vh:n=_h.get(r);break;case wh:e.i[e.g].pop();n=xh.get(r);break;case Eh:e.i[e.g].pop(),n=Dh.get(r)}n&&e.i[e.g].push(new ph(n,e.m,e.j,e.o,e.l))}}function gh(e,t,r,n){if(!(0>r||0>t))if(t>=r)for(--n;0<=n;n--)e.i[t+n]=e.i[r+n].map((function(e){return e}));else for(var i=0;i<n;i++)e.i[t+i]=e.i[r+i].map((function(e){return e}))}function yh(e,t,r){for(var n=0;n<=r;n++)e.i[t+n]=[]}var bh=0,vh=1,wh=2,Eh=3,Sh=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),_h=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),xh=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Dh=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function Ch(e,t){this.h=Ph;this.o=new dh(e,t);this.i=new dh(e,t);this.g=this.j=new dh(e,t);this.l=0;this.m=null}function Th(e,t,r){e.g=e.i;var n=e.g,i=null;e.h!==Ih&&e.h!==jh&&(i=hh(n,e.l,r),r=e.i,r.g=0<r.h?r.h:0,yh(r,0,15),r=e.j,r.g=0<r.h?r.h:0,yh(r,0,15),n.g=15);e.h=Ih;n.h=t;return i}function Oh(e){e.h=Ah;e.g=e.j;e.g.h=0}function kh(e){J("Cea608DataChannel","CEA-608 text mode entered, but is unsupported");e.g=e.o;e.h=jh}var Ph=0,Ah=1,Ih=3,jh=4,Rh="black green blue cyan red yellow magenta black".split(" "),Nh="white green blue cyan red yellow magenta white_italics".split(" ");function Lh(){this.l=!1;this.A=this.F=0;this.D=Vh;this.i=[];this.g=this.h=this.j=0;this.u=this.o=!1;this.s="white";this.m="black";Mh(this)}function Mh(e){e.i=[];for(var t=0;16>t;t++)e.i.push(qh())}function qh(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Uh(e,t){Hh(e)&&(e.i[e.h][e.g]=new ph(t,e.u,e.o,e.m,e.s),e.g++)}function Hh(e){var t=e.g<e.A&&0<=e.g;return e.h<e.F&&0<=e.h&&t}Lh.prototype.isVisible=function(){return this.l};function Fh(e,t,r){var n=new _e(e.j,t,"");n.textAlign=e.D===Bh?"left":e.D===zh?"right":Ce;if(r=lh(n,"svc"+r,e.i,e.j,t))e.j=t;return r}var Bh=0,zh=1,Vh=2;function Wh(){this.i=[];this.h=null;this.g=0}function Gh(e,t){3===t.type?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Kh(e.h)),e.h=null,e.g=0))}function Kh(e){this.g=0;this.h=e}Kh.prototype.ha=function(){return this.g<this.h.length};Kh.prototype.fa=function(){return this.g};function $h(e){if(!e.ha())throw new dt(2,2,3e3);return e.h[e.g++]}Kh.prototype.skip=function(e){if(this.g+e>this.h.length)throw new dt(2,2,3e3);this.g+=e};function Xh(e){this.i=e;this.h=[null,null,null,null,null,null,null,null];this.g=null}function Yh(e,t,r,n){if(128<=r&&135>=r)n=r&7,e.h[n]&&(e.g=e.h[n]);else{if(136===r){r=$h(t).value;t=null;r=u(Qh(e,r));for(var i=r.next();!i.done;i=r.next())i=e.h[i.value],i.isVisible()&&(t=Fh(i,n,e.i)),Mh(i);return t}if(137===r)for(t=$h(t).value,t=u(Qh(e,t)),r=t.next();!r.done;r=t.next())r=e.h[r.value],r.isVisible()||(r.j=n),r.l=!0;else{if(138===r){r=$h(t).value;t=null;r=u(Qh(e,r));for(i=r.next();!i.done;i=r.next())i=e.h[i.value],i.isVisible()&&(t=Fh(i,n,e.i)),i.l=!1;return t}if(139===r){r=$h(t).value;t=null;r=u(Qh(e,r));for(i=r.next();!i.done;i=r.next())i=e.h[i.value],i.isVisible()?t=Fh(i,n,e.i):i.j=n,i.l=!i.l;return t}if(140===r)return t=$h(t).value,Jh(e,t,n);if(143===r)return n=Jh(e,255,n),Zh(e),n;if(144===r)t.skip(1),n=$h(t).value,e.g&&(e.g.o=0<(n&128),e.g.u=0<(n&64));else if(145===r)n=$h(t).value,r=$h(t).value,t.skip(1),e.g&&(t=em((r&48)>>4,(r&12)>>2,r&3),e.g.s=em((n&48)>>4,(n&12)>>2,n&3),e.g.m=t);else if(146===r)n=$h(t).value,t=$h(t).value,e.g&&(e=e.g,e.h=n&15,e.g=t&63);else if(151===r)t.skip(1),t.skip(1),n=$h(t).value,t.skip(1),e.g&&(e.g.D=n&3);else if(152<=r&&159>=r){r=(r&15)-8;i=null!==e.h[r];if(!i){var o=new Lh;o.j=n;e.h[r]=o}n=$h(t).value;$h(t);$h(t);o=$h(t).value;var a=$h(t).value;t=$h(t).value;i&&0===(t&7)||(t=e.h[r],t.h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black");t=e.h[r];t.l=0<(n&32);t.F=(o&15)+1;t.A=(a&63)+1;e.g=e.h[r]}}}return null}function Qh(e,t){for(var r=[],n=0;8>n;n++)1===(t&1)&&e.h[n]&&r.push(n),t>>=1;return r}function Jh(e,t,r){var n=null;t=u(Qh(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(n=Fh(o,r,e.i));e.h[i]=null}return n}function Zh(e){e.g=null;e.h=[null,null,null,null,null,null,null,null]}function em(e,t,r){var n={0:0,1:0,2:1,3:1};e=n[e];t=n[t];r=n[r];return rm[e<<2|t<<1|r]}var tm=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),rm="black blue green cyan red magenta yellow white".split(" ");function nm(){this.h=[];this.g=[];this.i=new Wh;this.l=0;this.m=new Map([["CC1",new Ch(0,0)],["CC2",new Ch(0,1)],["CC3",new Ch(1,0)],["CC4",new Ch(1,1)]]);this.s=this.o=0;this.j=new Map;this.u=!0;im(this)}nm.prototype.clear=function(){this.l=0;this.h=[];this.g=[];var e=this.i;e.i=[];e.h=[];e.g=0;im(this);e=u(this.j.values());for(var t=e.next();!t.done;t=e.next())Zh(t.value)};function im(e){e.o=0;e.s=0;for(var t=u(e.m.values()),r=t.next();!r.done;r=t.next())r=r.value,r.h=Ph,r.g=r.j,r.m=null,mh(r.i),mh(r.j),mh(r.o);e.u=!0}nm.prototype.extract=function(e,t){if(this.u){for(var r=u(this.m.values()),n=r.next();!n.done;n=r.next())n.value.l=t;this.u=!1}e=new _i(e,0);if(181===e.qa()&&49===e.Ia()&&1195456820===e.J()&&3===e.qa()&&(r=e.qa(),0!==(r&64)))for(r&=31,e.skip(1),n=0;n<r;n++){var i=e.qa(),o=(i&4)>>2,a=e.qa(),s=e.qa();o&&(i&=3,0===i||1===i?this.h.push({pts:t,type:i,Ea:a,Za:s,order:this.h.length}):(this.g.push({pts:t,type:i,value:a,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}};nm.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e);this.g.sort(e);for(var r=u(this.h),n=r.next();!n.done;n=r.next())(n=om(this,n.value))&&t.push(n);r=u(this.g);for(n=r.next();!n.done;n=r.next())Gh(this.i,n.value);r=u(this.i.i);for(n=r.next();!n.done;n=r.next())n=am(this,n.value),t.push.apply(t,p(n));this.i.i=[];this.h=[];this.g=[];return t};function om(e,t){var r=t.type;if(16===(t.Ea&112)){var n=t.Ea>>3&1;0===r?e.o=n:e.s=n}r=e.m.get("CC"+(r<<1|(r?e.s:e.o)+1));if(255===t.Ea&&255===t.Za||!t.Ea&&!t.Za||!sm(t.Ea)||!sm(t.Za))return 45<=++e.l&&im(e),null;e.l=0;t.Ea&=127;t.Za&=127;if(!t.Ea&&!t.Za)return null;e=null;if(16===(t.Ea&112))e:{n=t.Ea;e=t.Za;if(r.m===(n<<8|e))r.m=null;else if(r.m=n<<8|e,16===(n&240)&&64===(e&192)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(n&7)<<1|e>>5&1];var i=(e&30)>>1;n="white";var o=!1;7>i?n=Nh[i]:7===i&&(o=!0);e=1===(e&1);r.h!==jh&&(i=r.g,r.h===Ih&&t!==i.g&&(r=1+t-i.h,gh(i,r,1+i.g-i.h,i.h),yh(i,0,r-1),yh(i,t+1,15-t)),i.g=t,i.m=e,i.j=o,i.l=n,i.o="black")}else if(17===(n&247)&&32===(e&240))r.g.m=!1,r.g.j=!1,r.g.l="white",fh(r.g,bh,32),n=!1,t=Nh[(e&14)>>1],"white_italics"===t&&(t="white",n=!0),r.g.m=1===(e&1),r.g.j=n,r.g.l=t;else if(16===(n&247)&&32===(e&240)||23===(n&247)&&45===(e&255))t="black",0===(n&7)&&(t=Rh[(e&14)>>1]),r.g.o=t;else if(17===(n&247)&&48===(e&240))fh(r.g,vh,e);else if(18===(n&246)&&32===(e&224))fh(r.g,n&1?Eh:wh,e);else if(20===(n&246)&&32===(e&240)){e=t.pts;n=null;switch(t.Za){case 32:Oh(r);break;case 33:r=r.g;r.i[r.g].pop();break;case 37:n=Th(r,2,e);break;case 38:n=Th(r,3,e);break;case 39:n=Th(r,4,e);break;case 40:fh(r.g,bh,32);break;case 41:r.h=2;r.g=r.i;r.g.h=0;r.l=e;break;case 42:mh(r.o);kh(r);break;case 43:kh(r);break;case 44:t=r.i;n=null;r.h!==jh&&(n=hh(t,r.l,e));yh(t,0,15);break;case 45:t=r.g;r.h!==Ih?n=null:(n=hh(t,r.l,e),o=t.g-t.h+1,gh(t,o-1,o,t.h),yh(t,0,o-1),yh(t,t.g,15-t.g),r.l=e);break;case 46:yh(r.j,0,15);break;case 47:t=null,r.h!==jh&&(t=hh(r.i,r.l,e)),n=r.j,r.j=r.i,r.i=n,Oh(r),r.l=e,n=t}e=n;break e}e=null}else n=t.Za,fh(r.g,bh,t.Ea),fh(r.g,bh,n);return e}function am(e,t){var r=[];try{for(;t.ha();){var n=$h(t).value,i=(n&224)>>5,o=n&31;7===i&&0!=o&&(i=$h(t).value&63);if(0!=i){e.j.has(i)||e.j.set(i,new Xh(i));for(var a=e.j.get(i),s=t.fa();t.fa()-s<o;){i=t;var l=$h(i),c=l.value,u=l.pts;if(16===c){var p=$h(i);c=c<<16|p.value}if(0<=c&&31>=c){var d=u;if(a.g){var h=a.g;i=null;switch(c){case 8:!Hh(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.A-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:h.isVisible()&&(i=Fh(h,d,a.i));if(h.h+1>=h.F){d=h;for(var m=0,f=1;16>f;f++,m++)d.i[m]=d.i[f];for(f=0;1>f;f++,m++)d.i[m]=qh()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(i=Fh(h,d,a.i));h.i[h.h]=qh();h.g=0;break;case 12:h.isVisible()&&(i=Fh(h,d,a.i)),Mh(h),d=h,d.h=0,d.g=0}var g=i}else g=null}else if(128<=c&&159>=c)g=Yh(a,i,c,u);else{if(4096<=c&&4127>=c)d=c&255,8<=d&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=c&&4255>=c)d=c&255,128<=d&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=c&&127>=c)i=c,a.g&&(127===i?Uh(a.g,"♪"):Uh(a.g,String.fromCharCode(i)));else if(160<=c&&255>=c)a.g&&Uh(a.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(i=c&255,a.g)if(tm.has(i)){var y=tm.get(i);Uh(a.g,y)}else Uh(a.g,"_")}else 4256<=c&&4351>=c&&a.g&&(160!=(c&255)?Uh(a.g,"_"):Uh(a.g,"[CC]"));g=null}(i=g)&&r.push(i)}}}}catch(e){if(e instanceof dt&&3e3===e.code)J("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw e}return r}function sm(e){for(var t=0;e;)t^=e&1,e>>=1;return 1===t}V("shaka.cea.CeaDecoder",nm);be=function(){return new nm};function lm(e){for(var t=[],r=e,n=e=0;n<r.length;)2==e&&3==r[n]?(e=0,r=[].concat(p(r)),r.splice(n,1),r=new Uint8Array(r)):0==r[n]?e++:e=0,n++;e=r;for(n=0;n<e.length;){for(r=0;255==e[n];)r+=255,n++;r+=e[n++];for(var i=0;255==e[n];)i+=255,n++;i+=e[n++];4==r&&t.push(e.subarray(n,n+i));n+=i}return t}function cm(){this.j=new Map;this.i=this.h=0;this.g=pm}cm.prototype.init=function(e){function t(e){e=e.name;e in mm&&(r.g=mm[e])}var r=this,n=[],i=[];(new Ci).box("moov",Ti).box("mvex",Ti).M("trex",(function(e){var t=e.reader;t.skip(4);t.skip(4);e=t.J();t=t.J();r.h=e;r.i=t})).box("trak",Ti).M("tkhd",(function(e){e=Ia(e.reader,e.version);n.push(e.trackId)})).box("mdia",Ti).M("mdhd",(function(e){e=Pa(e.reader,e.version);i.push(e.timescale)})).box("minf",Ti).box("stbl",Ti).M("stsd",Oi).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",ki).box("sinf",Ti).box("frma",(function(e){e=Na(e.reader).oa;e in mm&&(r.g=mm[e])})).parse(e,!0);if(!n.length||!i.length||n.length!=i.length)throw new dt(2,2,2010);this.g==pm&&Q("Unable to determine bitstream format for CEA parsing!");n.forEach((function(e,t){r.j.set(e,i[t])}))};cm.prototype.parse=function(e){var t=this;if(this.g==pm)return[];var r=[],n=this.h,i=this.i,o=0,a=[],s=null,l=9e4;(new Ci).box("moof",(function(e){o=e.start;a=[];Ti(e)})).box("traf",Ti).M("trun",(function(e){e=Aa(e.reader,e.version,e.flags);a.push(e)})).M("tfhd",(function(e){e=Oa(e.reader,e.flags);n=e.ff||t.h;i=e.eg||t.i;e=e.trackId;t.j.has(e)&&(l=t.j.get(e))})).M("tfdt",(function(e){s=ka(e.reader,e.version).baseMediaDecodeTime})).box("mdat",(function(e){if(null===s)throw Q("Unable to find base media decode time for CEA captions!"),new dt(2,2,2010);um(t,e.reader,s,l,n,i,o-e.start-8,a,r)})).parse(e,!1);return r};function um(e,t,r,n,i,o,a,s,l){var c=0,d=o,h=s.map((function(e){return e.Af}));h=[].concat.apply([],p(h));h.length&&(d=h[0].sampleSize||o);for(t.skip(a+s[0].dg);t.ha();){a=t.J();var m=t.qa(),f=null;f=!1;s=1;switch(e.g){case dm:f=m&31;f=6==f;break;case hm:s=2;t.skip(1);f=m>>1&63;f=39==f||40==f;break;default:return}if(f)for(m=0,c<h.length&&(m=h[c].Md||0),m=(r+m)/n,s=u(lm(t.jb(a-s))),f=s.next();!f.done;f=s.next())l.push({packet:f.value,pts:m});else try{t.skip(a-s)}catch(e){break}d-=a+4;0==d&&(r=c<h.length?r+(h[c].Ie||i):r+i,c++,c<h.length?d=h[c].sampleSize||o:d=o)}}V("shaka.cea.Mp4CeaParser",cm);var pm=0,dm=1,hm=2,mm={avc1:dm,avc3:dm,hev1:hm,hvc1:hm,dvh1:hm,dvhe:hm};ye["video/mp4"]=function(){return new cm};function fm(){}fm.prototype.init=function(){};fm.prototype.parse=function(e){var t=[];e=de(e);if(!Ka(e))return t;e=(new Wa).parse(e).ge();e=u(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,6==r.type&&null!=r.time)for(var n=u(lm(r.data)),i=n.next();!i.done;i=n.next())t.push({packet:i.value,pts:r.time});return t};V("shaka.cea.TsCeaParser",fm);ye["video/mp2t"]=function(){return new fm};function gm(e,t,r){var n=Sm(e),i=null;e=[];var o=[],a=new Set(n.map((function(e){return e.keyId})));a.delete(null);if(1<a.size)throw new dt(2,4,4010);t||(o=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Je?(i=e.init||i,!1):!0})),o.length&&(e=Em(i,o,r,a),0==e.length&&(e=[bt("",i)])));if(n.length&&(t||!o.length))for(e=[],t=u(Object.values(r)),r=t.next();!r.done;r=t.next())r=r.value,"org.w3.clearkey"!=r&&e.push(bt(r,i));if(a=Array.from(a)[0]||null)for(t=u(e),r=t.next();!r.done;r=t.next())for(r=u(r.value.initData),n=r.next();!n.done;n=r.next())n.value.keyId=a;return{ef:a,di:i,drmInfos:e,jf:!0}}function ym(e,t,r,n){var i=gm(e,r,n);if(t.jf){e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem;r=0==i.drmInfos.length;if(0==t.drmInfos.length||e&&!r)t.drmInfos=i.drmInfos;t.jf=!1}else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new dt(2,4,4008);return i.ef||t.ef}function bm(e){var t=0,r=he(e),n=r.getUint32(t,!0);if(n!=e.byteLength)return[];e:{e=t+6;for(t=[];e<r.byteLength-1;){n=r.getUint16(e,!0);e+=2;var i=r.getUint16(e,!0);e+=2;if(0!=(i&1)||i+e>r.byteLength){r=[];break e}var o=de(r,e,i);t.push({type:n,value:o});e+=i}r=t}return r}function vm(e){e=u(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=u(t.value.childNodes);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r instanceof Element&&"LA_URL"==r.tagName)return r.textContent}return""}function wm(e){var t=Gi(e.node,"https://dashif.org/CPS","Laurl");if(t&&t.textContent)return t.textContent;e=Gi(e.node,"urn:microsoft:playready","pro");if(!e)return"";e=Ui(e.textContent);e=bm(e).filter((function(e){return e.type===xm}))[0];if(!e)return"";e=bi(e.value,!0);return(e=uo(e,"WRMHEADER"))?vm(e):""}function Em(e,t,r,n){var i=[];t=u(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var a=r[o.Je];if(a){var s;if(s=Gi(o.node,"urn:microsoft:playready","pro")){s=Ui(s.textContent);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:Vi(s,l,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else s=null;l=null;if("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.Je)if(l=n,0==l.size)l=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),p=new Uint8Array([]);l=[{initData:Vi(p,c,l,1),initDataType:"cenc",keyId:o.keyId}]}s=bt(a,o.init||e||s||l);if(a=Dm.get(a))s.licenseServerUri=a(o);i.push(s)}}return i}function Sm(e){var t=[];e=u(e);for(var r=e.next();!r.done;r=e.next())(r=_m(r.value))&&t.push(r);return t}function _m(e){var t=e.getAttribute("schemeIdUri"),r=Yi(e,"urn:mpeg:cenc:2013","default_KID"),n=Xi(e,"urn:mpeg:cenc:2013","pssh").map(Ji);if(!t)return null;t=t.toLowerCase();if(r&&(r=r.replace(/-/g,"").toLowerCase(),r.includes(" ")))throw new dt(2,4,4009);var i=[];try{i=n.map((function(e){return{initDataType:"cenc",initData:Ui(e),keyId:null}}))}catch(e){throw new dt(2,4,4007)}return{node:e,Je:t,keyId:r,init:0<i.length?i:null}}var xm=1,Dm=(new Map).set("com.widevine.alpha",(function(e){var t=Gi(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Gi(e.node,"urn:microsoft","laurl"))?e.getAttribute("licenseUrl")||"":""})).set("com.microsoft.playready",wm).set("com.microsoft.playready.recommendation",wm).set("com.microsoft.playready.software",wm).set("com.microsoft.playready.hardware",wm).set("org.w3.clearkey",(function(e){var t=Gi(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=Gi(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function Cm(t,r,n,i,o){var a={RepresentationID:r,Number:n,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,r,n,i){if("$$"==t)return"$";var o=a[r];if(null==o)return t;"RepresentationID"==r&&n&&(n=void 0);"Time"==r&&(o=Math.round(o));switch(i){case void 0:case"d":case"i":case"u":t=o.toString();break;case"o":t=o.toString(8);break;case"x":t=o.toString(16);break;case"X":t=o.toString(16).toUpperCase();break;default:t=o.toString()}n=e.parseInt(n,10)||1;return Array(Math.max(0,n-t.length)+1).join("0")+t}))}function Tm(e,t){var r=Om(e,t,"timescale"),n=1;r&&(n=oo(r)||1);var i=Om(e,t,"duration");r=oo(i||"");"image"==e.I.contentType&&(r=so(i||""));r&&(r/=n);var o=Om(e,t,"startNumber");i=Number(Om(e,t,"presentationTimeOffset"))||0;var a=ao(o||"");if(null==o||null==a)a=1;o=km(e,t,"SegmentTimeline");t=null;if(o){t=n;e=e.V.duration||Infinity;o=Ki(o,"S");for(var s=[],l=-i,c=0;c<o.length;++c){var u=o[c],p=o[c+1],d=eo(u,"t",ao),h=eo(u,"d",ao);u=eo(u,"r",io);null!=d&&(d-=i);if(!h)break;d=null!=d?d:l;u=u||0;if(0>u)if(p){p=eo(p,"t",ao);if(null==p)break;else if(d>=p)break;u=Math.ceil((p-d)/h)-1}else{if(Infinity==e)break;else if(d/t>=e)break;u=Math.ceil((e*t-d)/h)-1}0<s.length&&d!=l&&(s[s.length-1].end=d/t);for(p=0;p<=u;++p)l=d+h,s.push({start:d/t,end:l/t,Ve:d}),d=l}t=s}return{timescale:n,ka:r,hc:a,kb:i/n||0,Ue:i,timeline:t}}function Om(e,t,r){return[t(e.I),t(e.da),t(e.ga)].filter(gt).map((function(e){return e.getAttribute(r)})).reduce((function(e,t){return e||t}))}function km(e,t,r){return[t(e.I),t(e.da),t(e.ga)].filter(gt).map((function(e){return Wi(e,r)})).reduce((function(e,t){return e||t}))}function Pm(e,t,r,n,i,o){for(var a=Yi(e,"http://www.w3.org/1999/xlink","href"),s=Yi(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())c=c.value,"http://www.w3.org/1999/xlink"==c.namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=o)return In(new dt(2,4,4028));if("onLoad"!=s)return In(new dt(2,4,4027));var p=yt([n],[a]);return i.request(0,$n(p,t)).ea((function(n){n=po(n.data,e.tagName);if(!n)return In(new dt(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;n.childNodes.length;){var s=n.childNodes[0];n.removeChild(s);e.appendChild(s)}n=u(Array.from(n.attributes));for(s=n.next();!s.done;s=n.next())e.setAttributeNode(s.value.cloneNode(!1));return Am(e,t,r,p[0],i,o+1)}))}function Am(e,t,r,n,i,o){o=void 0===o?0:o;if(Yi(e,"http://www.w3.org/1999/xlink","href")){var a=Pm(e,t,r,n,i,o);r&&(a=a.ea(void 0,(function(){return Am(e,t,r,n,i,o)})));return a}a=[];for(var s=u(Array.from(e.childNodes)),l=s.next();!l.done;l=s.next())l=l.value,l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Yi(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&a.push(Am(l,t,r,n,i,o)));return Ln(a).ea((function(){return e}))}function Im(e,t,r,n,i,o,a){var s,l=(new Ci).M("sidx",(function(e){s=jm(t,n,i,o,a,r,e)}));e&&l.parse(e);if(s)return s;throw new dt(2,3,3004)}function jm(e,t,r,n,i,o,a){var s=[];a.reader.skip(4);var l=a.reader.J();if(0==l)throw new dt(2,3,3005);if(0==a.version){var c=a.reader.J();var u=a.reader.J()}else c=a.reader.dc(),u=a.reader.dc();a.reader.skip(2);var p=a.reader.Ia();e=e+a.size+u;for(u=0;u<p;u++){var d=a.reader.J(),h=(d&2147483648)>>>31;d&=2147483647;var m=a.reader.J();a.reader.skip(4);if(1==h)throw new dt(2,3,3006);s.push(new ha(c/l+r,(c+m)/l+r,(function(){return o}),e,e+d-1,t,r,n,i));c+=m;e+=d}a.parser.stop();return s}function Rm(e){this.h=he(e);this.g=new _i(this.h,0)}Rm.prototype.ha=function(){return this.g.ha()};function Nm(e){var t=Lm(e);if(7<t.length)throw new dt(2,3,3002);var r=0;t=u(t);for(var n=t.next();!n.done;n=t.next())r=256*r+n.value;t=Lm(e);e:{n=u(Mm);for(var i=n.next();!i.done;i=n.next())if(ce(t,new Uint8Array(i.value))){n=!0;break e}n=!1}if(n)t=e.h.byteLength-e.g.fa();else{if(8==t.length&&t[1]&224)throw new dt(2,3,3001);for(i=n=0;i<t.length;i++){var o=t[i];n=0==i?o&(1<<8-t.length)-1:256*n+o}t=n}t=e.g.fa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.fa();n=he(e.h,e.g.fa(),t);e.g.skip(t);return new qm(r,n)}function Lm(e){var t=e.g.fa(),r=e.g.qa();if(0==r)throw new dt(2,3,3002);r=8-Math.floor(Math.log2(r));e.g.skip(r-1);return de(e.h,t,r)}var Mm=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function qm(e,t){this.id=e;this.g=t}function Um(e){if(8<e.g.byteLength)throw new dt(2,3,3002);if(8==e.g.byteLength&&e.g.getUint8(0)&224)throw new dt(2,3,3001);for(var t=0,r=0;r<e.g.byteLength;r++){var n=e.g.getUint8(r);t=256*t+n}return t}function Hm(e,t,r,n,i,o,a,s,l){function c(){return i}var u=[];e=new Rm(e.g);for(var p=null,d=null;e.ha();){var h=Nm(e);if(187==h.id){var m=Fm(h);m&&(h=r*m.ph,m=t+m.Zg,null!=p&&u.push(new ha(p+a,h+a,c,d,m-1,o,a,s,l)),p=h,d=m)}}null!=p&&u.push(new ha(p+a,n+a,c,d,null,o,a,s,l));return u}function Fm(e){var t=new Rm(e.g);e=Nm(t);if(179!=e.id)throw new dt(2,3,3013);e=Um(e);t=Nm(t);if(183!=t.id)throw new dt(2,3,3012);t=new Rm(t.g);for(var r=0;t.ha();){var n=Nm(t);if(241==n.id){r=Um(n);break}}return{ph:e,Zg:r}}function Bm(e,t){t=km(e,t,"Initialization");if(!t)return null;var r=e.I.Da,n=t.getAttribute("sourceURL");n&&(r=yt(e.I.Da,[n]));n=0;var i=null;if(t=eo(t,"range",no))n=t.start,i=t.end;return new pa((function(){return r}),n,i,Xm(e))}function zm(e,t){var r=Number(Om(e,Wm,"presentationTimeOffset"))||0,n=Om(e,Wm,"timescale"),i=1;n&&(i=oo(n)||1);var o=r/i||0,a=Bm(e,Wm);Km(e,a);var s=zn(e);return{Xb:function(){var e=km(s,Wm,"RepresentationIndex");var r=s.I.Da;e&&(e=e.getAttribute("sourceURL"))&&(r=yt(s.I.Da,[e]));e=Gm(s);return Vm(s,t,a,r,e.start,e.end,o)}}}function Vm(e,t,r,n,i,o,a){var s,l,c,u,p,d,h,m,f,g,y,b,v,w,E;return L((function(_){if(1==_.g)return s=e.presentationTimeline,l=!e.qb||!e.V.ie,c=e.V.start,u=e.V.duration,p=e.I.mimeType.split("/")[1],d=t,h=null,m=[d(n,i,o,!1),"webm"==p?d(r.wa(),r.Ba,r.ia,!0):null],d=null,S(_,Promise.all(m),2);f=_.h;g=f[0];y=f[1]||null;b=null;v=c-a;w=c;E=u?c+u:Infinity;if("mp4"==p)var x=Im(g,i,n,r,v,w,E);else{x=new Rm(y);if(440786851!=Nm(x).id)throw new dt(2,3,3008);var D=Nm(x);if(408125543!=D.id)throw new dt(2,3,3009);x=D.g.byteOffset;D=new Rm(D.g);for(var C=null;D.ha();){var T=Nm(D);if(357149030==T.id){C=T;break}}if(!C)throw new dt(2,3,3010);C=new Rm(C.g);T=1e6;for(D=null;C.ha();){var O=Nm(C);if(2807729==O.id)T=Um(O);else if(17545==O.id)if(4==O.g.byteLength)D=O.g.getFloat32(0);else if(8==O.g.byteLength)D=O.g.getFloat64(0);else throw new dt(2,3,3003)}if(null==D)throw new dt(2,3,3011);C=T/1e9;D*=C;T=Nm(new Rm(g));if(475249515!=T.id)throw new dt(2,3,3007);x=Hm(T,x,C,D,n,r,v,w,E)}b=x;s.Pc(b);h=new el(b);l&&h.Vb(w,E,!0);return _.return(h)}))}function Wm(e){return e.Vc}function Gm(e){var t=km(e,Wm,"RepresentationIndex");e=Om(e,Wm,"indexRange");e=no(e||"");t&&(e=eo(t,"range",no,e));return e}function Km(e,t){$m(e,t);if(!Gm(e))throw new dt(2,4,4002)}function $m(e,t){var r=e.I.mimeType.split("/")[1];if(e.I.contentType!=Et&&"mp4"!=r&&"webm"!=r)throw new dt(2,4,4006);if("webm"==r&&!t)throw new dt(2,4,4005)}function Xm(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Hd,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function Ym(e,t){var r=Bm(e,Qm),n=Jm(e);if(!n.ka&&!n.timeline&&1<n.ac.length)throw new dt(2,4,4002);if(!n.ka&&!e.V.duration&&!n.timeline&&1==n.ac.length)throw new dt(2,4,4002);if(n.timeline&&0==n.timeline.length)throw new dt(2,4,4002);var i=null,o=null;e.ga.id&&e.I.id&&(o=t[e.ga.id+","+e.I.id])&&(i=o.segmentIndex);var a=Zm(e.V.start,e.V.duration,e.I.Da,n,r);t=!i;i?i.Oc(a,e.presentationTimeline.eb()):i=new el(a);e.presentationTimeline.Pc(a);e.qb&&e.V.ie||i.Vb(e.V.start,e.V.duration?e.V.start+e.V.duration:Infinity,t);o&&(o.segmentIndex=i);return{Xb:function(){i&&0!=i.Bb()||i.Fd(a);return Promise.resolve(i)}}}function Qm(e){return e.ub}function Jm(e){var t=ef(e);e=Tm(e,Qm);var r=e.hc;0==r&&(r=1);var n=0;e.ka?n=e.ka*(r-1):e.timeline&&0<e.timeline.length&&(n=e.timeline[0].start);return{ka:e.ka,startTime:n,hc:r,kb:e.kb,timeline:e.timeline,ac:t}}function Zm(e,t,r,n,i){var o=n.ac.length;n.timeline&&n.timeline.length!=n.ac.length&&(o=Math.min(n.timeline.length,n.ac.length));for(var a=e-n.kb,s=t?e+t:Infinity,l=[],c=n.startTime,u={},p=0;p<o;u={vc:u.vc,tc:u.tc},p++){u.tc=n.ac[p];var d=void 0;d=null!=n.ka?c+n.ka:n.timeline?n.timeline[p].end:c+t;u.vc=null;l.push(new ha(e+c,e+d,function(e){return function(){null==e.vc&&(e.vc=yt(r,[e.tc.Rg]));return e.vc}}(u),u.tc.start,u.tc.end,i,a,e,s));c=d}return l}function ef(e){return[e.I.ub,e.da.ub,e.ga.ub].filter(gt).map((function(e){return Ki(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.pf&&(e.pf=!0);var r=t.getAttribute("media");t=eo(t,"mediaRange",no,{start:0,end:null});return{Rg:r,start:t.start,end:t.end}}))}function tf(e,t,r,n,i,o){var a=sf(e),s=nf(e);of(s);var l=zn(e);if(s.Nc)return $m(e,a),{Xb:function(){var e=Cm(s.Nc,l.I.id,null,l.bandwidth||null,null);e=yt(l.I.Da,[e]);return Vm(l,t,a,e,0,null,s.kb)}};if(s.ka)return n||"image"===e.da.contentType||(e.presentationTimeline.ve(s.ka),e.presentationTimeline.Gd(e.V.start)),{Xb:function(){return af(l,s,i,a,o)}};var c=null;n=n=null;e.ga.id&&e.I.id&&(n=e.ga.id+","+e.I.id,n=r[n])&&(c=n.segmentIndex);var u=e.V.start,p=e.V.duration?u+e.V.duration:Infinity,d=!(e.qb&&e.V.ie);c?(r=c,cf(r,s,u,p,d),r.Sa(e.presentationTimeline.eb())):c=new lf(s,e.I.id,e.bandwidth,e.I.Da,u,p,a,d);s.timeline&&"image"!==e.da.contentType&&e.presentationTimeline.xf(s.timeline,u);n&&e.qb&&(n.segmentIndex=c);return{Xb:function(){c instanceof lf&&0==c.Bb()&&cf(c,s,u,p,d);return Promise.resolve(c)}}}function rf(e){return e.Wc}function nf(e){var t=Tm(e,rf),r=Om(e,rf,"media");e=Om(e,rf,"index");return{ka:t.ka,timescale:t.timescale,hc:t.hc,kb:t.kb,Ue:t.Ue,timeline:t.timeline,se:r,Nc:e}}function of(e){var t=e.Nc?1:0;t+=e.timeline?1:0;t+=e.ka?1:0;if(0==t)throw new dt(2,4,4002);1!=t&&(e.Nc&&(e.timeline=null),e.ka=null);if(!e.Nc&&!e.se)throw new dt(2,4,4002)}function af(e,t,r,n,i){function o(e){var r=(e-m)*h,i=r+t.kb,o=r+c;r=o+h;var a=Math.min(r,s());o=new ha(o,a,(function(){var t=Cm(g,b,e,y,i*f);return yt(v,[t])}),0,null,n,w,c,s());o.j=r;return o}function a(){var e=[Math.max(l.eb(),c),Math.min(l.Cb(),s())].map((function(e){return e-c}));return[Math.ceil(e[0]/h),Math.ceil(e[1]/h)-1].map((function(e){return e+m}))}function s(){var e=null!=p&&i[p]||d;return e?c+e:Infinity}var l=e.presentationTimeline,c=e.V.start,p=e.ga.id,d=e.V.duration,h=t.ka,m=t.hc,f=t.timescale,g=t.se,y=e.bandwidth||null,b=e.I.id,v=e.I.Da,w=c-t.kb,E=a();e=e.qb?Math.max(E[0],E[1]-r+1):E[0];E=E[1];r=[];for(var S=e;S<=E;++S){var _=o(S);r.push(_)}var x=new el(r);r=l.Cb()<s();S=l.T();if(r||S){var D=Math.max(e,E+1);x.Pd(h,(function(){var e=l.eb();x.Sa(e);var t=u(a());t.next();t=t.next().value;for(var r=[];D<=t;){var n=o(D);r.push(n);D++}return e>s()&&!r.length?null:r}))}return Promise.resolve(x)}function sf(e){var t=Om(e,rf,"initialization");if(!t)return null;var r=e.I.id,n=e.bandwidth||null,i=e.I.Da;return new pa((function(){var e=Cm(t,r,null,n,null);return yt(i,[e])}),0,null,Xm(e))}function lf(e,t,r,n,i,o,a,s){el.call(this,[]);this.h=e;this.D=t;this.s=r;this.u=n;this.j=i;this.o=o;this.A=a;s&&uf(this)}b(lf,el);n=lf.prototype;n.Bb=function(){return this.h?this.h.timeline.length:0};n.release=function(){el.prototype.release.call(this);this.h=null};n.Sa=function(e){if(this.h){for(var t=0,r=this.h.timeline,n=0;n<r.length;n+=1)if(r[n].end+this.j<=e)t+=1;else break;0<t&&(this.h.timeline=r.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.Bb()&&this.release())}};function cf(e,t,r,n,i){if(e.h){r=e.h.timeline;var o=r[r.length-1];t=t.timeline.filter((function(e){return e.start>=o.end}));0<t.length&&e.h.timeline.push.apply(e.h.timeline,p(t));e.o!==n&&(e.o=n)}else e.h=t,e.j=r,e.o=n;i&&uf(e)}function uf(e){if(!e.m){for(var t=e.h.timeline;t.length;)if(t[t.length-1].start>=e.o)t.pop();else break;e.Sa(e.j);0!==t.length&&Infinity!==e.o&&(t[t.length-1].end=e.o-e.j)}}n.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>this.o)return null;for(var r=t.length-1,n=0;n<t.length;n++){var i=t[n],o=i.start+this.j;i=i.end+this.j;n<r&&(i=t[n+1].start+this.j);if(e>=o&&e<i)return n+this.i}return null};n.get=function(e){var t=this,r=e-this.i;if(0>r||r>=this.Bb()||!this.h)return null;var n=this.g[r];if(!n){n=this.h.timeline[r];var i=e+this.h.hc,o=this.h.Ue+n.Ve;n=new ha(this.j+n.start,this.j+n.end,(function(){return t.h?pf(t.h.se,t.D,i,t.s,o,t.u):[]}),0,null,this.A,this.j-this.h.kb,this.j,this.o);this.g[r]=n}return n};function pf(e,t,r,n,i,o){e=Cm(e,t,r,n||null,i);return yt(o,[e]).map((function(e){return e.toString()}))}function df(){this.j=[];this.g=[];this.i=[];this.l=[];this.h=[];this.m=new Set}n=df.prototype;n.release=function(){for(var e=u(this.g.concat(this.i,this.l,this.h)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[];this.i=[];this.l=[];this.h=[];this.j=[]};n.Eg=function(){return this.j};n.ee=function(){return this.l.slice()};n.mg=function(){return this.h};n.bf=function(e,t){var r=this,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P,A,I,j,R,N;return L((function(L){switch(L.g){case 1:n=St;hf(e);ff(e);mf(e);gf(e);if(!t&&1==e.length){i=e[0];r.g=i.audioStreams;r.i=i.videoStreams;r.l=i.textStreams;r.h=i.imageStreams;L.B(2);break}o=-1;for(a=0;a<e.length;a++)s=e[a],r.m.has(s.id)||(r.m.add(s.id),-1==o&&(o=a));if(-1==o)return L.return();l=e.map((function(e){return e.audioStreams}));c=e.map((function(e){return e.videoStreams}));p=e.map((function(e){return e.textStreams}));d=e.map((function(e){return e.imageStreams}));h=u(p);for(m=h.next();!m.done;m=h.next())f=m.value,f.push(Lf(n.ca));g=u(d);for(y=g.next();!y.done;y=g.next())b=y.value,b.push(Lf(n.wc));return S(L,bf(r.g,l,o,_f,Df),3);case 3:return S(L,bf(r.i,c,o,_f,Df),4);case 4:return S(L,bf(r.l,p,o,_f,Df),5);case 5:return S(L,bf(r.h,d,o,_f,Df),2);case 2:v=0;w=[];if(r.i.length&&r.g.length)for(O=u(r.g),k=O.next();!k.done;k=O.next())for(P=k.value,A=u(r.i),I=A.next();!I.done;I=A.next())j=I.value,R=zo(P.drmInfos,j.drmInfos),P.drmInfos.length&&j.drmInfos.length&&!R.length||(N=v++,w.push({id:N,language:P.language,disabledUntilTime:0,primary:P.primary,audio:P,video:j,bandwidth:(P.bandwidth||0)+(j.bandwidth||0),drmInfos:R,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(E=r.i.concat(r.g),x=u(E),D=x.next();!D.done;D=x.next())C=D.value,T=v++,w.push({id:T,language:C.language,disabledUntilTime:0,primary:C.primary,audio:C.type==n.pb?C:null,video:C.type==n.va?C:null,bandwidth:C.bandwidth||0,drmInfos:C.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.j=w;_(L)}}))};function hf(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.audioStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.channelsCount==s.channelsCount&&i.language==s.language&&i.bandwidth==s.bandwidth&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&Ee(i.roles,s.roles)&&i.audioSamplingRate==s.audioSamplingRate&&i.primary==s.primary&&(o=!0);o||r.push(i)}t.audioStreams=r}}function mf(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.language==s.language&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.bandwidth==s.bandwidth&&Ee(i.roles,s.roles)&&(o=!0);o||r.push(i)}t.textStreams=r}}function ff(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.videoStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.frameRate==s.frameRate&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.label==s.label&&Ee(i.roles,s.roles)&&fi(i.closedCaptions,s.closedCaptions)&&i.bandwidth==s.bandwidth&&(o=!0);o||r.push(i)}t.videoStreams=r}}function gf(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.imageStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&(o=!0);o||r.push(i)}t.imageStreams=r}}function yf(e){var t,r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,_,x,D,C,T,O,k;return L((function(P){switch(P.g){case 1:t=St;if(1==e.length)return P.return(e[0]);r=e.map((function(e){return e.filter((function(e){return e.type==t.pb}))}));n=e.map((function(e){return e.filter((function(e){return e.type==t.va}))}));i=e.map((function(e){return e.filter((function(e){return e.type==t.ca}))}));o=e.map((function(e){return e.filter((function(e){return e.type==t.wc}))}));a=u(i);for(s=a.next();!s.done;s=a.next())l=s.value,l.push(Nf(t.ca));c=u(o);for(p=c.next();!p.done;p=c.next())d=p.value,d.push(Nf(t.wc));return S(P,bf([],r,0,xf,Cf),2);case 2:return h=P.h,S(P,bf([],n,0,xf,Cf),3);case 3:return m=P.h,S(P,bf([],i,0,xf,Cf),4);case 4:return f=P.h,S(P,bf([],o,0,xf,Cf),5);case 5:g=P.h;y=0;if(m.length&&h.length)for(_=u(h),x=_.next();!x.done;x=_.next())for(D=x.value,C=u(m),T=C.next();!T.done;T=C.next())O=T.value,k=y++,O.variantIds.push(k),D.variantIds.push(k);else for(b=m.concat(h),v=u(b),w=v.next();!w.done;w=v.next())E=w.value,E.variantIds=[y++];return P.return(m.concat(h).concat(f).concat(g))}}))}function bf(e,t,r,n,i){var o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,_,x,D,C,T;return L((function(O){switch(O.g){case 1:o=St;a=[];for(s=0;s<t.length;s++)s>=r?a.push(new Set(t[s])):a.push(new Set);l=u(e);c=l.next();case 2:if(c.done){O.B(4);break}p=c.value;return S(O,vf(p,t,r,i,a),5);case 5:d=O.h;if(!d)throw new dt(2,4,4037);c=l.next();O.B(2);break;case 4:h=u(a);for(m=h.next();!m.done;m=h.next())for(f=m.value,g=u(f),y=g.next();!y.done;y=g.next())b=y.value,(v=Ef(b,t,n,i,a))&&e.push(v);w=u(a);for(m=w.next();!m.done;m=w.next())for(E=m.value,_={},x=u(E),y=x.next();!y.done;_={ob:_.ob},y=x.next())if(_.ob=y.value,D=_.ob.type==o.ca&&!_.ob.language,C=_.ob.type==o.wc&&!_.ob.tilesLayout,!D&&!C&&(T=e.some(function(e){return function(t){return t.mimeType==e.ob.mimeType&&Ot(t.codecs)==Ot(e.ob.codecs)}}(_))))throw new dt(2,4,4037);return O.return(e)}}))}function vf(e,t,r,n,i){return L((function(o){if(1==o.g)return Tf(t,e),e.matchedStreams?e.segmentIndex?S(o,wf(e,r),2):o.B(2):o.return(!1);Sf(e,r,n,i);return o.return(!0)}))}function wf(e,t){var r,n,i,o,a,s,l;return L((function(c){if(1==c.g){r=[];n=e.matchedStreams;i=u(n);for(o=i.next();!o.done;o=i.next())a=o.value,r.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&r.push(a.trickModeVideo.createSegmentIndex());return S(c,Promise.all(r),2)}if(e.segmentIndex instanceof il)for(s=t;s<n.length;s++)l=n[s],l.segmentIndex&&e.segmentIndex.h.push(l.segmentIndex);_(c)}))}function Ef(e,t,r,n,i){var o=r(e);Tf(t,o);o.createSegmentIndex&&(o.createSegmentIndex=function(){return L((function(e){if(o.segmentIndex)return e.B(0);o.segmentIndex=new il;return S(e,wf(o,0),0)}))});if(!o.matchedStreams||!o.matchedStreams.length)return null;Sf(o,0,n,i);return o}function Sf(e,t,r,n){for(var i=e.matchedStreams,o=0;o<i.length;o++)if(o>=t){var a=i[o];r(e,a);var s=!0;"audio"==e.type&&0==Wt(e.language,a.language)&&(s=!1);s&&n[o].delete(a)}}function _f(e){var t=Object.assign({},e);t.originalId=null;t.createSegmentIndex=function(){return Promise.resolve()};t.closeSegmentIndex=function(){t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null);if(t.matchedStreams)for(var e=u(t.matchedStreams),r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)};t.segmentIndex=null;t.emsgSchemeIdUris=[];t.keyIds=new Set;t.closedCaptions=null;t.trickModeVideo=null;return t}function xf(e){e=Object.assign({},e);e.keyIds=new Set;e.segments=[];e.variantIds=[];e.closedCaptions=null;return e}function Df(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));e.keyIds=function(e,t){return new Set([].concat(p(e),p(t)))}(e.keyIds,t.keyIds);null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var r=zo(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new dt(2,4,4038);e.drmInfos=r;e.encrypted=e.encrypted||t.encrypted;if(t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);r=u(t.closedCaptions);for(var n=r.next();!n.done;n=r.next()){var i=u(n.value);n=i.next().value;i=i.next().value;e.closedCaptions.set(n,i)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=_f(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){e.trickModeVideo.segmentIndex=e.segmentIndex.clone();return Promise.resolve()}),Df(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Df(e.trickModeVideo,t)}function Cf(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var r=t.keyIds;r=new Set([].concat(p(e.keyIds),p(r)));e.keyIds=r;e.encrypted=e.encrypted&&t.encrypted;e.segments.push.apply(e.segments,p(t.segments));if(t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=u(t.closedCaptions),r=t.next();!r.done;r=t.next()){var n=u(r.value);r=n.next().value;n=n.next().value;e.closedCaptions.set(r,n)}}function Tf(e,t){var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next()){var i=t,o={audio:Of,video:Of,text:kf,image:Pf}[i.type],a={audio:Af,video:If,text:jf,image:Rf}[i.type],s=null;n=u(n.value);for(var l=n.next();!l.done;l=n.next())l=l.value,!o(i,l)||s&&!a(i,s,l)||(s=l);i=s;if(!i)return;r.push(i)}t.matchedStreams=r}function Of(e,t){function r(e){if(!Bf.has(e)){var t=Ot(e);Bf.set(e,t)}return Bf.get(e)}return t.mimeType!=e.mimeType||r(t.codecs)!=r(e.codecs)||e.drmInfos&&!Bo(e.drmInfos,t.drmInfos)?!1:!0}function kf(e,t){return e.language?t.language?0==Wt(e.language,t.language)||t.kind!=e.kind?!1:!0:!0:!1}function Pf(e){return e.tilesLayout?!0:!1}function Af(e,t,r){if(e.id==r.id)return!0;var n=Wt(e.language,t.language),i=Wt(e.language,r.language);if(i>n)return!0;if(i<n)return!1;if(e.roles.length)return n=t.roles.filter((function(t){return e.roles.includes(t)})),i=r.roles.filter((function(t){return e.roles.includes(t)})),i.length>n.length?!0:i.length<n.length?!1:r.roles.length<t.roles.length;if(!r.roles.length&&t.roles.length)return!0;if(r.roles.length&&!t.roles.length)return!1;if(!t.primary&&r.primary)return!0;if(t.primary&&!r.primary)return!1;n=Mf(e.channelsCount,t.channelsCount,r.channelsCount);if(n==Uf)return!0;if(n==Ff)return!1;n=Mf(e.audioSamplingRate,t.audioSamplingRate,r.audioSamplingRate);return n==Uf?!0:n==Ff?!1:e.bandwidth&&qf(e.bandwidth,t.bandwidth,r.bandwidth)==Uf?!0:!1}function If(e,t,r){if(e.id==r.id)return!0;var n=Mf(e.width*e.height,t.width*t.height,r.width*r.height);if(n==Uf)return!0;if(n==Ff)return!1;if(e.frameRate){n=Mf(e.frameRate,t.frameRate,r.frameRate);if(n==Uf)return!0;if(n==Ff)return!1}return e.bandwidth&&qf(e.bandwidth,t.bandwidth,r.bandwidth)==Uf?!0:!1}function jf(e,t,r){if(e.id==r.id)return!0;var n=Wt(e.language,t.language),i=Wt(e.language,r.language);if(i>n)return!0;if(i<n)return!1;if(!t.primary&&r.primary)return!0;if(t.primary&&!r.primary)return!1;if(e.roles.length){n=t.roles.filter((function(t){return e.roles.includes(t)}));i=r.roles.filter((function(t){return e.roles.includes(t)}));if(i.length>n.length)return!0;if(i.length<n.length)return!1}else{if(!r.roles.length&&t.roles.length)return!0;if(r.roles.length&&!t.roles.length)return!1}return r.mimeType!=e.mimeType||r.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs?!1:!0}function Rf(e,t,r){return e.id==r.id?!0:Mf(e.width*e.height,t.width*t.height,r.width*r.height)==Uf?!0:!1}function Nf(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1}}function Lf(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new el([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1}}function Mf(e,t,r){if(t==e&&e!=r)return Ff;if(r==e&&e!=t)return Uf;if(t>e){if(r<=e||r-e<t-e)return Uf;if(r-e>t-e)return Ff}else{if(r>e)return Ff;if(e-r<e-t)return Uf;if(e-r>e-t)return Ff}return Hf}function qf(e,t,r){t=Math.abs(e-t);e=Math.abs(e-r);return e<t?Uf:t<e?Ff:Hf}V("shaka.util.PeriodCombiner",df);df.prototype.combinePeriods=df.prototype.bf;df.prototype.getImageStreams=df.prototype.mg;df.prototype.getTextStreams=df.prototype.ee;df.prototype.getVariants=df.prototype.Eg;var Uf=1,Hf=0,Ff=-1,Bf=new Map;function zf(){var e=this;this.h=this.g=null;this.s=[];this.i=null;this.H=1;this.l={};this.L={};this.j=new df;this.D=0;this.G=new G(5);this.F=new Jt((function(){Jf(e)}));this.u=new Vn;this.A=null;this.K=[];this.m=Infinity;this.o=!1}n=zf.prototype;n.configure=function(e){this.g=e};n.start=function(e,t){var r=this,n;return L((function(i){if(1==i.g)return r.o=t.isLowLatencyMode(),r.s=[e],r.h=t,S(i,Vf(r),2);n=i.h;r.h&&Zf(r,n);if(!r.h)throw new dt(2,7,7001);return i.return(r.i)}))};n.stop=function(){for(var e=u(Object.values(this.l)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.j&&this.j.release();this.g=this.h=null;this.s=[];this.i=null;this.l={};this.j=null;null!=this.F&&(this.F.stop(),this.F=null);return this.u.destroy()};n.update=function(){var e=this,t;return L((function(r){if(1==r.g)return x(r,2),S(r,Vf(e),4);if(2!=r.g)return C(r,0);t=T(r);if(!e.h||!t)return r.return();e.h.onError(t);_(r)}))};n.onExpirationUpdated=function(){};function Vf(e){var t,r,n,i,o,a,s;return L((function(l){if(1==l.g)return t=$n(e.s,e.g.retryParameters),r=e.h.networkingEngine,n=Date.now(),i=r.request(0,t,{type:4}),Wn(e.u,i),S(l,i.promise,2);if(3!=l.g){o=l.h;if(!e.h)return l.return(0);o.uri&&!e.s.includes(o.uri)&&e.s.unshift(o.uri);return S(l,Wf(e,o.data,o.uri),3)}a=Date.now();s=(a-n)/1e3;e.G.sample(1,s);return l.return(s)}))}function Wf(e,t,r){var n,i,o,a,s;return L((function(l){if(1==l.g){n=po(t,"MPD");if(!n)throw new dt(2,4,4001,r);if(i=e.g.dash.disableXlinkProcessing)return l.return(Gf(e,n,r));o=e.g.dash.xlinkFailGracefully;a=Am(n,e.g.retryParameters,o,r,e.h.networkingEngine);Wn(e.u,a);return S(l,a.promise,2)}s=l.h;return l.return(Gf(e,s,r))}))}function Gf(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P,A,I,j,R,N,M,q,U;return L((function(L){switch(L.g){case 1:(n=e.g.dash.manifestPreprocessor)&&n(t);i=[r];o=Ki(t,"Location").map(Ji).filter(gt);0<o.length&&(a=yt(i,o),i=e.s=a);s=Ki(t,"BaseURL");l=s.map(Ji);c=yt(i,l);p=0;s&&s.length&&(p=eo(s[0],"availabilityTimeOffset",so)||0);d=e.g.dash.ignoreMinBufferTime;h=0;d||(h=eo(t,"minBufferTime",ro)||0);e.D=eo(t,"minimumUpdatePeriod",ro,-1);m=eo(t,"availabilityStartTime",to);f=eo(t,"timeShiftBufferDepth",ro);g=e.g.dash.ignoreSuggestedPresentationDelay;y=null;g||(y=eo(t,"suggestedPresentationDelay",ro));b=e.g.dash.ignoreMaxSegmentDuration;v=null;b||(v=eo(t,"maxSegmentDuration",ro));w=t.getAttribute("type")||"static";if(e.i)for(E=e.i.presentationTimeline,x=u(Object.values(e.l)),D=x.next();!D.done;D=x.next())C=D.value,C.segmentIndex&&C.segmentIndex.Sa(E.eb());else T=e.g.defaultPresentationDelay||1.5*h,O=null!=y?y:T,E=new Is(m,O,e.g.dash.autoCorrectDrift);E.fc("static"==w);(k=E.T())&&!isNaN(e.g.availabilityWindowOverride)&&(f=e.g.availabilityWindowOverride);null==f&&(f=Infinity);E.Nd(f);P=t.getAttribute("profiles")||"";A={qb:"static"!=w,presentationTimeline:E,ga:null,V:null,da:null,I:null,bandwidth:0,pf:!1,Ub:p,profiles:P.split(",")};I=Kf(e,A,c,t);j=I.duration;R=I.periods;"static"!=w&&I.gf||E.Aa(j||Infinity);e.m&&!e.o&&(N=e.h.isAutoLowLatencyMode())&&(e.h.enableLowLatencyMode(),e.o=e.h.isLowLatencyMode());e.o?E.Ef(e.m):e.m&&Q("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");E.ve(v||1);return S(L,e.j.bf(R,A.qb),2);case 2:e.o&&(h=0);e.o&&e.m&&(e.D=e.m);if(e.i){e.i.variants=e.j.j;M=e.j.ee();0<M.length&&(e.i.textStreams=M);e.i.imageStreams=e.j.h;e.h.filter(e.i);L.B(3);break}var H=E,F=e.j.j,B=e.j.ee(),z=e.j.h,V=h||0,W=e.g.dash.sequenceMode;var G=Wi(t,"ServiceDescription");if(G){var K=Wi(G,"Latency");G=Wi(G,"PlaybackRate");K&&K.getAttribute("max")||G?(K=K&&K.getAttribute("max")?parseInt(K.getAttribute("max"),10)/1e3:null,G=G?parseFloat(G.getAttribute("max")):null,K={maxLatency:K,maxPlaybackRate:G}):K=null}else K=null;e.i={presentationTimeline:H,variants:F,textStreams:B,imageStreams:z,offlineSessionIds:[],minBufferTime:V,sequenceMode:W,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:K};if(!E.Of()){L.B(4);break}q=Ki(t,"UTCTiming");return S(L,ig(e,c,q),5);case 5:U=L.h;if(!e.h)return L.return();E.Ff(U);case 4:E.Dd();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),_(L)}}))}function Kf(e,t,r,n){var i=eo(n,"mediaPresentationDuration",ro),o=[],a=0;n=Ki(n,"Period");for(var s=0;s<n.length;s++){var l=n[s],c=n[s+1],u=eo(l,"start",ro,a),p=l.id,d=eo(l,"duration",ro),h=null;if(c){var m=eo(c,"start",ro);null!=m&&(h=m-u)}else null!=i&&(h=i-u);null==h&&(h=d);if(!(null!==e.A&&null!==p&&null!==u&&u<e.A)||e.K.includes(p)||s+1==n.length){null!==u&&(null===e.A||u>e.A)&&(e.A=u);a=$f(e,t,r,{start:u,duration:h,node:l,ie:null==h||!c});o.push(a);t.ga.id&&h&&(e.L[t.ga.id]=h);if(null==h){a=null;break}a=u+h}}e.K=o.map((function(e){return e.id}));return null!=i?{periods:o,duration:i,gf:!1}:{periods:o,duration:a,gf:!0}}function $f(e,t,r,n){t.ga=eg(n.node,null,r);t.V=n;t.ga.Ub=t.Ub;t.ga.id||(t.ga.id="__shaka_period_"+n.start);var i=Ki(n.node,"EventStream");r=t.presentationTimeline.eb();i=u(i);for(var o=i.next();!o.done;o=i.next())og(e,n.start,n.duration,o.value,r);r=Ki(n.node,"AdaptationSet").map((function(r){return Yf(e,t,r)})).filter(gt);if(t.qb){n=[];i=u(r);for(o=i.next();!o.done;o=i.next()){o=u(o.value.bh);for(var a=o.next();!a.done;a=o.next())n.push(a.value)}if(n.length!=new Set(n).size)throw new dt(2,4,4018)}n=r.filter((function(e){return!e.Se}));r=r.filter((function(e){return e.Se}));r=u(r);for(i=r.next();!i.done;i=r.next()){i=i.value;o=i.Se.split(" ");a=u(n);for(var s=a.next();!s.done;s=a.next()){var l=s.value;if(o.includes(l.id)){s={};l=u(l.streams);for(var c=l.next();!c.done;s={ed:s.ed},c=l.next())s.ed=c.value,s.ed.trickModeVideo=i.streams.find(function(e){return function(t){return Ot(e.ed.codecs)==Ot(t.codecs)}}(s))}}}i=e.g.disableAudio?[]:Xf(n,"audio");a=e.g.disableVideo?[]:Xf(n,"video");o=e.g.disableText?[]:Xf(n,Et);r=e.g.disableThumbnails?[]:Xf(n,"image");if(!a.length&&!i.length)throw new dt(2,4,4004);n=[];i=u(i);for(s=i.next();!s.done;s=i.next())n.push.apply(n,p(s.value.streams));i=[];a=u(a);for(s=a.next();!s.done;s=a.next())i.push.apply(i,p(s.value.streams));a=[];o=u(o);for(s=o.next();!s.done;s=o.next())a.push.apply(a,p(s.value.streams));o=[];r=u(r);for(s=r.next();!s.done;s=r.next())o.push.apply(o,p(s.value.streams));return{id:t.ga.id,audioStreams:n,videoStreams:i,textStreams:a,imageStreams:o}}function Xf(e,t){return e.filter((function(e){return e.contentType==t}))}function Yf(e,t,r){function n(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.da=eg(r,t.ga,null);var i=!1,o=Ki(r,"Role"),a=o.map((function(e){return e.getAttribute("value")})).filter(gt),s=void 0,l=t.da.contentType==Et;l&&(s="subtitle");o=u(o);for(var c=o.next();!c.done;c=o.next()){c=c.value;var d=c.getAttribute("schemeIdUri");if(null==d||"urn:mpeg:dash:role:2011"==d)switch(c=c.getAttribute("value"),c){case"main":i=!0;break;case"caption":case"subtitle":s=c}}var h;d=Ki(r,"EssentialProperty");o=null;c=!1;d=u(d);for(var m=d.next();!m.done;m=d.next()){m=m.value;var f=m.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==f?o=m.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==f?h=n(parseInt(m.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=f&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=f&&(c=!0)}d=Ki(r,"SupplementalProperty");d=u(d);for(m=d.next();!m.done;m=d.next())m=m.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==m.getAttribute("schemeIdUri")&&(h=n(parseInt(m.getAttribute("value"),10)));d=Ki(r,"Accessibility");var g=new Map,y;d=u(d);for(m=d.next();!m.done;m=d.next())if(f=m.value,m=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==m)if(m=1,null!=f){f=f.split(";");for(var b=u(f),v=b.next();!v.done;v=b.next()){var w=v.value,E=v=void 0;w.includes("=")?(w=w.split("="),v=w[0].startsWith("CC")?w[0]:"CC"+w[0],E=w[1]||"und"):(v="CC"+m,2==f.length?m+=2:m++,E=w);g.set(v,Vt(E))}}else g.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==m)if(m=1,null!=f)for(f=u(f.split(";")),v=f.next();!v.done;v=f.next())v=v.value,w=b=void 0,v.includes("=")?(v=v.split("="),b="svc"+v[0],w=v[1].split(",")[0].split(":").pop()):(b="svc"+m,m++,w=v),g.set(b,Vt(w));else g.set("svc1","und");else"urn:mpeg:dash:role:2011"==m?null!=f&&(a.push(f),"captions"==f&&(s="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==m&&("1"==f?y="visually impaired":"2"==f&&(y="hard of hearing"));if(c)return null;c=Ki(r,"ContentProtection");var S=gm(c,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),_=Vt(t.da.language||"und"),x=r.getAttribute("label");(c=Ki(r,"Label"))&&c.length&&(c=c[0],c.textContent&&(x=c.textContent));c=Ki(r,"Representation");r=c.map((function(r){if(r=Qf(e,t,S,s,_,x,i,a,g,r,y))r.hdr=r.hdr||h;return r})).filter((function(e){return!!e}));if(0==r.length){o="image"==t.da.contentType;if(e.g.dash.ignoreEmptyAdaptationSet||l||o)return null;throw new dt(2,4,4003)}if(!t.da.contentType||"application"==t.da.contentType)for(t.da.contentType=sg(r[0].mimeType,r[0].codecs),l=u(r),d=l.next();!d.done;d=l.next())d.value.type=t.da.contentType;l=u(r);for(d=l.next();!d.done;d=l.next())for(d=d.value,m=u(S.drmInfos),f=m.next();!f.done;f=m.next())f=f.value,f.keyIds=f.keyIds&&d.keyIds?new Set([].concat(p(f.keyIds),p(d.keyIds))):f.keyIds||d.keyIds;l=c.map((function(e){return e.getAttribute("id")})).filter(gt);return{id:t.da.id||"__fake__"+e.H++,contentType:t.da.contentType,language:_,ei:i,streams:r,drmInfos:S.drmInfos,Se:o,bh:l}}function Qf(e,t,r,n,i,o,a,s,l,c,u){t.I=eg(c,t.da,null);e.m=Math.min(e.m,t.I.Ub);if(!rg(t.I))return null;var p=t.V.start;t.bandwidth=eo(c,"bandwidth",oo)||0;var d=t.I.contentType,h=d==Et||"application"==d;d="image"==d;try{var m=function(t,r,n,i){return ag(e,t,r,n,i)};if(t.I.Vc)var f=zm(t,m);else if(t.I.ub)f=Ym(t,e.l);else if(t.I.Wc)f=tf(t,m,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var g=t.I.Da,y=t.V.duration||0;f={Xb:function(){return Promise.resolve(rl(p,y,g))}}}}catch(e){if((h||d)&&4002==e.code)return null;throw e}m=Ki(c,"ContentProtection");m=ym(m,r,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI);m=new Set(m?[m]:[]);var b=!1;Ki(c,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(b=!0);var v=!1;h&&(v=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var w;if(d&&((c=Ki(c,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(w=c.getAttribute("value")),!w))return null;var E;c=t.I.codecs;t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(E="PQ");c=t.I.id?t.ga.id+","+t.I.id:"";var x=c&&e.l[c]?e.l[c]:{id:e.H++,originalId:t.I.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){x.segmentIndex&&(x.segmentIndex.release(),x.segmentIndex=null)},segmentIndex:null,mimeType:t.I.mimeType,codecs:t.I.codecs,frameRate:t.I.frameRate,pixelAspectRatio:t.I.pixelAspectRatio,bandwidth:t.bandwidth,width:t.I.width,height:t.I.height,kind:n,encrypted:0<r.drmInfos.length,drmInfos:r.drmInfos,keyIds:m,language:i,originalLanguage:t.da.language,label:o,type:t.da.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:t.I.emsgSchemeIdUris,roles:s,forced:v,channelsCount:t.I.Hd,audioSamplingRate:t.I.audioSamplingRate,spatialAudio:b,closedCaptions:l,hdr:E,tilesLayout:w,matchedStreams:[],accessibilityPurpose:u,external:!1};x.createSegmentIndex=function(){var e;return L((function(t){if(1==t.g){if(x.segmentIndex)return t.B(0);e=x;return S(t,f.Xb(),3)}e.segmentIndex=t.h;_(t)}))};c&&t.qb&&!e.l[c]&&(e.l[c]=x);return x}function Jf(e){var t,r;L((function(n){switch(n.g){case 1:return t=0,x(n,2),S(n,Vf(e),4);case 4:t=n.h;C(n,3);break;case 2:if(r=T(n),e.h){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(r),n.return();r.severity=1;e.h.onError(r)}case 3:if(!e.h)return n.return();Zf(e,t);_(n)}}))}function Zf(e,t){0>e.D||e.F.S(Math.max(e.D-t,K(e.G)))}function eg(e,t,r){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Hd:null,audioSamplingRate:null,Ub:0};r=r||t.Da;var n=Ki(e,"BaseURL"),i=n.map(Ji),o=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,l=eo(e,"frameRate",co)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,p=Ki(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice();p=u(p);for(var h=p.next();!h.done;h=p.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);p=Ki(e,"AudioChannelConfiguration");p=tg(p)||t.Hd;h=eo(e,"audioSamplingRate",ao)||t.audioSamplingRate;o||(o=sg(a,s));var m=Wi(e,"SegmentBase"),f=Wi(e,"SegmentTemplate"),g=m?eo(m,"availabilityTimeOffset",so)||0:0,y=f?eo(f,"availabilityTimeOffset",so)||0:0;n=n&&n.length?eo(n[0],"availabilityTimeOffset",so)||0:0;n=t.Ub+n+g+y;return{Da:yt(r,i),Vc:m||t.Vc,ub:Wi(e,"SegmentList")||t.ub,Wc:f||t.Wc,width:eo(e,"width",ao)||t.width,height:eo(e,"height",ao)||t.height,contentType:o,mimeType:a,codecs:s,frameRate:l,pixelAspectRatio:c,emsgSchemeIdUris:d,id:e.getAttribute("id"),language:e.getAttribute("lang"),Hd:p,audioSamplingRate:h,Ub:n}}function tg(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){var r=t.value;if(t=r.getAttribute("schemeIdUri"))if(r=r.getAttribute("value"))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return r.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":t=parseInt(r,10);if(!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":t=parseInt(r,16);if(!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(r=parseInt(r,10))&&0<r&&r<t.length)return t[r]}}return null}function rg(e){var t=e.Vc?1:0;t+=e.ub?1:0;t+=e.Wc?1:0;if(0==t)return e.contentType==Et||"application"==e.contentType?!0:!1;1!=t&&(e.Vc&&(e.ub=null),e.Wc=null);return!0}function ng(e,t,r,n){var i,o,a,s,l,c;return L((function(u){if(1==u.g)return i=yt(t,[r]),o=$n(i,e.g.retryParameters),o.method=n,a=e.h.networkingEngine.request(4,o),Wn(e.u,a),S(u,a.promise,2);s=u.h;if("HEAD"==n){if(!s.headers||!s.headers.date)return u.return(0);l=s.headers.date}else l=yi(s.data);c=Date.parse(l);return isNaN(c)?u.return(0):u.return(c-Date.now())}))}function ig(e,t,r){var n,i,o,a,s,l,c,p;return L((function(d){switch(d.g){case 1:n=r.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),i=e.g.dash.clockSyncUri,!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=u(n),a=o.next();case 2:if(a.done){d.B(4);break}s=a.value;x(d,5);l=s.scheme;c=s.value;switch(l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.B(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.B(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return p=Date.parse(c),d.return(isNaN(p)?0:p-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Q("NTP UTCTiming scheme is not supported");break;default:Q("Unrecognized scheme in UTCTiming element",l)}d.B(9);break;case 7:return S(d,ng(e,t,c,"HEAD"),10);case 10:return d.return(d.h);case 8:return S(d,ng(e,t,c,"GET"),11);case 11:return d.return(d.h);case 9:C(d,3);break;case 5:T(d);case 3:a=o.next();d.B(2);break;case 4:return Q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}}))}function og(e,t,r,n,i){var o=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",s=eo(n,"timescale",ao)||1;n=u(Ki(n,"Event"));for(var l=n.next();!l.done;l=n.next()){l=l.value;var c=eo(l,"presentationTime",ao)||0,p=eo(l,"duration",ao)||0;c=c/s+t;p=c+p/s;null!=r&&(c=Math.min(c,t+r),p=Math.min(p,t+r));p<i||(l={schemeIdUri:o,value:a,startTime:c,endTime:p,id:l.getAttribute("id")||"",eventElement:l},e.h.onTimelineRegionAdded(l))}}function ag(e,t,r,n,i){var o,a,s,l,c,u;return L((function(p){if(1==p.g)return o=ei,a=i?0:1,s=Cl(t,r,n,e.g.retryParameters),l=e.h.networkingEngine,c=l.request(o,s,{type:a}),Wn(e.u,c),S(p,c.promise,2);u=p.h;return p.return(u.data)}))}function sg(e,t){t=Dt(e,t);return jt(t)?Et:e.split("/")[0]}V("shaka.dash.DashParser",zf);aa.mpd=function(){return new zf};oa["application/dash+xml"]=function(){return new zf};oa["video/vnd.mpeg.dash.mpd"]=function(){return new zf};function lg(){}V("shaka.dependencies",lg);lg.has=function(e){return ug.has(e)};lg.add=function(e,t){if(!cg[e])throw Error(e+" is not supported");ug.set(e,(function(){return t}))};var cg={muxjs:"muxjs",ISOBoxer:"ISOBoxer"};lg.Allowed=cg;var ug=new Map([["muxjs",function(){return e.muxjs}],["ISOBoxer",function(){return e.ISOBoxer}]]);function pg(e,t){return e.filter((function(e){return e.name==t}))}function dg(e,t){return e.filter((function(e){return vg(e,"TYPE")==t}))}function hg(e,t){e=pg(e,t);return e.length?e[0]:null}function mg(e,t,r){r=void 0===r?0:r;return(e=hg(e,t))?Number(e.value):r}function fg(e,t){return yt([e],[t])[0]}function gg(e,t,r,n){this.h=e;this.type=t;this.g=r;this.segments=n||null}function yg(e,t,r,n){this.id=e;this.name=t;this.g=r;this.value=void 0===n?null:n}yg.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,r=this.g?this.g.map(e):[];this.value&&r.unshift(this.value);0<r.length&&(t+=":"+r.join(","));return t};yg.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};function bg(e,t,r){return(e=e.getAttribute(t))?e.value:r||null}function vg(e,t){e=e.getAttribute(t);if(!e)throw new dt(2,4,4023,t);return e.value}function wg(e,t,r,n){n=void 0===n?[]:n;this.g=r;this.l=null;this.j=e;this.m=t;this.h=n}s.Object.defineProperties(wg.prototype,{i:{configurable:!0,enumerable:!0,get:function(){!this.l&&this.j&&this.m&&(this.l=fg(this.j,this.m),this.m=this.j=null);return this.l||""}}});function Eg(e,t){this.name=e;this.value=t}function Sg(e){this.h=e||"";this.g=0}function _g(e){xg(e,/[ \t]+/gm)}function xg(e,t){t.lastIndex=e.g;t=t.exec(e.h);t=null==t?null:{position:t.index,length:t[0].length,results:t};if(e.g==e.h.length||null==t||t.position!=e.g)return null;e.g+=t.length;return t.results}function Dg(e){return e.g==e.h.length?null:(e=xg(e,/[^ \t\n]*/gm))?e[0]:null}function Cg(){this.g=0}function Tg(e,t,r){t=yi(t);t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new dt(2,4,4015);t=0;for(var i=!0,o=u(n),a=o.next();!a.done;a=o.next())if(a=a.value,/^#(?!EXT)/m.test(a)||i)i=!1;else if(a=Og(e,a),--e.g,kg.includes(a.name)){t=1;break}else"EXT-X-STREAM-INF"==a.name&&(i=!0);o=[];i=!0;for(a=0;a<n.length;a++){var s=n[a],l=n[a+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{s=Og(e,s);if(Pg.includes(s.name)){if(1!=t)throw new dt(2,4,4017);var c=n.splice(a,n.length-a);n=r;i=[];a=[];l=[];s=null;c=u(c);for(var p=c.next();!p.done;p=c.next())p=p.value,/^(#EXT)/.test(p)?(p=Og(e,p),kg.includes(p.name)?o.push(p):"EXT-X-MAP"==p.name?s=p:"EXT-X-PART"==p.name?l.push(p):"EXT-X-PRELOAD-HINT"==p.name?"PART"==bg(p,"TYPE")?l.push(p):"MAP"==bg(p,"TYPE")&&(p.name="EXT-X-MAP",s=p):a.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),s&&a.push(s),i.push(new wg(n,p,a,l)),a=[],l=[]);l.length&&(s&&a.push(s),i.push(new wg("","",a,l)));return new gg(r,t,o,i)}o.push(s);"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Eg("URI",l)),i=!0)}}return new gg(r,t,o)}function Og(e,t){e=e.g++;var r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new dt(2,4,4016,t);t=r[1];var n=r[2];r=[];var i;if(n){n=new Sg(n);var o;(o=xg(n,/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=xg(n,a);)r.push(new Eg(o[1],o[2]||o[3])),_g(n)}return new yg(e,t,r,i)}var kg="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),Pg="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Ag(){}function Ig(e){try{var t=jg(e);return Rn({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return In(e)}}function jg(t){var r=t.split(":");if(2>r.length||"data"!=r[0])throw new dt(2,1,1004,t);r=r.slice(1).join(":").split(",");if(2>r.length)throw new dt(2,1,1004,t);var n=r[0];t=e.decodeURIComponent(r.slice(1).join(","));r=n.split(";");n=r[0];var i=!1;1<r.length&&"base64"==r[r.length-1]&&(i=!0,r.pop());var o;i?o=Ui(t):o=wi(t);return{data:o,contentType:n}}V("shaka.net.DataUriPlugin",Ag);Ag.parse=Ig;Kn("data",Ig);function Rg(){var e=this;this.g=this.i=null;this.Na=1;this.s=new Map;this.A=new Map;this.G=new Map;this.G.set("video",new Map);this.G.set("audio",new Map);this.G.set(Et,new Map);this.G.set("image",new Map);this.ma=new Set;this.h=new Map;this.j=null;this.P="";this.Y=new Cg;this.D=-1;this.L=Infinity;this.Ya=!1;this.m=new Jt((function(){xy(e)}));this.ba=Ay;this.F=null;this.aa=0;this.l=Infinity;this.X=this.U=this.H=0;this.K=new Vn;this.N=new Map;this.u=new Map;this.$=new Map;this.Oa=this.o=!1}n=Rg.prototype;n.configure=function(e){this.g=e};n.start=function(e,t){var r=this,n;return L((function(i){return 1==i.g?(r.i=t,r.o=t.isLowLatencyMode(),S(i,_y(r,e),2)):3!=i.g?(n=i.h,r.P=n.uri,S(i,Hg(r,n.data,e),3)):i.return(r.F)}))};n.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];this.K&&(e.push(this.K.destroy()),this.K=null);this.g=this.i=null;this.ma.clear();this.F=null;this.h.clear();this.A.clear();this.u.clear();this.s.clear();return Promise.all(e)};n.update=function(){var e=this,t,r,n,i,o,a,s,l,c;return L((function(d){if(1==d.g){if(!Dy(e))return d.return();t=[];r=Array.from(e.h.values());e.l=Infinity;n=r.filter((function(e){return e.stream.segmentIndex}));i=u(n);for(o=i.next();!o.done;o=i.next())a=o.value,t.push(Lg(e,a));return S(d,Promise.all(t),2)}ny(e,n.map((function(e){return e.stream})));s=n.some((function(e){return 0==e.Lc}));n.length&&!s&&(l=Ry,Cy(e,l.Qf),c=n.map((function(e){return e.hb})),e.j.Aa(Math.min.apply(Math,p(c))),e.i.updateDuration());s&&zg(e);_(d)}))};function Ng(e,t){return Dy(e)?e.G.get(t.type):t.Ed}function Lg(e,t){var r,n,i,o,a,s,l,c,u,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P;return L((function(A){if(1==A.g)return r=t.gd,n=new Je(r),i=new ut,t.jd&&(0<=t.Ga&&i.add("_HLS_msn",String(t.Ga)),0<=t.Ha&&i.add("_HLS_part",String(t.Ha))),t.kd&&i.add("_HLS_skip","YES"),pt(i),i.Dc&&tt(n,i),S(A,_y(e,n.toString(),!0),2);o=A.h;if(!t.stream.segmentIndex)return A.return();a=Tg(e.Y,o.data,o.uri);if(1!=a.type)throw new dt(2,4,4017);s=pg(a.g,"EXT-X-DEFINE");l=Vg(e,s);c=t.stream;u=Ng(e,t);d=cy(a,c.mimeType);h=d.keyIds;m=d.drmInfos;f=function(e,t){return e.size===t.size&&[].concat(p(e)).every((function(e){return t.has(e)}))};f(c.keyIds,h)||(c.keyIds=h,c.drmInfos=m,e.i.newDrmInfo(c));g=yy(e,a,c.type,c.mimeType,u,l);y=g.segments;b=g.bandwidth;c.bandwidth=b;c.segmentIndex.Oc(y,e.j.eb());y.length&&(v=mg(a.g,"EXT-X-MEDIA-SEQUENCE",0),E=(w=hg(a.g,"EXT-X-SKIP"))?Number(bg(w,"SKIPPED-SEGMENTS")):0,x=sy(v,y),D=x.Ga,C=x.Ha,t.Ga=D+E,t.Ha=C,T=u.get(v),c.segmentIndex.Sa(T));O=y[0];t.Hb=O.startTime;k=y[y.length-1];t.hb=k.endTime;if(P=hg(a.g,"EXT-X-ENDLIST"))t.Lc=!0;py(e,a);_(A)}))}n.onExpirationUpdated=function(){};function Mg(e,t){for(var r=-1==e.D,n=u(t),i=n.next();!i.done;i=n.next()){i=i.value;var o=i.stream.segmentIndex,a=Ng(e,i);if(o=o.g[0]||null){a=u(a);for(var s=a.next();!s.done;s=a.next()){s=u(s.value);var l=s.next().value;if(s.next().value==o.startTime){r&&(e.D=Math.max(e.D,l));i.be=l;break}}}}if(!(0>e.D))for(t=u(t),i=t.next();!i.done;i=t.next())if(r=i.value,n=r.stream.segmentIndex)if(n.g.splice(0,e.D-r.be),n=n.g[0]||null)n=-n.startTime,r.stream.segmentIndex.offset(n),Ug(e,r,n)}function qg(e,t){if(Infinity==e.L){t=u(t);for(var r=t.next();!r.done;r=t.next()){var n=r.value.stream.segmentIndex.g[0]||null;null!=n&&null!=n.g&&(e.L=Math.min(e.L,n.g))}}t=e.L;if(Infinity!=t)for(n=u(e.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.stream.segmentIndex;if(null!=i){var o=i.g[0]||null;if(null==o.g)Y("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.Yc,"Expect AV sync issues!");else for(Ug(e,r,o.g-t-o.startTime),r=u(i),i=r.next();!i.done;i=r.next())i.value.Pe(t)}}}function Ug(e,t,r){t.Hb+=r;t.hb+=r;e=Ng(e,t);t=u(e);for(var n=t.next();!n.done;n=t.next()){var i=u(n.value);n=i.next().value;i=i.next().value;e.set(n,i+r)}}function Hg(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P,A,I,j,R,N,M,q;return L((function(L){switch(L.g){case 1:n=Tg(e.Y,t,e.P);i=pg(n.g,"EXT-X-DEFINE");for(var U=u(i),H=U.next();!H.done;H=U.next()){var F=H.value;H=bg(F,"NAME");F=bg(F,"VALUE");H&&F&&(e.s.has(H)||e.s.set(H,F))}o=[];a=[];s=[];if(1==n.type)return S(L,Fg(e,n),5);l=pg(n.g,"EXT-X-MEDIA");c=pg(n.g,"EXT-X-STREAM-INF");p=pg(n.g,"EXT-X-IMAGE-STREAM-INF");d=pg(n.g,"EXT-X-SESSION-KEY");U=u(c);for(H=U.next();!H.done;H=U.next()){var B=H.value;F=bg(B,"AUDIO");H=bg(B,"VIDEO");var z=bg(B,"SUBTITLES");B=Yg(e,B);if(z){var V=wt(Et,B);e.u.set(z,V);we(B,V)}F&&(z=wt("audio",B),z||(z=e.g.hls.defaultAudioCodec),e.u.set(F,z));H&&(F=wt("video",B),F||(F=e.g.hls.defaultVideoCodec),e.u.set(H,F))}h=pg(n.g,"EXT-X-SESSION-DATA");m=u(h);for(f=m.next();!f.done;f=m.next())if(g=f.value,y=bg(g,"DATA-ID"),b=bg(g,"URI"),v=bg(g,"LANGUAGE"),w=bg(g,"VALUE"),E=(new Map).set("id",y),b&&E.set("uri",fg(e.P,b)),v&&E.set("language",v),w&&E.set("value",w),x=new qn("sessiondata",E),e.i)e.i.onEvent(x);Kg(e,l);U=dg(l,"CLOSED-CAPTIONS");U=u(U);for(H=U.next();!H.done;H=U.next())F=H.value,z=bg(F,"LANGUAGE"),H=Vt(z||"und"),z||(z=bg(F,"NAME"))&&(H=z),z=vg(F,"GROUP-ID"),F=vg(F,"INSTREAM-ID").replace("SERVICE","svc"),e.N.get(z)||e.N.set(z,new Map),e.N.get(z).set(F,H);o=$g(e,c,d);a=Wg(e,l);return S(L,Gg(e,p),4);case 4:s=L.h;L.B(3);break;case 5:return D=L.h,C=D.type,T=D.mimeType,O=D.codecs,k=D.language,P=D.height,A=D.width,I=D.channelCount,j=D.sampleRate,R=new Map,S(L,ay(e,n,r,r,O,C,k,!0,"Media Playlist",I,R,null,!1,j,!1,T),6);case 6:N=L.h,e.h.set(r,N),"video"==C&&Sy(N.stream,A,P,null,null),o.push({id:0,language:Vt(k||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==C?N.stream:null,video:"video"==C?N.stream:null,bandwidth:N.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new dt(2,7,7001);e.j=new Is(null,0);e.j.fc(!0);1==n.type&&(Dy(e)&&(dy(e,n),M=e.l,e.m.S(M)),q=Array.from(e.h.values()),iy(e,q),zg(e));e.F={presentationTimeline:e.j,variants:o,textStreams:a,imageStreams:s,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null};e.i.makeTextStreamsForClosedCaptions(e.F);_(L)}}))}function Fg(e,t){var r,n,i,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){if(1==w.g){r=e.g.hls.mediaPlaylistFullMimeType;n=r.split(";")[0];i=n.split("/")[0];o=kt(r);a={type:i,mimeType:n,codecs:o,language:null,height:null,width:null,channelCount:null,sampleRate:null};if(!t.segments.length)return w.return(a);s=t.segments[0];l=new Je(s.i);c=l.ta.split(".").pop();if(u=Oy[c])return w.return({type:"audio",mimeType:u,codecs:"",language:null,height:null,width:null,channelCount:null,sampleRate:null});p=[s.i];(d=hy(e,t,s.g,new Map))&&(p=d.wa());h=ei;m=$n(p,e.g.retryParameters);f=d?0:1;return S(w,Ty(e,m,h,{type:f}),2)}g=w.h;(y=g.headers["content-type"])&&(y=y.split(";")[0].toLowerCase());if("ts"==c||"video/mp2t"==y){var E=de(g.data),_=(new Wa).parse(E);E=_.nd();_=_.fe();var x=[],D=!1,C=!1;switch(E.audio){case"aac":x.push("mp4a.40.2");D=!0;break;case"mp3":x.push("mp4a.40.34");D=!0;break;case"ac3":x.push("ac-3");D=!0;break;case"ec3":x.push("ec-3"),D=!0}switch(E.video){case"avc":_.oa?x.push(_.oa):x.push("avc1.42E01E");C=!0;break;case"hvc":x.push("hvc1.1.6.L93.90"),C=!0}if(b=x.length?{type:D&&!C?"audio":"video",mimeType:"video/mp2t",codecs:x.join(", "),language:null,height:_.height,width:_.width,channelCount:null,sampleRate:null}:null)return w.return(b)}else if("mp4"==c||"video/mp4"==y||"audio/mp4"==y)if(v=Bg(g))return w.return(v);return w.return(a)}))}function Bg(e){function t(e){return r(e.name)}function r(e){e=e.toLowerCase();switch(e){case"avc1":case"avc3":n.push(e+".42E01E");o=!0;break;case"hev1":case"hvc1":n.push(e+".1.6.L93.90");o=!0;break;case"dvh1":case"dvhe":n.push(e+".05.04");o=!0;break;case"vp09":n.push(e+".00.10.08");o=!0;break;case"av01":n.push(e+".0.01M.08");o=!0;break;case"mp4a":n.push("mp4a.40.2");i=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":n.push(e),i=!0}}var n=[],i=!1,o=!1,a=null,s=null,l=null,c=null,u=null;(new Ci).box("moov",Ti).box("trak",Ti).M("tkhd",(function(e){e=Ia(e.reader,e.version);s=String(e.height);l=String(e.width)})).box("mdia",Ti).M("mdhd",(function(e){a=Pa(e.reader,e.version).language})).box("minf",Ti).box("stbl",Ti).M("stsd",Oi).box("mp4a",(function(e){var r=e.reader;r.skip(6);r.skip(2);r.skip(8);var n=r.Ia();r.skip(2);r.skip(2);r.skip(2);r=r.Ia()+r.Ia()/65536;c=n;u=r;e.reader.ha()?Ti(e):t(e)})).box("esds",(function(e){e=ja(e.reader);n.push(e.oa);i=!0})).box("ac-3",t).box("ec-3",t).box("opus",t).box("Opus",t).box("fLaC",t).box("avc1",(function(e){e=Ra(e.reader,e.name);n.push(e.oa);o=!0})).box("avc3",(function(e){e=Ra(e.reader,e.name);n.push(e.oa);o=!0})).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vp09",t).box("av01",t).box("enca",ki).box("encv",ki).box("sinf",Ti).box("frma",(function(e){e=Na(e.reader).oa;r(e)})).parse(e.data,!0);if(!n.length)return null;e=i&&!o;return{type:e?"audio":"video",mimeType:e?"audio/mp4":"video/mp4",codecs:Qg(n).join(", "),language:a,height:s,width:l,channelCount:c,sampleRate:u}}function zg(e){if(Dy(e)){if(e.ba==jy){for(var t,r=t=Infinity,n=u(e.h.values()),i=n.next();!i.done;i=n.next())i=i.value,i.stream.segmentIndex&&"text"!=i.stream.type&&(t=Math.min(t,i.hb),r=Math.min(r,i.Hb));t-=r;e.g.hls.useSafariBehaviorForLive&&(t=e.j.m);isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride);e.j.Nd(t)}}else e.j.Aa(ry(e));e.j.Dd()}function Vg(e,t){var r=new Map;t=u(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value;n=bg(i,"NAME");var o=bg(i,"VALUE");i=bg(i,"IMPORT");n&&o&&r.set(n,o);i&&(n=e.s.get(i))&&r.set(i,n)}return r}function Wg(e,t){var r=dg(t,"SUBTITLES");t=r.map((function(t){if(e.g.disableText)return null;try{return Jg(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));r=u(r);for(var n=r.next();!n.done;n=r.next()){var i=vg(n.value,"GROUP-ID");if(n=e.u.get(i))if(i=e.A.get(i)){i=u(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.stream.codecs=n,o.stream.mimeType=vy(Et,n)||wy(Et)}}return t.filter((function(e){return e}))}function Gg(e,t){var r,n;return L((function(i){if(1==i.g)return r=t.map((function(t){var r,n,i;return L((function(o){if(1==o.g){if(r=e.g.disableThumbnails)return o.return(null);x(o,2);return S(o,Zg(e,t),4)}if(2!=o.g)return n=o.h,o.return(n.stream);i=T(o);if(e.g.hls.ignoreImageStreamFailures)return o.return(null);throw i}))})),S(i,Promise.all(r),2);n=i.h;return i.return(n.filter((function(e){return e})))}))}function Kg(e,t){t=t.filter((function(e){var t=bg(e,"URI")||"";return"SUBTITLES"!=bg(e,"TYPE")&&""!=t}));t=u(t);for(var r=t.next();!r.done;r=t.next())Jg(e,r.value)}function $g(e,t,r){var n=[],i=new Set;if(0<r.length){r=u(r);for(var o=r.next();!o.done;o=r.next()){o=o.value;var a=vg(o,"METHOD");if("NONE"!=a&&"AES-128"!=a&&(a=bg(o,"KEYFORMAT")||"identity",o=(a=Py[a])?a(o,""):null)){if(o.keyIds){a=u(o.keyIds);for(var s=a.next();!s.done;s=a.next())i.add(s.value)}n.push(o)}}}t=t.map((function(t){var r=bg(t,"FRAME-RATE"),o=Number(bg(t,"AVERAGE-BANDWIDTH"))||Number(vg(t,"BANDWIDTH")),a=bg(t,"RESOLUTION");a=u(a?a.split("x"):[null,null]);var s=a.next().value,l=a.next().value,c=bg(t,"VIDEO-RANGE");t=Xg(e,t);a=t.audio;t=t.video;for(var p=u(t),d=p.next();!d.done;d=p.next())Sy(d.value.stream,s,l,r,c);r=e.g.disableAudio;if(!a.length||r)a=[null];r=e.g.disableVideo;if(!t.length||r)t=[null];r=[];a=u(a);for(s=a.next();!s.done;s=a.next())for(s=s.value,l=u(t),c=l.next();!c.done;c=l.next()){var h=c.value;if(c=s?s.stream:null)c.drmInfos=n,c.keyIds=i;if(p=h?h.stream:null)p.drmInfos=n,p.keyIds=i;d=s?s.stream.drmInfos:null;var m=h?h.stream.drmInfos:null;h=(h?h.Yc:"")+" - "+(s?s.Yc:"");c&&p&&!Bo(d,m)||e.ma.has(h)||(c={id:e.Na++,language:c?c.language:"und",disabledUntilTime:0,primary:!!c&&c.primary||!!p&&p.primary,audio:c,video:p,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(c),e.ma.add(h))}return r})).reduce(mt,[]);return t=t.filter((function(e){return null!=e}))}function Xg(e,t){var r=Yg(e,t),n=bg(t,"AUDIO"),i=bg(t,"VIDEO"),o=n||i;o=o&&e.A.has(o)?e.A.get(o):[];n={audio:n?o:[],video:i?o:[]};i=!1;var a=vg(t,"URI"),s=n.audio.find((function(e){return e&&e.Yc==a})),l=wt("video",r),c=wt("audio",r);c&&!l?(o="audio",i=0<n.audio.length):!o.length&&c&&l?(o="video",r=[[l,c].join()]):n.audio.length&&s?(o="audio",i=!0):o=n.video.length&&!n.audio.length?"audio":"video";i||(e=ey(e,t,r,o),n[e.stream.type]=[e]);return n}function Yg(e,t){var r=[];e.g.disableVideo||r.push(e.g.hls.defaultVideoCodec);e.g.disableAudio||r.push(e.g.hls.defaultAudioCodec);e=bg(t,"CODECS",r.join(",")).split(/\s*,\s*/);return Qg(e)}function Qg(e){var t=new Set,r=[];e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=Pt(n)[0];t.has(i)||(r.push(n),t.add(i))}return r}function Jg(e,t){var r=vg(t,"GROUP-ID"),n="",i=vg(t,"TYPE").toLowerCase();"subtitles"==i&&(i=Et);var o=i;o==Et?n=bg(t,"CODECS")||"":r&&e.u.has(r)&&(n=e.u.get(r));i=by(vg(t,"URI"),e.s);if(e.h.has(i))return e.h.get(i);var a=bg(t,"LANGUAGE"),s=bg(t,"NAME"),l="YES"==bg(t,"DEFAULT");var c="audio"==o?(c=bg(t,"CHANNELS"))?parseInt(c.split("/")[0],10):null:null;var u="audio"==o?(u=bg(t,"CHANNELS"))?u.includes("/JOC"):!1:!1;var p=bg(t,"CHARACTERISTICS"),d="YES"==bg(t,"FORCED");"audio"==o?t=(t=bg(t,"SAMPLE-RATE"))?parseInt(t,10):null:t=null;n=ty(e,i,n,o,a,l,s,c,null,p,d,t,u);e.A.has(r)?e.A.get(r).push(n):e.A.set(r,[n]);if(e.h.has(i))return e.h.get(i);e.h.set(i,n);return n}function Zg(e,t){var r,n,i,o,a,s,l,c,u,p;return L((function(d){if(1==d.g){r=by(vg(t,"URI"),e.s);n=bg(t,"CODECS","jpeg")||"";if(e.h.has(r))return d.return(e.h.get(r));i=bg(t,"LANGUAGE");o=bg(t,"NAME");a=bg(t,"CHARACTERISTICS");s=ty(e,r,n,"image",i,!1,o,null,null,a,!1,null,!1);return e.h.has(r)?d.return(e.h.get(r)):(l=bg(t,"RESOLUTION"))?S(d,s.stream.createSegmentIndex(),3):d.B(2)}2!=d.g&&(c=s.stream.segmentIndex.get(0),u=c.tilesLayout)&&(s.stream.width=Number(l.split("x")[0])*Number(u.split("x")[0]),s.stream.height=Number(l.split("x")[1])*Number(u.split("x")[1]));if(p=bg(t,"BANDWIDTH"))s.stream.bandwidth=Number(p);e.h.set(r,s);return d.return(s)}))}function ey(e,t,r,n){var i=by(vg(t,"URI"),e.s);if(e.h.has(i))return e.h.get(i);t=bg(t,"CLOSED-CAPTIONS");t="video"==n&&t&&"NONE"!=t?e.N.get(t):null;r=vt(n,r);n=ty(e,i,r,n,null,!1,null,null,t,null,!1,null,!1);if(e.h.has(i))return e.h.get(i);e.h.set(i,n);return n}function ty(e,t,r,n,i,o,a,s,l,c,p,d,h){function m(m){var f,b,v,w,E,x,D,C,T,O,k,P,A,I;return L((function(j){if(1==j.g)return S(j,_y(e,y.gd,!0),2);if(3!=j.g){f=j.h;if(m.aborted)return j.return();b=f.uri;v=Tg(e.Y,f.data,b);w=Dy(e);return S(j,ay(e,v,t,b,r,n,i,o,a,s,l,c,p,d,h),3)}E=j.h;if(m.aborted)return j.return();x=E.stream;Dy(e)&&!w&&dy(e,v);y.gd=b;y.Hb=E.Hb;y.hb=E.hb;y.kd=E.kd;y.jd=E.jd;y.Lc=E.Lc;y.Ed=E.Ed;y.Ga=E.Ga;y.Ha=E.Ha;y.oe=!0;g.segmentIndex=x.segmentIndex;g.encrypted=x.encrypted;g.drmInfos=x.drmInfos;g.keyIds=x.keyIds;g.mimeType=x.mimeType;g.bandwidth=x.bandwidth;g.drmInfos.length&&e.i.newDrmInfo(g);D=St;if(n==D.va||n==D.pb)for(C=u(e.h.values()),T=C.next();!T.done;T=C.next())O=T.value,O.oe||O.type!=n||(O.stream.mimeType=x.mimeType);n==D.ca&&(k=x.segmentIndex.get(0))&&k.h&&(g.mimeType="application/mp4");oy(e)&&(e.Ya?iy(e,[y]):(e.Ya=!0,P=Array.from(e.h.values()),A=P.filter((function(e){return e.stream.segmentIndex})),iy(e,A),zg(e),I=e.l,0<I&&e.m.S(I)));_(j)}))}var f=fg(e.P,t),g=ly(e,r,n,i,o,a,s,l,c,p,d,h),y={stream:g,type:n,Yc:t,gd:f,Hb:0,hb:0,Ed:new Map,kd:!1,jd:!1,Lc:!1,be:-1,Ga:-1,Ha:-1,oe:!1},b=null,v=new AbortController;g.createSegmentIndex=function(){if(b)return b;v=new AbortController;return b=new Promise((function(e){e(m(v.signal))}))};g.closeSegmentIndex=function(){b&&!g.segmentIndex&&v.abort();g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null);b=null};return y}function ry(e){var t=Infinity;e=u(e.h.values());for(var r=e.next();!r.done;r=e.next())r=r.value,r.stream.segmentIndex&&"text"!=r.stream.type&&(t=Math.min(t,r.hb));return t}function ny(e,t){var r=[];t=u(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.segmentIndex&&tl(n.segmentIndex,(function(e){r.push(e)}));e.j.Pc(r)}function iy(e,t){if(!Dy(e))for(var r=ry(e),n=u(t),i=n.next();!i.done;i=n.next())i.value.stream.segmentIndex.Vb(0,r);ny(e,t.map((function(e){return e.stream})));e.g.hls.ignoreManifestProgramDateTime?Mg(e,t):qg(e,t)}function oy(e){if(!e.F)return!1;var t=[],r=[];e=u(e.F.variants);for(var n=e.next();!n.done;n=e.next())n=n.value,n.video&&t.push(n.video),n.audio&&r.push(n.audio);return 0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<r.length&&!r.some((function(e){return e.segmentIndex}))?!1:!0}function ay(e,t,r,n,i,o,a,s,l,c,u,p,d,h,m,f){var g,y,b,v,w,E,_,x,D,C,T,O,k,P,A,I,j,R,N,M,q,U,H;return L((function(L){if(1==L.g){if(1!=t.type)throw new dt(2,4,4017);g=pg(t.g,"EXT-X-DEFINE");y=Vg(e,g);var F=hg(t.g,"EXT-X-PLAYLIST-TYPE"),B=hg(t.g,"EXT-X-ENDLIST");B=F&&"VOD"==F.value||B;F=F&&"EVENT"==F.value&&!B;F=!B&&!F;B?Cy(e,Ay):F?Cy(e,jy):Cy(e,Iy);Dy(e)&&py(e,t);return f?L.B(2):S(L,Ey(e,o,i,t,y),3)}2!=L.g&&(f=L.h);b=cy(t,f);v=b.drmInfos;w=b.keyIds;E=b.encrypted;_=b.Uf;if(E&&!v.length&&!_)throw new dt(2,4,4026);x=Dy(e)?e.G.get(o):new Map;D=yy(e,t,o,f,x,y);C=D.segments;T=D.bandwidth;Dy(e)&&py(e,t);O=C[0].startTime;k=C[C.length-1];P=k.endTime;A=new el(C);j=(I=hg(t.g,"EXT-X-SERVER-CONTROL"))?null!=I.getAttribute("CAN-SKIP-UNTIL"):!1;R=I?null!=I.getAttribute("CAN-BLOCK-RELOAD"):!1;N=mg(t.g,"EXT-X-MEDIA-SEQUENCE",0);M=sy(N,C);q=M.Ga;U=M.Ha;H=ly(e,i,o,a,s,l,c,u,p,d,h,m);H.segmentIndex=A;H.encrypted=E;H.drmInfos=v;H.keyIds=w;H.mimeType=f;H.bandwidth=T;return L.return({stream:H,type:o,Yc:r,gd:n,Hb:O,hb:P,kd:j,jd:R,Lc:!1,be:-1,Ga:q,Ha:U,Ed:x,oe:!1})}))}function sy(e,t){e=e+t.length-1;var r=-1;if(!t.length)return e++,{Ga:e,Ha:r};t=t[t.length-1];var n=t.i;if(!t.i.length)return e++,t.o&&(r=0),{Ga:e,Ha:r};r=n.length-1;n[n.length-1].m||(e++,r=0);return{Ga:e,Ha:r}}function ly(e,t,r,n,i,o,a,s,l,c,p,d){var h=vy(r,t)||wy(r),m=[];if(l){l=u(l.split(","));for(var f=l.next();!f.done;f=l.next())m.push(f.value)}l=r==Et?"subtitle":void 0;m.length||"subtitle"!==l||m.push("subtitle");return{id:e.Na++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:r==Et?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Vt(n||"und"),originalLanguage:n,label:o,type:r,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:m,forced:c,channelsCount:a,audioSamplingRate:p,spatialAudio:d,closedCaptions:s,hdr:void 0,tilesLayout:void 0,accessibilityPurpose:null,external:!1}}function cy(e,t){var r=[];if(e.segments){e=u(e.segments);for(var n=e.next();!n.done;n=e.next())n=pg(n.value.g,"EXT-X-KEY"),r.push.apply(r,p(n))}n=e=!1;var i=[],o=new Set;r=u(r);for(var a=r.next();!a.done;a=r.next()){a=a.value;var s=vg(a,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)n=!0;else if(s=bg(a,"KEYFORMAT")||"identity",a=(s=Py[s])?s(a,t):null){if(a.keyIds){s=u(a.keyIds);for(var l=s.next();!l.done;l=s.next())o.add(l.value)}i.push(a)}}return{drmInfos:i,keyIds:o,encrypted:e,Uf:n}}function uy(t,r,n){if(!e.crypto||!e.crypto.subtle)throw Q("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new dt(2,4,4042);var i=0,o=bg(r,"IV","");if(o){var a=Hi(o.substr(2));if(16!=a.byteLength)throw new dt(2,4,4043)}else i=mg(n.g,"EXT-X-MEDIA-SEQUENCE",0);r=fg(n.h,vg(r,"URI"));var s=$n([r],t.g.retryParameters),l={method:"AES-128",iv:a,firstMediaSequenceNumber:i,fetchKey:function(){var r,n,i;return L((function(o){if(1==o.g)return S(o,Ty(t,s,6),2);if(3!=o.g){r=o.h;if(!r.data||16!=r.data.byteLength)throw new dt(2,4,4044);n={name:"AES-CBC"};i=l;return S(o,e.crypto.subtle.importKey("raw",r.data,n,!0,["decrypt"]),3)}i.cryptoKey=o.h;l.fetchKey=void 0;_(o)}))}};return l}function py(e,t){var r=Infinity,n=t.segments;if(n.length)for(var i=n.length-1;0<=i;){var o=hg(n[i].g,"EXTINF");if(o){r=Number(o.value.split(",")[0]);break}i--}n=hg(t.g,"EXT-X-TARGETDURATION");if(!n)throw new dt(2,4,4024,"EXT-X-TARGETDURATION");n=Number(n.value);if(i=hg(t.g,"EXT-X-PART-INF"))e.H=Number(vg(i,"PART-TARGET"));t=hg(t.g,"EXT-X-SERVER-CONTROL");e.o&&e.H?(e.l=e.Oa?5*e.H<=r?Math.min(e.H,e.l):Math.min(r,e.l):Math.min(e.H,e.l),e.X=t?Number(vg(t,"PART-HOLD-BACK")):0):(e.l=Math.min(r,e.l),r=t?t.getAttribute("HOLD-BACK"):null,e.U=r?Number(r.value):0);e.aa=Math.max(n,e.aa)}function dy(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.X)t=e.X;else if(e.U)t=e.U;else{t=t.segments.length;var r=e.g.hls.liveSegmentsDelay;r>t-2&&(r=Math.max(1,t-2));t=e.aa*r}e.j.Hf(0);e.j.Gf(t);e.j.fc(!1)}function hy(e,t,r,n){var i=hg(r,"EXT-X-MAP");if(!i)return null;var o=vg(i,"URI");o=by(fg(t.h,o),n);n=[o,bg(i,"BYTERANGE","")].join("-");if(!e.$.has(n)){var a=void 0;r=u(r);for(var s=r.next();!s.done;s=r.next())s=s.value,"EXT-X-KEY"==s.name&&"AES-128"==vg(s,"METHOD")&&s.id<i.id&&(a=uy(e,s,t));t=my(o,i,a);e.$.set(n,t)}return e.$.get(n)}function my(e,t,r){var n=0,i=null;if(t=bg(t,"BYTERANGE"))n=t.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1,r&&(t=i+1-n,t%16&&(i+=16-t%16));return new pa((function(){return[e]}),n,i,null,null,null,r)}function fy(t,r,n,i,o,a,s,l,c,p){var d=i.g,h=hg(d,"EXTINF"),m=0,f=0,g=null;i.h.length&&!t.o&&Q("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var b=hg(d,"EXT-X-PROGRAM-DATE-TIME");b&&b.value&&(y=to(b.value))}var v=ma;hg(d,"EXT-X-GAP")&&(v=2);if(!h){if(0==i.h.length)throw new dt(2,4,4024,"EXTINF");if(!t.o)return null}var w=[];b=!1;var E=null,S=!1,_=!1;if(t.o&&i.h.length){m=("video/mp4"==c||"audio/mp4"==c)&&e.ReadableStream;c=y;for(var x={},D=0;D<i.h.length;x={qc:x.qc,cd:x.cd},D++){var C=i.h[D],T=0==D?n:w[w.length-1],O=0==D?o:T.endTime,k=Number(bg(C,"DURATION"))||t.H;if(k){var P=O+k,A=0,I=null;"EXT-X-PRELOAD-HINT"==C.name?(A=(A=bg(C,"BYTERANGE-START"))?Number(A):0,(T=bg(C,"BYTERANGE-LENGTH"))?I=A+Number(T)-1:A&&(I=Number.MAX_SAFE_INTEGER)):(A=bg(C,"BYTERANGE"),I=u(gy(T,A)),A=I.next().value,I=I.next().value);x.cd=bg(C,"URI");if(x.cd){T=ma;"YES"==bg(C,"GAP")&&(T=2,S=!0);x.qc=null;var j=function(e){return function(){null==e.qc&&(e.qc=fg(s,e.cd));return[e.qc]}}(x);m&&0<=A&&null!=I&&(E=j,b=!0);O=new ha(O,P,j,A,I,r,0,0,Infinity,[],"",null,c,T,p);"EXT-X-PRELOAD-HINT"==C.name&&(O.qe(),_=!0);"YES"!=bg(C,"INDEPENDENT")&&0<D&&O.uf();w.push(O);c&&(c+=k)}}}}if(h){h=Number(h.value.split(",")[0]);if(0==h)return null;m=o+h}else if(w.length)m=w[w.length-1].endTime;else return null;b&&(S||0!=w[0].Ba?(b=!1,E=null):w=[]);(h=hg(d,"EXT-X-BYTERANGE"))?(g=u(gy(n,h.value)),f=g.next().value,g=g.next().value):w.length&&(f=w[0].Ba,g=w[w.length-1].ia);n="";h=null;"image"==l&&(n="1x1",l=hg(d,"EXT-X-TILES"))&&(n=vg(l,"LAYOUT"),(l=bg(l,"DURATION"))&&(h=Number(l)));var R=null;r=new ha(o,m,(function(){if(E)return E();null==R&&(R=by(i.i,a));return R.length?[R]:[]}),f,g,r,0,0,Infinity,w,n,h,y,v,p);b&&(t.Oa=!0,r.tf(),_&&r.qe());return r}function gy(e,t){var r=0,n=null;t&&(r=t.split("@"),t=Number(r[0]),r=r[1]?Number(r[1]):e.ia+1,n=r+t-1);return[r,n]}function yy(e,t,r,n,i,o){var a=t.segments,s=void 0,l=mg(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),c=mg(t.g,"EXT-X-MEDIA-SEQUENCE",0),p=hg(t.g,"EXT-X-SKIP"),d=p?Number(bg(p,"SKIPPED-SEGMENTS")):0,h=c+d,m=0;Dy(e)&&i.has(h)&&(m=i.get(h));var f=[],g=null;p=[];for(var y=0;y<a.length;y++){var b=a[y],v=0==y?m:g.endTime;h=c+d+y;hg(b.g,"EXT-X-DISCONTINUITY")&&l++;var w=u(b.g);for(var E=w.next();!E.done;E=w.next())E=E.value,"EXT-X-KEY"==E.name&&("AES-128"==vg(E,"METHOD")?s=uy(e,E,t):s=void 0);i.set(h,v);w=hy(e,t,b.g,o);!e.o&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.o=e.i.isLowLatencyMode());if(v=fy(e,w,g,b,v,o,t.h,r,n,s))(g=mg(b.g,"EXT-X-BITRATE"))?p.push({bitrate:g,duration:v.endTime-v.startTime}):p.length&&(g=p.pop(),g.duration+=v.endTime-v.startTime,p.push(g)),g=v,v.l=l,e.g.hls.ignoreManifestProgramDateTime&&null!=e.D&&h<e.D||f.push(v)}t=void 0;p.length&&(t=p.reduce((function(e,t){return e+t.duration}),0),t=Math.round(p.reduce((function(e,t){return e+t.bitrate*t.duration}),0)/t*1e3));if(p=f.some((function(e){return null!=e.g})))for(r={},n=0;n<f.length;r={mc:r.mc,lc:r.lc,Zc:r.Zc,mb:r.mb,kc:r.kc},n++)if(r.mb=f[n],null==r.mb.g)for(r.lc=0,r.mc=n,i=function(e){return function(){var t=f[e.mc];if(t){if(null!=t.g)return t.g+e.lc;e.lc-=t.endTime-t.startTime;e.mc+=1}return null}}(r),r.kc=0,r.Zc=n,o=function(e){return function(){var t=f[e.Zc];if(t){t!=e.mb&&(e.kc+=t.endTime-t.startTime);if(null!=t.g)return t.g+e.kc;--e.Zc}return null}}(r);null==r.mb.g;)r.mb.g=o(),null==r.mb.g&&(r.mb.g=i());if(p)for(r=u(f),n=r.next();!n.done;n=r.next())for(i=n.value,n=i.g,i=u(i.i),o=i.next();!o.done;o=i.next())o=o.value,o.g=n,n+=o.endTime-o.startTime;e=e.L;if(p&&Infinity!=e)for(p=u(f),n=p.next();!n.done;n=p.next())n.value.Pe(e);return{segments:f,bandwidth:t}}function by(e,t){if(!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var r=e.match(/{\$\w*}/g);if(r){r=u(r);for(var n=r.next();!n.done;n=r.next()){n=n.value;var i=n.slice(2,n.length-1),o=t.get(i);if(o)e=e.replace(n,o);else throw new dt(2,4,4039,i)}}return e}function vy(e,t){if(e==Et){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function wy(e){return e==Et?"text/vtt":ky[e].mp4}function Ey(e,t,r,n,i){var o,a,s,l,c,u,p,d,h,m;return L((function(f){if(1==f.g){o=ei;a=Math.trunc((n.segments.length-1)/2);s=by(n.segments[a].i,i);l=new Je(s);c=l.ta.split(".").pop();u=ky[t];if((p=u[c])||(p=Oy[c])||(p=vy(t,r)))return f.return(p);d=$n([s],e.g.retryParameters);d.method="HEAD";return S(f,Ty(e,d,o,{type:1}),2)}h=f.h;return(m=h.headers["content-type"])?f.return(m.split(";")[0]):f.return(wy(t))}))}function Sy(e,t,r,n,i){e&&(e.width=Number(t)||void 0,e.height=Number(r)||void 0,e.frameRate=Number(n)||void 0,e.hdr=i||void 0)}function _y(e,t,r){return Ty(e,$n([t],e.g.retryParameters),0,{type:r?2:3})}function xy(e){var t,r;L((function(n){if(1==n.g){if(!e.i)return n.return();x(n,2);return S(n,e.update(),4)}if(2!=n.g)return Dy(e)&&(t=e.l,e.m.S(t)),C(n,0);r=T(n);if(!e.i)return n.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(r),n.return();r.severity=1;e.i.onError(r);e.m.S(.1);_(n)}))}function Dy(e){return e.ba!=Ay}function Cy(e,t){e.ba=t;e.j&&e.j.fc(!Dy(e));Dy(e)||e.m.stop()}function Ty(e,t,r,n){if(!e.K)throw new dt(2,7,7001);t=e.i.networkingEngine.request(r,t,n);Wn(e.K,t);return t.promise}V("shaka.hls.HlsParser",Rg);var Oy={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},ky={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Py={"com.apple.streamingkeydelivery":function(t,r){if("video/mp2t"==r)throw new dt(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new dt(2,4,4041);return bt("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=vg(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;t=vg(e,"URI");t=jg(t);t=de(t.data);t=bt("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);if(e=bg(e,"KEYID"))t.keyIds=new Set([e.toLowerCase().substr(2)]);return t},"com.microsoft.playready":function(e){var t=vg(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;e=vg(e,"URI");e=jg(e);e=de(e.data);t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);e=Vi(e,t,new Set,0);return bt("com.microsoft.playready",[{initDataType:"cenc",initData:e}])},identity:function(e){e=vg(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?bt("org.w3.clearkey",null):null}},Ay="VOD",Iy="EVENT",jy="LIVE",Ry={Qf:Ay,zh:Iy,Eh:jy};aa.m3u8=function(){return new Rg};oa["application/x-mpegurl"]=function(){return new Rg};oa["application/vnd.apple.mpegurl"]=function(){return new Rg};function Ny(e){var t=0,r=he(e),n=r.getUint32(t,!0);if(n!=e.byteLength)return[];e:{e=t+6;for(t=[];e<r.byteLength-1;){n=r.getUint16(e,!0);e+=2;var i=r.getUint16(e,!0);e+=2;if(0!=(i&1)||i+e>r.byteLength){r=[];break e}var o=de(r,e,i);t.push({type:n,value:o});e+=i}r=t}return r}function Ly(e){if(e=My(e))e:{e=u(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Wi(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function My(e){e=Ui(e.textContent);e=Ny(e).filter((function(e){return e.type===qy}))[0];if(!e)return null;e=bi(e.value,!0);return(e=uo(e,"WRMHEADER"))?e:null}var qy=1,Uy=(new Map).set("com.microsoft.playready",Ly).set("com.microsoft.playready.recommendation",Ly).set("com.microsoft.playready.software",Ly).set("com.microsoft.playready.hardware",Ly);function Hy(e){if(!$y){$y=!0;var t=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);ab=Ky("ftyp",t,n,t,r);t=Ky("dref",sb);lb=Ky("dinf",t)}this.g=e}Hy.prototype.initSegment=function(){var e=new Uint8Array([]);var t=u(this.g);for(var r=t.next();!r.done;r=t.next()){var n=e;e=r.value;r=Ky;var i=e.id+1;var o=e.stream.width||0,a=e.stream.height||0;"audio"==e.type&&(a=o=0);var s=e.duration*e.timescale,l=Math.floor(s/(Xy+1));s=Math.floor(s%(Xy+1));i=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(Wy(i,4)),[0,0,0,0],p(Wy(l,4)),p(Wy(s,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],p(Wy(o,2)),[0,0],p(Wy(a,2)),[0,0]));i=Ky("tkhd",i);o=Ky;l=e.duration*e.timescale;a=Math.floor(l/(Xy+1));l=Math.floor(l%(Xy+1));s=e.stream.language;s=s.charCodeAt(0)-96<<10|s.charCodeAt(1)-96<<5|s.charCodeAt(2)-96;a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(Wy(e.timescale,4)),p(Wy(a,4)),p(Wy(l,4)),p(Wy(s,2)),[0,0]));a=Ky("mdhd",a);l=e;s=new Uint8Array([]);switch(l.type){case"video":s=Qy;break;case"audio":s=Jy}l=Ky("hdlr",s);e:{switch(e.type){case"video":e=Ky("minf",Ky("vmhd",nb),lb,Fy(e));break e;case"audio":e=Ky("minf",Ky("smhd",ib),lb,Fy(e));break e}e=new Uint8Array([])}e=o("mdia",a,l,e);r=r("trak",i,e);e=Bi(n,r)}r=this.g[0];t=Ky;i=r.duration*r.timescale;n=Math.floor(i/(Xy+1));i=Math.floor(i%(Xy+1));n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(Wy(r.timescale,4)),p(Wy(n,4)),p(Wy(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));n=Ky("mvhd",n);o=new Uint8Array([]);i=u(this.g);for(a=i.next();!a.done;a=i.next())a=new Uint8Array([0,0,0,0].concat(p(Wy(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),a=Ky("trex",a),o=Bi(o,a);i=Ky("mvex",o);o=new Uint8Array([]);if(r.encrypted)for(r=u(r.stream.drmInfos),a=r.next();!a.done;a=r.next())if(a=a.value,a.initData)for(a=u(a.initData),l=a.next();!l.done;l=a.next())o=Bi(o,l.value.initData);t=t("moov",n,e,i,o);n=new Uint8Array(ab.byteLength+t.byteLength);n.set(ab);n.set(t,ab.byteLength);return n};function Fy(e){var t=Ky,r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){r=e.stream.width||0;var n=e.stream.height||0;if(0<e.la.byteLength)var i=Ky("avcC",e.la);else{i=Ky;for(var o=7,a=[],s=[],l=0,c=0,u=0,d=0;d<e.Ka.length;d++){var h=Gy(e.Ka[d]);switch(h[0]&31){case 7:a.push(h);o+=h.length+2;break;case 8:s.push(h),o+=h.length+2}}0<a.length&&(l=a[0][1],u=a[0][2],c=a[0][3]);o=new Uint8Array(o);d=0;o[d++]=1;o[d++]=l;o[d++]=u;o[d++]=c;o[d++]=255;o[d++]=224|a.length;for(l=0;l<a.length;l++)o[d++]=(a[l].length&65280)>>8,o[d++]=a[l].length&255,o.set(a[l],d),d+=a[l].length;o[d++]=s.length;for(a=0;a<s.length;a++)o[d++]=(s[a].length&65280)>>8,o[d++]=s[a].length&255,o.set(s[a],d),d+=s[a].length;i=i("avcC",o)}r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(p(Wy(r,2)),p(Wy(n,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]));n="avc1";s=new Uint8Array([]);e.encrypted&&(s=zy(e),n="encv");r=Ky(n,r,i,s)}else e.codecs.includes("hvc1")&&(n=e.stream.width||0,i=e.stream.height||0,r=new Uint8Array([]),0<e.la.byteLength&&(r=Ky("hvcC",e.la)),n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(p(Wy(n,2)),p(Wy(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",s=new Uint8Array([]),e.encrypted&&(s=zy(e),i="encv"),r=Ky(i,n,r,s));break;case"audio":if(e.codecs.includes("mp3"))e=Ky(".mp3",By(e));else if(e.codecs.includes("ac-3"))r=Ky("dac3",e.Z),n="ac-3",i=new Uint8Array([]),e.encrypted&&(i=zy(e),n="enca"),e=Ky(n,By(e),r,i);else if(e.codecs.includes("ec-3"))r=Ky("dec3",e.Z),n="ec-3",i=new Uint8Array([]),e.encrypted&&(i=zy(e),n="enca"),e=Ky(n,By(e),r,i);else{if(0<e.Z.byteLength)r=Ky("esds",e.Z);else{r=Ky;n=e.id+1;i=e.stream.bandwidth||0;s=e.stream.channelsCount||2;l=e.stream.audioSamplingRate||44100;c=vt("audio",e.codecs.split(","));u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};a=u[l];if("mp4a.40.5"===c||"mp4a.40.29"===c)a=u[2*l];l=parseInt(c.split(".").pop(),10);n=new Uint8Array([0,0,0,0,3,25].concat(p(Wy(n,2)),[0,4,17,64,21,0,6,0],p(Wy(i,4)),p(Wy(i,4)),[5,2,l<<3|a>>>1,a<<7|s<<3,6,1,2]));r=r("esds",n)}n="mp4a";i=new Uint8Array([]);e.encrypted&&(i=zy(e),n="enca");e=Ky(n,By(e),r,i)}r=e}e=Ky("stsd",ob,r);return t("stbl",e,Ky("stts",Zy),Ky("stsc",eb),Ky("stsz",rb),Ky("stco",tb))}function By(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(p(Wy(e.stream.audioSamplingRate||44100,2)),[0,0]))}function zy(e){var t=Ky;var r=e.codecs.substring(0,e.codecs.indexOf("."));for(var n=0,i=0;i<r.length;i+=1)n|=r.charCodeAt(i)<<8*(r.length-i-1);r=new Uint8Array([].concat(p(Wy(n,4))));r=Ky("frma",r);n=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);n=Ky("schm",n);i=Ky;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=u(e.stream.drmInfos);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&a.keyIds&&a.keyIds.size){a=u(a.keyIds);for(var s=a.next();!s.done;s=a.next())o=Gy(s.value)}e=new Uint8Array([0,0,0,0,0,0,1,8]);o=Ky("tenc",e,o);return t("sinf",r,n,i("schi",o))}function Vy(e){var t=new Uint8Array([]);e=u(e.g);for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=Ky,i=new Uint8Array([0,0,0,0].concat(p(Wy(r.data?r.data.lb:0,4))));i=Ky("mfhd",i);var o;var a=r.data?r.data.Ja:[];var s=new Uint8Array(4+a.length);for(o=0;o<a.length;o++){var l=a[o].flags;s[o+4]=l.Qa<<4|l.Ua<<2|l.Ta}a=Ky("sdtp",s);var c=a.length+92;s=Ky;o=new Uint8Array([0,0,0,58].concat(p(Wy(r.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));o=Ky("tfhd",o);l=r.data?r.data.baseMediaDecodeTime:0;var d=Math.floor(l%(Xy+1));l=new Uint8Array([1,0,0,0].concat(p(Wy(Math.floor(l/(Xy+1)),4)),p(Wy(d,4))));l=Ky("tfdt",l);var h=c;c=r.data?r.data.Ja:[];d=c.length;var m=12+16*d,f=new Uint8Array(m);h+=8+m;f.set(["video"===r.type?1:0,0,15,1].concat(p(Wy(d,4)),p(Wy(h,4))),0);for(h=0;h<d;h++){var g=c[h];m=Wy(g.duration,4);var y=Wy(g.size,4),b=g.flags;g=Wy(g.$a,4);f.set([].concat(p(m),p(y),[b.fb<<2|b.Qa,b.Ua<<6|b.Ta<<4|b.gb,b.Pa&61440,b.Pa&15],p(g)),12+16*h)}c=Ky("trun",f);a=s("traf",o,l,c,a);n=n("moof",i,a);i=r.data?r.data.Ja:[];r=new Uint8Array([]);i=u(i);for(a=i.next();!a.done;a=i.next())r=Bi(r,a.value.data);r=Ky("mdat",r);t=Bi(t,n,r)}return t}function Wy(e,t){var r=[];for(--t;0<=t;t--)r.push(e>>8*t&255);return r}function Gy(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length/2;r+=1)t[r]=parseInt(String(e[2*r]+e[2*r+1]),16);return t}function Ky(e){var t=M.apply(1,arguments),r=Yy[e];r||(r=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Yy[e]=r);for(var n=8,i=t.length-1;0<=i;i--)n+=t[i].byteLength;i=new Uint8Array(n);i[0]=n>>24&255;i[1]=n>>16&255;i[2]=n>>8&255;i[3]=n&255;i.set(r,4);r=0;for(n=8;r<t.length;r++)i.set(t[r],n),n+=t[r].byteLength;return i}var $y=!1,Xy=Math.pow(2,32)-1,Yy={},Qy=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Jy=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Zy=new Uint8Array([0,0,0,0,0,0,0,0]),eb=new Uint8Array([0,0,0,0,0,0,0,0]),tb=new Uint8Array([0,0,0,0,0,0,0,0]),rb=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),nb=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ib=new Uint8Array([0,0,0,0,0,0,0,0]),ob=new Uint8Array([0,0,0,0,0,0,0,1]),ab=new Uint8Array([]),sb=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),lb=new Uint8Array([]);function cb(){var e=this;this.h=this.g=null;this.l=[];this.j=null;this.s=1;this.i=null;this.A=new G(5);this.o=new Jt((function(){ub(e)}));this.u=new Vn;this.m=new Map}n=cb.prototype;n.configure=function(e){this.g=e};n.start=function(e,t){var r=this;return L((function(n){if(1==n.g)return r.l=[e],r.h=t,S(n,pb(r),2);if(!r.h)throw new dt(2,7,7001);return n.return(r.j)}))};function ub(e){var t;L((function(r){switch(r.g){case 1:return x(r,2),S(r,pb(e),4);case 4:C(r,3);break;case 2:t=T(r),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return r.return();_(r)}}))}n.stop=function(){this.g=this.h=null;this.l=[];this.j=null;null!=this.o&&(this.o.stop(),this.o=null);this.m.clear();return this.u.destroy()};n.update=function(){var e=this,t;return L((function(r){if(1==r.g)return x(r,2),S(r,pb(e),4);if(2!=r.g)return C(r,0);t=T(r);if(!e.h||!t)return r.return();e.h.onError(t);_(r)}))};n.onExpirationUpdated=function(){};function pb(e){var t,r,n,i,o,a,s;return L((function(l){if(1==l.g)return t=$n(e.l,e.g.retryParameters),r=e.h.networkingEngine,n=Date.now(),i=r.request(0,t,{type:5}),Wn(e.u,i),S(l,i.promise,2);o=l.h;if(!e.h)return l.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var c=o.uri,d=po(o.data,"SmoothStreamingMedia");if(!d)throw new dt(2,4,4046,c);(c=e.g.mss.manifestPreprocessor)&&c(d);e.i||(e.i=new Is(null,0));if(c=eo(d,"IsLive",lo,!1))throw new dt(2,4,4047);e.i.fc(!c);var h=eo(d,"TimeScale",ao,1e7),m=eo(d,"DVRWindowLength",ao);c&&(0===m||isNaN(m))&&(m=Infinity);var f=eo(d,"CanSeek",lo,!1);0===m&&f&&(m=Infinity);f=null;m&&0<m&&(f=m/h);c&&!isNaN(e.g.availabilityWindowOverride)&&(f=e.g.availabilityWindowOverride);null==f&&(f=Infinity);e.i.Nd(f);m=eo(d,"Duration",ao,Infinity);c||e.i.Aa(m/h);c={variants:[],textStreams:[],timescale:h,duration:m/h};f=Ki(d,"Protection");var g;h=e.g.mss.keySystemsBySystemId;m=[];f=u(f);for(g=f.next();!g.done;g=f.next())m=m.concat(Ki(g.value,"ProtectionHeader"));if(m.length){f=[];for(g=0;g<m.length;g++){var y=m[g],b=y.getAttribute("SystemID").toLowerCase(),v=h[b];if(v){var w=My(y);if(w)e:{w=u(w.getElementsByTagName("DATA"));for(var E=w.next();!E.done;E=w.next())if(E=Wi(E.value,"KID")){w=Ui(E.textContent);w=new Uint8Array([w[3],w[2],w[1],w[0],w[5],w[4],w[7],w[6]].concat(p(w.slice(8))));w=Fi(w);break e}w=null}else w=null;E=Ui(y.textContent);b=Hi(b.replace(/-/g,""));b=[{initData:Vi(E,b,new Set,0),initDataType:"cenc",keyId:w}];b=bt(v,b);w&&b.keyIds.add(w);if(v=Uy.get(v))b.licenseServerUri=v(y);f.push(b)}}h=f}else h=[];g=h;f=[];h=[];m=[];d=Ki(d,"StreamIndex");d=u(d);for(y=d.next();!y.done;y=d.next()){y=y.value;v=Ki(y,"QualityLevel");b=c.timescale;w=c.duration;E=Ki(y,"c");for(var x=[],D=0,C=0;C<E.length;++C){var T=E[C],O=E[C+1],k=eo(T,"t",ao),P=eo(T,"d",ao);T=eo(T,"r",io);if(!P)break;k=null!=k?k:D;T=T||0;if(0>T)if(O){O=eo(O,"t",ao);if(null==O)break;else if(k>=O)break;T=Math.ceil((O-k)/P)-1}else{if(Infinity==w)break;else if(k/b>=w)break;T=Math.ceil((w*b-k)/P)-1}for(O=0;O<=T;++O)D=k+P,x.push({start:k/b,end:D/b,Ve:k}),k=D}b=x;v=u(v);for(w=v.next();!w.done;w=v.next())(w=db(e,y,w.value,b,g,c))&&("audio"!=w.type||e.g.disableAudio?"video"!=w.type||e.g.disableVideo?w.type!=Et||e.g.disableText||m.push(w):h.push(w):f.push(w))}d=[];f=u(0<f.length?f:[null]);for(g=f.next();!g.done;g=f.next())for(g=g.value,y=u(0<h.length?h:[null]),w=y.next();!w.done;w=y.next())v=d,b=v.push,w=w.value,E=0,g&&g.bandwidth&&0<g.bandwidth&&(E+=g.bandwidth),w&&w.bandwidth&&0<w.bandwidth&&(E+=w.bandwidth),w={id:e.s++,language:g?g.language:"und",disabledUntilTime:0,primary:!!g&&g.primary||!!w&&w.primary,audio:g,video:w,bandwidth:E,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},b.call(v,w);c.variants=d;c.textStreams=m;e.j?(e.j.variants=c.variants,e.j.textStreams=c.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:c.variants,textStreams:c.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.Dd());Promise.resolve();a=Date.now();s=(a-n)/1e3;e.A.sample(1,s);_(l)}))}function db(e,t,r,n,i,o){var a=t.getAttribute("Type");if("audio"!==a&&"video"!==a&&"text"!==a)return Q("Ignoring unrecognized type:",a),null;var s=t.getAttribute("Language"),l=e.s++,c=eo(r,"Bitrate",oo),u=eo(r,"MaxWidth",oo),p=eo(r,"MaxHeight",oo),d=eo(r,"Channels",oo),h=eo(r,"SamplingRate",oo),m=o.duration;n.length&&(m=n[n.length-1].end-n[0].start);var f=e.i.getDuration();e.i.Aa(Math.min(m,f));var g={id:l,originalId:t.getAttribute("Name")||String(l),createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:c||0,width:u||void 0,height:p||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:Vt(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:d,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1};if(i=t.getAttribute("Subtype"))(i=bb[i])&&g.roles.push(i),"main"===i&&(g.primary=!0);i=r.getAttribute("FourCC");if(null===i||""===i)i=t.getAttribute("FourCC");if(!i)if("audio"===a)i="AAC";else if("video"===a)return Q('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!yb.includes(i.toUpperCase()))return Q("Codec not supported:",i),null;r=hb(r,a,i,g);g.mssPrivateData.codecPrivateData=r;switch(a){case"audio":if(!r)return Q("Quality unsupported without CodecPrivateData",a),null;g.type="audio";g.mimeType="mss/audio/mp4";g.codecs=mb(i,r);break;case"video":if(!r)return Q("Quality unsupported without CodecPrivateData",a),null;g.type="video";g.mimeType="mss/video/mp4";g.codecs=fb(r);break;case"text":if(g.type=Et,g.mimeType="application/mp4","TTML"===i||"DFXP"===i)g.codecs="stpp"}g.createSegmentIndex=function(){if(g.segmentIndex)return Promise.resolve();if(e.m.has(g.id))var r=e.m.get(g.id);else r=[],"video"==g.type&&(r=g.mssPrivateData.codecPrivateData.split("00000001").slice(1)),r={id:g.id,type:g.type,codecs:g.codecs,encrypted:g.encrypted,timescale:g.mssPrivateData.timescale,duration:g.mssPrivateData.duration,Ka:r,Z:new Uint8Array([]),la:new Uint8Array([]),data:null,stream:g},r=new Hy([r]).initSegment(),e.m.set(g.id,r);r=gb(e,new pa((function(){return[]}),0,null,null,void 0,r),g,t,n);g.segmentIndex=new el(r);return Promise.resolve()};g.closeSegmentIndex=function(){g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null)};return g}function hb(e,t,r,n){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=n.channelsCount||2;e=n.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};n=i[e];if("AACH"===r)return r=new Uint8Array(4),e=i[2*e],r[0]=40|n>>1,r[1]=n<<7|t<<3|e>>1,r[2]=e<<7|8,r[3]=0,t=new Uint16Array(2),t[0]=(r[0]<<8)+r[1],t[1]=(r[2]<<8)+r[3],t[0].toString(16)+t[1].toString(16);r=new Uint8Array(2);r[0]=16|n>>1;r[1]=n<<7|t<<3;t=new Uint16Array(1);t[0]=(r[0]<<8)+r[1];return t[0].toString(16)}function mb(e,t){var r=0;"AACH"===e&&(r=5);t?0===r&&(r=(parseInt(t.substr(0,2),16)&248)>>3):(r=2,"AACH"===e&&(r=5));return"mp4a.40."+r}function fb(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function gb(e,t,r,n,i){var o=n.getAttribute("Url").replace("{bitrate}",String(r.bandwidth));n=[];var a={};i=u(i);for(var s=i.next();!s.done;a={uc:a.uc},s=i.next())a.uc=s.value,n.push(new ha(a.uc.start,a.uc.end,function(t){return function(){return yt(e.l,[o.replace("{start time}",String(t.uc.Ve))])}}(a),0,null,t,0,0,r.mssPrivateData.duration));return n}V("shaka.mss.MssParser",cb);var yb="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),bb={CAPT:"main",SUBT:"alternate",DESC:"main"};aa.ism=function(){return new cb};oa["application/vnd.ms-sstr+xml"]=function(){return new cb};function vb(e,t,r,n,i,o){if(200<=r&&299>=r&&202!=r)return{uri:i||n,originalUri:n,data:t,status:r,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=vi(t)}catch(e){}throw new dt(401==r||403==r?2:1,1,1001,n,r,i,e,o)}function wb(){}function Eb(e,t,r,n,i){var o=new Ob;hi(t.headers).forEach((function(e,t){o.append(t,e)}));var a=new Cb,s={af:!1,Lf:!1};e=Sb(e,r,{body:t.body||void 0,headers:o,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,n,i,t.streamDataCallback);e=new An(e,(function(){s.af=!0;a.abort();return Promise.resolve()}));if(t=t.retryParameters.timeout){var l=new Jt((function(){s.Lf=!0;a.abort()}));l.S(t/1e3);e.finally((function(){l.stop()}))}return e}function Sb(e,t,r,n,i,o,a){var s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:return s=Db,l=Tb,d=p=0,h=Date.now(),x(w,2),S(w,s(e,r),4);case 4:c=w.h;o(_b(c.headers));if("HEAD"==r.method){w.B(5);break}m=c.clone().body.getReader();g=(f=c.headers.get("Content-Length"))?parseInt(f,10):0;y=function(e){function t(){var r,n;return L((function(o){switch(o.g){case 1:return x(o,2),S(o,m.read(),4);case 4:r=o.h;C(o,3);break;case 2:return T(o),o.return();case 3:if(r.done){o.B(5);break}p+=r.value.byteLength;if(!a){o.B(5);break}return S(o,a(r.value),5);case 5:n=Date.now();if(100<n-h||r.done)i(n-h,p-d,g-p),d=p,h=n;r.done?e.close():(e.enqueue(r.value),t());_(o)}}))}t()};new l({start:y});return S(w,c.arrayBuffer(),6);case 6:u=w.h;case 5:C(w,3);break;case 2:b=T(w);if(n.af)throw new dt(1,1,7001,e,t);if(n.Lf)throw new dt(1,1,1003,e,t);throw new dt(1,1,1002,e,b,t);case 3:return v=_b(c.headers),w.return(vb(v,u,c.status,e,c.url,t))}}))}function _b(e){var t={};e.forEach((function(e,r){t[r.trim()]=e}));return t}function xb(){if(e.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(e.Response){if(!new Response("").body)return!1}else return!1;return!(!e.fetch||!e.AbortController)}V("shaka.net.HttpFetchPlugin",wb);wb.isSupported=xb;wb.parse=Eb;var Db=e.fetch,Cb=e.AbortController,Tb=e.ReadableStream,Ob=e.Headers;xb()&&(Kn("http",Eb,2,!0),Kn("https",Eb,2,!0),Kn("blob",Eb,2,!0));function kb(){}function Pb(e,t,r,n,i){var o=new Ib,a=Date.now(),s=0,l=new Promise((function(l,c){o.open(t.method,e,!0);o.responseType="arraybuffer";o.timeout=t.retryParameters.timeout;o.withCredentials=t.allowCrossSiteCredentials;o.onabort=function(){c(new dt(1,1,7001,e,r))};var u=!1;o.onreadystatechange=function(){if(2==o.readyState&&!u){var e=Ab(o);i(e);u=!0}};o.onload=function(){var t=Ab(o),n=o.response;try{var i=vb(t,n,o.status,e,o.responseURL,r);l(i)}catch(e){c(e)}};o.onerror=function(t){c(new dt(1,1,1002,e,t,r))};o.ontimeout=function(){c(new dt(1,1,1003,e,r))};o.onprogress=function(e){var t=Date.now();if(100<t-a||e.lengthComputable&&e.loaded==e.total)n(t-a,e.loaded-s,e.total-e.loaded),s=e.loaded,a=t};for(var p in t.headers)o.setRequestHeader(p.toLowerCase(),t.headers[p]);o.send(t.body)}));return new An(l,(function(){o.abort();return Promise.resolve()}))}function Ab(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value.split(": "),e[r[0].toLowerCase()]=r.slice(1).join(": ");return e}V("shaka.net.HttpXHRPlugin",kb);kb.parse=Pb;var Ib=e.XMLHttpRequest;Kn("http",Pb,1,!0);Kn("https",Pb,1,!0);Kn("blob",Pb,1,!0);function jb(e,t,r,n){this.g=e;this.i=t;this.groupId=r;this.h=n}function Rb(e){return e.wa().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.ia}function Nb(e,t){return Cl(e.g.wa(),e.g.Ba,e.g.ia,t.streaming.retryParameters)}function Lb(){this.h=this.j=this.i=0;this.g=new Map;this.l=0}function Mb(e,t){e.i+=t;var r=e.l;e.l++;e.g.set(r,t);return r}Lb.prototype.close=function(e,t){if(this.g.has(e)){var r=this.g.get(e);this.g.delete(e);this.j+=r;this.h+=t}};function qb(e){var t=this;this.o=e;this.j=new Map;this.i=new ni((function(){return Hb(t).catch((function(){}))}));this.h=[];this.m=function(){};this.l=function(){};this.g=new Lb}qb.prototype.destroy=function(){return this.i.destroy()};function Ub(e,t,r){e.m=t;e.l=r}function Hb(e){var t=e.h.map((function(e){return e()}));e.h=[];return Promise.all(t)}function Fb(e,t,r,n,i,o){ii(e.i);var a=(e.j.get(t)||Promise.resolve()).then((function(){var t,a,s,l,c,u,p;return L((function(d){if(1==d.g)return S(d,zb(e,r),2);t=d.h;if(e.i.g)throw new dt(2,9,7001);if(i)for(l in a=de(t),s=new zi(a),s.data)c=Number(l),u=s.data[c],p=s.g[c],e.l(u,p);e.g.close(n,t.byteLength);var h=e.g;e.m(0==h.i?0:h.j/h.i,e.g.h);return d.return(o(t))}))}));e.j.set(t,a)}function Bb(e){return L((function(t){return 1==t.g?S(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}function zb(e,t){var r,n,i,o;return L((function(a){if(1==a.g)return r=ei,n=e.o.request(r,t),i=function(){return n.abort()},e.h.push(i),S(a,n.promise,2);o=a.h;we(e.h,i);return a.return(o.data)}))}function Vb(e,t){var r=this;this.i=e;this.h=e.objectStore(t);this.g=new Pn;e.onabort=function(e){e.preventDefault();r.g.reject()};e.onerror=function(e){e.preventDefault();r.g.reject()};e.oncomplete=function(){r.g.resolve()}}Vb.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(e){}x(t,2);return S(t,e.g,4)}if(2!=t.g)return C(t,0);T(t);_(t)}))};function Wb(e,t){return new Promise((function(r,n){var i=e.h.openCursor();i.onerror=n;i.onsuccess=function(){var e;return L((function(n){if(1==n.g){if(null==i.result)return r(),n.return();e=i.result;return S(n,t(e.key,e.value,e),2)}e.continue();_(n)}))}}))}Vb.prototype.store=function(){return this.h};Vb.prototype.promise=function(){return this.g};function Gb(e){this.h=e;this.g=[]}Gb.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))};function Kb(e,t){return $b(e,t,"readwrite")}function $b(e,t,r){r=e.h.transaction([t],r);var n=new Vb(r,t);e.g.push(n);n.promise().then((function(){we(e.g,n)}),(function(){we(e.g,n)}));return n}function Xb(e,t,r){this.h=new Gb(e);this.i=t;this.g=r}n=Xb.prototype;n.destroy=function(){return this.h.destroy()};n.hasFixedKeySpace=function(){return!0};n.addSegments=function(){return Qb(this.i)};n.removeSegments=function(e,t){return Jb(this,this.i,e,t)};n.getSegments=function(e){var t=this,r;return L((function(n){if(1==n.g)return S(n,Zb(t,t.i,e),2);r=n.h;return n.return(r.map((function(e){return t.cf(e)})))}))};n.addManifests=function(){return Qb(this.g)};n.updateManifest=function(){return Promise.reject(new dt(2,9,9016,"Cannot modify values in "+this.g))};function Yb(e,t,r){e=Kb(e.h,e.g);var n=e.store();n.get(t).onsuccess=function(){n.put(r,t)};return e.promise()}n.updateManifestExpiration=function(e,t){var r=Kb(this.h,this.g),n=r.store();n.get(e).onsuccess=function(r){if(r=r.target.result)r.expiration=t,n.put(r,e)};return r.promise()};n.removeManifests=function(e,t){return Jb(this,this.g,e,t)};n.getManifests=function(e){var t=this,r;return L((function(n){if(1==n.g)return S(n,Zb(t,t.g,e),2);r=n.h;return n.return(Promise.all(r.map((function(e){return t.Cc(e)}))))}))};n.getAllManifests=function(){var e=this,t,r;return L((function(n){return 1==n.g?(t=$b(e.h,e.g,"readonly"),r=new Map,S(n,Wb(t,(function(t,n){var i;return L((function(o){if(1==o.g)return S(o,e.Cc(n),2);i=o.h;r.set(t,i);_(o)}))})),2)):3!=n.g?S(n,t.promise(),3):n.return(r)}))};n.cf=function(e){return e};n.Cc=function(e){return Promise.resolve(e)};function Qb(e){return Promise.reject(new dt(2,9,9011,"Cannot add new value to "+e))}n.add=function(e,t){var r=this,n,i,o,a,s,l,c;return L((function(p){if(1==p.g){n=Kb(r.h,e);i=n.store();o=[];a={};s=u(t);for(l=s.next();!l.done;a={dd:a.dd},l=s.next())c=l.value,a.dd=i.add(c),a.dd.onsuccess=function(e){return function(){o.push(e.dd.result)}}(a);return S(p,n.promise(),2)}return p.return(o)}))};function Jb(e,t,r,n){e=Kb(e.h,t);t=e.store();var i={};r=u(r);for(var o=r.next();!o.done;i={bd:i.bd},o=r.next())i.bd=o.value,t.delete(i.bd).onsuccess=function(e){return function(){return n(e.bd)}}(i);return e.promise()}function Zb(e,t,r){var n,i,o,a,s,l,c;return L((function(p){if(1==p.g){n=$b(e.h,t,"readonly");i=n.store();o={};a=[];s={};l=u(r);for(c=l.next();!c.done;s={sc:s.sc,pc:s.pc},c=l.next())s.pc=c.value,s.sc=i.get(s.pc),s.sc.onsuccess=function(e){return function(){void 0==e.sc.result&&a.push(e.pc);o[e.pc]=e.sc.result}}(s);return S(p,n.promise(),2)}if(a.length)throw new dt(2,9,9012,"Could not find values for "+a);return p.return(r.map((function(e){return o[e]})))}))}function ev(e){this.g=new Gb(e)}ev.prototype.destroy=function(){return this.g.destroy()};ev.prototype.getAll=function(){var e=this,t,r;return L((function(n){return 1==n.g?(t=$b(e.g,"session-ids","readonly"),r=[],S(n,Wb(t,(function(e,t){r.push(t)})),2)):3!=n.g?S(n,t.promise(),3):n.return(r)}))};ev.prototype.add=function(e){var t=Kb(this.g,"session-ids"),r=t.store();e=u(e);for(var n=e.next();!n.done;n=e.next())r.add(n.value);return t.promise()};ev.prototype.remove=function(e){var t=this,r;return L((function(n){return 1==n.g?(r=Kb(t.g,"session-ids"),S(n,Wb(r,(function(t,r,n){e.includes(r.sessionId)&&n.delete()})),2)):S(n,r.promise(),0)}))};function tv(){this.g=new Map}tv.prototype.destroy=function(){for(var e=[],t=u(this.g.values()),r=t.next();!r.done;r=t.next())e.push(r.value.destroy());this.g.clear();return Promise.all(e)};tv.prototype.init=function(){var e=this;cv.forEach((function(t,r){(t=t())&&e.g.set(r,t)}));for(var t=[],r=u(this.g.values()),n=r.next();!n.done;n=r.next())t.push(n.value.init());return Promise.all(t)};function rv(e){var t=null;e.g.forEach((function(e,r){e.getCells().forEach((function(e,n){e.hasFixedKeySpace()||t||(t={path:{Fa:r,na:n},na:e})}))}));if(t)return t;throw new dt(2,9,9013,"Could not find a cell that supports add-operations")}function nv(e,t){e.g.forEach((function(e,r){e.getCells().forEach((function(e,n){t({Fa:r,na:n},e)}))}))}function iv(e,t,r){e=e.g.get(t);if(!e)throw new dt(2,9,9013,"Could not find mechanism with name "+t);t=e.getCells().get(r);if(!t)throw new dt(2,9,9013,"Could not find cell with name "+r);return t}function ov(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}function av(e){var t=Array.from(e.g.keys());if(!t.length)throw new dt(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function sv(e){var t,r,n;return L((function(i){return 1==i.g?(t=Array.from(e.g.values()),r=0<t.length,r||(n=cv,n.forEach((function(e){(e=e())&&t.push(e)}))),S(i,Promise.all(t.map((function(e){return e.erase()}))),2)):r?i.B(0):S(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}function lv(e,t){cv.set(e,t)}V("shaka.offline.StorageMuxer",tv);tv.unregister=function(e){cv.delete(e)};tv.register=lv;tv.prototype.destroy=tv.prototype.destroy;var cv=new Map;function uv(){Xb.apply(this,arguments)}b(uv,Xb);uv.prototype.updateManifestExpiration=function(e,t){var r=this,n,i,o;return L((function(a){n=Kb(r.h,r.g);i=n.store();o=new Pn;i.get(e).onsuccess=function(r){(r=r.target.result)?(r.expiration=t,i.put(r),o.resolve()):o.reject(new dt(2,9,9012,"Could not find values for "+e))};return S(a,Promise.all([n.promise(),o]),0)}))};uv.prototype.Cc=function(e){var t,r,n,i,o,a;return L((function(s){if(1==s.g){t=[];for(r=0;r<e.periods.length;++r)n=r==e.periods.length-1?e.duration:e.periods[r+1].startTime,i=n-e.periods[r].startTime,o=pv(e.periods[r],i),t.push(o);return S(s,yf(t),2)}a=s.h;return s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?Infinity:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))};function pv(e,t){mv(e);for(var r=u(e.streams),n=r.next();!n.done;n=r.next());return e.streams.map((function(r){return dv(r,e.startTime,t)}))}function dv(e,t,r){var n=e.initSegmentUri?hv(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+r;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:n,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var r=hv(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:r,initSegmentKey:n,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}uv.prototype.cf=function(e){return{data:e.data}};function hv(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new dt(2,9,9004,"Could not parse uri "+e)}function mv(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));e=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var r=u(t),n=r.next();!n.done;n=r.next())n.value.variantIds=[];r=u(e);for(n=r.next();!n.done;n=r.next())n.value.variantIds=[];r=0;if(e.length&&!t.length){var i=r++,o=u(e);for(n=o.next();!n.done;n=o.next())n.value.variantIds.push(i)}if(!e.length&&t.length)for(i=r++,o=u(t),n=o.next();!n.done;n=o.next())n.value.variantIds.push(i);if(e.length&&t.length)for(t=u(t),n=t.next();!n.done;n=t.next())for(n=n.value,i=u(e),o=i.next();!o.done;o=i.next()){o=o.value;var a=r++;n.variantIds.push(a);o.variantIds.push(a)}}}function fv(){Xb.apply(this,arguments)}b(fv,Xb);fv.prototype.Cc=function(e){var t,r,n,i,o,a;return L((function(s){if(1==s.g){t=[];for(r=0;r<e.periods.length;++r){n=r==e.periods.length-1?e.duration:e.periods[r+1].startTime;i=n-e.periods[r].startTime;for(var l=e.periods[r],c=[],p=u(l.streams),d=p.next();!d.done;d=p.next())d=d.value,0!=d.variantIds.length&&c.push(gv(d,l.startTime,l.startTime+i));o=c;t.push(o)}return S(s,yf(t),2)}a=s.h;return s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?Infinity:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a,sequenceMode:!1})}))};function gv(e,t,r){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(n){return{startTime:t+n.startTime,endTime:t+n.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:r,timestampOffset:t-e.presentationTimeOffset,dataKey:n.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function yv(){Xb.apply(this,arguments)}b(yv,Xb);n=yv.prototype;n.hasFixedKeySpace=function(){return!1};n.addSegments=function(e){return this.add(this.i,e)};n.addManifests=function(e){return this.add(this.g,e)};n.updateManifest=function(e,t){return Yb(this,e,t)};n.Cc=function(e){null==e.expiration&&(e.expiration=Infinity);return Promise.resolve(e)};function bv(){this.m=this.j=this.i=this.h=this.g=this.l=null}n=bv.prototype;n.init=function(){var t=this,r=new Pn,n=!1,i=new Jt((function(){n=!0;r.reject(new dt(2,9,9017))}));i.S(5);var o=e.indexedDB.open("shaka_offline_db",5);o.onsuccess=function(){if(!n){var e=o.result;t.l=e;var a=e.objectStoreNames;a=a.contains("manifest")&&a.contains("segment")?new uv(e,"segment","manifest"):null;t.g=a;a=e.objectStoreNames;a=a.contains("manifest-v2")&&a.contains("segment-v2")?new fv(e,"segment-v2","manifest-v2"):null;t.h=a;a=e.objectStoreNames;a=a.contains("manifest-v3")&&a.contains("segment-v3")?new fv(e,"segment-v3","manifest-v3"):null;t.i=a;a=e.objectStoreNames;a=a.contains("manifest-v5")&&a.contains("segment-v5")?new yv(e,"segment-v5","manifest-v5"):null;t.j=a;e=e.objectStoreNames.contains("session-ids")?new ev(e):null;t.m=e;i.stop();r.resolve()}};o.onupgradeneeded=function(){for(var e=o.result,t=u(["segment-v5","manifest-v5","session-ids"]),r=t.next();!r.done;r=t.next())r=r.value,e.objectStoreNames.contains(r)||e.createObjectStore(r,{autoIncrement:!0})};o.onerror=function(e){n||(r.reject(new dt(2,9,9001,o.error)),i.stop(),e.preventDefault())};return r};n.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.B(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),_(t)}}))};n.getCells=function(){var e=new Map;this.g&&e.set("v1",this.g);this.h&&e.set("v2",this.h);this.i&&e.set("v3",this.i);this.j&&e.set("v5",this.j);return e};n.getEmeSessionCell=function(){return this.m};n.erase=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.B(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.B(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.B(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.B(8);break}return S(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),S(t,vv(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,S(t,e.init(),0)}}))};function vv(){var t=new Pn,r=e.indexedDB.deleteDatabase("shaka_offline_db");r.onblocked=function(){};r.onsuccess=function(){t.resolve()};r.onerror=function(e){t.reject(new dt(2,9,9001,r.error));e.preventDefault()};return t}lv("idb",(function(){return lr("CrKey")||rr()||!e.indexedDB?null:new bv}));function wv(e,t,r,n){this.g=e;this.i=t;this.h=r;this.l=n;this.j=["offline:",e,"/",t,"/",r,"/",n].join("")}wv.prototype.Fa=function(){return this.i};wv.prototype.na=function(){return this.h};wv.prototype.key=function(){return this.l};wv.prototype.toString=function(){return this.j};function Ev(e){e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e);if(null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var r=e[2];if(!r)return null;var n=e[3];return n&&null!=t?new wv(t,r,n,Number(e[4])):null}function Sv(e,t){this.h=e;this.g=t}function _v(e,t){var r=new Is(null,0);r.Aa(t.duration);var n=t.streams.filter((function(e){return"audio"==e.type})),i=t.streams.filter((function(e){return"video"==e.type}));n=xv(e,n,i,r);i=t.streams.filter((function(e){return e.type==Et})).map((function(t){return Dv(e,t,r)}));var o=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Dv(e,t,r)})),a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=u(n.values()),l=s.next();!l.done;l=s.next())l=l.value,l.audio&&l.audio.encrypted&&(l.audio.drmInfos=a),l.video&&l.video.encrypted&&(l.video.drmInfos=a);return{presentationTimeline:r,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(n.values()),textStreams:i,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function xv(e,t,r,n){for(var i=new Set,o=u(t),a=o.next();!a.done;a=o.next()){var s=u(a.value.variantIds);for(a=s.next();!a.done;a=s.next())i.add(a.value)}o=u(r);for(a=o.next();!a.done;a=o.next())for(s=u(a.value.variantIds),a=s.next();!a.done;a=s.next())i.add(a.value);o=new Map;i=u(i);for(a=i.next();!a.done;a=i.next())a=a.value,o.set(a,{id:a,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});t=u(t);for(i=t.next();!i.done;i=t.next())for(i=i.value,a=Dv(e,i,n),s=u(i.variantIds),i=s.next();!i.done;i=s.next())i=o.get(i.value),i.language=a.language,i.primary=i.primary||a.primary,i.audio=a;r=u(r);for(t=r.next();!t.done;t=r.next())for(i=t.value,t=Dv(e,i,n),a=u(i.variantIds),i=a.next();!i.done;i=a.next())i=o.get(i.value),i.primary=i.primary||t.primary,i.video=t;return o}function Dv(e,t,r){var n=t.segments.map((function(t){return Cv(e,t)}));r.Pc(n);return{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new el(n),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external}}function Cv(e,t){var r=new wv("segment",e.h,e.g,t.dataKey);return new ha(t.startTime,t.endTime,(function(){return[r.toString()]}),0,null,null!=t.initSegmentKey?Tv(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function Tv(e,t){var r=new wv("segment",e.h,e.g,t);return new pa((function(){return[r.toString()]}),0,null)}function Ov(){this.g=null}n=Ov.prototype;n.configure=function(){};n.start=function(e,t){var r=this,n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:n=Ev(e);r.g=n;if(null==n||"manifest"!=n.g)throw new dt(2,1,9004,e);i=new tv;D(u);return S(u,i.init(),4);case 4:return S(u,iv(i,n.Fa(),n.na()),5);case 5:return o=u.h,S(u,o.getManifests([n.key()]),6);case 6:return a=u.h,s=a[0],l=new Sv(n.Fa(),n.na()),c=_v(l,s),t.makeTextStreamsForClosedCaptions(c),u.return(c);case 2:return O(u),S(u,i.destroy(),7);case 7:k(u,0)}}))};n.stop=function(){return Promise.resolve()};n.update=function(){};n.onExpirationUpdated=function(e,t){var r=this,n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:return n=r.g,i=new tv,x(u,2,3),S(u,i.init(),5);case 5:return S(u,iv(i,n.Fa(),n.na()),6);case 6:return o=u.h,S(u,o.getManifests([n.key()]),7);case 7:a=u.h;s=a[0];l=s.sessionIds.includes(e);c=void 0==s.expiration||s.expiration>t;if(!l||!c){u.B(3);break}return S(u,o.updateManifestExpiration(n.key(),t),3);case 3:return O(u),S(u,i.destroy(),10);case 10:k(u,0);break;case 2:T(u),u.B(3)}}))};oa["application/x-offline-manifest"]=function(){return new Ov};function kv(){}function Pv(e){var t=Ev(e);t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Rn(e)):e=t&&"segment"==t.g?Av(t.key(),t):In(new dt(2,1,9004,e));return e}function Av(e,t){var r=new tv;return Rn(void 0).ea((function(){return r.init()})).ea((function(){return iv(r,t.Fa(),t.na())})).ea((function(e){return e.getSegments([t.key()])})).ea((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return r.destroy()}))}V("shaka.offline.OfflineScheme",kv);kv.plugin=Pv;Kn("offline",Pv);function Iv(e,t,r){var n,i,o,a,s,l;return L((function(c){switch(c.g){case 1:n=[];for(var p=[],d=u(r),h=d.next();!h.done;h=d.next()){h=h.value;for(var m=!1,f=u(p),g=f.next();!g.done;g=f.next())if(g=g.value,Rv(g.info,h)){g.sessionIds.push(h.sessionId);m=!0;break}m||p.push({info:h,sessionIds:[h.sessionId]})}i=u(p);o=i.next();case 2:if(o.done){c.B(4);break}a=o.value;s=jv(e,t,a);return S(c,s,5);case 5:l=c.h;n=n.concat(l);o=i.next();c.B(2);break;case 4:return c.return(n)}}))}function jv(e,t,r){var n,i;return L((function(o){switch(o.g){case 1:return n=new mo({Ib:t,onError:function(){},Jd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),x(o,2),n.configure(e),S(o,bo(n,r.info.keySystem,r.info.licenseUri,r.info.serverCertificate,r.info.audioCapabilities,r.info.videoCapabilities),4);case 4:C(o,3);break;case 2:return T(o),S(o,n.destroy(),5);case 5:return o.return([]);case 3:return x(o,6),S(o,So(n),8);case 8:C(o,7);break;case 6:return T(o),S(o,n.destroy(),9);case 9:return o.return([]);case 7:return i=[],S(o,Promise.all(r.sessionIds.map((function(e){return L((function(t){if(1==t.g)return x(t,2),S(t,_o(n,e),4);if(2!=t.g)return i.push(e),C(t,0);T(t);_(t)}))}))),10);case 10:return S(o,n.destroy(),11);case 11:return o.return(i)}}))}function Rv(e,t){function r(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Ee(e.audioCapabilities,t.audioCapabilities,r)&&Ee(e.videoCapabilities,t.videoCapabilities,r)}function Nv(e,t,r){var n=t.presentationTimeline.getDuration();t=Mv(t);return{offlineUri:null,originalManifestUri:e,duration:n,size:0,expiration:Infinity,tracks:t,appMetadata:r,isIncomplete:!1}}function Lv(e,t){var r=_v(new Sv(e.Fa(),e.na()),t),n=t.appMetadata||{};r=Mv(r);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:r,appMetadata:n,isIncomplete:t.isIncomplete||!1}}function Mv(e){var t=[],r=Vr(e.variants);r=u(r);for(var n=r.next();!n.done;n=r.next())t.push(Lr(n.value));e=u(e.textStreams);for(r=e.next();!r.done;r=e.next())t.push(Mr(r.value));return t}function qv(){this.g={}}function Uv(e,t){var r=t.audio,n=t.video;r&&!n&&(e.g[r.id]=r.bandwidth||t.bandwidth);!r&&n&&(e.g[n.id]=n.bandwidth||t.bandwidth);if(r&&n){var i=r.bandwidth||393216,o=n.bandwidth||t.bandwidth-i;0>=o&&(o=t.bandwidth);e.g[r.id]=i;e.g[n.id]=o}}function Hv(e,t){e.g[t.id]=t.bandwidth||2048}function Fv(e,t){e=e.g[t];null==e&&(e=0);return e}function Bv(e){var t=this;if(e&&e.constructor!=pu)throw new dt(2,9,9008);this.g=this.h=null;e?(this.h=e.g,this.g=e.Ab()):(this.h=tu(),this.g=new Gn);this.i=[];this.j=[];var r=!e;this.l=new ni((function(){var e,n,i,o,a;return L((function(s){switch(s.g){case 1:return S(s,Promise.all(t.j.map((function(e){return Hb(e)}))),2);case 2:e=function(){};n=[];i=u(t.i);for(o=i.next();!o.done;o=i.next())a=o.value,n.push(a.then(e,e));return S(s,Promise.all(n),3);case 3:if(!r){s.B(4);break}return S(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,_(s)}}))}))}function zv(){if(Zt())e:{var e=u(cv.values());for(var t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy();e=!0;break e}e=!1}else e=!1;return e}n=Bv.prototype;n.destroy=function(){return this.l.destroy()};n.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Kc(e,t));return ru(this.h,e)};n.getConfiguration=function(){var e=tu();ru(e,this.h,tu());return e};n.Ab=function(){return this.g};n.store=function(e,t,r){var n=this,i=this.getConfiguration(),o=new qb(this.g);this.j.push(o);t=Vv(this,e,t||{},(function(){var t;return L((function(o){if(1==o.g)return S(o,ra(e,n.g,i.manifest.retryParameters,r||null),2);t=o.h;return o.return(t())}))}),i,o);t=new An(t,(function(){return Hb(o)}));t.finally((function(){we(n.j,o)}));return hw(this,t)};function Vv(e,t,r,n,i,o){var a,s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:return pw(),s=a=null,l=new tv,p=u=c=null,x(w,2,3),S(w,n(),5);case 5:return a=w.h,S(w,ow(e,t,a,i),6);case 6:d=w.h;uw(e);h=!d.presentationTimeline.T()&&!d.presentationTimeline.Gb();if(!h)throw new dt(2,9,9005,t);return S(w,aw(e,d,(function(e){p=p||e}),i),7);case 7:s=w.h;uw(e);if(p)throw p;return S(w,$v(d,i),8);case 8:return S(w,l.init(),9);case 9:return uw(e),S(w,rv(l),10);case 10:return c=w.h,uw(e),m=Xv(s,d,t,r,i,o),f=m.Og,g=m.Re,S(w,c.na.addManifests([f]),11);case 11:y=w.h;uw(e);u=y[0];uw(e);if(p)throw p;return S(w,Wv(e,g,u,f,o,i,c.na,d,s),12);case 12:return uw(e),b=new wv("manifest",c.path.Fa,c.path.na,u),w.return(Lv(b,f));case 3:return O(w),S(w,l.destroy(),13);case 13:if(!a){w.B(14);break}return S(w,a.stop(),14);case 14:if(!s){w.B(16);break}return S(w,s.destroy(),16);case 16:k(w,0);break;case 2:v=T(w);if(null==u){w.B(18);break}return S(w,Gv(u),18);case 18:throw p||v}}))}function Wv(e,t,r,n,i,o,a,s,l){var c,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:c={};p=0;d=function(t,d){var h,m,f,g,y,b,v;return L((function(w){if(1==w.g){h={};m=u(t);for(f=m.next();!f.done;h={wb:h.wb},f=m.next())h.wb=f.value,g=Nb(h.wb,o),y=h.wb.i,b=h.wb.h,v=function(t){return function(r){var n,i,o;return L((function(s){if(1==s.g)return S(s,a.addSegments([{data:r}]),2);n=s.h;uw(e);i=t.wb.g;o=Rb(i);c[o]=n[0];p+=r.byteLength;_(s)}))}}(h),Fb(i,h.wb.groupId,g,y,b,v);return S(w,Bb(i),2)}if(!d)return w.B(0);uw(e);Jv(s,n,l,o);return S(w,a.updateManifest(r,n),0)}))};h=!1;x(w,2);if(!Yv(s)||!h||Qv(s)){w.B(4);break}return S(w,d(t.filter((function(e){return e.h})),!0),5);case 5:return uw(e),t=t.filter((function(e){return!e.h})),m=c,f=p,c={},p=0,S(w,Kv(a,r,n,m,f,(function(){return uw(e)})),6);case 6:uw(e);case 4:if(h){w.B(7);break}return S(w,d(t,!1),8);case 8:return uw(e),g=c,y=p,c={},p=0,S(w,Kv(a,r,n,g,y,(function(){return uw(e)})),9);case 9:uw(e);case 7:C(w,0);break;case 2:return b=T(w),v=Object.values(c),S(w,a.removeSegments(v,(function(){})),10);case 10:throw b}}))}function Gv(e){var t,r,n,i;return L((function(o){switch(o.g){case 1:return t=new tv,S(o,t.init(),2);case 2:return S(o,rv(t),3);case 3:return r=o.h,n=new wv("manifest",r.path.Fa,r.path.na,e),S(o,t.destroy(),4);case 4:return i=new Bv,S(o,i.remove(n.toString()),0)}}))}function Kv(e,t,r,n,i,o){var a,s,l,c,p,d,h,m,f,g,y;return L((function(b){switch(b.g){case 1:a=!1;x(b,2);s=!0;l=u(r.streams);for(c=l.next();!c.done;c=l.next())for(p=c.value,d=u(p.segments),h=d.next();!h.done;h=d.next())m=h.value,f=m.pendingSegmentRefId?n[m.pendingSegmentRefId]:null,null!=f&&(m.dataKey=f,m.pendingSegmentRefId=void 0),f=m.pendingInitSegmentRefId?n[m.pendingInitSegmentRefId]:null,null!=f&&(m.initSegmentKey=f,m.pendingInitSegmentRefId=void 0),m.pendingSegmentRefId&&(s=!1),m.pendingInitSegmentRefId&&(s=!1);r.size+=i;s&&(r.isIncomplete=!1);return S(b,e.updateManifest(t,r),4);case 4:a=!0;o();C(b,0);break;case 2:return g=T(b),S(b,Gv(t),5);case 5:if(a){b.B(6);break}y=Object.values(n);return S(b,e.removeSegments(y,(function(){})),6);case 6:throw g}}))}function $v(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,D,O,k,P,A,I,j,R,N,M;return L((function(L){switch(L.g){case 1:return r={width:Infinity,height:Infinity},Er(e,t.restrictions,r),S(L,xr(e,t.offline.usePersistentLicense),2);case 2:n=[];i=t.preferredAudioChannelCount;o=t.preferredDecodingAttributes;a=t.preferredVideoCodecs;s=t.preferredAudioCodecs;hr(e,a,s,i,o);l=u(e.variants);for(c=l.next();!c.done;c=l.next())p=c.value,n.push(Lr(p));d=u(e.textStreams);for(h=d.next();!h.done;h=d.next())m=h.value,n.push(Mr(m));f=u(e.imageStreams);for(g=f.next();!g.done;g=f.next())y=g.value,n.push(qr(y));return S(L,t.offline.trackSelectionCallback(n),3);case 3:b=L.h;v=e.presentationTimeline.getDuration();w=0;E=u(b);for(D=E.next();!D.done;D=E.next())O=D.value,k=O.bandwidth*v/8,w+=k;x(L,4);return S(L,t.offline.downloadSizeCallback(w),6);case 6:P=L.h;if(!P)throw new dt(2,9,9014);C(L,5);break;case 4:A=T(L);if(A instanceof dt)throw A;throw new dt(2,9,9015);case 5:I=new Set;j=new Set;R=new Set;N=u(b);for(D=N.next();!D.done;D=N.next())M=D.value,"variant"==M.type&&I.add(M.id),"text"==M.type&&j.add(M.id),"image"==M.type&&R.add(M.id);e.variants=e.variants.filter((function(e){return I.has(e.id)}));e.textStreams=e.textStreams.filter((function(e){return j.has(e.id)}));e.imageStreams=e.imageStreams.filter((function(e){return R.has(e.id)}));yw(e);_(L)}}))}function Xv(e,t,r,n,i,o){var a=Nv(r,t,n),s=i.offline.progressCallback;Ub(o,(function(e,t){a.size=t;s(a,e)}),(function(t,r){l&&i.offline.usePersistentLicense&&c==r&&Do(e,"cenc",t)}));var l=Yv(t)&&!Qv(t),c=null;l&&(c=bw.get(e.g.keySystem));for(var p=new qv,d=u(t.textStreams),h=d.next();!h.done;h=d.next())p.g[h.value.id]=52;d=u(t.imageStreams);for(h=d.next();!h.done;h=d.next())Hv(p,h.value);h=u(t.variants);for(d=h.next();!d.done;d=h.next())Uv(p,d.value);p=sw(o,p,t,i);o=p.streams;p=p.Re;h=e.g;d=i.offline.usePersistentLicense;h&&d&&(h.initData=[]);return{Og:{creationTime:Date.now(),originalManifestUri:r,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Ic(),streams:o,sessionIds:d?To(e):[],drmInfo:h,appMetadata:n,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Re:p}}function Yv(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Qv(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Jv(e,t,r,n){t.expiration=r.Ic();r=To(r);t.sessionIds=n.offline.usePersistentLicense?r:[];if(Yv(e)&&n.offline.usePersistentLicense&&!r.length)throw new dt(2,9,9007)}n.remove=function(e){return dw(this,Zv(this,e))};function Zv(e,t){var r,n,i,o,a,s;return L((function(l){switch(l.g){case 1:pw();r=Ev(t);if(null==r||"manifest"!=r.g)throw new dt(2,9,9004,t);n=r;i=new tv;D(l);return S(l,i.init(),4);case 4:return S(l,iv(i,n.Fa(),n.na()),5);case 5:return o=l.h,S(l,o.getManifests([n.key()]),6);case 6:return a=l.h,s=a[0],S(l,Promise.all([tw(e,s,i),rw(o,n,s)]),2);case 2:return O(l),S(l,i.destroy(),8);case 8:k(l,0)}}))}function ew(e,t){for(var r=[],n=u(e.streams),i=n.next();!i.done;i=n.next())i=i.value,t&&"video"==i.type?r.push({contentType:Dt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||r.push({contentType:Dt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return r}function tw(e,t,r){return L((function(n){return S(n,fw(e.g,e.h.drm,r,t),0)}))}function rw(e,t,r){function n(){}var i=mw(r);Lv(t,r);return Promise.all([e.removeSegments(i,n),e.removeManifests([t.key()],n)])}n.ah=function(){return dw(this,nw(this))};function nw(e){var t,r,n,i,o,a,s,l,c,p;return L((function(d){switch(d.g){case 1:return pw(),t=e.g,r=e.h.drm,n=new tv,i=!1,D(d),S(d,n.init(),4);case 4:o=[],ov(n,(function(e){return o.push(e)})),a=u(o),s=a.next();case 5:if(s.done){d.B(2);break}l=s.value;return S(d,l.getAll(),8);case 8:return c=d.h,S(d,Iv(r,t,c),9);case 9:return p=d.h,S(d,l.remove(p),10);case 10:p.length!=c.length&&(i=!0);s=a.next();d.B(5);break;case 2:return O(d),S(d,n.destroy(),11);case 11:k(d,3);break;case 3:return d.return(!i)}}))}n.list=function(){return dw(this,iw())};function iw(){var e,t,r;return L((function(n){switch(n.g){case 1:return pw(),e=[],t=new tv,D(n),S(n,t.init(),4);case 4:return r=Promise.resolve(),nv(t,(function(t,n){r=r.then((function(){var r;return L((function(i){if(1==i.g)return S(i,n.getAllManifests(),2);r=i.h;r.forEach((function(r,n){r=Lv(new wv("manifest",t.Fa,t.na,n),r);e.push(r)}));_(i)}))}))})),S(n,r,2);case 2:return O(n),S(n,t.destroy(),6);case 6:k(n,3);break;case 3:return n.return(e)}}))}function ow(e,t,r,n){var i,o,a,s,l;return L((function(c){if(1==c.g)return i=null,o=e.g,a={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},r.configure(n.manifest),uw(e),S(c,r.start(t,a),2);if(3!=c.g)return s=c.h,uw(e),l=gw(s),S(c,Promise.all(ui(l,(function(e){return e.createSegmentIndex()}))),3);uw(e);if(i)throw i;return c.return(s)}))}function aw(e,t,r,n){var i;return L((function(o){switch(o.g){case 1:return i=new mo({Ib:e.g,onError:r,Jd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),i.configure(n.drm),S(o,go(i,t.variants,n.offline.usePersistentLicense),2);case 2:return S(o,So(i),3);case 3:return S(o,xo(i),4);case 4:return o.return(i)}}))}function sw(e,t,r,n){var i=new Map,o=gw(r),a=new Map;o=u(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var l=lw(e,t,r,s,n,i);a.set(s.id,l)}e=u(r.variants);for(t=e.next();!t.done;t=e.next())t=t.value,t.audio&&a.get(t.audio.id).variantIds.push(t.id),t.video&&a.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(a.values()),Re:Array.from(i.values())}}function lw(e,t,r,n,i,o){var a={id:n.id,originalId:n.originalId,primary:n.primary,type:n.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:n.hdr,kind:n.kind,language:n.language,originalLanguage:n.originalLanguage,label:n.label,width:n.width||null,height:n.height||null,encrypted:n.encrypted,keyIds:n.keyIds,segments:[],variantIds:[],roles:n.roles,forced:n.forced,channelsCount:n.channelsCount,audioSamplingRate:n.audioSamplingRate,spatialAudio:n.spatialAudio,closedCaptions:n.closedCaptions,tilesLayout:n.tilesLayout,external:n.external},s=i.offline.numberOfParallelDownloads,l=0;cw(n,r.presentationTimeline.eb(),(function(r){var i=Rb(r),c=void 0;if(!o.has(i)){var u=r.endTime-r.startTime;u=Fv(t,n.id)*u;u=Mb(e.g,u);o.set(i,new jb(r,u,l,!1))}r.h&&(c=Rb(r.h),o.has(c)||(u=.5*Fv(t,n.id),u=Mb(e.g,u),o.set(c,new jb(r.h,u,l,!0))));a.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,tilesLayout:r.tilesLayout,pendingSegmentRefId:i,dataKey:0});l=(l+1)%s}));return a}function cw(e,t,r){t=e.segmentIndex.find(t);if(null!=t)for(var n=e.segmentIndex.get(t);n;)r(n),n=e.segmentIndex.get(++t)}function uw(e){if(e.l.g)throw new dt(2,9,7001)}function pw(){if(!zv())throw new dt(2,9,9e3)}function dw(e,t){return L((function(r){if(1==r.g)return e.i.push(t),D(r),S(r,t,4);if(2!=r.g)return r.return(r.h);O(r);we(e.i,t);return k(r,0)}))}function hw(e,t){var r=t.promise;e.i.push(r);return t.finally((function(){we(e.i,r)}))}function mw(e){var t=new Set;e=u(e.streams);for(var r=e.next();!r.done;r=e.next()){r=u(r.value.segments);for(var n=r.next();!n.done;n=r.next())n=n.value,null!=n.initSegmentKey&&t.add(n.initSegmentKey),t.add(n.dataKey)}return Array.from(t)}function fw(e,t,r,n){var i,o,a;return L((function(s){if(1==s.g){if(!n.drmInfo)return s.return();i=av(r);o=n.sessionIds.map((function(e){return{sessionId:e,keySystem:n.drmInfo.keySystem,licenseUri:n.drmInfo.licenseServerUri,serverCertificate:n.drmInfo.serverCertificate,audioCapabilities:ew(n,!1),videoCapabilities:ew(n,!0)}}));return S(s,Iv(t,e,o),2)}return 3!=s.g?(a=s.h,S(s,i.remove(a),3)):S(s,i.add(o.filter((function(e){return!a.includes(e.sessionId)}))),0)}))}function gw(e){for(var t=new Set,r=u(e.textStreams),n=r.next();!n.done;n=r.next())t.add(n.value);r=u(e.imageStreams);for(n=r.next();!n.done;n=r.next())t.add(n.value);e=u(e.variants);for(r=e.next();!r.done;r=e.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);return t}function yw(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var r=u(t),n=r.next();!n.done;n=r.next()){n=u(t);for(var i=n.next();!i.done;i=n.next());}t=u(e);for(r=t.next();!r.done;r=t.next())for(r=u(e),n=r.next();!n.done;n=r.next());}V("shaka.offline.Storage",Bv);Bv.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new tv,D(t),S(t,sv(e),2)):5!=t.g?(O(t),S(t,e.destroy(),5)):k(t,0)}))};Bv.prototype.list=Bv.prototype.list;Bv.prototype.removeEmeSessions=Bv.prototype.ah;Bv.prototype.remove=Bv.prototype.remove;Bv.prototype.store=Bv.prototype.store;Bv.prototype.getNetworkingEngine=Bv.prototype.Ab;Bv.prototype.getConfiguration=Bv.prototype.getConfiguration;Bv.prototype.configure=Bv.prototype.configure;Bv.prototype.destroy=Bv.prototype.destroy;Bv.support=zv;var bw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Up.offline=zv;function vw(){}function ww(e,t){e={priority:t||0,Wf:e};for(t=0;t<Ew.length;t++)if(Ew[t].priority<e.priority){Ew.splice(t,0,e);return}Ew.push(e)}V("shaka.polyfill",vw);vw.register=ww;vw.installAll=function(){for(var e=u(Ew),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Wf()}catch(e){Q("Error installing polyfill!",e)}}};var Ew=[];function Sw(){this.g=new xw}function _w(){e.AbortController||(e.AbortController=Sw,e.AbortSignal=xw)}Sw.prototype.abort=function(e){var t=this.g;if(!t.h){t.h=!0;t.g=e;void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError"));e=new qn("abort");if(t.onabort)t.onabort(e);t.dispatchEvent(e)}};s.Object.defineProperties(Sw.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}});vw.AbortController=Sw;Sw.install=_w;function xw(){Fn.call(this);this.h=!1;this.g=void 0;this.onabort=null}b(xw,Fn);s.Object.defineProperties(xw.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}});ww(_w);function Dw(){}function Cw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=u(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Tw(t.value)}function Tw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}vw.Aria=Dw;Dw.install=Cw;ww(Cw);function Ow(){}function kw(){ex()}vw.EncryptionScheme=Ow;Ow.install=kw;ww(kw,-2);function Pw(){}function Aw(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;t=Document.prototype;t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",Iw);document.addEventListener("webkitfullscreenerror",Iw);document.addEventListener("mozfullscreenchange",Iw);document.addEventListener("mozfullscreenerror",Iw);document.addEventListener("MSFullscreenChange",Iw);document.addEventListener("MSFullscreenError",Iw)}}function Iw(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),r=document.createEvent("Event");r.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(r)}vw.Fullscreen=Pw;Pw.install=Aw;ww(Aw);function jw(){}function Rw(){var e=!0;if(or()||lr("PlayStation 5")||ar()||lr("Web0S")||nr()||lr("CrKey")||lr("PC=EOS")||lr("Hisense")||lr("VIDAA"))e=!1;e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Lw=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Nw)}function Nw(t){var r,n,i,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v,w;return L((function(E){switch(E.g){case 1:r={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t};if(!t)return E.return(r);n=t.video;i=t.audio;if("media-source"==t.type){if(!Zt())return E.return(r);if(n){if(lr("CrKey"))if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var _=n.contentType;n.width&&n.height&&(_+="; width="+n.width+"; height="+n.height);n.framerate&&(_+="; framerate="+n.framerate);"pq"===n.transferFunction&&(_+="; eotf=smpte2084");o=cast.__platform__.canDisplayType(_)}else o=ie(n.contentType);else nr()?(a=n.contentType,n.width&&n.height&&(a+="; width="+n.width,a+="; height="+n.height),n.framerate&&(a+="; framerate="+n.framerate),n.bitrate&&(a+="; bitrate="+n.bitrate),o=ie(a)):o=ie(n.contentType);if(!o)return E.return(r)}if(i&&(s=i.contentType,l=ie(s),!l))return E.return(r)}else if("file"==t.type){if(n&&(c=n.contentType,u=er(c),!u)||i&&(p=i.contentType,d=er(p),!d))return E.return(r)}else return E.return(r);if(!t.keySystemConfiguration)return r.supported=!0,E.return(Promise.resolve(r));h=t.keySystemConfiguration;m=[];f=[];h.audio&&(g={robustness:h.audio.robustness||"",contentType:t.audio.contentType},m.push(g));h.video&&(y={robustness:h.video.robustness||"",contentType:t.video.contentType},f.push(y));b={initDataTypes:[h.initDataType],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes};m.length&&(b.audioCapabilities=m);f.length&&(b.videoCapabilities=f);v=(t.video?t.video.contentType:"")+"#"+(t.audio?t.audio.contentType:"")+"#"+t.keySystemConfiguration.keySystem;x(E,3);if(v in Mw){w=Mw[v];E.B(5);break}return S(E,navigator.requestMediaKeySystemAccess(h.keySystem,[b]),6);case 6:w=E.h,Mw[v]=w;case 5:C(E,4);break;case 3:T(E);case 4:w&&(r.supported=!0,r.keySystemAccess=w);case 2:return E.return(r)}}))}vw.MediaCapabilities=jw;jw.install=Rw;var Lw=null;jw.originalMcap=Lw;var Mw={};jw.memoizedMediaKeySystemAccessRequests_=Mw;ww(Rw,-1);function qw(){}function Uw(){var t=sr();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?Vw():t?12>=t?(Hw(),Fw()):15>=t&&Hw():tr()?Bw():(lr("Tizen 2")||lr("Tizen 3")||lr("Tizen 4"))&&zw());e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Ww()}function Hw(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,M.apply(0,arguments));t.abort=function(){};return t}}function Fw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,r){return e.call(this,t,r-.001)}}function Bw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(";")[0].split("/")[1]&&e(t)}}function zw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Pt(t)[0]&&e(t)}}function Vw(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var r=t.split(/ *; */);r.shift();return r.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}function Ww(){var e=MediaSource.isTypeSupported;lr("Web0S")||(MediaSource.isTypeSupported=function(t){var r=t.split(/ *; */),n=r.findIndex((function(e){return e.startsWith("codecs=")}));if(0>n)return e(t);var i=r[n].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex((function(e){return e.startsWith("vp09")}));0<=o&&(i[o]="vp9",r[n]='codecs="'+i.join(",")+'"',t=r.join("; "));return e(t)})}vw.MediaSource=qw;qw.install=Uw;ww(Uw);function Gw(){}function Kw(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?$w():void 0!=e.orientation&&Xw())}function $w(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()});void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}function Xw(){function t(){switch(e.orientation){case-90:r.type="landscape-secondary";r.angle=270;break;case 0:r.type="portrait-primary";r.angle=0;break;case 90:r.type="landscape-primary";r.angle=90;break;case 180:r.type="portrait-secondary",r.angle=180}}var r=new Yw;screen.orientation=r;t();e.addEventListener("orientationchange",(function(){t();var e=new qn("change");r.dispatchEvent(e)}))}vw.Orientation=Gw;Gw.install=Kw;function Yw(){Fn.call(this);this.type="";this.angle=0}b(Yw,Fn);Yw.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):screen.msLockOrientation?screen.msLockOrientation(e):!1}var r=!1;switch(e){case"natural":r=t("default");break;case"any":r=!0;this.unlock();break;default:r=t(e)}if(r)return Promise.resolve();e=Error("screen.orientation.lock() is not available on this device");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;return Promise.reject(e)};Yw.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()};ww(Kw);function Qw(){}var Jw,Zw,eE,tE,rE,nE;function iE(e,t){try{var r=new sE(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}function oE(e){var t=this.mediaKeys;t&&t!=e&&cE(t,null);delete this.mediaKeys;return(this.mediaKeys=e)?cE(e,this):Promise.resolve()}function aE(e){e=de(e.initData);if(he(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=bi(e.subarray(4),!0);e=wi(e);var t=new Event("encrypted");t.initDataType="skd";t.initData=pe(e);this.dispatchEvent(t)}vw.PatchedMediaKeysApple=Qw;Qw.uninstall=function(){Jw&&(Jw=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",Zw),HTMLMediaElement.prototype.setMediaKeys=eE,e.MediaKeys=tE,e.MediaKeySystemAccess=rE,navigator.requestMediaKeySystemAccess=nE,Zw=nE=eE=rE=tE=null,e.shakaMediaKeysPolyfill=!1)};Qw.install=function(t){if(e.HTMLVideoElement&&e.WebKitMediaKeys){if(void 0===t?0:t)Jw=!0,Zw=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),eE=HTMLMediaElement.prototype.setMediaKeys,tE=e.MediaKeys,rE=e.MediaKeySystemAccess,nE=navigator.requestMediaKeySystemAccess;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=oE;e.MediaKeys=lE;e.MediaKeySystemAccess=sE;navigator.requestMediaKeySystemAccess=iE;e.shakaMediaKeysPolyfill=!0}};function sE(e,t){this.keySystem=e;if(e.startsWith("com.apple.fps"))for(e=u(t),t=e.next();!t.done;t=e.next()){var r=t.value;if("required"==r.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var n=!1,i=!1;if(r.audioCapabilities)for(var o=u(r.audioCapabilities),a=o.next();!a.done;a=o.next())a=a.value,a.contentType&&(n=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.audioCapabilities.push(a),i=!0));if(r.videoCapabilities)for(r=u(r.videoCapabilities),a=r.next();!a.done;a=r.next())o=a.value,o.contentType&&(n=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),i=!0));n||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));t=i?t:null}if(t){this.g=t;return}}e=Error("Unsupported keySystem");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}sE.prototype.createMediaKeys=function(){var e=new lE(this.keySystem);return Promise.resolve(e)};sE.prototype.getConfiguration=function(){return this.g};function lE(e){this.h=new WebKitMediaKeys(e);this.g=new oi}lE.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new uE(this.h,e)};lE.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function cE(e,t){e.g.sb();if(!t)return Promise.resolve();e.g.C(t,"webkitneedkey",aE);try{return Us(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}lE.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function uE(e){Fn.call(this);this.i=null;this.l=e;this.g=this.h=null;this.j=new oi;this.sessionId="";this.expiration=NaN;this.closed=new Pn;this.keyStatuses=new dE}b(uE,Fn);n=uE.prototype;n.generateRequest=function(e,t){var r=this;this.h=new Pn;try{var n=this.l.createSession("video/mp4",de(t));this.i=n;this.sessionId=n.sessionId||"";this.j.C(this.i,"webkitkeymessage",(function(e){r.h&&(r.h.resolve(),r.h=null);e=(new Map).set("messageType",void 0==r.keyStatuses.Db()?"license-request":"license-renewal").set("message",pe(e.message));e=new qn("message",e);r.dispatchEvent(e)}));this.j.C(n,"webkitkeyadded",(function(){r.g&&(pE(r,"usable"),r.g.resolve(),r.g=null)}));this.j.C(n,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");e.errorCode=r.i.error;if(null!=r.h)r.h.reject(e),r.h=null;else if(null!=r.g)r.g.reject(e),r.g=null;else switch(r.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:pE(r,"output-not-allowed");break;default:pE(r,"internal-error")}}));pE(this,"status-pending")}catch(e){this.h.reject(e)}return this.h};n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};n.update=function(e){this.g=new Pn;try{this.i.update(de(e))}catch(e){this.g.reject(e)}return this.g};n.close=function(){try{this.i.close(),this.closed.resolve(),this.j.sb()}catch(e){this.closed.reject(e)}return this.closed};n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function pE(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1;r.g=t;t=new qn("keystatuseschange");e.dispatchEvent(t)}function dE(){this.size=0;this.g=void 0}n=dE.prototype;n.Db=function(){return this.g};n.forEach=function(e){this.g&&e(this.g,ea.value())};n.get=function(e){if(this.has(e))return this.g};n.has=function(e){var t=ea.value();return this.g&&ce(e,t)?!0:!1};n.entries=function(){};n.keys=function(){};n.values=function(){};function hE(){}function mE(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=fE,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=gE,e.MediaKeys=yE,e.MediaKeySystemAccess=bE,e.shakaMediaKeysPolyfill=!0)}function fE(){return Promise.reject(Error("The key system specified is not supported."))}function gE(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}vw.PatchedMediaKeysNop=hE;hE.install=mE;function yE(){throw new TypeError("Illegal constructor.")}yE.prototype.createSession=function(){};yE.prototype.setServerCertificate=function(){};yE.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function bE(){this.keySystem="";throw new TypeError("Illegal constructor.")}bE.prototype.getConfiguration=function(){};bE.prototype.createMediaKeys=function(){};ww(mE,-10);function vE(){}function wE(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)jE="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=SE;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=_E;e.MediaKeys=DE;e.MediaKeySystemAccess=xE;e.shakaMediaKeysPolyfill=!0}}function EE(e){var t=jE;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function SE(e,t){try{var r=new xE(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}function _E(e){var t=this.mediaKeys;t&&t!=e&&CE(t,null);delete this.mediaKeys;(this.mediaKeys=e)&&CE(e,this);return Promise.resolve()}vw.PatchedMediaKeysWebkit=vE;vE.install=wE;function xE(e,t){this.g=this.keySystem=e;var r=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",r=!1);var n=!1;var i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");t=u(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},s=!1;if(o.audioCapabilities)for(var l=u(o.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(s=!0,i.canPlayType(c.contentType.split(";")[0],this.g)&&(a.audioCapabilities.push(c),n=!0));if(o.videoCapabilities)for(l=u(o.videoCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(s=!0,i.canPlayType(c.contentType,this.g)&&(a.videoCapabilities.push(c),n=!0));s||(n=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g));"required"==o.persistentState&&(r?(a.persistentState="required",a.sessionTypes=["persistent-license"]):n=!1);if(n){this.h=a;return}}r="Unsupported keySystem";if("org.w3.clearkey"==e||"com.widevine.alpha"==e)r="None of the requested configurations were supported.";e=Error(r);e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}xE.prototype.createMediaKeys=function(){var e=new DE(this.g);return Promise.resolve(e)};xE.prototype.getConfiguration=function(){return this.h};function DE(e){this.l=e;this.h=null;this.g=new oi;this.i=[];this.j=new Map}function CE(e,t){e.h=t;e.g.sb();var r=jE;t&&(e.g.C(t,r+"needkey",(function(t){var r=new CustomEvent("encrypted");r.initDataType="cenc";r.initData=pe(t.initData);e.h.dispatchEvent(r)})),e.g.C(t,r+"keymessage",(function(t){var r=TE(e,t.sessionId);r&&(t=(new Map).set("messageType",void 0==r.keyStatuses.Db()?"licenserequest":"licenserenewal").set("message",t.message),t=new qn("message",t),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(t))})),e.g.C(t,r+"keyadded",(function(t){if(t=TE(e,t.sessionId))AE(t,"usable"),t.g&&t.g.resolve(),t.g=null})),e.g.C(t,r+"keyerror",(function(t){var r=TE(e,t.sessionId);r&&r.handleError(t)})))}DE.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");t.src||(t.src="about:blank");e=new OE(t,this.l,e);this.i.push(e);return e};DE.prototype.setServerCertificate=function(){return Promise.resolve(!1)};DE.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function TE(e,t){var r=e.j.get(t);return r?r:(r=e.i.shift())?(r.sessionId=t,e.j.set(t,r),r):null}function OE(e,t,r){Fn.call(this);this.j=e;this.m=!1;this.g=this.h=null;this.i=t;this.l=r;this.sessionId="";this.expiration=NaN;this.closed=new Pn;this.keyStatuses=new IE}b(OE,Fn);n=OE.prototype;n.handleError=function(e){var t=Error("EME v0.1b key error"),r=e.errorCode;r.systemCode=e.systemCode;t.errorCode=r;!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?AE(this,"output-restricted"):1==t?AE(this,"expired"):AE(this,"internal-error"))};function kE(e,t,r){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(r)var n=de(wi("LOAD_SESSION|"+r));else{var i=wi("PERSISTENT|");n=Bi(i,t)}else n=de(t)}catch(e){return Promise.reject(e)}e.h=new Pn;var o=EE("generateKeyRequest");try{e.j[o](e.i,n)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new Jt((function(){try{e.j[o](e.i,n)}catch(t){e.h.reject(t),e.h=null}})).S(.01)}return e.h}function PE(e,t,r){if(e.g)e.g.then((function(){return PE(e,t,r)})).catch((function(){return PE(e,t,r)}));else{e.g=t;if("webkit-org.w3.clearkey"==e.i){var n=yi(r);var i=JSON.parse(n);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null);n=Ui(i.keys[0].k);i=Ui(i.keys[0].kid)}else n=de(r),i=null;var o=EE("addKey");try{e.j[o](e.i,n,i,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function AE(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1;r.g=t;t=new qn("keystatuseschange");e.dispatchEvent(t)}n.generateRequest=function(e,t){return kE(this,t,null)};n.load=function(e){return"persistent-license"==this.l?kE(this,null,e):Promise.reject(Error("Not a persistent session."))};n.update=function(e){var t=new Pn;PE(this,t,e);return t};n.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=EE("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}this.closed.resolve();return this.closed};n.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()};function IE(){this.size=0;this.g=void 0}n=IE.prototype;n.Db=function(){return this.g};n.forEach=function(e){this.g&&e(this.g,ea.value())};n.get=function(e){if(this.has(e))return this.g};n.has=function(e){var t=ea.value();return this.g&&ce(e,t)?!0:!1};n.entries=function(){};n.keys=function(){};n.values=function(){};var jE="";ww(wE);function RE(){}function NE(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=ME,Object.defineProperty(t,"disablePictureInPicture",{get:UE,set:HE,enumerable:!0,configurable:!0}),document.exitPictureInPicture=qE,document.addEventListener("webkitpresentationmodechanged",LE,!0))}}function LE(e){e=e.target;if("picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function ME(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function qE(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function UE(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function HE(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}vw.PiPWebkit=RE;RE.install=NE;ww(NE);function FE(){}function BE(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=zE))}function zE(){var e=URL.createObjectURL(new Blob),t=e.toString();URL.revokeObjectURL(e);return t.substr(t.lastIndexOf("/")+1)}vw.RandomUUID=FE;FE.install=BE;ww(BE);function VE(){}function WE(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=GE)}function GE(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,r){e({usage:t,quota:r})}),t)}))}vw.StorageEstimate=VE;VE.install=WE;ww(WE);function KE(){}function $E(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:XE})}function XE(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}vw.Symbol=KE;KE.install=$E;ww($E);function YE(){}function QE(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);e&&e.catch((function(){}));return e}}}vw.VideoPlayPromise=YE;YE.install=QE;ww(QE);function JE(){}function ZE(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||ir())&&(t.getVideoPlaybackQuality=eS)}}function eS(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}vw.VideoPlaybackQuality=JE;JE.install=ZE;ww(ZE);function tS(){}function rS(){if(!e.VTTCue&&e.TextTrackCue){var t=null,r=TextTrackCue.length;if(3==r)t=nS;else if(6==r)t=iS;else{try{var n=!!nS(1,2,"")}catch(e){n=!1}n&&(t=nS)}t&&(e.VTTCue=function(e,r,n){return t(e,r,n)})}}function nS(t,r,n){return new e.TextTrackCue(t,r,n)}function iS(t,r,n){return new e.TextTrackCue(t+"-"+r+"-"+n,t,r,n)}vw.VTTCue=tS;tS.install=rS;ww(rS);function oS(){}oS.prototype.parseInit=function(){};oS.prototype.setSequenceMode=function(){};oS.prototype.setManifestType=function(){};oS.prototype.parseMedia=function(e,t){var r=null,n=[];e=yi(e).split(/\r?\n/);e=u(e);for(var i=e.next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=aS.exec(i))){var o=sS.exec(i[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",","."));i=new _e(o,t.segmentEnd?t.segmentEnd:o+2,i[2]);r&&(r.endTime=o,n.push(r));r=i}r&&n.push(r);return n};V("shaka.text.LrcTextParser",oS);oS.prototype.parseMedia=oS.prototype.parseMedia;oS.prototype.setManifestType=oS.prototype.setManifestType;oS.prototype.setSequenceMode=oS.prototype.setSequenceMode;oS.prototype.parseInit=oS.prototype.parseInit;var aS=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,sS=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Ut["application/x-subtitle-lrc"]=function(){return new oS};function lS(){}lS.prototype.parseInit=function(){};lS.prototype.setSequenceMode=function(){};lS.prototype.setManifestType=function(){};lS.prototype.parseMedia=function(e,t){var r=yi(e);e=[];if(""==r)return e;var n=uo(r,"tt");if(!n)throw new dt(2,2,2005,"Failed to parse TTML.");r=n.getElementsByTagName("body")[0];if(!r)return[];var i=Qi(n,RS,"frameRate"),o=Qi(n,RS,"subFrameRate"),a=Qi(n,RS,"frameRateMultiplier"),s=Qi(n,RS,"tickRate"),l=Qi(n,RS,"cellResolution"),c=n.getAttribute("xml:space")||"default",p=Qi(n,NS,"extent");if("default"!=c&&"preserve"!=c)throw new dt(2,2,2005,"Invalid xml:space value: "+c);c="default"==c;i=new ES(i,o,a,s);l=l?(l=/^(\d+) (\d+)$/.exec(l))?{bg:parseInt(l[1],10),rows:parseInt(l[2],10)}:null:null;o=(o=n.getElementsByTagName("metadata")[0])?$i(o):[];a=Array.from(n.getElementsByTagName("style"));n=Array.from(n.getElementsByTagName("region"));s=[];for(var d=u(n),h=d.next();!h.done;h=d.next()){var m=h.value;h=new He;var f=m.getAttribute("xml:id");if(f){h.id=f;var g=null;p&&(g=SS.exec(p)||DS.exec(p));f=g?Number(g[1]):null;g=g?Number(g[2]):null;var y,b;if(y=hS(m,a,"extent"))y=(b=SS.exec(y))||DS.exec(y),null!=y&&(h.width=Number(y[1]),h.height=Number(y[2]),b||(null!=f&&(h.width=100*h.width/f),null!=g&&(h.height=100*h.height/g)),h.widthUnits=b||null!=f?Fe:0,h.heightUnits=b||null!=g?Fe:0);if(m=hS(m,a,"origin"))y=(b=SS.exec(m))||DS.exec(m),null!=y&&(h.viewportAnchorX=Number(y[1]),h.viewportAnchorY=Number(y[2]),b||(null!=g&&(h.viewportAnchorY=100*h.viewportAnchorY/g),null!=f&&(h.viewportAnchorX=100*h.viewportAnchorX/f)),h.viewportAnchorUnits=b||null!=f?Fe:0)}else h=null;h&&s.push(h)}if(Ki(r,"p").length)throw new dt(2,2,2001,"<p> can only be inside <div> in TTML");p=u(Ki(r,"div"));for(d=p.next();!d.done;d=p.next())if(Ki(d.value,"span").length)throw new dt(2,2,2001,"<span> can only be inside <p> in TTML");if(t=cS(r,t,i,o,a,n,s,c,l,null,!1))t.backgroundColor||(t.backgroundColor="transparent"),e.push(t);return e};function cS(e,t,r,n,i,o,a,s,l,c,p){var d=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!p)return null;var h=document.createElement("span");h.textContent=e.textContent}else h=e;for(var m=null,f=u(LS),g=f.next();!g.done&&!(m=gS(h,"backgroundImage",n,"#",g.value)[0]);g=f.next());if("p"==e.nodeName||m)p=!0;e=p;f="default"==(h.getAttribute("xml:space")||(s?"default":"preserve"));g=Array.from(h.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}));s=[];if(!g)for(var y=u(h.childNodes),b=y.next();!b.done;b=y.next())(b=cS(b.value,t,r,n,i,o,a,f,l,h,p))&&s.push(b);n=null!=c;y=/\S/.test(h.textContent);var v=h.hasAttribute("begin")||h.hasAttribute("end")||h.hasAttribute("dur");if(!(v||y||"br"==h.tagName||0!=s.length||n&&!f))return null;b=bS(h,r);y=b.start;for(b=b.end;d&&d.nodeType==Node.ELEMENT_NODE&&"tt"!=d.tagName;)b=yS(d,r,y,b),y=b.start,b=b.end,d=d.parentNode;null==y&&(y=0);y+=t.periodStart;b=null==b?Infinity:b+t.periodStart;y=Math.max(y,t.segmentStart);b=Math.min(b,t.segmentEnd);if(!v&&0<s.length)for(y=Infinity,b=0,t=u(s),r=t.next();!r.done;r=t.next())r=r.value,y=Math.min(y,r.startTime),b=Math.max(b,r.endTime);if("br"==h.tagName)return i=new _e(y,b,""),i.lineBreak=!0,i;t="";g&&(t=h.textContent,f&&(t=t.trim(),t=t.replace(/\s+/g," ")));t=new _e(y,b,t);t.nestedCues=s;p||(t.isContainer=!0);l&&(t.cellResolution=l);l=gS(h,"region",o,"")[0];if(h.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var w=l.getAttribute("xml:id");t.region=a.filter((function(e){return e.id==w}))[0]}a=l;c&&n&&!h.getAttribute("region")&&!h.getAttribute("style")&&(a=gS(c,"region",o,"")[0]);uS(t,h,a,m,i,e,0==s.length);return t}function uS(e,t,r,n,i,o,a){o=o||a;"rtl"==dS(t,r,i,"direction",o)&&(e.direction="rtl");a=dS(t,r,i,"writingMode",o);"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Pe);(a=dS(t,r,i,"textAlign",!0))?(e.positionAlign=jS[a],e.lineAlign=IS[a],e.textAlign=Te[a.toUpperCase()]):e.textAlign=Ce;if(a=dS(t,r,i,"displayAlign",!0))e.displayAlign=ke[a.toUpperCase()];if(a=dS(t,r,i,"color",o))e.color=a;if(a=dS(t,r,i,"backgroundColor",o))e.backgroundColor=a;if(a=dS(t,r,i,"border",o))e.border=a;if(a=dS(t,r,i,"fontFamily",o))switch(a){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=a}(a=dS(t,r,i,"fontWeight",o))&&"bold"==a&&(e.fontWeight=700);a=dS(t,r,i,"wrapOption",o);e.wrapLine=a&&"noWrap"==a?!1:!0;(a=dS(t,r,i,"lineHeight",o))&&a.match(xS)&&(e.lineHeight=a);(a=dS(t,r,i,"fontSize",o))&&(a.match(xS)||a.match(_S))&&(e.fontSize=a);if(a=dS(t,r,i,"fontStyle",o))e.fontStyle=Ue[a.toUpperCase()];if(n){a=n.getAttribute("imageType")||n.getAttribute("imagetype");var s=n.getAttribute("encoding");n=n.textContent.trim();"PNG"==a&&"Base64"==s&&n&&(e.backgroundImage="data:image/png;base64,"+n)}if(n=dS(t,r,i,"textOutline",o))n=n.split(" "),n[0].match(xS)?e.textStrokeColor=e.color:(e.textStrokeColor=n[0],n.shift()),n[0]&&n[0].match(xS)?e.textStrokeWidth=n[0]:e.textStrokeColor="";(n=dS(t,r,i,"letterSpacing",o))&&n.match(xS)&&(e.letterSpacing=n);(n=dS(t,r,i,"linePadding",o))&&n.match(xS)&&(e.linePadding=n);if(o=dS(t,r,i,"opacity",o))e.opacity=parseFloat(o);(r=hS(r,i,"textDecoration"))&&pS(e,r);(t=mS(t,i,"textDecoration"))&&pS(e,t)}function pS(e,t){t=u(t.split(" "));for(var r=t.next();!r.done;r=t.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&we(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&we(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&we(e.textDecoration,"overline")}}function dS(e,t,r,n,i){i=void 0===i?!0:i;return(e=mS(e,r,n))?e:i?hS(t,r,n):null}function hS(e,t,r){if(!e)return null;var n=Qi(e,NS,r);return n?n:fS(e,t,r)}function mS(e,t,r){var n=Qi(e,NS,r);return n?n:fS(e,t,r)}function fS(e,t,r){e=gS(e,"style",t,"");for(var n=null,i=0;i<e.length;i++){var o=Yi(e[i],"urn:ebu:tt:style",r);o||(o=Qi(e[i],NS,r));o||(o=mS(e[i],t,r));o&&(n=o)}return n}function gS(e,t,r,n,i){var o=[];if(!e||1>r.length)return o;var a=e;for(e=null;a&&!(e=i?Yi(a,i,t):a.getAttribute(t))&&(a=a.parentNode,a instanceof Element););if(t=e)for(t=u(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=u(r),a=e.next();!a.done;a=e.next())if(a=a.value,n+a.getAttribute("xml:id")==i){o.push(a);break}return o}function yS(e,t,r,n){e=bS(e,t);null==r?r=e.start:null!=e.start&&(r+=e.start);null==n?n=e.end:null!=e.start&&(n+=e.start);return{start:r,end:n}}function bS(e,t){var r=vS(e.getAttribute("begin"),t),n=vS(e.getAttribute("end"),t);e=vS(e.getAttribute("dur"),t);null==n&&null!=e&&(n=r+e);return{start:r,end:n}}function vS(e,t){var r=null;if(CS.test(e)){e=CS.exec(e);r=Number(e[1]);var n=Number(e[2]),i=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h;i+=o/t.frameRate;r=i+60*n+3600*r}else if(TS.test(e))r=wS(TS,e);else if(OS.test(e))r=wS(OS,e);else if(kS.test(e))e=kS.exec(e),r=Number(e[1])/t.frameRate;else if(PS.test(e))e=PS.exec(e),r=Number(e[1])/t.g;else if(AS.test(e))r=wS(AS,e);else if(e)throw new dt(2,2,2001,"Could not parse cue time range in TTML");return r}function wS(e,t){e=e.exec(t);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}V("shaka.text.TtmlTextParser",lS);lS.prototype.parseMedia=lS.prototype.parseMedia;lS.prototype.setManifestType=lS.prototype.setManifestType;lS.prototype.setSequenceMode=lS.prototype.setSequenceMode;lS.prototype.parseInit=lS.prototype.parseInit;function ES(e,t,r,n){this.frameRate=Number(e)||30;this.h=Number(t)||1;this.g=Number(n);0==this.g&&(this.g=e?this.frameRate*this.h:1);r&&(e=/^(\d+) (\d+)$/g.exec(r))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var SS=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,_S=/^(\d{1,2}(?:\.\d+)?|100)%$/,xS=/^(\d+px|\d+em|\d*\.?\d+c)$/,DS=/^(\d+)px (\d+)px$/,CS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,TS=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,OS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,kS=/^(\d*(?:\.\d*)?)f$/,PS=/^(\d*(?:\.\d*)?)t$/,AS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),IS={left:je,center:"center",right:"end",start:je,end:"end"},jS={left:"line-left",center:"center",right:"line-right"},RS=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],NS=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],LS=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Ut["application/ttml+xml"]=function(){return new lS};function MS(){this.g=new lS}MS.prototype.parseInit=function(e){var t=!1;(new Ci).box("moov",Ti).box("trak",Ti).box("mdia",Ti).box("minf",Ti).box("stbl",Ti).M("stsd",Oi).box("stpp",(function(e){t=!0;e.parser.stop()})).parse(e);if(!t)throw new dt(2,2,2007)};MS.prototype.setSequenceMode=function(){};MS.prototype.setManifestType=function(){};MS.prototype.parseMedia=function(e,t){var r=this,n=!1,i=[];(new Ci).box("mdat",Pi((function(e){n=!0;i=i.concat(r.g.parseMedia(e,t))}))).parse(e,!1);if(!n)throw new dt(2,2,2007);return i};V("shaka.text.Mp4TtmlParser",MS);MS.prototype.parseMedia=MS.prototype.parseMedia;MS.prototype.setManifestType=MS.prototype.setManifestType;MS.prototype.setSequenceMode=MS.prototype.setSequenceMode;MS.prototype.parseInit=MS.prototype.parseInit;Ut['application/mp4; codecs="stpp"']=function(){return new MS};Ut['application/mp4; codecs="stpp.ttml"']=function(){return new MS};Ut['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new MS};Ut['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new MS};function qS(){this.h=!1;this.g="UNKNOWN"}qS.prototype.parseInit=function(){};qS.prototype.setSequenceMode=function(e){this.h=e};qS.prototype.setManifestType=function(e){this.g=e};qS.prototype.parseMedia=function(e,t){e=yi(e);e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var r=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new dt(2,2,2e3);e=t.vttOffset;if(r[0].includes("X-TIMESTAMP-MAP")&&this.h){var n=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=r[0].match(/MPEGTS:(\d+)/m);if(n&&i){e=WS(new Sg(n[1]));if(null==e)throw new dt(2,2,2e3);i=Number(i[1]);for(n=t.segmentStart-t.periodStart;95443.7176888889<=n;)n-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}}else r[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(e=t.segmentStart);t=[];i=u(r[0].split("\n"));for(n=i.next();!n.done;n=i.next())if(n=n.value,/^Region:/.test(n)){n=new Sg(n);var o=new He;Dg(n);_g(n);for(var a=Dg(n);a;){var s=o,l=a;(a=/^id=(.*)$/.exec(l))?s.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(l))?s.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(l))?(s.height=Number(a[1]),s.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.regionAnchorX=Number(a[1]),s.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.viewportAnchorX=Number(a[1]),s.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(l)&&(s.scroll="up");_g(n);a=Dg(n)}t.push(o)}i=new Map;US(i);n=[];r=u(r.slice(1));for(o=r.next();!o.done;o=r.next()){o=o.value.split("\n");if((1!=o.length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]){s=[];a=-1;for(l=1;l<o.length;l++)o[l].includes("::cue")&&(s.push([]),a=s.length-1),-1!=a&&(s[a].push(o[l]),o[l].includes("}")&&(a=-1));s=u(s);for(a=s.next();!a.done;a=s.next()){var c=a.value;a="global";(l=c[0].match(/\((.*)\)/))&&(a=l.pop());l=c.slice(1,-1);c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(l=c[1].split(";"));(c=i.get(a))||(c=new _e(0,0,""));for(var p=!1,d=0;d<l.length;d++){var h=/^\s*([^:]+):\s*(.*)/.exec(l[d]);if(h){var m=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":p=!0;c.backgroundColor=m;break;case"color":p=!0;c.color=m;break;case"font-family":p=!0;c.fontFamily=m;break;case"font-size":p=!0;c.fontSize=m;break;case"font-weight":if(700<=parseInt(m,10)||"bold"==m)p=!0,c.fontWeight=700;break;case"font-style":switch(m){case"normal":p=!0;c.fontStyle=qe;break;case"italic":p=!0;c.fontStyle="italic";break;case"oblique":p=!0,c.fontStyle="oblique"}break;case"opacity":p=!0;c.opacity=parseFloat(m);break;case"text-shadow":p=!0;c.textShadow=m;break;case"white-space":p=!0,c.wrapLine="noWrap"!=m}}}p&&i.set(a,c)}}p=e;if(1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0]||"REGION"==o[0])o=null;else if(s=null,o[0].includes("--\x3e")||(s=o[0],o.splice(0,1)),a=new Sg(o[0]),l=WS(a),d=xg(a,/[ \t]+--\x3e[ \t]+/g),c=WS(a),null==l||null==d||null==c)Q("Failed to parse VTT time code. Cue skipped:",s,o),o=null;else{l+=p;c+=p;p=o.slice(1).join("\n").trim();i.has("global")?(o=i.get("global").clone(),o.startTime=l,o.endTime=c,o.payload=""):o=new _e(l,c,"");HS(p,o,i);_g(a);for(l=Dg(a);l;)zS(o,l,t),_g(a),l=Dg(a);null!=s&&(o.id=s)}o&&n.push(o)}return n};function US(e){for(var t=u(Object.entries(Ne)),r=t.next();!r.done;r=t.next()){var n=u(r.value);r=n.next().value;n=n.next().value;var i=new _e(0,0,"");i.color=n;e.set("."+r,i)}t=u(Object.entries(Le));for(r=t.next();!r.done;r=t.next())n=u(r.value),r=n.next().value,n=n.next().value,i=new _e(0,0,""),i.backgroundColor=n,e.set("."+r,i)}function HS(e,t,r){0===r.size&&US(r);e:{var n=e;e=[];for(var i=-1,o="",a=0;a<n.length;a++)if("/"===n[a]&&0<a&&"<"===n[a-1]){var s=n.indexOf(">",a);if(s<=a){e=n;break e}if((s=n.substring(a+1,s))&&"c"===s){var l=e.pop();l?l===s?(o+="/"+s+">",a+=s.length+1):l.startsWith("c.")?(a+=s.length+1,o+="/"+l+">"):o+=n[a]:o+=n[a]}else o+=n[a]}else"<"===n[a]?(i=a+1,"c"!=n[i]&&(i=-1)):">"===n[a]&&0<i&&(e.push(n.substr(i,a-i)),i=-1),o+=n[a];e=o}n=[];o=-1;for(i=0;i<e.length;i++)"<"===e[i]?o=i+1:">"===e[i]&&0<o&&(o=e.substr(o,i-o),o.match(KS)&&n.push(o),o=-1);n=u(n);for(i=n.next();!i.done;i=n.next())i=i.value,e=e.replace("<"+i+">",'<div time="'+i+'">'),e+="</div>";e:{i=e;o=[];a=-1;n="";e=!1;for(s=0;s<i.length;s++)if("/"===i[s]){l=i.indexOf(">",s);if(-1===l){e=i;break e}if((l=i.substring(s+1,l))&&"v"==l){e=!0;var c=null;o.length&&(c=o[o.length-1]);if(c){if(c===l)n+="/"+l+">";else{if(!c.startsWith("v")){n+=i[s];continue}n+="/"+c+">"}s+=l.length+1}else n+=i[s]}else n+=i[s]}else"<"===i[s]?(a=s+1,"v"!=i[a]&&(a=-1)):">"===i[s]&&0<a&&(o.push(i.substr(a,s-a)),a=-1),n+=i[s];i=u(o);for(o=i.next();!o.done;o=i.next())o=o.value,a=o.replace(" ",".voice-"),n=n.replace("<"+o+">","<"+a+">"),n=n.replace("</"+o+">","</"+a+">"),e||(n+="</"+a+">");e=n}if(i=uo("<span>"+e+"</span>","span")){n=[];i=i.childNodes;if(1==i.length&&(o=i[0],o.nodeType==Node.TEXT_NODE||o.nodeType==Node.CDATA_SECTION_NODE)){t.payload=GS(e);return}e=u(i);for(i=e.next();!i.done;i=e.next())BS(i.value,t,n,r);t.nestedCues=n}else t.payload=GS(e)}function FS(e,t){return e&&0<e.length?e:t}function BS(e,t,r,n){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var o=u(e.nodeName.split(/(?=[ .])+/g)),a=o.next();!a.done;a=o.next()){var s=a=a.value;if(s.startsWith(".voice-")){var l=s.split("-").pop();s='v[voice="'+l+'"]';n.has(s)||(s="v[voice="+l+"]")}n.has(s)&&(s=n.get(s))&&(i.backgroundColor=FS(s.backgroundColor,i.backgroundColor),i.color=FS(s.color,i.color),i.fontFamily=FS(s.fontFamily,i.fontFamily),i.fontSize=FS(s.fontSize,i.fontSize),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.textShadow=s.textShadow,i.wrapLine=s.wrapLine);switch(a){case"br":a=t.clone();a.lineBreak=!0;r.push(a);break;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":if(a=e.getAttribute("color"))i.color=a;break;case"div":if(a=e.getAttribute("time"))if(a=WS(new Sg(a)))i.startTime=a}}if(Zi(e))for(o=!0,n=u(e.textContent.split("\n")),e=n.next();!e.done;e=n.next())e=e.value,o||(o=t.clone(),o.lineBreak=!0,r.push(o)),0<e.length&&(o=i.clone(),o.payload=GS(e),r.push(o)),o=!1;else for(t=u(e.childNodes),e=t.next();!e.done;e=t.next())BS(e.value,i,r,n)}function zS(e,t,r){var n;if(n=/^align:(start|middle|center|end|left|right)$/.exec(t))t=n[1],"middle"==t?e.textAlign=Ce:e.textAlign=Te[t.toUpperCase()];else if(n=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==n[1]?"vertical-lr":"vertical-rl";else if(n=/^size:([\d.]+)%$/.exec(t))e.size=Number(n[1]);else if(n=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(n[1]),n[2]&&(t=n[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":De);else if(n=/^region:(.*)$/.exec(t)){if(t=VS(r,n[1]))e.region=t}else if(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(r[1]),r[2]&&(e.lineAlign=Re[r[2].toUpperCase()]);else if(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Ie,e.line=Number(r[1]),r[2]&&(e.lineAlign=Re[r[2].toUpperCase()])}function VS(e,t){e=e.filter((function(e){return e.id==t}));return e.length?e[0]:null}function WS(e){e=xg(e,KS);if(null==e)return null;var t=Number(e[2]),r=Number(e[3]);return 59<t||59<r?null:Number(e[4])/1e3+r+60*t+3600*(Number(e[1])||0)}function GS(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},r=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,n=RegExp(r.source);return e&&n.test(e)?e.replace(r,(function(e){return t[e]||"'"})):e||""}V("shaka.text.VttTextParser",qS);qS.prototype.parseMedia=qS.prototype.parseMedia;qS.prototype.setManifestType=qS.prototype.setManifestType;qS.prototype.setSequenceMode=qS.prototype.setSequenceMode;qS.prototype.parseInit=qS.prototype.parseInit;var KS=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Ut["text/vtt"]=function(){return new qS};Ut['text/vtt; codecs="vtt"']=function(){return new qS};Ut['text/vtt; codecs="wvtt"']=function(){return new qS};function $S(){this.g=null}$S.prototype.parseInit=function(e){var t=this,r=!1;(new Ci).box("moov",Ti).box("trak",Ti).box("mdia",Ti).M("mdhd",(function(e){e=Pa(e.reader,e.version);t.g=e.timescale})).box("minf",Ti).box("stbl",Ti).M("stsd",Oi).box("wvtt",(function(){r=!0})).parse(e);if(!this.g)throw new dt(2,2,2008);if(!r)throw new dt(2,2,2008)};$S.prototype.setSequenceMode=function(){};$S.prototype.setManifestType=function(){};$S.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new dt(2,2,2008);var r=0,n=[],i,o=[],a=!1,s=!1,l=!1,c=null;(new Ci).box("moof",Ti).box("traf",Ti).M("tfdt",(function(e){a=!0;r=ka(e.reader,e.version).baseMediaDecodeTime})).M("tfhd",(function(e){c=Oa(e.reader,e.flags).ff})).M("trun",(function(e){s=!0;n=Aa(e.reader,e.version,e.flags).Af})).box("mdat",Pi((function(e){l=!0;i=e}))).parse(e,!1);if(!l&&!a&&!s)throw new dt(2,2,2008);e=r;for(var p=new _i(i,0),d=u(n),h=d.next();!h.done;h=d.next()){h=h.value;var m=h.Ie||c,f=h.Md?r+h.Md:e;e=f+(m||0);var g=0;do{var y=p.J();g+=y;var b=p.J(),v=null;"vttc"==Ii(b)?8<y&&(v=p.jb(y-8)):p.skip(y-8);m&&v&&(y=XS(v,t.periodStart+f/this.g,t.periodStart+e/this.g),o.push(y))}while(h.sampleSize&&g<h.sampleSize)}return o.filter(gt)};function XS(e,t,r){var n,i,o;(new Ci).box("payl",Pi((function(e){n=yi(e)}))).box("iden",Pi((function(e){i=yi(e)}))).box("sttg",Pi((function(e){o=yi(e)}))).parse(e);return n?YS(n,i,o,t,r):null}function YS(e,t,r,n,i){n=new _e(n,i,"");HS(e,n,new Map);t&&(n.id=t);if(r)for(e=new Sg(r),t=Dg(e);t;)zS(n,t,[]),_g(e),t=Dg(e);return n}V("shaka.text.Mp4VttParser",$S);$S.prototype.parseMedia=$S.prototype.parseMedia;$S.prototype.setManifestType=$S.prototype.setManifestType;$S.prototype.setSequenceMode=$S.prototype.setSequenceMode;$S.prototype.parseInit=$S.prototype.parseInit;Ut['application/mp4; codecs="wvtt"']=function(){return new $S};function QS(){}QS.prototype.parseInit=function(){};QS.prototype.setSequenceMode=function(){};QS.prototype.setManifestType=function(){};QS.prototype.parseMedia=function(e){var t=yi(e).replace(/\r+/g,"");t=t.trim();e=[];if(""==t)return e;t=u(t.split("\n\n"));for(var r=t.next();!r.done;r=t.next()){r=r.value.split("\n");var n=new Sg(r[0]),i=JS(n),o=xg(n,/,/g);n=JS(n);if(null==i||null==o||null==n)throw new dt(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new _e(i,n,r.slice(1).join("\n").trim()))}return e};function JS(e){e=xg(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null==e)return null;var t=Number(e[2]),r=Number(e[3]);return 59<t||59<r?null:Number(e[4])/1e3+r+60*t+3600*(Number(e[1])||0)}V("shaka.text.SbvTextParser",QS);QS.prototype.parseMedia=QS.prototype.parseMedia;QS.prototype.setManifestType=QS.prototype.setManifestType;QS.prototype.setSequenceMode=QS.prototype.setSequenceMode;QS.prototype.parseInit=QS.prototype.parseInit;Ut["text/x-subviewer"]=function(){return new QS};function ZS(){this.g=new qS}ZS.prototype.parseInit=function(){};ZS.prototype.setSequenceMode=function(){};ZS.prototype.setManifestType=function(){};ZS.prototype.parseMedia=function(e,t){e=yi(e);e=e_(e);e=de(wi(e));return this.g.parseMedia(e,t)};function e_(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,"");e=e.trim();e=u(e.split("\n\n"));for(var r=e.next();!r.done;r=e.next())r=r.value.split(/\n/),r[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),t+=r.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}V("shaka.text.SrtTextParser",ZS);ZS.srt2webvtt=e_;ZS.prototype.parseMedia=ZS.prototype.parseMedia;ZS.prototype.setManifestType=ZS.prototype.setManifestType;ZS.prototype.setSequenceMode=ZS.prototype.setSequenceMode;ZS.prototype.parseInit=ZS.prototype.parseInit;Ut["text/srt"]=function(){return new ZS};function t_(){}t_.prototype.parseInit=function(){};t_.prototype.setSequenceMode=function(){};t_.prototype.setManifestType=function(){};t_.prototype.parseMedia=function(e){var t="",r="";e=yi(e).split(/\r?\n\s*\r?\n/);e=u(e);for(var n=e.next();!n.done;n=e.next()){var i=o_.exec(n.value);i&&(n=i[1],i=i[2],"V4 Styles"==n||"V4+ Styles"==n?t=i:"Events"==n&&(r=i))}e=[];n=null;t=u(t.split(/\r?\n/));for(var o=t.next();!o.done;o=t.next())if(i=o.value,!/^\s*;/.test(i)&&(o=a_.exec(i)))if(i=o[1].trim(),o=o[2].trim(),"Format"==i)n=o.split(s_);else if("Style"==i){i=o.split(s_);o={};for(var a=0;a<n.length&&a<i.length;a++)o[n[a]]=i[a];e.push(o)}n=[];t=null;i={};r=u(r.split(/\r?\n/));for(o=r.next();!o.done;i={Wd:i.Wd},o=r.next())if(o=o.value,!/^\s*;/.test(o)&&(a=a_.exec(o)))if(o=a[1].trim(),a=a[2].trim(),"Format"==o)t=a.split(s_);else if("Dialogue"==o){a=a.split(s_);o={};for(var s=0;s<t.length&&s<a.length;s++)o[t[s]]=a[s];s=i_(o.Start);var l=i_(o.End);a=new _e(s,l,a.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,""));i.Wd=o.Style;(o=e.find(function(e){return function(t){return t.Name==e.Wd}}(i)))&&r_(a,o);n.push(a)}return n};function r_(e,t){var r=t.Fontname;r&&(e.fontFamily=r);if(r=t.Fontsize)e.fontSize=r+"px";if(r=t.PrimaryColour)if(r=n_(r))e.color=r;if(r=t.BackColour)if(r=n_(r))e.backgroundColor=r;t.Bold&&(e.fontWeight=700);t.Italic&&(e.fontStyle="italic");t.Underline&&e.textDecoration.push("underline");if(r=t.Spacing)e.letterSpacing=r+"px";if(r=t.Alignment)switch(parseInt(r,10)){case 1:e.displayAlign=Oe;e.textAlign="start";break;case 2:e.displayAlign=Oe;e.textAlign=Ce;break;case 3:e.displayAlign=Oe;e.textAlign="end";break;case 5:e.displayAlign="before";e.textAlign="start";break;case 6:e.displayAlign="before";e.textAlign=Ce;break;case 7:e.displayAlign="before";e.textAlign="end";break;case 9:e.displayAlign="center";e.textAlign="start";break;case 10:e.displayAlign="center";e.textAlign=Ce;break;case 11:e.displayAlign="center",e.textAlign="end"}if(t=t.AlphaLevel)e.opacity=parseFloat(t)}function n_(e){e=parseInt(e.replace("&H",""),16);return 0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function i_(e){e=l_.exec(e);return 3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}V("shaka.text.SsaTextParser",t_);t_.prototype.parseMedia=t_.prototype.parseMedia;t_.prototype.setManifestType=t_.prototype.setManifestType;t_.prototype.setSequenceMode=t_.prototype.setSequenceMode;t_.prototype.parseInit=t_.prototype.parseInit;var o_=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,a_=/^\s*([^:]+):\s*(.*)/,s_=/\s*,\s*/,l_=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Ut["text/x-ssa"]=function(){return new t_};function c_(e,t){var r=e[t+1]&1?7:9;return t+r<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-r,0<e)?{vd:r,O:e}:null}function u_(e,t){var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=(e[t+2]&60)>>>2;if(n>r.length-1)return null;var i=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;o|=(e[t+3]&192)>>>6;return{sampleRate:r[n],channelCount:o,oa:"mp4a.40."+i}}function p_(e,t){if(t+1<e.length&&255===e[t]&&240===(e[t+1]&246)){var r=e[t+1]&1?7:9;if(t+r>=e.length)return!1;var n=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;if(n<=r)return!1;t+=n;return t===e.length||t+1<e.length&&255===e[t]&&240===(e[t+1]&246)}return!1}function d_(e){this.i=e;this.h=0;this.g=new Map}n=d_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]?ie(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(kt(t)||"mp4a.40.2")+'"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){for(var i=de(e),o=Ta(i),a=o.length;a<i.length&&!p_(i,a);a++);e=1e3*r.endTime;o=Ca(o);o.length&&r&&(r=o.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(e=r.data);r=u_(i,a);if(!r)return Promise.reject(new dt(2,3,3018));t.audioSamplingRate=r.sampleRate;t.channelsCount=r.channelCount;for(o=[];a<i.length;){var s=c_(i,a);if(!s)return Promise.reject(new dt(2,3,3018));var l=s.vd+s.O;a+l<=i.length&&o.push({data:i.subarray(a+s.vd,a+l),size:s.O,duration:1024,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});a+=l}i=r.sampleRate;e=Math.floor(e*i/1e3);n={id:t.id,type:"audio",codecs:r.oa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:n,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:o},stream:t};e=new Hy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=e.initSegment(),this.g.set(t.id,n));t=Vy(e);this.h++;t=Bi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.AacTransmuxer",d_);d_.prototype.transmux=d_.prototype.transmux;d_.prototype.getOrginalMimeType=d_.prototype.getOrginalMimeType;d_.prototype.convertCodecs=d_.prototype.convertCodecs;d_.prototype.isSupported=d_.prototype.isSupported;d_.prototype.destroy=d_.prototype.destroy;Ve("audio/aac",(function(){return new d_("audio/aac")}),Ke);function h_(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var r=e[t+4]>>6;if(3<=r)return null;var n=e[t+4]&63,i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*n+r];if(t+i>e.length)return null;var o=e[t+6]>>5,a=0;2===o?a+=2:(o&1&&1!==o&&(a+=2),o&4&&(a+=2));a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=e[t+5]&7;e=new Uint8Array([r<<6|e[t+5]>>3<<1|s>>2,(s&3)<<6|o<<3|a<<2|n>>4,n<<4&224]);return{sampleRate:[48e3,44100,32e3][r],channelCount:[2,1,2,3,3,4,4,5][o]+a,Z:e,O:i}}function m_(e,t){if(11===e[t]&&119===e[t+1]){var r=0,n=5;t+=n;for(var i,o;0<n;){o=e[t];var a=Math.min(n,8),s=8-a;i=4278190080>>>24+s<<s;i=(o&i)>>s;r=r?r<<a|i:i;t+=1;n-=a}if(16>r)return!0}return!1}function f_(e){this.i=e;this.h=0;this.g=new Map}n=f_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]?ie(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){e=de(e);for(var i=Ta(e),o=i.length;o<e.length&&!m_(e,o);o++);var a=1e3*r.endTime;i=Ca(i);i.length&&r&&(r=i.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(a=r.data);r=0;i=new Uint8Array([]);for(var s=[];o<e.length;){var l=h_(e,o);if(!l)return Promise.reject(new dt(2,3,3018));t.audioSamplingRate=l.sampleRate;t.channelsCount=l.channelCount;r=l.sampleRate;i=l.Z;s.push({data:e.subarray(o,o+l.O),size:l.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});o+=l.O}e=Math.floor(a*r/1e3);n={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:n,Ka:[],Z:i,la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:s},stream:t};e=new Hy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=e.initSegment(),this.g.set(t.id,n));t=Vy(e);this.h++;t=Bi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.Ac3Transmuxer",f_);f_.prototype.transmux=f_.prototype.transmux;f_.prototype.getOrginalMimeType=f_.prototype.getOrginalMimeType;f_.prototype.convertCodecs=f_.prototype.convertCodecs;f_.prototype.isSupported=f_.prototype.isSupported;f_.prototype.destroy=f_.prototype.destroy;Ve("audio/ac3",(function(){return new f_("audio/ac3")}),Ke);function g_(e,t){if(t+8>e.length||2935!==(e[t]<<8|e[t+1]<<0))return null;var r=new La(e.subarray(t+2));qa(r,2);qa(r,3);var n=Ua(r,11)+1<<1,i=Ua(r,2);if(3==i){i=Ua(r,2);i=[24e3,22060,16e3][i];var o=3}else i=[48e3,44100,32e3][i],o=Ua(r,2);var a=Ua(r,3),s=Ua(r,1);r=Ua(r,5);if(t+n>e.byteLength)return null;e=Math.floor(n*i/(16*[1,2,3,6][o]));e=new Uint8Array([(e&8160)>>5,(e&31)<<3,i<<6|r<<1|0,0|a<<1|s<<0,0]);return{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][a]+s,Z:e,O:n}}function y_(e){this.i=e;this.h=0;this.g=new Map}n=y_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]?ie(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){e=de(e);for(var i=Ta(e),o=i.length;o<e.length&&2935!==(e[o]<<8|e[o+1]<<0);o++);var a=1e3*r.endTime;i=Ca(i);i.length&&r&&(r=i.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(a=r.data);r=0;i=new Uint8Array([]);for(var s=[];o<e.length;){var l=g_(e,o);if(!l)return Promise.reject(new dt(2,3,3018));t.audioSamplingRate=l.sampleRate;t.channelsCount=l.channelCount;r=l.sampleRate;i=l.Z;s.push({data:e.subarray(o,o+l.O),size:l.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});o+=l.O}e=Math.floor(a*r/1e3);n={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:n,Ka:[],Z:i,la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:s},stream:t};e=new Hy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=e.initSegment(),this.g.set(t.id,n));t=Vy(e);this.h++;t=Bi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.Ec3Transmuxer",y_);y_.prototype.transmux=y_.prototype.transmux;y_.prototype.getOrginalMimeType=y_.prototype.getOrginalMimeType;y_.prototype.convertCodecs=y_.prototype.convertCodecs;y_.prototype.isSupported=y_.prototype.isSupported;y_.prototype.destroy=y_.prototype.destroy;Ve("audio/ec3",(function(){return new y_("audio/ec3")}),Ke);function b_(e){if(!e.length)return null;var t=e.find((function(e){return 7==e.type}));e=e.find((function(e){return 8==e.type}));if(!t||!e)return null;var r=new La(t.data),n=Ua(r,8);Ua(r,8);Ua(r,8);Fa(r);if(w_.includes(n)&&(n=Ba(r),3===n&&qa(r,1),Fa(r),Fa(r),qa(r,1),1===Ua(r,1))){n=3!==n?8:12;for(var i=0;i<n;i++)1===Ua(r,1)&&(6>i?za(r,16):za(r,64))}Fa(r);n=Ba(r);if(0===n)Ba(r);else if(1===n)for(qa(r,1),Fa(r),Fa(r),n=Ba(r),i=0;i<n;i++)Fa(r);Fa(r);qa(r,1);n=Ba(r);var o=Ba(r),a=Ua(r,1);0===a&&qa(r,1);qa(r,1);var s=i=0,l=0,c=0;1===Ua(r,1)&&(i=Ba(r),s=Ba(r),l=Ba(r),c=Ba(r));r=(2-a)*(o+1)*16-2*l-2*c;n=16*(n+1)-2*i-2*s;i=[];t=t.ab;i.push(t.byteLength>>>8&255);i.push(t.byteLength&255);i=i.concat.apply(i,p(t));t=[];e=e.ab;t.push(e.byteLength>>>8&255);t.push(e.byteLength&255);t=t.concat.apply(t,p(e));e=new Uint8Array([1,i[3],i[4],i[5],255,225].concat(i,[1],t));return{height:r,width:n,la:e}}function v_(e){var t=!1,r=new Uint8Array([]),n=e.find((function(e){return 7==e.type})),i=!1;e=u(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a=!1;switch(o.type){case 1:a=i=!0;var s=o.data;n&&4<s.length&&(s=Va(new La(s)),2===s||4===s||7===s||9===s)&&(t=!0);break;case 5:t=a=i=!0;break;case 6:a=!0;break;case 7:a=!0;break;case 8:a=!0;break;case 9:i=a=!0;break;case 12:a=!0;break;default:a=!1}i&&a&&(a=o.ab.byteLength,s=new Uint8Array(4),s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=a&255,r=Bi(r,s,o.ab))}return r.byteLength?{data:r,rf:t}:null}var w_=[100,110,122,244,44,83,86,118,128,138,139,134];function E_(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==o){var a=e[t+3]>>6;i=1e3*__[14*(3===r?3-n:3===n?3:4)+i-1];o=x_[3*(3===r?0:2===r?1:2)+o];r=D_[r][n];var s=C_[n],l=Math.floor(r*i/o+(e[t+2]>>1&1))*s,c=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);(c=c?parseInt(c[1],10):0)&&87>=c&&2===n&&224e3<=i&&0===a&&(e[t+3]|=128);return{sampleRate:o,channelCount:3===a?1:2,O:l,fh:8*r*s}}return null}function S_(e,t){return 255===e[t]&&224===(e[t+1]&224)&&0!==(e[t+1]&6)}var __=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],x_=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],D_=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],C_=[0,1,1,4];function T_(e){this.i=e;this.h=0;this.g=new Map}n=T_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]?ie(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){e=de(e);for(r=Ta(e).length;r<e.length;r++){var i=r;if(i+1<e.length&&S_(e,i)){var o=E_(e,i),a=4;o&&o.O&&(a=o.O);i+=a;i=i===e.length||i+1<e.length&&S_(e,i)}else i=!1;if(i)break}var s;for(i=[];r<e.length;){o=E_(e,r);if(!o)return Promise.reject(new dt(2,3,3018));s||(s=o);r+o.O<=e.length&&i.push({data:e.subarray(r,r+o.O),size:o.O,duration:1152,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});r+=o.O}if(!s)return Promise.reject(new dt(2,3,3018));e=9e4*s.fh/s.sampleRate*this.h;n={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:n,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.h,baseMediaDecodeTime:e,Ja:i},stream:t};s=new Hy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=s.initSegment(),this.g.set(t.id,n));t=Vy(s);this.h++;t=Bi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.Mp3Transmuxer",T_);T_.prototype.transmux=T_.prototype.transmux;T_.prototype.getOrginalMimeType=T_.prototype.getOrginalMimeType;T_.prototype.convertCodecs=T_.prototype.convertCodecs;T_.prototype.isSupported=T_.prototype.isSupported;T_.prototype.destroy=T_.prototype.destroy;Ve("audio/mpeg",(function(){return new T_("audio/mpeg")}),Ke);function O_(e){this.h=e;this.g=null}n=O_.prototype;n.destroy=function(){};n.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=kt(e).split(","),r=wt("audio",t);t=wt("video",t);return!r||t||"mp3"!=Ot(r)?!1:ie(this.convertCodecs("audio",e))};n.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t};n.getOrginalMimeType=function(){return this.h};n.transmux=function(e){this.g?this.g.clearData():this.g=new Wa;e=de(e);var t=this.g.parse(e);e=t.nd();if("mp3"!=e.audio||e.video)return Promise.reject(new dt(2,3,3018));e=new Uint8Array([]);t=u(t.yb());for(var r=t.next();!r.done;r=t.next())if(r=r.value.data)for(var n=0;n<r.length;){var i=E_(r,n);i?(n+i.O<=r.length&&(e=Bi(e,r.subarray(n,n+i.O))),n+=i.O):n++}return Promise.resolve(e)};V("shaka.transmuxer.MpegTsTransmuxer",O_);O_.prototype.transmux=O_.prototype.transmux;O_.prototype.getOrginalMimeType=O_.prototype.getOrginalMimeType;O_.prototype.convertCodecs=O_.prototype.convertCodecs;O_.prototype.isSupported=O_.prototype.isSupported;O_.prototype.destroy=O_.prototype.destroy;Ve("video/mp2t",(function(){return new O_("video/mp2t")}),$e);function k_(e){this.h=e;(this.g=ug.get("ISOBoxer")())&&P_(this)}function P_(e){function t(){this._procFullBox();this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8));this._procField("sample_count","uint",32);this._procEntries("entry",this.sample_count,(function(e){this._procEntryField(e,"InitializationVector","data",8);this.flags&2&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,(function(e){this._procEntryField(e,"BytesOfClearData","uint",16);this._procEntryField(e,"BytesOfEncryptedData","uint",32)})))}))}e.g.addBoxProcessor("saio",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("entry_count","uint",32);this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}));e.g.addBoxProcessor("saiz",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("default_sample_info_size","uint",8);this._procField("sample_count","uint",32);0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}));e.g.addBoxProcessor("senc",t);e.g.addBoxProcessor("uuid",(function(){for(var e=!0,r=0;16>r;r++)this.usertype[r]!==I_[r]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))}))}n=k_.prototype;n.destroy=function(){};n.isSupported=function(e,t){var r=e.startsWith("mss/");if(!this.g||!r)return!1;if(t)return ie(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return ie(t)||ie(e)};n.convertCodecs=function(e,t){return t.replace("mss/","")};n.getOrginalMimeType=function(){return this.h};n.transmux=function(e,t,r){if(!r)return Promise.resolve(de(e));if(!t.mssPrivateData)return Promise.reject(new dt(2,3,3020));try{var n,i=this.g.parseBuffer(e),o=i.fetch("tfhd");o.track_ID=t.id+1;var a=i.fetch("tfdt"),s=i.fetch("traf");null===a&&(a=this.g.createFullBox("tfdt",s,o),a.version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(r.startTime*t.mssPrivateData.timescale));var l=i.fetch("trun"),c=i.fetch("tfxd");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var u=i.fetch("tfrf");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var p=i.fetch("sepiff");if(null!==p){p.type="senc";p.usertype=void 0;var d=i.fetch("saio");if(null===d){d=this.g.createFullBox("saio",s);d.version=0;d.flags=0;d.entry_count=1;d.offset=[0];var h=this.g.createFullBox("saiz",s);h.version=0;h.flags=0;h.sample_count=p.sample_count;h.default_sample_info_size=0;h.sample_info_size=[];if(p.flags&2)for(n=0;n<p.sample_count;n+=1)h.sample_info_size[n]=10+6*p.entry[n].NumberOfEntries;else h.default_sample_info_size=8}}o.flags&=16777214;o.flags|=131072;l.flags|=1;var m=i.fetch("moof");l.data_offset=m.getLength()+8;var f=i.fetch("saio");null!==f&&(f.offset[0]=A_(m,"traf")+A_(s,"senc")+16);var g=de(i.write());return Promise.resolve(g)}catch(e){return e instanceof dt?Promise.reject(e):Promise.reject(new dt(2,3,3022))}};function A_(e,t){for(var r=8,n=0;n<e.boxes.length&&e.boxes[n].type!==t;n++)r+=e.boxes[n].size;return r}V("shaka.transmuxer.MssTransmuxer",k_);k_.prototype.transmux=k_.prototype.transmux;k_.prototype.getOrginalMimeType=k_.prototype.getOrginalMimeType;k_.prototype.convertCodecs=k_.prototype.convertCodecs;k_.prototype.isSupported=k_.prototype.isSupported;k_.prototype.destroy=k_.prototype.destroy;var I_=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Ve("mss/audio/mp4",(function(){return new k_("mss/audio/mp4")}),Ke);Ve("mss/video/mp4",(function(){return new k_("mss/video/mp4")}),Ke);function j_(e){var t=this;this.m=e;this.j=ug.get("muxjs")();this.h=this.g=null;this.l=[];this.i=!1;this.j&&(this.g=new this.j.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",(function(e){t.l.push(Bi(e.initSegment,e.data))})),this.g.on("done",(function(){var e=Bi.apply(Li,p(t.l));t.h.resolve(e);t.i=!1})))}n=j_.prototype;n.destroy=function(){this.g&&this.g.dispose();this.g=null};n.isSupported=function(e,t){var r="mp2t"==e.toLowerCase().split(";")[0].split("/")[1];if(!this.j||!r)return!1;if(t)return ie(R_(t,e));t=R_("audio",e);e=R_("video",e);return ie(t)||ie(e)};n.convertCodecs=function(e,t){return"mp2t"==t.toLowerCase().split(";")[0].split("/")[1]?R_(e,t):t};function R_(e,t){t=t.replace(/mp2t/i,"mp4");"audio"==e&&(t=t.replace("video","audio"));if(e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var r="avc1.",n=e[1],i=Number(e[2]);r=("66"==n?r+"4200":"77"==n?r+"4d00":r+"6400")+(i>>4).toString(16);r+=(i&15).toString(16);t=t.replace(e[0],r)}return t}n.getOrginalMimeType=function(){return this.m};n.transmux=function(e){this.i=!0;this.h=new Pn;this.l=[];e=de(e);this.g.push(e);this.g.flush();this.i&&this.h.reject(new dt(2,3,3018));return this.h};V("shaka.transmuxer.MuxjsTransmuxer",j_);j_.prototype.transmux=j_.prototype.transmux;j_.prototype.getOrginalMimeType=j_.prototype.getOrginalMimeType;j_.prototype.convertCodecs=j_.prototype.convertCodecs;j_.prototype.isSupported=j_.prototype.isSupported;j_.prototype.destroy=j_.prototype.destroy;Ve("video/mp2t",(function(){return new j_("video/mp2t")}),Ke);function N_(e){this.j=e;this.g=0;this.h=new Map;this.i=null}n=N_.prototype;n.destroy=function(){this.h.clear()};n.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var r=kt(e).split(","),n=wt("audio",r);r=wt("video",r);if(n&&r||n&&(n=Ot(n),!L_.includes(n))||r&&(n=Ot(r),!M_.includes(n)))return!1;if(t)return ie(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return ie(t)||ie(e)};n.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=kt(t).replace("mp4a.40.34","mp3"),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t};n.getOrginalMimeType=function(){return this.j};n.transmux=function(e,t,r,n,i){this.i?this.i.clearData():this.i=new Wa;e=de(e);var o=this.i.parse(e);e=[];var a=o.nd();try{r=null;if("video"==i){switch(a.video){case"avc":for(var s=[],l=null,c=[],p=o.td(),d=0;d<p.length;d++){var h=p[d],m=void 0;d+1<p.length&&(m=p[d+1]);var f=o.Be(h,m);c=c.concat(f);var g=v_(f);g&&(null==l&&(l=h.dts),m=void 0,m=d+1<p.length?(p[d+1].dts||0)-(h.dts||0):(h.dts||0)-(p[d-1].dts||0),s.push({data:g.data,size:g.data.byteLength,duration:m,$a:Math.round((h.pts||0)-(h.dts||0)),flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:g.rf?2:1,gb:g.rf?0:1}}))}var y=b_(c);if(!y||null==l)throw new dt(2,3,3018);t.height=y.height;t.width=y.width;r={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:n,Ka:[],Z:new Uint8Array([]),la:y.la,data:{lb:this.g,baseMediaDecodeTime:l,Ja:s},stream:t}}r&&(e.push(r),r=null)}if("audio"==i){switch(a.audio){case"aac":for(var b=[],v,w=null,E=u(o.yb()),S=E.next();!S.done;S=E.next()){var _=S.value,x=_.data;if(x){o=0;v=u_(x,o);if(!v)throw new dt(2,3,3018);t.audioSamplingRate=v.sampleRate;t.channelsCount=v.channelCount;null==w&&null!==_.pts&&(w=_.pts);for(;o<x.length;){var D=c_(x,o);if(D){var C=D.vd+D.O;o+C<=x.length&&b.push({data:x.subarray(o+D.vd,o+C),size:D.O,duration:1024,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}});o+=C}else o++}}}if(!v||null==w)throw new dt(2,3,3018);var T=v.sampleRate;o=w/9e4*T;r={id:t.id,type:"audio",codecs:v.oa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:T,duration:n,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:o,Ja:b},stream:t};break;case"ac3":w=[];v=0;b=new Uint8Array([]);T=null;for(var O=u(o.yb()),k=O.next();!k.done;k=O.next()){var P=k.value,A=P.data;null==T&&null!==P.pts&&(T=P.pts);for(o=0;o<A.length;){var I=h_(A,o);I?(t.audioSamplingRate=I.sampleRate,t.channelsCount=I.channelCount,v=I.sampleRate,b=I.Z,w.push({data:A.subarray(o,o+I.O),size:I.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}}),o+=I.O):o++}}if(0==v||0==b.byteLength||null==T)throw new dt(2,3,3018);o=T/9e4*v;r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:v,duration:n,Ka:[],Z:b,la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:o,Ja:w},stream:t};break;case"ec3":b=[];v=0;w=new Uint8Array([]);T=null;for(var j=u(o.yb()),R=j.next();!R.done;R=j.next()){var N=R.value,L=N.data;null==T&&null!==N.pts&&(T=N.pts);for(o=0;o<L.length;){var M=g_(L,o);M?(t.audioSamplingRate=M.sampleRate,t.channelsCount=M.channelCount,v=M.sampleRate,w=M.Z,b.push({data:L.subarray(o,o+M.O),size:M.O,duration:1536,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}}),o+=M.O):o++}}if(0==v||0==w.byteLength||null==T)throw new dt(2,3,3018);o=T/9e4*v;r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:v,duration:n,Ka:[],Z:w,la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:o,Ja:b},stream:t};break;case"mp3":b=[];var q;w=null;for(var U=u(o.yb()),H=U.next();!H.done;H=U.next()){var F=H.value,B=F.data;if(B)for(null==w&&null!==F.pts&&(w=F.pts),o=0;o<B.length;){var z=E_(B,o);z?(q||(q=z),o+z.O<=B.length&&b.push({data:B.subarray(o,o+z.O),size:z.O,duration:1152,$a:0,flags:{fb:0,Ua:0,Ta:0,Pa:0,Qa:2,gb:0}}),o+=z.O):o++}}if(!q||null==w)throw new dt(2,3,3018);var V=q.sampleRate;o=w/9e4*V;r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:V,duration:n,Ka:[],Z:new Uint8Array([]),la:new Uint8Array([]),data:{lb:this.g,baseMediaDecodeTime:o,Ja:b},stream:t}}r&&e.push(r)}}catch(e){return Promise.reject(e)}if(!e.length)return Promise.reject(new dt(2,3,3018));e=new Hy(e);this.h.has(t.id)?n=this.h.get(t.id):(n=e.initSegment(),this.h.set(t.id,n));t=Vy(e);this.g++;t=Bi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.TsTransmuxer",N_);N_.prototype.transmux=N_.prototype.transmux;N_.prototype.getOrginalMimeType=N_.prototype.getOrginalMimeType;N_.prototype.convertCodecs=N_.prototype.convertCodecs;N_.prototype.isSupported=N_.prototype.isSupported;N_.prototype.destroy=N_.prototype.destroy;var L_=["aac","ac-3","ec-3","mp3"],M_=["avc"];Ve("video/mp2t",(function(){return new N_("video/mp2t")}),Xe);function q_(){}var U_;function H_(){U_?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(U_=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=F_):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function F_(e,t){var r=this,n;return L((function(i){if(1==i.g)return console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),S(i,U_.call(r,e,t),2);n=i.h;if(J_(n))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=U_,i.return(n);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=B_;return i.return(B_.call(r,e,t))}))}function B_(e,t){var r=this,n,i,o,a,s,l,c,p,d,h;return L((function(m){if(1==m.g){console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess');n=Q_(e);i=[];o=u(t);for(a=o.next();!a.done;a=o.next())s=a.value,l=z_(s.videoCapabilities,n),c=z_(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!l.length||s.audioCapabilities&&s.audioCapabilities.length&&!c.length||(p=Object.assign({},s),p.videoCapabilities=l,p.audioCapabilities=c,i.push(p));if(!i.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return S(m,U_.call(r,e,i),2)}h=m.h;return m.return(new Y_(h,n))}))}function z_(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}V("EmeEncryptionSchemePolyfill",q_);q_.install=H_;function V_(){}var W_;function G_(){W_?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(W_=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=K_):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function K_(e){var t=this,r,n,i;return L((function(o){switch(o.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(o,W_.call(t,e),2);case 2:r=o.h;if(!e.keySystemConfiguration)return o.return(r);if((n=r.keySystemAccess)&&J_(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=W_,o.return(r);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.mediaCapabilities.decodingInfo=$_;if(n){o.B(3);break}i=r;return S(o,X_(e),4);case 4:return i.keySystemAccess=o.h,o.return(r);case 3:return o.return($_.call(t,e))}}))}function $_(e){var t=this,r,n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,o=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,r=Q_(i),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=r||a&&a!=r)?u.return(s):S(u,W_.call(t,e),2);case 2:l=u.h;if(l.keySystemAccess){l.keySystemAccess=new Y_(l.keySystemAccess,r);u.B(3);break}if(!e.keySystemConfiguration){u.B(3);break}c=l;return S(u,X_(e),5);case 5:c.keySystemAccess=u.h;case 3:return u.return(l)}}))}function X_(e){var t,r;return L((function(n){if(1==n.g){var i=e.keySystemConfiguration,o=[],a=[];i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType});i.video&&a.push({robustness:i.video.robustness||"",contentType:e.video.contentType});i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes};o.length&&(i.audioCapabilities=o);a.length&&(i.videoCapabilities=a);t=i;return S(n,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}r=n.h;return n.return(r)}))}V("McEncryptionSchemePolyfill",V_);V_.install=G_;function Y_(e,t){this.h=e;this.g=t;this.keySystem=e.keySystem}Y_.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),r=t.next();!r.done;r=t.next())r.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=u(e.audioCapabilities),r=t.next();!r.done;r=t.next())r.value.encryptionScheme=this.g;return e};Y_.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function Q_(e){if(e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3"))return"cenc";if(e.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!");return null}function J_(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return(e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&void 0!==e.encryptionScheme?!0:!1}function Z_(){}function ex(){H_();G_()}V("EncryptionSchemePolyfills",Z_);Z_.install=ex;"undefined"!==typeof r&&r.exports&&(r.exports=Z_)}).call(n,r,r,undefined);if(true)for(var i in n.shaka)t[i]=n.shaka[i];else{}})()}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/shaka-player/dist/shaka-player.ui.js":function(e,t,r){(function(e){(function(){var r=typeof window!="undefined"?window:e;var n={};(function(e,t,r){var n;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){if(e==Array.prototype||e==Object.prototype)return e;e[t]=r.value;return e};function a(r){r=["object"==typeof globalThis&&globalThis,r,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<r.length;++n){var i=r[n];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}var s=a(this);function l(e,t){if(t)e:{var r=s;e=e.split(".");for(var n=0;n<e.length-1;n++){var i=e[n];if(!(i in r))break e;r=r[i]}e=e[e.length-1];n=r[e];t=t(n);t!=n&&null!=t&&o(r,e,{configurable:!0,writable:!0,value:t})}}l("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new r(n+(e||"")+"_"+i++,e)}function r(e,t){this.g=e;o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;r.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return t}));l("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var n=s[t[r]];"function"===typeof n&&"function"!=typeof n.prototype[e]&&o(n.prototype,e,{configurable:!0,writable:!0,value:function(){return c(i(this))}})}return e}));function c(e){e={next:e};e[Symbol.iterator]=function(){return this};return e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function p(e){if(!(e instanceof Array)){e=u(e);for(var t,r=[];!(t=e.next()).done;)r.push(t.value);e=r}return e}var d="function"==typeof Object.create?Object.create:function(e){function t(){}t.prototype=e;return new t},h;if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var m;e:{var f={a:!0},g={};try{g.__proto__=f;m=g.a;break e}catch(e){}m=!1}h=m?function(e,t){e.__proto__=t;if(e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=h;function b(e,t){e.prototype=d(t.prototype);e.prototype.constructor=e;if(y)y(e,t);else for(var r in t)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,r);n&&Object.defineProperty(e,r,n)}else e[r]=t[r];e.ik=t.prototype}function v(){this.s=!1;this.l=null;this.h=void 0;this.g=1;this.j=this.m=0;this.C=this.i=null}function w(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}v.prototype.B=function(e){this.h=e};function E(e,t){e.i={kg:t,ug:!0};e.g=e.m||e.j}v.prototype.return=function(e){this.i={return:e};this.g=this.j};function S(e,t,r){e.g=r;return{value:t}}v.prototype.D=function(e){this.g=e};function _(e){e.g=0}function x(e,t,r){e.m=t;void 0!=r&&(e.j=r)}function D(e){e.m=0;e.j=2}function C(e,t,r){e.g=t;e.m=r||0}function T(e,t){e.m=t||0;t=e.i.kg;e.i=null;return t}function O(e){e.C=[e.i];e.m=0;e.j=0}function k(e,t){var r=e.C.splice(0)[0];(r=e.i=e.i||r)?r.ug?e.g=e.m||e.j:void 0!=r.D&&e.j<r.D?(e.g=r.D,e.i=null):e.g=e.j:e.g=t}function P(e){this.g=new v;this.h=e}function A(e,t){w(e.g);var r=e.g.l;if(r)return I(e,"return"in r?r["return"]:function(e){return{value:e,done:!0}},t,e.g.return);e.g.return(t);return j(e)}function I(e,t,r,n){try{var i=t.call(e.g.l,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.s=!1,i;var o=i.value}catch(t){return e.g.l=null,E(e.g,t),j(e)}e.g.l=null;n.call(e.g,o);return j(e)}function j(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,E(e.g,t)}e.g.s=!1;if(e.g.i){t=e.g.i;e.g.i=null;if(t.ug)throw t.kg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){w(e.g);e.g.l?t=I(e,e.g.l.next,t,e.g.B):(e.g.B(t),t=j(e));return t};this.throw=function(t){w(e.g);e.g.l?t=I(e,e.g.l["throw"],t,e.g.B):(E(e.g,t),t=j(e));return t};this.return=function(t){return A(e,t)};this[Symbol.iterator]=function(){return this}}function N(e){function t(t){return e.next(t)}function r(t){return e.throw(t)}return new Promise((function(n,i){function o(e){e.done?n(e.value):Promise.resolve(e.value).then(t,r).then(o,i)}o(e.next())}))}function L(e){return N(new R(new P(e)))}function M(){for(var e=Number(this),t=[],r=e;r<arguments.length;r++)t[r-e]=arguments[r];return t}l("Promise",(function(e){function t(e){this.h=0;this.i=void 0;this.g=[];this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.g=null}function n(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;r.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var i=s.setTimeout;r.prototype.i=function(e){i(e,0)};r.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.j(e)}}}this.g=null};r.prototype.j=function(e){this.i((function(){throw e}))};t.prototype.j=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.H),reject:e(this.l)}};t.prototype.H=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.J(e);else{e:switch(typeof e){case"object":var r=null!=e;break e;case"function":r=!0;break e;default:r=!1}r?this.G(e):this.m(e)}};t.prototype.G=function(e){var t=void 0;try{t=e.then}catch(e){this.l(e);return}"function"==typeof t?this.K(t,e):this.m(e)};t.prototype.l=function(e){this.B(2,e)};t.prototype.m=function(e){this.B(1,e)};t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e;this.i=t;2===this.h&&this.I();this.C()};t.prototype.I=function(){var e=this;i((function(){if(e.F()){var t=s.console;"undefined"!==typeof t&&t.error(e.i)}}),1)};t.prototype.F=function(){if(this.s)return!1;var e=s.CustomEvent,t=s.Event,r=s.dispatchEvent;if("undefined"===typeof r)return!0;"function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=s.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.i;return r(e)};t.prototype.C=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new r;t.prototype.J=function(e){var t=this.j();e.Md(t.resolve,t.reject)};t.prototype.K=function(e,t){var r=this.j();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}};t.prototype.then=function(e,r){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e;o=t}));this.Md(n(e,i),n(r,o));return a};t.prototype.catch=function(e){return this.then(void 0,e)};t.prototype.Md=function(e,t){function r(){switch(n.h){case 1:e(n.i);break;case 2:t(n.i);break;default:throw Error("Unexpected state: "+n.h)}}var n=this;null==this.g?o.h(r):this.g.push(r);this.s=!0};t.resolve=n;t.reject=function(e){return new t((function(t,r){r(e)}))};t.race=function(e){return new t((function(t,r){for(var i=u(e),o=i.next();!o.done;o=i.next())n(o.value).Md(t,r)}))};t.all=function(e){var r=u(e),i=r.next();return i.done?n([]):new t((function(e,t){function o(t){return function(r){a[t]=r;s--;0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,n(i.value).Md(o(a.length-1),t),i=r.next()}while(!i.done)}))};return t}));function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}l("WeakMap",(function(e){function t(e){this.g=(l+=Math.random()+1).toString();if(e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function r(){}function n(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!q(e,s)){var t=new r;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){if(e instanceof r)return e;Object.isExtensible(e)&&i(e);return t(e)})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),r=Object.seal({}),n=new e([[t,2],[r,3]]);if(2!=n.get(t)||3!=n.get(r))return!1;n.delete(t);n.set(r,4);return!n.has(t)&&4==n.get(r)}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze");a("preventExtensions");a("seal");var l=0;t.prototype.set=function(e,t){if(!n(e))throw Error("Invalid WeakMap key");i(e);if(!q(e,s))throw Error("WeakMap key fail: "+e);e[s][this.g]=t;return this};t.prototype.get=function(e){return n(e)&&q(e,s)?e[s][this.g]:void 0};t.prototype.has=function(e){return n(e)&&q(e,s)&&q(e[s],this.g)};t.prototype.delete=function(e){return n(e)&&q(e,s)&&q(e[s],this.g)?delete e[s][this.g]:!1};return t}));l("Map",(function(e){function t(){var e={};return e.Hb=e.next=e.head=e}function r(e,t){var r=e.g;return c((function(){if(r){for(;r.head!=e.g;)r=r.Hb;for(;r.next!=r.head;)return r=r.next,{done:!1,value:t(r)};r=null}return{done:!0,value:void 0}}))}function n(e,t){var r=t&&typeof t;"object"==r||"function"==r?o.has(t)?r=o.get(t):(r=""+ ++a,o.set(t,r)):r="p_"+t;var n=e.h[r];if(n&&q(e.h,r))for(e=0;e<n.length;e++){var i=n[e];if(t!==t&&i.key!==i.key||t===i.key)return{id:r,list:n,index:e,entry:i}}return{id:r,list:n,index:-1,entry:void 0}}function i(e){this.h={};this.g=t();this.size=0;if(e){e=u(e);for(var r;!(r=e.next()).done;)r=r.value,this.set(r[0],r[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(u([[t,"s"]]));if("s"!=r.get(t)||1!=r.size||r.get({x:4})||r.set({x:4},"t")!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();if(i.done||i.value[0]!=t||"s"!=i.value[1])return!1;i=n.next();return i.done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done?!1:!0}catch(e){return!1}}())return e;var o=new WeakMap;i.prototype.set=function(e,t){e=0===e?0:e;var r=n(this,e);r.list||(r.list=this.h[r.id]=[]);r.entry?r.entry.value=t:(r.entry={next:this.g,Hb:this.g.Hb,head:this.g,key:e,value:t},r.list.push(r.entry),this.g.Hb.next=r.entry,this.g.Hb=r.entry,this.size++);return this};i.prototype.delete=function(e){e=n(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.entry.Hb.next=e.entry.next,e.entry.next.Hb=e.entry.Hb,e.entry.head=null,this.size--,!0):!1};i.prototype.clear=function(){this.h={};this.g=this.g.Hb=t();this.size=0};i.prototype.has=function(e){return!!n(this,e).entry};i.prototype.get=function(e){return(e=n(this,e).entry)&&e.value};i.prototype.entries=function(){return r(this,(function(e){return[e.key,e.value]}))};i.prototype.keys=function(){return r(this,(function(e){return e.key}))};i.prototype.values=function(){return r(this,(function(e){return e.value}))};i.prototype.forEach=function(e,t){for(var r=this.entries(),n;!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)};i.prototype[Symbol.iterator]=i.prototype.entries;var a=0;return i}));function U(e,t){e instanceof String&&(e+="");var r=0,n=!1,i={next:function(){if(!n&&r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}n=!0;return{done:!0,value:void 0}}};i[Symbol.iterator]=function(){return i};return i}l("Array.prototype.keys",(function(e){return e?e:function(){return U(this,(function(e){return e}))}}));l("Set",(function(e){function t(e){this.g=new Map;if(e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),r=new e(u([t]));if(!r.has(t)||1!=r.size||r.add(t)!=r||1!=r.size||r.add({x:4})!=r||2!=r.size)return!1;var n=r.entries(),i=n.next();if(i.done||i.value[0]!=t||i.value[1]!=t)return!1;i=n.next();return i.done||i.value[0]==t||4!=i.value[0].x||i.value[1]!=i.value[0]?!1:n.next().done}catch(e){return!1}}())return e;t.prototype.add=function(e){e=0===e?0:e;this.g.set(e,e);this.size=this.g.size;return this};t.prototype.delete=function(e){e=this.g.delete(e);this.size=this.g.size;return e};t.prototype.clear=function(){this.g.clear();this.size=0};t.prototype.has=function(e){return this.g.has(e)};t.prototype.entries=function(){return this.g.entries()};t.prototype.values=function(){return this.g.values()};t.prototype.keys=t.prototype.values;t.prototype[Symbol.iterator]=t.prototype.values;t.prototype.forEach=function(e,t){var r=this;this.g.forEach((function(n){return e.call(t,n,n,r)}))};return t}));l("Array.from",(function(e){return e?e:function(e,t,r){t=null!=t?t:function(e){return e};var n=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)n.push(t.call(r,i.value,o++))}else for(i=e.length,o=0;o<i;o++)n.push(t.call(r,e[o],o));return n}}));function H(e,t,r){e instanceof String&&(e=String(e));for(var n=e.length,i=0;i<n;i++){var o=e[i];if(t.call(r,o,i,e))return{rg:i,v:o}}return{rg:-1,v:void 0}}l("Array.prototype.findIndex",(function(e){return e?e:function(e,t){return H(this,e,t).rg}}));l("Object.is",(function(e){return e?e:function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}}));l("Array.prototype.includes",(function(e){return e?e:function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;t=t||0;for(0>t&&(t=Math.max(t+n,0));t<n;t++){var i=r[t];if(i===e||Object.is(i,e))return!0}return!1}}));function F(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""}l("String.prototype.includes",(function(e){return e?e:function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}));l("Array.prototype.find",(function(e){return e?e:function(e,t){return H(this,e,t).v}}));l("String.prototype.startsWith",(function(e){return e?e:function(e,t){var r=F(this,e,"startsWith"),n=r.length,i=e.length;t=Math.max(0,Math.min(t|0,r.length));for(var o=0;o<i&&t<n;)if(r[t++]!=e[o++])return!1;return o>=i}}));var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)q(n,i)&&(e[i]=n[i])}return e};l("Object.assign",(function(e){return e||B}));l("Array.prototype.values",(function(e){return e?e:function(){return U(this,(function(e,t){return t}))}}));l("Promise.prototype.finally",(function(e){return e?e:function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}}));l("Array.prototype.entries",(function(e){return e?e:function(){return U(this,(function(e,t){return[e,t]}))}}));l("String.prototype.repeat",(function(e){return e?e:function(e){var t=F(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var r="";e;)if(e&1&&(r+=t),e>>>=1)t+=t;return r}}));l("Number.isNaN",(function(e){return e?e:function(e){return"number"===typeof e&&isNaN(e)}}));l("Number.isFinite",(function(e){return e?e:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}}));l("Object.values",(function(e){return e?e:function(e){var t=[],r;for(r in e)q(e,r)&&t.push(e[r]);return t}}));l("Math.log2",(function(e){return e?e:function(e){return Math.log(e)/Math.LN2}}));l("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991}));l("Math.trunc",(function(e){return e?e:function(e){e=Number(e);if(isNaN(e)||Infinity===e||-Infinity===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}));l("Object.entries",(function(e){return e?e:function(e){var t=[],r;for(r in e)q(e,r)&&t.push([r,e[r]]);return t}}));var z=this||self;function V(e,t){e=e.split(".");var r=z;e[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)e.length||void 0===t?r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}:r[n]=t}var W={};function G(t,r){if(r)if(r instanceof Map)for(var n=u(r.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:r.get(i),writable:!0,enumerable:!0});else for(n in r)Object.defineProperty(this,n,{value:r[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now();this.type=t;this.isTrusted=!1;this.target=this.currentTarget=null;this.g=!1}function K(e){var t=new G(e.type),r;for(r in e)Object.defineProperty(t,r,{value:e[r],writable:!0,enumerable:!0});return t}G.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};G.prototype.stopImmediatePropagation=function(){this.g=!0};G.prototype.stopPropagation=function(){};V("shaka.util.FakeEvent",G);var $={Oi:"abrstatuschanged",Pi:"adaptation",Qi:"buffering",Ti:"downloadfailed",Ui:"downloadheadersreceived",Vi:"drmsessionupdate",bj:"emsg",Aj:"prft",Error:"error",cj:"expirationupdated",fj:"gapjumped",jj:"loaded",kj:"loading",pj:"manifestparsed",qj:"mediaqualitychanged",Metadata:"metadata",uj:"onstatechange",vj:"onstateidle",Fj:"ratechange",Lj:"segmentappended",Mj:"sessiondata",Nj:"stalldetected",Oj:"streaming",Pj:"textchanged",Qj:"texttrackvisibility",Rj:"timelineregionadded",Sj:"timelineregionenter",Tj:"timelineregionexit",Uj:"trackschanged",Zj:"unloading",ck:"variantchanged"};function X(){}function Y(){}function Q(){}function J(e){var t=M.apply(1,arguments);ne.has(e)||(ne.add(e),Q.apply(X,p(t)))}function Z(){}function ee(){}function te(){}function re(){}var ne=new Set;e.console&&(Q=function(){return console.warn.apply(console,p(M.apply(0,arguments)))},Y=function(){console.error.apply(console,p(M.apply(0,arguments)))});function ie(){this.g={}}n=ie.prototype;n.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]};n.get=function(e){return(e=this.g[e])?e.slice():null};n.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])};n.forEach=function(e){for(var t in this.g)e(t,this.g[t])};n.size=function(){return Object.keys(this.g).length};n.keys=function(){return Object.keys(this.g)};function oe(){this.ma=new ie;this.qe=this}oe.prototype.addEventListener=function(e,t){this.ma&&this.ma.push(e,t)};oe.prototype.removeEventListener=function(e,t){this.ma&&this.ma.remove(e,t)};oe.prototype.dispatchEvent=function(e){if(!this.ma)return!0;var t=this.ma.get(e.type)||[],r=this.ma.get("All");r&&(t=t.concat(r));t=u(t);for(r=t.next();!r.done;r=t.next()){r=r.value;e.target=this.qe;e.currentTarget=this.qe;try{r.handleEvent?r.handleEvent(e):r.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented};oe.prototype.release=function(){this.ma=null};function ae(e,t){var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next())r.push(t(n.value));return r}function se(e,t){e=u(e);for(var r=e.next();!r.done;r=e.next())if(!t(r.value))return!1;return!0}function le(e,t){e=u(e);for(var r=e.next();!r.done;r=e.next())if(t(r.value))return!0;return!1}function ce(e,t){var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next())n=n.value,t(n)&&r.push(n);return r}var ue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function pe(e){var t;e instanceof pe?(de(this,e.eb),this.qc=e.qc,this.mb=e.mb,he(this,e.Hc),this.La=e.La,me(this,e.g.clone()),this.Yb=e.Yb):e&&(t=String(e).match(ue))?(de(this,t[1]||"",!0),this.qc=fe(t[2]||""),this.mb=fe(t[3]||"",!0),he(this,t[4]),this.La=fe(t[5]||"",!0),me(this,t[6]||"",!0),this.Yb=fe(t[7]||"")):this.g=new _e(null)}n=pe.prototype;n.eb="";n.qc="";n.mb="";n.Hc=null;n.La="";n.Yb="";n.toString=function(){var e=[],t=this.eb;t&&e.push(ge(t,be,!0),":");if(t=this.mb){e.push("//");var r=this.qc;r&&e.push(ge(r,be,!0),"@");e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));t=this.Hc;null!=t&&e.push(":",String(t))}if(t=this.La)this.mb&&"/"!=t.charAt(0)&&e.push("/"),e.push(ge(t,"/"==t.charAt(0)?we:ve,!0));(t=this.g.toString())&&e.push("?",t);(t=this.Yb)&&e.push("#",ge(t,Se));return e.join("")};n.resolve=function(e){var t=this.clone();"data"===t.eb&&(t=new pe);var r=!!e.eb;r?de(t,e.eb):r=!!e.qc;r?t.qc=e.qc:r=!!e.mb;r?t.mb=e.mb:r=null!=e.Hc;var n=e.La;if(r)he(t,e.Hc);else if(r=!!e.La){if("/"!=n.charAt(0))if(this.mb&&!this.La)n="/"+n;else{var i=t.La.lastIndexOf("/");-1!=i&&(n=t.La.substr(0,i+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){i=0==n.lastIndexOf("/",0);n=n.split("/");for(var o=[],a=0;a<n.length;){var s=n[a++];"."==s?i&&a==n.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==n.length&&o.push("")):(o.push(s),i=!0)}n=o.join("/")}}r?t.La=n:r=""!==e.g.toString();r?me(t,e.g.clone()):r=!!e.Yb;r&&(t.Yb=e.Yb);return t};n.clone=function(){return new pe(this)};function de(e,t,r){e.eb=r?fe(t,!0):t;e.eb&&(e.eb=e.eb.replace(/:$/,""))}function he(e,t){if(t){t=Number(t);if(isNaN(t)||0>t)throw Error("Bad port number "+t);e.Hc=t}else e.Hc=null}function me(e,t,r){t instanceof _e?e.g=t:(r||(t=ge(t,Ee)),e.g=new _e(t))}function fe(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ge(e,t,r){return null!=e?(e=encodeURI(e).replace(t,ye),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ye(e){e=e.charCodeAt(0);return"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var be=/[#\/\?@]/g,ve=/[#\?:]/g,we=/[#\?]/g,Ee=/[#\?@]/g,Se=/#/g;function _e(e){this.g=e||null}function xe(e){if(!e.Ha&&(e.Ha={},e.dd=0,e.g))for(var t=e.g.split("&"),r=0;r<t.length;r++){var n=t[r].indexOf("="),i=null;if(0<=n){var o=t[r].substring(0,n);i=t[r].substring(n+1)}else o=t[r];o=decodeURIComponent(o.replace(/\+/g," "));i=i||"";e.add(o,decodeURIComponent(i.replace(/\+/g," ")))}}n=_e.prototype;n.Ha=null;n.dd=null;n.add=function(e,t){xe(this);this.g=null;var r=this.Ha.hasOwnProperty(e)?this.Ha[e]:null;r||(this.Ha[e]=r=[]);r.push(t);this.dd++;return this};n.set=function(e,t){xe(this);this.g=null;this.Ha.hasOwnProperty(e)?this.Ha[e]=[t]:this.add(e,t);return this};n.toString=function(){if(this.g)return this.g;if(!this.Ha)return"";var e=[],t;for(t in this.Ha)for(var r=encodeURIComponent(t),n=this.Ha[t],i=0;i<n.length;i++){var o=r;""!==n[i]&&(o+="="+encodeURIComponent(n[i]));e.push(o)}return this.g=e.join("&")};n.clone=function(){var e=new _e;e.g=this.g;if(this.Ha){var t={},r;for(r in this.Ha)t[r]=this.Ha[r].concat();e.Ha=t;e.dd=this.dd}return e};function De(e,t,r){var n=M.apply(3,arguments);this.severity=e;this.category=t;this.code=r;this.data=n;this.handled=!1;this.message="Shaka Error "+this.code;if(Ce)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}}De.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};V("shaka.util.Error",De);var Ce=!0;De.Severity={RECOVERABLE:1,CRITICAL:2};De.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};De.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function Te(e,t){return e.concat(t)}function Oe(){}function ke(e){return null!=e}function Pe(e,t){if(0==t.length)return e;if(1==e.length&&1==t.length)return e=new pe(e[0]),t=new pe(t[0]),[e.resolve(t).toString()];var r=t.map((function(e){return new pe(e)}));return e.map((function(e){var t=new pe(e);return r.map((function(e){return t.resolve(e).toString()}))})).reduce(Te,[])}function Ae(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Ie(e,t){if(1==t.length)return t[0];e=je(e,t);if(null!=e)return e;throw new De(2,4,4025,t)}function je(e,t){for(var r=u(Le[e]),n=r.next();!n.done;n=r.next()){n=n.value;for(var i=u(t),o=i.next();!o.done;o=i.next())if(o=o.value,n.test(o.trim()))return o.trim()}return e==Re?"":null}var Re="text",Ne={Na:"video",Ob:"audio",na:Re,Zc:"image",Li:"application"},Le={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function Me(){}function qe(e,t){e=Fe(e);t=Fe(t);return e.split("-")[0]==t.split("-")[0]}function Ue(e,t){e=Fe(e);t=Fe(t);e=e.split("-");t=t.split("-");return e[0]==t[0]&&1==e.length&&2==t.length}function He(e,t){e=Fe(e);t=Fe(t);e=e.split("-");t=t.split("-");return 2==e.length&&2==t.length&&e[0]==t[0]}function Fe(e){var t=e.split("-x-"),r=t[0].split("-");e=r[0]||"";r=r[1]||"";t=t[1]?"x-"+t[1]:"";e=e.toLowerCase();e=Ke.get(e)||e;r=r.toUpperCase();return(r?e+"-"+r:e)+(t?"-"+t:"")}function Be(e,t){var r=Ve(e),n=Ve(t);return e!=r&&t!=n&&r==n}function ze(e,t){e=Fe(e);t=Fe(t);return t==e?4:Ue(t,e)?3:He(t,e)?2:Ue(e,t)?1:0}function Ve(e){var t=e.indexOf("-");e=0<=t?e.substring(0,t):e;e=e.toLowerCase();return e=Ke.get(e)||e}function We(e){return e.language?Fe(e.language):e.audio&&e.audio.language?Fe(e.audio.language):e.video&&e.video.language?Fe(e.video.language):"und"}function Ge(e,t){e=Fe(e);var r=new Set,n=u(t);for(t=n.next();!t.done;t=n.next())r.add(Fe(t.value));n=u(r);for(t=n.next();!t.done;t=n.next())if(t=t.value,t==e)return t;n=u(r);for(t=n.next();!t.done;t=n.next())if(t=t.value,Ue(t,e))return t;n=u(r);for(t=n.next();!t.done;t=n.next())if(t=t.value,He(t,e))return t;r=u(r);for(t=r.next();!t.done;t=r.next())if(t=t.value,Ue(e,t))return t;return null}V("shaka.util.LanguageUtils",Me);Me.findClosestLocale=Ge;Me.getLocaleForVariant=We;Me.getLocaleForText=function(e){return Fe(e.language||"und")};Me.getBase=Ve;Me.relatedness=ze;Me.areSiblings=Be;Me.normalize=Fe;Me.isSiblingOf=He;Me.isParentOf=Ue;Me.areLanguageCompatible=qe;Me.areLocaleCompatible=function(e,t){e=Fe(e);t=Fe(t);return e==t};var Ke=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function $e(e){oe.call(this);this.j=Fe(e);this.i=new Map;this.g=new Set;this.h=new Map}b($e,oe);n=$e.prototype;n.release=function(){oe.prototype.release.call(this)};n.cg=function(e){var t=this;this.g.clear();e=u(e);for(var r=e.next();!r.done;r=e.next())this.g.add(Fe(r.value));Xe(this);e=ce(this.g,(function(e){return!t.h.has(e)}));e.length&&this.dispatchEvent(new G("unknown-locales",(new Map).set("locales",e)));e=ce(this.g,(function(e){return t.h.has(e)}));e=(new Map).set("locales",e.length?e:[this.j]);this.dispatchEvent(new G("locale-changed",e))};n.ka=function(e,t,r){e=Fe(e);void 0===r&&(r=Qe);var n=this.h.get(e)||new Map;t.forEach((function(e,t){n.has(t)&&r!=Qe||n.set(t,e)}));this.h.set(e,n);Xe(this);this.dispatchEvent(new G("locale-updated"));return this};n.si=function(e){for(var t=u(e.keys()),r=t.next();!r.done;r=t.next())r=r.value,e.set(r,this.resolve(r))};n.resolve=function(e){var t=this.i.get(e);if(t)return t;e=(new Map).set("locales",Array.from(this.g)).set("missing",e);this.dispatchEvent(new G("unknown-localization",e));return""};function Xe(e){for(var t=e.h,r=e.j,n=e.g,i=new Set,o={},a=u(n),s=a.next();!s.done;o={uc:o.uc},s=a.next()){o.uc=s.value;i.add(o.uc);i.add(Ve(o.uc));s=ce(t.keys(),function(e){return function(t){return Be(t,e.uc)}}(o));s.sort();var l=u(s);for(s=l.next();!s.done;s=l.next())i.add(s.value);s=ce(t.keys(),function(e){return function(t){return Ve(t)==e.uc}}(o));s.sort();l=u(s);for(s=l.next();!s.done;s=l.next())i.add(s.value)}i.add(r);r=[];i=u(i);for(s=i.next();!s.done;s=i.next())(s=t.get(s.value))&&r.push(s);r.reverse();e.i.clear();t=u(r);for(s=t.next();!s.done;s=t.next())s.value.forEach((function(t,r){e.i.set(r,t)}));t=e.i.keys();i=new Set;r=u(e.g);for(s=r.next();!s.done;s=r.next())s=e.h.get(s.value)||new Map,Ye(s,t,i);0<i.size&&(n=(new Map).set("locales",Array.from(n)).set("missing",Array.from(i)),e.dispatchEvent(new G("missing-localizations",n)))}function Ye(e,t,r){t=u(t);for(var n=t.next();!n.done;n=t.next())n=n.value,e.get(n)||r.add(n)}V("shaka.ui.Localization",$e);$e.prototype.resolve=$e.prototype.resolve;$e.prototype.resolveDictionary=$e.prototype.si;$e.prototype.insert=$e.prototype.ka;$e.prototype.changeLocale=$e.prototype.cg;$e.prototype.release=$e.prototype.release;var Qe=1;$e.ConflictResolution={USE_OLD:0,USE_NEW:Qe};$e.UNKNOWN_LOCALES="unknown-locales";$e.UNKNOWN_LOCALIZATION="unknown-localization";$e.MISSING_LOCALIZATIONS="missing-localizations";$e.LOCALE_CHANGED="locale-changed";$e.LOCALE_UPDATED="locale-updated";var Je={Xj:"UNMUTE",Zi:"EXIT_FULL_SCREEN",Mi:"AUTO_QUALITY",AD_PROGRESS:"AD_PROGRESS",$i:"EXIT_LOOP_MODE",zj:"PLAYBACK_RATE",Si:"CAST",ej:"FULL_SCREEN",Ej:"REWIND",Cj:"REPLAY",dj:"FAST_FORWARD",oj:"MUTE",nj:"MULTIPLE_LANGUAGES",rj:"NOT_APPLICABLE",Dj:"RESOLUTION",hj:"LANGUAGE",Hj:"SKIP_AD",mj:"MORE_SETTINGS",xj:"PICTURE_IN_PICTURE",Xi:"ENTER_PICTURE_IN_PICTURE",tj:"ON",Yj:"UNRECOGNIZED_LANGUAGE",aj:"EXIT_PICTURE_IN_PICTURE",yj:"PLAY",Ii:"AD_DURATION",Kj:"STATISTICS",BACK:"BACK",wj:"PAUSE",bk:"VOLUME",Sg:"LIVE",Ji:"AD_TIME",Gj:"SEEK",Ki:"AIRPLAY",sj:"OFF",Ri:"CAPTIONS",ij:"LOOP",Wj:"UNDETERMINED_LANGUAGE",Wi:"ENTER_LOOP_MODE",Bj:"QUALITY",Tg:"SUBTITLE_FORCED",Ij:"SKIP_TO_LIVE"};function Ze(e){this.g=Math.exp(Math.log(.5)/e);this.i=this.h=0}Ze.prototype.sample=function(e,t){var r=Math.pow(this.g,e);t=t*(1-r)+r*this.h;isNaN(t)||(this.h=t,this.i+=e)};function et(e){return e.h/(1-Math.pow(e.g,e.i))}function tt(){this.h=new Ze(2);this.j=new Ze(5);this.g=0;this.i=128e3;this.l=16e3}tt.prototype.configure=function(e){this.i=e.minTotalBytes;this.l=e.minBytes;this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife);this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)};tt.prototype.sample=function(e,t){if(!(t<this.l)){var r=8e3*t/e;e/=1e3;this.g+=t;this.h.sample(e,r);this.j.sample(e,r)}};tt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(et(this.h),et(this.j))};function rt(e){if(nt.has(e))return nt.get(e);var t=MediaSource.isTypeSupported(e);nt.set(e,t);return t}var nt=new Map;function it(){}it.prototype.extract=function(){};it.prototype.decode=function(){return[]};it.prototype.clear=function(){};function ot(){}ot.prototype.init=function(){};ot.prototype.parse=function(){return[]};function at(){}function st(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(lt(e)==lt(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var r=ut(e);t=ut(t);for(var n=0;n<e.byteLength;n++)if(r[n]!=t[n])return!1;return!0}function lt(e){return e instanceof ArrayBuffer?e:e.buffer}function ct(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ut(e,t,r){r=void 0===r?Infinity:r;return dt(e,void 0===t?0:t,r,Uint8Array)}function pt(e,t,r){r=void 0===r?Infinity:r;return dt(e,void 0===t?0:t,r,DataView)}function dt(e,t,r,n){var i=(e.byteOffset||0)+e.byteLength;t=Math.max(0,Math.min((e.byteOffset||0)+t,i));return new n(lt(e),t,Math.min(t+Math.max(r,0),i)-t)}V("shaka.util.BufferUtils",at);at.toDataView=pt;at.toUint8=ut;at.toArrayBuffer=ct;at.equal=st;function ht(){}ht.prototype.init=function(){};ht.prototype.j=function(){};ht.prototype.i=function(){};V("shaka.media.IClosedCaptionParser",ht);function mt(e){this.h=new ot;if(e=ft[e.toLowerCase()])this.h=e();this.g=new it;if(e=gt)this.g=e()}mt.prototype.init=function(e){this.h.init(e)};mt.prototype.j=function(e){e=this.h.parse(e);e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var r=ut(t.packet);0<r.length&&this.g.extract(r,t.pts)}return this.g.decode()};mt.prototype.i=function(){this.g.clear()};V("shaka.media.ClosedCaptionParser",mt);mt.findDecoder=function(){return gt};mt.unregisterDecoder=function(){gt=null};mt.registerDecoder=function(e){gt=e};mt.findParser=function(e){return ft[e]};mt.unregisterParser=function(e){delete ft[e]};mt.registerParser=function(e,t){ft[e]=t};var ft={},gt=null;function yt(e,t){return"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)?!0:e===t}function bt(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function vt(e,t,r){r||(r=yt);if(e.length!=t.length)return!1;t=t.slice();var n={};e=u(e);for(var i=e.next();!i.done;n={Ee:n.Ee},i=e.next()){n.Ee=i.value;i=t.findIndex(function(e){return function(t){return r(e.Ee,t)}}(n));if(-1==i)return!1;t[i]=t[t.length-1];t.pop()}return 0==t.length}function wt(e,t,r){r||(r=yt);if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function Et(e,t,r){this.startTime=e;this.endTime=t;this.payload=r;this.region=new qt;this.position=null;this.positionAlign=_t;this.size=0;this.textAlign=xt;this.direction=Ot;this.writingMode=kt;this.lineInterpretation=Pt;this.line=null;this.lineHeight="";this.lineAlign=At;this.displayAlign=Ct;this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=Nt;this.fontStyle=Lt;this.linePadding=this.letterSpacing=this.fontFamily="";this.opacity=1;this.textDecoration=[];this.textStrokeWidth=this.textStrokeColor=this.textShadow="";this.wrapLine=!0;this.id="";this.nestedCues=[];this.lineBreak=this.isContainer=!1;this.cellResolution={eh:32,rows:15}}Et.prototype.clone=function(){var e=new Et(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function St(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var r in e)if("startTime"!=r&&"endTime"!=r&&"payload"!=r)if("nestedCues"==r){if(!wt(e.nestedCues,t.nestedCues,St))return!1}else if("region"==r||"cellResolution"==r)for(var n in e[r]){if(e[r][n]!=t[r][n])return!1}else if(Array.isArray(e[r])){if(!wt(e[r],t[r]))return!1}else if(e[r]!=t[r])return!1;return!0}V("shaka.text.Cue",Et);Et.equal=St;Et.prototype.clone=Et.prototype.clone;var _t="auto";Et.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:_t};var xt="center",Dt={LEFT:"left",RIGHT:"right",CENTER:xt,START:"start",END:"end"};Et.textAlign=Dt;var Ct="after",Tt={BEFORE:"before",CENTER:"center",AFTER:Ct};Et.displayAlign=Tt;var Ot="ltr";Et.direction={HORIZONTAL_LEFT_TO_RIGHT:Ot,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var kt="horizontal-tb";Et.writingMode={HORIZONTAL_TOP_TO_BOTTOM:kt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Pt=0;Et.lineInterpretation={LINE_NUMBER:Pt,PERCENTAGE:1};var At="start",It={CENTER:"center",START:At,END:"end"};Et.lineAlign=It;var jt={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};Et.defaultTextColor=jt;var Rt={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};Et.defaultTextBackgroundColor=Rt;var Nt=400;Et.fontWeight={NORMAL:Nt,BOLD:700};var Lt="normal",Mt={NORMAL:Lt,ITALIC:"italic",OBLIQUE:"oblique"};Et.fontStyle=Mt;Et.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function qt(){this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ut;this.scroll=Ht}V("shaka.text.CueRegion",qt);var Ut=1;qt.units={PX:0,PERCENTAGE:Ut,LINES:2};var Ht="";qt.scrollMode={NONE:Ht,UP:"up"};function Ft(){}Ft.prototype.destroy=function(){};function Bt(e,t,r){Vt[e.toLowerCase().split(";")[0]+"-"+r]={priority:r,pe:t}}function zt(e,t){for(var r=e.toLowerCase().split(";")[0],n=u([$t,Kt,Gt,Wt]),i=n.next();!i.done;i=n.next())if(i=Vt[r+"-"+i.value]){var o=i.pe(),a=o.isSupported(e,t);o.destroy();if(a)return i.pe}return null}V("shaka.transmuxer.TransmuxerEngine",Ft);Ft.findTransmuxer=zt;Ft.unregisterTransmuxer=function(e,t){delete Vt[e.toLowerCase().split(";")[0]+"-"+t]};Ft.registerTransmuxer=Bt;Ft.prototype.destroy=Ft.prototype.destroy;var Vt={},Wt=1,Gt=2,Kt=3,$t=4;Ft.PluginPriority={FALLBACK:Wt,PREFERRED_SECONDARY:Gt,PREFERRED:Kt,APPLICATION:$t};function Xt(){}function Yt(e,t){var r=e;t&&!rr.includes(e)&&(r+='; codecs="'+t+'"');return r}function Qt(e,t){t&&(e+='; codecs="'+t+'"');return e}function Jt(e,t,r){var n=Yt(e,t);t=Qt(e,t);zt(t)?(e=zt(t))?(e=e(),r=e.convertCodecs(r,t),e.destroy()):r=t:r="video/mp2t"!=e&&"audio"==r?n.replace("video","audio"):n;return r}function Zt(e){var t=tr(e);e=t[0];t=t[1].toLowerCase();switch(!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function er(e){e=e.split(/ *; */);e.shift();return(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function tr(e){e=e.split(".");var t=e[0];e.shift();return[t,e.join(".")]}V("shaka.util.MimeUtils",Xt);Xt.getFullTypeWithAllCodecs=Qt;Xt.getFullType=Yt;(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var rr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function nr(e){this.i=null;this.j=e;this.C=!1;this.l=this.B=0;this.m=Infinity;this.h=this.g=null;this.F="";this.s=new Map}function ir(e){return ur[e]?!0:"application/cea-608"==e||"application/cea-708"==e?!!gt:!1}nr.prototype.destroy=function(){this.j=this.i=null;this.s.clear();return Promise.resolve()};function or(e,t,r,n){var i,o,a,s;return L((function(l){if(1==l.g)return S(l,Promise.resolve(),2);if(!e.i||!e.j)return l.return();if(null==r||null==n)return e.i.parseInit(ut(t)),l.return();i=e.C?r:e.B;o={periodStart:e.B,segmentStart:r,segmentEnd:n,vttOffset:i};a=e.i.parseMedia(ut(t),o);s=a.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m}));e.j.append(s);null==e.g&&(e.g=Math.max(r,e.l));e.h=Math.min(n,e.m);_(l)}))}nr.prototype.remove=function(e,t){var r=this;return L((function(n){if(1==n.g)return S(n,Promise.resolve(),2);!r.j||!r.j.remove(e,t)||null==r.g||t<=r.g||e>=r.h||(e<=r.g&&t>=r.h?r.g=r.h=null:e<=r.g&&t<r.h?r.g=t:e>r.g&&t>=r.h&&(r.h=e));_(n)}))};function ar(e,t,r){e.l=t;e.m=r}function sr(e,t,r){e.F=t;if(t=e.s.get(t))for(var n=u(t.keys()),i=n.next();!i.done;i=n.next())(i=t.get(i.value).filter((function(e){return e.endTime<=r})))&&e.j.append(i)}function lr(e,t,r){t.startTime+=r;t.endTime+=r;t=u(t.nestedCues);for(var n=t.next();!n.done;n=t.next())lr(e,n.value,r)}function cr(e,t,r,n,i){var o=r+" "+n,a=new Map;t=u(t);for(var s=t.next();!s.done;s=t.next()){var l=s.value;s=l.stream;l=l.cue;a.has(s)||a.set(s,new Map);a.get(s).has(o)||a.get(s).set(o,[]);lr(e,l,i);l.startTime>=e.l&&l.startTime<e.m&&(a.get(s).get(o).push(l),s==e.F&&e.j.append([l]))}i=u(a.keys());for(o=i.next();!o.done;o=i.next())for(o=o.value,e.s.has(o)||e.s.set(o,new Map),t=u(a.get(o).keys()),s=t.next();!s.done;s=t.next())s=s.value,l=a.get(o).get(s),e.s.get(o).set(s,l);e.g=null==e.g?Math.max(r,e.l):Math.min(e.g,Math.max(r,e.l));e.h=Math.max(e.h,Math.min(n,e.m))}V("shaka.text.TextEngine",nr);nr.prototype.destroy=nr.prototype.destroy;nr.findParser=function(e){return ur[e]};nr.unregisterParser=function(e){delete ur[e]};nr.registerParser=function(e,t){ur[e]=t};var ur={};function pr(e){this.h=e;this.g=null}pr.prototype.R=function(t){var r=this;this.stop();var n=!0,i=null;this.g=function(){e.clearTimeout(i);n=!1};i=e.setTimeout((function(){n&&r.h()}),1e3*t);return this};pr.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function dr(e){this.h=e;this.g=null}dr.prototype.Ca=function(){this.stop();this.h();return this};dr.prototype.R=function(e){var t=this;this.stop();this.g=new pr((function(){t.h()})).R(e);return this};dr.prototype.ha=function(e){var t=this;this.stop();this.g=new pr((function(){t.g.R(e);t.h()})).R(e);return this};dr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)};V("shaka.util.Timer",dr);dr.prototype.stop=dr.prototype.stop;dr.prototype.tickEvery=dr.prototype.ha;dr.prototype.tickAfter=dr.prototype.R;dr.prototype.tickNow=dr.prototype.Ca;function hr(){return e.MediaSource&&MediaSource.isTypeSupported?!0:!1}function mr(e){return""!=_r().canPlayType(e)}function fr(){return navigator.userAgent.match(/Edge?\//)?!0:!1}function gr(){return Sr("Xbox One")}function yr(){return Sr("Tizen")}function br(){return Sr("Web0S")&&Sr("Chrome/38.0.2125.122 Safari/537.36")}function vr(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!yr()&&!Sr("PC=EOS")&&!Sr("VirginMedia")&&!Sr("SOPOpenBrowser")&&!wr()&&!Sr("AFT")}function wr(){return Sr("PlayStation 4")}function Er(){if(!vr())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Sr(e){return(navigator.userAgent||"").includes(e)}function _r(){if(Dr)return Dr;xr||(xr=new dr((function(){Dr=null})));(Dr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Dr=document.createElement("video"));xr.R(1);return Dr}var xr=null,Dr=null;function Cr(){}function Tr(e,t,r,n,i){var o=e.variants;if(t.length||r.length)o=Pr(o,t,r);o=an(o,n);t=Or(o);t=kr(t);var a=Ar(t,i);e.variants=e.variants.filter((function(e){return Rr(e)==a?!0:!1}))}function Or(e){var t=new ie;e=u(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=Rr(r);t.push(n,r)}return t}function kr(e){var t=0,r=new Map,n=e.size();e.forEach((function(e,i){i=u(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;var a=o.video;if(a&&a.width&&a.height){a=a.width*a.height*(a.frameRate||1);r.has(a)||r.set(a,new ie);var s=r.get(a);s.push(e,o);s.size()===n&&(t=Math.max(t,a))}}}));return t?r.get(t):e}function Pr(e,t,r){var n={};t=u(t);for(var i=t.next();!i.done;n={Ke:n.Ke},i=t.next())if(n.Ke=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Ke)}}(n)),i.length){e=i;break}n={};r=u(r);for(t=r.next();!t.done;n={Ce:n.Ce},t=r.next())if(n.Ce=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.Ce)}}(n)),t.length){e=t;break}return e}function Ar(e,t){t=u(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r==hn||r==mn){if(e=Ir(e,r),1==e.size())return e.keys()[0]}else if(r==fn)break;return jr(e)}function Ir(e,t){var r=0,n=new ie;e.forEach((function(e,i){for(var o=0,a=0,s=u(i),l=s.next();!l.done;l=s.next())l=l.value,l.decodingInfos.length&&(o+=l.decodingInfos[0][t]?1:0,a++);o/=a;o>r?(n.g={},n.push(e,i),r=o):o==r&&n.push(e,i)}));return n}function jr(e){var t="",r=Infinity;e.forEach((function(e,n){var i=0,o=0;n=u(n);for(var a=n.next();!a.done;a=n.next())i+=a.value.bandwidth||0,++o;i/=o;i<r&&(t=e,r=i)}));return t}function Rr(e){var t="";e.video&&(t=Zt(e.video.codecs));var r="";e.audio&&(r=Zt(e.audio.codecs));return t+"-"+r}function Nr(e,t,r){e.variants=e.variants.filter((function(e){return Lr(e,t,r)}))}function Lr(e,t,r){function n(e,t,r){return e>=t&&e<=r}var i=e.video;return i&&i.width&&i.height&&(!n(i.width,t.minWidth,Math.min(t.maxWidth,r.width))||!n(i.height,t.minHeight,Math.min(t.maxHeight,r.height))||!n(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!n(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!n(e.bandwidth,t.minBandwidth,t.maxBandwidth)?!1:!0}function Mr(e,t){return L((function(r){if(1==r.g)return S(r,qr(t,0<t.offlineSessionIds.length),2);Wr(e,t);Gr(t);return S(r,Kr(t),0)}))}function qr(e,t){return L((function(r){if(1==r.g)return S(r,Fr(e.variants,t,!1,[]),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var r=Vr(t.codecs);if(t.codecs.includes(",")){var n=t.codecs.split(",");r=Ie("video",n);r=Vr(r);n=Ie("audio",n);n=zr(n);var i=Jt(t.mimeType,n,"audio");if(!rt(i))return!1;r=[r,n].join()}n=Jt(t.mimeType,r,"video");if(!rt(n))return!1;t.codecs=r}if(r=e.audio){n=zr(r.codecs);i=Jt(r.mimeType,n,"audio");if(!rt(i))return!1;r.codecs=n}if(gr()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3.")))return ee(cn(e)),!1;(t=e.decodingInfos.some((function(e){return e.supported})))||ee(cn(e));return t}));_(r)}))}function Ur(e){var t=[];for(r in e)t.push(r);t.sort();var r=[];t=u(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value;n=JSON.stringify(i);i=e[i];i instanceof Object?(i=Ur(i),r.push(n+":"+i)):(i=JSON.stringify(i),r.push(n+":"+i))}return"{"+r.join(",")+"}"}function Hr(e,t){var r,n,i;return L((function(o){switch(o.g){case 1:r=Ur(t);x(o,2);n=pn;if(n[r]){e.decodingInfos.push(n[r]);o.D(4);break}return S(o,navigator.mediaCapabilities.decodingInfo(t),5);case 5:i=o.h,n[r]=i,e.decodingInfos.push(i);case 4:C(o,0);break;case 2:T(o),JSON.stringify(t),_(o)}}))}function Fr(e,t,r,n){var i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E;return L((function(_){switch(_.g){case 1:if(i=e.some((function(e){return e.decodingInfos.length})))return _.return();o={};a=u(n);s=a.next();case 2:if(s.done){_.D(4);break}o.Ge=s.value;l=!1;c=u(e);p=c.next();case 5:if(p.done){_.D(7);break}d=p.value;h=Br(d,t,r).filter(function(e){return function(t){return(t.keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.Ge}}(o));m=u(h);f=m.next();case 8:if(f.done){_.D(10);break}g=f.value;return S(_,Hr(d,g),9);case 9:f=m.next();_.D(8);break;case 10:d.decodingInfos.length&&(l=!0);p=c.next();_.D(5);break;case 7:if(l)return _.return();o={Ge:o.Ge};s=a.next();_.D(2);break;case 4:y=u(e),p=y.next();case 12:if(p.done){_.D(0);break}b=p.value;v=Br(b,t,r).filter((function(e){e=e.keySystemConfiguration&&e.keySystemConfiguration.keySystem;return!e||!n.includes(e)}));w=u(v);f=w.next();case 15:if(f.done){p=y.next();_.D(12);break}E=f.value;return S(_,Hr(b,E),16);case 16:f=w.next(),_.D(15)}}))}function Br(e,t,r){var n=e.audio,i=e.video;r={type:r?"file":"media-source"};if(i){var o=i.codecs;if(i.codecs.includes(",")){var a=i.codecs.split(",");o=Ie("video",a);o=Vr(o);a=Ie("audio",a);a=zr(a);a=Jt(i.mimeType,a,"audio");r.audio={contentType:a,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}o=Vr(o);o=Jt(i.mimeType,o,"video");r.video={contentType:o,width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||1};if(i.hdr)switch(i.hdr){case"SDR":r.video.transferFunction="srgb";break;case"PQ":r.video.transferFunction="pq";break;case"HLG":r.video.transferFunction="hlg"}}n&&(o=zr(n.codecs),o=Jt(n.mimeType,o,"audio"),r.audio={contentType:o,channels:n.channelsCount||2,bitrate:n.bandwidth||e.bandwidth||1,samplerate:n.audioSamplingRate||1,spatialRendering:n.spatialAudio});a=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]);if(!a.length)return[r];e=[];o=new Map;a=u(a);for(var s=a.next();!s.done;s=a.next()){var l=s.value;o.get(l.keySystem)||o.set(l.keySystem,[]);o.get(l.keySystem).push(l)}a=t?"required":"optional";t=t?["persistent-license"]:["temporary"];l=u(o.keys());for(var c=l.next();!c.done;c=l.next()){var p=c.value;c=Object.assign({},r);var d=o.get(p);p={keySystem:p,initDataType:"cenc",persistentState:a,distinctiveIdentifier:"optional",sessionTypes:t};d=u(d);for(s=d.next();!s.done;s=d.next()){s=s.value;if(s.initData&&s.initData.length){for(var h=new Set,m=u(s.initData),f=m.next();!f.done;f=m.next())h.add(f.value.initDataType);p.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(p.distinctiveIdentifier="required");s.persistentStateRequired&&(p.persistentState="required");s.sessionType&&(p.sessionTypes=[s.sessionType]);n&&(""!=s.audioRobustness?p.audio?p.audio.robustness=p.audio.robustness||s.audioRobustness:p.audio={robustness:s.audioRobustness}:p.audio||(p.audio={}));i&&(""!=s.videoRobustness?p.video?p.video.robustness=p.video.robustness||s.videoRobustness:p.video={robustness:s.videoRobustness}:p.video||(p.video={}))}c.keySystemConfiguration=p;e.push(c)}return e}function zr(e){return"fLaC"===e?"flac":"Opus"===e?"opus":yr()?"ac-3"==e.toLowerCase()?"ec-3":e:e}function Vr(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function Wr(e,t){t.variants=t.variants.filter((function(t){var r=t.audio;t=t.video;return r&&e&&e.audio&&!Xr(r,e.audio)||t&&e&&e.video&&!Xr(t,e.video)?!1:!0}))}function Gr(e){e.textStreams=e.textStreams.filter((function(e){e=Yt(e.mimeType,e.codecs);return ir(e)}))}function Kr(e){var t,r,n,i,o,a,s,l;return L((function(c){switch(c.g){case 1:t=[],r=u(e.imageStreams),n=r.next();case 2:if(n.done){c.D(4);break}i=n.value;o=i.mimeType;if(gn.has(o)){c.D(5);break}a=yn.get(o);if(!a){gn.set(o,!1);c.D(5);break}return S(c,$r(a),7);case 7:s=c.h,gn.set(o,s);case 5:(l=gn.get(o))&&t.push(i);n=r.next();c.D(2);break;case 4:e.imageStreams=t,_(c)}}))}function $r(e){return new Promise((function(t){var r=new Image;r.src=e;"decode"in r?r.decode().then((function(){t(!0)})).catch((function(){t(!1)})):r.onload=r.onerror=function(){t(2===r.height)}}))}function Xr(e,t){return e.mimeType!=t.mimeType||e.codecs.split(".")[0]!=t.codecs.split(".")[0]?!1:!0}function Yr(e){var t=e.audio,r=e.video,n=t?t.mimeType:null,i=r?r.mimeType:null,o=t?t.codecs:null,a=r?r.codecs:null,s=[];a&&s.push(a);o&&s.push(o);var l=[];r&&l.push(r.mimeType);t&&l.push(t.mimeType);l=l[0]||null;var c=[];t&&c.push(t.kind);r&&c.push(r.kind);c=c[0]||null;var p=new Set;if(t)for(var d=u(t.roles),h=d.next();!h.done;h=d.next())p.add(h.value);if(r)for(d=u(r.roles),h=d.next();!h.done;h=d.next())p.add(h.value);e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:l,audioMimeType:n,videoMimeType:i,codecs:s.join(", "),audioCodec:o,videoCodec:a,primary:e.primary,roles:Array.from(p),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null};r&&(e.videoId=r.id,e.originalVideoId=r.originalId,e.width=r.width||null,e.height=r.height||null,e.frameRate=r.frameRate||null,e.pixelAspectRatio=r.pixelAspectRatio||null,e.videoBandwidth=r.bandwidth||null,e.hdr=r.hdr||null);t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage);return e}function Qr(e){return{id:e.id,active:!1,type:Re,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Jr(e){var t=e.width||null,r=e.height||null,n=null;e.segmentIndex&&(n=e.segmentIndex.get(0));var i=e.tilesLayout;n&&(i=n.tilesLayout||i);i&&null!=t&&(t/=Number(i.split("x")[0]));i&&null!=r&&(r/=Number(i.split("x")[1]));return{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:r,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:i||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Zr(e){e.__shaka_id||(e.__shaka_id=dn++);return e.__shaka_id}function en(e){var t=rn(e);t.active="disabled"!=e.mode;t.type="text";t.originalTextId=e.id;"captions"==e.kind&&(t.mimeType="application/cea-608");"subtitles"==e.kind&&(t.mimeType="text/vtt");e.kind&&(t.roles=[e.kind]);"forced"==e.kind&&(t.forced=!0);return t}function tn(e){var t=rn(e);t.active=e.enabled;t.type="variant";t.originalAudioId=e.id;"main"==e.kind&&(t.primary=!0);e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label);return t}function rn(e){var t=e.language;return{id:Zr(e),active:!1,type:"",bandwidth:0,language:Fe(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function nn(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function on(e){return e.filter((function(e){return nn(e)}))}function an(e,t){var r=e.filter((function(e){return e.audio&&e.audio.channelsCount})),n=new Map;r=u(r);for(var i=r.next();!i.done;i=r.next()){i=i.value;var o=i.audio.channelsCount;n.has(o)||n.set(o,[]);n.get(o).push(i)}r=Array.from(n.keys());if(0==r.length)return e;e=r.filter((function(e){return e<=t}));return e.length?n.get(Math.max.apply(Math,p(e))):n.get(Math.min.apply(Math,p(r)))}function sn(e,t,r,n){var i=e,o=e.filter((function(e){return e.primary}));o.length&&(i=o);var a=i.length?i[0].language:"";i=i.filter((function(e){return e.language==a}));if(t){var s=Ge(Fe(t),e.map((function(e){return e.language})));s&&(i=e.filter((function(e){return Fe(e.language)==s})))}i=i.filter((function(e){return e.forced==n}));if(r){if(e=ln(i,r),e.length)return e}else if(e=i.filter((function(e){return 0==e.roles.length})),e.length)return e;e=i.map((function(e){return e.roles})).reduce(Te,[]);return e.length?ln(i,e[0]):i}function ln(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function cn(e){var t=[];e.audio&&t.push(un(e.audio));e.video&&t.push(un(e.video));return t.join(", ")}function un(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}V("shaka.util.StreamUtils",Cr);Cr.meetsRestrictions=Lr;var pn={},dn=0,hn="smooth",mn="powerEfficient",fn="bandwidth",gn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),yn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function bn(){var e=this;this.m=null;this.l=!1;this.i=new tt;this.C=null;navigator.connection&&navigator.connection.addEventListener&&(this.C=function(){if(e.l&&e.g.useNetworkInformation){e.i=new tt;e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.C));this.s=[];this.F=1;this.H=!1;this.h=this.j=this.g=this.B=null;this.G=new dr((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.m(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}))}n=bn.prototype;n.stop=function(){this.m=null;this.l=!1;this.s=[];this.F=1;this.j=this.B=null;this.h&&(this.h.disconnect(),this.h=null);this.G.stop()};n.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.C),this.C=null);this.G=null};n.init=function(e){this.m=e};n.chooseVariant=function(){var t=Infinity,r=Infinity;this.g.restrictToScreenSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*r,r*=e.screen.width);this.h&&this.g.restrictToElementSize&&(r=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientHeight*r,r*=this.j.clientWidth);t=wn(this.g.restrictions,this.s,t,r);r=this.i.getBandwidthEstimate(vn(this));this.s.length&&!t.length&&(t=wn(null,this.s,Infinity,Infinity),t=[t[0]]);for(var n=t[0]||null,i=0;i<t.length;i++){for(var o=t[i],a=isNaN(this.F)?1:Math.abs(this.F),s=a*o.bandwidth/this.g.bandwidthDowngradeTarget,l={bandwidth:Infinity},c=i+1;c<t.length;c++)if(o.bandwidth!=t[c].bandwidth){l=t[c];break}a=a*l.bandwidth/this.g.bandwidthUpgradeTarget;r>=s&&r<=a&&n.bandwidth!=o.bandwidth&&(n=o)}this.B=Date.now();return n};n.enable=function(){this.l=!0};n.disable=function(){this.l=!1};n.segmentDownloaded=function(e,t){this.i.sample(e,t);if(null!=this.B&&this.l)e:{if(!this.H){e=this.i;if(!(e.g>=e.i))break e;this.H=!0}else if(Date.now()-this.B<1e3*this.g.switchInterval)break e;e=this.chooseVariant();this.i.getBandwidthEstimate(vn(this));e&&this.m(e,this.g.clearBufferSwitch,this.g.safeMarginSwitch)}};n.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(vn(this))};n.setVariants=function(e){this.s=e};n.playbackRateChanged=function(e){this.F=e};n.setMediaElement=function(t){var r=this;this.j=t;this.h&&(this.h.disconnect(),this.h=null);this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){r.G.R(En)})),this.h.observe(this.j))};n.configure=function(e){this.g=e;this.i&&this.g&&this.i.configure(this.g.advanced)};function vn(e){var t=e.g.defaultBandwidthEstimate;navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink);return t}function wn(e,t,r,n){e&&(t=t.filter((function(t){return Lr(t,e,{width:n,height:r})})));return t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}V("shaka.abr.SimpleAbrManager",bn);bn.prototype.configure=bn.prototype.configure;bn.prototype.setMediaElement=bn.prototype.setMediaElement;bn.prototype.playbackRateChanged=bn.prototype.playbackRateChanged;bn.prototype.setVariants=bn.prototype.setVariants;bn.prototype.getBandwidthEstimate=bn.prototype.getBandwidthEstimate;bn.prototype.segmentDownloaded=bn.prototype.segmentDownloaded;bn.prototype.disable=bn.prototype.disable;bn.prototype.enable=bn.prototype.enable;bn.prototype.chooseVariant=bn.prototype.chooseVariant;bn.prototype.init=bn.prototype.init;bn.prototype.release=bn.prototype.release;bn.prototype.stop=bn.prototype.stop;var En=1;function Sn(e,t){this.g=e;this.h=t}Sn.prototype.toString=function(){return"v"+this.g+"."+this.h};function _n(e,t){var r=new Sn(5,0),n=Cn,i=n.g,o=r.h-i.h;(0<(r.g-i.g||o)?n.i:n.h)(n.g,r,e,t)}function xn(e,t,r,n){Q([r,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",n].join(" "))}function Dn(e,t,r,n){Y([r,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",n].join(""))}var Cn=null;V("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function Tn(e,t){this.h=e;this.g=new Set([e]);t=t||[];e=u(t);for(t=e.next();!t.done;t=e.next())this.add(t.value)}Tn.prototype.add=function(e){return On(this.h,e)?(this.g.add(e),!0):!1};function On(e,t){var r;if(!(r=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(r=e.audio&&t.audio)){r=e.audio;var n=t.audio;r=!((!(!r.channelsCount||!n.channelsCount||2<r.channelsCount||2<n.channelsCount)||r.channelsCount==n.channelsCount)&&kn(r,n)&&Pn(r.roles,n.roles))}!r&&(r=e.video&&t.video)&&(e=e.video,t=t.video,r=!(kn(e,t)&&Pn(e.roles,t.roles)));return r?!1:!0}Tn.prototype.values=function(){return this.g.values()};function kn(e,t){if(e.mimeType!=t.mimeType)return!1;e=e.codecs.split(",").map((function(e){return tr(e)[0]}));t=t.codecs.split(",").map((function(e){return tr(e)[0]}));if(e.length!=t.length)return!1;e.sort();t.sort();for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0}function Pn(e,t){e=new Set(e);t=new Set(t);e.delete("main");t.delete("main");if(e.size!=t.size)return!1;e=u(e);for(var r=e.next();!r.done;r=e.next())if(!t.has(r.value))return!1;return!0}function An(e){this.g=e;this.h=new In(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"","")}An.prototype.create=function(e){var t=this,r=e.filter((function(e){return On(t.g,e)}));return r.length?new Tn(r[0],r):this.h.create(e)};function In(e,t,r,n,i){this.j=e;this.l=t;this.g=r;this.h=n;this.i=void 0===i?"":i}In.prototype.create=function(e){var t=[];t=jn(e,this.j);var r=e.filter((function(e){return e.primary}));t=t.length?t:r.length?r:e;e=Rn(t,this.l);e.length&&(t=e);this.h&&(e=Ln(t,this.h),e.length&&(t=e));this.g&&(e=an(t,this.g),e.length&&(t=e));this.i&&(e=Nn(t,this.i),e.length&&(t=e));e=new Tn(t[0]);t=u(t);for(r=t.next();!r.done;r=t.next())r=r.value,On(e.h,r)&&e.add(r);return e};function jn(e,t){t=Fe(t);var r=Ge(t,e.map((function(e){return We(e)})));return r?e.filter((function(e){return r==We(e)})):[]}function Rn(e,t){return e.filter((function(e){return e.audio?t?e.audio.roles.includes(t):0==e.audio.roles.length:!1}))}function Nn(e,t){return e.filter((function(e){return e.audio&&e.audio.label?e.audio.label.toLowerCase()==t.toLowerCase():!1}))}function Ln(t,r){"AUTO"==r&&(r=e.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");return t.filter((function(e){return e.video&&e.video.hdr&&e.video.hdr!=r?!1:!0}))}function Mn(){this.g=Hn;this.h=(new Map).set(Hn,2).set(Un,1)}function qn(e,t,r){e.h.set(Hn,r).set(Un,t)}var Un=0,Hn=1;function Fn(e,t){var r=zn();this.l=null==e.maxAttempts?r.maxAttempts:e.maxAttempts;this.j=null==e.baseDelay?r.baseDelay:e.baseDelay;this.s=null==e.fuzzFactor?r.fuzzFactor:e.fuzzFactor;this.m=null==e.backoffFactor?r.backoffFactor:e.backoffFactor;this.g=0;this.h=this.j;if(this.i=void 0===t?!1:t)this.g=1}function Bn(e){var t,r;return L((function(n){if(1==n.g){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new De(2,7,1010);t=e.g;e.g++;if(0==t)return n.return();r=e.h*(1+(2*Math.random()-1)*e.s);return S(n,new Promise((function(e){new dr(e).R(r/1e3)})),2)}e.h*=e.m;_(n)}))}function zn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Vn(){var e,t,r=new Promise((function(r,n){e=r;t=n}));r.resolve=e;r.reject=t;return r}Vn.prototype.resolve=function(){};Vn.prototype.reject=function(){};function Wn(e,t){this.promise=e;this.i=t;this.g=!1}function Gn(e){return new Wn(Promise.reject(e),(function(){return Promise.resolve()}))}function Kn(){var e=Promise.reject(new De(2,7,7001));e.catch((function(){}));return new Wn(e,(function(){return Promise.resolve()}))}function $n(e){return new Wn(Promise.resolve(e),(function(){return Promise.resolve()}))}function Xn(e){return new Wn(e,(function(){return e.catch((function(){}))}))}Wn.prototype.abort=function(){this.g=!0;return this.i()};function Yn(e){return new Wn(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}Wn.prototype.finally=function(e){this.promise.then((function(){return e(!0)}),(function(){return e(!1)}));return this};Wn.prototype.qa=function(e,t){function r(r){return function(s){if(i.g&&r)o.reject(a);else{var l=r?e:t;l?n=Qn(l,s,o):(r?o.resolve:o.reject)(s)}}}function n(){o.reject(a);return i.abort()}var i=this,o=new Vn,a=new De(2,7,7001);this.promise.then(r(!0),r(!1));return new Wn(o,(function(){return n()}))};function Qn(e,t,r){try{var n=e(t);if(n&&n.promise&&n.abort)return r.resolve(n.promise),function(){return n.abort()};r.resolve(n);return function(){return Promise.resolve(n).then((function(){}),(function(){}))}}catch(e){return r.reject(e),function(){return Promise.resolve()}}}V("shaka.util.AbortableOperation",Wn);Wn.prototype.chain=Wn.prototype.qa;Wn.prototype["finally"]=Wn.prototype.finally;Wn.all=Yn;Wn.prototype.abort=Wn.prototype.abort;Wn.notAbortable=Xn;Wn.completed=$n;Wn.aborted=Kn;Wn.failed=Gn;function Jn(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(r.has(e))return null;var n=e.constructor==Array;if(e.constructor!=Object&&!n)return null;r.add(e);var i=n?[]:{},o;for(o in e)i[o]=t(e[o]);n&&(i.length=e.length);return i}}var r=new Set;return t(e)}function Zn(e){var t={},r;for(r in e)t[r]=e[r];return t}function ei(){this.g=[]}function ti(e,t){e.g.push(t.finally((function(){bt(e.g,t)})))}ei.prototype.destroy=function(){for(var e=[],t=u(this.g),r=t.next();!r.done;r=t.next())r=r.value,r.promise.catch((function(){})),e.push(r.abort());this.g=[];return Promise.all(e)};function ri(e,t,r,n){oe.call(this);this.i=!1;this.m=new ei;this.g=new Set;this.h=new Set;this.l=e||null;this.j=t||null;this.B=r||null;this.C=n||null;this.s=!1}b(ri,oe);n=ri.prototype;n.Bf=function(e){this.s=e};function ni(e,t,r,n){r=r||pi;var i=di[e];if(!i||r>=i.priority)di[e]={priority:r,pe:t,ji:void 0===n?!1:n}}n.ki=function(e){this.g.add(e)};n.Ei=function(e){this.g.delete(e)};n.ah=function(){this.g.clear()};n.li=function(e){this.h.add(e)};n.Fi=function(e){this.h.delete(e)};n.bh=function(){this.h.clear()};function ii(e,t,r){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===r?null:r}}n.destroy=function(){this.i=!0;this.g.clear();this.h.clear();oe.prototype.release.call(this);return this.m.destroy()};n.request=function(e,t,r){var n=this,i=new li;if(this.i){var o=Promise.reject(new De(2,7,7001));o.catch((function(){}));return new ci(o,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET";t.headers=t.headers||{};t.retryParameters=t.retryParameters?Jn(t.retryParameters):zn();t.uris=Jn(t.uris);o=oi(this,e,t,r);var a=o.qa((function(){return ai(n,e,t,new Fn(t.retryParameters,!1),0,null,i)})),s=a.qa((function(t){return si(n,e,t,r)})),l=Date.now(),c=0;o.promise.then((function(){c=Date.now()-l}),(function(){}));var u=0;a.promise.then((function(){u=Date.now()}),(function(){}));var p=s.qa((function(r){var i=Date.now()-u,o=r.response;o.timeMs+=c;o.timeMs+=i;r.Sh||!n.l||o.fromCache||"HEAD"==t.method||e!=ui||n.l(o.timeMs,o.data.byteLength);return o}),(function(e){e&&(e.severity=2);throw e}));o=new ci(p.promise,(function(){return p.abort()}),i);ti(this.m,o);return o};function oi(e,t,r,n){function i(e){o=o.qa((function(){r.body&&(r.body=ct(r.body));return e(t,r,n)}))}var o=$n(void 0);e.C&&i(e.C);e=u(e.g);for(var a=e.next();!a.done;a=e.next())i(a.value);return o.qa(void 0,(function(e){if(e instanceof De&&7001==e.code)throw e;throw new De(2,1,1006,e)}))}function ai(e,t,r,n,i,o,a){e.s&&(r.uris[i]=r.uris[i].replace("http://","https://"));var s=new pe(r.uris[i]),l=s.eb,c=!1;l||(l=location.protocol,l=l.slice(0,-1),de(s,l),r.uris[i]=s.toString());l=l.toLowerCase();var u=(l=di[l])?l.pe:null;if(!u)return Gn(new De(2,1,1e3,s));var p=l.ji,d=null,h=null,m=!1,f=!1,g;return Xn(Bn(n)).qa((function(){if(e.i)return Kn();g=Date.now();var n=u(r.uris[i],r,t,(function(r,n,i){d&&d.stop();h&&h.R(s/1e3);e.l&&t==ui&&(e.l(r,n),c=!0,a.g=i)}),(function(n){e.j&&e.j(n,r,t);f=!0}));if(!p)return n;var o=r.retryParameters.connectionTimeout;o&&(d=new dr((function(){m=!0;n.abort()})),d.R(o/1e3));var s=r.retryParameters.stallTimeout;s&&(h=new dr((function(){m=!0;n.abort()})));return n})).qa((function(n){d&&d.stop();h&&h.stop();void 0==n.timeMs&&(n.timeMs=Date.now()-g);var i={response:n,Sh:c};!f&&e.j&&e.j(n.headers,r,t);return i}),(function(s){d&&d.stop();h&&h.stop();if(e.B){var l=null,c=0;s instanceof De&&(l=s,1001==s.code&&(c=s.data[1]));e.B(r,l,c,m)}if(e.i)return Kn();m&&(s=new De(1,1,1003,r.uris[i],t));if(s instanceof De){if(7001==s.code)throw s;if(1010==s.code)throw o;if(1==s.severity)return l=(new Map).set("error",s),l=new G("retry",l),e.dispatchEvent(l),i=(i+1)%r.uris.length,ai(e,t,r,n,i,s,a)}throw s}))}function si(e,t,r,n){var i=$n(void 0),o={};e=u(e.h);for(var a=e.next();!a.done;o={Ie:o.Ie},a=e.next())o.Ie=a.value,i=i.qa(function(e){return function(){var i=r.response;i.data&&(i.data=ct(i.data));return e.Ie(t,i,n)}}(o));return i.qa((function(){return r}),(function(e){var t=2;if(e instanceof De){if(7001==e.code)throw e;t=e.severity}throw new De(t,1,1007,e)}))}V("shaka.net.NetworkingEngine",ri);ri.prototype.request=ri.prototype.request;ri.prototype.destroy=ri.prototype.destroy;ri.makeRequest=ii;ri.defaultRetryParameters=function(){return zn()};ri.prototype.clearAllResponseFilters=ri.prototype.bh;ri.prototype.unregisterResponseFilter=ri.prototype.Fi;ri.prototype.registerResponseFilter=ri.prototype.li;ri.prototype.clearAllRequestFilters=ri.prototype.ah;ri.prototype.unregisterRequestFilter=ri.prototype.Ei;ri.prototype.registerRequestFilter=ri.prototype.ki;ri.unregisterScheme=function(e){delete di[e]};ri.registerScheme=ni;ri.prototype.setForceHTTPS=ri.prototype.Bf;function li(){this.g=0}ri.NumBytesRemainingClass=li;function ci(e,t,r){Wn.call(this,e,t);this.h=r}b(ci,Wn);ri.PendingRequest=ci;var ui=1;ri.RequestType={MANIFEST:0,SEGMENT:ui,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};ri.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var pi=3;ri.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:pi};var di={};function hi(e){this.g=!1;this.h=new Vn;this.i=e}hi.prototype.destroy=function(){var e=this;if(this.g)return this.h;this.g=!0;return this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()}))};function mi(e,t){if(e.g){if(t instanceof De&&7003==t.code)throw t;throw new De(2,7,7003,t)}}function fi(){this.g=new ie}n=fi.prototype;n.release=function(){this.Ub();this.g=null};n.o=function(e,t,r,n){this.g&&(e=new gi(e,t,r,n),this.g.push(t,e))};n.wa=function(e,t,r,n){function i(n){o.Lc(e,t,i);r(n)}var o=this;this.o(e,t,i,n)};n.Lc=function(e,t,r){if(this.g){var n=this.g.get(t)||[];n=u(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.target!=e||r!=i.listener&&r||(i.Lc(),this.g.remove(t,i))}};n.Ub=function(){if(this.g){var e=this.g,t=[],r;for(r in e.g)t.push.apply(t,p(e.g[r]));e=u(t);for(t=e.next();!t.done;t=e.next())t.value.Lc();this.g.g={}}};V("shaka.util.EventManager",fi);fi.prototype.removeAll=fi.prototype.Ub;fi.prototype.unlisten=fi.prototype.Lc;fi.prototype.listenOnce=fi.prototype.wa;fi.prototype.listen=fi.prototype.o;fi.prototype.release=fi.prototype.release;function gi(e,t,r,n){this.target=e;this.type=t;this.listener=r;this.g=yi(e,n);this.target.addEventListener(t,r,this.g)}gi.prototype.Lc=function(){this.target.removeEventListener(this.type,this.listener,this.g);this.listener=this.target=null;this.g=!1};function yi(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var r=new Set(["passive","capture"]);Object.keys(t).filter((function(e){return!r.has(e)}));return bi(e)?t:t.capture||!1}function bi(e){var t=vi;if(void 0==t){t=!1;try{var r={},n={get:function(){t=!0;return!1}};Object.defineProperty(r,"passive",n);Object.defineProperty(r,"capture",n);n=function(){};e.addEventListener("test",n,r);e.removeEventListener("test",n,r)}catch(e){t=!1}vi=t}return t||!1}var vi=void 0;function wi(e){this.h=e;this.g=void 0}wi.prototype.value=function(){void 0==this.g&&(this.g=this.h());return this.g};function Ei(e){for(var t=new Map,r=u(Object.keys(e)),n=r.next();!n.done;n=r.next())n=n.value,t.set(n,e[n]);return t}function Si(e){var t={};e.forEach((function(e,r){t[r]=e}));return t}function _i(e,t){if(e||t){if(e&&!t||t&&!e)return!1}else return!0;if(e.size!=t.size)return!1;e=u(e);for(var r=e.next();!r.done;r=e.next()){var n=u(r.value);r=n.next().value;n=n.next().value;if(!t.has(r))return!1;r=t.get(r);if(r!=n||void 0==r)return!1}return!0}function xi(){}function Di(t){if(!t)return"";t=ut(t);239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3));if(e.TextDecoder&&!wr())return t=(new TextDecoder).decode(t),t.includes("�")&&Y('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var r="",n=0;n<t.length;++n){var i=65533;0==(t[n]&128)?i=t[n]:t.length>=n+2&&192==(t[n]&224)&&128==(t[n+1]&192)?(i=(t[n]&31)<<6|t[n+1]&63,n+=1):t.length>=n+3&&224==(t[n]&240)&&128==(t[n+1]&192)&&128==(t[n+2]&192)?(i=(t[n]&15)<<12|(t[n+1]&63)<<6|t[n+2]&63,n+=2):t.length>=n+4&&240==(t[n]&241)&&128==(t[n+1]&192)&&128==(t[n+2]&192)&&128==(t[n+3]&192)&&(i=(t[n]&7)<<18|(t[n+1]&63)<<12|(t[n+2]&63)<<6|t[n+3]&63,n+=3);if(65535>=i)r+=String.fromCharCode(i);else{i-=65536;var o=i&1023;r+=String.fromCharCode(55296+(i>>10));r+=String.fromCharCode(56320+o)}}return r}function Ci(e,t,r){if(!e)return"";if(!r&&0!=e.byteLength%2)throw new De(2,2,2004);r=Math.floor(e.byteLength/2);var n=new Uint16Array(r);e=pt(e);for(var i=0;i<r;i++)n[i]=e.getUint16(2*i,t);return Pi.value()(n)}function Ti(e){function t(e){return r.byteLength<=e||32<=r[e]&&126>=r[e]}if(!e)return"";var r=ut(e);if(239==r[0]&&187==r[1]&&191==r[2])return Di(r);if(254==r[0]&&255==r[1])return Ci(r.subarray(2),!1);if(255==r[0]&&254==r[1])return Ci(r.subarray(2),!0);if(0==r[0]&&0==r[2])return Ci(e,!1);if(0==r[1]&&0==r[3])return Ci(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Di(e);throw new De(2,2,2003)}function Oi(t){if(e.TextEncoder&&!wr()){var r=new TextEncoder;return ct(r.encode(t))}t=encodeURIComponent(t);t=unescape(t);r=new Uint8Array(t.length);for(var n=0;n<t.length;n++)r[n]=t[n].charCodeAt(0);return ct(r)}function ki(e,t){for(var r=new ArrayBuffer(2*e.length),n=new DataView(r),i=0;i<e.length;++i)n.setUint16(2*i,e.charCodeAt(i),t);return r}V("shaka.util.StringUtils",xi);xi.resetFromCharCode=function(){Pi.g=void 0};xi.toUTF16=ki;xi.toUTF8=Oi;xi.fromBytesAutoDetect=Ti;xi.fromUTF16=Ci;xi.fromUTF8=Di;var Pi=new wi((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Mb:65536};0<t.Mb;t={Mb:t.Mb},t.Mb/=2)if(e(t.Mb))return function(e){return function(t){for(var r="",n=0;n<t.length;n+=e.Mb)r+=String.fromCharCode.apply(null,t.subarray(n,n+e.Mb));return r}}(t);return null}));function Ai(e,t){this.h=pt(e);this.i=t==ji;this.g=0}n=Ai.prototype;n.va=function(){return this.g<this.h.byteLength};n.ra=function(){return this.g};n.getLength=function(){return this.h.byteLength};n.Ia=function(){try{var e=this.h.getUint8(this.g);this.g+=1;return e}catch(e){throw Ii()}};n.Za=function(){try{var e=this.h.getUint16(this.g,this.i);this.g+=2;return e}catch(e){throw Ii()}};n.N=function(){try{var e=this.h.getUint32(this.g,this.i);this.g+=4;return e}catch(e){throw Ii()}};n.Bg=function(){try{var e=this.h.getInt32(this.g,this.i);this.g+=4;return e}catch(e){throw Ii()}};n.Ic=function(){try{if(this.i){var e=this.h.getUint32(this.g,!0);var t=this.h.getUint32(this.g+4,!0)}else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw Ii()}if(2097151<t)throw new De(2,3,3001);this.g+=8;return t*Math.pow(2,32)+e};n.Ib=function(e){if(this.g+e>this.h.byteLength)throw Ii();var t=ut(this.h,this.g,e);this.g+=e;return t};n.skip=function(e){if(this.g+e>this.h.byteLength)throw Ii();this.g+=e};n.ti=function(e){if(this.g<e)throw Ii();this.g-=e};n.seek=function(e){if(0>e||e>this.h.byteLength)throw Ii();this.g=e};n.vd=function(){for(var e=this.g;this.va()&&0!=this.h.getUint8(this.g);)this.g+=1;e=ut(this.h,e,this.g-e);this.g+=1;return Di(e)};function Ii(){return new De(2,3,3e3)}V("shaka.util.DataViewReader",Ai);Ai.prototype.readTerminatedString=Ai.prototype.vd;Ai.prototype.seek=Ai.prototype.seek;Ai.prototype.rewind=Ai.prototype.ti;Ai.prototype.skip=Ai.prototype.skip;Ai.prototype.readBytes=Ai.prototype.Ib;Ai.prototype.readUint64=Ai.prototype.Ic;Ai.prototype.readInt32=Ai.prototype.Bg;Ai.prototype.readUint32=Ai.prototype.N;Ai.prototype.readUint16=Ai.prototype.Za;Ai.prototype.readUint8=Ai.prototype.Ia;Ai.prototype.getLength=Ai.prototype.getLength;Ai.prototype.getPosition=Ai.prototype.ra;Ai.prototype.hasMoreData=Ai.prototype.va;var ji=1;Ai.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ji};function Ri(){this.i=[];this.h=[];this.g=!1}n=Ri.prototype;n.box=function(e,t){e=Ui(e);this.i[e]=Bi;this.h[e]=t;return this};n.T=function(e,t){e=Ui(e);this.i[e]=zi;this.h[e]=t;return this};n.stop=function(){this.g=!0};n.parse=function(e,t,r){e=new Ai(e,0);for(this.g=!1;e.va()&&!this.g;)this.td(0,e,t,r)};n.td=function(e,t,r,n){var i=t.ra();if(n&&i+8>t.getLength())this.g=!0;else{var o=t.N(),a=t.N(),s=Hi(a),l=!1;switch(o){case 0:o=t.getLength()-i;break;case 1:if(n&&t.ra()+8>t.getLength()){this.g=!0;return}o=t.Ic();l=!0}var c=this.h[a];if(c){var u=null,p=null;if(this.i[a]==zi){if(n&&t.ra()+4>t.getLength()){this.g=!0;return}p=t.N();u=p>>>24;p&=16777215}a=i+o;r&&a>t.getLength()&&(a=t.getLength());n&&a>t.getLength()?this.g=!0:(n=a-t.ra(),t=0<n?t.Ib(n):new Uint8Array(0),t=new Ai(t,0),c({name:s,parser:this,partialOkay:r||!1,version:u,flags:p,reader:t,size:o,start:i+e,has64BitSize:l}))}else t.skip(Math.min(i+o-t.ra(),t.getLength()-t.ra()))}};function Ni(e){for(var t=Fi(e);e.reader.va()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay)}function Li(e){for(var t=Fi(e),r=e.reader.N(),n=0;n<r&&(e.parser.td(e.start+t,e.reader,e.partialOkay),!e.parser.g);n++);}function Mi(e){var t=Fi(e);for(e.reader.skip(78);e.reader.va()&&!e.parser.g;)e.parser.td(e.start+t,e.reader,e.partialOkay)}function qi(e){return function(t){e(t.reader.Ib(t.reader.getLength()-t.reader.ra()))}}function Ui(e){var t=0;e=u(e);for(var r=e.next();!r.done;r=e.next())t=t<<8|r.value.charCodeAt(0);return t}function Hi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Fi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}V("shaka.util.Mp4Parser",Ri);Ri.headerSize=Fi;Ri.typeToString=Hi;Ri.allData=qi;Ri.visualSampleEntry=Mi;Ri.sampleDescription=Li;Ri.children=Ni;Ri.prototype.parseNext=Ri.prototype.td;Ri.prototype.parse=Ri.prototype.parse;Ri.prototype.stop=Ri.prototype.stop;Ri.prototype.fullBox=Ri.prototype.T;Ri.prototype.box=Ri.prototype.box;var Bi=0,zi=1;function Vi(){}function Wi(e){e=ut(e);e=Pi.value()(e);return btoa(e)}function Gi(e,t){t=void 0==t?!0:t;e=Wi(e).replace(/\+/g,"-").replace(/\//g,"_");return t?e:e.replace(/[=]*$/,"")}function Ki(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}function $i(t){for(var r=t.length/2,n=new Uint8Array(r),i=0;i<r;i++)n[i]=e.parseInt(t.substr(2*i,2),16);return n}function Xi(e){var t=ut(e);e="";t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,r=r.toString(16),1==r.length&&(r="0"+r),e+=r;return e}function Yi(){for(var e=M.apply(0,arguments),t=0,r=u(e),n=r.next();!n.done;n=r.next())t+=n.value.byteLength;t=new Uint8Array(t);r=0;e=u(e);for(n=e.next();!n.done;n=e.next())n=n.value,t.set(ut(n),r),r+=n.byteLength;return t}V("shaka.util.Uint8ArrayUtils",Vi);Vi.concat=Yi;Vi.toHex=Xi;Vi.fromHex=$i;Vi.fromBase64=Ki;Vi.toBase64=Gi;Vi.toStandardBase64=Wi;function Qi(e){var t=this;this.g=[];this.h=[];this.data=[];(new Ri).box("moov",Ni).box("moof",Ni).T("pssh",(function(e){if(!(1<e.version)){var r=ut(e.reader.h,-12,e.size);t.data.push(r);t.g.push(Xi(e.reader.Ib(16)));if(0<e.version){r=e.reader.N();for(var n=0;n<r;n++){var i=Xi(e.reader.Ib(16));t.h.push(i)}}}})).parse(e)}function Ji(e,t,r,n){var i=e.length,o=t.length+16+i;0<n&&(o+=4+16*r.size);var a=new Uint8Array(o),s=pt(a),l=0;s.setUint32(l,o);l+=4;s.setUint32(l,1886614376);l+=4;1>n?s.setUint32(l,0):s.setUint32(l,16777216);l+=4;a.set(t,l);l+=t.length;if(0<n)for(s.setUint32(l,r.size),l+=4,t=u(r),r=t.next();!r.done;r=t.next())r=$i(r.value),a.set(r,l),l+=r.length;s.setUint32(l,i);a.set(e,l+4);return a}function Zi(e,t){e=to(e,t);return 1!=e.length?null:e[0]}function eo(e,t,r){e=no(e,t,r);return 1!=e.length?null:e[0]}function to(e,t){var r=[];e=u(e.childNodes);for(var n=e.next();!n.done;n=e.next())n=n.value,n instanceof Element&&n.tagName==t&&r.push(n);return r}function ro(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}function no(e,t,r){var n=[];e=u(e.childNodes);for(var i=e.next();!i.done;i=e.next())i=i.value,i instanceof Element&&i.localName==r&&i.namespaceURI==t&&n.push(i);return n}function io(e,t,r){return e.hasAttributeNS(t,r)?e.getAttributeNS(t,r):null}function oo(e,t,r){t=u(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,e.hasAttributeNS(n,r))return e.getAttributeNS(n,r);return null}function ao(e){return Array.from(e.childNodes).every(so)?e.textContent.trim():null}function so(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function lo(e,t,r,n){n=void 0===n?null:n;var i=null;e=e.getAttribute(t);null!=e&&(i=r(e));return null==i?n:i}function co(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");e=Date.parse(e);return isNaN(e)?null:e/1e3}function uo(e){if(!e)return null;e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!e)return null;e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null);return isFinite(e)?e:null}function po(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;e=Number(t[1]);if(!isFinite(e))return null;t=Number(t[2]);return isFinite(t)?{start:e,end:t}:null}function ho(e){e=Number(e);return 0===e%1?e:null}function mo(e){e=Number(e);return 0===e%1&&0<e?e:null}function fo(e){e=Number(e);return 0===e%1&&0<=e?e:null}function go(e){e=Number(e);return isNaN(e)?null:e}function yo(e){return e?"true"===e.toLowerCase():!1}function bo(e){var t;var r=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(r)?null:r}function vo(e,t){var r=new DOMParser,n=Eo.value()(e);e=null;try{e=r.parseFromString(n,"text/xml")}catch(e){return null}r=e.documentElement;if(!r||r.getElementsByTagName("parsererror").length||r.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return r}function wo(e,t){try{var r=Ti(e);return vo(r,t)}catch(e){return null}}var Eo=new wi((function(){if("undefined"!==typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function So(e,t){var r=this;t=void 0===t?1:t;this.G=e;this.I=new Set;this.m=this.B=null;this.ea=this.Z=!1;this.J=0;this.g=null;this.F=new fi;this.i=new Map;this.C=new Map;this.l=new Vn;this.h=null;this.s=function(t){2==t.severity&&r.l.reject(t);e.onError(t)};this.V=new Map;this.ma=new Map;this.X=new dr((function(){return Go(r)}));this.O=!1;this.L=[];this.P=!1;this.$=new dr((function(){Zo(r)})).ha(t);this.l.catch((function(){}));this.j=new hi((function(){return _o(r)}));this.Y=!1;this.K=this.H=null}n=So.prototype;n.destroy=function(){return this.j.destroy()};function _o(e){return L((function(t){switch(t.g){case 1:return e.F.release(),e.F=null,e.l.reject(),e.$.stop(),e.$=null,e.X.stop(),e.X=null,S(t,Xo(e),2);case 2:if(!e.m){t.D(3);break}x(t,4);return S(t,e.m.setMediaKeys(null),6);case 6:C(t,5);break;case 4:T(t);case 5:e.m=null;case 3:e.g=null,e.I.clear(),e.B=null,e.C=new Map,e.h=null,e.s=function(){},e.G=null,e.Y=!1,e.H=null,_(t)}}))}n.configure=function(e){this.h=e};function xo(e,t,r){e.ea=!0;e.C=new Map;e.O=r;return To(e,t)}function Do(e,t,r){e.C=new Map;r=u(r);for(var n=r.next();!n.done;n=r.next())e.C.set(n.value,{initData:null,initDataType:null});r=u(e.h.persistentSessionsMetadata);for(n=r.next();!n.done;n=r.next())n=n.value,e.C.set(n.sessionId,{initData:n.initData,initDataType:n.initDataType});e.O=0<e.C.size;return To(e,t)}function Co(e,t,r,n,i,o){var a=new Map;i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t};i.drmInfos=[{keySystem:t,licenseServerUri:r,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:n,serverCertificateUri:"",initData:null,keyIds:null}];a.set(t,i);return Lo(e,a,[])}function To(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v;return L((function(w){if(1==w.g){if(r=Uo(e))for(n=u(t),i=n.next();!i.done;i=n.next())o=i.value,o.video&&(o.video.drmInfos=[r]),o.audio&&(o.audio.drmInfos=[r]);a=t.some((function(e){return e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length?!0:!1}));a||(s=Ei(e.h.servers),ra(t,s));l=new Set;c=u(t);for(i=c.next();!i.done;i=c.next())for(p=i.value,d=Jo(p),h=u(d),m=h.next();!m.done;m=h.next())f=m.value,l.add(f);g=u(l);for(m=g.next();!m.done;m=g.next())y=m.value,ia(y,Ei(e.h.servers),Ei(e.h.advanced||{}),e.h.keySystemsMapping);return S(w,Fr(t,e.O,e.Y,e.h.preferredKeySystems),2)}b=a||Object.keys(e.h.servers).length;if(!b)return e.Z=!0,w.return(Promise.resolve());v=Lo(e,void 0,t);return w.return(a?v:v.catch((function(){})))}))}function Oo(e){var t;return L((function(r){switch(r.g){case 1:if(e.m.mediaKeys)return r.return();if(!e.H){r.D(2);break}return S(r,e.H,3);case 3:return mi(e.j),r.return();case 2:return x(r,4),e.H=e.m.setMediaKeys(e.B),S(r,e.H,6);case 6:C(r,5);break;case 4:t=T(r),e.s(new De(2,6,6003,t.message));case 5:mi(e.j),_(r)}}))}function ko(e,t){return L((function(r){if(1==r.g)return S(r,Oo(e),2);jo(e,t.initDataType,ut(t.initData));_(r)}))}n.$c=function(e){var t=this;return L((function(r){if(1==r.g){if(!t.B)return t.F.wa(e,"encrypted",(function(){t.s(new De(2,6,6010))})),r.return();t.m=e;t.F.wa(t.m,"play",(function(){for(var e=u(t.L),r=e.next();!r.done;r=e.next())Vo(t,r.value);t.P=!0;t.L=[]}));"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.F.o(t.m,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Xo(t)}));t.K=t.g?t.g.initData.find((function(e){return 0<e.initData.length}))||null:null;return t.K||"com.apple.fps"!==t.g.keySystem||t.C.size?S(r,Oo(t),2):r.D(2)}Io(t).catch((function(){}));t.K||t.C.size||t.h.parseInbandPsshEnabled||t.F.o(t.m,"encrypted",(function(e){return ko(t,e)}));_(r)}))};function Po(e){var t,r,n,i,o;return L((function(a){switch(a.g){case 1:if(!e.B||!e.g)return a.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){a.D(2);break}t=ii([e.g.serverCertificateUri],e.h.retryParameters);x(a,3);r=e.G.lc.request(5,t);return S(a,r.promise,5);case 5:n=a.h;e.g.serverCertificate=ut(n.data);C(a,4);break;case 3:throw i=T(a),new De(2,6,6017,i);case 4:if(e.j.g)return a.return();case 2:if(!e.g.serverCertificate||!e.g.serverCertificate.length)return a.return();x(a,6);return S(a,e.B.setServerCertificate(e.g.serverCertificate),8);case 8:C(a,0);break;case 6:throw o=T(a),new De(2,6,6004,o.message)}}))}function Ao(e,t){var r,n,i;return L((function(o){if(1==o.g)return S(o,Bo(e,t,{initData:null,initDataType:null}),2);if(3!=o.g){r=o.h;if(!r)return o.return();n=[];if(i=e.i.get(r))i.sb=new Vn,n.push(i.sb);n.push(r.remove());return S(o,Promise.all(n),3)}e.i.delete(r);_(o)}))}function Io(e){var t,r,n,i,o;return L((function(a){if(1==a.g){if(!e.C.size)return a.D(2);e.C.forEach((function(t,r){Bo(e,r,t)}));return S(a,e.l,3)}if(2!=a.g){t=e.g&&e.g.keyIds||new Set([]);if(0<t.size&&ta(e))return a.return(e.l);e.l=new Vn;e.l.catch((function(){}))}r=(e.g?e.g.initData:[])||[];n=u(r);for(i=n.next();!i.done;i=n.next())o=i.value,jo(e,o.initDataType,o.initData);r.length||e.l.resolve();return a.return(e.l)}))}function jo(e,t,r){if(r.length){var n=e.i.values();n=u(n);for(var i=n.next();!i.done;i=n.next())if(st(r,i.value.initData)&&!Sr("Tizen 2"))return;0<e.i.size&&ea(e)&&(e.l.resolve(),e.l=new Vn,e.l.catch((function(){})));zo(e,t,r,e.g.sessionType)}}function Ro(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function No(e){e=e.i.keys();e=ae(e,(function(e){return e.sessionId}));return Array.from(e)}n.Te=function(){var e=this,t=this.i.keys();t=ae(t,(function(t){var r=e.i.get(t);return{sessionId:t.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType}}));return Array.from(t)};n.gd=function(){var e=Infinity,t=this.i.keys();t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,isNaN(r.expiration)||(e=Math.min(e,r.expiration));return e};n.Ud=function(){return Si(this.ma)};function Lo(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b;return L((function(v){switch(v.g){case 1:n=new Map;if(r.length){i=Mo(e,r,n);v.D(2);break}return S(v,qo(e,t),3);case 3:i=v.h;case 2:o=i;if(!o)throw new De(2,6,6001);mi(e.j);x(v,4);e.I.clear();a=o.getConfiguration();s=a.audioCapabilities||[];l=a.videoCapabilities||[];c=u(s);for(p=c.next();!p.done;p=c.next())d=p.value,e.I.add(d.contentType.toLowerCase());h=u(l);for(p=h.next();!p.done;p=h.next())m=p.value,e.I.add(m.contentType.toLowerCase());if(r.length){var w=o.keySystem;var E=n.get(o.keySystem);var _=[],D=[],O=[],k=[],P=new Set;na(E,_,O,D,k,P);var A=e.O?"persistent-license":"temporary";w={keySystem:w,licenseServerUri:_[0],distinctiveIdentifierRequired:E[0].distinctiveIdentifierRequired,persistentStateRequired:E[0].persistentStateRequired,sessionType:E[0].sessionType||A,audioRobustness:E[0].audioRobustness||"",videoRobustness:E[0].videoRobustness||"",serverCertificate:O[0],serverCertificateUri:D[0],initData:k,keyIds:P};E=u(E);for(_=E.next();!_.done;_=E.next())_=_.value,_.distinctiveIdentifierRequired&&(w.distinctiveIdentifierRequired=_.distinctiveIdentifierRequired),_.persistentStateRequired&&(w.persistentStateRequired=_.persistentStateRequired);E=w}else E=o.keySystem,w=t.get(o.keySystem),_=[],D=[],O=[],k=[],P=new Set,na(w.drmInfos,_,O,D,k,P),E={keySystem:E,licenseServerUri:_[0],distinctiveIdentifierRequired:"required"==w.distinctiveIdentifier,persistentStateRequired:"required"==w.persistentState,sessionType:w.sessionTypes[0]||"temporary",audioRobustness:(w.audioCapabilities?w.audioCapabilities[0].robustness:"")||"",videoRobustness:(w.videoCapabilities?w.videoCapabilities[0].robustness:"")||"",serverCertificate:O[0],serverCertificateUri:D[0],initData:k,keyIds:P};e.g=E;if(!e.g.licenseServerUri)throw new De(2,6,6012,e.g.keySystem);return S(v,o.createMediaKeys(),6);case 6:f=v.h;mi(e.j);e.B=f;if(!(""!=e.h.minHdcpVersion&&"getStatusForPolicy"in e.B)){v.D(7);break}x(v,8);return S(v,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:g=v.h;if("usable"!=g)throw new De(2,6,6018);mi(e.j);C(v,7,4);break;case 8:y=T(v,4);if(y instanceof De)throw y;throw new De(2,6,6019,y.message);case 7:return e.Z=!0,S(v,Po(e),11);case 11:mi(e.j);C(v,0);break;case 4:b=T(v);mi(e.j,b);e.g=null;e.I.clear();if(b instanceof De)throw b;throw new De(2,6,6002,b.message)}}))}function Mo(e,t,r){for(var n=u(t),i=n.next();!i.done;i=n.next()){var o=u(Jo(i.value));for(i=o.next();!i.done;i=o.next())i=i.value,r.has(i.keySystem)||r.set(i.keySystem,[]),r.get(i.keySystem).push(i)}if(1==r.size&&r.has(""))throw new De(2,6,6e3);n={};e=u(e.h.preferredKeySystems);for(i=e.next();!i.done;n={He:n.He},i=e.next())for(n.He=i.value,o=u(t),i=o.next();!i.done;i=o.next())if(i=i.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.He}}(n)))return i.keySystemAccess;e=u([!0,!1]);for(i=e.next();!i.done;i=e.next())for(n=i.value,o=u(t),i=o.next();!i.done;i=o.next()){var a=u(i.value.decodingInfos);for(i=a.next();!i.done;i=a.next()){var s=i.value;if(s.supported&&s.keySystemAccess){i=r.get(s.keySystemAccess.keySystem);var l=u(i);for(i=l.next();!i.done;i=l.next())if(!!i.value.licenseServerUri==n)return s.keySystemAccess}}}return null}function qo(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y;return L((function(b){switch(b.g){case 1:if(1==t.size&&t.has(""))throw new De(2,6,6e3);n=u(t.values());for(i=n.next();!i.done;i=n.next())o=i.value,0==o.audioCapabilities.length&&delete o.audioCapabilities,0==o.videoCapabilities.length&&delete o.videoCapabilities;a=u(e.h.preferredKeySystems);s=a.next();case 2:if(s.done){b.D(4);break}l=s.value;if(!t.has(l)){b.D(3);break}c=t.get(l);x(b,6);return S(b,navigator.requestMediaKeySystemAccess(l,[c]),8);case 8:return r=b.h,b.return(r);case 6:T(b);case 7:mi(e.j);case 3:s=a.next();b.D(2);break;case 4:p=u([!0,!1]),d=p.next();case 9:if(d.done){b.D(11);break}h=d.value;m=u(t.keys());s=m.next();case 12:if(s.done){d=p.next();b.D(9);break}f=s.value;g=t.get(f);y=g.drmInfos.some((function(e){return!!e.licenseServerUri}));if(y!=h){b.D(13);break}x(b,15);return S(b,navigator.requestMediaKeySystemAccess(f,[g]),17);case 17:return r=b.h,b.return(r);case 15:T(b);case 16:mi(e.j);case 13:s=m.next();b.D(12);break;case 11:return b.return(r)}}))}function Uo(t){t=Ei(t.h.clearKeys);if(0==t.size)return null;var r=[],n=[];t.forEach((function(e,t){var i=t;22!=i.length&&(i=Gi($i(t),!1));t=e;22!=t.length&&(t=Gi($i(e),!1));e={kty:"oct",kid:i,k:t};r.push(e);n.push(e.kid)}));t=JSON.stringify({keys:r});var i=JSON.stringify({kids:n});i=[{initData:ut(Oi(i)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(n)}}function Ho(e){ea(e)&&e.l.resolve()}function Fo(e,t){new dr((function(){t.loaded=!0;Ho(e)})).R(aa)}function Bo(e,t,r){var n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:try{n=e.B.createSession("persistent-license")}catch(t){return i=new De(2,6,6005,t.message),e.s(i),u.return(Promise.reject(i))}e.F.o(n,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Vo(e,t)}));e.F.o(n,"keystatuseschange",(function(t){return Wo(e,t)}));o={initData:r.initData,initDataType:r.initDataType,loaded:!1,nf:Infinity,sb:null,type:"persistent-license"};e.i.set(n,o);x(u,2);return S(u,n.load(t),4);case 4:return a=u.h,mi(e.j),a||(e.i.delete(n),s=e.h.persistentSessionOnlinePlayback?1:2,e.s(new De(s,6,6013)),o.loaded=!0),Fo(e,o),Ho(e),u.return(n);case 2:l=T(u),mi(e.j,l),e.i.delete(n),c=e.h.persistentSessionOnlinePlayback?1:2,e.s(new De(c,6,6005,l.message)),o.loaded=!0,Ho(e);case 3:return u.return(Promise.resolve())}}))}function zo(e,t,r,n){try{var i=e.B.createSession(n)}catch(t){e.s(new De(2,6,6005,t.message));return}e.F.o(i,"message",(function(t){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.P?e.L.push(t):Vo(e,t)}));e.F.o(i,"keystatuseschange",(function(t){return Wo(e,t)}));e.i.set(i,{initData:r,initDataType:t,loaded:!1,nf:Infinity,sb:null,type:n});try{r=e.h.initDataTransform(r,t,e.g)}catch(r){t=r;r instanceof De||(t=new De(2,6,6016,r));e.s(t);return}e.h.logLicenseExchange&&Gi(r);i.generateRequest(t,r).catch((function(t){if(!e.j.g){e.i.delete(i);var r=t.errorCode;if(r&&r.systemCode){var n=r.systemCode;0>n&&(n+=Math.pow(2,32));n="0x"+n.toString(16)}e.s(new De(2,6,6006,t.message,t,n))}}))}function Vo(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f;L((function(g){switch(g.g){case 1:r=t.target;e.h.logLicenseExchange&&Gi(t.message);n=e.i.get(r);i=e.g.licenseServerUri;o=e.h.advanced[e.g.keySystem];"individualization-request"==t.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer);a=ii([i],e.h.retryParameters);a.body=t.message;a.method="POST";a.licenseRequestType=t.messageType;a.sessionId=r.sessionId;a.drmInfo=e.g;n&&(a.initData=n.initData,a.initDataType=n.initDataType);if(Ro(e.g.keySystem)){var y=Ci(a.body,!0,!0);if(y.includes("PlayReadyKeyMessage")){y=vo(y,"PlayReadyKeyMessage");for(var b=u(y.getElementsByTagName("HttpHeader")),v=b.next();!v.done;v=b.next())v=v.value,a.headers[v.getElementsByTagName("name")[0].textContent]=v.getElementsByTagName("value")[0].textContent;a.body=Ki(y.getElementsByTagName("Challenge")[0].textContent)}else a.headers["Content-Type"]="text/xml; charset=utf-8"}s=Date.now();x(g,2);c=e.G.lc.request(2,a);return S(g,c.promise,4);case 4:l=g.h;C(g,3);break;case 2:return p=T(g),d=new De(2,6,6007,p),e.s(d),n&&n.sb&&n.sb.reject(d),g.return();case 3:if(e.j.g)return g.return();e.J+=(Date.now()-s)/1e3;e.h.logLicenseExchange&&Gi(l.data);x(g,5);return S(g,r.update(l.data),7);case 7:C(g,6);break;case 5:return h=T(g),m=new De(2,6,6008,h.message),e.s(m),n&&n.sb&&n.sb.reject(m),g.return();case 6:if(e.j.g)return g.return();f=new G("drmsessionupdate");e.G.onEvent(f);n&&(n.sb&&n.sb.resolve(),Fo(e,n));_(g)}}))}function Wo(e,t){t=t.target;var r=e.i.get(t),n=!1;t.keyStatuses.forEach((function(t,i){if("string"==typeof i){var o=i;i=t;t=o}if(Ro(e.g.keySystem)&&16==i.byteLength&&(fr()||wr())){o=pt(i);var a=o.getUint32(0,!0),s=o.getUint16(4,!0),l=o.getUint16(6,!0);o.setUint32(0,a,!1);o.setUint16(4,s,!1);o.setUint16(6,l,!1)}"status-pending"!=t&&(r.loaded=!0);"expired"==t&&(n=!0);i=Xi(i).slice(0,32);e.V.set(i,t)}));var i=t.expiration-Date.now();(0>i||n&&1e3>i)&&r&&!r.sb&&(e.i.delete(t),t.close().catch((function(){})));ea(e)&&(e.l.resolve(),e.X.R(sa))}function Go(e){var t=e.V,r=e.ma;r.clear();t.forEach((function(e,t){return r.set(t,e)}));t=Array.from(r.values());t.length&&t.every((function(e){return"expired"==e}))&&e.s(new De(2,6,6014));e.G.me(Si(r))}function Ko(){var e,t,r,n,i,o,a,s;return L((function(l){return 1==l.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],r={initDataTypes:["cenc"],videoCapabilities:t},n={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},i=[n,r],o=new Map,a=function(e){var t,r,n;return L((function(a){switch(a.g){case 1:x(a,2);if("org.w3.clearkey"===e&&Er())throw Error("Unsupported keySystem");return S(a,navigator.requestMediaKeySystemAccess(e,i),4);case 4:return t=a.h,n=(r=t.getConfiguration().sessionTypes)?r.includes("persistent-license"):!1,Sr("Tizen 3")&&(n=!1),o.set(e,{persistentState:n}),S(a,t.createMediaKeys(),5);case 5:C(a,0);break;case 2:T(a),o.set(e,null),_(a)}}))},s=e.map((function(e){return a(e)})),S(l,Promise.all(s),2)):l.return(Si(o))}))}function $o(e){var t;return L((function(r){if(1==r.g)return t=new Promise((function(e,t){new dr(t).R(oa)})),x(r,2),S(r,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(2!=r.g)return C(r,0);T(r);_(r)}))}function Xo(e){var t;return L((function(r){t=Array.from(e.i.entries());e.i.clear();return S(r,Promise.all(t.map((function(t){t=u(t);var r=t.next().value,n=t.next().value;return L((function(t){if(1==t.g)return x(t,2),e.ea||e.C.has(r.sessionId)||"persistent-license"!==n.type||e.h.persistentSessionOnlinePlayback?S(t,$o(r),5):S(t,r.remove(),5);if(2!=t.g)return C(t,0);T(t);_(t)}))}))),0)}))}function Yo(e,t){return e.length&&t.length&&e!==t?0<Qo(e,t).length:!0}function Qo(e,t){if(!e.length)return t;if(!t.length)return e;var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;for(var i={},o=u(t),a=o.next();!a.done;i={bb:i.bb},a=o.next())if(a=a.value,n.keySystem==a.keySystem){i.bb=[];i.bb=i.bb.concat(n.initData||[]);i.bb=i.bb.concat(a.initData||[]);i.bb=i.bb.filter(function(e){return function(t,r){return void 0===t.keyId||r===e.bb.findIndex((function(e){return e.keyId===t.keyId}))}}(i));o=n.keyIds&&a.keyIds?new Set([].concat(p(n.keyIds),p(a.keyIds))):n.keyIds||a.keyIds;r.push({keySystem:n.keySystem,licenseServerUri:n.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:n.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:n.persistentStateRequired||a.persistentStateRequired,videoRobustness:n.videoRobustness||a.videoRobustness,audioRobustness:n.audioRobustness||a.audioRobustness,serverCertificate:n.serverCertificate||a.serverCertificate,serverCertificateUri:n.serverCertificateUri||a.serverCertificateUri,initData:i.bb,keyIds:o});break}}return r}function Jo(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Zo(e){e.i.forEach((function(t,r){var n=t.nf,i=r.expiration;isNaN(i)&&(i=Infinity);i!=n&&(e.G.onExpirationUpdated(r.sessionId,i),t.nf=i)}))}function ea(e){e=e.i.values();return se(e,(function(e){return e.loaded}))}function ta(e){for(var t=u(e.g&&e.g.keyIds||new Set([])),r=t.next();!r.done;r=t.next())if("usable"!==e.V.get(r.value))return!1;return!0}function ra(e,t){var r=[];t.forEach((function(e,t){r.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));e=u(e);for(t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=r),t.audio&&(t.audio.drmInfos=r)}function na(e,t,r,n,i,o){var a={};e=u(e);for(var s=e.next();!s.done;a={Ja:a.Ja},s=e.next()){a.Ja=s.value;t.includes(a.Ja.licenseServerUri)||t.push(a.Ja.licenseServerUri);n.includes(a.Ja.serverCertificateUri)||n.push(a.Ja.serverCertificateUri);a.Ja.serverCertificate&&(r.some(function(e){return function(t){return st(t,e.Ja.serverCertificate)}}(a))||r.push(a.Ja.serverCertificate));if(a.Ja.initData){s={};for(var l=u(a.Ja.initData),c=l.next();!c.done;s={Ed:s.Ed},c=l.next())s.Ed=c.value,i.some(function(e){return function(t){var r=e.Ed;return t.keyId&&t.keyId==r.keyId?!0:t.initDataType==r.initDataType&&st(t.initData,r.initData)}}(s))||i.push(s.Ed)}if(a.Ja.keyIds)for(s=u(a.Ja.keyIds),l=s.next();!l.done;l=s.next())o.add(l.value)}}function ia(t,r,n,i){var o=t.keySystem;if(o&&("org.w3.clearkey"!=o||!t.licenseServerUri)){r.size&&(r=r.get(o)||"",t.licenseServerUri=r);t.keyIds||(t.keyIds=new Set);if(n=n.get(o))t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=n.persistentStateRequired),t.videoRobustness||(t.videoRobustness=n.videoRobustness),t.audioRobustness||(t.audioRobustness=n.audioRobustness),t.serverCertificate||(t.serverCertificate=n.serverCertificate),n.sessionType&&(t.sessionType=n.sessionType),t.serverCertificateUri||(t.serverCertificateUri=n.serverCertificateUri);i[o]&&(t.keySystem=i[o]);e.cast&&e.cast.__platform__&&"com.microsoft.playready"==o&&(t.keySystem="com.chromecast.playready")}}var oa=1,aa=5,sa=.5,la=new wi((function(){return ct(new Uint8Array([0]))}));function ca(){}function ua(e,t,r,n){var i,o,a,s;return L((function(l){if(1==l.g){if(n&&(i=ha[n.toLowerCase()]))return l.return(i);if(o=da(e))if(a=ma[o])return l.return(a);return n?l.D(2):S(l,pa(e,t,r),3)}if(2!=l.g&&(n=l.h)&&(s=ha[n]))return l.return(s);throw new De(2,4,4e3,e)}))}function pa(e,t,r){var n,i,o;return L((function(a){if(1==a.g)return n=ii([e],r),n.method="HEAD",S(a,t.request(0,n).promise,2);i=a.h;o=i.headers["content-type"];return a.return(o?o.toLowerCase().split(";").shift():"")}))}function da(e){e=new pe(e).La.split("/").pop().split(".");return 1==e.length?"":e.pop().toLowerCase()}V("shaka.media.ManifestParser",ca);ca.unregisterParserByMime=function(e){delete ha[e]};ca.registerParserByMime=function(e,t){ha[e]=t};ca.registerParserByExtension=function(e,t){ma[e]=t};ca.AccessibilityPurpose={$j:"visually impaired",gj:"hard of hearing"};var ha={},ma={};function fa(e){function t(){n=!0}function r(e){o.push(e);Ni(e)}e=ut(e);var n=!1,i,o=[],a=[];(new Ri).box("moov",r).box("trak",r).box("mdia",r).box("minf",r).box("stbl",r).T("stsd",(function(e){i=e;o.push(e);Li(e)})).T("encv",t).T("enca",t).T("hev1",(function(e){a.push({box:e,mc:1701733238})})).T("hvc1",(function(e){a.push({box:e,mc:1701733238})})).T("avc1",(function(e){a.push({box:e,mc:1701733238})})).T("avc3",(function(e){a.push({box:e,mc:1701733238})})).T("ac-3",(function(e){a.push({box:e,mc:1701733217})})).T("ec-3",(function(e){a.push({box:e,mc:1701733217})})).T("mp4a",(function(e){a.push({box:e,mc:1701733217})})).parse(e);if(n)return e;if(0==a.length||!i)throw re(Xi(e)),new De(2,3,3019);a.reverse();for(var s=u(a),l=s.next();!l.done;l=s.next())l=l.value,e=ga(e,i,l.box,o,l.mc);return e}function ga(e,t,r,n,i){var o=ba.value(),a=e.subarray(r.start,r.start+r.size),s=pt(a),l=new Uint8Array(r.size+o.byteLength);l.set(a,0);a=pt(l);a.setUint32(4,i);l.set(o,r.size);i=s.getUint32(4);a.setUint32(r.size+16,i);ya(l,0,l.byteLength);i=new Uint8Array(e.byteLength+l.byteLength);r=gr()?r.start:r.start+r.size;o=e.subarray(r);i.set(e.subarray(0,r));i.set(l,r);i.set(o,r+l.byteLength);e=u(n);for(n=e.next();!n.done;n=e.next())n=n.value,ya(i,n.start,n.size+l.byteLength);l=pt(i,t.start);t=Fi(t);e=l.getUint32(t);l.setUint32(t,e+1);return i}function ya(e,t,r){e=pt(e,t);t=e.getUint32(0);0!=t&&(1==t?(e.setUint32(8,r>>32),e.setUint32(12,r&4294967295)):e.setUint32(0,r))}var ba=new wi((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function va(e,t,r,n,i,o,a){this.Oa=e;this.Sa=t;this.za=r;this.jf=void 0===n?null:n;this.timescale=void 0===i?null:i;this.g=void 0===o?null:o;this.B=void 0===a?null:a}va.prototype.jd=function(){return this.Sa};va.prototype.fd=function(){return this.za};function wa(e,t){return e&&t?e.jd()==t.jd()&&e.fd()==t.fd()&&wt(e.Oa(),t.Oa())&&st(e.g,t.g):e==t}V("shaka.media.InitSegmentReference",va);va.prototype.getEndByte=va.prototype.fd;va.prototype.getStartByte=va.prototype.jd;function Ea(e,t,r,n,i,o,a,s,l,c,u,p,d,h,m){c=void 0===c?[]:c;h=void 0===h?Sa:h;this.startTime=e;this.j=this.endTime=t;this.H=r;this.Sa=n;this.za=i;this.h=o;this.timestampOffset=a;this.appendWindowStart=s;this.appendWindowEnd=l;this.i=c;this.tilesLayout=void 0===u?"":u;this.G=void 0===p?null:p;this.g=void 0===d?null:d;this.status=h;this.m=!1;this.C=!0;this.s=!1;this.B=void 0===m?null:m;this.F=null;this.l=0}n=Ea.prototype;n.Oa=function(){return this.H()};n.getStartTime=function(){return this.startTime};n.uh=function(){return this.endTime};n.jd=function(){return this.Sa};n.fd=function(){return this.za};n.Nh=function(){return this.tilesLayout};n.Mh=function(){return this.G};n.dc=function(){return this.status};n.ai=function(){this.status=_a};n.hf=function(){this.m=!0};n.Xh=function(){return this.m};n.xg=function(){this.C=!1};n.Wh=function(){return this.C};n.wg=function(){this.s=!0};n.Th=function(){return this.s};n.Lg=function(e){this.F=e};n.Lh=function(){return this.F};n.offset=function(e){this.startTime+=e;this.endTime+=e;this.j+=e;for(var t=u(this.i),r=t.next();!r.done;r=t.next())r=r.value,r.startTime+=e,r.endTime+=e,r.j+=e};n.Hf=function(e){null==this.g?Y("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))};V("shaka.media.SegmentReference",Ea);Ea.prototype.syncAgainst=Ea.prototype.Hf;Ea.prototype.offset=Ea.prototype.offset;Ea.prototype.getThumbnailSprite=Ea.prototype.Lh;Ea.prototype.setThumbnailSprite=Ea.prototype.Lg;Ea.prototype.hasByterangeOptimization=Ea.prototype.Th;Ea.prototype.markAsByterangeOptimization=Ea.prototype.wg;Ea.prototype.isIndependent=Ea.prototype.Wh;Ea.prototype.markAsNonIndependent=Ea.prototype.xg;Ea.prototype.isPreload=Ea.prototype.Xh;Ea.prototype.markAsPreload=Ea.prototype.hf;Ea.prototype.markAsUnavailable=Ea.prototype.ai;Ea.prototype.getStatus=Ea.prototype.dc;Ea.prototype.getTileDuration=Ea.prototype.Mh;Ea.prototype.getTilesLayout=Ea.prototype.Nh;Ea.prototype.getEndByte=Ea.prototype.fd;Ea.prototype.getStartByte=Ea.prototype.jd;Ea.prototype.getEndTime=Ea.prototype.uh;Ea.prototype.getStartTime=Ea.prototype.getStartTime;Ea.prototype.getUris=Ea.prototype.Oa;var Sa=0,_a=1;Ea.Status={Ni:Sa,Vj:_a,lj:2};function xa(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Da(e,t){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Ca(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;var r=0;e=u(Oa(e));for(var n=e.next();!n.done;n=e.next()){var i=n.value;n=i.start;i=i.end;i>t&&(r+=i-Math.max(n,t))}return r}function Ta(e,t,r){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;e=Oa(e).findIndex((function(e,n,i){return e.start>t&&(0==n||i[n-1].end-t<=r)}));return 0<=e?e:null}function Oa(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}function ka(){}function Pa(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function Aa(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]?!0:!1}function Ia(e,t){var r=(e[t]&127)<<21;r|=(e[t+1]&127)<<14;r|=(e[t+2]&127)<<7;return r|=e[t+3]&127}function ja(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var r=e.data.subarray(1).indexOf(0);if(-1===r)return null;var n=Di(ut(e.data,1,r));e=Di(ut(e.data,2+r)).replace(/\0*$/,"");t.description=n;t.data=e;return t}if("WXXX"===e.type){if(2>e.size||3!==e.data[0])return null;r=e.data.subarray(1).indexOf(0);if(-1===r)return null;n=Di(ut(e.data,1,r));e=Di(ut(e.data,2+r)).replace(/\0*$/,"");t.description=n;t.data=e;return t}if("PRIV"===e.type){if(2>e.size)return null;n=e.data.indexOf(0);if(-1===n)return null;n=Di(ut(e.data,0,n));t.description=n;"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=ct(e.data.subarray(n.length+1)),t.data=e);return t}if("T"===e.type[0]){if(2>e.size||3!==e.data[0])return null;e=Di(e.data.subarray(1)).replace(/\0*$/,"");t.data=e;return t}return"W"===e.type[0]?(e=Di(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=ct(e.data),t):null}function Ra(e){for(var t=0,r=[];Pa(e,t);){var n=Ia(e,t+6);e[t+5]>>6&1&&(t+=10);t+=10;for(n=t+n;t+10<n;){var i=e.subarray(t),o=Ia(i,4);i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:o,data:i.subarray(10,10+o)};(o=ja(i))&&r.push(o);t+=i.size+10}Aa(e,t)&&(t+=10)}return r}function Na(e,t){for(var r=t=void 0===t?0:t,n=0;Pa(e,t);)e[t+5]>>6&1&&(n+=10),n+=10,n+=Ia(e,t+6),Aa(e,t+10)&&(n+=10),t+=n;return 0<n?e.subarray(r,r+n):new Uint8Array([])}V("shaka.util.Id3Utils",ka);ka.getID3Data=Na;ka.getID3Frames=Ra;function La(e,t){var r=null,n=null,i=null,o=e.N();t&1&&(i=e.Ic());t&2&&e.skip(4);t&8&&(r=e.N());t&16&&(n=e.N());return{trackId:o,ig:r,hh:n,dk:i}}function Ma(e,t){return 1==t?(t=e.N(),e=e.N(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.N()}}function qa(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));t=e.N();e.skip(4);e=e.Za();return{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Ua(e,t,r){var n=e.N(),i=[],o=null;r&1&&(o=e.N());r&4&&e.skip(4);for(var a=0;a<n;a++){var s={vf:null,sampleSize:null,ve:null};r&256&&(s.vf=e.N());r&512&&(s.sampleSize=e.N());r&1024&&e.skip(4);r&2048&&(s.ve=0==t?e.N():e.Bg());i.push(s)}return{hk:n,Dg:i,gh:o}}function Ha(e,t){1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var r=e.N();1==t?e.skip(8):e.skip(4);e.skip(4);e.skip(8);e.skip(2);e.skip(2);e.skip(2);e.skip(2);e.skip(36);t=e.Za()+e.Za()/16;e=e.Za()+e.Za()/16;return{trackId:r,width:t,height:e}}function Fa(e){var t="mp4a";e.skip(11);t+="."+this.g(e.Ia());t+="."+this.g(e.Ia()>>>2&63).replace(/^0/,"");return{Ga:t}}function Ba(e,t){e.skip(87);return{Ga:t+"."+this.g(e.Ia())+this.g(e.Ia())+this.g(e.Ia())}}function za(e){e=e.N();return{Ga:Hi(e)}}function Va(e){this.j=e;this.i=e.byteLength;this.g=this.h=0}function Wa(e){var t=e.j.byteLength-e.i,r=new Uint8Array(4),n=Math.min(4,e.i);0!==n&&(r.set(e.j.subarray(t,t+n)),e.h=new Ai(r,0).N(),e.g=8*n,e.i-=n)}function Ga(e,t){if(e.g<=t){t-=e.g;var r=Math.floor(t/8);t-=8*r;e.g-=r;Wa(e)}e.h<<=t;e.g-=t}function Ka(e,t){var r=Math.min(e.g,t),n=e.h>>>32-r;e.g-=r;0<e.g?e.h<<=r:0<e.i&&Wa(e);r=t-r;return 0<r?n<<r|Ka(e,r):n}function $a(e){var t;for(t=0;t<e.g;++t)if(0!==(e.h&2147483648>>>t))return e.h<<=t,e.g-=t,t;Wa(e);return t+$a(e)}function Xa(e){Ga(e,1+$a(e))}function Ya(e){var t=$a(e);return Ka(e,t+1)-1}function Qa(e,t){for(var r=8,n=8,i=0;i<t;i++)0!==n&&(n=Ya(e),n=(r+(1&n?1+n>>>1:-1*(n>>>1))+256)%256),r=0===n?r:n}function Ja(e){Ka(e,8);Ya(e);return Ya(e)}V("shaka.util.ExpGolomb",Va);function Za(){this.B=null;this.C=!1;this.j=this.F=null;this.i=[];this.l=this.m=null;this.g=[];this.s=null;this.h=[]}n=Za.prototype;n.clearData=function(){this.i=[];this.g=[];this.h=[]};n.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,rs(e)),r=e.length-(e.length+t)%188,n=!1,i=t;i<r;i+=188)if(71==e[i]){var o=!!(e[i+1]&64),a=((e[i+1]&31)<<8)+e[i+2];if(1<(e[i+3]&48)>>4){var s=i+5+e[i+4];if(s==i+188)continue}else s=i+4;switch(a){case 0:o&&(s+=e[s]+1);this.B=(e[s+10]&31)<<8|e[s+11];break;case 17:case 8191:break;case this.B:o&&(s+=e[s]+1);o=e;a={audio:-1,video:-1,Zd:-1,audioCodec:"",videoCodec:""};var l=s+3+((o[s+1]&15)<<8|o[s+2])-4;for(s+=12+((o[s+10]&15)<<8|o[s+11]);s<l;){var c=(o[s+1]&31)<<8|o[s+2],u=(o[s+3]&15)<<8|o[s+4];switch(o[s]){case 6:if(-1==a.audio&&0<u)for(var p=s+5,d=u;2<d;){switch(o[p]){case 106:a.audio=c;a.audioCodec="ac3";break;case 122:a.audio=c,a.audioCodec="ec3"}var h=o[p+1]+2;p+=h;d-=h}break;case 15:-1==a.audio&&(a.audio=c,a.audioCodec="aac");break;case 21:-1==a.Zd&&(a.Zd=c);break;case 27:-1==a.video&&(a.video=c,a.videoCodec="avc");break;case 3:case 4:-1==a.audio&&(a.audio=c,a.audioCodec="mp3");break;case 36:-1==a.video&&(a.video=c,a.videoCodec="hvc");break;case 129:-1==a.audio&&(a.audio=c,a.audioCodec="ac3");break;case 132:case 135:-1==a.audio&&(a.audio=c,a.audioCodec="ec3")}s+=u+5}o=a;-1!=o.video&&(this.F=o.video,this.j=o.videoCodec);-1!=o.audio&&(this.m=o.audio,this.l=o.audioCodec);-1!=o.Zd&&(this.s=o.Zd);n&&!this.C&&(n=!1,i=t-188);this.C=!0;break;case this.F:s=e.subarray(s,i+188);o?this.i.push(s):this.i.length&&(o=this.i[this.i.length-1])&&(this.i[this.i.length-1]=Yi(o,s));break;case this.m:s=e.subarray(s,i+188);o?this.g.push(s):this.g.length&&(o=this.g[this.g.length-1])&&(this.g[this.g.length-1]=Yi(o,s));break;case this.s:s=e.subarray(s,i+188);o?this.h.push(s):this.h.length&&(o=this.h[this.h.length-1])&&(this.h[this.h.length-1]=Yi(o,s));break;default:n=!0}}return this};function es(e){if(1!==(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),qf:e[4]<<8|e[5],pts:null,dts:null};if(t.qf&&t.qf>e.byteLength-6)return null;var r=e[7];r&192&&(t.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,t.dts=t.pts,r&64&&(t.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2));r=e[8]+9;if(e.byteLength<=r)return null;t.data=e.subarray(r);return t}n.rf=function(e,t){for(var r=e.pts?e.pts/9e4:null,n=e.data,i=n.byteLength,o=0,a=[],s=-1,l=0,c=!1,u,p=0;p<i;++p){var d=n[p];if(d)if(2<=o&&1==d&&c){e=p-(3<o?3:o);if(0==e)break;u.data=Yi(u.data,n.subarray(0,e));u.Ab=Yi(u.Ab,n.subarray(0,e));break}else{if(2<=o&&1==d){0<=s&&(o=p-((3<o?3:o)+1),a.push({data:n.subarray(s+1,o+1),Ab:n.subarray(s,o+1),type:l,time:r}));if(p>=i-1)return a;p++;s=p;l=n[p]&31}o=0}else o++;p>=i-1&&0<=s&&0<=o&&(c?(u.data=Yi(u.data,n),u.Ab=Yi(u.Ab,n)):(c=!0,u={data:n.subarray(s+1,i),Ab:n.subarray(s,i),type:l,time:r},t&&0==e.qf&&(n=t.data,i=n.byteLength,p=-1)))}u&&a.push(u);return a};n.getMetadata=function(){for(var e=[],t=u(this.h),r=t.next();!r.done;r=t.next())(r=es(r.value))&&e.push({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:Ra(r.data),dts:r.dts,pts:r.pts});return e};n.Zb=function(){for(var e=[],t=u(this.g),r=t.next();!r.done;r=t.next())(r=es(r.value))&&e.push(r);return e};n.Xd=function(){for(var e=[],t=u(this.i),r=t.next();!r.done;r=t.next()){r=r.value;var n=es(r);n&&null!=n.pts&&null!=n.dts?e.push(n):e.length&&(r=n?n.data:r)&&(n=e.pop(),n.data=Yi(n.data,r),e.push(n))}return e};n.getStartTime=function(){for(var e=null,t=u(this.Zb()),r=t.next();!r.done;r=t.next()){var n=r.value;n&&null!=n.pts&&(n=Math.min(n.dts,n.pts)/9e4,null==e||e>n)&&(e=n)}t=null;n=u(this.Xd());for(r=n.next();!r.done;r=n.next())(r=r.value)&&null!=r.pts&&(r=Math.min(r.dts,r.pts)/9e4,null==t||t>r)&&(t=r);return{audio:e,video:t}};n.Rd=function(){return{audio:this.l,video:this.j}};n.Ye=function(){var e=[];if("avc"!=this.j)return e;for(var t=this.Xd(),r=0;r<t.length;r++){var n=t[r],i=void 0;r+1<t.length&&(i=t[r+1]);e.push.apply(e,p(this.rf(n,i)))}return e};n.Qh=function(){_n("TsParser","Please use getVideoInfo function instead.");var e=this.Xe();return{height:e.height,width:e.width}};n.Xe=function(){var e={height:null,width:null,Ga:null},t=this.Ye();if(!t.length)return e;t=t.find((function(e){return 7==e.type}));if(!t)return e;t=new Va(t.data);var r=Ka(t,8),n=Ka(t,8),i=Ka(t,8);Xa(t);if(ns.includes(r)){var o=Ya(t);3===o&&Ga(t,1);Xa(t);Xa(t);Ga(t,1);if(1===Ka(t,1)){o=3!==o?8:12;for(var a=0;a<o;a++)1===Ka(t,1)&&(6>a?Qa(t,16):Qa(t,64))}}Xa(t);o=Ya(t);if(0===o)Ya(t);else if(1===o)for(Ga(t,1),Xa(t),Xa(t),o=Ya(t),a=0;a<o;a++)Xa(t);Xa(t);Ga(t,1);o=Ya(t);a=Ya(t);var s=Ka(t,1);0===s&&Ga(t,1);Ga(t,1);var l=0,c=0,u=0,p=0;1===Ka(t,1)&&(l=Ya(t),c=Ya(t),u=Ya(t),p=Ya(t));e.height=String((2-s)*(a+1)*16-2*u-2*p);e.width=String(16*(o+1)-2*l-2*c);e.Ga="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2);return e};function ts(e){return 0>rs(e)?!1:!0}function rs(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71==e[r]&&71==e[r+188]&&71==e[r+376])return r;r++}return-1}V("shaka.util.TsParser",Za);Za.syncOffset=rs;Za.probe=ts;Za.prototype.getVideoInfo=Za.prototype.Xe;Za.prototype.getVideoResolution=Za.prototype.Qh;Za.prototype.getVideoNalus=Za.prototype.Ye;Za.prototype.getCodecs=Za.prototype.Rd;Za.prototype.getStartTime=Za.prototype.getStartTime;Za.prototype.getVideoData=Za.prototype.Xd;Za.prototype.getAudioData=Za.prototype.Zb;Za.prototype.getMetadata=Za.prototype.getMetadata;Za.prototype.parseAvcNalus=Za.prototype.rf;Za.prototype.parse=Za.prototype.parse;Za.prototype.clearData=Za.prototype.clearData;Za.Timescale=9e4;var ns=[100,110,122,244,44,83,86,118,128,138,139,134];function is(e,t,r){this.g=null;this.i=-1;this.j=e;this.h=t;this.l=r;"undefined"===typeof libDPIModule&&Q("Could not Find LCEVC Library dependencies on this page");"undefined"===typeof LcevcDil?Q("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Q(LcevcDil.SupportObject.SupportError);"undefined"!==typeof LcevcDil&&"undefined"!==typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}is.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function os(e,t){var r=as;switch(t.mimeType){case"video/webm":r=ss;break;case"video/mp4":r=ls}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(r))}V("shaka.lcevc.Dil",is);is.prototype.release=is.prototype.release;var as=0,ss=1,ls=2;function cs(e,t,r,n){var i=this;this.l=e;this.G=null;this.C=t;this.h={};this.J={};this.Y={};this.g=null;this.P=!1;this.ma=r||function(){};this.L=n||null;this.j={};this.F=new fi;this.m={};this.H=null;this.I=new Vn;this.V="";this.i=us(this,this.I);this.s=!1;this.K=new hi((function(){return ps(i)}));this.B=!1;this.O="UNKNOWN";this.X=this.Z=!1;this.$=new Vn}function us(e,t){var r=new MediaSource;e.F.wa(r,"sourceopen",(function(){URL.revokeObjectURL(e.V);t.resolve()}));e.V=qs(r);e.l.src=e.V;return r}n=cs.prototype;n.destroy=function(){return this.K.destroy()};function ps(e){var t,r,n,i,o,a,s,l;return L((function(c){if(1==c.g){t=[];for(r in e.j)for(n=e.j[r],i=n[0],e.j[r]=n.slice(0,1),i&&t.push(i.p.catch(Oe)),o=u(n.slice(1)),a=o.next();!a.done;a=o.next())s=a.value,s.p.reject(new De(2,7,7003,void 0));e.g&&t.push(e.g.destroy());e.C&&t.push(e.C.destroy());for(l in e.m)t.push(e.m[l].destroy());return S(c,Promise.all(t),2)}e.F&&(e.F.release(),e.F=null);e.l&&(e.l.removeAttribute("src"),e.l.load(),e.l=null);e.G=null;e.i=null;e.g=null;e.C=null;e.h={};e.m={};e.H=null;e.j={};e.L=null;_(c)}))}n.init=function(e,t,r,n){t=void 0===t?!1:t;r=void 0===r?"UNKNOWN":r;n=void 0===n?!1:n;var i=this,o,a,s,l;return L((function(c){if(1==c.g)return S(c,i.I,2);i.B=t;i.O=r;i.Z=n;i.X=!i.B&&"HLS"==i.O&&!i.Z;o=u(e.keys());for(a=o.next();!a.done;a=o.next())s=a.value,l=e.get(s),ds(i,s,l),i.j[s]=[];_(c)}))};function ds(e,t,r){var n=Yt(r.mimeType,r.codecs);if(t==Re)hs(e,n,e.B,r.external);else{var i=e.G.forceTransmux;if(!rt(n)||!e.B&&rr.includes(n))i=!0;var o=Qt(r.mimeType,r.codecs);i&&(i=zt(o))&&(n=i(),e.m[t]=n,n=n.convertCodecs(t,o));o=n+e.G.sourceBufferExtraFeatures;mi(e.K);try{var a=e.i.addSourceBuffer(o)}catch(t){throw new De(2,3,3015,t,"The mediaSource_ status was"+e.i.readyState+"expected 'open'")}e.B&&(a.mode=Us);e.F.o(a,"error",(function(){e.j[t][0].p.reject(new De(2,3,3014,e.l.error?e.l.error.code:0))}));e.F.o(a,"updateend",(function(){return Os(e,t)}));e.h[t]=a;e.J[t]=n;e.Y[t]=!!r.drmInfos.length}}n.configure=function(e){this.G=e};function hs(e,t,r,n){e.g||(e.g=new nr(e.C));var i=e.g;n=n||e.P;e=e.O;"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=(0,ur[t])(),i.i.setSequenceMode?i.i.setSequenceMode(r):Q('Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):Q('Text parsers should have a "setManifestType" method!'),i.C=n)}function ms(e){return e.s?!1:e.i?"ended"==e.i.readyState:!0}function fs(e,t){e.s?e=null:t==Re?e=e.g.g:(e=bs(e,t),e=!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null);return e}function gs(e,t){return e.s?null:t==Re?e.g.h:xa(bs(e,t))}function ys(e,t,r){if(e.s)return 0;if(t==Re)return e=e.g,null==e.h||e.h<r?0:e.h-Math.max(r,e.g);e=bs(e,t);return Ca(e,r)}n.Bb=function(){var e={total:this.s?[]:Oa(this.l.buffered),audio:this.s?[]:Oa(bs(this,"audio")),video:this.s?[]:Oa(bs(this,"video")),text:[]};if(this.g){var t=this.g.g,r=this.g.h;null!=t&&null!=r&&e.text.push({start:t,end:r})}return e};function bs(e,t){try{return e.h[t].buffered}catch(e){return null}}function vs(e,t,r,n,i,o){var a=null,s=ut(r);if(rr.includes(i))o=Ra(s),o.length&&n&&((t=o.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&t.data&&(a=Math.round(t.data)/1e3),e.ma([{cueTime:n.startTime,data:s,frames:o,dts:n.startTime,pts:n.startTime}],0,n.endTime));else if(i.includes("/mp4")&&n&&0==n.timestampOffset&&n.h&&n.h.timescale){var l=n.h.timescale;if(!isNaN(l)){var c=0,u=!1;(new Ri).box("moof",Ni).box("traf",Ni).T("tfdt",(function(e){c=Ma(e.reader,e.version).baseMediaDecodeTime/l;u=!0;e.parser.stop()})).parse(r,!0);u&&(a=c)}}else i.includes("/mp4")||i.includes("/webm")||!ts(s)||(s=(new Za).parse(s),t=s.getStartTime()[t],null!=t&&(a=t),s=s.getMetadata(),s.length&&e.ma(s,o,n?n.endTime:null));return a}function ws(e,t,r,n,i,o,a,s){a=void 0===a?!1:a;s=void 0===s?!1:s;var l,c,u,p,d,h,m,f,g,y,b;return L((function(v){switch(v.g){case 1:l=Ne;if(t!=l.na){v.D(2);break}if(!e.B){v.D(3);break}return S(v,e.$,4);case 4:c=v.h,e.g.B=c;case 3:return S(v,or(e.g,r,n?n.startTime:null,n?n.endTime:null),5);case 5:return v.return();case 2:u=e.h[t].timestampOffset;p=e.J[t];e.m[t]&&(p=e.m[t].getOrginalMimeType());if(n&&(d=vs(e,t,r,n,p,u),null!=d)){h=n.startTime-d;m=Math.abs(u-h);if(.1<=m||a||s)u=h,e.X&&(ks(e,t,(function(){return Cs(e,t)})),ks(e,t,(function(){return Ts(e,t,u)})));f=t==l.Na||!(l.Na in e.h);e.B&&f&&e.$.resolve(u)}o&&t==l.Na&&(e.g||hs(e,"application/cea-608",e.B,!1),e.H||(g=p.split(";",1)[0],e.H=new mt(g)),n?(y=e.H.j(r),y.length&&cr(e.g,y,n.startTime,n.endTime,u)):e.H.init(r));if(!e.m[t]){v.D(6);break}return S(v,e.m[t].transmux(r,i,n,e.i.duration,t),7);case 7:r=v.h;case 6:return r=js(e,r,n?n.startTime:null,t),n&&e.B&&t!=l.na&&(a||s)&&(b=n.startTime,ks(e,t,(function(){return Cs(e,t)})),ks(e,t,(function(){return Ts(e,t,b)}))),S(v,ks(e,t,(function(){var n=r;if("video"==t&&e.L){var i=e.L;i.g&&i.g.appendBuffer(n,"video",i.i)}e.h[t].appendBuffer(n)})),8);case 8:_(v)}}))}function Es(e,t){var r=gs(e,"video")||0;sr(e.g,t,r)}function Ss(e){e.g&&sr(e.g,"",0)}n.remove=function(e,t,r){var n=this,i;return L((function(o){i=Ne;return e==i.na?S(o,n.g.remove(t,r),0):S(o,ks(n,e,(function(){r<=t?Os(n,e):n.h[e].remove(t,r)})),0)}))};function _s(e,t){var r;return L((function(n){r=Ne;return t==r.na?e.g?S(n,e.g.remove(0,Infinity),0):n.return():S(n,ks(e,t,(function(){var r=e.i.duration;0>=r?Os(e,t):e.h[t].remove(0,r)})),0)}))}n.flush=function(e){var t=this,r;return L((function(n){r=Ne;return e==r.na?n.return():S(n,ks(t,e,(function(){t.l.currentTime-=.001;Os(t,e)})),0)}))};function xs(e,t,r,n,i,o,a,s){var l,c,u;return L((function(p){if(1==p.g){l=Ne;if(t==l.na)return o||(e.g.B=r),ar(e.g,n,i),p.return();c=[];return S(p,Ms(e,t,a,s),2)}(u=p.h)||c.push(ks(e,t,(function(){return Cs(e,t)})));o||c.push(ks(e,t,(function(){return Ts(e,t,r)})));c.push(ks(e,t,(function(){e.h[t].appendWindowStart=0;e.h[t].appendWindowEnd=i;e.h[t].appendWindowStart=n;Os(e,t)})));return S(p,Promise.all(c),0)}))}function Ds(e,t,r){var n;return L((function(i){n=Ne;if(t==n.na)return i.return();ks(e,t,(function(){return Cs(e,t)}));return S(i,ks(e,t,(function(){return Ts(e,t,r)})),0)}))}n.endOfStream=function(e){var t=this;return L((function(r){return S(r,Ps(t,(function(){ms(t)||"closed"===t.i.readyState||(e?t.i.endOfStream(e):t.i.endOfStream())})),0)}))};n.Ra=function(e){var t=this;return L((function(r){return S(r,Ps(t,(function(){if(e<t.i.duration)for(var r in t.h){var n={start:function(){},p:new Vn};t.j[r].unshift(n)}t.i.duration=e})),0)}))};n.getDuration=function(){return this.i.duration};function Cs(e,t){var r=e.h[t].appendWindowStart,n=e.h[t].appendWindowEnd;e.h[t].abort();e.h[t].appendWindowStart=r;e.h[t].appendWindowEnd=n;Os(e,t)}function Ts(e,t,r){0>r&&(r+=.001);e.h[t].timestampOffset=r;Os(e,t)}function Os(e,t){if(!e.s){var r=e.j[t][0];r&&(r.p.resolve(),As(e,t))}}function ks(e,t,r){mi(e.K);r={start:r,p:new Vn};e.j[t].push(r);1==e.j[t].length&&Is(e,t);return r.p}function Ps(e,t){var r,n,i,o,a,s,l;return L((function(c){switch(c.g){case 1:mi(e.K);r=[];n={};for(i in e.h)n.Uc=new Vn,o={start:function(e){return function(){return e.Uc.resolve()}}(n),p:n.Uc},e.j[i].push(o),r.push(n.Uc),1==e.j[i].length&&o.start(),n={Uc:n.Uc};x(c,2);return S(c,Promise.all(r),4);case 4:C(c,3);break;case 2:throw a=T(c),a;case 3:return x(c,5,6),S(c,t(),6);case 6:O(c);for(s in e.h)As(e,s);k(c,0);break;case 5:throw l=T(c),new De(2,3,3015,l,e.l.error||"No error in the media element")}}))}function As(e,t){e.j[t].shift();Is(e,t)}function Is(e,t){var r=e.j[t][0];if(r)try{r.start()}catch(n){"QuotaExceededError"==n.name?r.p.reject(new De(2,3,3017,t)):r.p.reject(new De(2,3,3015,n,e.l.error||"No error in the media element")),As(e,t)}}function js(e,t,r,n){var i=e.Y[n];e.G.insertFakeEncryptionInInit&&null==r&&i&&(yr()||gr())&&"mp4"==e.J[n].split(";")[0].split("/")[1]&&(t=fa(t));return t}function Rs(t,r,n,i){return ks(t,r,(function(){r!==Re&&(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType&&(t.m[r]&&t.m[r].destroy(),i&&(t.m[r]=i),t.h[r].changeType(n+t.G.sourceBufferExtraFeatures),t.J[r]=n),Os(t,r))}))}function Ns(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,_;return L((function(x){switch(x.g){case 1:e.s=!0;r=e.l.currentTime;D(x);e.F.Ub();n=[];for(i in e.m)n.push(e.m[i].destroy());for(o in e.j)for(a=e.j[o],s=a[0],e.j[o]=a.slice(0,1),s&&n.push(s.p.catch(Oe)),l=u(a.slice(1)),c=l.next();!c.done;c=l.next())p=c.value,p.p.reject(new De(2,7,7003,void 0));for(d in e.h){h=e.h[d];try{e.i.removeSourceBuffer(h)}catch(e){}}return S(x,Promise.all(n),4);case 4:return e.m={},e.j={},e.h={},m=e.i.duration,e.I=new Vn,e.i=us(e,e.I),S(x,e.I,5);case 5:e.i.duration=m;f=new Vn;g=e.i.sourceBuffers;y=t.size;b=0;e.F.o(g,"addsourcebuffer",(function(){b++;b===y&&f.resolve()}));v=u(t.keys());for(w=v.next();!w.done;w=v.next())E=w.value,_=t.get(E),ds(e,E,_);e.l.currentTime=r;return S(x,f,2);case 2:O(x),e.s=!1,k(x,0)}}))}function Ls(e,t){return Ps(e,(function(){return Ns(e,t)}))}function Ms(t,r,n,i){var o,a,s,l,c,u,p,d,h;return L((function(m){if(1==m.g){o=tr(er(t.J[r]))[0];a=t.J[r].split(";")[0];l=Yt(n.mimeType,n.codecs);c=t.G.forceTransmux;if(!rt(l)||!t.B&&rr.includes(l))c=!0;u=Qt(n.mimeType,n.codecs);c&&(p=zt(u))&&(s=p(),l=s.convertCodecs(r,u));d=tr(er(l))[0];h=l.split(";")[0];if(o===d&&a===h)return m.return(!1);if(e.SourceBuffer&&SourceBuffer.prototype&&SourceBuffer.prototype.changeType)return S(m,Rs(t,r,l,s),3);s&&s.destroy();return S(m,Ls(t,i),3)}return m.return(!0)}))}var qs=e.URL.createObjectURL,Us="sequence";function Hs(e,t,r){this.i=e;this.m=t;this.B=this.j=Infinity;this.g=1;this.h=this.l=null;this.s=0;this.G=!0;this.H=0;this.C=void 0===r?!0:r;this.I=0;this.F=!1}n=Hs.prototype;n.getDuration=function(){return this.j};n.Dh=function(){return this.g};n.Kg=function(e){this.i=e};n.Ra=function(e){this.j=e};n.Hh=function(){return this.i};n.Gg=function(e){this.s=e};n.Jc=function(e){this.G=e};n.xe=function(e){this.B=e};n.Hg=function(e){this.m=e};n.sh=function(){return this.m};n.Ag=function(e,t){if(0!=e.length){var r=e[e.length-1].end+t;this.ie(e[0].start+t);this.g=e.reduce((function(e,t){return Math.max(e,t.end-t.start)}),this.g);this.h=Math.max(this.h,r);null!=this.i&&this.C&&!this.F&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}};n.sd=function(e){if(0!=e.length){var t=e[0].startTime,r=e[0].endTime,n=(Date.now()+this.s)/1e3;e=u(e);for(var i=e.next();!i.done;i=e.next())i=i.value,n<i.startTime||(t=Math.min(t,i.startTime),r=Math.max(r,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime));this.ie(t);this.h=Math.max(this.h,r);null!=this.i&&this.C&&!this.F&&(this.i=n-this.h-this.g)}};n.be=function(){this.F=!0};n.ie=function(e){this.l=null==this.l?e:Math.min(this.l,e)};n.mf=function(e){this.g=Math.max(this.g,e)};n.offset=function(e){null!=this.l&&(this.l+=e);null!=this.h&&(this.h+=e)};n.S=function(){return Infinity==this.j&&!this.G};n.hc=function(){return Infinity!=this.j&&!this.G};n.Db=function(){return Math.max(this.H,this.cc()-this.B)};n.Mg=function(e){this.H=e};n.cc=function(){return this.S()||this.hc()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.I,this.j):this.h?Math.min(this.h,this.j):this.j};n.hd=function(e){var t=Math.max(this.l,this.H);return Infinity==this.B?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.cc()-this.B+e,this.Cb()))};n.Ac=function(){return this.hd(0)};n.Cb=function(){return Math.max(0,this.cc()-(this.S()||this.hc()?this.m:0))};n.Qg=function(){return null==this.i||null!=this.h&&this.C?!1:!0};n.Fg=function(e){this.I=e};V("shaka.media.PresentationTimeline",Hs);Hs.prototype.setAvailabilityTimeOffset=Hs.prototype.Fg;Hs.prototype.usingPresentationStartTime=Hs.prototype.Qg;Hs.prototype.getSeekRangeEnd=Hs.prototype.Cb;Hs.prototype.getSeekRangeStart=Hs.prototype.Ac;Hs.prototype.getSafeSeekRangeStart=Hs.prototype.hd;Hs.prototype.getSegmentAvailabilityEnd=Hs.prototype.cc;Hs.prototype.setUserSeekStart=Hs.prototype.Mg;Hs.prototype.getSegmentAvailabilityStart=Hs.prototype.Db;Hs.prototype.isInProgress=Hs.prototype.hc;Hs.prototype.isLive=Hs.prototype.S;Hs.prototype.offset=Hs.prototype.offset;Hs.prototype.notifyMaxSegmentDuration=Hs.prototype.mf;Hs.prototype.notifyMinSegmentStartTime=Hs.prototype.ie;Hs.prototype.lockStartTime=Hs.prototype.be;Hs.prototype.notifySegments=Hs.prototype.sd;Hs.prototype.notifyTimeRange=Hs.prototype.Ag;Hs.prototype.getDelay=Hs.prototype.sh;Hs.prototype.setDelay=Hs.prototype.Hg;Hs.prototype.setSegmentAvailabilityDuration=Hs.prototype.xe;Hs.prototype.setStatic=Hs.prototype.Jc;Hs.prototype.setClockOffset=Hs.prototype.Gg;Hs.prototype.getPresentationStartTime=Hs.prototype.Hh;Hs.prototype.setDuration=Hs.prototype.Ra;Hs.prototype.setPresentationStartTime=Hs.prototype.Kg;Hs.prototype.getMaxSegmentDuration=Hs.prototype.Dh;Hs.prototype.getDuration=Hs.prototype.getDuration;function Fs(e,t,r){this.l=r;this.j=e;this.B=Vs(e);this.g=e.g.currentTime;this.m=Date.now()/1e3;this.h=!1;this.s=0;this.C=t;this.i=function(){}}Fs.prototype.release=function(){this.l=this.j=null;this.i=function(){}};function Bs(e,t){e.i=t}function zs(e){this.g=e}function Vs(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;e=u(Oa(e.g.buffered));for(var r=e.next();!r.done;r=e.next())if(r=r.value,!(t<r.start-.1||t>r.end-.5)){t=!0;break e}t=!1}return t}function Ws(e,t,r,n,i){var o=this;this.C=i;this.g=e;this.F=t;this.B=r;this.l=new fi;this.j=!1;this.H=e.readyState;this.G=this.i=0;this.h=n;this.s=!1;this.l.o(e,"waiting",(function(){return Gs(o)}));this.m=new dr((function(){Gs(o)})).ha(this.B.gapJumpTimerTime)}Ws.prototype.release=function(){this.l&&(this.l.release(),this.l=null);null!=this.m&&(this.m.stop(),this.m=null);this.h&&(this.h.release(),this.h=null);this.g=this.F=this.C=null};Ws.prototype.pf=function(){this.s=!0;Gs(this)};function Gs(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.H&&(e.H=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var r=t.j,n=Vs(r),i=r.g.currentTime,o=Date.now()/1e3;if(t.g!=i||t.B!=n)t.m=o,t.g=i,t.B=n,t.h=!1;i=o-t.m;if(n=i>=t.C&&n&&!t.h)t.i(t.g,i),t.h=!0,t.g=r.g.currentTime,t.s++,t.l(new G("stalldetected"));t=!n}t&&(t=e.g.currentTime,r=e.g.buffered,n=Ta(r,t,e.B.gapDetectionThreshold),null==n||0==n&&!e.s||(i=r.start(n),i>=e.F.Cb()||.001>i-t||(0!=n&&r.end(n-1),e.g.currentTime=i,t==e.i&&(e.i=i),e.G++,e.C(new G("gapjumped")))))}}}function Ks(e,t,r,n){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?n():(t=$s.value().get(t),r.wa(e,t,n))}var $s=new wi((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function Xs(e,t,r,n){var i=this;this.g=e;this.m=t;this.B=r;this.l=null;this.j=function(){null==i.l&&(i.l=n());return i.l};this.s=!1;this.h=new fi;this.i=new el(e);Ks(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){Js(i,i.j())}))}Xs.prototype.release=function(){this.h&&(this.h.release(),this.h=null);null!=this.i&&(this.i.release(),this.i=null);this.m=function(){};this.g=null};function Ys(e){return e.s?e.g.currentTime:e.j()}function Qs(e,t){0<e.g.readyState?tl(e.i,t):Ks(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){Js(e,e.j())}))}function Js(e,t){.001>Math.abs(e.g.currentTime-t)?Zs(e):(e.h.wa(e.g,"seeking",(function(){Zs(e)})),tl(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Zs(e){e.s=!0;e.h.o(e.g,"seeking",(function(){return e.m()}));e.B(e.g.currentTime)}function el(e){var t=this;this.h=e;this.m=10;this.l=this.j=this.i=0;this.g=new dr((function(){0>=t.i?t.g.stop():t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}el.prototype.release=function(){this.g&&(this.g.stop(),this.g=null);this.h=null};function tl(e,t){e.j=e.h.currentTime;e.l=t;e.i=e.m;e.h.currentTime=t;e.g.ha(.1)}function rl(e){this.g=e;this.j=!1;this.h=null;this.i=new fi}n=rl.prototype;n.Ne=function(){function e(){null==t.h||0==t.h?t.j=!0:(t.i.wa(t.g,"seeking",(function(){t.j=!0})),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Ks(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){e()}))};n.release=function(){this.i&&(this.i.release(),this.i=null);this.g=null};n.Oe=function(e){this.h=this.j?this.h:e};n.Jd=function(){return(this.j?this.g.currentTime:this.h)||0};n.Wf=function(){return 0};n.Vf=function(){return 0};n.zg=function(){};function nl(e,t,r,n,i,o){var a=this;this.i=e;this.g=t.presentationTimeline;this.F=t.minBufferTime||0;this.l=r;this.C=i;this.B=null;this.s=sl(e,r,o);this.j=new Ws(e,t.presentationTimeline,r,this.s,o);this.h=new Xs(e,(function(){e:{var e=a.j;e.j=!0;e.s=!1;var t=Ys(a.h);e=ol(a,t);if(.001<Math.abs(e-t)&&(t=Date.now()/1e3,!a.B||a.B<t-1)){a.B=t;Qs(a.h,e);e=void 0;break e}a.C();e=void 0}return e}),(function(e){var t=a.j;t.g.seeking&&!t.j&&(t.j=!0,t.i=e)}),(function(){var e=n;null==e?e=Infinity>a.g.getDuration()?a.g.Ac():a.g.Cb():0>e&&(e=a.g.Cb()+e);return il(a,al(a,e))}));this.m=new dr((function(){if(0!=a.i.readyState&&!a.i.paused){var e=Ys(a.h),t=a.g.Ac(),r=a.g.Cb();3>r-t&&(t=r-3);e<t&&(e=ol(a,e),a.i.currentTime=e)}}))}n=nl.prototype;n.Ne=function(){this.m.ha(.25)};n.release=function(){this.h&&(this.h.release(),this.h=null);this.j&&(this.j.release(),this.j=null);this.m&&(this.m.stop(),this.m=null);this.i=this.h=this.g=this.l=null;this.C=function(){}};n.Oe=function(e){Qs(this.h,e)};n.Jd=function(){var e=Ys(this.h);return 0<this.i.readyState&&!this.i.paused?al(this,e):e};n.Wf=function(){return this.s?this.s.s:0};n.Vf=function(){return this.j.G};n.zg=function(){this.j.pf()};function il(e,t){var r=e.g.getDuration();return t>=r?r-e.l.durationBackoff:t}function ol(e,t){var r=Math.max(e.F,e.l.rebufferingGoal),n=e.l.safeSeekOffset,i=e.g.Ac(),o=e.g.Cb(),a=e.g.getDuration();3>o-i&&(i=o-3);var s=e.g.hd(r),l=e.g.hd(n);r=e.g.hd(r+n);return t>=a?il(e,t):t>o?o:t<i?Da(e.i.buffered,l)?l:r:t>=s||Da(e.i.buffered,t)?t:r}function al(e,t){var r=e.g.Ac();if(t<r)return r;e=e.g.Cb();return t>e?e:t}function sl(e,t,r){if(!t.stallEnabled)return null;var n=t.stallSkip;t=new Fs(new zs(e),t.stallThreshold,r);Bs(t,(function(){n?e.currentTime+=n:(e.pause(),e.play())}));return t}function ll(e){this.g=e;this.l=null;this.i=0;this.m=!1}n=ll.prototype;n.bc=function(){return this.g.length};n.release=function(){this.m||(this.g=[],this.l&&this.l.stop(),this.l=null)};n.bi=function(){this.m=!0};function cl(e,t){e=u(e.g);for(var r=e.next();!r.done;r=e.next())t(r.value)}n.find=function(e){for(var t=this.g.length-1,r=t;0<=r;--r){var n=this.g[r],i=r<t?this.g[r+1].startTime:n.endTime;if(e>=n.startTime&&e<i)return r+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null};n.get=function(e){if(0==this.g.length)return null;e-=this.i;return 0>e||e>=this.g.length?null:this.g[e]};n.offset=function(e){if(!this.m)for(var t=u(this.g),r=t.next();!r.done;r=t.next())r.value.offset(e)};n.fe=function(e){if(!this.m&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t}));this.g.push.apply(this.g,p(e))}};n.rd=function(e,t){var r=this;e=e.filter((function(e){return e.endTime>t&&(0==r.g.length||e.endTime>r.g[0].startTime)}));this.fe(e);this.ob(t)};n.ob=function(e){if(!this.m){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e}));this.i+=t-this.g.length}};n.wc=function(e,t,r){r=void 0===r?!1:r;if(!this.m){for(;this.g.length;)if(this.g[this.g.length-1].startTime>=t)this.g.pop();else break;for(;this.g.length;)if(this.g[0].endTime<=e)this.g.shift(),r||this.i++;else break;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new Ea(e.startTime,t,e.H,e.Sa,e.za,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.G,e.g,e.status,e.B),this.g[this.g.length-1].l=e.l)}};n.Ae=function(e,t){var r=this;this.m||(this.l&&this.l.stop(),this.l=new dr((function(){var e=t();e?r.g.push.apply(r.g,p(e)):(r.l.stop(),r.l=null)})),this.l.ha(e))};ll.prototype[Symbol.iterator]=function(){return this.$b(0)};ll.prototype.$b=function(e){var t=this.find(e);if(null==t)return null;t--;var r=this.get(t+1),n=-1;if(r&&0<r.i.length)for(var i=r.i.length-1;0<=i;--i){var o=r.i[i];if(e>=o.startTime&&e<o.endTime){for(;i&&!o.C;)i--,o=r.i[i];if(!o.C)return Y("No independent partial segment found!"),null;t++;n=i-1;break}}return new pl(this,t,n)};function ul(e,t,r){return new ll([new Ea(e,e+t,(function(){return r}),0,null,null,e,e,e+t)])}V("shaka.media.SegmentIndex",ll);ll.forSingleSegment=ul;ll.prototype.getIteratorForTime=ll.prototype.$b;ll.prototype.updateEvery=ll.prototype.Ae;ll.prototype.fit=ll.prototype.wc;ll.prototype.evict=ll.prototype.ob;ll.prototype.mergeAndEvict=ll.prototype.rd;ll.prototype.offset=ll.prototype.offset;ll.prototype.get=ll.prototype.get;ll.prototype.find=ll.prototype.find;ll.prototype.markImmutable=ll.prototype.bi;ll.prototype.release=ll.prototype.release;function pl(e,t,r){this.i=e;this.g=t;this.h=r}pl.prototype.fh=function(){return this.g};pl.prototype.current=function(){var e=this.i.get(this.g);e&&0<e.i.length&&e.Oa().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g));return e&&0<e.i.length?e.i[this.h]:e};pl.prototype.next=function(){var e=this.i.get(this.g);e&&0<e.i.length?(this.h++,e.Oa().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0);e=this.current();return{value:e,done:!e}};V("shaka.media.SegmentIterator",pl);pl.prototype.next=pl.prototype.next;pl.prototype.current=pl.prototype.current;pl.prototype.currentPosition=pl.prototype.fh;function dl(){ll.call(this,[]);this.h=[]}b(dl,ll);n=dl.prototype;n.clone=function(){var e=new dl;e.h=this.h.slice();return e};n.release=function(){for(var e=u(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]};n.find=function(e){for(var t=0,r=u(this.h),n=r.next();!n.done;n=r.next()){n=n.value;var i=n.find(e);if(null!=i)return i+t;t+=n.i+n.bc()}return null};n.get=function(e){for(var t=0,r=u(this.h),n=r.next();!n.done;n=r.next()){n=n.value;var i=n.get(e-t);if(i)return i;t+=n.i+n.bc()}return null};n.offset=function(){};n.fe=function(){};n.ob=function(){};n.rd=function(){};n.wc=function(){};n.Ae=function(){};V("shaka.media.MetaSegmentIndex",dl);dl.prototype.updateEvery=dl.prototype.Ae;dl.prototype.fit=dl.prototype.wc;dl.prototype.mergeAndEvict=dl.prototype.rd;dl.prototype.evict=dl.prototype.ob;dl.prototype.merge=dl.prototype.fe;dl.prototype.offset=dl.prototype.offset;dl.prototype.get=dl.prototype.get;dl.prototype.find=dl.prototype.find;dl.prototype.release=dl.prototype.release;function hl(e){var t=this;this.g=e;this.j=!1;this.i=this.g.Wd();this.h=new dr((function(){t.g.yg(.25*t.i)}))}hl.prototype.release=function(){this.h&&(this.h.stop(),this.h=null);this.g=null};hl.prototype.set=function(e){this.i=e;ml(this)};hl.prototype.Sd=function(){return this.g.Sd()};function ml(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{e.g.Wd()!=t&&e.g.Df(t);return}catch(e){}e.h.ha(.25);0!=e.g.Wd()&&e.g.Df(0)}function fl(e){var t=this;this.h=e;this.g=new Set;this.i=new dr((function(){gl(t,!1)})).ha(.25)}fl.prototype.release=function(){this.i.stop();for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function gl(e,t){for(var r=u(e.g),n=r.next();!n.done;n=r.next())n.value.j(e.h.currentTime,t)}function yl(e){oe.call(this);this.g=new Map;this.h=e}b(yl,oe);yl.prototype.release=function(){this.g.clear();oe.prototype.release.call(this)};function bl(e,t){var r=e.g.get(t);r||(r={ud:[],gg:null,contentType:t},e.g.set(t,r));return r}function vl(e,t,r){var n=bl(e,t.contentType);wl(e,n);e={jf:t,position:r};n=n.ud;t=n.findIndex((function(e){return e.position>=r}));0<=t?n.splice(t,n[t].position==r?1:0,e):n.push(e)}yl.prototype.j=function(e){for(var t=u(this.g.values()),r=t.next();!r.done;r=t.next()){r=r.value;e:{var n=r.ud;for(var i=n.length-1;0<=i;i--){var o=n[i];if(o.position<=e){n=o.jf;break e}}n=null}if(i=n)i=r.gg,i=!(i===n||i&&n&&i.bandwidth==n.bandwidth&&i.audioSamplingRate==n.audioSamplingRate&&i.codecs==n.codecs&&i.contentType==n.contentType&&i.frameRate==n.frameRate&&i.height==n.height&&i.mimeType==n.mimeType&&i.channelsCount==n.channelsCount&&i.pixelAspectRatio==n.pixelAspectRatio&&i.width==n.width);if(i)e:{i=e;o=n.contentType;if((o=this.h()[o])&&0<o.length){var a=o[o.length-1].end;if(i>=o[0].start&&i<a){i=!0;break e}}i=!1}i&&(r.gg=n,JSON.stringify(n),r=new G("qualitychange",new Map([["quality",n],["position",e]])),this.dispatchEvent(r))}};function wl(e,t){if((e=e.h()[t.contentType])&&0<e.length){var r=e[0].start,n=e[e.length-1].end,i=t.ud;t.ud=i.filter((function(e,t){return e.position<=r&&t+1<i.length&&i[t+1].position<=r||e.position>=n?!1:!0}))}else t.ud=[]}function El(e){oe.call(this);var t=this;this.g=new Set;this.i=e;this.h=new dr((function(){for(var e=t.i(),r=u(t.g),n=r.next();!n.done;n=r.next())n=n.value,n.endTime<e.start&&(t.g.delete(n),n=new G("regionremove",new Map([["region",n]])),t.dispatchEvent(n))})).ha(2)}b(El,oe);El.prototype.release=function(){this.g.clear();this.h.stop();oe.prototype.release.call(this)};function Sl(e,t){oe.call(this);var r=this;this.i=e;this.l=t;this.g=new Map;this.m=[{sc:null,rc:Dl,fc:function(e,t){return _l(r,"enter",e,t)}},{sc:xl,rc:Dl,fc:function(e,t){return _l(r,"enter",e,t)}},{sc:Cl,rc:Dl,fc:function(e,t){return _l(r,"enter",e,t)}},{sc:Dl,rc:xl,fc:function(e,t){return _l(r,"exit",e,t)}},{sc:Dl,rc:Cl,fc:function(e,t){return _l(r,"exit",e,t)}},{sc:xl,rc:Cl,fc:function(e,t){return _l(r,"skip",e,t)}},{sc:Cl,rc:xl,fc:function(e,t){return _l(r,"skip",e,t)}}];this.h=new fi;this.h.o(this.i,"regionremove",(function(e){r.g.delete(e.region)}))}b(Sl,oe);Sl.prototype.release=function(){this.i=null;this.g.clear();this.h.release();this.h=null;oe.prototype.release.call(this)};Sl.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var r=u(this.i.g),n=r.next();!n.done;n=r.next()){n=n.value;var i=this.g.get(n),o=e<n.startTime?xl:e>n.endTime?Cl:Dl;this.g.set(n,o);for(var a=u(this.m),s=a.next();!s.done;s=a.next())s=s.value,s.sc==i&&s.rc==o&&s.fc(n,t)}}};function _l(e,t,r,n){t=new G(t,new Map([["region",r],["seeking",n]]));e.dispatchEvent(t)}var xl=1,Dl=2,Cl=3;function Tl(e,t,r){this.j=e;this.h=t;this.i=0;this.l=r;this.g=new Map}function Ol(e,t){if(e.h.segmentIndex){var r=e.h.segmentIndex.$b(Math.max(t.startTime,e.i));if(r)for(;e.g.size<e.j&&null!=t;){var n=!0;t.m&&null!=t.za&&(n=!1);2==t.dc()&&(n=!1);n&&!e.g.has(t)&&(n=new Il(e.l),jl(n,t,e.h),e.g.set(t,n));e.i=t.startTime;t=r.next().value}}}function kl(e){if(0!==e.g.size){for(var t=u(e.g.keys()),r=t.next();!r.done;r=t.next())(r=r.value)&&Al(e,r);e.i=0}}function Pl(e,t){t&&t!==e.h&&(kl(e),e.h=t)}function Al(e,t){var r=e.g.get(t);e.g.delete(t);r&&r.abort()}function Il(e){this.i=e;this.g=this.h=null}function jl(e,t,r){e.g=e.i(t,r,(function(t){return L((function(r){return e.h?S(r,e.h(t),0):r.D(0)}))}))}Il.prototype.abort=function(){this.g&&this.g.abort()};function Rl(e,t,r,n,i){e=ii(e,n,i);if(0!=t||null!=r)e.headers.Range=r?"bytes="+t+"-"+r:"bytes="+t+"-";return e}function Nl(e,t){var r=this;this.g=t;this.m=e;this.i=null;this.C=1;this.s=this.j=null;this.H=0;this.G=!1;this.h=new Map;this.F=!1;this.I=null;this.B=!1;this.l=new hi((function(){return Ll(r)}))}n=Nl.prototype;n.destroy=function(){return this.l.destroy()};function Ll(e){var t,r,n,i;return L((function(o){if(1==o.g){t=[];r=u(e.h.values());for(n=r.next();!n.done;n=r.next())i=n.value,cc(i),t.push(uc(i));return S(o,Promise.all(t),2)}e.h.clear();e.g=null;e.m=null;e.i=null;_(o)}))}n.configure=function(e){this.i=e;this.I=new Fn({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=u(this.h.keys()),r=t.next();!r.done;r=t.next())if(r=this.h.get(r.value),r.Qa){var n=r.Qa,i=e.segmentPrefetchLimit;n.j=i;for(var o=Array.from(n.g.keys());o.length>i;){var a=o.pop();a&&Al(n,a)}0<e.segmentPrefetchLimit||(r.Qa=null)}else 0<e.segmentPrefetchLimit&&(r.Qa=Kl(this,r.stream))};n.start=function(){var e=this;return L((function(t){if(1==t.g)return S(t,Wl(e),2);mi(e.l);e.F=!0;_(t)}))};function Ml(e,t){var r,n,i,o,a,s,l;L((function(c){switch(c.g){case 1:return r=Ne,e.H++,n=e.H,x(c,2),S(c,_s(e.g.W,r.na),4);case 4:C(c,3);break;case 2:if(i=T(c),e.g)e.g.onError(i);case 3:o=Yt(t.mimeType,t.codecs),hs(e.g.W,o,e.m.sequenceMode,t.external),a=e.g.W.C,(s=a.isTextVisible()||e.i.alwaysStreamText)&&e.H==n&&(l=Gl(e,t),e.h.set(r.na,l),lc(e,l,0)),_(c)}}))}function ql(e){var t=e.h.get(Re);t&&(cc(t),uc(t).catch((function(){})),e.h.delete(Re));e.s=null}function Ul(e,t){var r=e.h.get("video");if(r){var n=r.stream;if(n)if(t)(t=n.trickModeVideo)&&!r.pc&&(Bl(e,t,!1,0,!1),r.pc=n);else if(n=r.pc)r.pc=null,Bl(e,n,!0,0,!1)}}function Hl(e,t,r,n,i,o){r=void 0===r?!1:r;n=void 0===n?0:n;i=void 0===i?!1:i;o=void 0===o?!1:o;e.j=t;e.F&&(t.video&&Bl(e,t.video,r,n,i,o),t.audio&&Bl(e,t.audio,r,n,i,o))}function Fl(e,t){L((function(r){if(1==r.g)return e.s=t,e.F?t.segmentIndex?r.D(2):S(r,t.createSegmentIndex(),2):r.return();Bl(e,t,!0,0,!1);_(r)}))}function Bl(e,t,r,n,i,o){var a=e.h.get(t.type);a||t.type!=Re?a&&(a.pc&&(t.trickModeVideo?(a.pc=t,t=t.trickModeVideo):a.pc=null),a.stream!=t||i)&&(a.Qa&&Pl(a.Qa,t),t.type==Re&&(i=Yt(t.mimeType,t.codecs),hs(e.g.W,i,e.m.sequenceMode,t.external)),a.stream.closeSegmentIndex&&a.stream.closeSegmentIndex(),a.stream=t,a.ba=null,a.Xf=!!o,r&&(a.bd?a.Be=!0:a.Ma?(a.Wb=!0,a.Pd=n,a.Be=!0):(cc(a),sc(e,a,!0,n).catch((function(t){if(e.g)e.g.onError(t)})))),zl(e,a).catch((function(t){if(e.g)e.g.onError(t)}))):Ml(e,t)}function zl(e,t){var r,n;return L((function(i){if(1==i.g){if(!t.Pa)return i.return();r=t.stream;n=t.Pa;return r.segmentIndex?i.D(2):S(i,r.createSegmentIndex(),2)}if(t.Pa!=n||t.stream!=r)return i.return();var o=e.g.Vd();var a=gs(e.g.W,t.type),s=t.stream.segmentIndex.find(t.Ka?t.Ka.endTime:o),l=null==s?null:t.stream.segmentIndex.get(s);s=l?l.za?l.za-l.Sa:null:null;l&&!s&&(s=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8);s?((l=l.h)&&(s+=(l.za?l.za-l.Sa:null)||0),l=e.g.getBandwidthEstimate(),o=8*s/l<(a||0)-o-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.Pa.h.g>s?!0:!1):o=!1;o&&t.Pa.abort();_(i)}))}n.xd=function(){if(this.g)for(var e=this.g.Vd(),t=u(this.h.keys()),r=t.next();!r.done;r=t.next()){var n=r.value;r=this.h.get(n);var i=null;r.ba&&(i=r.ba.current());if(!i||i.startTime>e||i.endTime<e)r.ba=null;i=this.g.W;i.s?i=!1:n==Re?(i=i.g,i=null==i.g||null==i.h?!1:e>=i.g&&e<i.h):(i=bs(i,n),i=Da(i,e));i||((null!=gs(this.g.W,n)||r.Ma)&&Vl(this,r),r.Pa&&(r.Pa.abort(),r.Pa=null),n===Re&&(n=this.g.W,n.H&&n.H.i()),r.xd=!0)}};function Vl(e,t){t.bd||t.Wb||(t.Ma?(t.Wb=!0,t.Pd=0):null==fs(e.g.W,t.type)?null==t.ub&&lc(e,t,0):(cc(t),sc(e,t,!1,0).catch((function(t){if(e.g)e.g.onError(t)}))))}function Wl(e){var t,r,n,i,o,a,s,l,c;return L((function(p){if(1==p.g){t=Ne;if(!e.j)throw new De(2,5,5006);r=new Map;n=new Set;e.j.audio&&(r.set(t.Ob,e.j.audio),n.add(e.j.audio));e.j.video&&(r.set(t.Na,e.j.video),n.add(e.j.video));e.s&&(r.set(t.na,e.s),n.add(e.s));i=e.g.W;return S(p,i.init(r,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}mi(e.l);e.updateDuration();o=u(r.keys());for(a=o.next();!a.done;a=o.next())s=a.value,l=r.get(s),e.h.has(s)||(c=Gl(e,l),e.h.set(s,c),lc(e,c,0));_(p)}))}function Gl(e,t){return{stream:t,type:t.type,ba:null,Qa:Kl(e,t),Ka:null,Ec:null,ef:null,cf:null,bf:null,pc:null,endOfStream:!1,Ma:!1,ub:null,Wb:!1,Pd:0,Be:!1,bd:!1,xd:!0,lf:!1,tf:!1,md:!1,Pa:null}}function Kl(e,t){return"video"!==t.type&&"audio"!==t.type?null:0<e.i.segmentPrefetchLimit?new Tl(e.i.segmentPrefetchLimit,t,(function(t,r,n){return ac(e,t,r,n)})):null}n.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();Infinity>e?this.g.W.Ra(e):this.g.W.Ra(Math.pow(2,32))};function $l(e,t){var r,n,i,o,a;return L((function(s){switch(s.g){case 1:mi(e.l);if(t.Ma||null==t.ub||t.bd)return s.return();t.ub=null;if(!t.Wb){s.D(2);break}return S(s,sc(e,t,t.Be,t.Pd),3);case 3:return s.return();case 2:if(t.stream.segmentIndex){s.D(4);break}r=t.stream;return S(s,t.stream.createSegmentIndex(),5);case 5:if(r!=t.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),t.Ma||t.ub||lc(e,t,0),s.return();case 4:x(s,6);n=Xl(e,t);null!=n&&(lc(e,t,n),t.md=!1);C(s,7);break;case 6:return i=T(s),S(s,pc(e,t,i),8);case 8:return s.return();case 7:o=Array.from(e.h.values());if(!e.F||!o.every((function(e){return e.endOfStream}))){s.D(0);break}return S(s,e.g.W.endOfStream(),10);case 10:mi(e.l),a=e.g.W.getDuration(),0!=a&&a<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.Ra(a),_(s)}}))}function Xl(e,t){if(ic(t))return Es(e.g.W,t.stream.originalId||""),null;t.type==Re&&Ss(e.g.W);var r=e.g.Vd(),n=t.Ka?t.Ka.endTime:r,i=ys(e.g.W,t.type,r),o=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.C,a=e.m.presentationTimeline.getDuration()-n,s=gs(e.g.W,t.type);if(1e-6>a&&s)return t.endOfStream=!0,"video"==t.type&&(e=e.h.get(Re))&&ic(e)&&(e.endOfStream=!0),null;t.endOfStream=!1;if(i>=o)return e.i.updateIntervalSeconds/2;i=Yl(e,t,r,s);if(!i)return e.i.updateIntervalSeconds;o=Infinity;a=Array.from(e.h.values());a=u(a);for(s=a.next();!s.done;s=a.next())s=s.value,ic(s)||s.ba&&!s.ba.current()||(o=Math.min(o,s.Ka?s.Ka.endTime:r));if(n>=o+e.m.presentationTimeline.g)return e.i.updateIntervalSeconds;t.Qa&&t.ba&&Ol(t.Qa,i);Ql(e,t,r,i).catch((function(){}));return null}function Yl(e,t,r,n){if(t.ba)return t.ba.current();if(t.Ka||n)return r=t.Ka?t.Ka.endTime:n,t.lf=!0,t.ba=t.stream.segmentIndex.$b(r),t.ba&&t.ba.next().value;e=e.i.inaccurateManifestTolerance;n=Math.max(r-e,0);var i=null;e&&(t.ba=t.stream.segmentIndex.$b(n),i=t.ba&&t.ba.next().value);i||(t.ba=t.stream.segmentIndex.$b(r),i=t.ba&&t.ba.next().value);return i}function Ql(t,r,n,i){var o,a,s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:o=Ne;a=r.stream;s=r.ba;r.Ma=!0;x(w,2);if(2==i.dc())throw new De(1,1,1011);return S(w,tc(t,r,i),4);case 4:mi(t.l);if(t.B)return w.return();l="video/mp4"==a.mimeType||"audio/mp4"==a.mimeType;c=e.ReadableStream;if(t.i.lowLatencyMode&&c&&l&&("HLS"!=t.m.type||i.s))return d=new Uint8Array(0),m=h=!1,f=function(e){var o,s,l;return L((function(c){if(h)return c.return();m=!0;mi(t.l);if(t.B)return c.return();d=Zl(d,e);o=!1;s=0;(new Ri).box("mdat",(function(e){s=e.size+e.start;o=!0})).parse(d,!1,!0);if(!o)return c.D(0);l=d.subarray(0,s);d=d.subarray(s);return S(c,rc(t,r,n,a,i,l),0)}))},S(w,oc(t,r,i,f),9);u=oc(t,r,i);return S(w,u,7);case 7:p=w.h;mi(t.l);if(t.B)return w.return();mi(t.l);return r.Wb?(r.Ma=!1,lc(t,r,0),w.return()):S(w,rc(t,r,n,a,i,p),6);case 9:g=w.h;if(m){w.D(6);break}h=!0;mi(t.l);return t.B?w.return():r.Wb?(r.Ma=!1,lc(t,r,0),w.return()):S(w,rc(t,r,n,a,i,g),6);case 6:mi(t.l);if(t.B)return w.return();r.Ka=i;s.next();r.Ma=!1;r.tf=!1;y=t.g.W.Bb();b=y[r.type];te(JSON.stringify(b));r.Wb||t.g.pf(i.startTime,i.endTime,r.type);lc(t,r,0);C(w,0);break;case 2:v=T(w);mi(t.l,v);if(t.B)return w.return();r.Ma=!1;if(7001==v.code)r.Ma=!1,cc(r),lc(t,r,0),w.D(0);else if(r.type==o.na&&t.i.ignoreTextStreamFailures)t.h.delete(o.na),w.D(0);else if(3017==v.code)ec(t,r,v),w.D(0);else return r.md=!0,v.severity=2,S(w,pc(t,r,v),0)}}))}function Jl(t,r,n){var i,o,a,s;return L((function(l){if(1==l.g)return i=r,i.cryptoKey?l.D(2):S(l,i.fetchKey(),3);o=i.iv;if(!o)for(o=ut(new ArrayBuffer(16)),a=i.firstMediaSequenceNumber+n.g,s=o.byteLength-1;0<=s;s--)o[s]=a&255,a>>=8;return l.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:o},i.cryptoKey,t))}))}function Zl(e,t){var r=new Uint8Array(e.length+t.length);r.set(e);r.set(t,e.length);return r}function ec(e,t,r){if(!Array.from(e.h.values()).some((function(e){return e!=t&&e.tf}))){var n=Math.round(100*e.C);if(20<n)e.C-=.2;else if(4<n)e.C-=.04;else{t.md=!0;e.B=!0;e.g.onError(r);return}t.tf=!0}lc(e,t,4)}function tc(e,t,r){var n,i,o,a,s,l,c,u,p,d,h,m,f;return L((function(g){n=Ne;i=[];o=Math.max(0,r.appendWindowStart-.1);a=r.appendWindowEnd+.01;s=tr(t.stream.codecs)[0];l=t.stream.mimeType.split(";")[0];c=r.timestampOffset;if(c!=t.ef||o!=t.cf||a!=t.bf||s!=t.ae||l!=t.df){if(t.ae&&s!=t.ae||t.df&&l!=t.df)if(t.type===n.Na){if(u=e.h.get(n.Ob))u.Ec=null,uc(u)}else t.type===n.Ob&&(p=e.h.get(n.Na))&&(p.Ec=null,uc(p));d=function(){var r,i,u;return L((function(p){if(1==p.g)return r=new Map,e.j.audio&&r.set(n.Ob,e.j.audio),e.j.video&&r.set(n.Na,e.j.video),x(p,2),t.cf=o,t.bf=a,t.ae=s,t.df=l,t.ef=c,i=e.m.sequenceMode||"HLS"==e.m.type,S(p,xs(e.g.W,t.type,c,o,a,i,t.stream,r),4);if(2!=p.g)return C(p,0);u=T(p);t.cf=null;t.bf=null;t.ae=null;t.ef=null;throw u}))};i.push(d())}!wa(r.h,t.Ec)&&(t.Ec=r.h)&&(h=oc(e,t,r.h,void 0,!0),m=function(){var i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:return x(u,2),S(u,h,4);case 4:return i=u.h,mi(e.l),o=null,a=new Map,s=new Ri,s.box("moov",Ni).box("trak",Ni).box("mdia",Ni).T("mdhd",(function(e){o=qa(e.reader,e.version).timescale})).box("hdlr",(function(e){e=e.reader;e.skip(8);e=e.Ib(4);var t=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);switch(t){case"soun":a.set(n.Ob,o);break;case"vide":a.set(n.Na,o)}o=null})).parse(i),a.has(t.type)?r.h.timescale=a.get(t.type):null!=o&&(r.h.timescale=o),l=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,S(u,e.g.Zf(t.type,i),5);case 5:return S(u,ws(e.g.W,t.type,i,null,t.stream,l),6);case 6:C(u,0);break;case 2:throw c=T(u),t.Ec=null,c}}))},e.g.ei(r.startTime,r.h),i.push(m()));e.m.sequenceMode&&(f=t.Ka?t.Ka.l:null,r.l!=f||t.lf)&&(t.lf=!1,i.push(Ds(e.g.W,t.type,r.startTime)));return S(g,Promise.all(i),0)}))}function rc(e,t,r,n,i,o){var a,s,l,c,u,p;return L((function(d){switch(d.g){case 1:a=n.closedCaptions&&0<n.closedCaptions.size;l=null!=n.emsgSchemeIdUris&&0<n.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes;c=e.i.parsePrftBox&&!e.G;if(l||c)s=new Ri;l&&s.T("emsg",(function(t){var r=n.emsgSchemeIdUris;if(0===t.version){var o=t.reader.vd();var a=t.reader.vd();var s=t.reader.N();var l=t.reader.N();var c=t.reader.N();var u=t.reader.N();var p=i.startTime+l/s}else s=t.reader.N(),p=t.reader.Ic()/s+i.timestampOffset,l=p-i.startTime,c=t.reader.N(),u=t.reader.N(),o=t.reader.vd(),a=t.reader.vd();t=t.reader.Ib(t.reader.getLength()-t.reader.ra());if(r&&r.includes(o)||e.i.dispatchAllEmsgBoxes)"urn:mpeg:dash:event:2012"==o?e.g.gi():(r=(new Map).set("detail",{startTime:p,endTime:p+c/s,schemeIdUri:o,value:a,timescale:s,presentationTimeDelta:l,eventDuration:c,id:u,messageData:t}),r=new G("emsg",r),r.cancelable=!0,e.g.onEvent(r),r.defaultPrevented||"https://aomedia.org/emsg/ID3"!=o&&"https://developer.apple.com/streaming/emsg-id3"!=o||(o=Ra(t),o.length&&i&&e.g.ii([{cueTime:i.startTime,data:t,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime)))}));c&&s.T("prft",(function(t){if(!e.G&&i.h.timescale){var r=t.reader,n=t.version;r.N();t=r.N();var o=r.N();t=1e3*t+o/Math.pow(2,32)*1e3;0===n?r=r.N():(n=r.N(),r=r.N(),r=n*Math.pow(2,32)+r);t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+t).getTime();r=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-r/i.h.timescale*1e3)});r=new G("prft",r);e.g.onEvent(r);e.G=!0}}));(l||c)&&s.parse(o);return S(d,nc(e,t,r),2);case 2:return mi(e.l),u=t.xd,t.xd=!1,p=t.Xf,t.Xf=!1,S(d,e.g.Zf(t.type,o),3);case 3:return S(d,ws(e.g.W,t.type,o,i,n,a,u,p),4);case 4:mi(e.l),_(d)}}))}function nc(e,t,r){var n,i,o,a;return L((function(s){if(1==s.g){n=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g);i=fs(e.g.W,t.type);if(null==i)return s.return();o=r-i;a=o-n;return.01>=a?s.return():S(s,e.g.W.remove(t.type,i,i+a),2)}mi(e.l);_(s)}))}function ic(e){return e&&e.type==Re&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function oc(e,t,r,n,i){var o,a,s,l,c;return L((function(u){switch(u.g){case 1:if(r instanceof va&&(o=r.g))return u.return(o);a=null;if(t.Qa&&r instanceof Ea){var p=t.Qa;if(p.g.has(r)){var d=p.g.get(r);n&&(d.h=n);p.g.delete(r);a=d.g}else a=null}a||(a=ac(e,r,t.stream,n,i));t.Pa=a;return S(u,a.promise,2);case 2:s=u.h;t.Pa=null;l=s.data;if(!r.B){u.D(3);break}c=t.ba;return S(u,Jl(l,r.B,c),4);case 4:l=u.h;case 3:return u.return(l)}}))}function ac(e,t,r,n,i){i=i?0:1;var o=t instanceof Ea?t:void 0;t=Rl(t.Oa(),t.Sa,t.za,e.i.retryParameters,n);return e.g.lc.request(ui,t,{type:i,stream:r,segment:o})}function sc(e,t,r,n){var i,o;return L((function(a){if(1==a.g)return t.Wb=!1,t.Be=!1,t.Pd=0,t.bd=!0,t.Ka=null,t.Ec=null,t.ba=null,t.Qa&&kl(t.Qa),n?(i=e.g.Vd(),o=e.g.W.getDuration(),S(a,e.g.W.remove(t.type,i+n,o),3)):S(a,_s(e.g.W,t.type),4);if(3!=a.g)return mi(e.l),r?S(a,e.g.W.flush(t.type),3):a.D(3);mi(e.l);t.bd=!1;t.endOfStream=!1;t.Ma||t.ub||lc(e,t,0);_(a)}))}function lc(e,t,r){var n=t.type;if(n!=Re||e.h.has(n))t.ub=new pr((function(){var r;return L((function(n){if(1==n.g)return x(n,2),S(n,$l(e,t),4);if(2!=n.g)return C(n,0);r=T(n);if(e.g)e.g.onError(r);_(n)}))})).R(r)}function cc(e){null!=e.ub&&(e.ub.stop(),e.ub=null)}function uc(e){return L((function(t){return e.Pa?S(t,e.Pa.abort(),0):t.D(0)}))}function pc(e,t,r){var n;return L((function(i){if(1==i.g)return S(i,Bn(e.I),2);mi(e.l);n=0===e.i.maxDisabledTime&&1011==r.code?1:e.i.maxDisabledTime;1===r.category&&0<n&&(r.handled=e.g.Re(t.stream,n),r.handled&&(r.severity=1));e.g.onError(r);r.handled||e.i.failureCallback(r);_(i)}))}function dc(e,t){var r=Bp(),n=this;this.j=t;this.i=e;this.l=r;this.s=null;this.m=[];this.h=this.g=null;this.C=Promise.resolve().then((function(){return fc(n)}));this.B=new hi((function(){return hc(n)}))}dc.prototype.destroy=function(){return this.B.destroy()};function hc(e){var t,r,n;return L((function(i){if(1==i.g)return e.h&&e.h.abort(),yc(e),S(i,e.C,2);e.g&&e.g.rb.nc();t=u(e.m);for(r=t.next();!r.done;r=t.next())n=r.value,n.rb.nc();e.g=null;e.m=[];e.j=null;_(i)}))}function mc(e,t){var r={Gc:function(){},le:function(){},nc:function(){},onError:function(){},oe:function(){},gk:function(){}};e.m.push({create:t,rb:r});e.h&&e.h.abort();yc(e);return r}function fc(e){return L((function(t){if(e.B.g)t=t.D(0);else{if(0==e.m.length||e.g&&!e.g.ec)var r=!1;else{e.g&&(e.g.rb.nc(),e.g=null);r=e.m.shift();var n=r.create(e.l);n?(r.rb.Gc(),e.g={node:n.node,payload:n.payload,ec:n.ec,rb:r.rb}):r.rb.oe();r=!0}r?r=Promise.resolve():e.g?r=gc(e):(e.j.di(e.i),e.s=new Vn,r=e.s);t=S(t,r,1)}return t}))}function gc(e){var t,r;return L((function(n){switch(n.g){case 1:return e.i=e.j.Fh(e.i,e.l,e.g.node,e.g.payload),x(n,2),e.h=e.j.ih(e.i,e.l,e.g.payload),S(n,e.h.promise,4);case 4:e.h=null;e.i==e.g.node&&(e.g.rb.le(),e.g=null);C(n,0);break;case 2:t=T(n);if(7001==t.code)e.g.rb.nc();else e.g.rb.onError(t);e.g=null;e.h=null;r=e;return S(n,e.j.handleError(e.l,t),5);case 5:r.i=n.h,_(n)}}))}function yc(e){e.s&&(e.s.resolve(),e.s=null)}function bc(e){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(bc).join("");var t=[],r=700<=e.fontWeight,n="italic"==e.fontStyle,i=e.textDecoration.includes("underline");r&&t.push(["b"]);n&&t.push(["i"]);i&&t.push(["u"]);r="";(n=vc(e.color))&&(r+="."+n);(n=vc(e.backgroundColor))&&(r+=".bg_"+n);r&&t.push(["c",r]);return t.reduceRight((function(e,t){var r=u(t);t=r.next().value;r=r.next().value;return"<"+t+(void 0===r?"":r)+">"+e+"</"+t+">"}),e.payload)}function vc(e){switch(e.toLowerCase()){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function wc(e,t){e=u(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,r.isContainer)wc(r.nestedCues,t);else{var n=r.clone();n.nestedCues=[];n.payload=bc(r);t.push(n)}return t}function Ec(e){this.g=null;for(var t=u(Array.from(e.textTracks)),r=t.next();!r.done;r=t.next())r=r.value,r.mode="disabled","Shaka Player TextTrack"==r.label&&(this.g=r);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack"));this.g.mode="hidden"}n=Ec.prototype;n.remove=function(e,t){if(!this.g)return!1;_c(this.g,(function(r){return r.startTime<t&&r.endTime>e}));return!0};n.append=function(e){var t=wc(e,[]),r=[];e=this.g.cues?Array.from(this.g.cues):[];var n={};t=u(t);for(var i=t.next();!i.done;n={tc:n.tc},i=t.next())n.tc=i.value,e.some(function(e){return function(t){return t.startTime==e.tc.startTime&&t.endTime==e.tc.endTime&&t.text==e.tc.payload?!0:!1}}(n))||(i=Sc(n.tc))&&r.push(i);e=r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)}));e=u(e);for(n=e.next();!n.done;n=e.next())this.g.addCue(n.value)};n.destroy=function(){this.g&&(_c(this.g,(function(){return!0})),this.g.mode="disabled");this.g=null;return Promise.resolve()};n.isTextVisible=function(){return"showing"==this.g.mode};n.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Sc(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign;t.positionAlign=e.positionAlign;e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}"center"==e.textAlign&&"center"!=t.align&&(t.align="middle");"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl");1==e.lineInterpretation&&(t.snapToLines=!1);null!=e.line&&(t.line=e.line);null!=e.position&&(t.position=e.position);return t}function _c(e,t){var r=e.mode;e.mode="showing"==r?"showing":"hidden";for(var n=u(Array.from(e.cues)),i=n.next();!i.done;i=n.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=r}V("shaka.text.SimpleTextDisplayer",Ec);Ec.prototype.setTextVisibility=Ec.prototype.setTextVisibility;Ec.prototype.isTextVisible=Ec.prototype.isTextVisible;Ec.prototype.destroy=Ec.prototype.destroy;Ec.prototype.append=Ec.prototype.append;Ec.prototype.remove=Ec.prototype.remove;function xc(){}function Dc(e){return document.createElement(e)}function Cc(){var e=document.createElement("button");e.setAttribute("type","button");return e}function Tc(e){for(;e.firstChild;)e.removeChild(e.firstChild)}V("shaka.util.Dom",xc);xc.removeAllChildren=Tc;function Oc(t,r){var n=this;this.j=!1;this.i=[];this.F=t;this.m=r;this.g=Dc("div");this.g.classList.add("shaka-text-container");this.g.style.textAlign="center";this.g.style.display="flex";this.g.style.flexDirection="column";this.g.style.alignItems="center";this.g.style.justifyContent="flex-end";this.m.appendChild(this.g);this.C=new dr((function(){Ac(n)})).ha(.25);this.h=new Map;this.B=new fi;this.B.o(document,"fullscreenchange",(function(){Ac(n,!0)}));this.l=null;"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){Ac(n,!0)})),this.l.observe(this.g));this.s=new Map}n=Oc.prototype;n.append=function(e){var t=[].concat(p(this.i)),r={};e=u(e);for(var n=e.next();!n.done;r={Dd:r.Dd},n=e.next())r.Dd=n.value,t.some(function(e){return function(t){return St(t,e.Dd)}}(r))||this.i.push(r.Dd);Ac(this)};n.destroy=function(){this.m.removeChild(this.g);this.g=null;this.j=!1;this.i=[];this.C&&this.C.stop();this.h.clear();this.B&&(this.B.release(),this.B=null);this.l&&(this.l.disconnect(),this.l=null)};n.remove=function(e,t){if(!this.g)return!1;var r=this.i.length;this.i=this.i.filter((function(r){return r.startTime<e||r.endTime>=t}));Ac(this,r>this.i.length);return!0};n.isTextVisible=function(){return this.j};n.setTextVisibility=function(e){this.j=e};function kc(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Pc(e,t,r,n,i){var o=!1,a=[],s=[];t=u(t);for(var l=t.next();!l.done;l=t.next()){l=l.value;i.push(l);var c=e.h.get(l),p=l.startTime<=n&&l.endTime>n,d=c?c.Rg:null;c&&(a.push(c.Qe),c.wd&&a.push(c.wd),p||(o=!0,e.h.delete(l),c=null));p&&(s.push(l),c?kc(e,d)||(o=!0):(Ic(e,l,i),c=e.h.get(l),d=c.Rg,o=!0));0<l.nestedCues.length&&d&&Pc(e,l.nestedCues,d,n,i);i.pop()}if(o){n=u(a);for(i=n.next();!i.done;i=n.next())i=i.value,i.parentElement&&i.parentElement.removeChild(i);s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}));s=u(s);for(l=s.next();!l.done;l=s.next())n=e.h.get(l.value),n.wd?(r.appendChild(n.wd),n.wd.appendChild(n.Qe)):r.appendChild(n.Qe)}}function Ac(e,t){if(e.g){var r=e.F.currentTime;if(!e.j||(void 0===t?0:t)){t=u(e.s.values());for(var n=t.next();!n.done;n=t.next())Tc(n.value);Tc(e.g);e.h.clear();e.s.clear()}if(e.j){t=new Map;n=u(e.h.keys());for(var i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e.h.get(i));Pc(e,e.i,e.g,r,[])}}}function Ic(e,t,r){var n=1<r.length,i=n?"span":"div";t.lineBreak&&(i="br");n=!n&&0<t.nestedCues.length;var o=Dc(i);"br"!=i&&Rc(e,o,t,r,n);r=null;if(t.region&&t.region.id)if(r=t.region,i=r.id+"_"+r.width+"x"+r.height+(r.heightUnits==Ut?"%":"px")+"-"+r.viewportAnchorX+"x"+r.viewportAnchorY+(r.viewportAnchorUnits==Ut?"%":"px"),e.s.has(i))r=e.s.get(i);else{var a=Dc("span"),s=r.heightUnits==Ut?"%":"px",l=r.widthUnits==Ut?"%":"px",c=r.viewportAnchorUnits==Ut?"%":"px";a.id="shaka-text-region---"+i;a.classList.add("shaka-text-region");a.style.height=r.height+s;a.style.width=r.width+l;a.style.position="absolute";a.style.top=r.viewportAnchorY+c;a.style.left=r.viewportAnchorX+c;a.style.display="flex";a.style.flexDirection="column";a.style.alignItems="center";a.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end";e.s.set(i,a);r=a}i=o;n&&(i=Dc("span"),i.classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",o.appendChild(i));e.h.set(t,{Qe:o,Rg:i,wd:r})}function jc(e){var t=e.direction,r=e.positionAlign;e=e.textAlign;return r!==_t?r:"left"===e||"start"===e&&t===Ot||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Ot?"line-right":"center"}function Rc(e,t,r,n,i){var o=t.style,a=0==r.nestedCues.length,s=1<n.length;o.whiteSpace="pre-wrap";var l=r.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));o.webkitTextStrokeColor=r.textStrokeColor;o.webkitTextStrokeWidth=r.textStrokeWidth;o.color=r.color;o.direction=r.direction;o.opacity=r.opacity;o.paddingLeft=Nc(r.linePadding,r,e.m);o.paddingRight=Nc(r.linePadding,r,e.m);o.textShadow=r.textShadow;if(r.backgroundImage)o.backgroundImage="url('"+r.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(r.nestedCues.length)var c=t;else c=Dc("span"),t.appendChild(c);r.border&&(c.style.border=r.border);i||((t=Lc(n,(function(e){return e.backgroundColor})))?c.style.backgroundColor=t:l&&(c.style.backgroundColor="rgba(0, 0, 0, 0.8)"));l&&(c.textContent=l)}s&&!n[n.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent="before"==r.displayAlign?"flex-start":"center"==r.displayAlign?"center":"flex-end");a||(o.margin="0");o.fontFamily=r.fontFamily;o.fontWeight=r.fontWeight.toString();o.fontStyle=r.fontStyle;o.letterSpacing=r.letterSpacing;o.fontSize=Nc(r.fontSize,r,e.m);null!=r.line&&(e=r.lineInterpretation,0==r.line&&e==Pt&&(e=1),1==e&&(o.position="absolute",r.writingMode==kt?(o.width="100%",r.lineAlign==At?o.top=r.line+"%":"end"==r.lineAlign&&(o.bottom=100-r.line+"%")):"vertical-lr"==r.writingMode?(o.height="100%",r.lineAlign==At?o.left=r.line+"%":"end"==r.lineAlign&&(o.right=100-r.line+"%")):(o.height="100%",r.lineAlign==At?o.right=r.line+"%":"end"==r.lineAlign&&(o.left=100-r.line+"%"))));o.lineHeight=r.lineHeight;null!=r.position&&(r.writingMode==kt?o.paddingLeft=r.position:o.paddingTop=r.position);e=jc(r);"line-left"==e?o.cssFloat="left":"line-right"==e&&(o.cssFloat="right");o.textAlign=r.textAlign;o.textDecoration=r.textDecoration.join(" ");o.writingMode=r.writingMode;"writingMode"in document.documentElement.style&&o.writingMode==r.writingMode||(o.webkitWritingMode=r.writingMode);r.size&&(r.writingMode==kt?o.width=r.size+"%":o.height=r.size+"%")}function Nc(e,t,r){var n=(n=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(n[1]),unit:n[2]}:null;if(!n)return e;var i=n.value;switch(n.unit){case"%":return i/100*r.clientHeight/t.cellResolution.rows+"px";case"c":return r.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function Lc(e,t){for(var r=e.length-1;0<=r;r--){var n=t(e[r]);if(n||0===n)return n}return null}V("shaka.text.UITextDisplayer",Oc);Oc.prototype.setTextVisibility=Oc.prototype.setTextVisibility;Oc.prototype.isTextVisible=Oc.prototype.isTextVisible;Oc.prototype.remove=Oc.prototype.remove;Oc.prototype.destroy=Oc.prototype.destroy;Oc.prototype.append=Oc.prototype.append;function Mc(e,t){function r(e){for(var r=e,n=u(t),i=n.next();!i.done;i=n.next())i=i.value,i.end&&i.start<e&&(r+=i.end-i.start);e=Math.floor(r/3600);n=Math.floor(r/60%60);i=Math.floor(r%60);r=Math.floor(1e3*r%1e3);return(10>e?"0":"")+e+":"+(10>n?"0":"")+n+":"+(10>i?"0":"")+i+"."+(100>r?10>r?"00":"0":"")+r}var n=wc(e,[]);e="WEBVTT\n\n";n=u(n);for(var i=n.next();!i.done;i=n.next())i=i.value,e+=r(i.startTime)+" --\x3e "+r(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case xt:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}V("shaka.text.WebVttGenerator",(function(){}));function qc(e,t){this.h=e;this.g=t;this.j="";this.s=void 0;this.i=!1;this.m=!0;this.l=!1}qc.prototype.configure=function(e){this.g=e};function Uc(e,t,r){try{if(!e.g.enabled)return t;var n=Hc(e);e:{switch(r.toLowerCase()){case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":var i=Qc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":i=$c;break e}i=void 0}n.ot=i;n.su=!0;var o=Wc(n);return Kc(t,o)}catch(e){return J("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}function Hc(t){t.j||(t.j=t.g.sessionId||e.crypto.randomUUID());return{v:1,sf:t.s,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function Fc(e,t,r){r=void 0===r?{}:r;var n=void 0===n?e.g.useHeaders:n;if(e.g.enabled){Object.assign(r,Hc(e));r.pr=e.h.Rb();var i=r.ot===Yc||r.ot===Qc;e.l&&i&&(r.bs=!0,r.su=!0,e.l=!1);null==r.su&&(r.su=e.m);if(n)e=Gc(r),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Wc(r);o&&(t.uris=t.uris.map((function(e){return Kc(e,o)})))}}}function Bc(e){if(0===e.type)return Jc;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?Qc:Yc;if("audio"==t)return Xc;if("text"==t)return"application/mp4"===e.mimeType?eu:Zc}}function zc(e,t){t=e.h.Bb()[t];if(!t.length)return NaN;var r=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=r&&e.end>=r})))?1e3*(e.end-r):NaN}function Vc(e,t){var r=e.h.Va();if(!r.length)return NaN;e=r[0];r=u(r);for(var n=r.next();!n.done;n=r.next())n=n.value,"variant"===n.type&&n.bandwidth>e.bandwidth&&(e=n);switch(t){case Yc:return e.videoBandwidth||NaN;case Xc:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Wc(e){function t(e){return 100*r(e/100)}function r(e){return Math.round(e)}function n(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}var i=[],o={br:r,d:r,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:r},a=Object.keys(e||{}).sort();a=u(a);for(var s=a.next();!s.done;s=a.next()){s=s.value;var l=e[s];if(n(l)&&("v"!==s||1!==l)&&("pr"!=s||1!==l)){var c=o[s];c&&(l=c(l));c=typeof l;var p=void 0;p="string"===c&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(l):"boolean"===c?s:"symbol"===c?s+"="+l.description:s+"="+l;i.push(p)}}return i.join(",")}function Gc(e){var t=Object.keys(e),r={},n=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=u(t);for(var a=t.next();!a.done;a=t.next())a=a.value,i[null!=o[a]?o[a]:1][a]=e[a];for(e=0;e<i.length;e++)(o=Wc(i[e]))&&(r["CMCD-"+n[e]]=o);return r}function Kc(e,t){if(!t||e.includes("offline:"))return e;e=new pe(e);e.g.set("CMCD",t);return e.toString()}var $c="m",Xc="a",Yc="v",Qc="av",Jc="i",Zc="c",eu="tt";V("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Jj:"s",OTHER:"o"});function tu(){}function ru(e,t,r,n,i){var o=i in n,a=!0,s;for(s in t){var l=i+"."+s,c=o?n[i]:r[s];o||s in r?void 0===t[s]?void 0===c||o?delete e[s]:e[s]=Jn(c):c.constructor==Object&&t[s]&&t[s].constructor==Object?(e[s]||(e[s]=Jn(c)),l=ru(e[s],t[s],c,n,l),a=a&&l):typeof t[s]!=typeof c||null==t[s]||"function"!=typeof t[s]&&t[s].constructor!=c.constructor?(Y("Invalid config, wrong type for "+l),a=!1):("function"==typeof r[s]&&r[s].length!=t[s].length&&Q("Unexpected number of arguments for "+l),e[s]=t[s]):(Y("Invalid config, unrecognized key "+l),a=!1)}return a}function nu(e,t){for(var r={},n=r,i=0,o=0;;){i=e.indexOf(".",i);if(0>i)break;if(0==i||"\\"!=e[i-1])o=e.substring(o,i).replace(/\\\./g,"."),n[o]={},n=n[o],o=i+1;i+=1}n[e.substring(o).replace(/\\\./g,".")]=t;return r}function iu(e,t){return e&&t}V("shaka.util.ConfigUtils",tu);tu.convertToConfigObject=nu;tu.mergeConfigObjects=ru;function ou(){}function au(e){e=Ti(e);return new pe(e).mb}function su(e,t,r){function n(e){pt(o).setUint32(a,e.byteLength,!0);a+=4;o.set(ut(e),a);a+=e.byteLength}if(!r||!r.byteLength)throw new De(2,6,6015);var i;"string"==typeof t?i=ki(t,!0):i=t;e=Ti(e);e=ki(e,!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+r.byteLength),a=0;n(e);n(i);n(r);return o}function lu(e,t,r){if("skd"!==t)return e;t=r.serverCertificate;r=Ti(e).split("skd://").pop();return su(e,r,t)}function cu(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")}V("shaka.util.FairPlayUtils",ou);ou.commonFairPlayResponse=function(e,t){if(2===e){try{var r=Di(t.data)}catch(e){return}e=!1;r=r.trim();"<ckc>"===r.substr(0,5)&&"</ckc>"===r.substr(-6)&&(r=r.slice(5,-6),e=!0);try{var n=JSON.parse(r);n.ckc&&(r=n.ckc,e=!0);n.CkcMessage&&(r=n.CkcMessage,e=!0);n.License&&(r=n.License,e=!0)}catch(e){}e&&(t.data=ct(Ki(r)))}};ou.expressplayFairPlayRequest=function(e,t){cu(e,t)};ou.conaxFairPlayRequest=function(e,t){cu(e,t)};ou.ezdrmFairPlayRequest=function(e,t){cu(e,t)};ou.verimatrixFairPlayRequest=function(e,t){2===e&&(e=ut(t.body),e=Gi(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Oi("spc="+e))};ou.expressplayInitDataTransform=function(e,t,r){return lu(e,t,r)};ou.conaxInitDataTransform=function(t,r,n){if("skd"!==r)return t;r=n.serverCertificate;n=Ti(t).split("skd://").pop().split("?").shift();n=e.atob(n);var i=new ArrayBuffer(2*n.length);i=new Uint16Array(i);for(var o=0,a=n.length;o<a;o++)i[o]=n.charCodeAt(o);return su(t,i,r)};ou.ezdrmInitDataTransform=function(e,t,r){if("skd"!==t)return e;t=r.serverCertificate;r=Ti(e).split(";").pop();return su(e,r,t)};ou.verimatrixInitDataTransform=function(e,t,r){return lu(e,t,r)};ou.initDataTransform=su;ou.defaultGetContentId=au;ou.isFairPlaySupported=function(){var e;return L((function(t){if(1==t.g)return e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},x(t,2),S(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4);if(2!=t.g)return t.return(!0);T(t);return t.return(!1)}))};function uu(){}function pu(){var t=Infinity;navigator.connection&&navigator.connection.saveData&&(t=360);var r={retryParameters:zn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,r,n){e.shakaMediaKeysPolyfill&&"skd"==r&&(r=n.serverCertificate,n=au(t),t=su(t,n,r));return t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:gr(),minHdcpVersion:""},n={retryParameters:zn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return iu([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:Sr("Tizen 3")||Sr("Tizen 2")||br()||wr()?!1:!0,ignoreManifestTimestampsInSegmentsMode:!1},mss:{manifestPreprocessor:function(e){return iu([e],e)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},i={retryParameters:zn(),failureCallback:function(e){return iu([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1};if(Sr("Web0S")||yr()||Sr("CrKey"))i.stallSkip=0;var o={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(r){if(1==r.g)return navigator.storage&&navigator.storage.estimate?S(r,navigator.storage.estimate(),3):r.return(!0);t=r.h;return r.return(t.usage+e<.95*t.quota)}))},progressCallback:function(e,t){return iu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:r,manifest:n,streaming:i,mediaSource:{sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:o,abrFactory:function(){return new bn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:t,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};o.trackSelectionCallback=function(e){return L((function(t){return t.return(hu(e,a.preferredAudioLanguage))}))};return a}function du(e,t,r){var n={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return ru(e,t,r||pu(),n,"")}function hu(e,t){var r=e.filter((function(e){return"variant"==e.type})),n=[],i=Ge(t,r.map((function(e){return e.language})));i&&(n=r.filter((function(e){return Fe(e.language)==i})));0==n.length&&(n=r.filter((function(e){return e.primary})));0==n.length&&(r.map((function(e){return e.language})),n=r);var o=n.filter((function(e){return e.height&&480>=e.height}));o.length&&(o.sort((function(e,t){return t.height-e.height})),n=o.filter((function(e){return e.height==o[0].height})));t=[];n.length&&(r=Math.floor(n.length/2),n.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(n[r]));e=u(e);for(n=e.next();!n.done;n=e.next())n=n.value,n.type!=Re&&"image"!=n.type||t.push(n);return t}V("shaka.util.PlayerConfiguration",uu);uu.mergeConfigObjects=du;uu.createDefault=pu;function mu(){this.g=null;this.h=[]}function fu(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var r=Date.now()/1e3;e.g.duration=r-e.g.timestamp;e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:r,state:t,duration:0})}}function gu(e,t){var r=0;e.g&&e.g.state==t&&(r+=e.g.duration);e=u(e.h);for(var n=e.next();!n.done;n=e.next())n=n.value,r+=n.state==t?n.duration:0;return r}function yu(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var r=[],n=u(e.h),i=n.next();!i.done;i=n.next())r.push(t(i.value));e.g&&r.push(t(e.g));return r}function bu(){this.i=this.h=null;this.g=[]}function vu(e,t,r){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:r,bandwidth:null}))}function wu(){this.C=this.F=this.I=this.G=this.B=this.j=this.H=this.m=this.i=this.O=this.P=this.J=this.K=this.L=this.l=this.s=NaN;this.g=new mu;this.h=new bu}function Eu(t,r){oe.call(this);var n=this;this.l=Wp;this.ce=this.h=null;this.Z=!1;this.re=new fi;this.xb=new fi;this.s=new fi;this.vb=this.i=this.ue=this.K=this.j=this.ea=this.L=this.Uf=this.V=this.xa=this.O=this.ge=this.J=this.hb=this.F=this.I=this.m=this.H=null;this.nd=!1;this.Lf=this.B=null;this.Tf=1e9;this.g=ap(this);this.Sf={width:Infinity,height:Infinity};this.C=null;this.Ea=new In(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel);this.fb=this.g.preferredTextLanguage;this.kd=this.g.preferredTextRole;this.ed=this.g.preferForcedSubs;this.Pb=[];this.qd=null;r&&r(this);this.V=Yu(this);this.H=Vu(this);this.H.Bf(this.g.streaming.forceHTTPS);this.G=null;Qp&&(this.G=Qp());this.re.o(e,"online",(function(){Op(n);n.uf()}));this.P={name:"detach"};this.X={name:"attach"};this.$={name:"unload"};this.Le={name:"manifest-parser"};this.Rf={name:"manifest"};this.gb={name:"media-source"};this.Pf={name:"drm-engine"};this.Y={name:"load"};this.Me={name:"src-equals-drm-engine"};this.ib={name:"src-equals"};var i=new Map;i.set(this.X,(function(e,t){return Xn(Tu(n,e,t))}));i.set(this.P,(function(e){e.mediaElement&&(n.xb.Ub(),e.mediaElement=null);n.G&&n.G.release();n.h=null;e=Promise.resolve();return Xn(e)}));i.set(this.$,(function(e){return Xn(Ou(n,e))}));i.set(this.gb,(function(e){e=ku(n,e);return Xn(e)}));i.set(this.Le,(function(e,t){e=Pu(n,e,t);return Xn(e)}));i.set(this.Rf,(function(e){return Au(n,e)}));i.set(this.Pf,(function(e){e=Iu(n,e);return Xn(e)}));i.set(this.Y,(function(e,t){return Xn(ju(n,e,t))}));i.set(this.Me,(function(e,t){e=Ru(n,e,t);return Xn(e)}));i.set(this.ib,(function(e,t){return Nu(n,e,t)}));this.ya=new dc(this.P,{Fh:function(e,t,r,i){var o=null;e==n.P&&(o=r==n.P?n.P:n.X);e==n.X&&(o=r==n.P||t.mediaElement!=i.mediaElement?n.P:r==n.X?n.X:r==n.gb||r==n.Y?n.gb:r==n.ib?n.Me:null);e==n.gb&&(o=r==n.Y&&t.mediaElement==i.mediaElement?n.Le:n.$);e==n.Le&&(o=Fp(n.Y,n.Rf,n.$,r,t,i));e==n.Rf&&(o=Fp(n.Y,n.Pf,n.$,r,t,i));e==n.Pf&&(o=Fp(n.Y,n.Y,n.$,r,t,i));e==n.Me&&(o=r==n.ib&&t.mediaElement==i.mediaElement?n.ib:n.$);if(e==n.Y||e==n.ib)o=n.$;e==n.$&&(o=i.mediaElement&&t.mediaElement==i.mediaElement?n.X:n.P);return o},ih:function(e,t,r){n.dispatchEvent(xu("onstatechange",(new Map).set("state",e.name)));return i.get(e)(t,r)},handleError:function(e){return L((function(t){return 1==t.g?S(t,Ou(n,e),2):t.return(e.mediaElement?n.X:n.P)}))},di:function(e){n.dispatchEvent(xu("onstateidle",(new Map).set("state",e.name)))}});this.ke=new dr((function(){return bp(n)}));t&&this.$c(t,!0)}b(Eu,oe);function Su(e){null!=e.L&&(e.L.release(),e.L=null)}function _u(e,t){if(t.lcevc.enabled){var r=e.Va();r&&r[0]&&r[0].videoMimeType==Jp.ts&&(fr()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Q("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled."));Su(e);null==e.L&&(e.L=new is(e.h,e.Uf,t.lcevc),e.I&&(e.I.L=e.L))}else Su(e)}function xu(e,t){return new G(e,t)}n=Eu.prototype;n.destroy=function(){var e=this,t;return L((function(r){switch(r.g){case 1:if(e.l==Vp)return r.return();Su(e);e.l=Vp;t=mc(e.ya,(function(){return{node:e.P,payload:Bp(),ec:!1}}));return S(r,new Promise((function(e){t.Gc=function(){};t.le=function(){e()};t.nc=function(){e()};t.onError=function(){e()};t.oe=function(){e()}})),2);case 2:return S(r,e.ya.destroy(),3);case 3:e.re&&(e.re.release(),e.re=null);e.xb&&(e.xb.release(),e.xb=null);e.s&&(e.s.release(),e.s=null);e.Lf=null;e.g=null;e.C=null;e.ce=null;e.V=null;if(!e.H){r.D(4);break}return S(r,e.H.destroy(),5);case 5:e.H=null;case 4:e.B&&(e.B.release(),e.B=null),oe.prototype.release.call(e),_(r)}}))};function Du(){e.Promise||Q("A Promise implementation or polyfill is required");if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||Sr("Trident/"))return!1;var t=Er();return t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)?!1:hr()?!0:mr("application/x-mpegurl")}n.$c=function(e,t){t=void 0===t?!0:t;if(this.l==Vp)return Promise.reject(Hp());var r=Bp();r.mediaElement=e;hr()||(t=!1);var n=t?this.gb:this.X;e=mc(this.ya,(function(){return{node:n,payload:r,ec:!1}}));e.Gc=function(){};return zp(e)};n.Yf=function(e){this.Uf=e};n.detach=function(){var e=this;if(this.l==Vp)return Promise.reject(Hp());var t=mc(this.ya,(function(){return{node:e.P,payload:Bp(),ec:!1}}));t.Gc=function(){};return zp(t)};n.Mf=function(e){var t=this;e=void 0===e?!0:e;if(this.l==Vp)return Promise.reject(Hp());this.nd=!1;hr()||(e=!1);Su(this);var r=Bp(),n=mc(this.ya,(function(n){var i=n.mediaElement&&e?t.gb:n.mediaElement?t.X:t.P;r.mediaElement=n.mediaElement;return{node:i,payload:r,ec:!1}}));n.Gc=function(){};return zp(n)};n.Hi=function(e){this.qd=e};n.load=function(e,t,r){var n=this;this.qd=null;this.nd=!1;if(this.l==Vp)return Promise.reject(Hp());this.dispatchEvent(xu("loading"));var i=Bp();i.uri=e;i.ye=Date.now()/1e3;r&&(i.mimeType=r);void 0!==t&&(i.startTime=t);var o=Cu(this,i)?this.ib:this.Y,a=mc(this.ya,(function(e){if(null==e.mediaElement)return null;i.mediaElement=e.mediaElement;return{node:o,payload:i,ec:!0}}));this.C=new wu;a.Gc=function(){};return new Promise((function(e,t){a.oe=function(){return t(new De(2,7,7002))};a.le=function(){e();n.dispatchEvent(xu("loaded"))};a.nc=function(){return t(Hp())};a.onError=function(e){return t(e)}}))};function Cu(e,t){if(!hr())return!0;var r=t.mimeType,n=t.uri||"";r||(r=da(n),r=Jp[r]);if(r){if(""==(t.mediaElement||_r()).canPlayType(r))return!1;if(!hr()||!(r in ha||da(n)in ma)||("application/x-mpegurl"===r||"application/vnd.apple.mpegurl"===r)&&e.g.streaming.preferNativeHls)return!0;if(vr())return e.g.streaming.useNativeHlsOnSafari}return!1}function Tu(e,t,r){null==t.mediaElement&&(t.mediaElement=r.mediaElement,e.xb.o(t.mediaElement,"error",(function(){var t=Ap(e);t&&kp(e,t)})));e.h=t.mediaElement;return Promise.resolve()}function Ou(e,t){var r,n,i,o,a,s,l,c,p;return L((function(d){switch(d.g){case 1:return e.l!=Vp&&(e.l=Wp),r=e.Pb.map((function(e){return e()})),e.Pb=[],S(d,Promise.all(r),2);case 2:e.dispatchEvent(xu("unloading"));t.mimeType=null;t.startTime=null;t.uri=null;e.xa&&(e.xa.release(),e.xa=null);t.mediaElement&&e.s.Ub();e.ke.stop();e.hb&&(e.hb.release(),e.hb=null);e.ge&&(e.ge.stop(),e.ge=null);if(!e.K){d.D(3);break}return S(d,e.K.stop(),4);case 4:e.K=null,e.ue=null;case 3:if(!e.B){d.D(5);break}return S(d,e.B.stop(),5);case 5:if(!e.j){d.D(7);break}return S(d,e.j.destroy(),8);case 8:e.j=null;case 7:e.J&&(e.J.release(),e.J=null);e.F&&(e.F.release(),e.F=null);if(!e.I){d.D(9);break}return S(d,e.I.destroy(),10);case 10:e.I=null;case 9:if(e.G)e.G.onAssetUnload();if(!t.mediaElement||!t.mediaElement.src){d.D(11);break}return S(d,new Promise((function(e){return new dr(e).R(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){d.D(13);break}return S(d,e.m.destroy(),14);case 14:e.m=null;case 13:e.vb=null;e.O=null;if(e.i){n=u(e.i.variants);for(i=n.next();!i.done;i=n.next())for(o=i.value,a=u([o.audio,o.video]),s=a.next();!s.done;s=a.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();c=u(e.i.textStreams);for(s=c.next();!s.done;s=c.next())p=s.value,p.segmentIndex&&p.segmentIndex.release()}e.i=null;e.C=new wu;e.Qf=null;hp(e);_(d)}}))}function ku(e,t){var r,n,i,o,a;return L((function(s){if(1==s.g)return r=e.g.textDisplayFactory,n=r(),e.Qf=r,i=Xu(t.mediaElement,n,(function(t,r,n){Uu(e,t,r,n)}),e.L),i.configure(e.g.mediaSource),o=e.g.manifest,a=o.segmentRelativeVttTiming,i.P=a,S(s,i.I,2);e.I=i;_(s)}))}function Pu(e,t,r){var n,i,o,a;return L((function(s){if(1==s.g)return t.mimeType=r.mimeType,t.uri=r.uri,n=t.uri,i=e.H,e.vb=n,o=e,S(s,ua(n,i,e.g.manifest.retryParameters,t.mimeType),2);o.ue=s.h;e.K=e.ue();a=Jn(e.g.manifest);r.mediaElement&&"AUDIO"===r.mediaElement.nodeName&&(a.disableVideo=!0);e.K.configure(a);_(s)}))}function Au(e,t){var r=t.uri;t=e.H;e.xa=new El((function(){return e.Aa()}));e.xa.addEventListener("regionadd",(function(t){t=t.region;Pp(e,"timelineregionadded",t);if(e.G)e.G.onDashTimedMetadata(t)}));e.ea=null;e.g.streaming.observeQualityChanges&&(e.ea=new yl((function(){return e.Bb()})),e.ea.addEventListener("qualitychange",(function(t){var r=t.quality;t=t.position;r=(new Map).set("mediaQuality",{bandwidth:r.bandwidth,audioSamplingRate:r.audioSamplingRate,codecs:r.codecs,contentType:r.contentType,frameRate:r.frameRate,height:r.height,mimeType:r.mimeType,channelsCount:r.channelsCount,pixelAspectRatio:r.pixelAspectRatio,width:r.width}).set("position",t);e.dispatchEvent(xu("mediaqualitychanged",r))})));var n={networkingEngine:t,filter:function(t){return lp(e,t)},makeTextStreamsForClosedCaptions:function(t){return sp(e,t)},onTimelineRegionAdded:function(t){var r=e.xa;e:{var n=u(r.g);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){n=i;break e}n=null}null==n&&(r.g.add(t),t=new G("regionadd",new Map([["region",t]])),r.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return kp(e,t)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var r=e.m?e.m.g:null;r&&e.m.B&&pp(e,r.keySystem,t)}},i=Date.now()/1e3;return new Wn(function(){var t,o,a,s;return L((function(l){if(1==l.g)return t=e,S(l,e.K.start(r,n),2);t.i=l.h;o=xu("manifestparsed");e.dispatchEvent(o);if(0==e.i.variants.length)throw new De(2,4,4036);Bu(e.i);a=Date.now()/1e3;s=a-i;e.C.H=s;_(l)}))}(),(function(){return e.K.stop()}))}function Iu(e,t){var r,n;return L((function(i){return 1==i.g?(r=Date.now()/1e3,n=!0,e.m=zu(e,{lc:e.H,onError:function(t){kp(e,t)},me:function(t){Ip(e,t)},onExpirationUpdated:function(t,r){jp(e,t,r)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&n&&(n=!1,e.C.j=Date.now()/1e3-r,e.L&&(t=e.L,t.g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.g.drm),S(i,Do(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=i.g?S(i,e.m.$c(t.mediaElement),3):S(i,lp(e,e.i),0)}))}function ju(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E;return L((function(x){switch(x.g){case 1:t.startTime=r.startTime;null!=e.qd&&(t.startTime=e.qd,e.qd=null);n=t.mediaElement;i=t.uri;e.vb=i;e.J=new hl({Wd:function(){return n.playbackRate},Sd:function(){return n.defaultPlaybackRate},Df:function(e){n.playbackRate=e},yg:function(e){n.currentTime+=e}});o=function(){return fp(e)};a=function(){return mp(e)};e.s.o(n,"playing",o);e.s.o(n,"pause",o);e.s.o(n,"ended",o);e.s.o(n,"ratechange",a);_u(e,e.g);s=e.g.abrFactory;e.B&&e.Lf==s||(e.Lf=s,e.B=s(),"function"!=typeof e.B.setMediaElement&&(_n("AbrManager","Please use an AbrManager with setMediaElement function."),e.B.setMediaElement=function(){}),e.B.configure(e.g.abr));e.Ea=new In(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferredAudioLabel);e.fb=e.g.preferredTextLanguage;e.kd=e.g.preferredTextRole;e.ed=e.g.preferForcedSubs;Rp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.B.init((function(t,r,n){e.j&&t!=e.j.j&&wp(e,t,!0,void 0===r?!1:r,void 0===n?0:n)}));e.B.setMediaElement(n);Tr(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredAudioChannelCount,e.g.preferredDecodingAttributes);e.j=Qu(e);e.j.configure(e.g.streaming);e.l=Gp;n.textTracks&&e.s.o(n.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"chapters":Fu(e,t)}}));e.dispatchEvent(xu("streaming"));l=null;(c=e.j.j)||(l=yp(e)?e.B.chooseVariant():null);p=[];d=c||l;h=u([d.video,d.audio]);for(m=h.next();!m.done;m=h.next())(f=m.value)&&!f.segmentIndex&&p.push(f.createSegmentIndex());if(!(0<p.length)){x.D(2);break}return S(x,Promise.all(p),2);case 2:Rp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.F=Wu(e,t.startTime);e.hb=Gu(e,t.ye);g=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal);Ku(e,g);if(c){x.D(4);break}wp(e,l,!0,!1,0);if(!e.g.streaming.startAtSegmentBoundary){x.D(4);break}y=e.F.Jd();return S(x,dp(l,y),6);case 6:b=x.h,e.F.Oe(b);case 4:return e.F.Ne(),v=e.Sb().find((function(e){return e.active})),v||((w=sn(e.i.textStreams,e.fb,e.kd,e.ed)[0]||null)&&vu(e.C.h,w,!0),l&&(w?(l.audio&&Sp(e,l.audio,w)&&(e.Z=!0),e.Z&&e.I.C.setTextVisibility(!0),Cp(e)):e.Z=!1),w&&(e.g.streaming.alwaysStreamText||e.jc())&&Fl(e.j,w)),S(x,e.j.start(),7);case 7:e.g.abr.enabled&&(e.B.enable(),Tp(e)),Wr(e.j?e.j.j:null,e.i),Lp(e.i),_p(e),yp(e),e.i.variants.some((function(e){return e.primary})),e.S()&&(e.g.streaming.liveSync||e.i.serviceDescription)&&(E=function(){return gp(e)},e.s.o(n,"timeupdate",E)),e.nd=!0,e.s.wa(n,"loadedmetadata",(function(){e.C.m=Date.now()/1e3-r.ye})),_(x)}}))}function Ru(e,t,r){var n,i,o,a,s,l,c;return L((function(u){return 1==u.g?(n=Ne,i=Date.now()/1e3,o=!0,e.m=zu(e,{lc:e.H,onError:function(t){kp(e,t)},me:function(t){Ip(e,t)},onExpirationUpdated:function(t,r){jp(e,t,r)},onEvent:function(t){e.dispatchEvent(t);"drmsessionupdate"==t.type&&o&&(o=!1,e.C.j=Date.now()/1e3-i)}}),e.m.configure(e.g.drm),a=r.uri||"",s=da(a),l=Jp[s],"application/x-mpegurl"==l&&vr()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),c={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:r.mimeType?r.mimeType.split(";")[0]:l,codecs:r.mimeType?er(r.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Y=!0,S(u,Do(e.m,[c],[]),2)):S(u,e.m.$c(t.mediaElement),0)}))}function Nu(e,t,r){function n(){return fp(e)}t.uri=r.uri;t.startTime=r.startTime;e.vb=t.uri;var i=t.mediaElement;e.F=new rl(i);var o=!1;e.Pb.push((function(){o=!0}));null!=t.startTime&&e.F.Oe(t.startTime);e.J=new hl({Wd:function(){return i.playbackRate},Sd:function(){return i.defaultPlaybackRate},Df:function(e){i.playbackRate=e},yg:function(e){i.currentTime+=e}});Ku(e,e.g.streaming.rebufferingGoal);e.s.o(i,"playing",n);e.s.o(i,"pause",n);e.s.o(i,"ended",n);e.s.o(i,"ratechange",(function(){return mp(e)}));"none"!=i.preload&&e.s.wa(i,"loadedmetadata",(function(){e.C.m=Date.now()/1e3-r.ye}));i.audioTracks&&(e.s.o(i.audioTracks,"addtrack",(function(){return _p(e)})),e.s.o(i.audioTracks,"removetrack",(function(){return _p(e)})),e.s.o(i.audioTracks,"change",(function(){return _p(e)})));i.textTracks&&(e.s.o(i.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":qu(e,t);break;case"chapters":Fu(e,t);break;default:_p(e)}})),e.s.o(i.textTracks,"removetrack",(function(){return _p(e)})),e.s.o(i.textTracks,"change",(function(){return _p(e)})));var a=da(t.uri);i.src=Uc(e.V,t.uri,Jp[a]);(yr()||Sr("Web0S"))&&i.load();e.l=Kp;e.dispatchEvent(xu("streaming"));var s=new Vn;Ks(i,HTMLMediaElement.HAVE_METADATA,e.s,(function(){e.F.Ne();s.resolve()}));Ks(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,(function(){var t;return L((function(r){if(1==r.g)return Lu(e),t=Zu(e),t.find((function(e){return"disabled"!=e.mode}))?(0<t.length&&(e.Z=!0),r.D(2)):S(r,new Promise((function(t){e.s.wa(i.textTracks,"change",t);new dr(t).R(1)})),2);if(o)return r.return();Mu(e);_(r)}))}));i.error?s.reject(Ap(e)):"none"==i.preload&&(Q('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve());e.s.wa(i,"error",(function(){s.reject(Ap(e))}));return new Wn(s,(function(){s.reject(new De(2,7,7001));return Promise.resolve()})).qa((function(){e.S()&&e.g.streaming.liveSync&&e.s.o(i,"timeupdate",(function(){return gp(e)}));e.nd=!0}))}function Lu(e){var t=e.g.preferredAudioLanguage;""!=t&&e.xf(t,e.g.preferredVariantRole)}function Mu(e){var t=e.g.preferredTextLanguage;""!=t&&e.Eg(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function qu(e,t){if("metadata"==t.kind){t.mode="hidden";e.s.o(t,"cuechange",(function(){if(t.activeCues)for(var r=u(t.activeCues),n=r.next();!n.done;n=r.next())if(n=n.value,Hu(e,n.startTime,n.endTime,n.type,n.value),e.G)e.G.onCueMetadataChange(n.value)}));var r=new dr((function(){var t=ep(e);t=u(t);for(var r=t.next();!r.done;r=t.next())r.value.mode="hidden"})).Ca().R(.5);e.Pb.push((function(){r.stop()}))}}function Uu(e,t,r,n){t=u(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,i.data&&i.cueTime&&i.frames){var o=i.cueTime+r,a=n;a&&o>a&&(a=o);for(var s=u(i.frames),l=s.next();!l.done;l=s.next())Hu(e,o,a,"org.id3",l.value);if(e.G)e.G.onHlsTimedMetadata(i,o)}}function Hu(e,t,r,n,i){t=(new Map).set("startTime",t).set("endTime",r).set("metadataType",n).set("payload",i);e.dispatchEvent(xu("metadata",t))}function Fu(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var r=new dr((function(){t.mode="hidden"})).Ca().R(.5);e.Pb.push((function(){r.stop()}))}}function Bu(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function zu(e,t){return new So(t,e.g.drm.updateExpirationTime)}function Vu(e){return new ri((function(t,r){e.B&&e.B.segmentDownloaded(t,r)}),(function(t,r,n){t=(new Map).set("headers",t).set("request",r).set("requestType",n);e.dispatchEvent(xu("downloadheadersreceived",t))}),(function(t,r,n,i){t=(new Map).set("request",t).set("error",r).set("httpResponseCode",n).set("aborted",i);e.dispatchEvent(xu("downloadfailed",t))}),(function(t,r,n){var i=e.V;n=void 0===n?{}:n;if(i.g.enabled)if("HEAD"===r.method)Fc(i,r);else switch(t){case 0:try{if(i.g.enabled){if(n.type){e:{switch(n.type){case 4:var o="d";break e;case 3:case 2:o="h";break e;case 5:o="s";break e}o=void 0}i.s=o}Fc(i,r,{ot:$c,su:!i.i})}}catch(e){J("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case ui:t=n;try{if(i.g.enabled){var a=t.segment;o=0;a&&(o=a.endTime-a.startTime);var s={d:1e3*o,st:i.h.S()?"l":"v"};s.ot=Bc(t);var l=s.ot===Yc||s.ot===Xc||s.ot===Qc||s.ot===eu,c=t.stream;c&&(l&&(s.bl=zc(i,c.type)),c.bandwidth&&(s.br=c.bandwidth/1e3));l&&s.ot!==eu&&(s.tb=Vc(i,s.ot)/1e3);Fc(i,r,s)}}catch(e){J("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:Fc(i,r,{ot:"k"});break;case 4:Fc(i,r,{ot:"o"})}}))}function Wu(e,t){return new nl(e.h,e.i,e.g.streaming,t,(function(){e.hb&&gl(e.hb,!0);e.j&&e.j.xd();e.O&&$u(e)}),(function(t){return e.dispatchEvent(t)}))}function Gu(e,t){t=new Sl(e.xa,e.S()||0<t);t.addEventListener("enter",(function(t){Pp(e,"timelineregionenter",t.region)}));t.addEventListener("exit",(function(t){Pp(e,"timelineregionexit",t.region)}));t.addEventListener("skip",(function(t){var r=t.region;t.seeking||(Pp(e,"timelineregionenter",r),Pp(e,"timelineregionexit",r))}));var r=new fl(e.h);r.g.add(t);e.ea&&r.g.add(e.ea);return r}function Ku(e,t){e.O=new Mn;e.O.g=Un;qn(e.O,t,Math.min(.5,t/2));hp(e);e.ge=new dr((function(){$u(e)})).ha(.25)}function $u(e){switch(e.l){case Kp:if(e.h.ended)var t=!0;else{var r=xa(e.h.buffered);t=null!=r&&r>=e.h.duration-1}break;case Gp:e:if(e.h.ended||ms(e.I))t=!0;else{if(e.i.presentationTimeline.S()){r=e.i.presentationTimeline.cc();var n=xa(e.h.buffered);if(null!=n&&n>=r){t=!0;break e}}t=!1}break;default:t=!1}n=Ca(e.h.buffered,e.h.currentTime);r=e.O;var i=t,o=r.h.get(r.g);t=r.g;n=i||n>=o?Hn:Un;r.g=n;t!=n&&hp(e)}function Xu(e,t,r,n){return new cs(e,t,r,n)}function Yu(e){return new qc({getBandwidthEstimate:function(){return e.B?e.B.getBandwidthEstimate():NaN},Bb:function(){return e.Bb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Rb:function(){return e.Rb()},ac:function(){return e.ac()},Va:function(){return e.Va()},S:function(){return e.S()}},e.g.cmcd)}function Qu(e){return new Nl(e.i,{Vd:function(){return e.F?e.F.Jd():0},getBandwidthEstimate:function(){return e.B.getBandwidthEstimate()},W:e.I,lc:e.H,onError:function(t){return kp(e,t)},onEvent:function(t){return e.dispatchEvent(t)},gi:function(){e.K&&e.K.update&&e.K.update()},pf:function(t,r,n){e.F&&e.F.zg();$u(e);t=(new Map).set("start",t).set("end",r).set("contentType",n);e.dispatchEvent(xu("segmentappended",t))},ei:function(t,r){(r=r.jf)&&e.ea&&vl(e.ea,r,t)},Zf:function(t,r){var n=e.m;if(n.h.parseInbandPsshEnabled&&!n.K&&["audio","video"].includes(t)){r=new Qi(ut(r));var i=0,o=u(r.data);for(t=o.next();!t.done;t=o.next())i+=t.value.length;if(0==i)n=Promise.resolve();else{i=new Uint8Array(i);o=0;r=u(r.data);for(t=r.next();!t.done;t=r.next())t=t.value,i.set(t,o),o+=t.length;jo(n,"cenc",i);n=n.l}}else n=Promise.resolve();return n},ii:function(t,r,n){Uu(e,t,r,n)},Re:function(t,r){return e.Re(t,r)}})}n.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=nu(e,t));e.streaming&&"forceTransmuxTS"in e.streaming&&(_n("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS);e.streaming&&"forceTransmux"in e.streaming&&(_n("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux);e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01),void 0==e.streaming.segmentPrefetchLimit&&(e.streaming.segmentPrefetchLimit=2));var r=du(this.g,e,ap(this));Ju(this);return r};function Ju(e){if(e.K){var t=Jn(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0);e.K.configure(t)}e.m&&e.m.configure(e.g.drm);if(e.j){e.j.configure(e.g.streaming);try{up(e,e.i)}catch(t){kp(e,t)}e.B&&yp(e);t=e.j.j;!t||t.allowedByApplication&&t.allowedByKeySystem||vp(e)}e.H&&e.H.Bf(e.g.streaming.forceHTTPS);if(e.I&&(e.I.configure(e.g.mediaSource),e.I.P=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.Qf!=t)){var r=t(),n=e.I,i=n.C;n.C=r;i&&(r.setTextVisibility(i.isTextVisible()),i.destroy());n.g&&(n.g.j=r);e.Qf=t;e.j&&(t=e.j,(r=t.h.get(Re))&&Bl(t,r.stream,!0,0,!0))}e.B&&(e.B.configure(e.g.abr),e.g.abr.enabled?e.B.enable():e.B.disable(),Tp(e));e.O&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),qn(e.O,t,Math.min(.5,t/2)));e.i&&Rp(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd);e.G&&e.G.configure(e.g.ads);e.V&&e.V.configure(e.g.cmcd)}n.getConfiguration=function(){var e=ap(this);du(e,this.g,ap(this));return e};n.lh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;t=Math.min(this.h.currentTime+t,this.Aa().end);if(e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0};n.ri=function(){for(var e in this.g)delete this.g[e];du(this.g,ap(this),ap(this));Ju(this)};n.Ve=function(){return this.l};n.Ch=function(){return this.i?this.i.type:null};n.Eh=function(){return this.h};n.ac=function(){return this.H};n.Ue=function(){return this.vb};n.Qd=function(){return this.G?this.G:null};n.S=function(){return this.i?this.i.presentationTimeline.S():this.h&&this.h.src?Infinity==this.h.duration:!1};n.hc=function(){return this.i?this.i.presentationTimeline.hc():!1};n.Cc=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight:!1};n.Aa=function(){if(!this.nd)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Ac(),end:e.Cb()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}};n.Rh=function(){this.S()&&(this.h.currentTime=this.Aa().end)};n.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""};n.drmInfo=function(){return this.m?this.m.g:null};n.gd=function(){return this.m?this.m.gd():Infinity};n.Te=function(){return this.m?this.m.Te():[]};n.Ud=function(){return this.m?this.m.Ud():{}};n.pd=function(){return this.O?this.O.g==Un:!1};n.Rb=function(){return this.h?this.J?this.J.i:1:0};n.ze=function(e){0==e?Q("A trick play rate of 0 is unsupported!"):(this.h.paused&&this.h.play(),this.J.set(e),this.l==Gp&&(this.B.playbackRateChanged(e),Ul(this.j,1<Math.abs(e))))};n.Pe=function(){var e=this.J.Sd();this.l==Kp&&this.J.set(e);this.l==Gp&&(this.J.set(e),this.B.playbackRateChanged(e),Ul(this.j,!1))};n.Va=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],r=0,n=u(this.i.variants),i=n.next();!i.done;i=n.next())if(i=i.value,nn(i)){var o=Yr(i);o.active=i==e;o.active||1==r||null==e||i.video!=e.video||i.audio!=e.audio||(o.active=!0);o.active&&r++;t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map((function(e){return tn(e)})):[]};n.Sb=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],r=u(this.i.textStreams),n=r.next();!n.done;n=r.next()){n=n.value;var i=Qr(n);i.active=n==e;t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?Zu(this).map((function(e){return en(e)})):[]};n.Td=function(){return this.i?this.i.imageStreams.map((function(e){return Jr(e)})):[]};n.pg=function(e,t){var r=this,n,i,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v,w,E,_;return L((function(x){if(1==x.g)return r.i?(n=r.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?x.D(3):S(x,n.createSegmentIndex(),3):x.return(null):x.D(2);if(2!=x.g){i=n.segmentIndex.find(t);if(null==i)return x.return(null);o=n.segmentIndex.get(i);a=o.tilesLayout||n.tilesLayout;s=/(\d+)x(\d+)/.exec(a);if(!s)return x.return(null);l=n.width||0;c=n.height||0;u=parseInt(s[1],10);p=parseInt(s[2],10);d=l/u;h=c/p;m=u*p;f=o.j-o.startTime;g=o.G||f/m;y=o.startTime;v=b=0;1<m&&(w=Math.floor((t-o.startTime)/g),y=o.startTime+w*g,b=w%u*d,v=Math.floor(w/u)*h);E=!1;if(_=o.F)E=!0,h=_.height,b=_.positionX,v=_.positionY,d=_.width;return x.return({imageHeight:c,imageWidth:l,height:h,positionX:b,positionY:v,startTime:y,duration:g,uris:o.Oa(),width:d,sprite:E})}return x.return(null)}))};n.yf=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.s&&(vu(this.C.h,t,!1),Fl(this.j,t),Dp(this),this.fb=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=Zu(this);t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,Zr(r)==e.id?r.mode=this.Z?"showing":"hidden":r.mode="disabled";Dp(this)}};n.we=function(e,t,r){t=void 0===t?!1:t;r=void 0===r?0:r;if(this.i&&this.j){this.g.abr.enabled&&Q("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var n=this.i.variants.find((function(t){return t.id==e.id}));n&&nn(n)&&(wp(this,n,!1,t,r),this.Ea=new An(n),yp(this))}else if(this.h&&this.h.audioTracks)for(t=Array.from(this.h.audioTracks),t=u(t),r=t.next();!r.done;r=t.next())if(r=r.value,Zr(r)==e.id){Ep(this,r);break}};n.kh=function(){return Up(this.Va())};n.Kh=function(){return Up(this.Sb())};n.jh=function(){return Array.from(qp(this.Va()))};n.Jh=function(){return Array.from(qp(this.Sb()))};n.xf=function(e,t,r,n){r=void 0===r?0:r;n=void 0===n?0:n;if(this.i&&this.F){this.Ea=new In(e,t||"",r,"","");e=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):Infinity:0};t=this.j.j;var i=this.Ea.create(this.i.variants);r=null;i=u(i.values());for(var o=i.next();!o.done;o=i.next())if(o=o.value,!r||e(r,t)>e(o,t))r=o;r?(e=Yr(r),this.we(e,!0,n)):vp(this)}else this.h&&this.h.audioTracks&&(n=sn(this.Va(),e,t||"",!1)[0])&&this.we(n)};n.Eg=function(e,t,r){r=void 0===r?!1:r;if(this.i&&this.F){if(this.fb=e,this.kd=t||"",this.ed=r,(e=sn(this.i.textStreams,this.fb,this.kd,this.ed)[0]||null)&&e!=this.j.s&&(vu(this.C.h,e,!1),this.g.streaming.alwaysStreamText||this.jc()))Fl(this.j,e),Dp(this)}else(e=sn(this.Sb(),e,t||"",r)[0])&&this.yf(e)};n.xi=function(e,t,r){t=void 0===t?!0:t;r=void 0===r?0:r;if(this.i&&this.F){for(var n=null,i=u(this.i.variants),o=i.next();!o.done;o=i.next())if(o=o.value,o.audio.label==e){n=o;break}null!=n&&(this.Ea=new In(n.language,"",0,"",e),vp(this,t,r))}else if(this.h&&this.h.audioTracks){r=Array.from(this.h.audioTracks);t=null;r=u(r);for(n=r.next();!n.done;n=r.next())n=n.value,n.label==e&&(t=n);t&&Ep(this,t)}};n.jc=function(){var e=this.Z;return this.I?this.I.C.isTextVisible():this.h&&this.h.src&&this.h.textTracks?Zu(this).some((function(e){return"showing"==e.mode})):e};n.mg=function(){return this.h&&this.h.src&&this.h.textTracks?tp(this).map((function(e){return en(e)})):[]};n.nh=function(e){var t=Fe(e),r=tp(this).filter((function(e){return Fe(e.language)==t}));if(!r||!r.length)return[];e=[];var n=new Set;r=u(r);for(var i=r.next();!i.done;i=r.next())if((i=i.value)&&i.cues){i=u(i.cues);for(var o=i.next();!o.done;o=i.next()){var a=o.value;(o=a.id)&&""!=o||(o=a.startTime+"-"+a.endTime+"-"+a.text);a={id:o,title:a.text,startTime:a.startTime,endTime:a.endTime};n.has(o)||(e.push(a),n.add(o))}}return e};function Zu(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function ep(e){return Array.from(e.h.textTracks).filter((function(e){return"metadata"==e.kind}))}function tp(e){return Array.from(e.h.textTracks).filter((function(e){return"chapters"==e.kind}))}n.Ff=function(e){e=!!e;if(this.Z!=e){this.Z=e;if(this.l==Gp)this.I.C.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=sn(this.i.textStreams,this.fb,this.kd,this.ed),0<e.length&&(Fl(this.j,e[0]),Dp(this))):ql(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=Zu(this);t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value,"disabled"!=r.mode&&(r.mode=e?"showing":"hidden")}Cp(this)}};n.Gh=function(){if(!this.S())return null;var e=this.ya.l,t=0;if(this.F)t=this.F.Jd();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null};n.og=function(){if(!this.S())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null};n.Bb=function(){if(this.l==Gp)return this.I.Bb();var e={total:[],audio:[],video:[],text:[]};this.l==Kp&&(e.total=Oa(this.h.buffered));return e};n.getStats=function(){if(this.l!=Gp&&this.l!=Kp)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};fp(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var r=this.C;t=Math.round(100*t);r.i=isNaN(r.i)?t:Math.max(r.i,t)}this.F&&(this.C.O=this.F.Vf(),this.C.P=this.F.Wf());if(e.getVideoPlaybackQuality){r=e.getVideoPlaybackQuality();t=this.C;var n=Number(r.totalVideoFrames);t.L=Number(r.droppedVideoFrames);t.K=n;this.C.J=Number(r.corruptedVideoFrames)}this.m?(r=this.m,r=r.J?r.J:NaN):r=NaN;this.C.B=r;if(this.l==Gp){if(r=this.j.j)this.C.F=(this.J?this.J.i:1)*r.bandwidth;r&&r.video&&(t=this.C,n=r.video.height||NaN,t.s=r.video.width||NaN,t.l=n);this.S()&&(r=this.og().valueOf()+1e3*this.Aa().end,this.C.G=(Date.now()-r)/1e3);this.i&&this.i.presentationTimeline&&(this.C.I=this.i.presentationTimeline.g);r=this.B.getBandwidthEstimate();this.C.C=r}this.l==Kp&&(r=this.C,t=e.videoHeight||NaN,r.s=e.videoWidth||NaN,r.l=t);var i=this.C;e=i.s;r=i.l;t=i.F;n=i.K;var o=i.L,a=i.J,s=i.P,l=i.O,c=i.C,p=i.i,d=i.m,h=i.H,m=i.j,f=gu(i.g,"playing"),g=gu(i.g,"paused"),y=gu(i.g,"buffering"),b=i.B,v=i.G,w=i.I,E=yu(i.g),S=[];i=u(i.h.g);for(var _=i.next();!_.done;_=i.next())_=_.value,S.push({timestamp:_.timestamp,id:_.id,type:_.type,fromAdaptation:_.fromAdaptation,bandwidth:_.bandwidth});return{width:e,height:r,streamBandwidth:t,decodedFrames:n,droppedFrames:o,corruptedFrames:a,stallsDetected:s,gapsJumped:l,estimatedBandwidth:c,completionPercent:p,loadLatency:d,manifestTimeSeconds:h,drmTimeSeconds:m,playTime:f,pauseTime:g,bufferingTime:y,licenseTime:b,liveLatency:v,maxSegmentDuration:w,stateHistory:E,switchHistory:S}};n.Wg=function(e,t,r,n,i,o,a){a=void 0===a?!1:a;var s=this,l,c,u,p,d,h,m,f,g,y,b;return L((function(v){switch(v.g){case 1:if(s.l!=Gp&&s.l!=Kp)throw new De(1,7,7004);if(n){v.D(2);break}return S(v,rp(s,e),3);case 3:n=v.h;case 2:l=[];if(s.G)try{l=s.G.getServerSideCuePoints()}catch(e){}if(s.l!=Kp){v.D(4);break}a&&(r="forced");return S(v,np(s,e,t,r,n,o||"",l),5);case 5:c=s.Sb();if(u=c.find((function(e){return e.language==t&&e.label==(o||"")&&e.kind==r})))return _p(s),v.return(u);throw new De(1,2,2012);case 4:p=Ne;d=s.i.presentationTimeline.getDuration();if(Infinity==d)throw new De(1,4,4033);if(!l.length){v.D(6);break}return S(v,ip(s,e,s.H,s.g.streaming.retryParameters),7);case 7:h=v.h,m=op(s,h,n,l),f=new Blob([m],{type:"text/vtt"}),e=qs(f),n="text/vtt";case 6:g={id:s.Tf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ul(0,d,[e]),mimeType:n||"",codecs:i||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:p.na,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!a,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0};y=Yt(g.mimeType,g.codecs);b=ir(y);if(!b)throw new De(2,2,2014,n);s.i.textStreams.push(g);_p(s);return v.return(Qr(g))}}))};n.Xg=function(e,t){var r=this,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:if(r.l!=Gp&&r.l!=Kp)throw new De(1,7,7004);if(r.l==Kp)throw new De(1,2,2016);if(t){w.D(2);break}return S(w,rp(r,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new De(1,2,2017,e);n=Ne;i=r.i.presentationTimeline.getDuration();if(Infinity==i)throw new De(1,4,4045);return S(w,ip(r,e,r.H,r.g.streaming.retryParameters),4);case 4:o=w.h;a=ur[t];if(!a)throw new De(2,2,2014,t);s=a();l={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0};c=ut(o);p=s.parseMedia(c,l);d=[];h={};m=u(p);for(f=m.next();!f.done;h={Pc:h.Pc},f=m.next())g=f.value,h.Pc=Pe([e],[g.payload])[0],y=new Ea(g.startTime,g.endTime,function(e){return function(){return[e.Pc]}}(h),0,null,null,0,0,Infinity),h.Pc.includes("#xywh")&&(b=h.Pc.split("#xywh=")[1].split(","),4===b.length&&y.Lg({height:parseInt(b[3],10),positionX:parseInt(b[0],10),positionY:parseInt(b[1],10),width:parseInt(b[2],10)})),d.push(y);v={id:r.Tf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ll(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Zc,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0};r.i.imageStreams.push(v);_p(r);return w.return(Jr(v))}}))};n.Vg=function(e,t,r){var n=this,i,o,a,s;return L((function(l){switch(l.g){case 1:if(n.l!=Gp&&n.l!=Kp)throw new De(1,7,7004);if(r){l.D(2);break}return S(l,rp(n,e),3);case 3:r=l.h;case 2:i=[];if(n.G)try{i=n.G.getServerSideCuePoints()}catch(e){}return S(l,np(n,e,t,"chapters",r,"",i),4);case 4:o=l.h;a=n.mg();s=a.find((function(e){return e.language==t}));if(!s){l.D(5);break}return S(l,new Promise((function(e,t){n.s.wa(o,"load",e);n.s.wa(o,"error",(function(){t(new De(1,2,2015))}))})),6);case 6:return l.return(s);case 5:throw new De(1,2,2012)}}))};function rp(e,t){var r,n;return L((function(i){switch(i.g){case 1:r=da(t);if(n=Zp[r])return i.return(n);x(i,2);return S(i,pa(t,e.H,e.g.streaming.retryParameters),4);case 4:n=i.h;C(i,3);break;case 2:T(i);case 3:if(n)return i.return(n);throw new De(1,2,2011,r)}}))}function np(e,t,r,n,i,o,a){var s,l,c,u;return L((function(p){if(1==p.g)return"text/vtt"!=i||a.length?S(p,ip(e,t,e.H,e.g.streaming.retryParameters),3):p.D(2);2!=p.g&&(s=p.h,l=op(e,s,i,a),c=new Blob([l],{type:"text/vtt"}),t=qs(c),i="text/vtt");u=document.createElement("track");var d=e.V,h=t;try{if(d.g.enabled){var m=Hc(d);m.ot=Zc;m.su=!0;var f=Wc(m);var g=Kc(h,f)}else g=h}catch(e){J("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),g=h}u.src=g;u.label=o;u.kind=n;u.srclang=r;e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous");e.h.appendChild(u);return p.return(u)}))}function ip(e,t,r,n){var i,o,a;return L((function(s){if(1==s.g){i=ui;o=ii([t],n);o.method="GET";var l=e.V;try{l.g.enabled&&Fc(l,o,{ot:Zc,su:!0})}catch(e){J("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return S(s,r.request(i,o).promise,2)}a=s.h;return s.return(a.data)}))}function op(e,t,r,n){var i=ur[r];if(i)return r=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=ut(t),t=r.parseMedia(t,e),Mc(t,n);throw new De(2,2,2014,r)}n.Cf=function(e,t){this.Sf.width=e;this.Sf.height=t};n.uf=function(e){if(this.l==Gp){var t=this.j;e=void 0===e?.1:e;if(t.l.g)t=!1;else if(t.B)t=!1;else{for(var r=u(t.h.values()),n=r.next();!n.done;n=r.next())n=n.value,!n.md||n.Ma||n.ub||(n.md=!1,lc(t,n,e));t=!0}}else t=!1;return t};n.Ah=function(){Q("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return this.i};n.Bh=function(){return this.ue};function ap(e){var t=pu();t.streaming.failureCallback=function(t){if(e.S()){var r=null;1001==t.code||1002==t.code?r=1:1003==t.code&&(r=.1);null!=r&&(t.severity=1,e.uf(r))}};t.textDisplayFactory=function(){return e.ce?new Oc(e.h,e.ce):new Ec(e.h)};return t}n.Gf=function(e){this.ce=e};function sp(e,t){for(var r=new Set,n=u(t.textStreams),i=n.next();!i.done;i=n.next())i=i.value,"application/cea-608"!=i.mimeType&&"application/cea-708"!=i.mimeType||r.add(i.originalId);n=u(t.variants);for(i=n.next();!i.done;i=n.next())if((i=i.value.video)&&i.closedCaptions)for(var o=u(i.closedCaptions.keys()),a=o.next();!a.done;a=o.next())if(a=a.value,!r.has(a)){var s=a.startsWith("CC")?"application/cea-608":"application/cea-708",l=new dl,c=i.closedCaptions.get(a);s={id:e.Tf++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:c,originalLanguage:c,label:null,type:Re,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1};t.textStreams.push(s);r.add(a)}}function lp(e,t){return L((function(r){if(1==r.g)return S(r,cp(e,t),2);up(e,t);_(r)}))}function cp(e,t){var r;return L((function(n){if(1==n.g)return r=e.j?e.j.j:null,S(n,Mr(r,t),2);Lp(t);_(n)}))}function up(e,t){if(e.l!=Vp){for(var r=e.g.restrictions,n=e.Sf,i=!1,o=u(t.variants),a=o.next();!a.done;a=o.next()){a=a.value;var s=a.allowedByApplication;a.allowedByApplication=Lr(a,r,n);s!=a.allowedByApplication&&(i=!0)}i&&e.j&&_p(e);if((r=e.m?e.m.g:null)&&e.m.B)for(n=u(t.variants),i=n.next();!i.done;i=n.next())i=i.value,pp(e,r.keySystem,i.video),pp(e,r.keySystem,i.audio);Np(e,t)}}function pp(e,t,r){if(r){r=u(r.drmInfos);for(var n=r.next();!n.done;n=r.next())if(n=n.value,n.keySystem==t){n=u(n.initData||[]);for(var i=n.next();!i.done;i=n.next())i=i.value,jo(e.m,i.initDataType,i.initData)}}}function dp(e,t){var r,n,i,o,a;return L((function(s){if(1==s.g)return r=e.audio,n=e.video,i=function(e,t){var r,n,i;return L((function(o){if(1==o.g)return e?S(o,e.createSegmentIndex(),2):o.return(null);n=(r=e.segmentIndex.$b(t))?r.next().value:null;if(!n)return o.return(null);i=n.startTime;return o.return(i)}))},S(s,i(r,t),2);if(3!=s.g)return o=s.h,S(s,i(n,t),3);a=s.h;return null!=a&&null!=o?s.return(Math.max(a,o)):null!=a?s.return(a):null!=o?s.return(o):s.return(t)}))}function hp(e){var t=e.pd();if(e.C&&e.O&&e.F){var r=e.J;r.j=t;ml(r);e.V&&(r=e.V,t||r.i||(r.i=!0),r.i&&t&&(r.l=!0),r.m=t);fp(e)}t=(new Map).set("buffering",t);e.dispatchEvent(xu("buffering",t))}function mp(e){var t=e.h.playbackRate;0!=t&&(e.J&&e.J.set(t),t=xu("ratechange"),e.dispatchEvent(t))}function fp(e){if(e.C&&e.O){var t=e.C.g;e.O.g==Un?fu(t,"buffering"):e.h.paused?fu(t,"paused"):e.h.ended?fu(t,"ended"):fu(t,"playing")}}function gp(e){if(e.S()){var t=e.Aa();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync){var r=e.g.streaming.liveSyncMaxLatency;var n=e.g.streaming.liveSyncPlaybackRate}else e.i&&e.i.serviceDescription&&(r=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,n=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);var i=e.h.playbackRate,o=t.end-e.h.currentTime,a=0;if(e.l==Kp){var s=e.h.buffered;0<s.length&&(a=s.end(s.length-1),a=Math.max(n,a-t.end))}r&&n&&o-a>r?i!=n&&e.ze(n):1!==i&&0!==i&&e.Pe()}}}function yp(e){try{Np(e,e.i)}catch(t){return kp(e,t),!1}var t=on(e.i.variants);t=e.Ea.create(t);e.B.setVariants(Array.from(t.values()));return!0}function bp(e){function t(e){var t="";e.video&&(t+="video:"+e.video.id);e.audio&&(t=t+(t?"&":"")+("audio:"+e.audio.id));return t}for(var r=Date.now()/1e3,n=!1,i=u(e.i.variants),o=i.next();!o.done;o=i.next())o=o.value,0<o.disabledUntilTime&&o.disabledUntilTime<=r&&(o.disabledUntilTime=0,n=!0,re("Re-enabled variant with "+t(o)));e.i.variants.every((function(e){return 0===e.disabledUntilTime}))&&e.ke.stop();n&&vp(e,!0,void 0,!1,!1)}function vp(e,t,r,n,i){t=void 0===t?!0:t;r=void 0===r?0:r;n=void 0===n?!1:n;i=void 0===i?!0:i;var o;(o=yp(e)?e.B.chooseVariant():null)&&wp(e,o,i,t,r,n)}function wp(e,t,r,n,i,o){o=void 0===o?!1:o;var a=e.j.j;if(t==a)n&&Hl(e.j,t,n,i,!0);else{var s=e.C.h;s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:r,bandwidth:t.bandwidth}));Hl(e.j,t,n,i,o,r);n=null;a&&(n=Yr(a));t=Yr(t);r?(r=(new Map).set("oldTrack",n).set("newTrack",t),e.L&&os(e.L,t),r=xu("adaptation",r),Mp(e,r)):xp(e,n,t)}}function Ep(e,t){var r=Array.from(e.h.audioTracks).find((function(e){return e.enabled}));t.enabled=!0;t.id!==r.id&&(r.enabled=!1);r=tn(r);t=tn(t);xp(e,r,t)}function Sp(e,t,r){if(0==e.g.autoShowText)return!1;if(1==e.g.autoShowText)return!0;var n=Fe(e.g.preferredTextLanguage);r=Fe(r.language);if(2==e.g.autoShowText)return qe(r,n);if(3==e.g.autoShowText)return e=Fe(t.language),qe(r,n)&&!qe(e,r);Q("Invalid autoShowText setting!");return!1}function _p(e){var t=xu("trackschanged");Mp(e,t)}function xp(e,t,r){t=(new Map).set("oldTrack",t).set("newTrack",r);e.L&&os(e.L,r);r=xu("variantchanged",t);Mp(e,r)}function Dp(e){var t=xu("textchanged");Mp(e,t)}function Cp(e){var t=xu("texttrackvisibility");Mp(e,t)}function Tp(e){e.g.abr.enabled||Op(e);var t=(new Map).set("newStatus",e.g.abr.enabled);Mp(e,xu("abrstatuschanged",t))}function Op(e,t){t=void 0===t?!0:t;if(e.l==Gp){e.ke.stop();for(var r=u(e.i.variants),n=r.next();!n.done;n=r.next())n.value.disabledUntilTime=0;t&&yp(e)}}n.Re=function(e,t){if(!this.g.abr.enabled||this.l===Vp||!navigator.onLine)return!1;if(this.i.variants.some((function(t){return(t=t[e.type])&&t.id!==e.id?"audio"==e.type?e.language===t.language:!0:!1}))){for(var r=u(this.i.variants),n=r.next();!n.done;n=r.next()){n=n.value;var i=n[e.type];i&&i.id===e.id&&(n.disabledUntilTime=Date.now()/1e3+t)}this.ke.ha(1);t=this.Bb().video.reduce((function(e,t){return e+t.end-t.start}),0);vp(this,!0,t,!0,!1);return!0}return!1};function kp(e,t){if(e.l!=Vp){2===t.severity&&Op(e,!1);var r=xu("error",(new Map).set("detail",t));e.dispatchEvent(r);r.defaultPrevented&&(t.handled=!0)}}function Pp(e,t,r){r=(new Map).set("detail",{schemeIdUri:r.schemeIdUri,value:r.value,startTime:r.startTime,endTime:r.endTime,id:r.id,eventElement:r.eventElement});e.dispatchEvent(xu(t,r))}function Ap(e){if(!e.h.error)return null;var t=e.h.error.code;if(1==t)return null;var r=e.h.error.msExtendedCode;r&&(0>r&&(r+=Math.pow(2,32)),r=r.toString(16));return new De(2,3,3016,t,r,e.h.error.message)}function Ip(e,t){if(e.j){var r=Object.keys(t),n=1==r.length&&"00"==r[0],i=!1;if(r.length){r=u(e.i.variants);for(var o=r.next();!o.done;o=r.next()){o=o.value;var a=[];o.audio&&a.push(o.audio);o.video&&a.push(o.video);a=u(a);for(var s=a.next();!s.done;s=a.next()){var l=s.value;s=o.allowedByKeySystem;if(l.keyIds.size){o.allowedByKeySystem=!0;l=u(l.keyIds);for(var c=l.next();!c.done;c=l.next())c=c.value,c=t[n?"00":c],o.allowedByKeySystem=o.allowedByKeySystem&&!!c&&!Xp.includes(c)}s!=o.allowedByKeySystem&&(i=!0)}}}if(!i||yp(e))(t=e.j.j)&&!t.allowedByKeySystem&&vp(e),i&&_p(e)}}function jp(e,t,r){if(e.K&&e.K.onExpirationUpdated)e.K.onExpirationUpdated(t,r);t=xu("expirationupdated");e.dispatchEvent(t)}function Rp(e,t,r){0<t&&(e.S()||e.Mg(t));t=e.getDuration();r<t&&(e.S()||e.Ra(r))}function Np(e,t){e=e.m?e.m.Ud():{};var r=Object.keys(e);r=r.length&&"00"==r[0];var n=!1,i=!1,o=new Set,a=new Set;t=u(t.variants);for(var s=t.next();!s.done;s=t.next()){s=s.value;var l=[];s.audio&&l.push(s.audio);s.video&&l.push(s.video);l=u(l);for(var c=l.next();!c.done;c=l.next())if(c=c.value,c.keyIds.size){c=u(c.keyIds);for(var p=c.next();!p.done;p=c.next()){p=p.value;var d=e[r?"00":p];d?Xp.includes(d)&&a.add(d):o.add(p)}}s.allowedByApplication?s.allowedByKeySystem&&(n=!0):i=!0}if(!n)throw e={hasAppRestrictions:i,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(a)},new De(2,4,4012,e)}function Lp(e){if(!e.variants.some(nn))throw new De(2,4,4032)}function Mp(e,t){L((function(r){if(1==r.g)return S(r,Promise.resolve(),2);e.l!=Vp&&e.dispatchEvent(t);_(r)}))}function qp(e){var t=new Set;e=u(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.language?t.add(Fe(r.language)):t.add("und");return t}function Up(e){var t=new Map,r=new Map;e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i="und",o=[];n.language&&(i=Fe(n.language));"variant"==n.type?o=n.audioRoles:o=n.roles;o&&o.length||(o=[""]);t.has(i)||t.set(i,new Set);o=u(o);for(var a=o.next();!a.done;a=o.next())a=a.value,t.get(i).add(a),n.label&&(r.has(i)||r.set(i,new Map),r.get(i).set(a,n.label))}var s=[];t.forEach((function(e,t){e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=null;r.has(t)&&r.get(t).has(n)&&(i=r.get(t).get(n));s.push({language:t,role:n,label:i})}}));return s}function Hp(){return new De(2,7,7e3)}function Fp(e,t,r,n,i,o){return n==e&&i.mediaElement==o.mediaElement&&i.uri==o.uri&&i.mimeType==o.mimeType?t:r}function Bp(){return{mediaElement:null,mimeType:null,startTime:null,ye:NaN,uri:null}}function zp(e){return new Promise((function(t,r){e.nc=function(){return r(Hp())};e.le=function(){return t()};e.onError=function(e){return r(e)};e.oe=function(){return r(Hp())}}))}V("shaka.Player",Eu);Eu.prototype.setVideoContainer=Eu.prototype.Gf;Eu.prototype.getManifestParserFactory=Eu.prototype.Bh;Eu.prototype.getManifest=Eu.prototype.Ah;Eu.prototype.retryStreaming=Eu.prototype.uf;Eu.prototype.setMaxHardwareResolution=Eu.prototype.Cf;Eu.prototype.addChaptersTrack=Eu.prototype.Vg;Eu.prototype.addThumbnailsTrack=Eu.prototype.Xg;Eu.prototype.addTextTrackAsync=Eu.prototype.Wg;Eu.prototype.getStats=Eu.prototype.getStats;Eu.prototype.getBufferedInfo=Eu.prototype.Bb;Eu.prototype.getPresentationStartTimeAsDate=Eu.prototype.og;Eu.prototype.getPlayheadTimeAsDate=Eu.prototype.Gh;Eu.prototype.setTextTrackVisibility=Eu.prototype.Ff;Eu.prototype.getChapters=Eu.prototype.nh;Eu.prototype.getChaptersTracks=Eu.prototype.mg;Eu.prototype.isTextTrackVisible=Eu.prototype.jc;Eu.prototype.selectVariantsByLabel=Eu.prototype.xi;Eu.prototype.selectTextLanguage=Eu.prototype.Eg;Eu.prototype.selectAudioLanguage=Eu.prototype.xf;Eu.prototype.getTextLanguages=Eu.prototype.Jh;Eu.prototype.getAudioLanguages=Eu.prototype.jh;Eu.prototype.getTextLanguagesAndRoles=Eu.prototype.Kh;Eu.prototype.getAudioLanguagesAndRoles=Eu.prototype.kh;Eu.prototype.selectVariantTrack=Eu.prototype.we;Eu.prototype.selectTextTrack=Eu.prototype.yf;Eu.prototype.getThumbnails=Eu.prototype.pg;Eu.prototype.getImageTracks=Eu.prototype.Td;Eu.prototype.getTextTracks=Eu.prototype.Sb;Eu.prototype.getVariantTracks=Eu.prototype.Va;Eu.prototype.cancelTrickPlay=Eu.prototype.Pe;Eu.prototype.trickPlay=Eu.prototype.ze;Eu.prototype.getPlaybackRate=Eu.prototype.Rb;Eu.prototype.isBuffering=Eu.prototype.pd;Eu.prototype.getKeyStatuses=Eu.prototype.Ud;Eu.prototype.getActiveSessionsMetadata=Eu.prototype.Te;Eu.prototype.getExpiration=Eu.prototype.gd;Eu.prototype.drmInfo=Eu.prototype.drmInfo;Eu.prototype.keySystem=Eu.prototype.keySystem;Eu.prototype.goToLive=Eu.prototype.Rh;Eu.prototype.seekRange=Eu.prototype.Aa;Eu.prototype.isAudioOnly=Eu.prototype.Cc;Eu.prototype.isInProgress=Eu.prototype.hc;Eu.prototype.isLive=Eu.prototype.S;Eu.prototype.getAdManager=Eu.prototype.Qd;Eu.prototype.getAssetUri=Eu.prototype.Ue;Eu.prototype.getNetworkingEngine=Eu.prototype.ac;Eu.prototype.getMediaElement=Eu.prototype.Eh;Eu.prototype.getManifestType=Eu.prototype.Ch;Eu.prototype.getLoadMode=Eu.prototype.Ve;Eu.prototype.resetConfiguration=Eu.prototype.ri;Eu.prototype.getBufferFullness=Eu.prototype.lh;Eu.prototype.getConfiguration=Eu.prototype.getConfiguration;Eu.prototype.configure=Eu.prototype.configure;Eu.prototype.load=Eu.prototype.load;Eu.prototype.updateStartTime=Eu.prototype.Hi;Eu.prototype.unload=Eu.prototype.Mf;Eu.prototype.detach=Eu.prototype.detach;Eu.prototype.attachCanvas=Eu.prototype.Yf;Eu.prototype.attach=Eu.prototype.$c;Eu.probeSupport=function(e){e=void 0===e?!0:e;var t,r,n,i,o,a;return L((function(s){if(1==s.g)return t={},e?S(s,Ko(),3):s.D(2);2!=s.g&&(t=s.h);var l={};if(hr()){for(var c in ha)l[c]=!0;for(var d in ma)l[d]=!0}c={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};d=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var h=d.next();!h.done;h=d.next())h=h.value,l[h]=hr()?!!ha[h]:mr(h);for(var m in c)l[m]=hr()?!!ma[m]:mr(c[m]);r=l;m='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(p(rr));l={};m=u(m);for(c=m.next();!c.done;c=m.next())c=c.value,l[c]=hr()?ir(c)?!0:rt(c)||(zt(c)?!0:!1):mr(c),d=c.split(";")[0],l[d]=l[d]||l[c];n=l;i={manifest:r,media:n,drm:t};o=Yp;for(a in o)i[a]=o[a]();return s.return(i)}))};Eu.isBrowserSupported=Du;Eu.setAdManagerFactory=function(e){Qp=e};Eu.registerSupportPlugin=function(e,t){Yp[e]=t};Eu.prototype.destroy=Eu.prototype.destroy;var Vp=0,Wp=1,Gp=2,Kp=3;Eu.LoadMode={DESTROYED:Vp,NOT_LOADED:Wp,MEDIA_SOURCE:Gp,SRC_EQUALS:Kp};Eu.version="v4.4.3";var $p=["4","4"];Cn=new function(e){this.g=e;this.i=xn;this.h=Dn}(new Sn(Number($p[0]),Number($p[1])));var Xp=["output-restricted","internal-error"],Yp={},Qp=null,Jp={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Zp={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function ed(){this.h=[];this.j=this.i=this.g=0}function td(e,t,r){var n=this;this.g=e;this.h=t;this.m=r;this.i=!1;this.l=this.h.getVolume();this.j=new fi;this.j.o(this.h,google.ima.AdEvent.Type.PAUSED,(function(){n.i=!0}));this.j.o(this.h,google.ima.AdEvent.Type.RESUMED,(function(){n.i=!1}))}n=td.prototype;n.getDuration=function(){return this.g.getDuration()};n.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()};n.getRemainingTime=function(){return this.h.getRemainingTime()};n.isPaused=function(){return this.i};n.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()};n.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};n.canSkipNow=function(){return this.h.getAdSkippableState()};n.skip=function(){return this.h.skip()};n.pause=function(){return this.h.pause()};n.play=function(){return this.h.resume()};n.getVolume=function(){return this.h.getVolume()};n.setVolume=function(e){return this.h.setVolume(e)};n.isMuted=function(){return 0==this.h.getVolume()};n.isLinear=function(){return this.g.isLinear()};n.resize=function(e,t){var r=!1,n=this.m;document.fullscreenEnabled?r=!!document.fullscreenElement:n.webkitSupportsFullscreen&&(r=n.webkitDisplayingFullscreen);this.h.resize(e,t,r?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)};n.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)};n.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};n.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};n.getTitle=function(){return this.g.getTitle()};n.getDescription=function(){return this.g.getDescription()};n.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()};n.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};n.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};n.getAdId=function(){return this.g.getAdId()};n.getCreativeAdId=function(){return this.g.getCreativeAdId()};n.getAdvertiserName=function(){return this.g.getAdvertiserName()};n.getMediaUrl=function(){return this.g.getMediaUrl()};n.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};n.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};n.release=function(){this.h=this.g=null};V("shaka.ads.ClientSideAd",td);td.prototype.release=td.prototype.release;td.prototype.getPodIndex=td.prototype.getPodIndex;td.prototype.getTimeOffset=td.prototype.getTimeOffset;td.prototype.getMediaUrl=td.prototype.getMediaUrl;td.prototype.getAdvertiserName=td.prototype.getAdvertiserName;td.prototype.getCreativeAdId=td.prototype.getCreativeAdId;td.prototype.getAdId=td.prototype.getAdId;td.prototype.getVastMediaWidth=td.prototype.getVastMediaWidth;td.prototype.getVastMediaHeight=td.prototype.getVastMediaHeight;td.prototype.getVastMediaBitrate=td.prototype.getVastMediaBitrate;td.prototype.getDescription=td.prototype.getDescription;td.prototype.getTitle=td.prototype.getTitle;td.prototype.getPositionInSequence=td.prototype.getPositionInSequence;td.prototype.getSequenceLength=td.prototype.getSequenceLength;td.prototype.setMuted=td.prototype.setMuted;td.prototype.resize=td.prototype.resize;td.prototype.isLinear=td.prototype.isLinear;td.prototype.isMuted=td.prototype.isMuted;td.prototype.setVolume=td.prototype.setVolume;td.prototype.getVolume=td.prototype.getVolume;td.prototype.play=td.prototype.play;td.prototype.pause=td.prototype.pause;td.prototype.skip=td.prototype.skip;td.prototype.canSkipNow=td.prototype.canSkipNow;td.prototype.getTimeUntilSkippable=td.prototype.getTimeUntilSkippable;td.prototype.isSkippable=td.prototype.isSkippable;td.prototype.isPaused=td.prototype.isPaused;td.prototype.getRemainingTime=td.prototype.getRemainingTime;td.prototype.getMinSuggestedDuration=td.prototype.getMinSuggestedDuration;td.prototype.getDuration=td.prototype.getDuration;function rd(e,t,r,n,i){var o=this;this.s=e;this.i=t;this.F=!1;this.B=this.G=null;this.H=NaN;this.m=i;this.j=null;this.h=new fi;google.ima.settings.setLocale(r);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0);e=new google.ima.AdDisplayContainer(this.s,this.i);e.initialize();this.l=new google.ima.AdsLoader(e);this.l.getSettings().setPlayerType("shaka-player");this.l.getSettings().setPlayerVersion("v4.4.3");this.g=null;this.C=n||new google.ima.AdsRenderingSettings;this.h.o(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){id(o,e)}));this.h.o(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){nd(o,e)}));this.h.o(this.i,"ended",(function(){o.l.contentComplete()}));this.h.wa(this.i,"play",(function(){o.F=!0}))}rd.prototype.configure=function(e){this.G=e};rd.prototype.stop=function(){this.g&&this.g.stop();this.s&&Tc(this.s)};rd.prototype.release=function(){this.stop();this.B&&this.B.disconnect();this.h&&this.h.release();this.g&&this.g.destroy();this.l.destroy()};function nd(e,t){t.getError();t=(new Map).set("originalEvent",t);e.m(new G("ad-error",t));ld(e,null);e.m(new G("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function id(t,r){t.m(new G("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.H)));if(t.G.customPlayheadTracker){var n={currentTime:t.i.currentTime};t.g=r.getAdsManager(n,t.C);t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume);t.h.o(t.i,"timeupdate",(function(){t.i.duration&&(n.currentTime=t.i.currentTime)}));t.h.o(t.i,"volumechange",(function(){t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume)}))}else t.g=r.getAdsManager(t.i,t.C);t.m(new G("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){r=[];i=u(i);for(var o=i.next();!o.done;o=i.next())r.push({start:o.value,end:null});t.m(new G("ad-cue-points-changed",(new Map).set("cuepoints",r)))}ad(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,od(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.o(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,od(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.B=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,od(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.B.observe(t.i)):t.h.o(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,od(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.F?t.g.start():t.h.wa(t.i,"play",(function(){t.F=!0;t.g.start()}))}catch(e){ld(t,null)}}function od(e){if(document.fullscreenEnabled)return!!document.fullscreenElement;e=e.i;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1}function ad(e){function t(t,r){t=(new Map).set("originalEvent",t);e.m(new G(r,t))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){nd(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){sd(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.STARTED,(function(t){sd(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")}));e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")}));e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")}));e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")}));e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){ld(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){ld(e,t)}));e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")}));e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")}));e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,(function(r){e.j&&(e.j.i=!0,t(r,"ad-paused"))}));e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,(function(r){e.j&&(e.j.i=!1,t(r,"ad-resumed"))}));e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(r){e.j&&t(r,"ad-skip-state-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")}));e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")}));e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")}));e.h.o(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")}));e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")}));e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")}));e.h.o(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")}));e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")}));e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}function sd(e,t){var r=t.getAd();r?(e.j=new td(r,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",r).set("originalEvent",t),e.m(new G("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.i.pause(),e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))):Q("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ld(e,t){e.m(new G("ad-stopped",(new Map).set("originalEvent",t)));e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.i.ended||e.i.play())}function cd(e,t){this.g=e;this.i=null;this.h=t}n=cd.prototype;n.getDuration=function(){return this.i?this.i.duration:-1};n.getMinSuggestedDuration=function(){return this.getDuration()};n.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1};n.isPaused=function(){return this.h.paused};n.isSkippable=function(){return this.g.isSkippable()};n.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();e=this.getRemainingTime()-e;return Math.max(e,0)};n.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};n.skip=function(){this.h.currentTime+=this.getRemainingTime()};n.pause=function(){return this.h.pause()};n.play=function(){return this.h.play()};n.getVolume=function(){return this.h.volume};n.setVolume=function(e){this.h.volume=e};n.isMuted=function(){return this.h.muted};n.isLinear=function(){return!0};n.resize=function(){};n.setMuted=function(e){this.h.muted=e};n.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()};n.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()};n.getTitle=function(){return this.g.getTitle()};n.getDescription=function(){return this.g.getDescription()};n.getVastMediaBitrate=function(){return 0};n.getVastMediaHeight=function(){return this.g.getVastMediaHeight()};n.getVastMediaWidth=function(){return this.g.getVastMediaWidth()};n.getAdId=function(){return this.g.getAdId()};n.getCreativeAdId=function(){return this.g.getCreativeAdId()};n.getAdvertiserName=function(){return this.g.getAdvertiserName()};n.getMediaUrl=function(){return null};n.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()};n.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()};n.release=function(){this.h=this.i=this.g=null};V("shaka.ads.ServerSideAd",cd);cd.prototype.release=cd.prototype.release;cd.prototype.getPodIndex=cd.prototype.getPodIndex;cd.prototype.getTimeOffset=cd.prototype.getTimeOffset;cd.prototype.getMediaUrl=cd.prototype.getMediaUrl;cd.prototype.getAdvertiserName=cd.prototype.getAdvertiserName;cd.prototype.getCreativeAdId=cd.prototype.getCreativeAdId;cd.prototype.getAdId=cd.prototype.getAdId;cd.prototype.getVastMediaWidth=cd.prototype.getVastMediaWidth;cd.prototype.getVastMediaHeight=cd.prototype.getVastMediaHeight;cd.prototype.getVastMediaBitrate=cd.prototype.getVastMediaBitrate;cd.prototype.getDescription=cd.prototype.getDescription;cd.prototype.getTitle=cd.prototype.getTitle;cd.prototype.getPositionInSequence=cd.prototype.getPositionInSequence;cd.prototype.getSequenceLength=cd.prototype.getSequenceLength;cd.prototype.setMuted=cd.prototype.setMuted;cd.prototype.resize=cd.prototype.resize;cd.prototype.isLinear=cd.prototype.isLinear;cd.prototype.isMuted=cd.prototype.isMuted;cd.prototype.setVolume=cd.prototype.setVolume;cd.prototype.getVolume=cd.prototype.getVolume;cd.prototype.play=cd.prototype.play;cd.prototype.pause=cd.prototype.pause;cd.prototype.skip=cd.prototype.skip;cd.prototype.canSkipNow=cd.prototype.canSkipNow;cd.prototype.getTimeUntilSkippable=cd.prototype.getTimeUntilSkippable;cd.prototype.isSkippable=cd.prototype.isSkippable;cd.prototype.isPaused=cd.prototype.isPaused;cd.prototype.getRemainingTime=cd.prototype.getRemainingTime;cd.prototype.getMinSuggestedDuration=cd.prototype.getMinSuggestedDuration;cd.prototype.getDuration=cd.prototype.getDuration;function ud(e,t,r,n){var i=this;this.B=e;this.l=t;this.j=null;this.I=NaN;this.i=n;this.H=!1;this.C=this.m=this.s=null;this.F="";this.G=[];this.h=new fi;e=new google.ima.dai.api.UiSettings;e.setLocale(r);this.g=new google.ima.dai.api.StreamManager(this.l,this.B,e);this.i(new G("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g)));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){pd(i,e)}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){i.F.length?i.j.resolve(i.F):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");i.j=null}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd();i.m=new cd(e,i.l);i.C&&(i.m.i=i.C);i.i(new G("ad-started",(new Map).set("ad",i.m)));i.B.setAttribute("ad-active","true")}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){i.B.removeAttribute("ad-active");var e=i.l.currentTime;i.s&&i.s>e&&(i.l.currentTime=i.s,i.s=null)}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){i.C=e.getStreamData().adProgressData;i.m&&(i.m.i=i.C)}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){i.i(new G("ad-first-quartile"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){i.i(new G("ad-midpoint"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){i.i(new G("ad-third-quartile"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){i.i(new G("ad-complete"));i.i(new G("ad-stopped"));i.B.removeAttribute("ad-active");i.m=null}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){i.i(new G("ad-skipped"));i.i(new G("ad-stopped"))}));this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];t=u(t.cuepoints);for(var r=t.next();!r.done;r=t.next())r=r.value,e.push({start:r.start,end:r.end});i.G=e;i.i(new G("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}ud.prototype.configure=function(){};ud.prototype.stop=function(){this.F="";this.s=null;this.G=[]};ud.prototype.release=function(){this.stop();this.h&&this.h.release()};ud.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data;this.g.onTimedMetadata(t)}};function pd(e,t){e.i(new G("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.I)));t=t.getStreamData().url;e.j.resolve(t);e.j=null;e.H||e.h.o(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var r=e.g.previousCuePointForStreamTime(t);r&&!r.played&&(e.s=t,e.l.currentTime=r.start)}}))}function dd(){oe.call(this);this.g=this.h=null;this.i=new ed;this.l=navigator.language;this.j=null}b(dd,oe);n=dd.prototype;n.setLocale=function(e){this.l=e};n.configure=function(e){this.j=e;this.h&&this.h.configure(this.j);this.g&&this.g.configure(this.j)};n.initClientSide=function(t,r,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new De(2,10,1e4);this.h&&this.h.release();this.h=new rd(t,r,this.l,n,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.i.h.push(e.loadTime);break;case"ad-started":i.i.g++;break;case"ad-complete":i.i.i++;break;case"ad-skipped":i.i.j++}i.dispatchEvent(e)}));this.h.configure(this.j)};n.release=function(){this.h&&(this.h.release(),this.h=null);this.g&&(this.g.release(),this.g=null);oe.prototype.release.call(this)};n.onAssetUnload=function(){this.h&&this.h.stop();this.g&&this.g.stop();this.dispatchEvent(new G("ad-stopped"));this.i=new ed};n.requestClientSideAds=function(e){if(!this.h)throw new De(1,10,10001);var t=this.h;t.g&&t.g.destroy();t.l&&t.l.contentComplete();t.H=Date.now()/1e3;t.l.requestAds(e)};n.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new De(1,10,10001);var t=this.h;t.C=e;t.g&&t.g.updateAdsRenderingSettings(t.C)};n.initServerSide=function(t,r){var n=this;if(!e.google||!google.ima||!google.ima.dai)throw new De(2,10,10002);this.g&&this.g.release();this.g=new ud(t,r,this.l,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":n.i.h.push(e.loadTime);break;case"ad-started":n.i.g++;break;case"ad-complete":n.i.i++;break;case"ad-skipped":n.i.j++}n.dispatchEvent(e)}));this.g.configure(this.j)};n.requestServerSideStream=function(e,t){t=void 0===t?"":t;if(!this.g)throw new De(1,10,10003);e.adTagParameters||(e.adTagParameters={});var r=e.adTagParameters;(r.mpt||r.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.adTagParameters.mpt="shaka-player";e.adTagParameters.mpv="v4.4.3";r=this.g;r.j?e=Promise.reject(new De(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(r.H=!0),r.j=new Vn,r.g.requestStream(e),r.F=t||"",r.I=Date.now()/1e3,e=r.j);return e};n.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new De(1,10,10003);(e.mpt||e.mpv)&&Q('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.');e.mpt="Shaka Player";e.mpv="v4.4.3";this.g.g.replaceAdTagParameters(e)};n.getServerSideCuePoints=function(){if(!this.g)throw new De(1,10,10003);return this.g.G};n.getStats=function(){var e=this.i;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}};n.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,r=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,r,e.startTime)}};n.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)};n.onCueMetadataChange=function(e){if(this.g)this.g.onCueMetadataChange(e)};V("shaka.ads.AdManager",dd);dd.prototype.onCueMetadataChange=dd.prototype.onCueMetadataChange;dd.prototype.onHlsTimedMetadata=dd.prototype.onHlsTimedMetadata;dd.prototype.onDashTimedMetadata=dd.prototype.onDashTimedMetadata;dd.prototype.getStats=dd.prototype.getStats;dd.prototype.getServerSideCuePoints=dd.prototype.getServerSideCuePoints;dd.prototype.replaceServerSideAdTagParameters=dd.prototype.replaceServerSideAdTagParameters;dd.prototype.requestServerSideStream=dd.prototype.requestServerSideStream;dd.prototype.initServerSide=dd.prototype.initServerSide;dd.prototype.updateClientSideAdsRenderingSettings=dd.prototype.updateClientSideAdsRenderingSettings;dd.prototype.requestClientSideAds=dd.prototype.requestClientSideAds;dd.prototype.onAssetUnload=dd.prototype.onAssetUnload;dd.prototype.release=dd.prototype.release;dd.prototype.initClientSide=dd.prototype.initClientSide;dd.prototype.configure=dd.prototype.configure;dd.prototype.setLocale=dd.prototype.setLocale;dd.ADS_LOADED="ads-loaded";dd.AD_STARTED="ad-started";dd.AD_FIRST_QUARTILE="ad-first-quartile";dd.AD_MIDPOINT="ad-midpoint";dd.AD_THIRD_QUARTILE="ad-third-quartile";dd.AD_COMPLETE="ad-complete";dd.AD_STOPPED="ad-stopped";dd.AD_SKIPPED="ad-skipped";dd.AD_VOLUME_CHANGED="ad-volume-changed";dd.AD_MUTED="ad-muted";dd.AD_PAUSED="ad-paused";dd.AD_RESUMED="ad-resumed";dd.AD_SKIP_STATE_CHANGED="ad-skip-state-changed";dd.CUEPOINTS_CHANGED="ad-cue-points-changed";dd.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded";dd.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded";dd.AD_CLICKED="ad-clicked";dd.AD_PROGRESS="ad-progress";dd.AD_BUFFERING="ad-buffering";dd.AD_IMPRESSION="ad-impression";dd.AD_DURATION_CHANGED="ad-duration-changed";dd.AD_CLOSED="ad-closed";dd.AD_LOADED="ad-loaded";dd.ALL_ADS_COMPLETED="all-ads-completed";dd.AD_LINEAR_CHANGED="ad-linear-changed";dd.AD_METADATA="ad-metadata";dd.AD_RECOVERABLE_ERROR="ad-recoverable-error";dd.AD_ERROR="ad-error";dd.AD_BREAK_READY="ad-break-ready";dd.AD_INTERACTION="ad-interaction";Qp=function(){return new dd};function hd(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof G){var r={};for(n in t)(e=t[n])&&"object"==typeof e?"detail"==n&&(r[n]=e):n in Event||(r[n]=e);return r}if(t instanceof Error){var n=new Set(["name","message","stack"]);for(r in t)n.add(r);e=u(Object.getOwnPropertyNames(t));for(r=e.next();!r.done;r=e.next())n.add(r.value);e={};n=u(n);for(r=n.next();!r.done;r=n.next())r=r.value,e[r]=t[r];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){n={__type__:"TimeRanges",length:t.length,start:[],end:[]};t=u(Oa(t));for(r=t.next();!r.done;r=t.next())r=r.value,e=r.end,n.start.push(r.start),n.end.push(e);t=n}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function md(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var r=NaN;else if("-Infinity"==t)r=-Infinity;else if("Infinity"==t)r=Infinity;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)r=fd(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)r=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){e=t.contents;t=Error(e.message);for(r in e)t[r]=e[r];r=t}else r=t;return r}))}function fd(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var gd="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),yd="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),bd=["loop","playbackRate"],vd=["pause","play"],wd={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},Ed={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},Sd={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},_d=[["getConfiguration","configure"]],xd=[["isTextTrackVisible","setTextTrackVisibility"]],Dd="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Cd=["attach","attachCanvas","detach","load","unload"];function Td(e,t,r,n,i,o,a){var s=this;this.I=e;this.O=a;this.j=new dr(t);this.P=r;this.C=!1;this.B=n;this.H=i;this.K=o;this.h=this.m=!1;this.L="";this.s=null;this.F=function(){return jd(s)};this.G=function(e,t){e=md(t);switch(e.type){case"event":var r=e.targetName,n=K(e.event);s.B(r,n);break;case"update":r=e.update;for(n in r){e=s.g[n]||{};for(var i in r[n])e[i]=r[n][i]}s.C&&(s.P(),s.C=!1);break;case"asyncComplete":if(n=e.id,i=e.error,e=s.i[n],delete s.i[n],e)if(i){n=new De(i.severity,i.category,i.code);for(r in i)n[r]=i[r];e.reject(n)}else e.resolve()}};this.g={video:{},player:{}};this.J=0;this.i={};this.l=null;Hd.add(this)}n=Td.prototype;n.destroy=function(){Hd.delete(this);Rd(this);qd&&Id(this);this.j&&(this.j.stop(),this.j=null);this.H=this.B=null;this.h=this.m=!1;this.G=this.F=this.l=this.i=this.g=this.s=null;return Promise.resolve()};n.sa=function(){return this.h};n.se=function(){return this.L};n.init=function(){if(this.I.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0;this.j.Ca();var t=new chrome.cast.SessionRequest(this.I,[],null,this.O,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(Hd),r=t.next();!r.done;r=t.next())Ad(r.value,e)}),(function(e){for(var t=u(Hd),r=t.next();!r.done;r=t.next())r=r.value,Md="available"==e,r.j.Ca()}),"origin_scoped");chrome.cast.initialize(t,(function(){}),(function(){}));Md&&this.j.R(Ld);(t=qd)&&t.status!=chrome.cast.SessionStatus.STOPPED?Ad(this,t):qd=null}else e.__onGCastApiAvailable!==Fd&&(Ud=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Fd)};n.zf=function(e){this.s=e;this.h&&Nd(this,{type:"appData",appData:this.s})};n.cast=function(e){var t=this;return L((function(r){if(!t.m)throw new De(1,8,8e3);if(!Md)throw new De(1,8,8001);if(t.h)throw new De(1,8,8002);t.l=new Vn;chrome.cast.requestSession((function(r){return kd(t,e,r)}),(function(e){return Pd(t,e)}));return S(r,t.l,0)}))};function Od(e){if(e.h){var t=e.K();chrome.cast.requestSession((function(r){return kd(e,t,r)}),(function(t){return Pd(e,t)}))}}n.xc=function(){if(this.h){Rd(this);if(qd){Id(this);try{qd.stop((function(){}),(function(){}))}catch(e){}qd=null}jd(this)}};n.get=function(e,t){var r=this;if("video"==e){if(vd.includes(t))return function(){return r.Cg.apply(r,[e,t].concat(p(M.apply(0,arguments))))}}else if("player"==e){if(Sd[t]&&!this.get("player","isLive")())return function(){};if(Dd.includes(t))return function(){return r.Cg.apply(r,[e,t].concat(p(M.apply(0,arguments))))};if(Cd.includes(t))return function(){return r.ni.apply(r,[e,t].concat(p(M.apply(0,arguments))))};if(wd[t]||Ed[t])return function(){return r.g[e][t]}}return this.g[e][t]};n.set=function(e,t,r){this.g[e][t]=r;Nd(this,{type:"set",targetName:e,property:t,value:r})};function kd(e,t,r){qd=r;r.addUpdateListener(e.F);r.addMessageListener("urn:x-cast:com.google.shaka.v2",e.G);jd(e);Nd(e,{type:"init",initState:t,appData:e.s});e.l.resolve()}function Pd(e,t){var r=8003;switch(t.code){case"cancel":r=8004;break;case"timeout":r=8005;break;case"receiver_unavailable":r=8006}e.l.reject(new De(2,8,r,t))}n.Cg=function(e,t){Nd(this,{type:"call",targetName:e,methodName:t,args:M.apply(2,arguments)})};n.ni=function(e,t){var r=M.apply(2,arguments),n=new Vn,i=this.J.toString();this.J++;this.i[i]=n;try{Nd(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:i})}catch(e){n.reject(e)}return n};function Ad(e,t){var r=e.K();e.l=new Vn;e.C=!0;kd(e,r,t)}function Id(e){var t=qd;t.removeUpdateListener(e.F);t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.G)}function jd(e){var t=qd?"connected"==qd.status:!1;if(e.h&&!t){e.H();for(var r in e.g)e.g[r]={};Rd(e)}e.h=t;e.L=t?qd.receiver.friendlyName:"";e.j.Ca()}function Rd(e){for(var t in e.i){var r=e.i[t];delete e.i[t];r.reject(new De(1,7,7e3))}}function Nd(e,t){t=hd(t);var r=qd;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),Z)}catch(n){throw t=new De(2,8,8005,n),r=new G("error",(new Map).set("detail",t)),e.B("player",r),e.xc(),t}}var Ld=.02,Md=!1,qd=null,Ud=null,Hd=new Set;function Fd(t){Ud?e.__onGCastApiAvailable=Ud:delete e.__onGCastApiAvailable;Ud=null;if(t)for(var r=u(Hd),n=r.next();!n.done;n=r.next())n.value.init();"function"===typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Bd(e,t,r,n){n=void 0===n?!1:n;oe.call(this);var i=this;this.i=e;this.h=t;this.m=this.s=this.j=this.B=this.l=null;this.G=r;this.F=n;this.C=new Map;this.g=new Td(r,(function(){return Kd(i)}),(function(){return $d(i)}),(function(e,t){return Jd(i,e,t)}),(function(){return Xd(i)}),(function(){return Gd(i)}),n);zd(this)}b(Bd,oe);n=Bd.prototype;n.destroy=function(e){e&&this.g.xc();this.m&&(this.m.release(),this.m=null);e=[];this.h&&(e.push(this.h.destroy()),this.h=null);this.g&&(e.push(this.g.destroy()),this.g=null);this.B=this.l=this.i=null;oe.prototype.release.call(this);return Promise.all(e)};n.Tb=function(){return this.l};n.zc=function(){return this.B};n.$f=function(){return this.g.m&&Md};n.sa=function(){return this.g.sa()};n.se=function(){return this.g.se()};n.cast=function(){var e=this,t;return L((function(r){return 1==r.g?(t=Gd(e),S(r,e.g.cast(t),2)):e.h?S(r,e.h.Mf(),0):r.return()}))};n.zf=function(e){this.g.zf(e)};n.Og=function(){Od(this.g)};n.xc=function(){this.g.xc()};n.dg=function(e,t){t=void 0===t?!1:t;var r=this;return L((function(n){if(1==n.g){if(e==r.G&&t==r.F)return n.return();r.G=e;r.F=t;r.g.xc();return S(n,r.g.destroy(),2)}r.g=null;r.g=new Td(e,(function(){return Kd(r)}),(function(){return $d(r)}),(function(e,t){return Jd(r,e,t)}),(function(){return Xd(r)}),(function(){return Gd(r)}),t);r.g.init();_(n)}))};function zd(e){e.g.init();e.m=new fi;for(var t=u(gd),r=t.next();!r.done;r=t.next())e.m.o(e.i,r.value,(function(t){e.g.sa()||(t=K(t),e.j.dispatchEvent(t))}));for(var n in $)e.m.o(e.h,$[n],(function(t){e.g.sa()||e.s.dispatchEvent(t)}));e.l={};t={};for(var i in e.i)t.Qc=i,Object.defineProperty(e.l,t.Qc,{configurable:!1,enumerable:!0,get:function(t){return function(){return Yd(e,t.Qc)}}(t),set:function(t){return function(r){var n=t.Qc;e.g.sa()?e.g.set("video",n,r):e.i[n]=r}}(t)}),t={Qc:t.Qc};e.B={};Wd(e,(function(t){Object.defineProperty(e.B,t,{configurable:!1,enumerable:!0,get:function(){return Qd(e,t)}})}));Vd(e);e.j=new oe;e.j.qe=e.l;e.s=new oe;e.s.qe=e.B}function Vd(e){var t=new Map;Wd(e,(function(r,n){t.has(n)?(n=t.get(n),r.length<n.length?e.C.set(r,n):e.C.set(n,r)):t.set(n,r)}))}function Wd(e,t){function r(e){return"constructor"==e||"function"!=typeof n[e]?!1:!i.has(e)}var n=e.h,i=new Set,o;for(o in n)r(o)&&(i.add(o),t(o,n[o]));e=Object.getPrototypeOf(n);for(o=Object.getPrototypeOf({});e&&e!=o;){for(var a=u(Object.getOwnPropertyNames(e)),s=a.next();!s.done;s=a.next())s=s.value,r(s)&&(i.add(s),t(s,n[s]));e=Object.getPrototypeOf(e)}}function Gd(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Ue(),startTime:null};e.i.pause();for(var r=u(bd),n=r.next();!n.done;n=r.next())n=n.value,t.video[n]=e.i[n];e.i.ended||(t.startTime=e.i.currentTime);r=u(_d);for(n=r.next();!n.done;n=r.next()){var i=n.value;n=i[1];i=e.h[i[0]]();t.player[n]=i}r=u(xd);for(n=r.next();!n.done;n=r.next())i=n.value,n=i[1],i=e.h[i[0]](),t.playerAfterLoad[n]=i;return t}function Kd(e){var t=new G("caststatuschanged");e.dispatchEvent(t)}function $d(e){var t=new G(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Xd(e){for(var t=u(_d),r=t.next();!r.done;r=t.next()){var n=r.value;r=n[1];n=e.g.get("player",n[0])();e.h[r](n)}var i=e.g.get("player","getAssetUri")();r=e.g.get("video","ended");t=Promise.resolve();var o=e.i.autoplay;n=null;r||(n=e.g.get("video","currentTime"));i&&(e.i.autoplay=!1,t=e.h.load(i,n));var a={};r=u(bd);for(n=r.next();!n.done;n=r.next())n=n.value,a[n]=e.g.get("video",n);t.then((function(){if(e.i){for(var t=u(bd),r=t.next();!r.done;r=t.next())r=r.value,e.i[r]=a[r];t=u(xd);for(r=t.next();!r.done;r=t.next()){var n=r.value;r=n[1];n=e.g.get("player",n[0])();e.h[r](n)}e.i.autoplay=o;i&&e.i.play()}}),(function(t){t=(new Map).set("detail",t);t=new G("error",t);e.h.dispatchEvent(t)}))}function Yd(e,t){if("addEventListener"==t)return function(t,r,n){return e.j.addEventListener(t,r,n)};if("removeEventListener"==t)return function(t,r,n){return e.j.removeEventListener(t,r,n)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var r=e.i[t];if("function"!=typeof r)return r}return e.g.sa()?e.g.get("video",t):(t=e.i[t],"function"==typeof t&&(t=t.bind(e.i)),t)}function Qd(e,t){e.C.has(t)&&(t=e.C.get(t));if("addEventListener"==t)return function(t,r,n){return e.s.addEventListener(t,r,n)};if("removeEventListener"==t)return function(t,r,n){return e.s.removeEventListener(t,r,n)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.ac()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Qd()};if("setVideoContainer"==t)return function(t){return e.h.Gf(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){Q(t+"() does not work while casting!");return null};if("attach"==t||"detach"==t)return function(){Q(t+"() does not work while casting!");return Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(wd[t]||Ed[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}function Jd(e,t,r){e.g.sa()&&("video"==t?e.j.dispatchEvent(r):"player"==t&&e.s.dispatchEvent(r))}V("shaka.cast.CastProxy",Bd);Bd.prototype.changeReceiverId=Bd.prototype.dg;Bd.prototype.forceDisconnect=Bd.prototype.xc;Bd.prototype.suggestDisconnect=Bd.prototype.Og;Bd.prototype.setAppData=Bd.prototype.zf;Bd.prototype.cast=Bd.prototype.cast;Bd.prototype.receiverName=Bd.prototype.se;Bd.prototype.isCasting=Bd.prototype.sa;Bd.prototype.canCast=Bd.prototype.$f;Bd.prototype.getPlayer=Bd.prototype.zc;Bd.prototype.getVideo=Bd.prototype.Tb;Bd.prototype.destroy=Bd.prototype.destroy;function Zd(e,t,r,n){oe.call(this);var i=this;this.g=e;this.h=t;this.j=new fi;this.J={video:e,player:t};this.G=r||function(){};this.K=n||function(e){return e};this.i=null;this.H=!1;this.s=!0;this.m=0;this.F=!1;this.C=!0;this.B=this.l=null;this.I=new dr((function(){oh(i)}));eh(this)}b(Zd,oe);n=Zd.prototype;n.isConnected=function(){return this.H};n.Vh=function(){return this.s};n.Bi=function(e){this.i=e};n.dh=function(){this.i=null};n.Ci=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.title=e};n.Ai=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC});this.i.images=[{url:e}]};n.zi=function(e){this.i||(this.i={});this.i.artist=e;this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK};n.destroy=function(){var e=this,t,r;return L((function(n){if(1==n.g)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.I&&(e.I.stop(),e.I=null),e.g=null,e.J=null,e.G=null,e.H=!1,e.s=!0,e.l=null,e.B=null,oe.prototype.release.call(e),S(n,Promise.all(t),2);r=cast.receiver.CastReceiverManager.getInstance();r.stop();_(n)}))};function eh(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return th(e)};t.onSenderDisconnected=function(){return th(e)};t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&ph(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l);ph(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)};e.B=t.getCastMessageBus("urn:x-cast:com.google.cast.media");e.B.onMessage=function(t){return ch(e,t)};e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2");e.l.onMessage=function(t){return lh(e,t)};t.start();t=u(gd);for(var r=t.next();!r.done;r=t.next())e.j.o(e.g,r.value,(function(t){return ih(e,"video",t)}));for(var n in $)e.j.o(e.h,$[n],(function(t){return ih(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.Cf(3840,2160):e.h.Cf(1920,1080);e.j.o(e.g,"loadeddata",(function(){e.F=!0}));e.j.o(e.h,"loading",(function(){e.s=!1;rh(e)}));e.j.o(e.g,"playing",(function(){e.s=!1;rh(e)}));e.j.o(e.g,"pause",(function(){rh(e)}));e.j.o(e.h,"unloading",(function(){e.s=!0;rh(e)}));e.j.o(e.g,"ended",(function(){new dr((function(){e.g&&e.g.ended&&(e.s=!0,rh(e))})).R(mh)}))}function th(e){e.m=0;e.C=!0;e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;rh(e)}function rh(e){var t;L((function(r){if(1==r.g)return S(r,Promise.resolve(),2);if(!e.h)return r.return();t=new G("caststatuschanged");e.dispatchEvent(t);ah(e)||dh(e);_(r)}))}function nh(e,t,r){var n,i,o,a,s,l,c,u,p,d;L((function(h){switch(h.g){case 1:for(n in t.player)i=t.player[n],e.h[n](i);e.G(r);o=e.g.autoplay;return t.manifest?(e.g.autoplay=!1,x(h,5),S(h,e.h.load(t.manifest,t.startTime),7)):S(h,Promise.resolve(),3);case 7:C(h,3);break;case 5:return a=T(h),s=(new Map).set("detail",a),l=new G("error",s),e.h&&e.h.dispatchEvent(l),h.return();case 3:if(!e.h)return h.return();for(c in t.video)u=t.video[c],e.g[c]=u;for(p in t.playerAfterLoad)d=t.playerAfterLoad[p],e.h[p](d);e.g.autoplay=o;t.manifest&&(e.g.play(),dh(e));_(h)}}))}function ih(e,t,r){e.h&&(oh(e),ph(e,{type:"event",targetName:t,event:r},e.l))}function oh(e){e.I.R(hh);for(var t={video:{},player:{}},r=u(yd),n=r.next();!n.done;n=r.next())n=n.value,t.video[n]=e.g[n];if(e.h.S())for(var i in Sd)0==e.m%Sd[i]&&(t.player[i]=e.h[i]());for(var o in wd)0==e.m%wd[o]&&(t.player[o]=e.h[o]());if(r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())t.video.volume=r.level,t.video.muted=r.muted;ph(e,{type:"update",update:t},e.l);for(var a in Ed)0==e.m%Ed[a]&&(t={player:{}},t.player[a]=e.h[a](),ph(e,{type:"update",update:t},e.l));e.F&&(e.m+=1);ah(e)}function ah(e){return e.C&&(e.g.duration||e.h.S())?(sh(e),e.C=!1,!0):!1}function sh(e,t){var r={contentId:e.h.Ue(),streamType:e.h.S()?"LIVE":"BUFFERED",contentType:""};e.h.S()||(r.duration=e.g.duration);e.i&&(r.metadata=e.i);dh(e,void 0===t?0:t,r)}function lh(e,t){var r=md(t.data);switch(r.type){case"init":e.m=0;e.F=!1;e.C=!0;nh(e,r.initState,r.appData);oh(e);break;case"appData":e.G(r.appData);break;case"set":var n=r.targetName,i=r.property;r=r.value;if("video"==n)if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(r);break}else if("muted"==i){t.setSystemVolumeMuted(r);break}e.J[n][i]=r;break;case"call":n=e.J[r.targetName];n[r.methodName].apply(n,r.args);break;case"asyncCall":n=r.targetName;i=r.methodName;"player"==n&&"load"==i&&(e.m=0,e.F=!1);var o=r.id,a=t.senderId;t=e.J[n];r=t[i].apply(t,r.args);"player"==n&&"load"==i&&(r=r.then((function(){e.C=!0})));r.then((function(){return uh(e,a,o,null)}),(function(t){return uh(e,a,o,t)}))}}function ch(e,t){var r=md(t.data);switch(r.type){case"PLAY":e.g.play();dh(e);break;case"PAUSE":e.g.pause();dh(e);break;case"SEEK":t=r.currentTime;var n=r.resumeState;null!=t&&(e.g.currentTime=Number(t));n&&"PLAYBACK_START"==n?(e.g.play(),dh(e)):n&&"PLAYBACK_PAUSE"==n&&(e.g.pause(),dh(e));break;case"STOP":e.h.Mf().then((function(){e.h&&dh(e)}));break;case"GET_STATUS":sh(e,Number(r.requestId));break;case"VOLUME":n=r.volume;t=n.level;n=n.muted;var i=e.g.volume,o=e.g.muted;null!=t&&(e.g.volume=Number(t));null!=n&&(e.g.muted=n);i==e.g.volume&&o==e.g.muted||dh(e);break;case"LOAD":e.m=0;e.F=!1;e.C=!1;t=r.media;n=r.currentTime;i=e.K(t.contentId);o=r.autoplay||!0;e.G(t.customData);o&&(e.g.autoplay=!0);e.h.load(i,n).then((function(){e.h&&sh(e)})).catch((function(t){var n="LOAD_FAILED";7==t.category&&7e3==t.code&&(n="LOAD_CANCELLED");ph(e,{requestId:Number(r.requestId),type:n},e.B)}));break;default:ph(e,{requestId:Number(r.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.B)}}function uh(e,t,r,n){e.h&&ph(e,{type:"asyncComplete",id:r,error:n},e.l,t)}function ph(e,t,r,n){e.H&&(e=hd(t),n?r.getCastChannel(n).send(e):r.broadcast(e))}function dh(e,t,r){r=void 0===r?null:r;var n={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?fh:e.h.pd()?yh:e.g.paused?bh:gh,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};r&&(n.media=r);ph(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[n]},e.B)}V("shaka.cast.CastReceiver",Zd);Zd.prototype.destroy=Zd.prototype.destroy;Zd.prototype.setContentArtist=Zd.prototype.zi;Zd.prototype.setContentImage=Zd.prototype.Ai;Zd.prototype.setContentTitle=Zd.prototype.Ci;Zd.prototype.clearContentMetadata=Zd.prototype.dh;Zd.prototype.setContentMetadata=Zd.prototype.Bi;Zd.prototype.isIdle=Zd.prototype.Vh;Zd.prototype.isConnected=Zd.prototype.isConnected;var hh=.5,mh=5,fh="IDLE",gh="PLAYING",yh="BUFFERING",bh="PAUSED";function vh(e,t,r,n,i){if(n>=i)return null;for(var o=-1,a=-1,s=0;s<r.length;s++)if(r[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}for(s=r.length-1;0<=s;s--)if(r[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}if(-1===o||-1===a)return null;for(var l=s=!1,c="white",u="black",p=wh(n,i,s,l,c,u);o<=a;o++){for(var d=r[o],h=-1,m=-1,f=0;f<d.length;f++)if(null!=d[f]&&""!==d[f].g.trim()){h=f;break}for(f=d.length-1;0<=f;f--)if(null!=d[f]&&""!==d[f].g.trim()){m=f;break}if(-1===h||-1===m)d=Eh(n,i),e.nestedCues.push(d);else{for(;h<=m;h++)if(f=d[h]){var g=f.l,y=f.i,b=f.j,v=f.h;if(g!=s||y!=l||b!=c||v!=u)p.payload&&e.nestedCues.push(p),p=wh(n,i,g,y,b,v),s=g,l=y,c=b,u=v;p.payload+=f.g}else p.payload+=" ";p.payload&&e.nestedCues.push(p);o!==a&&(p=Eh(n,i),e.nestedCues.push(p));p=wh(n,i,s,l,c,u)}}return e.nestedCues.length?{cue:e,stream:t}:null}function wh(e,t,r,n,i,o){e=new Et(e,t,"");r&&e.textDecoration.push("underline");n&&(e.fontStyle="italic");e.color=i;e.backgroundColor=o;return e}function Eh(e,t){e=new Et(e,t,"");e.lineBreak=!0;return e}function Sh(e,t,r,n,i){this.g=e;this.l=t;this.i=r;this.h=n;this.j=i}function _h(e,t){this.i=[];this.g=1;this.h=0;this.C=e;this.B=t;this.j=this.m=!1;this.l="white";this.s="black";Dh(this)}function xh(e,t,r){var n="CC"+(e.C<<1|e.B+1),i=new Et(t,r,"");i.lineInterpretation=1;i.line=e.g/16*100;return vh(i,n,e.i,t,r)}function Dh(e){Oh(e,0,15);e.g=1}function Ch(e,t,r){if(!(32>r||127<r)){var n="";switch(t){case kh:n=jh.has(r)?jh.get(r):String.fromCharCode(r);break;case Ph:n=Rh.get(r);break;case Ah:e.i[e.g].pop();n=Nh.get(r);break;case Ih:e.i[e.g].pop(),n=Lh.get(r)}n&&e.i[e.g].push(new Sh(n,e.m,e.j,e.s,e.l))}}function Th(e,t,r,n){if(!(0>r||0>t))if(t>=r)for(--n;0<=n;n--)e.i[t+n]=e.i[r+n].map((function(e){return e}));else for(var i=0;i<n;i++)e.i[t+i]=e.i[r+i].map((function(e){return e}))}function Oh(e,t,r){for(var n=0;n<=r;n++)e.i[t+n]=[]}var kh=0,Ph=1,Ah=2,Ih=3,jh=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Rh=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Nh=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Lh=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function Mh(e,t){this.h=Fh;this.s=new _h(e,t);this.i=new _h(e,t);this.g=this.j=new _h(e,t);this.l=0;this.m=null}function qh(e,t,r){e.g=e.i;var n=e.g,i=null;e.h!==zh&&e.h!==Vh&&(i=xh(n,e.l,r),r=e.i,r.g=0<r.h?r.h:0,Oh(r,0,15),r=e.j,r.g=0<r.h?r.h:0,Oh(r,0,15),n.g=15);e.h=zh;n.h=t;return i}function Uh(e){e.h=Bh;e.g=e.j;e.g.h=0}function Hh(e){J("Cea608DataChannel","CEA-608 text mode entered, but is unsupported");e.g=e.s;e.h=Vh}var Fh=0,Bh=1,zh=3,Vh=4,Wh="black green blue cyan red yellow magenta black".split(" "),Gh="white green blue cyan red yellow magenta white_italics".split(" ");function Kh(){this.l=!1;this.F=this.H=0;this.G=tm;this.i=[];this.g=this.h=this.j=0;this.C=this.s=!1;this.B="white";this.m="black";$h(this)}function $h(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Xh())}function Xh(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Yh(e,t){Qh(e)&&(e.i[e.h][e.g]=new Sh(t,e.C,e.s,e.m,e.B),e.g++)}function Qh(e){var t=e.g<e.F&&0<=e.g;return e.h<e.H&&0<=e.h&&t}Kh.prototype.isVisible=function(){return this.l};function Jh(e,t,r){var n=new Et(e.j,t,"");n.textAlign=e.G===Zh?"left":e.G===em?"right":xt;if(r=vh(n,"svc"+r,e.i,e.j,t))e.j=t;return r}var Zh=0,em=1,tm=2;function rm(){this.i=[];this.h=null;this.g=0}function nm(e,t){3===t.type?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new im(e.h)),e.h=null,e.g=0))}function im(e){this.g=0;this.h=e}im.prototype.va=function(){return this.g<this.h.length};im.prototype.ra=function(){return this.g};function om(e){if(!e.va())throw new De(2,2,3e3);return e.h[e.g++]}im.prototype.skip=function(e){if(this.g+e>this.h.length)throw new De(2,2,3e3);this.g+=e};function am(e){this.i=e;this.h=[null,null,null,null,null,null,null,null];this.g=null}function sm(e,t,r,n){if(128<=r&&135>=r)n=r&7,e.h[n]&&(e.g=e.h[n]);else{if(136===r){r=om(t).value;t=null;r=u(lm(e,r));for(var i=r.next();!i.done;i=r.next())i=e.h[i.value],i.isVisible()&&(t=Jh(i,n,e.i)),$h(i);return t}if(137===r)for(t=om(t).value,t=u(lm(e,t)),r=t.next();!r.done;r=t.next())r=e.h[r.value],r.isVisible()||(r.j=n),r.l=!0;else{if(138===r){r=om(t).value;t=null;r=u(lm(e,r));for(i=r.next();!i.done;i=r.next())i=e.h[i.value],i.isVisible()&&(t=Jh(i,n,e.i)),i.l=!1;return t}if(139===r){r=om(t).value;t=null;r=u(lm(e,r));for(i=r.next();!i.done;i=r.next())i=e.h[i.value],i.isVisible()?t=Jh(i,n,e.i):i.j=n,i.l=!i.l;return t}if(140===r)return t=om(t).value,cm(e,t,n);if(143===r)return n=cm(e,255,n),um(e),n;if(144===r)t.skip(1),n=om(t).value,e.g&&(e.g.s=0<(n&128),e.g.C=0<(n&64));else if(145===r)n=om(t).value,r=om(t).value,t.skip(1),e.g&&(t=pm((r&48)>>4,(r&12)>>2,r&3),e.g.B=pm((n&48)>>4,(n&12)>>2,n&3),e.g.m=t);else if(146===r)n=om(t).value,t=om(t).value,e.g&&(e=e.g,e.h=n&15,e.g=t&63);else if(151===r)t.skip(1),t.skip(1),n=om(t).value,t.skip(1),e.g&&(e.g.G=n&3);else if(152<=r&&159>=r){r=(r&15)-8;i=null!==e.h[r];if(!i){var o=new Kh;o.j=n;e.h[r]=o}n=om(t).value;om(t);om(t);o=om(t).value;var a=om(t).value;t=om(t).value;i&&0===(t&7)||(t=e.h[r],t.h=0,t.g=0,t.C=!1,t.s=!1,t.B="white",t.m="black");t=e.h[r];t.l=0<(n&32);t.H=(o&15)+1;t.F=(a&63)+1;e.g=e.h[r]}}}return null}function lm(e,t){for(var r=[],n=0;8>n;n++)1===(t&1)&&e.h[n]&&r.push(n),t>>=1;return r}function cm(e,t,r){var n=null;t=u(lm(e,t));for(var i=t.next();!i.done;i=t.next()){i=i.value;var o=e.h[i];o.isVisible()&&(n=Jh(o,r,e.i));e.h[i]=null}return n}function um(e){e.g=null;e.h=[null,null,null,null,null,null,null,null]}function pm(e,t,r){var n={0:0,1:0,2:1,3:1};e=n[e];t=n[t];r=n[r];return hm[e<<2|t<<1|r]}var dm=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),hm="black blue green cyan red magenta yellow white".split(" ");function mm(){this.h=[];this.g=[];this.i=new rm;this.l=0;this.m=new Map([["CC1",new Mh(0,0)],["CC2",new Mh(0,1)],["CC3",new Mh(1,0)],["CC4",new Mh(1,1)]]);this.B=this.s=0;this.j=new Map;this.C=!0;fm(this)}mm.prototype.clear=function(){this.l=0;this.h=[];this.g=[];var e=this.i;e.i=[];e.h=[];e.g=0;fm(this);e=u(this.j.values());for(var t=e.next();!t.done;t=e.next())um(t.value)};function fm(e){e.s=0;e.B=0;for(var t=u(e.m.values()),r=t.next();!r.done;r=t.next())r=r.value,r.h=Fh,r.g=r.j,r.m=null,Dh(r.i),Dh(r.j),Dh(r.s);e.C=!0}mm.prototype.extract=function(e,t){if(this.C){for(var r=u(this.m.values()),n=r.next();!n.done;n=r.next())n.value.l=t;this.C=!1}e=new Ai(e,0);if(181===e.Ia()&&49===e.Za()&&1195456820===e.N()&&3===e.Ia()&&(r=e.Ia(),0!==(r&64)))for(r&=31,e.skip(1),n=0;n<r;n++){var i=e.Ia(),o=(i&4)>>2,a=e.Ia(),s=e.Ia();o&&(i&=3,0===i||1===i?this.h.push({pts:t,type:i,Ua:a,yb:s,order:this.h.length}):(this.g.push({pts:t,type:i,value:a,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}};mm.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e);this.g.sort(e);for(var r=u(this.h),n=r.next();!n.done;n=r.next())(n=gm(this,n.value))&&t.push(n);r=u(this.g);for(n=r.next();!n.done;n=r.next())nm(this.i,n.value);r=u(this.i.i);for(n=r.next();!n.done;n=r.next())n=ym(this,n.value),t.push.apply(t,p(n));this.i.i=[];this.h=[];this.g=[];return t};function gm(e,t){var r=t.type;if(16===(t.Ua&112)){var n=t.Ua>>3&1;0===r?e.s=n:e.B=n}r=e.m.get("CC"+(r<<1|(r?e.B:e.s)+1));if(255===t.Ua&&255===t.yb||!t.Ua&&!t.yb||!bm(t.Ua)||!bm(t.yb))return 45<=++e.l&&fm(e),null;e.l=0;t.Ua&=127;t.yb&=127;if(!t.Ua&&!t.yb)return null;e=null;if(16===(t.Ua&112))e:{n=t.Ua;e=t.yb;if(r.m===(n<<8|e))r.m=null;else if(r.m=n<<8|e,16===(n&240)&&64===(e&192)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(n&7)<<1|e>>5&1];var i=(e&30)>>1;n="white";var o=!1;7>i?n=Gh[i]:7===i&&(o=!0);e=1===(e&1);r.h!==Vh&&(i=r.g,r.h===zh&&t!==i.g&&(r=1+t-i.h,Th(i,r,1+i.g-i.h,i.h),Oh(i,0,r-1),Oh(i,t+1,15-t)),i.g=t,i.m=e,i.j=o,i.l=n,i.s="black")}else if(17===(n&247)&&32===(e&240))r.g.m=!1,r.g.j=!1,r.g.l="white",Ch(r.g,kh,32),n=!1,t=Gh[(e&14)>>1],"white_italics"===t&&(t="white",n=!0),r.g.m=1===(e&1),r.g.j=n,r.g.l=t;else if(16===(n&247)&&32===(e&240)||23===(n&247)&&45===(e&255))t="black",0===(n&7)&&(t=Wh[(e&14)>>1]),r.g.s=t;else if(17===(n&247)&&48===(e&240))Ch(r.g,Ph,e);else if(18===(n&246)&&32===(e&224))Ch(r.g,n&1?Ih:Ah,e);else if(20===(n&246)&&32===(e&240)){e=t.pts;n=null;switch(t.yb){case 32:Uh(r);break;case 33:r=r.g;r.i[r.g].pop();break;case 37:n=qh(r,2,e);break;case 38:n=qh(r,3,e);break;case 39:n=qh(r,4,e);break;case 40:Ch(r.g,kh,32);break;case 41:r.h=2;r.g=r.i;r.g.h=0;r.l=e;break;case 42:Dh(r.s);Hh(r);break;case 43:Hh(r);break;case 44:t=r.i;n=null;r.h!==Vh&&(n=xh(t,r.l,e));Oh(t,0,15);break;case 45:t=r.g;r.h!==zh?n=null:(n=xh(t,r.l,e),o=t.g-t.h+1,Th(t,o-1,o,t.h),Oh(t,0,o-1),Oh(t,t.g,15-t.g),r.l=e);break;case 46:Oh(r.j,0,15);break;case 47:t=null,r.h!==Vh&&(t=xh(r.i,r.l,e)),n=r.j,r.j=r.i,r.i=n,Uh(r),r.l=e,n=t}e=n;break e}e=null}else n=t.yb,Ch(r.g,kh,t.Ua),Ch(r.g,kh,n);return e}function ym(e,t){var r=[];try{for(;t.va();){var n=om(t).value,i=(n&224)>>5,o=n&31;7===i&&0!=o&&(i=om(t).value&63);if(0!=i){e.j.has(i)||e.j.set(i,new am(i));for(var a=e.j.get(i),s=t.ra();t.ra()-s<o;){i=t;var l=om(i),c=l.value,u=l.pts;if(16===c){var p=om(i);c=c<<16|p.value}if(0<=c&&31>=c){var d=u;if(a.g){var h=a.g;i=null;switch(c){case 8:!Qh(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.F-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:h.isVisible()&&(i=Jh(h,d,a.i));if(h.h+1>=h.H){d=h;for(var m=0,f=1;16>f;f++,m++)d.i[m]=d.i[f];for(f=0;1>f;f++,m++)d.i[m]=Xh()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(i=Jh(h,d,a.i));h.i[h.h]=Xh();h.g=0;break;case 12:h.isVisible()&&(i=Jh(h,d,a.i)),$h(h),d=h,d.h=0,d.g=0}var g=i}else g=null}else if(128<=c&&159>=c)g=sm(a,i,c,u);else{if(4096<=c&&4127>=c)d=c&255,8<=d&&15>=d?i.skip(1):16<=d&&23>=d?i.skip(2):24<=d&&31>=d&&i.skip(3);else if(4224<=c&&4255>=c)d=c&255,128<=d&&135>=d?i.skip(4):136<=d&&143>=d&&i.skip(5);else if(32<=c&&127>=c)i=c,a.g&&(127===i?Yh(a.g,"♪"):Yh(a.g,String.fromCharCode(i)));else if(160<=c&&255>=c)a.g&&Yh(a.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(i=c&255,a.g)if(dm.has(i)){var y=dm.get(i);Yh(a.g,y)}else Yh(a.g,"_")}else 4256<=c&&4351>=c&&a.g&&(160!=(c&255)?Yh(a.g,"_"):Yh(a.g,"[CC]"));g=null}(i=g)&&r.push(i)}}}}catch(e){if(e instanceof De&&3e3===e.code)J("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw e}return r}function bm(e){for(var t=0;e;)t^=e&1,e>>=1;return 1===t}V("shaka.cea.CeaDecoder",mm);gt=function(){return new mm};function vm(e){for(var t=[],r=e,n=e=0;n<r.length;)2==e&&3==r[n]?(e=0,r=[].concat(p(r)),r.splice(n,1),r=new Uint8Array(r)):0==r[n]?e++:e=0,n++;e=r;for(n=0;n<e.length;){for(r=0;255==e[n];)r+=255,n++;r+=e[n++];for(var i=0;255==e[n];)i+=255,n++;i+=e[n++];4==r&&t.push(e.subarray(n,n+i));n+=i}return t}function wm(){this.j=new Map;this.i=this.h=0;this.g=Sm}wm.prototype.init=function(e){function t(e){e=e.name;e in Dm&&(r.g=Dm[e])}var r=this,n=[],i=[];(new Ri).box("moov",Ni).box("mvex",Ni).T("trex",(function(e){var t=e.reader;t.skip(4);t.skip(4);e=t.N();t=t.N();r.h=e;r.i=t})).box("trak",Ni).T("tkhd",(function(e){e=Ha(e.reader,e.version);n.push(e.trackId)})).box("mdia",Ni).T("mdhd",(function(e){e=qa(e.reader,e.version);i.push(e.timescale)})).box("minf",Ni).box("stbl",Ni).T("stsd",Li).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",Mi).box("sinf",Ni).box("frma",(function(e){e=za(e.reader).Ga;e in Dm&&(r.g=Dm[e])})).parse(e,!0);if(!n.length||!i.length||n.length!=i.length)throw new De(2,2,2010);this.g==Sm&&Q("Unable to determine bitstream format for CEA parsing!");n.forEach((function(e,t){r.j.set(e,i[t])}))};wm.prototype.parse=function(e){var t=this;if(this.g==Sm)return[];var r=[],n=this.h,i=this.i,o=0,a=[],s=null,l=9e4;(new Ri).box("moof",(function(e){o=e.start;a=[];Ni(e)})).box("traf",Ni).T("trun",(function(e){e=Ua(e.reader,e.version,e.flags);a.push(e)})).T("tfhd",(function(e){e=La(e.reader,e.flags);n=e.ig||t.h;i=e.hh||t.i;e=e.trackId;t.j.has(e)&&(l=t.j.get(e))})).T("tfdt",(function(e){s=Ma(e.reader,e.version).baseMediaDecodeTime})).box("mdat",(function(e){if(null===s)throw Q("Unable to find base media decode time for CEA captions!"),new De(2,2,2010);Em(t,e.reader,s,l,n,i,o-e.start-8,a,r)})).parse(e,!1);return r};function Em(e,t,r,n,i,o,a,s,l){var c=0,d=o,h=s.map((function(e){return e.Dg}));h=[].concat.apply([],p(h));h.length&&(d=h[0].sampleSize||o);for(t.skip(a+s[0].gh);t.va();){a=t.N();var m=t.Ia(),f=null;f=!1;s=1;switch(e.g){case _m:f=m&31;f=6==f;break;case xm:s=2;t.skip(1);f=m>>1&63;f=39==f||40==f;break;default:return}if(f)for(m=0,c<h.length&&(m=h[c].ve||0),m=(r+m)/n,s=u(vm(t.Ib(a-s))),f=s.next();!f.done;f=s.next())l.push({packet:f.value,pts:m});else try{t.skip(a-s)}catch(e){break}d-=a+4;0==d&&(r=c<h.length?r+(h[c].vf||i):r+i,c++,c<h.length?d=h[c].sampleSize||o:d=o)}}V("shaka.cea.Mp4CeaParser",wm);var Sm=0,_m=1,xm=2,Dm={avc1:_m,avc3:_m,hev1:xm,hvc1:xm,dvh1:xm,dvhe:xm};ft["video/mp4"]=function(){return new wm};function Cm(){}Cm.prototype.init=function(){};Cm.prototype.parse=function(e){var t=[];e=ut(e);if(!ts(e))return t;e=(new Za).parse(e).Ye();e=u(e);for(var r=e.next();!r.done;r=e.next())if(r=r.value,6==r.type&&null!=r.time)for(var n=u(vm(r.data)),i=n.next();!i.done;i=n.next())t.push({packet:i.value,pts:r.time});return t};V("shaka.cea.TsCeaParser",Cm);ft["video/mp2t"]=function(){return new Cm};function Tm(e,t,r){var n=jm(e),i=null;e=[];var o=[],a=new Set(n.map((function(e){return e.keyId})));a.delete(null);if(1<a.size)throw new De(2,4,4010);t||(o=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"==e.wf?(i=e.init||i,!1):!0})),o.length&&(e=Im(i,o,r,a),0==e.length&&(e=[Ae("",i)])));if(n.length&&(t||!o.length))for(e=[],t=u(Object.values(r)),r=t.next();!r.done;r=t.next())r=r.value,"org.w3.clearkey"!=r&&e.push(Ae(r,i));if(a=Array.from(a)[0]||null)for(t=u(e),r=t.next();!r.done;r=t.next())for(r=u(r.value.initData),n=r.next();!n.done;n=r.next())n.value.keyId=a;return{hg:a,ek:i,drmInfos:e,lg:!0}}function Om(e,t,r,n){var i=Tm(e,r,n);if(t.lg){e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem;r=0==i.drmInfos.length;if(0==t.drmInfos.length||e&&!r)t.drmInfos=i.drmInfos;t.lg=!1}else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new De(2,4,4008);return i.hg||t.hg}function km(e){var t=0,r=pt(e),n=r.getUint32(t,!0);if(n!=e.byteLength)return[];e:{e=t+6;for(t=[];e<r.byteLength-1;){n=r.getUint16(e,!0);e+=2;var i=r.getUint16(e,!0);e+=2;if(0!=(i&1)||i+e>r.byteLength){r=[];break e}var o=ut(r,e,i);t.push({type:n,value:o});e+=i}r=t}return r}function Pm(e){e=u(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=u(t.value.childNodes);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r instanceof Element&&"LA_URL"==r.tagName)return r.textContent}return""}function Am(e){var t=eo(e.node,"https://dashif.org/CPS","Laurl");if(t&&t.textContent)return t.textContent;e=eo(e.node,"urn:microsoft:playready","pro");if(!e)return"";e=Ki(e.textContent);e=km(e).filter((function(e){return e.type===Nm}))[0];if(!e)return"";e=Ci(e.value,!0);return(e=vo(e,"WRMHEADER"))?Pm(e):""}function Im(e,t,r,n){var i=[];t=u(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var a=r[o.wf];if(a){var s;if(s=eo(o.node,"urn:microsoft:playready","pro")){s=Ki(s.textContent);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:Ji(s,l,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else s=null;l=null;if("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.wf)if(l=n,0==l.size)l=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),p=new Uint8Array([]);l=[{initData:Ji(p,c,l,1),initDataType:"cenc",keyId:o.keyId}]}s=Ae(a,o.init||e||s||l);if(a=Lm.get(a))s.licenseServerUri=a(o);i.push(s)}}return i}function jm(e){var t=[];e=u(e);for(var r=e.next();!r.done;r=e.next())(r=Rm(r.value))&&t.push(r);return t}function Rm(e){var t=e.getAttribute("schemeIdUri"),r=io(e,"urn:mpeg:cenc:2013","default_KID"),n=no(e,"urn:mpeg:cenc:2013","pssh").map(ao);if(!t)return null;t=t.toLowerCase();if(r&&(r=r.replace(/-/g,"").toLowerCase(),r.includes(" ")))throw new De(2,4,4009);var i=[];try{i=n.map((function(e){return{initDataType:"cenc",initData:Ki(e),keyId:null}}))}catch(e){throw new De(2,4,4007)}return{node:e,wf:t,keyId:r,init:0<i.length?i:null}}var Nm=1,Lm=(new Map).set("com.widevine.alpha",(function(e){var t=eo(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=eo(e.node,"urn:microsoft","laurl"))?e.getAttribute("licenseUrl")||"":""})).set("com.microsoft.playready",Am).set("com.microsoft.playready.recommendation",Am).set("com.microsoft.playready.software",Am).set("com.microsoft.playready.hardware",Am).set("org.w3.clearkey",(function(e){var t=eo(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=eo(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function Mm(t,r,n,i,o){var a={RepresentationID:r,Number:n,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,r,n,i){if("$$"==t)return"$";var o=a[r];if(null==o)return t;"RepresentationID"==r&&n&&(n=void 0);"Time"==r&&(o=Math.round(o));switch(i){case void 0:case"d":case"i":case"u":t=o.toString();break;case"o":t=o.toString(8);break;case"x":t=o.toString(16);break;case"X":t=o.toString(16).toUpperCase();break;default:t=o.toString()}n=e.parseInt(n,10)||1;return Array(Math.max(0,n-t.length)+1).join("0")+t}))}function qm(e,t){var r=Um(e,t,"timescale"),n=1;r&&(n=mo(r)||1);var i=Um(e,t,"duration");r=mo(i||"");"image"==e.M.contentType&&(r=go(i||""));r&&(r/=n);var o=Um(e,t,"startNumber");i=Number(Um(e,t,"presentationTimeOffset"))||0;var a=fo(o||"");if(null==o||null==a)a=1;o=Hm(e,t,"SegmentTimeline");t=null;if(o){t=n;e=e.aa.duration||Infinity;o=to(o,"S");for(var s=[],l=-i,c=0;c<o.length;++c){var u=o[c],p=o[c+1],d=lo(u,"t",fo),h=lo(u,"d",fo);u=lo(u,"r",ho);null!=d&&(d-=i);if(!h)break;d=null!=d?d:l;u=u||0;if(0>u)if(p){p=lo(p,"t",fo);if(null==p)break;else if(d>=p)break;u=Math.ceil((p-d)/h)-1}else{if(Infinity==e)break;else if(d/t>=e)break;u=Math.ceil((e*t-d)/h)-1}0<s.length&&d!=l&&(s[s.length-1].end=d/t);for(p=0;p<=u;++p)l=d+h,s.push({start:d/t,end:l/t,Of:d}),d=l}t=s}return{timescale:n,Ba:r,Kc:a,Jb:i/n||0,Nf:i,timeline:t}}function Um(e,t,r){return[t(e.M),t(e.oa),t(e.ua)].filter(ke).map((function(e){return e.getAttribute(r)})).reduce((function(e,t){return e||t}))}function Hm(e,t,r){return[t(e.M),t(e.oa),t(e.ua)].filter(ke).map((function(e){return Zi(e,r)})).reduce((function(e,t){return e||t}))}function Fm(e,t,r,n,i,o){for(var a=io(e,"http://www.w3.org/1999/xlink","href"),s=io(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())c=c.value,"http://www.w3.org/1999/xlink"==c.namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=o)return Gn(new De(2,4,4028));if("onLoad"!=s)return Gn(new De(2,4,4027));var p=Pe([n],[a]);return i.request(0,ii(p,t)).qa((function(n){n=wo(n.data,e.tagName);if(!n)return Gn(new De(2,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;n.childNodes.length;){var s=n.childNodes[0];n.removeChild(s);e.appendChild(s)}n=u(Array.from(n.attributes));for(s=n.next();!s.done;s=n.next())e.setAttributeNode(s.value.cloneNode(!1));return Bm(e,t,r,p[0],i,o+1)}))}function Bm(e,t,r,n,i,o){o=void 0===o?0:o;if(io(e,"http://www.w3.org/1999/xlink","href")){var a=Fm(e,t,r,n,i,o);r&&(a=a.qa(void 0,(function(){return Bm(e,t,r,n,i,o)})));return a}a=[];for(var s=u(Array.from(e.childNodes)),l=s.next();!l.done;l=s.next())l=l.value,l instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==io(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&a.push(Bm(l,t,r,n,i,o)));return Yn(a).qa((function(){return e}))}function zm(e,t,r,n,i,o,a){var s,l=(new Ri).T("sidx",(function(e){s=Vm(t,n,i,o,a,r,e)}));e&&l.parse(e);if(s)return s;throw new De(2,3,3004)}function Vm(e,t,r,n,i,o,a){var s=[];a.reader.skip(4);var l=a.reader.N();if(0==l)throw new De(2,3,3005);if(0==a.version){var c=a.reader.N();var u=a.reader.N()}else c=a.reader.Ic(),u=a.reader.Ic();a.reader.skip(2);var p=a.reader.Za();e=e+a.size+u;for(u=0;u<p;u++){var d=a.reader.N(),h=(d&2147483648)>>>31;d&=2147483647;var m=a.reader.N();a.reader.skip(4);if(1==h)throw new De(2,3,3006);s.push(new Ea(c/l+r,(c+m)/l+r,(function(){return o}),e,e+d-1,t,r,n,i));c+=m;e+=d}a.parser.stop();return s}function Wm(e){this.h=pt(e);this.g=new Ai(this.h,0)}Wm.prototype.va=function(){return this.g.va()};function Gm(e){var t=Km(e);if(7<t.length)throw new De(2,3,3002);var r=0;t=u(t);for(var n=t.next();!n.done;n=t.next())r=256*r+n.value;t=Km(e);e:{n=u($m);for(var i=n.next();!i.done;i=n.next())if(st(t,new Uint8Array(i.value))){n=!0;break e}n=!1}if(n)t=e.h.byteLength-e.g.ra();else{if(8==t.length&&t[1]&224)throw new De(2,3,3001);for(i=n=0;i<t.length;i++){var o=t[i];n=0==i?o&(1<<8-t.length)-1:256*n+o}t=n}t=e.g.ra()+t<=e.h.byteLength?t:e.h.byteLength-e.g.ra();n=pt(e.h,e.g.ra(),t);e.g.skip(t);return new Xm(r,n)}function Km(e){var t=e.g.ra(),r=e.g.Ia();if(0==r)throw new De(2,3,3002);r=8-Math.floor(Math.log2(r));e.g.skip(r-1);return ut(e.h,t,r)}var $m=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Xm(e,t){this.id=e;this.g=t}function Ym(e){if(8<e.g.byteLength)throw new De(2,3,3002);if(8==e.g.byteLength&&e.g.getUint8(0)&224)throw new De(2,3,3001);for(var t=0,r=0;r<e.g.byteLength;r++){var n=e.g.getUint8(r);t=256*t+n}return t}function Qm(e,t,r,n,i,o,a,s,l){function c(){return i}var u=[];e=new Wm(e.g);for(var p=null,d=null;e.va();){var h=Gm(e);if(187==h.id){var m=Jm(h);m&&(h=r*m.Gi,m=t+m.mi,null!=p&&u.push(new Ea(p+a,h+a,c,d,m-1,o,a,s,l)),p=h,d=m)}}null!=p&&u.push(new Ea(p+a,n+a,c,d,null,o,a,s,l));return u}function Jm(e){var t=new Wm(e.g);e=Gm(t);if(179!=e.id)throw new De(2,3,3013);e=Ym(e);t=Gm(t);if(183!=t.id)throw new De(2,3,3012);t=new Wm(t.g);for(var r=0;t.va();){var n=Gm(t);if(241==n.id){r=Ym(n);break}}return{Gi:e,mi:r}}function Zm(e,t){t=Hm(e,t,"Initialization");if(!t)return null;var r=e.M.Ta,n=t.getAttribute("sourceURL");n&&(r=Pe(e.M.Ta,[n]));n=0;var i=null;if(t=lo(t,"range",po))n=t.start,i=t.end;return new va((function(){return r}),n,i,sf(e))}function ef(e,t){var r=Number(Um(e,rf,"presentationTimeOffset"))||0,n=Um(e,rf,"timescale"),i=1;n&&(i=mo(n)||1);var o=r/i||0,a=Zm(e,rf);of(e,a);var s=Zn(e);return{yc:function(){var e=Hm(s,rf,"RepresentationIndex");var r=s.M.Ta;e&&(e=e.getAttribute("sourceURL"))&&(r=Pe(s.M.Ta,[e]));e=nf(s);return tf(s,t,a,r,e.start,e.end,o)}}}function tf(e,t,r,n,i,o,a){var s,l,c,u,p,d,h,m,f,g,y,b,v,w,E;return L((function(_){if(1==_.g)return s=e.presentationTimeline,l=!e.Qb||!e.aa.Ze,c=e.aa.start,u=e.aa.duration,p=e.M.mimeType.split("/")[1],d=t,h=null,m=[d(n,i,o,!1),"webm"==p?d(r.Oa(),r.Sa,r.za,!0):null],d=null,S(_,Promise.all(m),2);f=_.h;g=f[0];y=f[1]||null;b=null;v=c-a;w=c;E=u?c+u:Infinity;if("mp4"==p)var x=zm(g,i,n,r,v,w,E);else{x=new Wm(y);if(440786851!=Gm(x).id)throw new De(2,3,3008);var D=Gm(x);if(408125543!=D.id)throw new De(2,3,3009);x=D.g.byteOffset;D=new Wm(D.g);for(var C=null;D.va();){var T=Gm(D);if(357149030==T.id){C=T;break}}if(!C)throw new De(2,3,3010);C=new Wm(C.g);T=1e6;for(D=null;C.va();){var O=Gm(C);if(2807729==O.id)T=Ym(O);else if(17545==O.id)if(4==O.g.byteLength)D=O.g.getFloat32(0);else if(8==O.g.byteLength)D=O.g.getFloat64(0);else throw new De(2,3,3003)}if(null==D)throw new De(2,3,3011);C=T/1e9;D*=C;T=Gm(new Wm(g));if(475249515!=T.id)throw new De(2,3,3007);x=Qm(T,x,C,D,n,r,v,w,E)}b=x;s.sd(b);h=new ll(b);l&&h.wc(w,E,!0);return _.return(h)}))}function rf(e){return e.yd}function nf(e){var t=Hm(e,rf,"RepresentationIndex");e=Um(e,rf,"indexRange");e=po(e||"");t&&(e=lo(t,"range",po,e));return e}function of(e,t){af(e,t);if(!nf(e))throw new De(2,4,4002)}function af(e,t){var r=e.M.mimeType.split("/")[1];if(e.M.contentType!=Re&&"mp4"!=r&&"webm"!=r)throw new De(2,4,4006);if("webm"==r&&!t)throw new De(2,4,4005)}function sf(e){var t=e.M;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.je,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function lf(e,t){var r=Zm(e,cf),n=uf(e);if(!n.Ba&&!n.timeline&&1<n.Fc.length)throw new De(2,4,4002);if(!n.Ba&&!e.aa.duration&&!n.timeline&&1==n.Fc.length)throw new De(2,4,4002);if(n.timeline&&0==n.timeline.length)throw new De(2,4,4002);var i=null,o=null;e.ua.id&&e.M.id&&(o=t[e.ua.id+","+e.M.id])&&(i=o.segmentIndex);var a=pf(e.aa.start,e.aa.duration,e.M.Ta,n,r);t=!i;i?i.rd(a,e.presentationTimeline.Db()):i=new ll(a);e.presentationTimeline.sd(a);e.Qb&&e.aa.Ze||i.wc(e.aa.start,e.aa.duration?e.aa.start+e.aa.duration:Infinity,t);o&&(o.segmentIndex=i);return{yc:function(){i&&0!=i.bc()||i.fe(a);return Promise.resolve(i)}}}function cf(e){return e.Vb}function uf(e){var t=df(e);e=qm(e,cf);var r=e.Kc;0==r&&(r=1);var n=0;e.Ba?n=e.Ba*(r-1):e.timeline&&0<e.timeline.length&&(n=e.timeline[0].start);return{Ba:e.Ba,startTime:n,Kc:r,Jb:e.Jb,timeline:e.timeline,Fc:t}}function pf(e,t,r,n,i){var o=n.Fc.length;n.timeline&&n.timeline.length!=n.Fc.length&&(o=Math.min(n.timeline.length,n.Fc.length));for(var a=e-n.Jb,s=t?e+t:Infinity,l=[],c=n.startTime,u={},p=0;p<o;u={Yc:u.Yc,Wc:u.Wc},p++){u.Wc=n.Fc[p];var d=void 0;d=null!=n.Ba?c+n.Ba:n.timeline?n.timeline[p].end:c+t;u.Yc=null;l.push(new Ea(e+c,e+d,function(e){return function(){null==e.Yc&&(e.Yc=Pe(r,[e.Wc.ci]));return e.Yc}}(u),u.Wc.start,u.Wc.end,i,a,e,s));c=d}return l}function df(e){return[e.M.Vb,e.oa.Vb,e.ua.Vb].filter(ke).map((function(e){return to(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.sg&&(e.sg=!0);var r=t.getAttribute("media");t=lo(t,"mediaRange",po,{start:0,end:null});return{ci:r,start:t.start,end:t.end}}))}function hf(e,t,r,n,i,o){var a=bf(e),s=ff(e);gf(s);var l=Zn(e);if(s.od)return af(e,a),{yc:function(){var e=Mm(s.od,l.M.id,null,l.bandwidth||null,null);e=Pe(l.M.Ta,[e]);return tf(l,t,a,e,0,null,s.Jb)}};if(s.Ba)return n||"image"===e.oa.contentType||(e.presentationTimeline.mf(s.Ba),e.presentationTimeline.ie(e.aa.start)),{yc:function(){return yf(l,s,i,a,o)}};var c=null;n=n=null;e.ua.id&&e.M.id&&(n=e.ua.id+","+e.M.id,n=r[n])&&(c=n.segmentIndex);var u=e.aa.start,p=e.aa.duration?u+e.aa.duration:Infinity,d=!(e.Qb&&e.aa.Ze);c?(r=c,wf(r,s,u,p,d),r.ob(e.presentationTimeline.Db())):c=new vf(s,e.M.id,e.bandwidth,e.M.Ta,u,p,a,d);s.timeline&&"image"!==e.oa.contentType&&e.presentationTimeline.Ag(s.timeline,u);n&&e.Qb&&(n.segmentIndex=c);return{yc:function(){c instanceof vf&&0==c.bc()&&wf(c,s,u,p,d);return Promise.resolve(c)}}}function mf(e){return e.zd}function ff(e){var t=qm(e,mf),r=Um(e,mf,"media");e=Um(e,mf,"index");return{Ba:t.Ba,timescale:t.timescale,Kc:t.Kc,Jb:t.Jb,Nf:t.Nf,timeline:t.timeline,kf:r,od:e}}function gf(e){var t=e.od?1:0;t+=e.timeline?1:0;t+=e.Ba?1:0;if(0==t)throw new De(2,4,4002);1!=t&&(e.od&&(e.timeline=null),e.Ba=null);if(!e.od&&!e.kf)throw new De(2,4,4002)}function yf(e,t,r,n,i){function o(e){var r=(e-m)*h,i=r+t.Jb,o=r+c;r=o+h;var a=Math.min(r,s());o=new Ea(o,a,(function(){var t=Mm(g,b,e,y,i*f);return Pe(v,[t])}),0,null,n,w,c,s());o.j=r;return o}function a(){var e=[Math.max(l.Db(),c),Math.min(l.cc(),s())].map((function(e){return e-c}));return[Math.ceil(e[0]/h),Math.ceil(e[1]/h)-1].map((function(e){return e+m}))}function s(){var e=null!=p&&i[p]||d;return e?c+e:Infinity}var l=e.presentationTimeline,c=e.aa.start,p=e.ua.id,d=e.aa.duration,h=t.Ba,m=t.Kc,f=t.timescale,g=t.kf,y=e.bandwidth||null,b=e.M.id,v=e.M.Ta,w=c-t.Jb,E=a();e=e.Qb?Math.max(E[0],E[1]-r+1):E[0];E=E[1];r=[];for(var S=e;S<=E;++S){var _=o(S);r.push(_)}var x=new ll(r);r=l.cc()<s();S=l.S();if(r||S){var D=Math.max(e,E+1);x.Ae(h,(function(){var e=l.Db();x.ob(e);var t=u(a());t.next();t=t.next().value;for(var r=[];D<=t;){var n=o(D);r.push(n);D++}return e>s()&&!r.length?null:r}))}return Promise.resolve(x)}function bf(e){var t=Um(e,mf,"initialization");if(!t)return null;var r=e.M.id,n=e.bandwidth||null,i=e.M.Ta;return new va((function(){var e=Mm(t,r,null,n,null);return Pe(i,[e])}),0,null,sf(e))}function vf(e,t,r,n,i,o,a,s){ll.call(this,[]);this.h=e;this.G=t;this.B=r;this.C=n;this.j=i;this.s=o;this.F=a;s&&Ef(this)}b(vf,ll);n=vf.prototype;n.bc=function(){return this.h?this.h.timeline.length:0};n.release=function(){ll.prototype.release.call(this);this.h=null};n.ob=function(e){if(this.h){for(var t=0,r=this.h.timeline,n=0;n<r.length;n+=1)if(r[n].end+this.j<=e)t+=1;else break;0<t&&(this.h.timeline=r.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.bc()&&this.release())}};function wf(e,t,r,n,i){if(e.h){r=e.h.timeline;var o=r[r.length-1];t=t.timeline.filter((function(e){return e.start>=o.end}));0<t.length&&e.h.timeline.push.apply(e.h.timeline,p(t));e.s!==n&&(e.s=n)}else e.h=t,e.j=r,e.s=n;i&&Ef(e)}function Ef(e){if(!e.m){for(var t=e.h.timeline;t.length;)if(t[t.length-1].start>=e.s)t.pop();else break;e.ob(e.j);0!==t.length&&Infinity!==e.s&&(t[t.length-1].end=e.s-e.j)}}n.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>this.s)return null;for(var r=t.length-1,n=0;n<t.length;n++){var i=t[n],o=i.start+this.j;i=i.end+this.j;n<r&&(i=t[n+1].start+this.j);if(e>=o&&e<i)return n+this.i}return null};n.get=function(e){var t=this,r=e-this.i;if(0>r||r>=this.bc()||!this.h)return null;var n=this.g[r];if(!n){n=this.h.timeline[r];var i=e+this.h.Kc,o=this.h.Nf+n.Of;n=new Ea(this.j+n.start,this.j+n.end,(function(){return t.h?Sf(t.h.kf,t.G,i,t.B,o,t.C):[]}),0,null,this.F,this.j-this.h.Jb,this.j,this.s);this.g[r]=n}return n};function Sf(e,t,r,n,i,o){e=Mm(e,t,r,n||null,i);return Pe(o,[e]).map((function(e){return e.toString()}))}function _f(){this.j=[];this.g=[];this.i=[];this.l=[];this.h=[];this.m=new Set}n=_f.prototype;n.release=function(){for(var e=u(this.g.concat(this.i,this.l,this.h)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[];this.i=[];this.l=[];this.h=[];this.j=[]};n.Oh=function(){return this.j};n.We=function(){return this.l.slice()};n.vh=function(){return this.h};n.eg=function(e,t){var r=this,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P,A,I,j,R,N;return L((function(L){switch(L.g){case 1:n=Ne;xf(e);Cf(e);Df(e);Tf(e);if(!t&&1==e.length){i=e[0];r.g=i.audioStreams;r.i=i.videoStreams;r.l=i.textStreams;r.h=i.imageStreams;L.D(2);break}o=-1;for(a=0;a<e.length;a++)s=e[a],r.m.has(s.id)||(r.m.add(s.id),-1==o&&(o=a));if(-1==o)return L.return();l=e.map((function(e){return e.audioStreams}));c=e.map((function(e){return e.videoStreams}));p=e.map((function(e){return e.textStreams}));d=e.map((function(e){return e.imageStreams}));h=u(p);for(m=h.next();!m.done;m=h.next())f=m.value,f.push(Kf(n.na));g=u(d);for(y=g.next();!y.done;y=g.next())b=y.value,b.push(Kf(n.Zc));return S(L,kf(r.g,l,o,Rf,Lf),3);case 3:return S(L,kf(r.i,c,o,Rf,Lf),4);case 4:return S(L,kf(r.l,p,o,Rf,Lf),5);case 5:return S(L,kf(r.h,d,o,Rf,Lf),2);case 2:v=0;w=[];if(r.i.length&&r.g.length)for(O=u(r.g),k=O.next();!k.done;k=O.next())for(P=k.value,A=u(r.i),I=A.next();!I.done;I=A.next())j=I.value,R=Qo(P.drmInfos,j.drmInfos),P.drmInfos.length&&j.drmInfos.length&&!R.length||(N=v++,w.push({id:N,language:P.language,disabledUntilTime:0,primary:P.primary,audio:P,video:j,bandwidth:(P.bandwidth||0)+(j.bandwidth||0),drmInfos:R,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(E=r.i.concat(r.g),x=u(E),D=x.next();!D.done;D=x.next())C=D.value,T=v++,w.push({id:T,language:C.language,disabledUntilTime:0,primary:C.primary,audio:C.type==n.Ob?C:null,video:C.type==n.Na?C:null,bandwidth:C.bandwidth||0,drmInfos:C.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});r.j=w;_(L)}}))};function xf(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.audioStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.channelsCount==s.channelsCount&&i.language==s.language&&i.bandwidth==s.bandwidth&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&vt(i.roles,s.roles)&&i.audioSamplingRate==s.audioSamplingRate&&i.primary==s.primary&&(o=!0);o||r.push(i)}t.audioStreams=r}}function Df(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.language==s.language&&i.label==s.label&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.bandwidth==s.bandwidth&&vt(i.roles,s.roles)&&(o=!0);o||r.push(i)}t.textStreams=r}}function Cf(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.videoStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.frameRate==s.frameRate&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&i.label==s.label&&vt(i.roles,s.roles)&&_i(i.closedCaptions,s.closedCaptions)&&i.bandwidth==s.bandwidth&&(o=!0);o||r.push(i)}t.videoStreams=r}}function Tf(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var r=[],n=u(t.imageStreams),i=n.next();!i.done;i=n.next()){i=i.value;for(var o=!1,a=u(r),s=a.next();!s.done;s=a.next())s=s.value,i.id!=s.id&&i.width==s.width&&i.codecs==s.codecs&&i.mimeType==s.mimeType&&(o=!0);o||r.push(i)}t.imageStreams=r}}function Of(e){var t,r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,_,x,D,C,T,O,k;return L((function(P){switch(P.g){case 1:t=Ne;if(1==e.length)return P.return(e[0]);r=e.map((function(e){return e.filter((function(e){return e.type==t.Ob}))}));n=e.map((function(e){return e.filter((function(e){return e.type==t.Na}))}));i=e.map((function(e){return e.filter((function(e){return e.type==t.na}))}));o=e.map((function(e){return e.filter((function(e){return e.type==t.Zc}))}));a=u(i);for(s=a.next();!s.done;s=a.next())l=s.value,l.push(Gf(t.na));c=u(o);for(p=c.next();!p.done;p=c.next())d=p.value,d.push(Gf(t.Zc));return S(P,kf([],r,0,Nf,Mf),2);case 2:return h=P.h,S(P,kf([],n,0,Nf,Mf),3);case 3:return m=P.h,S(P,kf([],i,0,Nf,Mf),4);case 4:return f=P.h,S(P,kf([],o,0,Nf,Mf),5);case 5:g=P.h;y=0;if(m.length&&h.length)for(_=u(h),x=_.next();!x.done;x=_.next())for(D=x.value,C=u(m),T=C.next();!T.done;T=C.next())O=T.value,k=y++,O.variantIds.push(k),D.variantIds.push(k);else for(b=m.concat(h),v=u(b),w=v.next();!w.done;w=v.next())E=w.value,E.variantIds=[y++];return P.return(m.concat(h).concat(f).concat(g))}}))}function kf(e,t,r,n,i){var o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,_,x,D,C,T;return L((function(O){switch(O.g){case 1:o=Ne;a=[];for(s=0;s<t.length;s++)s>=r?a.push(new Set(t[s])):a.push(new Set);l=u(e);c=l.next();case 2:if(c.done){O.D(4);break}p=c.value;return S(O,Pf(p,t,r,i,a),5);case 5:d=O.h;if(!d)throw new De(2,4,4037);c=l.next();O.D(2);break;case 4:h=u(a);for(m=h.next();!m.done;m=h.next())for(f=m.value,g=u(f),y=g.next();!y.done;y=g.next())b=y.value,(v=If(b,t,n,i,a))&&e.push(v);w=u(a);for(m=w.next();!m.done;m=w.next())for(E=m.value,_={},x=u(E),y=x.next();!y.done;_={Nb:_.Nb},y=x.next())if(_.Nb=y.value,D=_.Nb.type==o.na&&!_.Nb.language,C=_.Nb.type==o.Zc&&!_.Nb.tilesLayout,!D&&!C&&(T=e.some(function(e){return function(t){return t.mimeType==e.Nb.mimeType&&Zt(t.codecs)==Zt(e.Nb.codecs)}}(_))))throw new De(2,4,4037);return O.return(e)}}))}function Pf(e,t,r,n,i){return L((function(o){if(1==o.g)return qf(t,e),e.matchedStreams?e.segmentIndex?S(o,Af(e,r),2):o.D(2):o.return(!1);jf(e,r,n,i);return o.return(!0)}))}function Af(e,t){var r,n,i,o,a,s,l;return L((function(c){if(1==c.g){r=[];n=e.matchedStreams;i=u(n);for(o=i.next();!o.done;o=i.next())a=o.value,r.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&r.push(a.trickModeVideo.createSegmentIndex());return S(c,Promise.all(r),2)}if(e.segmentIndex instanceof dl)for(s=t;s<n.length;s++)l=n[s],l.segmentIndex&&e.segmentIndex.h.push(l.segmentIndex);_(c)}))}function If(e,t,r,n,i){var o=r(e);qf(t,o);o.createSegmentIndex&&(o.createSegmentIndex=function(){return L((function(e){if(o.segmentIndex)return e.D(0);o.segmentIndex=new dl;return S(e,Af(o,0),0)}))});if(!o.matchedStreams||!o.matchedStreams.length)return null;jf(o,0,n,i);return o}function jf(e,t,r,n){for(var i=e.matchedStreams,o=0;o<i.length;o++)if(o>=t){var a=i[o];r(e,a);var s=!0;"audio"==e.type&&0==ze(e.language,a.language)&&(s=!1);s&&n[o].delete(a)}}function Rf(e){var t=Object.assign({},e);t.originalId=null;t.createSegmentIndex=function(){return Promise.resolve()};t.closeSegmentIndex=function(){t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null);if(t.matchedStreams)for(var e=u(t.matchedStreams),r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&(r.segmentIndex.release(),r.segmentIndex=null)};t.segmentIndex=null;t.emsgSchemeIdUris=[];t.keyIds=new Set;t.closedCaptions=null;t.trickModeVideo=null;return t}function Nf(e){e=Object.assign({},e);e.keyIds=new Set;e.segments=[];e.variantIds=[];e.closedCaptions=null;return e}function Lf(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));e.keyIds=function(e,t){return new Set([].concat(p(e),p(t)))}(e.keyIds,t.keyIds);null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var r=Qo(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new De(2,4,4038);e.drmInfos=r;e.encrypted=e.encrypted||t.encrypted;if(t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);r=u(t.closedCaptions);for(var n=r.next();!n.done;n=r.next()){var i=u(n.value);n=i.next().value;i=i.next().value;e.closedCaptions.set(n,i)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Rf(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){e.trickModeVideo.segmentIndex=e.segmentIndex.clone();return Promise.resolve()}),Lf(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Lf(e.trickModeVideo,t)}function Mf(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var r=t.keyIds;r=new Set([].concat(p(e.keyIds),p(r)));e.keyIds=r;e.encrypted=e.encrypted&&t.encrypted;e.segments.push.apply(e.segments,p(t.segments));if(t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=u(t.closedCaptions),r=t.next();!r.done;r=t.next()){var n=u(r.value);r=n.next().value;n=n.next().value;e.closedCaptions.set(r,n)}}function qf(e,t){var r=[];e=u(e);for(var n=e.next();!n.done;n=e.next()){var i=t,o={audio:Uf,video:Uf,text:Hf,image:Ff}[i.type],a={audio:Bf,video:zf,text:Vf,image:Wf}[i.type],s=null;n=u(n.value);for(var l=n.next();!l.done;l=n.next())l=l.value,!o(i,l)||s&&!a(i,s,l)||(s=l);i=s;if(!i)return;r.push(i)}t.matchedStreams=r}function Uf(e,t){function r(e){if(!Zf.has(e)){var t=Zt(e);Zf.set(e,t)}return Zf.get(e)}return t.mimeType!=e.mimeType||r(t.codecs)!=r(e.codecs)||e.drmInfos&&!Yo(e.drmInfos,t.drmInfos)?!1:!0}function Hf(e,t){return e.language?t.language?0==ze(e.language,t.language)||t.kind!=e.kind?!1:!0:!0:!1}function Ff(e){return e.tilesLayout?!0:!1}function Bf(e,t,r){if(e.id==r.id)return!0;var n=ze(e.language,t.language),i=ze(e.language,r.language);if(i>n)return!0;if(i<n)return!1;if(e.roles.length)return n=t.roles.filter((function(t){return e.roles.includes(t)})),i=r.roles.filter((function(t){return e.roles.includes(t)})),i.length>n.length?!0:i.length<n.length?!1:r.roles.length<t.roles.length;if(!r.roles.length&&t.roles.length)return!0;if(r.roles.length&&!t.roles.length)return!1;if(!t.primary&&r.primary)return!0;if(t.primary&&!r.primary)return!1;n=$f(e.channelsCount,t.channelsCount,r.channelsCount);if(n==Yf)return!0;if(n==Jf)return!1;n=$f(e.audioSamplingRate,t.audioSamplingRate,r.audioSamplingRate);return n==Yf?!0:n==Jf?!1:e.bandwidth&&Xf(e.bandwidth,t.bandwidth,r.bandwidth)==Yf?!0:!1}function zf(e,t,r){if(e.id==r.id)return!0;var n=$f(e.width*e.height,t.width*t.height,r.width*r.height);if(n==Yf)return!0;if(n==Jf)return!1;if(e.frameRate){n=$f(e.frameRate,t.frameRate,r.frameRate);if(n==Yf)return!0;if(n==Jf)return!1}return e.bandwidth&&Xf(e.bandwidth,t.bandwidth,r.bandwidth)==Yf?!0:!1}function Vf(e,t,r){if(e.id==r.id)return!0;var n=ze(e.language,t.language),i=ze(e.language,r.language);if(i>n)return!0;if(i<n)return!1;if(!t.primary&&r.primary)return!0;if(t.primary&&!r.primary)return!1;if(e.roles.length){n=t.roles.filter((function(t){return e.roles.includes(t)}));i=r.roles.filter((function(t){return e.roles.includes(t)}));if(i.length>n.length)return!0;if(i.length<n.length)return!1}else{if(!r.roles.length&&t.roles.length)return!0;if(r.roles.length&&!t.roles.length)return!1}return r.mimeType!=e.mimeType||r.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs?!1:!0}function Wf(e,t,r){return e.id==r.id?!0:$f(e.width*e.height,t.width*t.height,r.width*r.height)==Yf?!0:!1}function Gf(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1}}function Kf(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ll([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1}}function $f(e,t,r){if(t==e&&e!=r)return Jf;if(r==e&&e!=t)return Yf;if(t>e){if(r<=e||r-e<t-e)return Yf;if(r-e>t-e)return Jf}else{if(r>e)return Jf;if(e-r<e-t)return Yf;if(e-r>e-t)return Jf}return Qf}function Xf(e,t,r){t=Math.abs(e-t);e=Math.abs(e-r);return e<t?Yf:t<e?Jf:Qf}V("shaka.util.PeriodCombiner",_f);_f.prototype.combinePeriods=_f.prototype.eg;_f.prototype.getImageStreams=_f.prototype.vh;_f.prototype.getTextStreams=_f.prototype.We;_f.prototype.getVariants=_f.prototype.Oh;var Yf=1,Qf=0,Jf=-1,Zf=new Map;function eg(){var e=this;this.h=this.g=null;this.B=[];this.i=null;this.J=1;this.l={};this.L={};this.j=new _f;this.G=0;this.I=new Ze(5);this.H=new dr((function(){cg(e)}));this.C=new ei;this.F=null;this.K=[];this.m=Infinity;this.s=!1}n=eg.prototype;n.configure=function(e){this.g=e};n.start=function(e,t){var r=this,n;return L((function(i){if(1==i.g)return r.s=t.isLowLatencyMode(),r.B=[e],r.h=t,S(i,tg(r),2);n=i.h;r.h&&ug(r,n);if(!r.h)throw new De(2,7,7001);return i.return(r.i)}))};n.stop=function(){for(var e=u(Object.values(this.l)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.j&&this.j.release();this.g=this.h=null;this.B=[];this.i=null;this.l={};this.j=null;null!=this.H&&(this.H.stop(),this.H=null);return this.C.destroy()};n.update=function(){var e=this,t;return L((function(r){if(1==r.g)return x(r,2),S(r,tg(e),4);if(2!=r.g)return C(r,0);t=T(r);if(!e.h||!t)return r.return();e.h.onError(t);_(r)}))};n.onExpirationUpdated=function(){};function tg(e){var t,r,n,i,o,a,s;return L((function(l){if(1==l.g)return t=ii(e.B,e.g.retryParameters),r=e.h.networkingEngine,n=Date.now(),i=r.request(0,t,{type:4}),ti(e.C,i),S(l,i.promise,2);if(3!=l.g){o=l.h;if(!e.h)return l.return(0);o.uri&&!e.B.includes(o.uri)&&e.B.unshift(o.uri);return S(l,rg(e,o.data,o.uri),3)}a=Date.now();s=(a-n)/1e3;e.I.sample(1,s);return l.return(s)}))}function rg(e,t,r){var n,i,o,a,s;return L((function(l){if(1==l.g){n=wo(t,"MPD");if(!n)throw new De(2,4,4001,r);if(i=e.g.dash.disableXlinkProcessing)return l.return(ng(e,n,r));o=e.g.dash.xlinkFailGracefully;a=Bm(n,e.g.retryParameters,o,r,e.h.networkingEngine);ti(e.C,a);return S(l,a.promise,2)}s=l.h;return l.return(ng(e,s,r))}))}function ng(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P,A,I,j,R,N,M,q,U;return L((function(L){switch(L.g){case 1:(n=e.g.dash.manifestPreprocessor)&&n(t);i=[r];o=to(t,"Location").map(ao).filter(ke);0<o.length&&(a=Pe(i,o),i=e.B=a);s=to(t,"BaseURL");l=s.map(ao);c=Pe(i,l);p=0;s&&s.length&&(p=lo(s[0],"availabilityTimeOffset",go)||0);d=e.g.dash.ignoreMinBufferTime;h=0;d||(h=lo(t,"minBufferTime",uo)||0);e.G=lo(t,"minimumUpdatePeriod",uo,-1);m=lo(t,"availabilityStartTime",co);f=lo(t,"timeShiftBufferDepth",uo);g=e.g.dash.ignoreSuggestedPresentationDelay;y=null;g||(y=lo(t,"suggestedPresentationDelay",uo));b=e.g.dash.ignoreMaxSegmentDuration;v=null;b||(v=lo(t,"maxSegmentDuration",uo));w=t.getAttribute("type")||"static";if(e.i)for(E=e.i.presentationTimeline,x=u(Object.values(e.l)),D=x.next();!D.done;D=x.next())C=D.value,C.segmentIndex&&C.segmentIndex.ob(E.Db());else T=e.g.defaultPresentationDelay||1.5*h,O=null!=y?y:T,E=new Hs(m,O,e.g.dash.autoCorrectDrift);E.Jc("static"==w);(k=E.S())&&!isNaN(e.g.availabilityWindowOverride)&&(f=e.g.availabilityWindowOverride);null==f&&(f=Infinity);E.xe(f);P=t.getAttribute("profiles")||"";A={Qb:"static"!=w,presentationTimeline:E,ua:null,aa:null,oa:null,M:null,bandwidth:0,sg:!1,vc:p,profiles:P.split(",")};I=ig(e,A,c,t);j=I.duration;R=I.periods;"static"!=w&&I.jg||E.Ra(j||Infinity);e.m&&!e.s&&(N=e.h.isAutoLowLatencyMode())&&(e.h.enableLowLatencyMode(),e.s=e.h.isLowLatencyMode());e.s?E.Fg(e.m):e.m&&Q("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");E.mf(v||1);return S(L,e.j.eg(R,A.Qb),2);case 2:e.s&&(h=0);e.s&&e.m&&(e.G=e.m);if(e.i){e.i.variants=e.j.j;M=e.j.We();0<M.length&&(e.i.textStreams=M);e.i.imageStreams=e.j.h;e.h.filter(e.i);L.D(3);break}var H=E,F=e.j.j,B=e.j.We(),z=e.j.h,V=h||0,W=e.g.dash.sequenceMode;var G=Zi(t,"ServiceDescription");if(G){var K=Zi(G,"Latency");G=Zi(G,"PlaybackRate");K&&K.getAttribute("max")||G?(K=K&&K.getAttribute("max")?parseInt(K.getAttribute("max"),10)/1e3:null,G=G?parseFloat(G.getAttribute("max")):null,K={maxLatency:K,maxPlaybackRate:G}):K=null}else K=null;e.i={presentationTimeline:H,variants:F,textStreams:B,imageStreams:z,offlineSessionIds:[],minBufferTime:V,sequenceMode:W,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:K};if(!E.Qg()){L.D(4);break}q=to(t,"UTCTiming");return S(L,fg(e,c,q),5);case 5:U=L.h;if(!e.h)return L.return();E.Gg(U);case 4:E.be();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),_(L)}}))}function ig(e,t,r,n){var i=lo(n,"mediaPresentationDuration",uo),o=[],a=0;n=to(n,"Period");for(var s=0;s<n.length;s++){var l=n[s],c=n[s+1],u=lo(l,"start",uo,a),p=l.id,d=lo(l,"duration",uo),h=null;if(c){var m=lo(c,"start",uo);null!=m&&(h=m-u)}else null!=i&&(h=i-u);null==h&&(h=d);if(!(null!==e.F&&null!==p&&null!==u&&u<e.F)||e.K.includes(p)||s+1==n.length){null!==u&&(null===e.F||u>e.F)&&(e.F=u);a=og(e,t,r,{start:u,duration:h,node:l,Ze:null==h||!c});o.push(a);t.ua.id&&h&&(e.L[t.ua.id]=h);if(null==h){a=null;break}a=u+h}}e.K=o.map((function(e){return e.id}));return null!=i?{periods:o,duration:i,jg:!1}:{periods:o,duration:a,jg:!0}}function og(e,t,r,n){t.ua=pg(n.node,null,r);t.aa=n;t.ua.vc=t.vc;t.ua.id||(t.ua.id="__shaka_period_"+n.start);var i=to(n.node,"EventStream");r=t.presentationTimeline.Db();i=u(i);for(var o=i.next();!o.done;o=i.next())gg(e,n.start,n.duration,o.value,r);r=to(n.node,"AdaptationSet").map((function(r){return sg(e,t,r)})).filter(ke);if(t.Qb){n=[];i=u(r);for(o=i.next();!o.done;o=i.next()){o=u(o.value.pi);for(var a=o.next();!a.done;a=o.next())n.push(a.value)}if(n.length!=new Set(n).size)throw new De(2,4,4018)}n=r.filter((function(e){return!e.Kf}));r=r.filter((function(e){return e.Kf}));r=u(r);for(i=r.next();!i.done;i=r.next()){i=i.value;o=i.Kf.split(" ");a=u(n);for(var s=a.next();!s.done;s=a.next()){var l=s.value;if(o.includes(l.id)){s={};l=u(l.streams);for(var c=l.next();!c.done;s={Id:s.Id},c=l.next())s.Id=c.value,s.Id.trickModeVideo=i.streams.find(function(e){return function(t){return Zt(e.Id.codecs)==Zt(t.codecs)}}(s))}}}i=e.g.disableAudio?[]:ag(n,"audio");a=e.g.disableVideo?[]:ag(n,"video");o=e.g.disableText?[]:ag(n,Re);r=e.g.disableThumbnails?[]:ag(n,"image");if(!a.length&&!i.length)throw new De(2,4,4004);n=[];i=u(i);for(s=i.next();!s.done;s=i.next())n.push.apply(n,p(s.value.streams));i=[];a=u(a);for(s=a.next();!s.done;s=a.next())i.push.apply(i,p(s.value.streams));a=[];o=u(o);for(s=o.next();!s.done;s=o.next())a.push.apply(a,p(s.value.streams));o=[];r=u(r);for(s=r.next();!s.done;s=r.next())o.push.apply(o,p(s.value.streams));return{id:t.ua.id,audioStreams:n,videoStreams:i,textStreams:a,imageStreams:o}}function ag(e,t){return e.filter((function(e){return e.contentType==t}))}function sg(e,t,r){function n(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.oa=pg(r,t.ua,null);var i=!1,o=to(r,"Role"),a=o.map((function(e){return e.getAttribute("value")})).filter(ke),s=void 0,l=t.oa.contentType==Re;l&&(s="subtitle");o=u(o);for(var c=o.next();!c.done;c=o.next()){c=c.value;var d=c.getAttribute("schemeIdUri");if(null==d||"urn:mpeg:dash:role:2011"==d)switch(c=c.getAttribute("value"),c){case"main":i=!0;break;case"caption":case"subtitle":s=c}}var h;d=to(r,"EssentialProperty");o=null;c=!1;d=u(d);for(var m=d.next();!m.done;m=d.next()){m=m.value;var f=m.getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==f?o=m.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==f?h=n(parseInt(m.getAttribute("value"),10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"!=f&&"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=f&&(c=!0)}d=to(r,"SupplementalProperty");d=u(d);for(m=d.next();!m.done;m=d.next())m=m.value,"urn:mpeg:mpegB:cicp:TransferCharacteristics"==m.getAttribute("schemeIdUri")&&(h=n(parseInt(m.getAttribute("value"),10)));d=to(r,"Accessibility");var g=new Map,y;d=u(d);for(m=d.next();!m.done;m=d.next())if(f=m.value,m=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==m)if(m=1,null!=f){f=f.split(";");for(var b=u(f),v=b.next();!v.done;v=b.next()){var w=v.value,E=v=void 0;w.includes("=")?(w=w.split("="),v=w[0].startsWith("CC")?w[0]:"CC"+w[0],E=w[1]||"und"):(v="CC"+m,2==f.length?m+=2:m++,E=w);g.set(v,Fe(E))}}else g.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==m)if(m=1,null!=f)for(f=u(f.split(";")),v=f.next();!v.done;v=f.next())v=v.value,w=b=void 0,v.includes("=")?(v=v.split("="),b="svc"+v[0],w=v[1].split(",")[0].split(":").pop()):(b="svc"+m,m++,w=v),g.set(b,Fe(w));else g.set("svc1","und");else"urn:mpeg:dash:role:2011"==m?null!=f&&(a.push(f),"captions"==f&&(s="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==m&&("1"==f?y="visually impaired":"2"==f&&(y="hard of hearing"));if(c)return null;c=to(r,"ContentProtection");var S=Tm(c,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),_=Fe(t.oa.language||"und"),x=r.getAttribute("label");(c=to(r,"Label"))&&c.length&&(c=c[0],c.textContent&&(x=c.textContent));c=to(r,"Representation");r=c.map((function(r){if(r=lg(e,t,S,s,_,x,i,a,g,r,y))r.hdr=r.hdr||h;return r})).filter((function(e){return!!e}));if(0==r.length){o="image"==t.oa.contentType;if(e.g.dash.ignoreEmptyAdaptationSet||l||o)return null;throw new De(2,4,4003)}if(!t.oa.contentType||"application"==t.oa.contentType)for(t.oa.contentType=bg(r[0].mimeType,r[0].codecs),l=u(r),d=l.next();!d.done;d=l.next())d.value.type=t.oa.contentType;l=u(r);for(d=l.next();!d.done;d=l.next())for(d=d.value,m=u(S.drmInfos),f=m.next();!f.done;f=m.next())f=f.value,f.keyIds=f.keyIds&&d.keyIds?new Set([].concat(p(f.keyIds),p(d.keyIds))):f.keyIds||d.keyIds;l=c.map((function(e){return e.getAttribute("id")})).filter(ke);return{id:t.oa.id||"__fake__"+e.J++,contentType:t.oa.contentType,language:_,fk:i,streams:r,drmInfos:S.drmInfos,Kf:o,pi:l}}function lg(e,t,r,n,i,o,a,s,l,c,u){t.M=pg(c,t.oa,null);e.m=Math.min(e.m,t.M.vc);if(!hg(t.M))return null;var p=t.aa.start;t.bandwidth=lo(c,"bandwidth",mo)||0;var d=t.M.contentType,h=d==Re||"application"==d;d="image"==d;try{var m=function(t,r,n,i){return yg(e,t,r,n,i)};if(t.M.yd)var f=ef(t,m);else if(t.M.Vb)f=lf(t,e.l);else if(t.M.zd)f=hf(t,m,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var g=t.M.Ta,y=t.aa.duration||0;f={yc:function(){return Promise.resolve(ul(p,y,g))}}}}catch(e){if((h||d)&&4002==e.code)return null;throw e}m=to(c,"ContentProtection");m=Om(m,r,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI);m=new Set(m?[m]:[]);var b=!1;to(c,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(b=!0);var v=!1;h&&(v=s.includes("forced_subtitle")||s.includes("forced-subtitle"));var w;if(d&&((c=to(c,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(w=c.getAttribute("value")),!w))return null;var E;c=t.M.codecs;t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(c.includes("hvc1.2.4.L153.B0")||c.includes("hev1.2.4.L153.B0"))&&(E="PQ");c=t.M.id?t.ua.id+","+t.M.id:"";var x=c&&e.l[c]?e.l[c]:{id:e.J++,originalId:t.M.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){x.segmentIndex&&(x.segmentIndex.release(),x.segmentIndex=null)},segmentIndex:null,mimeType:t.M.mimeType,codecs:t.M.codecs,frameRate:t.M.frameRate,pixelAspectRatio:t.M.pixelAspectRatio,bandwidth:t.bandwidth,width:t.M.width,height:t.M.height,kind:n,encrypted:0<r.drmInfos.length,drmInfos:r.drmInfos,keyIds:m,language:i,originalLanguage:t.oa.language,label:o,type:t.oa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:t.M.emsgSchemeIdUris,roles:s,forced:v,channelsCount:t.M.je,audioSamplingRate:t.M.audioSamplingRate,spatialAudio:b,closedCaptions:l,hdr:E,tilesLayout:w,matchedStreams:[],accessibilityPurpose:u,external:!1};x.createSegmentIndex=function(){var e;return L((function(t){if(1==t.g){if(x.segmentIndex)return t.D(0);e=x;return S(t,f.yc(),3)}e.segmentIndex=t.h;_(t)}))};c&&t.Qb&&!e.l[c]&&(e.l[c]=x);return x}function cg(e){var t,r;L((function(n){switch(n.g){case 1:return t=0,x(n,2),S(n,tg(e),4);case 4:t=n.h;C(n,3);break;case 2:if(r=T(n),e.h){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(r),n.return();r.severity=1;e.h.onError(r)}case 3:if(!e.h)return n.return();ug(e,t);_(n)}}))}function ug(e,t){0>e.G||e.H.R(Math.max(e.G-t,et(e.I)))}function pg(e,t,r){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,je:null,audioSamplingRate:null,vc:0};r=r||t.Ta;var n=to(e,"BaseURL"),i=n.map(ao),o=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,l=lo(e,"frameRate",bo)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,p=to(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice();p=u(p);for(var h=p.next();!h.done;h=p.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);p=to(e,"AudioChannelConfiguration");p=dg(p)||t.je;h=lo(e,"audioSamplingRate",fo)||t.audioSamplingRate;o||(o=bg(a,s));var m=Zi(e,"SegmentBase"),f=Zi(e,"SegmentTemplate"),g=m?lo(m,"availabilityTimeOffset",go)||0:0,y=f?lo(f,"availabilityTimeOffset",go)||0:0;n=n&&n.length?lo(n[0],"availabilityTimeOffset",go)||0:0;n=t.vc+n+g+y;return{Ta:Pe(r,i),yd:m||t.yd,Vb:Zi(e,"SegmentList")||t.Vb,zd:f||t.zd,width:lo(e,"width",fo)||t.width,height:lo(e,"height",fo)||t.height,contentType:o,mimeType:a,codecs:s,frameRate:l,pixelAspectRatio:c,emsgSchemeIdUris:d,id:e.getAttribute("id"),language:e.getAttribute("lang"),je:p,audioSamplingRate:h,vc:n}}function dg(e){e=u(e);for(var t=e.next();!t.done;t=e.next()){var r=t.value;if(t=r.getAttribute("schemeIdUri"))if(r=r.getAttribute("value"))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return r.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":t=parseInt(r,10);if(!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":t=parseInt(r,16);if(!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(r=parseInt(r,10))&&0<r&&r<t.length)return t[r]}}return null}function hg(e){var t=e.yd?1:0;t+=e.Vb?1:0;t+=e.zd?1:0;if(0==t)return e.contentType==Re||"application"==e.contentType?!0:!1;1!=t&&(e.yd&&(e.Vb=null),e.zd=null);return!0}function mg(e,t,r,n){var i,o,a,s,l,c;return L((function(u){if(1==u.g)return i=Pe(t,[r]),o=ii(i,e.g.retryParameters),o.method=n,a=e.h.networkingEngine.request(4,o),ti(e.C,a),S(u,a.promise,2);s=u.h;if("HEAD"==n){if(!s.headers||!s.headers.date)return u.return(0);l=s.headers.date}else l=Di(s.data);c=Date.parse(l);return isNaN(c)?u.return(0):u.return(c-Date.now())}))}function fg(e,t,r){var n,i,o,a,s,l,c,p;return L((function(d){switch(d.g){case 1:n=r.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),i=e.g.dash.clockSyncUri,!n.length&&i&&n.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=u(n),a=o.next();case 2:if(a.done){d.D(4);break}s=a.value;x(d,5);l=s.scheme;c=s.value;switch(l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.D(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.D(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return p=Date.parse(c),d.return(isNaN(p)?0:p-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Q("NTP UTCTiming scheme is not supported");break;default:Q("Unrecognized scheme in UTCTiming element",l)}d.D(9);break;case 7:return S(d,mg(e,t,c,"HEAD"),10);case 10:return d.return(d.h);case 8:return S(d,mg(e,t,c,"GET"),11);case 11:return d.return(d.h);case 9:C(d,3);break;case 5:T(d);case 3:a=o.next();d.D(2);break;case 4:return Q("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}}))}function gg(e,t,r,n,i){var o=n.getAttribute("schemeIdUri")||"",a=n.getAttribute("value")||"",s=lo(n,"timescale",fo)||1;n=u(to(n,"Event"));for(var l=n.next();!l.done;l=n.next()){l=l.value;var c=lo(l,"presentationTime",fo)||0,p=lo(l,"duration",fo)||0;c=c/s+t;p=c+p/s;null!=r&&(c=Math.min(c,t+r),p=Math.min(p,t+r));p<i||(l={schemeIdUri:o,value:a,startTime:c,endTime:p,id:l.getAttribute("id")||"",eventElement:l},e.h.onTimelineRegionAdded(l))}}function yg(e,t,r,n,i){var o,a,s,l,c,u;return L((function(p){if(1==p.g)return o=ui,a=i?0:1,s=Rl(t,r,n,e.g.retryParameters),l=e.h.networkingEngine,c=l.request(o,s,{type:a}),ti(e.C,c),S(p,c.promise,2);u=p.h;return p.return(u.data)}))}function bg(e,t){t=Yt(e,t);return ir(t)?Re:e.split("/")[0]}V("shaka.dash.DashParser",eg);ma.mpd=function(){return new eg};ha["application/dash+xml"]=function(){return new eg};ha["video/vnd.mpeg.dash.mpd"]=function(){return new eg};function vg(){}V("shaka.dependencies",vg);vg.has=function(e){return Eg.has(e)};vg.add=function(e,t){if(!wg[e])throw Error(e+" is not supported");Eg.set(e,(function(){return t}))};var wg={muxjs:"muxjs",ISOBoxer:"ISOBoxer"};vg.Allowed=wg;var Eg=new Map([["muxjs",function(){return e.muxjs}],["ISOBoxer",function(){return e.ISOBoxer}]]);function Sg(e,t){return e.filter((function(e){return e.name==t}))}function _g(e,t){return e.filter((function(e){return Pg(e,"TYPE")==t}))}function xg(e,t){e=Sg(e,t);return e.length?e[0]:null}function Dg(e,t,r){r=void 0===r?0:r;return(e=xg(e,t))?Number(e.value):r}function Cg(e,t){return Pe([e],[t])[0]}function Tg(e,t,r,n){this.h=e;this.type=t;this.g=r;this.segments=n||null}function Og(e,t,r,n){this.id=e;this.name=t;this.g=r;this.value=void 0===n?null:n}Og.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,r=this.g?this.g.map(e):[];this.value&&r.unshift(this.value);0<r.length&&(t+=":"+r.join(","));return t};Og.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};function kg(e,t,r){return(e=e.getAttribute(t))?e.value:r||null}function Pg(e,t){e=e.getAttribute(t);if(!e)throw new De(2,4,4023,t);return e.value}function Ag(e,t,r,n){n=void 0===n?[]:n;this.g=r;this.l=null;this.j=e;this.m=t;this.h=n}s.Object.defineProperties(Ag.prototype,{i:{configurable:!0,enumerable:!0,get:function(){!this.l&&this.j&&this.m&&(this.l=Cg(this.j,this.m),this.m=this.j=null);return this.l||""}}});function Ig(e,t){this.name=e;this.value=t}function jg(e){this.h=e||"";this.g=0}function Rg(e){Ng(e,/[ \t]+/gm)}function Ng(e,t){t.lastIndex=e.g;t=t.exec(e.h);t=null==t?null:{position:t.index,length:t[0].length,results:t};if(e.g==e.h.length||null==t||t.position!=e.g)return null;e.g+=t.length;return t.results}function Lg(e){return e.g==e.h.length?null:(e=Ng(e,/[^ \t\n]*/gm))?e[0]:null}function Mg(){this.g=0}function qg(e,t,r){t=Di(t);t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new De(2,4,4015);t=0;for(var i=!0,o=u(n),a=o.next();!a.done;a=o.next())if(a=a.value,/^#(?!EXT)/m.test(a)||i)i=!1;else if(a=Ug(e,a),--e.g,Hg.includes(a.name)){t=1;break}else"EXT-X-STREAM-INF"==a.name&&(i=!0);o=[];i=!0;for(a=0;a<n.length;a++){var s=n[a],l=n[a+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{s=Ug(e,s);if(Fg.includes(s.name)){if(1!=t)throw new De(2,4,4017);var c=n.splice(a,n.length-a);n=r;i=[];a=[];l=[];s=null;c=u(c);for(var p=c.next();!p.done;p=c.next())p=p.value,/^(#EXT)/.test(p)?(p=Ug(e,p),Hg.includes(p.name)?o.push(p):"EXT-X-MAP"==p.name?s=p:"EXT-X-PART"==p.name?l.push(p):"EXT-X-PRELOAD-HINT"==p.name?"PART"==kg(p,"TYPE")?l.push(p):"MAP"==kg(p,"TYPE")&&(p.name="EXT-X-MAP",s=p):a.push(p)):/^#(?!EXT)/m.test(p)||(p=p.trim(),s&&a.push(s),i.push(new Ag(n,p,a,l)),a=[],l=[]);l.length&&(s&&a.push(s),i.push(new Ag("","",a,l)));return new Tg(r,t,o,i)}o.push(s);"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Ig("URI",l)),i=!0)}}return new Tg(r,t,o)}function Ug(e,t){e=e.g++;var r=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!r)throw new De(2,4,4016,t);t=r[1];var n=r[2];r=[];var i;if(n){n=new jg(n);var o;(o=Ng(n,/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Ng(n,a);)r.push(new Ig(o[1],o[2]||o[3])),Rg(n)}return new Og(e,t,r,i)}var Hg="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),Fg="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Bg(){}function zg(e){try{var t=Vg(e);return $n({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Gn(e)}}function Vg(t){var r=t.split(":");if(2>r.length||"data"!=r[0])throw new De(2,1,1004,t);r=r.slice(1).join(":").split(",");if(2>r.length)throw new De(2,1,1004,t);var n=r[0];t=e.decodeURIComponent(r.slice(1).join(","));r=n.split(";");n=r[0];var i=!1;1<r.length&&"base64"==r[r.length-1]&&(i=!0,r.pop());var o;i?o=Ki(t):o=Oi(t);return{data:o,contentType:n}}V("shaka.net.DataUriPlugin",Bg);Bg.parse=zg;ni("data",zg);function Wg(){var e=this;this.g=this.i=null;this.xa=1;this.B=new Map;this.F=new Map;this.I=new Map;this.I.set("video",new Map);this.I.set("audio",new Map);this.I.set(Re,new Map);this.I.set("image",new Map);this.ea=new Set;this.h=new Map;this.j=null;this.P="";this.Y=new Mg;this.G=-1;this.L=Infinity;this.Ea=!1;this.m=new dr((function(){Ny(e)}));this.$=By;this.H=null;this.ma=0;this.l=Infinity;this.X=this.V=this.J=0;this.K=new ei;this.O=new Map;this.C=new Map;this.Z=new Map;this.ya=this.s=!1}n=Wg.prototype;n.configure=function(e){this.g=e};n.start=function(e,t){var r=this,n;return L((function(i){return 1==i.g?(r.i=t,r.s=t.isLowLatencyMode(),S(i,Ry(r,e),2)):3!=i.g?(n=i.h,r.P=n.uri,S(i,Qg(r,n.data,e),3)):i.return(r.H)}))};n.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];this.K&&(e.push(this.K.destroy()),this.K=null);this.g=this.i=null;this.ea.clear();this.H=null;this.h.clear();this.F.clear();this.C.clear();this.B.clear();return Promise.all(e)};n.update=function(){var e=this,t,r,n,i,o,a,s,l,c;return L((function(d){if(1==d.g){if(!Ly(e))return d.return();t=[];r=Array.from(e.h.values());e.l=Infinity;n=r.filter((function(e){return e.stream.segmentIndex}));i=u(n);for(o=i.next();!o.done;o=i.next())a=o.value,t.push(Kg(e,a));return S(d,Promise.all(t),2)}my(e,n.map((function(e){return e.stream})));s=n.some((function(e){return 0==e.ld}));n.length&&!s&&(l=Wy,My(e,l.Ug),c=n.map((function(e){return e.Gb})),e.j.Ra(Math.min.apply(Math,p(c))),e.i.updateDuration());s&&ey(e);_(d)}))};function Gg(e,t){return Ly(e)?e.I.get(t.type):t.ee}function Kg(e,t){var r,n,i,o,a,s,l,c,u,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P;return L((function(A){if(1==A.g)return r=t.Kd,n=new pe(r),i=new _e,t.Nd&&(0<=t.Xa&&i.add("_HLS_msn",String(t.Xa)),0<=t.Ya&&i.add("_HLS_part",String(t.Ya))),t.Od&&i.add("_HLS_skip","YES"),xe(i),i.dd&&me(n,i),S(A,Ry(e,n.toString(),!0),2);o=A.h;if(!t.stream.segmentIndex)return A.return();a=qg(e.Y,o.data,o.uri);if(1!=a.type)throw new De(2,4,4017);s=Sg(a.g,"EXT-X-DEFINE");l=ty(e,s);c=t.stream;u=Gg(e,t);d=wy(a,c.mimeType);h=d.keyIds;m=d.drmInfos;f=function(e,t){return e.size===t.size&&[].concat(p(e)).every((function(e){return t.has(e)}))};f(c.keyIds,h)||(c.keyIds=h,c.drmInfos=m,e.i.newDrmInfo(c));g=Oy(e,a,c.type,c.mimeType,u,l);y=g.segments;b=g.bandwidth;c.bandwidth=b;c.segmentIndex.rd(y,e.j.Db());y.length&&(v=Dg(a.g,"EXT-X-MEDIA-SEQUENCE",0),E=(w=xg(a.g,"EXT-X-SKIP"))?Number(kg(w,"SKIPPED-SEGMENTS")):0,x=by(v,y),D=x.Xa,C=x.Ya,t.Xa=D+E,t.Ya=C,T=u.get(v),c.segmentIndex.ob(T));O=y[0];t.kc=O.startTime;k=y[y.length-1];t.Gb=k.endTime;if(P=xg(a.g,"EXT-X-ENDLIST"))t.ld=!0;Sy(e,a);_(A)}))}n.onExpirationUpdated=function(){};function $g(e,t){for(var r=-1==e.G,n=u(t),i=n.next();!i.done;i=n.next()){i=i.value;var o=i.stream.segmentIndex,a=Gg(e,i);if(o=o.g[0]||null){a=u(a);for(var s=a.next();!s.done;s=a.next()){s=u(s.value);var l=s.next().value;if(s.next().value==o.startTime){r&&(e.G=Math.max(e.G,l));i.Se=l;break}}}}if(!(0>e.G))for(t=u(t),i=t.next();!i.done;i=t.next())if(r=i.value,n=r.stream.segmentIndex)if(n.g.splice(0,e.G-r.Se),n=n.g[0]||null)n=-n.startTime,r.stream.segmentIndex.offset(n),Yg(e,r,n)}function Xg(e,t){if(Infinity==e.L){t=u(t);for(var r=t.next();!r.done;r=t.next()){var n=r.value.stream.segmentIndex.g[0]||null;null!=n&&null!=n.g&&(e.L=Math.min(e.L,n.g))}}t=e.L;if(Infinity!=t)for(n=u(e.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=r.stream.segmentIndex;if(null!=i){var o=i.g[0]||null;if(null==o.g)Y("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.Bd,"Expect AV sync issues!");else for(Yg(e,r,o.g-t-o.startTime),r=u(i),i=r.next();!i.done;i=r.next())i.value.Hf(t)}}}function Yg(e,t,r){t.kc+=r;t.Gb+=r;e=Gg(e,t);t=u(e);for(var n=t.next();!n.done;n=t.next()){var i=u(n.value);n=i.next().value;i=i.next().value;e.set(n,i+r)}}function Qg(e,t,r){var n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,x,D,C,T,O,k,P,A,I,j,R,N,M,q;return L((function(L){switch(L.g){case 1:n=qg(e.Y,t,e.P);i=Sg(n.g,"EXT-X-DEFINE");for(var U=u(i),H=U.next();!H.done;H=U.next()){var F=H.value;H=kg(F,"NAME");F=kg(F,"VALUE");H&&F&&(e.B.has(H)||e.B.set(H,F))}o=[];a=[];s=[];if(1==n.type)return S(L,Jg(e,n),5);l=Sg(n.g,"EXT-X-MEDIA");c=Sg(n.g,"EXT-X-STREAM-INF");p=Sg(n.g,"EXT-X-IMAGE-STREAM-INF");d=Sg(n.g,"EXT-X-SESSION-KEY");U=u(c);for(H=U.next();!H.done;H=U.next()){var B=H.value;F=kg(B,"AUDIO");H=kg(B,"VIDEO");var z=kg(B,"SUBTITLES");B=sy(e,B);if(z){var V=je(Re,B);e.C.set(z,V);bt(B,V)}F&&(z=je("audio",B),z||(z=e.g.hls.defaultAudioCodec),e.C.set(F,z));H&&(F=je("video",B),F||(F=e.g.hls.defaultVideoCodec),e.C.set(H,F))}h=Sg(n.g,"EXT-X-SESSION-DATA");m=u(h);for(f=m.next();!f.done;f=m.next())if(g=f.value,y=kg(g,"DATA-ID"),b=kg(g,"URI"),v=kg(g,"LANGUAGE"),w=kg(g,"VALUE"),E=(new Map).set("id",y),b&&E.set("uri",Cg(e.P,b)),v&&E.set("language",v),w&&E.set("value",w),x=new G("sessiondata",E),e.i)e.i.onEvent(x);iy(e,l);U=_g(l,"CLOSED-CAPTIONS");U=u(U);for(H=U.next();!H.done;H=U.next())F=H.value,z=kg(F,"LANGUAGE"),H=Fe(z||"und"),z||(z=kg(F,"NAME"))&&(H=z),z=Pg(F,"GROUP-ID"),F=Pg(F,"INSTREAM-ID").replace("SERVICE","svc"),e.O.get(z)||e.O.set(z,new Map),e.O.get(z).set(F,H);o=oy(e,c,d);a=ry(e,l);return S(L,ny(e,p),4);case 4:s=L.h;L.D(3);break;case 5:return D=L.h,C=D.type,T=D.mimeType,O=D.codecs,k=D.language,P=D.height,A=D.width,I=D.channelCount,j=D.sampleRate,R=new Map,S(L,yy(e,n,r,r,O,C,k,!0,"Media Playlist",I,R,null,!1,j,!1,T),6);case 6:N=L.h,e.h.set(r,N),"video"==C&&jy(N.stream,A,P,null,null),o.push({id:0,language:Fe(k||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==C?N.stream:null,video:"video"==C?N.stream:null,bandwidth:N.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new De(2,7,7001);e.j=new Hs(null,0);e.j.Jc(!0);1==n.type&&(Ly(e)&&(_y(e,n),M=e.l,e.m.R(M)),q=Array.from(e.h.values()),fy(e,q),ey(e));e.H={presentationTimeline:e.j,variants:o,textStreams:a,imageStreams:s,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null};e.i.makeTextStreamsForClosedCaptions(e.H);_(L)}}))}function Jg(e,t){var r,n,i,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){if(1==w.g){r=e.g.hls.mediaPlaylistFullMimeType;n=r.split(";")[0];i=n.split("/")[0];o=er(r);a={type:i,mimeType:n,codecs:o,language:null,height:null,width:null,channelCount:null,sampleRate:null};if(!t.segments.length)return w.return(a);s=t.segments[0];l=new pe(s.i);c=l.La.split(".").pop();if(u=Uy[c])return w.return({type:"audio",mimeType:u,codecs:"",language:null,height:null,width:null,channelCount:null,sampleRate:null});p=[s.i];(d=xy(e,t,s.g,new Map))&&(p=d.Oa());h=ui;m=ii(p,e.g.retryParameters);f=d?0:1;return S(w,qy(e,m,h,{type:f}),2)}g=w.h;(y=g.headers["content-type"])&&(y=y.split(";")[0].toLowerCase());if("ts"==c||"video/mp2t"==y){var E=ut(g.data),_=(new Za).parse(E);E=_.Rd();_=_.Xe();var x=[],D=!1,C=!1;switch(E.audio){case"aac":x.push("mp4a.40.2");D=!0;break;case"mp3":x.push("mp4a.40.34");D=!0;break;case"ac3":x.push("ac-3");D=!0;break;case"ec3":x.push("ec-3"),D=!0}switch(E.video){case"avc":_.Ga?x.push(_.Ga):x.push("avc1.42E01E");C=!0;break;case"hvc":x.push("hvc1.1.6.L93.90"),C=!0}if(b=x.length?{type:D&&!C?"audio":"video",mimeType:"video/mp2t",codecs:x.join(", "),language:null,height:_.height,width:_.width,channelCount:null,sampleRate:null}:null)return w.return(b)}else if("mp4"==c||"video/mp4"==y||"audio/mp4"==y)if(v=Zg(g))return w.return(v);return w.return(a)}))}function Zg(e){function t(e){return r(e.name)}function r(e){e=e.toLowerCase();switch(e){case"avc1":case"avc3":n.push(e+".42E01E");o=!0;break;case"hev1":case"hvc1":n.push(e+".1.6.L93.90");o=!0;break;case"dvh1":case"dvhe":n.push(e+".05.04");o=!0;break;case"vp09":n.push(e+".00.10.08");o=!0;break;case"av01":n.push(e+".0.01M.08");o=!0;break;case"mp4a":n.push("mp4a.40.2");i=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":n.push(e),i=!0}}var n=[],i=!1,o=!1,a=null,s=null,l=null,c=null,u=null;(new Ri).box("moov",Ni).box("trak",Ni).T("tkhd",(function(e){e=Ha(e.reader,e.version);s=String(e.height);l=String(e.width)})).box("mdia",Ni).T("mdhd",(function(e){a=qa(e.reader,e.version).language})).box("minf",Ni).box("stbl",Ni).T("stsd",Li).box("mp4a",(function(e){var r=e.reader;r.skip(6);r.skip(2);r.skip(8);var n=r.Za();r.skip(2);r.skip(2);r.skip(2);r=r.Za()+r.Za()/65536;c=n;u=r;e.reader.va()?Ni(e):t(e)})).box("esds",(function(e){e=Fa(e.reader);n.push(e.Ga);i=!0})).box("ac-3",t).box("ec-3",t).box("opus",t).box("Opus",t).box("fLaC",t).box("avc1",(function(e){e=Ba(e.reader,e.name);n.push(e.Ga);o=!0})).box("avc3",(function(e){e=Ba(e.reader,e.name);n.push(e.Ga);o=!0})).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vp09",t).box("av01",t).box("enca",Mi).box("encv",Mi).box("sinf",Ni).box("frma",(function(e){e=za(e.reader).Ga;r(e)})).parse(e.data,!0);if(!n.length)return null;e=i&&!o;return{type:e?"audio":"video",mimeType:e?"audio/mp4":"video/mp4",codecs:ly(n).join(", "),language:a,height:s,width:l,channelCount:c,sampleRate:u}}function ey(e){if(Ly(e)){if(e.$==Vy){for(var t,r=t=Infinity,n=u(e.h.values()),i=n.next();!i.done;i=n.next())i=i.value,i.stream.segmentIndex&&"text"!=i.stream.type&&(t=Math.min(t,i.Gb),r=Math.min(r,i.kc));t-=r;e.g.hls.useSafariBehaviorForLive&&(t=e.j.m);isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride);e.j.xe(t)}}else e.j.Ra(hy(e));e.j.be()}function ty(e,t){var r=new Map;t=u(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value;n=kg(i,"NAME");var o=kg(i,"VALUE");i=kg(i,"IMPORT");n&&o&&r.set(n,o);i&&(n=e.B.get(i))&&r.set(i,n)}return r}function ry(e,t){var r=_g(t,"SUBTITLES");t=r.map((function(t){if(e.g.disableText)return null;try{return cy(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));r=u(r);for(var n=r.next();!n.done;n=r.next()){var i=Pg(n.value,"GROUP-ID");if(n=e.C.get(i))if(i=e.F.get(i)){i=u(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.stream.codecs=n,o.stream.mimeType=Py(Re,n)||Ay(Re)}}return t.filter((function(e){return e}))}function ny(e,t){var r,n;return L((function(i){if(1==i.g)return r=t.map((function(t){var r,n,i;return L((function(o){if(1==o.g){if(r=e.g.disableThumbnails)return o.return(null);x(o,2);return S(o,uy(e,t),4)}if(2!=o.g)return n=o.h,o.return(n.stream);i=T(o);if(e.g.hls.ignoreImageStreamFailures)return o.return(null);throw i}))})),S(i,Promise.all(r),2);n=i.h;return i.return(n.filter((function(e){return e})))}))}function iy(e,t){t=t.filter((function(e){var t=kg(e,"URI")||"";return"SUBTITLES"!=kg(e,"TYPE")&&""!=t}));t=u(t);for(var r=t.next();!r.done;r=t.next())cy(e,r.value)}function oy(e,t,r){var n=[],i=new Set;if(0<r.length){r=u(r);for(var o=r.next();!o.done;o=r.next()){o=o.value;var a=Pg(o,"METHOD");if("NONE"!=a&&"AES-128"!=a&&(a=kg(o,"KEYFORMAT")||"identity",o=(a=Fy[a])?a(o,""):null)){if(o.keyIds){a=u(o.keyIds);for(var s=a.next();!s.done;s=a.next())i.add(s.value)}n.push(o)}}}t=t.map((function(t){var r=kg(t,"FRAME-RATE"),o=Number(kg(t,"AVERAGE-BANDWIDTH"))||Number(Pg(t,"BANDWIDTH")),a=kg(t,"RESOLUTION");a=u(a?a.split("x"):[null,null]);var s=a.next().value,l=a.next().value,c=kg(t,"VIDEO-RANGE");t=ay(e,t);a=t.audio;t=t.video;for(var p=u(t),d=p.next();!d.done;d=p.next())jy(d.value.stream,s,l,r,c);r=e.g.disableAudio;if(!a.length||r)a=[null];r=e.g.disableVideo;if(!t.length||r)t=[null];r=[];a=u(a);for(s=a.next();!s.done;s=a.next())for(s=s.value,l=u(t),c=l.next();!c.done;c=l.next()){var h=c.value;if(c=s?s.stream:null)c.drmInfos=n,c.keyIds=i;if(p=h?h.stream:null)p.drmInfos=n,p.keyIds=i;d=s?s.stream.drmInfos:null;var m=h?h.stream.drmInfos:null;h=(h?h.Bd:"")+" - "+(s?s.Bd:"");c&&p&&!Yo(d,m)||e.ea.has(h)||(c={id:e.xa++,language:c?c.language:"und",disabledUntilTime:0,primary:!!c&&c.primary||!!p&&p.primary,audio:c,video:p,bandwidth:o,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(c),e.ea.add(h))}return r})).reduce(Te,[]);return t=t.filter((function(e){return null!=e}))}function ay(e,t){var r=sy(e,t),n=kg(t,"AUDIO"),i=kg(t,"VIDEO"),o=n||i;o=o&&e.F.has(o)?e.F.get(o):[];n={audio:n?o:[],video:i?o:[]};i=!1;var a=Pg(t,"URI"),s=n.audio.find((function(e){return e&&e.Bd==a})),l=je("video",r),c=je("audio",r);c&&!l?(o="audio",i=0<n.audio.length):!o.length&&c&&l?(o="video",r=[[l,c].join()]):n.audio.length&&s?(o="audio",i=!0):o=n.video.length&&!n.audio.length?"audio":"video";i||(e=py(e,t,r,o),n[e.stream.type]=[e]);return n}function sy(e,t){var r=[];e.g.disableVideo||r.push(e.g.hls.defaultVideoCodec);e.g.disableAudio||r.push(e.g.hls.defaultAudioCodec);e=kg(t,"CODECS",r.join(",")).split(/\s*,\s*/);return ly(e)}function ly(e){var t=new Set,r=[];e=u(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=tr(n)[0];t.has(i)||(r.push(n),t.add(i))}return r}function cy(e,t){var r=Pg(t,"GROUP-ID"),n="",i=Pg(t,"TYPE").toLowerCase();"subtitles"==i&&(i=Re);var o=i;o==Re?n=kg(t,"CODECS")||"":r&&e.C.has(r)&&(n=e.C.get(r));i=ky(Pg(t,"URI"),e.B);if(e.h.has(i))return e.h.get(i);var a=kg(t,"LANGUAGE"),s=kg(t,"NAME"),l="YES"==kg(t,"DEFAULT");var c="audio"==o?(c=kg(t,"CHANNELS"))?parseInt(c.split("/")[0],10):null:null;var u="audio"==o?(u=kg(t,"CHANNELS"))?u.includes("/JOC"):!1:!1;var p=kg(t,"CHARACTERISTICS"),d="YES"==kg(t,"FORCED");"audio"==o?t=(t=kg(t,"SAMPLE-RATE"))?parseInt(t,10):null:t=null;n=dy(e,i,n,o,a,l,s,c,null,p,d,t,u);e.F.has(r)?e.F.get(r).push(n):e.F.set(r,[n]);if(e.h.has(i))return e.h.get(i);e.h.set(i,n);return n}function uy(e,t){var r,n,i,o,a,s,l,c,u,p;return L((function(d){if(1==d.g){r=ky(Pg(t,"URI"),e.B);n=kg(t,"CODECS","jpeg")||"";if(e.h.has(r))return d.return(e.h.get(r));i=kg(t,"LANGUAGE");o=kg(t,"NAME");a=kg(t,"CHARACTERISTICS");s=dy(e,r,n,"image",i,!1,o,null,null,a,!1,null,!1);return e.h.has(r)?d.return(e.h.get(r)):(l=kg(t,"RESOLUTION"))?S(d,s.stream.createSegmentIndex(),3):d.D(2)}2!=d.g&&(c=s.stream.segmentIndex.get(0),u=c.tilesLayout)&&(s.stream.width=Number(l.split("x")[0])*Number(u.split("x")[0]),s.stream.height=Number(l.split("x")[1])*Number(u.split("x")[1]));if(p=kg(t,"BANDWIDTH"))s.stream.bandwidth=Number(p);e.h.set(r,s);return d.return(s)}))}function py(e,t,r,n){var i=ky(Pg(t,"URI"),e.B);if(e.h.has(i))return e.h.get(i);t=kg(t,"CLOSED-CAPTIONS");t="video"==n&&t&&"NONE"!=t?e.O.get(t):null;r=Ie(n,r);n=dy(e,i,r,n,null,!1,null,null,t,null,!1,null,!1);if(e.h.has(i))return e.h.get(i);e.h.set(i,n);return n}function dy(e,t,r,n,i,o,a,s,l,c,p,d,h){function m(m){var f,b,v,w,E,x,D,C,T,O,k,P,A,I;return L((function(j){if(1==j.g)return S(j,Ry(e,y.Kd,!0),2);if(3!=j.g){f=j.h;if(m.aborted)return j.return();b=f.uri;v=qg(e.Y,f.data,b);w=Ly(e);return S(j,yy(e,v,t,b,r,n,i,o,a,s,l,c,p,d,h),3)}E=j.h;if(m.aborted)return j.return();x=E.stream;Ly(e)&&!w&&_y(e,v);y.Kd=b;y.kc=E.kc;y.Gb=E.Gb;y.Od=E.Od;y.Nd=E.Nd;y.ld=E.ld;y.ee=E.ee;y.Xa=E.Xa;y.Ya=E.Ya;y.gf=!0;g.segmentIndex=x.segmentIndex;g.encrypted=x.encrypted;g.drmInfos=x.drmInfos;g.keyIds=x.keyIds;g.mimeType=x.mimeType;g.bandwidth=x.bandwidth;g.drmInfos.length&&e.i.newDrmInfo(g);D=Ne;if(n==D.Na||n==D.Ob)for(C=u(e.h.values()),T=C.next();!T.done;T=C.next())O=T.value,O.gf||O.type!=n||(O.stream.mimeType=x.mimeType);n==D.na&&(k=x.segmentIndex.get(0))&&k.h&&(g.mimeType="application/mp4");gy(e)&&(e.Ea?fy(e,[y]):(e.Ea=!0,P=Array.from(e.h.values()),A=P.filter((function(e){return e.stream.segmentIndex})),fy(e,A),ey(e),I=e.l,0<I&&e.m.R(I)));_(j)}))}var f=Cg(e.P,t),g=vy(e,r,n,i,o,a,s,l,c,p,d,h),y={stream:g,type:n,Bd:t,Kd:f,kc:0,Gb:0,ee:new Map,Od:!1,Nd:!1,ld:!1,Se:-1,Xa:-1,Ya:-1,gf:!1},b=null,v=new AbortController;g.createSegmentIndex=function(){if(b)return b;v=new AbortController;return b=new Promise((function(e){e(m(v.signal))}))};g.closeSegmentIndex=function(){b&&!g.segmentIndex&&v.abort();g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null);b=null};return y}function hy(e){var t=Infinity;e=u(e.h.values());for(var r=e.next();!r.done;r=e.next())r=r.value,r.stream.segmentIndex&&"text"!=r.stream.type&&(t=Math.min(t,r.Gb));return t}function my(e,t){var r=[];t=u(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.segmentIndex&&cl(n.segmentIndex,(function(e){r.push(e)}));e.j.sd(r)}function fy(e,t){if(!Ly(e))for(var r=hy(e),n=u(t),i=n.next();!i.done;i=n.next())i.value.stream.segmentIndex.wc(0,r);my(e,t.map((function(e){return e.stream})));e.g.hls.ignoreManifestProgramDateTime?$g(e,t):Xg(e,t)}function gy(e){if(!e.H)return!1;var t=[],r=[];e=u(e.H.variants);for(var n=e.next();!n.done;n=e.next())n=n.value,n.video&&t.push(n.video),n.audio&&r.push(n.audio);return 0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<r.length&&!r.some((function(e){return e.segmentIndex}))?!1:!0}function yy(e,t,r,n,i,o,a,s,l,c,u,p,d,h,m,f){var g,y,b,v,w,E,_,x,D,C,T,O,k,P,A,I,j,R,N,M,q,U,H;return L((function(L){if(1==L.g){if(1!=t.type)throw new De(2,4,4017);g=Sg(t.g,"EXT-X-DEFINE");y=ty(e,g);var F=xg(t.g,"EXT-X-PLAYLIST-TYPE"),B=xg(t.g,"EXT-X-ENDLIST");B=F&&"VOD"==F.value||B;F=F&&"EVENT"==F.value&&!B;F=!B&&!F;B?My(e,By):F?My(e,Vy):My(e,zy);Ly(e)&&Sy(e,t);return f?L.D(2):S(L,Iy(e,o,i,t,y),3)}2!=L.g&&(f=L.h);b=wy(t,f);v=b.drmInfos;w=b.keyIds;E=b.encrypted;_=b.Yg;if(E&&!v.length&&!_)throw new De(2,4,4026);x=Ly(e)?e.I.get(o):new Map;D=Oy(e,t,o,f,x,y);C=D.segments;T=D.bandwidth;Ly(e)&&Sy(e,t);O=C[0].startTime;k=C[C.length-1];P=k.endTime;A=new ll(C);j=(I=xg(t.g,"EXT-X-SERVER-CONTROL"))?null!=I.getAttribute("CAN-SKIP-UNTIL"):!1;R=I?null!=I.getAttribute("CAN-BLOCK-RELOAD"):!1;N=Dg(t.g,"EXT-X-MEDIA-SEQUENCE",0);M=by(N,C);q=M.Xa;U=M.Ya;H=vy(e,i,o,a,s,l,c,u,p,d,h,m);H.segmentIndex=A;H.encrypted=E;H.drmInfos=v;H.keyIds=w;H.mimeType=f;H.bandwidth=T;return L.return({stream:H,type:o,Bd:r,Kd:n,kc:O,Gb:P,Od:j,Nd:R,ld:!1,Se:-1,Xa:q,Ya:U,ee:x,gf:!1})}))}function by(e,t){e=e+t.length-1;var r=-1;if(!t.length)return e++,{Xa:e,Ya:r};t=t[t.length-1];var n=t.i;if(!t.i.length)return e++,t.s&&(r=0),{Xa:e,Ya:r};r=n.length-1;n[n.length-1].m||(e++,r=0);return{Xa:e,Ya:r}}function vy(e,t,r,n,i,o,a,s,l,c,p,d){var h=Py(r,t)||Ay(r),m=[];if(l){l=u(l.split(","));for(var f=l.next();!f.done;f=l.next())m.push(f.value)}l=r==Re?"subtitle":void 0;m.length||"subtitle"!==l||m.push("subtitle");return{id:e.xa++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:r==Re?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Fe(n||"und"),originalLanguage:n,label:o,type:r,primary:i,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:m,forced:c,channelsCount:a,audioSamplingRate:p,spatialAudio:d,closedCaptions:s,hdr:void 0,tilesLayout:void 0,accessibilityPurpose:null,external:!1}}function wy(e,t){var r=[];if(e.segments){e=u(e.segments);for(var n=e.next();!n.done;n=e.next())n=Sg(n.value.g,"EXT-X-KEY"),r.push.apply(r,p(n))}n=e=!1;var i=[],o=new Set;r=u(r);for(var a=r.next();!a.done;a=r.next()){a=a.value;var s=Pg(a,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)n=!0;else if(s=kg(a,"KEYFORMAT")||"identity",a=(s=Fy[s])?s(a,t):null){if(a.keyIds){s=u(a.keyIds);for(var l=s.next();!l.done;l=s.next())o.add(l.value)}i.push(a)}}return{drmInfos:i,keyIds:o,encrypted:e,Yg:n}}function Ey(t,r,n){if(!e.crypto||!e.crypto.subtle)throw Q("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new De(2,4,4042);var i=0,o=kg(r,"IV","");if(o){var a=$i(o.substr(2));if(16!=a.byteLength)throw new De(2,4,4043)}else i=Dg(n.g,"EXT-X-MEDIA-SEQUENCE",0);r=Cg(n.h,Pg(r,"URI"));var s=ii([r],t.g.retryParameters),l={method:"AES-128",iv:a,firstMediaSequenceNumber:i,fetchKey:function(){var r,n,i;return L((function(o){if(1==o.g)return S(o,qy(t,s,6),2);if(3!=o.g){r=o.h;if(!r.data||16!=r.data.byteLength)throw new De(2,4,4044);n={name:"AES-CBC"};i=l;return S(o,e.crypto.subtle.importKey("raw",r.data,n,!0,["decrypt"]),3)}i.cryptoKey=o.h;l.fetchKey=void 0;_(o)}))}};return l}function Sy(e,t){var r=Infinity,n=t.segments;if(n.length)for(var i=n.length-1;0<=i;){var o=xg(n[i].g,"EXTINF");if(o){r=Number(o.value.split(",")[0]);break}i--}n=xg(t.g,"EXT-X-TARGETDURATION");if(!n)throw new De(2,4,4024,"EXT-X-TARGETDURATION");n=Number(n.value);if(i=xg(t.g,"EXT-X-PART-INF"))e.J=Number(Pg(i,"PART-TARGET"));t=xg(t.g,"EXT-X-SERVER-CONTROL");e.s&&e.J?(e.l=e.ya?5*e.J<=r?Math.min(e.J,e.l):Math.min(r,e.l):Math.min(e.J,e.l),e.X=t?Number(Pg(t,"PART-HOLD-BACK")):0):(e.l=Math.min(r,e.l),r=t?t.getAttribute("HOLD-BACK"):null,e.V=r?Number(r.value):0);e.ma=Math.max(n,e.ma)}function _y(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.X)t=e.X;else if(e.V)t=e.V;else{t=t.segments.length;var r=e.g.hls.liveSegmentsDelay;r>t-2&&(r=Math.max(1,t-2));t=e.ma*r}e.j.Kg(0);e.j.Hg(t);e.j.Jc(!1)}function xy(e,t,r,n){var i=xg(r,"EXT-X-MAP");if(!i)return null;var o=Pg(i,"URI");o=ky(Cg(t.h,o),n);n=[o,kg(i,"BYTERANGE","")].join("-");if(!e.Z.has(n)){var a=void 0;r=u(r);for(var s=r.next();!s.done;s=r.next())s=s.value,"EXT-X-KEY"==s.name&&"AES-128"==Pg(s,"METHOD")&&s.id<i.id&&(a=Ey(e,s,t));t=Dy(o,i,a);e.Z.set(n,t)}return e.Z.get(n)}function Dy(e,t,r){var n=0,i=null;if(t=kg(t,"BYTERANGE"))n=t.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1,r&&(t=i+1-n,t%16&&(i+=16-t%16));return new va((function(){return[e]}),n,i,null,null,null,r)}function Cy(t,r,n,i,o,a,s,l,c,p){var d=i.g,h=xg(d,"EXTINF"),m=0,f=0,g=null;i.h.length&&!t.s&&Q("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var y=null;if(!t.g.hls.ignoreManifestProgramDateTime){var b=xg(d,"EXT-X-PROGRAM-DATE-TIME");b&&b.value&&(y=co(b.value))}var v=Sa;xg(d,"EXT-X-GAP")&&(v=2);if(!h){if(0==i.h.length)throw new De(2,4,4024,"EXTINF");if(!t.s)return null}var w=[];b=!1;var E=null,S=!1,_=!1;if(t.s&&i.h.length){m=("video/mp4"==c||"audio/mp4"==c)&&e.ReadableStream;c=y;for(var x={},D=0;D<i.h.length;x={Sc:x.Sc,Gd:x.Gd},D++){var C=i.h[D],T=0==D?n:w[w.length-1],O=0==D?o:T.endTime,k=Number(kg(C,"DURATION"))||t.J;if(k){var P=O+k,A=0,I=null;"EXT-X-PRELOAD-HINT"==C.name?(A=(A=kg(C,"BYTERANGE-START"))?Number(A):0,(T=kg(C,"BYTERANGE-LENGTH"))?I=A+Number(T)-1:A&&(I=Number.MAX_SAFE_INTEGER)):(A=kg(C,"BYTERANGE"),I=u(Ty(T,A)),A=I.next().value,I=I.next().value);x.Gd=kg(C,"URI");if(x.Gd){T=Sa;"YES"==kg(C,"GAP")&&(T=2,S=!0);x.Sc=null;var j=function(e){return function(){null==e.Sc&&(e.Sc=Cg(s,e.Gd));return[e.Sc]}}(x);m&&0<=A&&null!=I&&(E=j,b=!0);O=new Ea(O,P,j,A,I,r,0,0,Infinity,[],"",null,c,T,p);"EXT-X-PRELOAD-HINT"==C.name&&(O.hf(),_=!0);"YES"!=kg(C,"INDEPENDENT")&&0<D&&O.xg();w.push(O);c&&(c+=k)}}}}if(h){h=Number(h.value.split(",")[0]);if(0==h)return null;m=o+h}else if(w.length)m=w[w.length-1].endTime;else return null;b&&(S||0!=w[0].Sa?(b=!1,E=null):w=[]);(h=xg(d,"EXT-X-BYTERANGE"))?(g=u(Ty(n,h.value)),f=g.next().value,g=g.next().value):w.length&&(f=w[0].Sa,g=w[w.length-1].za);n="";h=null;"image"==l&&(n="1x1",l=xg(d,"EXT-X-TILES"))&&(n=Pg(l,"LAYOUT"),(l=kg(l,"DURATION"))&&(h=Number(l)));var R=null;r=new Ea(o,m,(function(){if(E)return E();null==R&&(R=ky(i.i,a));return R.length?[R]:[]}),f,g,r,0,0,Infinity,w,n,h,y,v,p);b&&(t.ya=!0,r.wg(),_&&r.hf());return r}function Ty(e,t){var r=0,n=null;t&&(r=t.split("@"),t=Number(r[0]),r=r[1]?Number(r[1]):e.za+1,n=r+t-1);return[r,n]}function Oy(e,t,r,n,i,o){var a=t.segments,s=void 0,l=Dg(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),c=Dg(t.g,"EXT-X-MEDIA-SEQUENCE",0),p=xg(t.g,"EXT-X-SKIP"),d=p?Number(kg(p,"SKIPPED-SEGMENTS")):0,h=c+d,m=0;Ly(e)&&i.has(h)&&(m=i.get(h));var f=[],g=null;p=[];for(var y=0;y<a.length;y++){var b=a[y],v=0==y?m:g.endTime;h=c+d+y;xg(b.g,"EXT-X-DISCONTINUITY")&&l++;var w=u(b.g);for(var E=w.next();!E.done;E=w.next())E=E.value,"EXT-X-KEY"==E.name&&("AES-128"==Pg(E,"METHOD")?s=Ey(e,E,t):s=void 0);i.set(h,v);w=xy(e,t,b.g,o);!e.s&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.s=e.i.isLowLatencyMode());if(v=Cy(e,w,g,b,v,o,t.h,r,n,s))(g=Dg(b.g,"EXT-X-BITRATE"))?p.push({bitrate:g,duration:v.endTime-v.startTime}):p.length&&(g=p.pop(),g.duration+=v.endTime-v.startTime,p.push(g)),g=v,v.l=l,e.g.hls.ignoreManifestProgramDateTime&&null!=e.G&&h<e.G||f.push(v)}t=void 0;p.length&&(t=p.reduce((function(e,t){return e+t.duration}),0),t=Math.round(p.reduce((function(e,t){return e+t.bitrate*t.duration}),0)/t*1e3));if(p=f.some((function(e){return null!=e.g})))for(r={},n=0;n<f.length;r={Oc:r.Oc,Nc:r.Nc,Cd:r.Cd,Lb:r.Lb,Mc:r.Mc},n++)if(r.Lb=f[n],null==r.Lb.g)for(r.Nc=0,r.Oc=n,i=function(e){return function(){var t=f[e.Oc];if(t){if(null!=t.g)return t.g+e.Nc;e.Nc-=t.endTime-t.startTime;e.Oc+=1}return null}}(r),r.Mc=0,r.Cd=n,o=function(e){return function(){var t=f[e.Cd];if(t){t!=e.Lb&&(e.Mc+=t.endTime-t.startTime);if(null!=t.g)return t.g+e.Mc;--e.Cd}return null}}(r);null==r.Lb.g;)r.Lb.g=o(),null==r.Lb.g&&(r.Lb.g=i());if(p)for(r=u(f),n=r.next();!n.done;n=r.next())for(i=n.value,n=i.g,i=u(i.i),o=i.next();!o.done;o=i.next())o=o.value,o.g=n,n+=o.endTime-o.startTime;e=e.L;if(p&&Infinity!=e)for(p=u(f),n=p.next();!n.done;n=p.next())n.value.Hf(e);return{segments:f,bandwidth:t}}function ky(e,t){if(!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var r=e.match(/{\$\w*}/g);if(r){r=u(r);for(var n=r.next();!n.done;n=r.next()){n=n.value;var i=n.slice(2,n.length-1),o=t.get(i);if(o)e=e.replace(n,o);else throw new De(2,4,4039,i)}}return e}function Py(e,t){if(e==Re){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function Ay(e){return e==Re?"text/vtt":Hy[e].mp4}function Iy(e,t,r,n,i){var o,a,s,l,c,u,p,d,h,m;return L((function(f){if(1==f.g){o=ui;a=Math.trunc((n.segments.length-1)/2);s=ky(n.segments[a].i,i);l=new pe(s);c=l.La.split(".").pop();u=Hy[t];if((p=u[c])||(p=Uy[c])||(p=Py(t,r)))return f.return(p);d=ii([s],e.g.retryParameters);d.method="HEAD";return S(f,qy(e,d,o,{type:1}),2)}h=f.h;return(m=h.headers["content-type"])?f.return(m.split(";")[0]):f.return(Ay(t))}))}function jy(e,t,r,n,i){e&&(e.width=Number(t)||void 0,e.height=Number(r)||void 0,e.frameRate=Number(n)||void 0,e.hdr=i||void 0)}function Ry(e,t,r){return qy(e,ii([t],e.g.retryParameters),0,{type:r?2:3})}function Ny(e){var t,r;L((function(n){if(1==n.g){if(!e.i)return n.return();x(n,2);return S(n,e.update(),4)}if(2!=n.g)return Ly(e)&&(t=e.l,e.m.R(t)),C(n,0);r=T(n);if(!e.i)return n.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(r),n.return();r.severity=1;e.i.onError(r);e.m.R(.1);_(n)}))}function Ly(e){return e.$!=By}function My(e,t){e.$=t;e.j&&e.j.Jc(!Ly(e));Ly(e)||e.m.stop()}function qy(e,t,r,n){if(!e.K)throw new De(2,7,7001);t=e.i.networkingEngine.request(r,t,n);ti(e.K,t);return t.promise}V("shaka.hls.HlsParser",Wg);var Uy={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Hy={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Fy={"com.apple.streamingkeydelivery":function(t,r){if("video/mp2t"==r)throw new De(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new De(2,4,4041);return Ae("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Pg(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;t=Pg(e,"URI");t=Vg(t);t=ut(t.data);t=Ae("com.widevine.alpha",[{initDataType:"cenc",initData:t}]);if(e=kg(e,"KEYID"))t.keyIds=new Set([e.toLowerCase().substr(2)]);return t},"com.microsoft.playready":function(e){var t=Pg(e,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t))return null;e=Pg(e,"URI");e=Vg(e);e=ut(e.data);t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);e=Ji(e,t,new Set,0);return Ae("com.microsoft.playready",[{initDataType:"cenc",initData:e}])},identity:function(e){e=Pg(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Ae("org.w3.clearkey",null):null}},By="VOD",zy="EVENT",Vy="LIVE",Wy={Ug:By,Yi:zy,Sg:Vy};ma.m3u8=function(){return new Wg};ha["application/x-mpegurl"]=function(){return new Wg};ha["application/vnd.apple.mpegurl"]=function(){return new Wg};function Gy(e){var t=0,r=pt(e),n=r.getUint32(t,!0);if(n!=e.byteLength)return[];e:{e=t+6;for(t=[];e<r.byteLength-1;){n=r.getUint16(e,!0);e+=2;var i=r.getUint16(e,!0);e+=2;if(0!=(i&1)||i+e>r.byteLength){r=[];break e}var o=ut(r,e,i);t.push({type:n,value:o});e+=i}r=t}return r}function Ky(e){if(e=$y(e))e:{e=u(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Zi(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function $y(e){e=Ki(e.textContent);e=Gy(e).filter((function(e){return e.type===Xy}))[0];if(!e)return null;e=Ci(e.value,!0);return(e=vo(e,"WRMHEADER"))?e:null}var Xy=1,Yy=(new Map).set("com.microsoft.playready",Ky).set("com.microsoft.playready.recommendation",Ky).set("com.microsoft.playready.software",Ky).set("com.microsoft.playready.hardware",Ky);function Qy(e){if(!ob){ob=!0;var t=new Uint8Array([105,115,111,109]),r=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);yb=ib("ftyp",t,n,t,r);t=ib("dref",bb);vb=ib("dinf",t)}this.g=e}Qy.prototype.initSegment=function(){var e=new Uint8Array([]);var t=u(this.g);for(var r=t.next();!r.done;r=t.next()){var n=e;e=r.value;r=ib;var i=e.id+1;var o=e.stream.width||0,a=e.stream.height||0;"audio"==e.type&&(a=o=0);var s=e.duration*e.timescale,l=Math.floor(s/(ab+1));s=Math.floor(s%(ab+1));i=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(rb(i,4)),[0,0,0,0],p(rb(l,4)),p(rb(s,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],p(rb(o,2)),[0,0],p(rb(a,2)),[0,0]));i=ib("tkhd",i);o=ib;l=e.duration*e.timescale;a=Math.floor(l/(ab+1));l=Math.floor(l%(ab+1));s=e.stream.language;s=s.charCodeAt(0)-96<<10|s.charCodeAt(1)-96<<5|s.charCodeAt(2)-96;a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(rb(e.timescale,4)),p(rb(a,4)),p(rb(l,4)),p(rb(s,2)),[0,0]));a=ib("mdhd",a);l=e;s=new Uint8Array([]);switch(l.type){case"video":s=lb;break;case"audio":s=cb}l=ib("hdlr",s);e:{switch(e.type){case"video":e=ib("minf",ib("vmhd",mb),vb,Jy(e));break e;case"audio":e=ib("minf",ib("smhd",fb),vb,Jy(e));break e}e=new Uint8Array([])}e=o("mdia",a,l,e);r=r("trak",i,e);e=Yi(n,r)}r=this.g[0];t=ib;i=r.duration*r.timescale;n=Math.floor(i/(ab+1));i=Math.floor(i%(ab+1));n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(rb(r.timescale,4)),p(rb(n,4)),p(rb(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]));n=ib("mvhd",n);o=new Uint8Array([]);i=u(this.g);for(a=i.next();!a.done;a=i.next())a=new Uint8Array([0,0,0,0].concat(p(rb(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),a=ib("trex",a),o=Yi(o,a);i=ib("mvex",o);o=new Uint8Array([]);if(r.encrypted)for(r=u(r.stream.drmInfos),a=r.next();!a.done;a=r.next())if(a=a.value,a.initData)for(a=u(a.initData),l=a.next();!l.done;l=a.next())o=Yi(o,l.value.initData);t=t("moov",n,e,i,o);n=new Uint8Array(yb.byteLength+t.byteLength);n.set(yb);n.set(t,yb.byteLength);return n};function Jy(e){var t=ib,r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){r=e.stream.width||0;var n=e.stream.height||0;if(0<e.Da.byteLength)var i=ib("avcC",e.Da);else{i=ib;for(var o=7,a=[],s=[],l=0,c=0,u=0,d=0;d<e.ab.length;d++){var h=nb(e.ab[d]);switch(h[0]&31){case 7:a.push(h);o+=h.length+2;break;case 8:s.push(h),o+=h.length+2}}0<a.length&&(l=a[0][1],u=a[0][2],c=a[0][3]);o=new Uint8Array(o);d=0;o[d++]=1;o[d++]=l;o[d++]=u;o[d++]=c;o[d++]=255;o[d++]=224|a.length;for(l=0;l<a.length;l++)o[d++]=(a[l].length&65280)>>8,o[d++]=a[l].length&255,o.set(a[l],d),d+=a[l].length;o[d++]=s.length;for(a=0;a<s.length;a++)o[d++]=(s[a].length&65280)>>8,o[d++]=s[a].length&255,o.set(s[a],d),d+=s[a].length;i=i("avcC",o)}r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(p(rb(r,2)),p(rb(n,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]));n="avc1";s=new Uint8Array([]);e.encrypted&&(s=eb(e),n="encv");r=ib(n,r,i,s)}else e.codecs.includes("hvc1")&&(n=e.stream.width||0,i=e.stream.height||0,r=new Uint8Array([]),0<e.Da.byteLength&&(r=ib("hvcC",e.Da)),n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(p(rb(n,2)),p(rb(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",s=new Uint8Array([]),e.encrypted&&(s=eb(e),i="encv"),r=ib(i,n,r,s));break;case"audio":if(e.codecs.includes("mp3"))e=ib(".mp3",Zy(e));else if(e.codecs.includes("ac-3"))r=ib("dac3",e.ia),n="ac-3",i=new Uint8Array([]),e.encrypted&&(i=eb(e),n="enca"),e=ib(n,Zy(e),r,i);else if(e.codecs.includes("ec-3"))r=ib("dec3",e.ia),n="ec-3",i=new Uint8Array([]),e.encrypted&&(i=eb(e),n="enca"),e=ib(n,Zy(e),r,i);else{if(0<e.ia.byteLength)r=ib("esds",e.ia);else{r=ib;n=e.id+1;i=e.stream.bandwidth||0;s=e.stream.channelsCount||2;l=e.stream.audioSamplingRate||44100;c=Ie("audio",e.codecs.split(","));u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};a=u[l];if("mp4a.40.5"===c||"mp4a.40.29"===c)a=u[2*l];l=parseInt(c.split(".").pop(),10);n=new Uint8Array([0,0,0,0,3,25].concat(p(rb(n,2)),[0,4,17,64,21,0,6,0],p(rb(i,4)),p(rb(i,4)),[5,2,l<<3|a>>>1,a<<7|s<<3,6,1,2]));r=r("esds",n)}n="mp4a";i=new Uint8Array([]);e.encrypted&&(i=eb(e),n="enca");e=ib(n,Zy(e),r,i)}r=e}e=ib("stsd",gb,r);return t("stbl",e,ib("stts",ub),ib("stsc",pb),ib("stsz",hb),ib("stco",db))}function Zy(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(p(rb(e.stream.audioSamplingRate||44100,2)),[0,0]))}function eb(e){var t=ib;var r=e.codecs.substring(0,e.codecs.indexOf("."));for(var n=0,i=0;i<r.length;i+=1)n|=r.charCodeAt(i)<<8*(r.length-i-1);r=new Uint8Array([].concat(p(rb(n,4))));r=ib("frma",r);n=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]);n=ib("schm",n);i=ib;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=u(e.stream.drmInfos);for(var a=e.next();!a.done;a=e.next())if((a=a.value)&&a.keyIds&&a.keyIds.size){a=u(a.keyIds);for(var s=a.next();!s.done;s=a.next())o=nb(s.value)}e=new Uint8Array([0,0,0,0,0,0,1,8]);o=ib("tenc",e,o);return t("sinf",r,n,i("schi",o))}function tb(e){var t=new Uint8Array([]);e=u(e.g);for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=ib,i=new Uint8Array([0,0,0,0].concat(p(rb(r.data?r.data.Kb:0,4))));i=ib("mfhd",i);var o;var a=r.data?r.data.$a:[];var s=new Uint8Array(4+a.length);for(o=0;o<a.length;o++){var l=a[o].flags;s[o+4]=l.kb<<4|l.qb<<2|l.pb}a=ib("sdtp",s);var c=a.length+92;s=ib;o=new Uint8Array([0,0,0,58].concat(p(rb(r.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));o=ib("tfhd",o);l=r.data?r.data.baseMediaDecodeTime:0;var d=Math.floor(l%(ab+1));l=new Uint8Array([1,0,0,0].concat(p(rb(Math.floor(l/(ab+1)),4)),p(rb(d,4))));l=ib("tfdt",l);var h=c;c=r.data?r.data.$a:[];d=c.length;var m=12+16*d,f=new Uint8Array(m);h+=8+m;f.set(["video"===r.type?1:0,0,15,1].concat(p(rb(d,4)),p(rb(h,4))),0);for(h=0;h<d;h++){var g=c[h];m=rb(g.duration,4);var y=rb(g.size,4),b=g.flags;g=rb(g.zb,4);f.set([].concat(p(m),p(y),[b.Eb<<2|b.kb,b.qb<<6|b.pb<<4|b.Fb,b.jb&61440,b.jb&15],p(g)),12+16*h)}c=ib("trun",f);a=s("traf",o,l,c,a);n=n("moof",i,a);i=r.data?r.data.$a:[];r=new Uint8Array([]);i=u(i);for(a=i.next();!a.done;a=i.next())r=Yi(r,a.value.data);r=ib("mdat",r);t=Yi(t,n,r)}return t}function rb(e,t){var r=[];for(--t;0<=t;t--)r.push(e>>8*t&255);return r}function nb(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length/2;r+=1)t[r]=parseInt(String(e[2*r]+e[2*r+1]),16);return t}function ib(e){var t=M.apply(1,arguments),r=sb[e];r||(r=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],sb[e]=r);for(var n=8,i=t.length-1;0<=i;i--)n+=t[i].byteLength;i=new Uint8Array(n);i[0]=n>>24&255;i[1]=n>>16&255;i[2]=n>>8&255;i[3]=n&255;i.set(r,4);r=0;for(n=8;r<t.length;r++)i.set(t[r],n),n+=t[r].byteLength;return i}var ob=!1,ab=Math.pow(2,32)-1,sb={},lb=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),cb=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ub=new Uint8Array([0,0,0,0,0,0,0,0]),pb=new Uint8Array([0,0,0,0,0,0,0,0]),db=new Uint8Array([0,0,0,0,0,0,0,0]),hb=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),mb=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),fb=new Uint8Array([0,0,0,0,0,0,0,0]),gb=new Uint8Array([0,0,0,0,0,0,0,1]),yb=new Uint8Array([]),bb=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),vb=new Uint8Array([]);function wb(){var e=this;this.h=this.g=null;this.l=[];this.j=null;this.B=1;this.i=null;this.F=new Ze(5);this.s=new dr((function(){Eb(e)}));this.C=new ei;this.m=new Map}n=wb.prototype;n.configure=function(e){this.g=e};n.start=function(e,t){var r=this;return L((function(n){if(1==n.g)return r.l=[e],r.h=t,S(n,Sb(r),2);if(!r.h)throw new De(2,7,7001);return n.return(r.j)}))};function Eb(e){var t;L((function(r){switch(r.g){case 1:return x(r,2),S(r,Sb(e),4);case 4:C(r,3);break;case 2:t=T(r),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return r.return();_(r)}}))}n.stop=function(){this.g=this.h=null;this.l=[];this.j=null;null!=this.s&&(this.s.stop(),this.s=null);this.m.clear();return this.C.destroy()};n.update=function(){var e=this,t;return L((function(r){if(1==r.g)return x(r,2),S(r,Sb(e),4);if(2!=r.g)return C(r,0);t=T(r);if(!e.h||!t)return r.return();e.h.onError(t);_(r)}))};n.onExpirationUpdated=function(){};function Sb(e){var t,r,n,i,o,a,s;return L((function(l){if(1==l.g)return t=ii(e.l,e.g.retryParameters),r=e.h.networkingEngine,n=Date.now(),i=r.request(0,t,{type:5}),ti(e.C,i),S(l,i.promise,2);o=l.h;if(!e.h)return l.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var c=o.uri,d=wo(o.data,"SmoothStreamingMedia");if(!d)throw new De(2,4,4046,c);(c=e.g.mss.manifestPreprocessor)&&c(d);e.i||(e.i=new Hs(null,0));if(c=lo(d,"IsLive",yo,!1))throw new De(2,4,4047);e.i.Jc(!c);var h=lo(d,"TimeScale",fo,1e7),m=lo(d,"DVRWindowLength",fo);c&&(0===m||isNaN(m))&&(m=Infinity);var f=lo(d,"CanSeek",yo,!1);0===m&&f&&(m=Infinity);f=null;m&&0<m&&(f=m/h);c&&!isNaN(e.g.availabilityWindowOverride)&&(f=e.g.availabilityWindowOverride);null==f&&(f=Infinity);e.i.xe(f);m=lo(d,"Duration",fo,Infinity);c||e.i.Ra(m/h);c={variants:[],textStreams:[],timescale:h,duration:m/h};f=to(d,"Protection");var g;h=e.g.mss.keySystemsBySystemId;m=[];f=u(f);for(g=f.next();!g.done;g=f.next())m=m.concat(to(g.value,"ProtectionHeader"));if(m.length){f=[];for(g=0;g<m.length;g++){var y=m[g],b=y.getAttribute("SystemID").toLowerCase(),v=h[b];if(v){var w=$y(y);if(w)e:{w=u(w.getElementsByTagName("DATA"));for(var E=w.next();!E.done;E=w.next())if(E=Zi(E.value,"KID")){w=Ki(E.textContent);w=new Uint8Array([w[3],w[2],w[1],w[0],w[5],w[4],w[7],w[6]].concat(p(w.slice(8))));w=Xi(w);break e}w=null}else w=null;E=Ki(y.textContent);b=$i(b.replace(/-/g,""));b=[{initData:Ji(E,b,new Set,0),initDataType:"cenc",keyId:w}];b=Ae(v,b);w&&b.keyIds.add(w);if(v=Yy.get(v))b.licenseServerUri=v(y);f.push(b)}}h=f}else h=[];g=h;f=[];h=[];m=[];d=to(d,"StreamIndex");d=u(d);for(y=d.next();!y.done;y=d.next()){y=y.value;v=to(y,"QualityLevel");b=c.timescale;w=c.duration;E=to(y,"c");for(var x=[],D=0,C=0;C<E.length;++C){var T=E[C],O=E[C+1],k=lo(T,"t",fo),P=lo(T,"d",fo);T=lo(T,"r",ho);if(!P)break;k=null!=k?k:D;T=T||0;if(0>T)if(O){O=lo(O,"t",fo);if(null==O)break;else if(k>=O)break;T=Math.ceil((O-k)/P)-1}else{if(Infinity==w)break;else if(k/b>=w)break;T=Math.ceil((w*b-k)/P)-1}for(O=0;O<=T;++O)D=k+P,x.push({start:k/b,end:D/b,Of:k}),k=D}b=x;v=u(v);for(w=v.next();!w.done;w=v.next())(w=_b(e,y,w.value,b,g,c))&&("audio"!=w.type||e.g.disableAudio?"video"!=w.type||e.g.disableVideo?w.type!=Re||e.g.disableText||m.push(w):h.push(w):f.push(w))}d=[];f=u(0<f.length?f:[null]);for(g=f.next();!g.done;g=f.next())for(g=g.value,y=u(0<h.length?h:[null]),w=y.next();!w.done;w=y.next())v=d,b=v.push,w=w.value,E=0,g&&g.bandwidth&&0<g.bandwidth&&(E+=g.bandwidth),w&&w.bandwidth&&0<w.bandwidth&&(E+=w.bandwidth),w={id:e.B++,language:g?g.language:"und",disabledUntilTime:0,primary:!!g&&g.primary||!!w&&w.primary,audio:g,video:w,bandwidth:E,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},b.call(v,w);c.variants=d;c.textStreams=m;e.j?(e.j.variants=c.variants,e.j.textStreams=c.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:c.variants,textStreams:c.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.be());Promise.resolve();a=Date.now();s=(a-n)/1e3;e.F.sample(1,s);_(l)}))}function _b(e,t,r,n,i,o){var a=t.getAttribute("Type");if("audio"!==a&&"video"!==a&&"text"!==a)return Q("Ignoring unrecognized type:",a),null;var s=t.getAttribute("Language"),l=e.B++,c=lo(r,"Bitrate",mo),u=lo(r,"MaxWidth",mo),p=lo(r,"MaxHeight",mo),d=lo(r,"Channels",mo),h=lo(r,"SamplingRate",mo),m=o.duration;n.length&&(m=n[n.length-1].end-n[0].start);var f=e.i.getDuration();e.i.Ra(Math.min(m,f));var g={id:l,originalId:t.getAttribute("Name")||String(l),createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:c||0,width:u||void 0,height:p||void 0,kind:"",encrypted:0<i.length,drmInfos:i,keyIds:new Set,language:Fe(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:d,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1};if(i=t.getAttribute("Subtype"))(i=kb[i])&&g.roles.push(i),"main"===i&&(g.primary=!0);i=r.getAttribute("FourCC");if(null===i||""===i)i=t.getAttribute("FourCC");if(!i)if("audio"===a)i="AAC";else if("video"===a)return Q('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Ob.includes(i.toUpperCase()))return Q("Codec not supported:",i),null;r=xb(r,a,i,g);g.mssPrivateData.codecPrivateData=r;switch(a){case"audio":if(!r)return Q("Quality unsupported without CodecPrivateData",a),null;g.type="audio";g.mimeType="mss/audio/mp4";g.codecs=Db(i,r);break;case"video":if(!r)return Q("Quality unsupported without CodecPrivateData",a),null;g.type="video";g.mimeType="mss/video/mp4";g.codecs=Cb(r);break;case"text":if(g.type=Re,g.mimeType="application/mp4","TTML"===i||"DFXP"===i)g.codecs="stpp"}g.createSegmentIndex=function(){if(g.segmentIndex)return Promise.resolve();if(e.m.has(g.id))var r=e.m.get(g.id);else r=[],"video"==g.type&&(r=g.mssPrivateData.codecPrivateData.split("00000001").slice(1)),r={id:g.id,type:g.type,codecs:g.codecs,encrypted:g.encrypted,timescale:g.mssPrivateData.timescale,duration:g.mssPrivateData.duration,ab:r,ia:new Uint8Array([]),Da:new Uint8Array([]),data:null,stream:g},r=new Qy([r]).initSegment(),e.m.set(g.id,r);r=Tb(e,new va((function(){return[]}),0,null,null,void 0,r),g,t,n);g.segmentIndex=new ll(r);return Promise.resolve()};g.closeSegmentIndex=function(){g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null)};return g}function xb(e,t,r,n){if(e=e.getAttribute("CodecPrivateData"))return e;if("audio"!==t)return null;t=n.channelsCount||2;e=n.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};n=i[e];if("AACH"===r)return r=new Uint8Array(4),e=i[2*e],r[0]=40|n>>1,r[1]=n<<7|t<<3|e>>1,r[2]=e<<7|8,r[3]=0,t=new Uint16Array(2),t[0]=(r[0]<<8)+r[1],t[1]=(r[2]<<8)+r[3],t[0].toString(16)+t[1].toString(16);r=new Uint8Array(2);r[0]=16|n>>1;r[1]=n<<7|t<<3;t=new Uint16Array(1);t[0]=(r[0]<<8)+r[1];return t[0].toString(16)}function Db(e,t){var r=0;"AACH"===e&&(r=5);t?0===r&&(r=(parseInt(t.substr(0,2),16)&248)>>3):(r=2,"AACH"===e&&(r=5));return"mp4a.40."+r}function Cb(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function Tb(e,t,r,n,i){var o=n.getAttribute("Url").replace("{bitrate}",String(r.bandwidth));n=[];var a={};i=u(i);for(var s=i.next();!s.done;a={Xc:a.Xc},s=i.next())a.Xc=s.value,n.push(new Ea(a.Xc.start,a.Xc.end,function(t){return function(){return Pe(e.l,[o.replace("{start time}",String(t.Xc.Of))])}}(a),0,null,t,0,0,r.mssPrivateData.duration));return n}V("shaka.mss.MssParser",wb);var Ob="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),kb={CAPT:"main",SUBT:"alternate",DESC:"main"};ma.ism=function(){return new wb};ha["application/vnd.ms-sstr+xml"]=function(){return new wb};function Pb(e,t,r,n,i,o){if(200<=r&&299>=r&&202!=r)return{uri:i||n,originalUri:n,data:t,status:r,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=Ti(t)}catch(e){}throw new De(401==r||403==r?2:1,1,1001,n,r,i,e,o)}function Ab(){}function Ib(e,t,r,n,i){var o=new Ub;Ei(t.headers).forEach((function(e,t){o.append(t,e)}));var a=new Mb,s={ag:!1,Pg:!1};e=jb(e,r,{body:t.body||void 0,headers:o,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,n,i,t.streamDataCallback);e=new Wn(e,(function(){s.ag=!0;a.abort();return Promise.resolve()}));if(t=t.retryParameters.timeout){var l=new dr((function(){s.Pg=!0;a.abort()}));l.R(t/1e3);e.finally((function(){l.stop()}))}return e}function jb(e,t,r,n,i,o,a){var s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:return s=Lb,l=qb,d=p=0,h=Date.now(),x(w,2),S(w,s(e,r),4);case 4:c=w.h;o(Rb(c.headers));if("HEAD"==r.method){w.D(5);break}m=c.clone().body.getReader();g=(f=c.headers.get("Content-Length"))?parseInt(f,10):0;y=function(e){function t(){var r,n;return L((function(o){switch(o.g){case 1:return x(o,2),S(o,m.read(),4);case 4:r=o.h;C(o,3);break;case 2:return T(o),o.return();case 3:if(r.done){o.D(5);break}p+=r.value.byteLength;if(!a){o.D(5);break}return S(o,a(r.value),5);case 5:n=Date.now();if(100<n-h||r.done)i(n-h,p-d,g-p),d=p,h=n;r.done?e.close():(e.enqueue(r.value),t());_(o)}}))}t()};new l({start:y});return S(w,c.arrayBuffer(),6);case 6:u=w.h;case 5:C(w,3);break;case 2:b=T(w);if(n.ag)throw new De(1,1,7001,e,t);if(n.Pg)throw new De(1,1,1003,e,t);throw new De(1,1,1002,e,b,t);case 3:return v=Rb(c.headers),w.return(Pb(v,u,c.status,e,c.url,t))}}))}function Rb(e){var t={};e.forEach((function(e,r){t[r.trim()]=e}));return t}function Nb(){if(e.ReadableStream)try{new ReadableStream({})}catch(e){return!1}else return!1;if(e.Response){if(!new Response("").body)return!1}else return!1;return!(!e.fetch||!e.AbortController)}V("shaka.net.HttpFetchPlugin",Ab);Ab.isSupported=Nb;Ab.parse=Ib;var Lb=e.fetch,Mb=e.AbortController,qb=e.ReadableStream,Ub=e.Headers;Nb()&&(ni("http",Ib,2,!0),ni("https",Ib,2,!0),ni("blob",Ib,2,!0));function Hb(){}function Fb(e,t,r,n,i){var o=new zb,a=Date.now(),s=0,l=new Promise((function(l,c){o.open(t.method,e,!0);o.responseType="arraybuffer";o.timeout=t.retryParameters.timeout;o.withCredentials=t.allowCrossSiteCredentials;o.onabort=function(){c(new De(1,1,7001,e,r))};var u=!1;o.onreadystatechange=function(){if(2==o.readyState&&!u){var e=Bb(o);i(e);u=!0}};o.onload=function(){var t=Bb(o),n=o.response;try{var i=Pb(t,n,o.status,e,o.responseURL,r);l(i)}catch(e){c(e)}};o.onerror=function(t){c(new De(1,1,1002,e,t,r))};o.ontimeout=function(){c(new De(1,1,1003,e,r))};o.onprogress=function(e){var t=Date.now();if(100<t-a||e.lengthComputable&&e.loaded==e.total)n(t-a,e.loaded-s,e.total-e.loaded),s=e.loaded,a=t};for(var p in t.headers)o.setRequestHeader(p.toLowerCase(),t.headers[p]);o.send(t.body)}));return new Wn(l,(function(){o.abort();return Promise.resolve()}))}function Bb(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};t=u(t);for(var r=t.next();!r.done;r=t.next())r=r.value.split(": "),e[r[0].toLowerCase()]=r.slice(1).join(": ");return e}V("shaka.net.HttpXHRPlugin",Hb);Hb.parse=Fb;var zb=e.XMLHttpRequest;ni("http",Fb,1,!0);ni("https",Fb,1,!0);ni("blob",Fb,1,!0);function Vb(e,t,r,n){this.g=e;this.i=t;this.groupId=r;this.h=n}function Wb(e){return e.Oa().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Sa+":"+e.za}function Gb(e,t){return Rl(e.g.Oa(),e.g.Sa,e.g.za,t.streaming.retryParameters)}function Kb(){this.h=this.j=this.i=0;this.g=new Map;this.l=0}function $b(e,t){e.i+=t;var r=e.l;e.l++;e.g.set(r,t);return r}Kb.prototype.close=function(e,t){if(this.g.has(e)){var r=this.g.get(e);this.g.delete(e);this.j+=r;this.h+=t}};function Xb(e){var t=this;this.s=e;this.j=new Map;this.i=new hi((function(){return Qb(t).catch((function(){}))}));this.h=[];this.m=function(){};this.l=function(){};this.g=new Kb}Xb.prototype.destroy=function(){return this.i.destroy()};function Yb(e,t,r){e.m=t;e.l=r}function Qb(e){var t=e.h.map((function(e){return e()}));e.h=[];return Promise.all(t)}function Jb(e,t,r,n,i,o){mi(e.i);var a=(e.j.get(t)||Promise.resolve()).then((function(){var t,a,s,l,c,u,p;return L((function(d){if(1==d.g)return S(d,ev(e,r),2);t=d.h;if(e.i.g)throw new De(2,9,7001);if(i)for(l in a=ut(t),s=new Qi(a),s.data)c=Number(l),u=s.data[c],p=s.g[c],e.l(u,p);e.g.close(n,t.byteLength);var h=e.g;e.m(0==h.i?0:h.j/h.i,e.g.h);return d.return(o(t))}))}));e.j.set(t,a)}function Zb(e){return L((function(t){return 1==t.g?S(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}function ev(e,t){var r,n,i,o;return L((function(a){if(1==a.g)return r=ui,n=e.s.request(r,t),i=function(){return n.abort()},e.h.push(i),S(a,n.promise,2);o=a.h;bt(e.h,i);return a.return(o.data)}))}function tv(e,t){var r=this;this.i=e;this.h=e.objectStore(t);this.g=new Vn;e.onabort=function(e){e.preventDefault();r.g.reject()};e.onerror=function(e){e.preventDefault();r.g.reject()};e.oncomplete=function(){r.g.resolve()}}tv.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(e){}x(t,2);return S(t,e.g,4)}if(2!=t.g)return C(t,0);T(t);_(t)}))};function rv(e,t){return new Promise((function(r,n){var i=e.h.openCursor();i.onerror=n;i.onsuccess=function(){var e;return L((function(n){if(1==n.g){if(null==i.result)return r(),n.return();e=i.result;return S(n,t(e.key,e.value,e),2)}e.continue();_(n)}))}}))}tv.prototype.store=function(){return this.h};tv.prototype.promise=function(){return this.g};function nv(e){this.h=e;this.g=[]}nv.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))};function iv(e,t){return ov(e,t,"readwrite")}function ov(e,t,r){r=e.h.transaction([t],r);var n=new tv(r,t);e.g.push(n);n.promise().then((function(){bt(e.g,n)}),(function(){bt(e.g,n)}));return n}function av(e,t,r){this.h=new nv(e);this.i=t;this.g=r}n=av.prototype;n.destroy=function(){return this.h.destroy()};n.hasFixedKeySpace=function(){return!0};n.addSegments=function(){return lv(this.i)};n.removeSegments=function(e,t){return cv(this,this.i,e,t)};n.getSegments=function(e){var t=this,r;return L((function(n){if(1==n.g)return S(n,uv(t,t.i,e),2);r=n.h;return n.return(r.map((function(e){return t.fg(e)})))}))};n.addManifests=function(){return lv(this.g)};n.updateManifest=function(){return Promise.reject(new De(2,9,9016,"Cannot modify values in "+this.g))};function sv(e,t,r){e=iv(e.h,e.g);var n=e.store();n.get(t).onsuccess=function(){n.put(r,t)};return e.promise()}n.updateManifestExpiration=function(e,t){var r=iv(this.h,this.g),n=r.store();n.get(e).onsuccess=function(r){if(r=r.target.result)r.expiration=t,n.put(r,e)};return r.promise()};n.removeManifests=function(e,t){return cv(this,this.g,e,t)};n.getManifests=function(e){var t=this,r;return L((function(n){if(1==n.g)return S(n,uv(t,t.g,e),2);r=n.h;return n.return(Promise.all(r.map((function(e){return t.cd(e)}))))}))};n.getAllManifests=function(){var e=this,t,r;return L((function(n){return 1==n.g?(t=ov(e.h,e.g,"readonly"),r=new Map,S(n,rv(t,(function(t,n){var i;return L((function(o){if(1==o.g)return S(o,e.cd(n),2);i=o.h;r.set(t,i);_(o)}))})),2)):3!=n.g?S(n,t.promise(),3):n.return(r)}))};n.fg=function(e){return e};n.cd=function(e){return Promise.resolve(e)};function lv(e){return Promise.reject(new De(2,9,9011,"Cannot add new value to "+e))}n.add=function(e,t){var r=this,n,i,o,a,s,l,c;return L((function(p){if(1==p.g){n=iv(r.h,e);i=n.store();o=[];a={};s=u(t);for(l=s.next();!l.done;a={Hd:a.Hd},l=s.next())c=l.value,a.Hd=i.add(c),a.Hd.onsuccess=function(e){return function(){o.push(e.Hd.result)}}(a);return S(p,n.promise(),2)}return p.return(o)}))};function cv(e,t,r,n){e=iv(e.h,t);t=e.store();var i={};r=u(r);for(var o=r.next();!o.done;i={Fd:i.Fd},o=r.next())i.Fd=o.value,t.delete(i.Fd).onsuccess=function(e){return function(){return n(e.Fd)}}(i);return e.promise()}function uv(e,t,r){var n,i,o,a,s,l,c;return L((function(p){if(1==p.g){n=ov(e.h,t,"readonly");i=n.store();o={};a=[];s={};l=u(r);for(c=l.next();!c.done;s={Vc:s.Vc,Rc:s.Rc},c=l.next())s.Rc=c.value,s.Vc=i.get(s.Rc),s.Vc.onsuccess=function(e){return function(){void 0==e.Vc.result&&a.push(e.Rc);o[e.Rc]=e.Vc.result}}(s);return S(p,n.promise(),2)}if(a.length)throw new De(2,9,9012,"Could not find values for "+a);return p.return(r.map((function(e){return o[e]})))}))}function pv(e){this.g=new nv(e)}pv.prototype.destroy=function(){return this.g.destroy()};pv.prototype.getAll=function(){var e=this,t,r;return L((function(n){return 1==n.g?(t=ov(e.g,"session-ids","readonly"),r=[],S(n,rv(t,(function(e,t){r.push(t)})),2)):3!=n.g?S(n,t.promise(),3):n.return(r)}))};pv.prototype.add=function(e){var t=iv(this.g,"session-ids"),r=t.store();e=u(e);for(var n=e.next();!n.done;n=e.next())r.add(n.value);return t.promise()};pv.prototype.remove=function(e){var t=this,r;return L((function(n){return 1==n.g?(r=iv(t.g,"session-ids"),S(n,rv(r,(function(t,r,n){e.includes(r.sessionId)&&n.delete()})),2)):S(n,r.promise(),0)}))};function dv(){this.g=new Map}dv.prototype.destroy=function(){for(var e=[],t=u(this.g.values()),r=t.next();!r.done;r=t.next())e.push(r.value.destroy());this.g.clear();return Promise.all(e)};dv.prototype.init=function(){var e=this;wv.forEach((function(t,r){(t=t())&&e.g.set(r,t)}));for(var t=[],r=u(this.g.values()),n=r.next();!n.done;n=r.next())t.push(n.value.init());return Promise.all(t)};function hv(e){var t=null;e.g.forEach((function(e,r){e.getCells().forEach((function(e,n){e.hasFixedKeySpace()||t||(t={path:{Wa:r,Fa:n},Fa:e})}))}));if(t)return t;throw new De(2,9,9013,"Could not find a cell that supports add-operations")}function mv(e,t){e.g.forEach((function(e,r){e.getCells().forEach((function(e,n){t({Wa:r,Fa:n},e)}))}))}function fv(e,t,r){e=e.g.get(t);if(!e)throw new De(2,9,9013,"Could not find mechanism with name "+t);t=e.getCells().get(r);if(!t)throw new De(2,9,9013,"Could not find cell with name "+r);return t}function gv(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}function yv(e){var t=Array.from(e.g.keys());if(!t.length)throw new De(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function bv(e){var t,r,n;return L((function(i){return 1==i.g?(t=Array.from(e.g.values()),r=0<t.length,r||(n=wv,n.forEach((function(e){(e=e())&&t.push(e)}))),S(i,Promise.all(t.map((function(e){return e.erase()}))),2)):r?i.D(0):S(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}function vv(e,t){wv.set(e,t)}V("shaka.offline.StorageMuxer",dv);dv.unregister=function(e){wv.delete(e)};dv.register=vv;dv.prototype.destroy=dv.prototype.destroy;var wv=new Map;function Ev(){av.apply(this,arguments)}b(Ev,av);Ev.prototype.updateManifestExpiration=function(e,t){var r=this,n,i,o;return L((function(a){n=iv(r.h,r.g);i=n.store();o=new Vn;i.get(e).onsuccess=function(r){(r=r.target.result)?(r.expiration=t,i.put(r),o.resolve()):o.reject(new De(2,9,9012,"Could not find values for "+e))};return S(a,Promise.all([n.promise(),o]),0)}))};Ev.prototype.cd=function(e){var t,r,n,i,o,a;return L((function(s){if(1==s.g){t=[];for(r=0;r<e.periods.length;++r)n=r==e.periods.length-1?e.duration:e.periods[r+1].startTime,i=n-e.periods[r].startTime,o=Sv(e.periods[r],i),t.push(o);return S(s,Of(t),2)}a=s.h;return s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?Infinity:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))};function Sv(e,t){Dv(e);for(var r=u(e.streams),n=r.next();!n.done;n=r.next());return e.streams.map((function(r){return _v(r,e.startTime,t)}))}function _v(e,t,r){var n=e.initSegmentUri?xv(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+r;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:n,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var r=xv(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:r,initSegmentKey:n,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}Ev.prototype.fg=function(e){return{data:e.data}};function xv(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new De(2,9,9004,"Could not parse uri "+e)}function Dv(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));e=e.streams.filter((function(e){return"video"==e.contentType}));if(!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var r=u(t),n=r.next();!n.done;n=r.next())n.value.variantIds=[];r=u(e);for(n=r.next();!n.done;n=r.next())n.value.variantIds=[];r=0;if(e.length&&!t.length){var i=r++,o=u(e);for(n=o.next();!n.done;n=o.next())n.value.variantIds.push(i)}if(!e.length&&t.length)for(i=r++,o=u(t),n=o.next();!n.done;n=o.next())n.value.variantIds.push(i);if(e.length&&t.length)for(t=u(t),n=t.next();!n.done;n=t.next())for(n=n.value,i=u(e),o=i.next();!o.done;o=i.next()){o=o.value;var a=r++;n.variantIds.push(a);o.variantIds.push(a)}}}function Cv(){av.apply(this,arguments)}b(Cv,av);Cv.prototype.cd=function(e){var t,r,n,i,o,a;return L((function(s){if(1==s.g){t=[];for(r=0;r<e.periods.length;++r){n=r==e.periods.length-1?e.duration:e.periods[r+1].startTime;i=n-e.periods[r].startTime;for(var l=e.periods[r],c=[],p=u(l.streams),d=p.next();!d.done;d=p.next())d=d.value,0!=d.variantIds.length&&c.push(Tv(d,l.startTime,l.startTime+i));o=c;t.push(o)}return S(s,Of(t),2)}a=s.h;return s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?Infinity:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a,sequenceMode:!1})}))};function Tv(e,t,r){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(n){return{startTime:t+n.startTime,endTime:t+n.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:r,timestampOffset:t-e.presentationTimeOffset,dataKey:n.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1}}function Ov(){av.apply(this,arguments)}b(Ov,av);n=Ov.prototype;n.hasFixedKeySpace=function(){return!1};n.addSegments=function(e){return this.add(this.i,e)};n.addManifests=function(e){return this.add(this.g,e)};n.updateManifest=function(e,t){return sv(this,e,t)};n.cd=function(e){null==e.expiration&&(e.expiration=Infinity);return Promise.resolve(e)};function kv(){this.m=this.j=this.i=this.h=this.g=this.l=null}n=kv.prototype;n.init=function(){var t=this,r=new Vn,n=!1,i=new dr((function(){n=!0;r.reject(new De(2,9,9017))}));i.R(5);var o=e.indexedDB.open("shaka_offline_db",5);o.onsuccess=function(){if(!n){var e=o.result;t.l=e;var a=e.objectStoreNames;a=a.contains("manifest")&&a.contains("segment")?new Ev(e,"segment","manifest"):null;t.g=a;a=e.objectStoreNames;a=a.contains("manifest-v2")&&a.contains("segment-v2")?new Cv(e,"segment-v2","manifest-v2"):null;t.h=a;a=e.objectStoreNames;a=a.contains("manifest-v3")&&a.contains("segment-v3")?new Cv(e,"segment-v3","manifest-v3"):null;t.i=a;a=e.objectStoreNames;a=a.contains("manifest-v5")&&a.contains("segment-v5")?new Ov(e,"segment-v5","manifest-v5"):null;t.j=a;e=e.objectStoreNames.contains("session-ids")?new pv(e):null;t.m=e;i.stop();r.resolve()}};o.onupgradeneeded=function(){for(var e=o.result,t=u(["segment-v5","manifest-v5","session-ids"]),r=t.next();!r.done;r=t.next())r=r.value,e.objectStoreNames.contains(r)||e.createObjectStore(r,{autoIncrement:!0})};o.onerror=function(e){n||(r.reject(new De(2,9,9001,o.error)),i.stop(),e.preventDefault())};return r};n.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.D(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.D(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.D(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.D(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.m){t.D(10);break}return S(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),_(t)}}))};n.getCells=function(){var e=new Map;this.g&&e.set("v1",this.g);this.h&&e.set("v2",this.h);this.i&&e.set("v3",this.i);this.j&&e.set("v5",this.j);return e};n.getEmeSessionCell=function(){return this.m};n.erase=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.D(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.D(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.D(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.D(8);break}return S(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),S(t,Pv(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,S(t,e.init(),0)}}))};function Pv(){var t=new Vn,r=e.indexedDB.deleteDatabase("shaka_offline_db");r.onblocked=function(){};r.onsuccess=function(){t.resolve()};r.onerror=function(e){t.reject(new De(2,9,9001,r.error));e.preventDefault()};return t}vv("idb",(function(){return Sr("CrKey")||gr()||!e.indexedDB?null:new kv}));function Av(e,t,r,n){this.g=e;this.i=t;this.h=r;this.l=n;this.j=["offline:",e,"/",t,"/",r,"/",n].join("")}Av.prototype.Wa=function(){return this.i};Av.prototype.Fa=function(){return this.h};Av.prototype.key=function(){return this.l};Av.prototype.toString=function(){return this.j};function Iv(e){e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e);if(null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var r=e[2];if(!r)return null;var n=e[3];return n&&null!=t?new Av(t,r,n,Number(e[4])):null}function jv(e,t){this.h=e;this.g=t}function Rv(e,t){var r=new Hs(null,0);r.Ra(t.duration);var n=t.streams.filter((function(e){return"audio"==e.type})),i=t.streams.filter((function(e){return"video"==e.type}));n=Nv(e,n,i,r);i=t.streams.filter((function(e){return e.type==Re})).map((function(t){return Lv(e,t,r)}));var o=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Lv(e,t,r)})),a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=u(n.values()),l=s.next();!l.done;l=s.next())l=l.value,l.audio&&l.audio.encrypted&&(l.audio.drmInfos=a),l.video&&l.video.encrypted&&(l.video.drmInfos=a);return{presentationTimeline:r,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(n.values()),textStreams:i,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function Nv(e,t,r,n){for(var i=new Set,o=u(t),a=o.next();!a.done;a=o.next()){var s=u(a.value.variantIds);for(a=s.next();!a.done;a=s.next())i.add(a.value)}o=u(r);for(a=o.next();!a.done;a=o.next())for(s=u(a.value.variantIds),a=s.next();!a.done;a=s.next())i.add(a.value);o=new Map;i=u(i);for(a=i.next();!a.done;a=i.next())a=a.value,o.set(a,{id:a,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});t=u(t);for(i=t.next();!i.done;i=t.next())for(i=i.value,a=Lv(e,i,n),s=u(i.variantIds),i=s.next();!i.done;i=s.next())i=o.get(i.value),i.language=a.language,i.primary=i.primary||a.primary,i.audio=a;r=u(r);for(t=r.next();!t.done;t=r.next())for(i=t.value,t=Lv(e,i,n),a=u(i.variantIds),i=a.next();!i.done;i=a.next())i=o.get(i.value),i.primary=i.primary||t.primary,i.video=t;return o}function Lv(e,t,r){var n=t.segments.map((function(t){return Mv(e,t)}));r.sd(n);return{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new ll(n),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external}}function Mv(e,t){var r=new Av("segment",e.h,e.g,t.dataKey);return new Ea(t.startTime,t.endTime,(function(){return[r.toString()]}),0,null,null!=t.initSegmentKey?qv(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function qv(e,t){var r=new Av("segment",e.h,e.g,t);return new va((function(){return[r.toString()]}),0,null)}function Uv(){this.g=null}n=Uv.prototype;n.configure=function(){};n.start=function(e,t){var r=this,n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:n=Iv(e);r.g=n;if(null==n||"manifest"!=n.g)throw new De(2,1,9004,e);i=new dv;D(u);return S(u,i.init(),4);case 4:return S(u,fv(i,n.Wa(),n.Fa()),5);case 5:return o=u.h,S(u,o.getManifests([n.key()]),6);case 6:return a=u.h,s=a[0],l=new jv(n.Wa(),n.Fa()),c=Rv(l,s),t.makeTextStreamsForClosedCaptions(c),u.return(c);case 2:return O(u),S(u,i.destroy(),7);case 7:k(u,0)}}))};n.stop=function(){return Promise.resolve()};n.update=function(){};n.onExpirationUpdated=function(e,t){var r=this,n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:return n=r.g,i=new dv,x(u,2,3),S(u,i.init(),5);case 5:return S(u,fv(i,n.Wa(),n.Fa()),6);case 6:return o=u.h,S(u,o.getManifests([n.key()]),7);case 7:a=u.h;s=a[0];l=s.sessionIds.includes(e);c=void 0==s.expiration||s.expiration>t;if(!l||!c){u.D(3);break}return S(u,o.updateManifestExpiration(n.key(),t),3);case 3:return O(u),S(u,i.destroy(),10);case 10:k(u,0);break;case 2:T(u),u.D(3)}}))};ha["application/x-offline-manifest"]=function(){return new Uv};function Hv(){}function Fv(e){var t=Iv(e);t&&"manifest"==t.g?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=$n(e)):e=t&&"segment"==t.g?Bv(t.key(),t):Gn(new De(2,1,9004,e));return e}function Bv(e,t){var r=new dv;return $n(void 0).qa((function(){return r.init()})).qa((function(){return fv(r,t.Wa(),t.Fa())})).qa((function(e){return e.getSegments([t.key()])})).qa((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return r.destroy()}))}V("shaka.offline.OfflineScheme",Hv);Hv.plugin=Fv;ni("offline",Fv);function zv(e,t,r){var n,i,o,a,s,l;return L((function(c){switch(c.g){case 1:n=[];for(var p=[],d=u(r),h=d.next();!h.done;h=d.next()){h=h.value;for(var m=!1,f=u(p),g=f.next();!g.done;g=f.next())if(g=g.value,Wv(g.info,h)){g.sessionIds.push(h.sessionId);m=!0;break}m||p.push({info:h,sessionIds:[h.sessionId]})}i=u(p);o=i.next();case 2:if(o.done){c.D(4);break}a=o.value;s=Vv(e,t,a);return S(c,s,5);case 5:l=c.h;n=n.concat(l);o=i.next();c.D(2);break;case 4:return c.return(n)}}))}function Vv(e,t,r){var n,i;return L((function(o){switch(o.g){case 1:return n=new So({lc:t,onError:function(){},me:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),x(o,2),n.configure(e),S(o,Co(n,r.info.keySystem,r.info.licenseUri,r.info.serverCertificate,r.info.audioCapabilities,r.info.videoCapabilities),4);case 4:C(o,3);break;case 2:return T(o),S(o,n.destroy(),5);case 5:return o.return([]);case 3:return x(o,6),S(o,Po(n),8);case 8:C(o,7);break;case 6:return T(o),S(o,n.destroy(),9);case 9:return o.return([]);case 7:return i=[],S(o,Promise.all(r.sessionIds.map((function(e){return L((function(t){if(1==t.g)return x(t,2),S(t,Ao(n,e),4);if(2!=t.g)return i.push(e),C(t,0);T(t);_(t)}))}))),10);case 10:return S(o,n.destroy(),11);case 11:return o.return(i)}}))}function Wv(e,t){function r(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&vt(e.audioCapabilities,t.audioCapabilities,r)&&vt(e.videoCapabilities,t.videoCapabilities,r)}function Gv(e,t,r){var n=t.presentationTimeline.getDuration();t=$v(t);return{offlineUri:null,originalManifestUri:e,duration:n,size:0,expiration:Infinity,tracks:t,appMetadata:r,isIncomplete:!1}}function Kv(e,t){var r=Rv(new jv(e.Wa(),e.Fa()),t),n=t.appMetadata||{};r=$v(r);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:r,appMetadata:n,isIncomplete:t.isIncomplete||!1}}function $v(e){var t=[],r=on(e.variants);r=u(r);for(var n=r.next();!n.done;n=r.next())t.push(Yr(n.value));e=u(e.textStreams);for(r=e.next();!r.done;r=e.next())t.push(Qr(r.value));return t}function Xv(){this.g={}}function Yv(e,t){var r=t.audio,n=t.video;r&&!n&&(e.g[r.id]=r.bandwidth||t.bandwidth);!r&&n&&(e.g[n.id]=n.bandwidth||t.bandwidth);if(r&&n){var i=r.bandwidth||393216,o=n.bandwidth||t.bandwidth-i;0>=o&&(o=t.bandwidth);e.g[r.id]=i;e.g[n.id]=o}}function Qv(e,t){e.g[t.id]=t.bandwidth||2048}function Jv(e,t){e=e.g[t];null==e&&(e=0);return e}function Zv(e){var t=this;if(e&&e.constructor!=Eu)throw new De(2,9,9008);this.g=this.h=null;e?(this.h=e.g,this.g=e.ac()):(this.h=pu(),this.g=new ri);this.i=[];this.j=[];var r=!e;this.l=new hi((function(){var e,n,i,o,a;return L((function(s){switch(s.g){case 1:return S(s,Promise.all(t.j.map((function(e){return Qb(e)}))),2);case 2:e=function(){};n=[];i=u(t.i);for(o=i.next();!o.done;o=i.next())a=o.value,n.push(a.then(e,e));return S(s,Promise.all(n),3);case 3:if(!r){s.D(4);break}return S(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,_(s)}}))}))}function ew(){if(hr())e:{var e=u(wv.values());for(var t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy();e=!0;break e}e=!1}else e=!1;return e}n=Zv.prototype;n.destroy=function(){return this.l.destroy()};n.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=nu(e,t));return du(this.h,e)};n.getConfiguration=function(){var e=pu();du(e,this.h,pu());return e};n.ac=function(){return this.g};n.store=function(e,t,r){var n=this,i=this.getConfiguration(),o=new Xb(this.g);this.j.push(o);t=tw(this,e,t||{},(function(){var t;return L((function(o){if(1==o.g)return S(o,ua(e,n.g,i.manifest.retryParameters,r||null),2);t=o.h;return o.return(t())}))}),i,o);t=new Wn(t,(function(){return Qb(o)}));t.finally((function(){bt(n.j,o)}));return xw(this,t)};function tw(e,t,r,n,i,o){var a,s,l,c,u,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:return Sw(),s=a=null,l=new dv,p=u=c=null,x(w,2,3),S(w,n(),5);case 5:return a=w.h,S(w,gw(e,t,a,i),6);case 6:d=w.h;Ew(e);h=!d.presentationTimeline.S()&&!d.presentationTimeline.hc();if(!h)throw new De(2,9,9005,t);return S(w,yw(e,d,(function(e){p=p||e}),i),7);case 7:s=w.h;Ew(e);if(p)throw p;return S(w,ow(d,i),8);case 8:return S(w,l.init(),9);case 9:return Ew(e),S(w,hv(l),10);case 10:return c=w.h,Ew(e),m=aw(s,d,t,r,i,o),f=m.$h,g=m.If,S(w,c.Fa.addManifests([f]),11);case 11:y=w.h;Ew(e);u=y[0];Ew(e);if(p)throw p;return S(w,rw(e,g,u,f,o,i,c.Fa,d,s),12);case 12:return Ew(e),b=new Av("manifest",c.path.Wa,c.path.Fa,u),w.return(Kv(b,f));case 3:return O(w),S(w,l.destroy(),13);case 13:if(!a){w.D(14);break}return S(w,a.stop(),14);case 14:if(!s){w.D(16);break}return S(w,s.destroy(),16);case 16:k(w,0);break;case 2:v=T(w);if(null==u){w.D(18);break}return S(w,nw(u),18);case 18:throw p||v}}))}function rw(e,t,r,n,i,o,a,s,l){var c,p,d,h,m,f,g,y,b,v;return L((function(w){switch(w.g){case 1:c={};p=0;d=function(t,d){var h,m,f,g,y,b,v;return L((function(w){if(1==w.g){h={};m=u(t);for(f=m.next();!f.done;h={Xb:h.Xb},f=m.next())h.Xb=f.value,g=Gb(h.Xb,o),y=h.Xb.i,b=h.Xb.h,v=function(t){return function(r){var n,i,o;return L((function(s){if(1==s.g)return S(s,a.addSegments([{data:r}]),2);n=s.h;Ew(e);i=t.Xb.g;o=Wb(i);c[o]=n[0];p+=r.byteLength;_(s)}))}}(h),Jb(i,h.Xb.groupId,g,y,b,v);return S(w,Zb(i),2)}if(!d)return w.D(0);Ew(e);cw(s,n,l,o);return S(w,a.updateManifest(r,n),0)}))};h=!1;x(w,2);if(!sw(s)||!h||lw(s)){w.D(4);break}return S(w,d(t.filter((function(e){return e.h})),!0),5);case 5:return Ew(e),t=t.filter((function(e){return!e.h})),m=c,f=p,c={},p=0,S(w,iw(a,r,n,m,f,(function(){return Ew(e)})),6);case 6:Ew(e);case 4:if(h){w.D(7);break}return S(w,d(t,!1),8);case 8:return Ew(e),g=c,y=p,c={},p=0,S(w,iw(a,r,n,g,y,(function(){return Ew(e)})),9);case 9:Ew(e);case 7:C(w,0);break;case 2:return b=T(w),v=Object.values(c),S(w,a.removeSegments(v,(function(){})),10);case 10:throw b}}))}function nw(e){var t,r,n,i;return L((function(o){switch(o.g){case 1:return t=new dv,S(o,t.init(),2);case 2:return S(o,hv(t),3);case 3:return r=o.h,n=new Av("manifest",r.path.Wa,r.path.Fa,e),S(o,t.destroy(),4);case 4:return i=new Zv,S(o,i.remove(n.toString()),0)}}))}function iw(e,t,r,n,i,o){var a,s,l,c,p,d,h,m,f,g,y;return L((function(b){switch(b.g){case 1:a=!1;x(b,2);s=!0;l=u(r.streams);for(c=l.next();!c.done;c=l.next())for(p=c.value,d=u(p.segments),h=d.next();!h.done;h=d.next())m=h.value,f=m.pendingSegmentRefId?n[m.pendingSegmentRefId]:null,null!=f&&(m.dataKey=f,m.pendingSegmentRefId=void 0),f=m.pendingInitSegmentRefId?n[m.pendingInitSegmentRefId]:null,null!=f&&(m.initSegmentKey=f,m.pendingInitSegmentRefId=void 0),m.pendingSegmentRefId&&(s=!1),m.pendingInitSegmentRefId&&(s=!1);r.size+=i;s&&(r.isIncomplete=!1);return S(b,e.updateManifest(t,r),4);case 4:a=!0;o();C(b,0);break;case 2:return g=T(b),S(b,nw(t),5);case 5:if(a){b.D(6);break}y=Object.values(n);return S(b,e.removeSegments(y,(function(){})),6);case 6:throw g}}))}function ow(e,t){var r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E,D,O,k,P,A,I,j,R,N,M;return L((function(L){switch(L.g){case 1:return r={width:Infinity,height:Infinity},Nr(e,t.restrictions,r),S(L,qr(e,t.offline.usePersistentLicense),2);case 2:n=[];i=t.preferredAudioChannelCount;o=t.preferredDecodingAttributes;a=t.preferredVideoCodecs;s=t.preferredAudioCodecs;Tr(e,a,s,i,o);l=u(e.variants);for(c=l.next();!c.done;c=l.next())p=c.value,n.push(Yr(p));d=u(e.textStreams);for(h=d.next();!h.done;h=d.next())m=h.value,n.push(Qr(m));f=u(e.imageStreams);for(g=f.next();!g.done;g=f.next())y=g.value,n.push(Jr(y));return S(L,t.offline.trackSelectionCallback(n),3);case 3:b=L.h;v=e.presentationTimeline.getDuration();w=0;E=u(b);for(D=E.next();!D.done;D=E.next())O=D.value,k=O.bandwidth*v/8,w+=k;x(L,4);return S(L,t.offline.downloadSizeCallback(w),6);case 6:P=L.h;if(!P)throw new De(2,9,9014);C(L,5);break;case 4:A=T(L);if(A instanceof De)throw A;throw new De(2,9,9015);case 5:I=new Set;j=new Set;R=new Set;N=u(b);for(D=N.next();!D.done;D=N.next())M=D.value,"variant"==M.type&&I.add(M.id),"text"==M.type&&j.add(M.id),"image"==M.type&&R.add(M.id);e.variants=e.variants.filter((function(e){return I.has(e.id)}));e.textStreams=e.textStreams.filter((function(e){return j.has(e.id)}));e.imageStreams=e.imageStreams.filter((function(e){return R.has(e.id)}));Ow(e);_(L)}}))}function aw(e,t,r,n,i,o){var a=Gv(r,t,n),s=i.offline.progressCallback;Yb(o,(function(e,t){a.size=t;s(a,e)}),(function(t,r){l&&i.offline.usePersistentLicense&&c==r&&jo(e,"cenc",t)}));var l=sw(t)&&!lw(t),c=null;l&&(c=kw.get(e.g.keySystem));for(var p=new Xv,d=u(t.textStreams),h=d.next();!h.done;h=d.next())p.g[h.value.id]=52;d=u(t.imageStreams);for(h=d.next();!h.done;h=d.next())Qv(p,h.value);h=u(t.variants);for(d=h.next();!d.done;d=h.next())Yv(p,d.value);p=bw(o,p,t,i);o=p.streams;p=p.If;h=e.g;d=i.offline.usePersistentLicense;h&&d&&(h.initData=[]);return{$h:{creationTime:Date.now(),originalManifestUri:r,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.gd(),streams:o,sessionIds:d?No(e):[],drmInfo:h,appMetadata:n,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},If:p}}function sw(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function lw(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function cw(e,t,r,n){t.expiration=r.gd();r=No(r);t.sessionIds=n.offline.usePersistentLicense?r:[];if(sw(e)&&n.offline.usePersistentLicense&&!r.length)throw new De(2,9,9007)}n.remove=function(e){return _w(this,uw(this,e))};function uw(e,t){var r,n,i,o,a,s;return L((function(l){switch(l.g){case 1:Sw();r=Iv(t);if(null==r||"manifest"!=r.g)throw new De(2,9,9004,t);n=r;i=new dv;D(l);return S(l,i.init(),4);case 4:return S(l,fv(i,n.Wa(),n.Fa()),5);case 5:return o=l.h,S(l,o.getManifests([n.key()]),6);case 6:return a=l.h,s=a[0],S(l,Promise.all([dw(e,s,i),hw(o,n,s)]),2);case 2:return O(l),S(l,i.destroy(),8);case 8:k(l,0)}}))}function pw(e,t){for(var r=[],n=u(e.streams),i=n.next();!i.done;i=n.next())i=i.value,t&&"video"==i.type?r.push({contentType:Yt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||r.push({contentType:Yt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return r}function dw(e,t,r){return L((function(n){return S(n,Cw(e.g,e.h.drm,r,t),0)}))}function hw(e,t,r){function n(){}var i=Dw(r);Kv(t,r);return Promise.all([e.removeSegments(i,n),e.removeManifests([t.key()],n)])}n.oi=function(){return _w(this,mw(this))};function mw(e){var t,r,n,i,o,a,s,l,c,p;return L((function(d){switch(d.g){case 1:return Sw(),t=e.g,r=e.h.drm,n=new dv,i=!1,D(d),S(d,n.init(),4);case 4:o=[],gv(n,(function(e){return o.push(e)})),a=u(o),s=a.next();case 5:if(s.done){d.D(2);break}l=s.value;return S(d,l.getAll(),8);case 8:return c=d.h,S(d,zv(r,t,c),9);case 9:return p=d.h,S(d,l.remove(p),10);case 10:p.length!=c.length&&(i=!0);s=a.next();d.D(5);break;case 2:return O(d),S(d,n.destroy(),11);case 11:k(d,3);break;case 3:return d.return(!i)}}))}n.list=function(){return _w(this,fw())};function fw(){var e,t,r;return L((function(n){switch(n.g){case 1:return Sw(),e=[],t=new dv,D(n),S(n,t.init(),4);case 4:return r=Promise.resolve(),mv(t,(function(t,n){r=r.then((function(){var r;return L((function(i){if(1==i.g)return S(i,n.getAllManifests(),2);r=i.h;r.forEach((function(r,n){r=Kv(new Av("manifest",t.Wa,t.Fa,n),r);e.push(r)}));_(i)}))}))})),S(n,r,2);case 2:return O(n),S(n,t.destroy(),6);case 6:k(n,3);break;case 3:return n.return(e)}}))}function gw(e,t,r,n){var i,o,a,s,l;return L((function(c){if(1==c.g)return i=null,o=e.g,a={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},r.configure(n.manifest),Ew(e),S(c,r.start(t,a),2);if(3!=c.g)return s=c.h,Ew(e),l=Tw(s),S(c,Promise.all(ae(l,(function(e){return e.createSegmentIndex()}))),3);Ew(e);if(i)throw i;return c.return(s)}))}function yw(e,t,r,n){var i;return L((function(o){switch(o.g){case 1:return i=new So({lc:e.g,onError:r,me:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),i.configure(n.drm),S(o,xo(i,t.variants,n.offline.usePersistentLicense),2);case 2:return S(o,Po(i),3);case 3:return S(o,Io(i),4);case 4:return o.return(i)}}))}function bw(e,t,r,n){var i=new Map,o=Tw(r),a=new Map;o=u(o);for(var s=o.next();!s.done;s=o.next()){s=s.value;var l=vw(e,t,r,s,n,i);a.set(s.id,l)}e=u(r.variants);for(t=e.next();!t.done;t=e.next())t=t.value,t.audio&&a.get(t.audio.id).variantIds.push(t.id),t.video&&a.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(a.values()),If:Array.from(i.values())}}function vw(e,t,r,n,i,o){var a={id:n.id,originalId:n.originalId,primary:n.primary,type:n.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,pixelAspectRatio:n.pixelAspectRatio,hdr:n.hdr,kind:n.kind,language:n.language,originalLanguage:n.originalLanguage,label:n.label,width:n.width||null,height:n.height||null,encrypted:n.encrypted,keyIds:n.keyIds,segments:[],variantIds:[],roles:n.roles,forced:n.forced,channelsCount:n.channelsCount,audioSamplingRate:n.audioSamplingRate,spatialAudio:n.spatialAudio,closedCaptions:n.closedCaptions,tilesLayout:n.tilesLayout,external:n.external},s=i.offline.numberOfParallelDownloads,l=0;ww(n,r.presentationTimeline.Db(),(function(r){var i=Wb(r),c=void 0;if(!o.has(i)){var u=r.endTime-r.startTime;u=Jv(t,n.id)*u;u=$b(e.g,u);o.set(i,new Vb(r,u,l,!1))}r.h&&(c=Wb(r.h),o.has(c)||(u=.5*Jv(t,n.id),u=$b(e.g,u),o.set(c,new Vb(r.h,u,l,!0))));a.segments.push({pendingInitSegmentRefId:c,initSegmentKey:c?0:null,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,tilesLayout:r.tilesLayout,pendingSegmentRefId:i,dataKey:0});l=(l+1)%s}));return a}function ww(e,t,r){t=e.segmentIndex.find(t);if(null!=t)for(var n=e.segmentIndex.get(t);n;)r(n),n=e.segmentIndex.get(++t)}function Ew(e){if(e.l.g)throw new De(2,9,7001)}function Sw(){if(!ew())throw new De(2,9,9e3)}function _w(e,t){return L((function(r){if(1==r.g)return e.i.push(t),D(r),S(r,t,4);if(2!=r.g)return r.return(r.h);O(r);bt(e.i,t);return k(r,0)}))}function xw(e,t){var r=t.promise;e.i.push(r);return t.finally((function(){bt(e.i,r)}))}function Dw(e){var t=new Set;e=u(e.streams);for(var r=e.next();!r.done;r=e.next()){r=u(r.value.segments);for(var n=r.next();!n.done;n=r.next())n=n.value,null!=n.initSegmentKey&&t.add(n.initSegmentKey),t.add(n.dataKey)}return Array.from(t)}function Cw(e,t,r,n){var i,o,a;return L((function(s){if(1==s.g){if(!n.drmInfo)return s.return();i=yv(r);o=n.sessionIds.map((function(e){return{sessionId:e,keySystem:n.drmInfo.keySystem,licenseUri:n.drmInfo.licenseServerUri,serverCertificate:n.drmInfo.serverCertificate,audioCapabilities:pw(n,!1),videoCapabilities:pw(n,!0)}}));return S(s,zv(t,e,o),2)}return 3!=s.g?(a=s.h,S(s,i.remove(a),3)):S(s,i.add(o.filter((function(e){return!a.includes(e.sessionId)}))),0)}))}function Tw(e){for(var t=new Set,r=u(e.textStreams),n=r.next();!n.done;n=r.next())t.add(n.value);r=u(e.imageStreams);for(n=r.next();!n.done;n=r.next())t.add(n.value);e=u(e.variants);for(r=e.next();!r.done;r=e.next())r=r.value,r.audio&&t.add(r.audio),r.video&&t.add(r.video);return t}function Ow(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var r=u(t),n=r.next();!n.done;n=r.next()){n=u(t);for(var i=n.next();!i.done;i=n.next());}t=u(e);for(r=t.next();!r.done;r=t.next())for(r=u(e),n=r.next();!n.done;n=r.next());}V("shaka.offline.Storage",Zv);Zv.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new dv,D(t),S(t,bv(e),2)):5!=t.g?(O(t),S(t,e.destroy(),5)):k(t,0)}))};Zv.prototype.list=Zv.prototype.list;Zv.prototype.removeEmeSessions=Zv.prototype.oi;Zv.prototype.remove=Zv.prototype.remove;Zv.prototype.store=Zv.prototype.store;Zv.prototype.getNetworkingEngine=Zv.prototype.ac;Zv.prototype.getConfiguration=Zv.prototype.getConfiguration;Zv.prototype.configure=Zv.prototype.configure;Zv.prototype.destroy=Zv.prototype.destroy;Zv.support=ew;var kw=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");Yp.offline=ew;function Pw(){}function Aw(){for(var e=u(jw),t=e.next();!t.done;t=e.next()){t=t.value;try{t.$g()}catch(e){Q("Error installing polyfill!",e)}}}function Iw(e,t){e={priority:t||0,$g:e};for(t=0;t<jw.length;t++)if(jw[t].priority<e.priority){jw.splice(t,0,e);return}jw.push(e)}V("shaka.polyfill",Pw);Pw.register=Iw;Pw.installAll=Aw;var jw=[];function Rw(){this.g=new Lw}function Nw(){e.AbortController||(e.AbortController=Rw,e.AbortSignal=Lw)}Rw.prototype.abort=function(e){var t=this.g;if(!t.h){t.h=!0;t.g=e;void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError"));e=new G("abort");if(t.onabort)t.onabort(e);t.dispatchEvent(e)}};s.Object.defineProperties(Rw.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}});Pw.AbortController=Rw;Rw.install=Nw;function Lw(){oe.call(this);this.h=!1;this.g=void 0;this.onabort=null}b(Lw,oe);s.Object.defineProperties(Lw.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}});Iw(Nw);function Mw(){}function qw(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=u(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Uw(t.value)}function Uw(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}Pw.Aria=Mw;Mw.install=qw;Iw(qw);function Hw(){}function Fw(){dx()}Pw.EncryptionScheme=Hw;Hw.install=Fw;Iw(Fw,-2);function Bw(){}function zw(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;t=Document.prototype;t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));document.addEventListener("webkitfullscreenchange",Vw);document.addEventListener("webkitfullscreenerror",Vw);document.addEventListener("mozfullscreenchange",Vw);document.addEventListener("mozfullscreenerror",Vw);document.addEventListener("MSFullscreenChange",Vw);document.addEventListener("MSFullscreenError",Vw)}}function Vw(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),r=document.createEvent("Event");r.initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(r)}Pw.Fullscreen=Bw;Bw.install=zw;Iw(zw);function Ww(){}function Gw(){var e=!0;if(vr()||Sr("PlayStation 5")||wr()||Sr("Web0S")||yr()||Sr("CrKey")||Sr("PC=EOS")||Sr("Hisense")||Sr("VIDAA"))e=!1;e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),$w=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Kw)}function Kw(t){var r,n,i,o,a,s,l,c,u,p,d,h,m,f,g,y,b,v,w;return L((function(E){switch(E.g){case 1:r={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t};if(!t)return E.return(r);n=t.video;i=t.audio;if("media-source"==t.type){if(!hr())return E.return(r);if(n){if(Sr("CrKey"))if(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var _=n.contentType;n.width&&n.height&&(_+="; width="+n.width+"; height="+n.height);n.framerate&&(_+="; framerate="+n.framerate);"pq"===n.transferFunction&&(_+="; eotf=smpte2084");o=cast.__platform__.canDisplayType(_)}else o=rt(n.contentType);else yr()?(a=n.contentType,n.width&&n.height&&(a+="; width="+n.width,a+="; height="+n.height),n.framerate&&(a+="; framerate="+n.framerate),n.bitrate&&(a+="; bitrate="+n.bitrate),o=rt(a)):o=rt(n.contentType);if(!o)return E.return(r)}if(i&&(s=i.contentType,l=rt(s),!l))return E.return(r)}else if("file"==t.type){if(n&&(c=n.contentType,u=mr(c),!u)||i&&(p=i.contentType,d=mr(p),!d))return E.return(r)}else return E.return(r);if(!t.keySystemConfiguration)return r.supported=!0,E.return(Promise.resolve(r));h=t.keySystemConfiguration;m=[];f=[];h.audio&&(g={robustness:h.audio.robustness||"",contentType:t.audio.contentType},m.push(g));h.video&&(y={robustness:h.video.robustness||"",contentType:t.video.contentType},f.push(y));b={initDataTypes:[h.initDataType],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes};m.length&&(b.audioCapabilities=m);f.length&&(b.videoCapabilities=f);v=(t.video?t.video.contentType:"")+"#"+(t.audio?t.audio.contentType:"")+"#"+t.keySystemConfiguration.keySystem;x(E,3);if(v in Xw){w=Xw[v];E.D(5);break}return S(E,navigator.requestMediaKeySystemAccess(h.keySystem,[b]),6);case 6:w=E.h,Xw[v]=w;case 5:C(E,4);break;case 3:T(E);case 4:w&&(r.supported=!0,r.keySystemAccess=w);case 2:return E.return(r)}}))}Pw.MediaCapabilities=Ww;Ww.install=Gw;var $w=null;Ww.originalMcap=$w;var Xw={};Ww.memoizedMediaKeySystemAccessRequests_=Xw;Iw(Gw,-1);function Yw(){}function Qw(){var t=Er();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?rE():t?12>=t?(Jw(),Zw()):15>=t&&Jw():fr()?eE():(Sr("Tizen 2")||Sr("Tizen 3")||Sr("Tizen 4"))&&tE());e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&nE()}function Jw(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,M.apply(0,arguments));t.abort=function(){};return t}}function Zw(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,r){return e.call(this,t,r-.001)}}function eE(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(";")[0].split("/")[1]&&e(t)}}function tE(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=tr(t)[0]&&e(t)}}function rE(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var r=t.split(/ *; */);r.shift();return r.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}function nE(){var e=MediaSource.isTypeSupported;Sr("Web0S")||(MediaSource.isTypeSupported=function(t){var r=t.split(/ *; */),n=r.findIndex((function(e){return e.startsWith("codecs=")}));if(0>n)return e(t);var i=r[n].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=i.findIndex((function(e){return e.startsWith("vp09")}));0<=o&&(i[o]="vp9",r[n]='codecs="'+i.join(",")+'"',t=r.join("; "));return e(t)})}Pw.MediaSource=Yw;Yw.install=Qw;Iw(Qw);function iE(){}function oE(){screen.orientation&&screen.orientation.unlock||(void 0!=screen.orientation?aE():void 0!=e.orientation&&sE())}function aE(){void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()});void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})}function sE(){function t(){switch(e.orientation){case-90:r.type="landscape-secondary";r.angle=270;break;case 0:r.type="portrait-primary";r.angle=0;break;case 90:r.type="landscape-primary";r.angle=90;break;case 180:r.type="portrait-secondary",r.angle=180}}var r=new lE;screen.orientation=r;t();e.addEventListener("orientationchange",(function(){t();var e=new G("change");r.dispatchEvent(e)}))}Pw.Orientation=iE;iE.install=oE;function lE(){oe.call(this);this.type="";this.angle=0}b(lE,oe);lE.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):screen.msLockOrientation?screen.msLockOrientation(e):!1}var r=!1;switch(e){case"natural":r=t("default");break;case"any":r=!0;this.unlock();break;default:r=t(e)}if(r)return Promise.resolve();e=Error("screen.orientation.lock() is not available on this device");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;return Promise.reject(e)};lE.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()};Iw(oE);function cE(){}var uE,pE,dE,hE,mE,fE;function gE(e,t){try{var r=new vE(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}function yE(e){var t=this.mediaKeys;t&&t!=e&&EE(t,null);delete this.mediaKeys;return(this.mediaKeys=e)?EE(e,this):Promise.resolve()}function bE(e){e=ut(e.initData);if(pt(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ci(e.subarray(4),!0);e=Oi(e);var t=new Event("encrypted");t.initDataType="skd";t.initData=ct(e);this.dispatchEvent(t)}Pw.PatchedMediaKeysApple=cE;cE.uninstall=function(){uE&&(uE=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",pE),HTMLMediaElement.prototype.setMediaKeys=dE,e.MediaKeys=hE,e.MediaKeySystemAccess=mE,navigator.requestMediaKeySystemAccess=fE,pE=fE=dE=mE=hE=null,e.shakaMediaKeysPolyfill=!1)};cE.install=function(t){if(e.HTMLVideoElement&&e.WebKitMediaKeys){if(void 0===t?0:t)uE=!0,pE=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),dE=HTMLMediaElement.prototype.setMediaKeys,hE=e.MediaKeys,mE=e.MediaKeySystemAccess,fE=navigator.requestMediaKeySystemAccess;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=yE;e.MediaKeys=wE;e.MediaKeySystemAccess=vE;navigator.requestMediaKeySystemAccess=gE;e.shakaMediaKeysPolyfill=!0}};function vE(e,t){this.keySystem=e;if(e.startsWith("com.apple.fps"))for(e=u(t),t=e.next();!t.done;t=e.next()){var r=t.value;if("required"==r.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var n=!1,i=!1;if(r.audioCapabilities)for(var o=u(r.audioCapabilities),a=o.next();!a.done;a=o.next())a=a.value,a.contentType&&(n=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.audioCapabilities.push(a),i=!0));if(r.videoCapabilities)for(r=u(r.videoCapabilities),a=r.next();!a.done;a=r.next())o=a.value,o.contentType&&(n=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),i=!0));n||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));t=i?t:null}if(t){this.g=t;return}}e=Error("Unsupported keySystem");e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}vE.prototype.createMediaKeys=function(){var e=new wE(this.keySystem);return Promise.resolve(e)};vE.prototype.getConfiguration=function(){return this.g};function wE(e){this.h=new WebKitMediaKeys(e);this.g=new fi}wE.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new SE(this.h,e)};wE.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function EE(e,t){e.g.Ub();if(!t)return Promise.resolve();e.g.o(t,"webkitneedkey",bE);try{return Ks(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}wE.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function SE(e){oe.call(this);this.i=null;this.l=e;this.g=this.h=null;this.j=new fi;this.sessionId="";this.expiration=NaN;this.closed=new Vn;this.keyStatuses=new xE}b(SE,oe);n=SE.prototype;n.generateRequest=function(e,t){var r=this;this.h=new Vn;try{var n=this.l.createSession("video/mp4",ut(t));this.i=n;this.sessionId=n.sessionId||"";this.j.o(this.i,"webkitkeymessage",(function(e){r.h&&(r.h.resolve(),r.h=null);e=(new Map).set("messageType",void 0==r.keyStatuses.dc()?"license-request":"license-renewal").set("message",ct(e.message));e=new G("message",e);r.dispatchEvent(e)}));this.j.o(n,"webkitkeyadded",(function(){r.g&&(_E(r,"usable"),r.g.resolve(),r.g=null)}));this.j.o(n,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");e.errorCode=r.i.error;if(null!=r.h)r.h.reject(e),r.h=null;else if(null!=r.g)r.g.reject(e),r.g=null;else switch(r.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:_E(r,"output-not-allowed");break;default:_E(r,"internal-error")}}));_E(this,"status-pending")}catch(e){this.h.reject(e)}return this.h};n.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))};n.update=function(e){this.g=new Vn;try{this.i.update(ut(e))}catch(e){this.g.reject(e)}return this.g};n.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Ub()}catch(e){this.closed.reject(e)}return this.closed};n.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function _E(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1;r.g=t;t=new G("keystatuseschange");e.dispatchEvent(t)}function xE(){this.size=0;this.g=void 0}n=xE.prototype;n.dc=function(){return this.g};n.forEach=function(e){this.g&&e(this.g,la.value())};n.get=function(e){if(this.has(e))return this.g};n.has=function(e){var t=la.value();return this.g&&st(e,t)?!0:!1};n.entries=function(){};n.keys=function(){};n.values=function(){};function DE(){}function CE(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=TE,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=OE,e.MediaKeys=kE,e.MediaKeySystemAccess=PE,e.shakaMediaKeysPolyfill=!0)}function TE(){return Promise.reject(Error("The key system specified is not supported."))}function OE(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Pw.PatchedMediaKeysNop=DE;DE.install=CE;function kE(){throw new TypeError("Illegal constructor.")}kE.prototype.createSession=function(){};kE.prototype.setServerCertificate=function(){};kE.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function PE(){this.keySystem="";throw new TypeError("Illegal constructor.")}PE.prototype.getConfiguration=function(){};PE.prototype.createMediaKeys=function(){};Iw(CE,-10);function AE(){}function IE(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)WE="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=RE;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=NE;e.MediaKeys=ME;e.MediaKeySystemAccess=LE;e.shakaMediaKeysPolyfill=!0}}function jE(e){var t=WE;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function RE(e,t){try{var r=new LE(e,t);return Promise.resolve(r)}catch(e){return Promise.reject(e)}}function NE(e){var t=this.mediaKeys;t&&t!=e&&qE(t,null);delete this.mediaKeys;(this.mediaKeys=e)&&qE(e,this);return Promise.resolve()}Pw.PatchedMediaKeysWebkit=AE;AE.install=IE;function LE(e,t){this.g=this.keySystem=e;var r=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",r=!1);var n=!1;var i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");t=u(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},s=!1;if(o.audioCapabilities)for(var l=u(o.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(s=!0,i.canPlayType(c.contentType.split(";")[0],this.g)&&(a.audioCapabilities.push(c),n=!0));if(o.videoCapabilities)for(l=u(o.videoCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(s=!0,i.canPlayType(c.contentType,this.g)&&(a.videoCapabilities.push(c),n=!0));s||(n=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g));"required"==o.persistentState&&(r?(a.persistentState="required",a.sessionTypes=["persistent-license"]):n=!1);if(n){this.h=a;return}}r="Unsupported keySystem";if("org.w3.clearkey"==e||"com.widevine.alpha"==e)r="None of the requested configurations were supported.";e=Error(r);e.name="NotSupportedError";e.code=DOMException.NOT_SUPPORTED_ERR;throw e}LE.prototype.createMediaKeys=function(){var e=new ME(this.g);return Promise.resolve(e)};LE.prototype.getConfiguration=function(){return this.h};function ME(e){this.l=e;this.h=null;this.g=new fi;this.i=[];this.j=new Map}function qE(e,t){e.h=t;e.g.Ub();var r=WE;t&&(e.g.o(t,r+"needkey",(function(t){var r=new CustomEvent("encrypted");r.initDataType="cenc";r.initData=ct(t.initData);e.h.dispatchEvent(r)})),e.g.o(t,r+"keymessage",(function(t){var r=UE(e,t.sessionId);r&&(t=(new Map).set("messageType",void 0==r.keyStatuses.dc()?"licenserequest":"licenserenewal").set("message",t.message),t=new G("message",t),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(t))})),e.g.o(t,r+"keyadded",(function(t){if(t=UE(e,t.sessionId))zE(t,"usable"),t.g&&t.g.resolve(),t.g=null})),e.g.o(t,r+"keyerror",(function(t){var r=UE(e,t.sessionId);r&&r.handleError(t)})))}ME.prototype.createSession=function(e){e=e||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");t.src||(t.src="about:blank");e=new HE(t,this.l,e);this.i.push(e);return e};ME.prototype.setServerCertificate=function(){return Promise.resolve(!1)};ME.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function UE(e,t){var r=e.j.get(t);return r?r:(r=e.i.shift())?(r.sessionId=t,e.j.set(t,r),r):null}function HE(e,t,r){oe.call(this);this.j=e;this.m=!1;this.g=this.h=null;this.i=t;this.l=r;this.sessionId="";this.expiration=NaN;this.closed=new Vn;this.keyStatuses=new VE}b(HE,oe);n=HE.prototype;n.handleError=function(e){var t=Error("EME v0.1b key error"),r=e.errorCode;r.systemCode=e.systemCode;t.errorCode=r;!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?zE(this,"output-restricted"):1==t?zE(this,"expired"):zE(this,"internal-error"))};function FE(e,t,r){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(r)var n=ut(Oi("LOAD_SESSION|"+r));else{var i=Oi("PERSISTENT|");n=Yi(i,t)}else n=ut(t)}catch(e){return Promise.reject(e)}e.h=new Vn;var o=jE("generateKeyRequest");try{e.j[o](e.i,n)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new dr((function(){try{e.j[o](e.i,n)}catch(t){e.h.reject(t),e.h=null}})).R(.01)}return e.h}function BE(e,t,r){if(e.g)e.g.then((function(){return BE(e,t,r)})).catch((function(){return BE(e,t,r)}));else{e.g=t;if("webkit-org.w3.clearkey"==e.i){var n=Di(r);var i=JSON.parse(n);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null);n=Ki(i.keys[0].k);i=Ki(i.keys[0].kid)}else n=ut(r),i=null;var o=jE("addKey");try{e.j[o](e.i,n,i,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function zE(e,t){var r=e.keyStatuses;r.size=void 0==t?0:1;r.g=t;t=new G("keystatuseschange");e.dispatchEvent(t)}n.generateRequest=function(e,t){return FE(this,t,null)};n.load=function(e){return"persistent-license"==this.l?FE(this,null,e):Promise.reject(Error("Not a persistent session."))};n.update=function(e){var t=new Vn;BE(this,t,e);return t};n.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=jE("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}this.closed.resolve();return this.closed};n.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()};function VE(){this.size=0;this.g=void 0}n=VE.prototype;n.dc=function(){return this.g};n.forEach=function(e){this.g&&e(this.g,la.value())};n.get=function(e){if(this.has(e))return this.g};n.has=function(e){var t=la.value();return this.g&&st(e,t)?!0:!1};n.entries=function(){};n.keys=function(){};n.values=function(){};var WE="";Iw(IE);function GE(){}function KE(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=XE,Object.defineProperty(t,"disablePictureInPicture",{get:QE,set:JE,enumerable:!0,configurable:!0}),document.exitPictureInPicture=YE,document.addEventListener("webkitpresentationmodechanged",$E,!0))}}function $E(e){e=e.target;if("picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function XE(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function YE(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function QE(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function JE(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Pw.PiPWebkit=GE;GE.install=KE;Iw(KE);function ZE(){}function eS(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=tS))}function tS(){var e=URL.createObjectURL(new Blob),t=e.toString();URL.revokeObjectURL(e);return t.substr(t.lastIndexOf("/")+1)}Pw.RandomUUID=ZE;ZE.install=eS;Iw(eS);function rS(){}function nS(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=iS)}function iS(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,r){e({usage:t,quota:r})}),t)}))}Pw.StorageEstimate=rS;rS.install=nS;Iw(nS);function oS(){}function aS(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:sS})}function sS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Pw.Symbol=oS;oS.install=aS;Iw(aS);function lS(){}function cS(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);e&&e.catch((function(){}));return e}}}Pw.VideoPlayPromise=lS;lS.install=cS;Iw(cS);function uS(){}function pS(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||br())&&(t.getVideoPlaybackQuality=dS)}}function dS(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Pw.VideoPlaybackQuality=uS;uS.install=pS;Iw(pS);function hS(){}function mS(){if(!e.VTTCue&&e.TextTrackCue){var t=null,r=TextTrackCue.length;if(3==r)t=fS;else if(6==r)t=gS;else{try{var n=!!fS(1,2,"")}catch(e){n=!1}n&&(t=fS)}t&&(e.VTTCue=function(e,r,n){return t(e,r,n)})}}function fS(t,r,n){return new e.TextTrackCue(t,r,n)}function gS(t,r,n){return new e.TextTrackCue(t+"-"+r+"-"+n,t,r,n)}Pw.VTTCue=hS;hS.install=mS;Iw(mS);function yS(){}yS.prototype.parseInit=function(){};yS.prototype.setSequenceMode=function(){};yS.prototype.setManifestType=function(){};yS.prototype.parseMedia=function(e,t){var r=null,n=[];e=Di(e).split(/\r?\n/);e=u(e);for(var i=e.next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=bS.exec(i))){var o=vS.exec(i[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",","."));i=new Et(o,t.segmentEnd?t.segmentEnd:o+2,i[2]);r&&(r.endTime=o,n.push(r));r=i}r&&n.push(r);return n};V("shaka.text.LrcTextParser",yS);yS.prototype.parseMedia=yS.prototype.parseMedia;yS.prototype.setManifestType=yS.prototype.setManifestType;yS.prototype.setSequenceMode=yS.prototype.setSequenceMode;yS.prototype.parseInit=yS.prototype.parseInit;var bS=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,vS=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ur["application/x-subtitle-lrc"]=function(){return new yS};function wS(){}wS.prototype.parseInit=function(){};wS.prototype.setSequenceMode=function(){};wS.prototype.setManifestType=function(){};wS.prototype.parseMedia=function(e,t){var r=Di(e);e=[];if(""==r)return e;var n=vo(r,"tt");if(!n)throw new De(2,2,2005,"Failed to parse TTML.");r=n.getElementsByTagName("body")[0];if(!r)return[];var i=oo(n,GS,"frameRate"),o=oo(n,GS,"subFrameRate"),a=oo(n,GS,"frameRateMultiplier"),s=oo(n,GS,"tickRate"),l=oo(n,GS,"cellResolution"),c=n.getAttribute("xml:space")||"default",p=oo(n,KS,"extent");if("default"!=c&&"preserve"!=c)throw new De(2,2,2005,"Invalid xml:space value: "+c);c="default"==c;i=new jS(i,o,a,s);l=l?(l=/^(\d+) (\d+)$/.exec(l))?{eh:parseInt(l[1],10),rows:parseInt(l[2],10)}:null:null;o=(o=n.getElementsByTagName("metadata")[0])?ro(o):[];a=Array.from(n.getElementsByTagName("style"));n=Array.from(n.getElementsByTagName("region"));s=[];for(var d=u(n),h=d.next();!h.done;h=d.next()){var m=h.value;h=new qt;var f=m.getAttribute("xml:id");if(f){h.id=f;var g=null;p&&(g=RS.exec(p)||MS.exec(p));f=g?Number(g[1]):null;g=g?Number(g[2]):null;var y,b;if(y=DS(m,a,"extent"))y=(b=RS.exec(y))||MS.exec(y),null!=y&&(h.width=Number(y[1]),h.height=Number(y[2]),b||(null!=f&&(h.width=100*h.width/f),null!=g&&(h.height=100*h.height/g)),h.widthUnits=b||null!=f?Ut:0,h.heightUnits=b||null!=g?Ut:0);if(m=DS(m,a,"origin"))y=(b=RS.exec(m))||MS.exec(m),null!=y&&(h.viewportAnchorX=Number(y[1]),h.viewportAnchorY=Number(y[2]),b||(null!=g&&(h.viewportAnchorY=100*h.viewportAnchorY/g),null!=f&&(h.viewportAnchorX=100*h.viewportAnchorX/f)),h.viewportAnchorUnits=b||null!=f?Ut:0)}else h=null;h&&s.push(h)}if(to(r,"p").length)throw new De(2,2,2001,"<p> can only be inside <div> in TTML");p=u(to(r,"div"));for(d=p.next();!d.done;d=p.next())if(to(d.value,"span").length)throw new De(2,2,2001,"<span> can only be inside <p> in TTML");if(t=ES(r,t,i,o,a,n,s,c,l,null,!1))t.backgroundColor||(t.backgroundColor="transparent"),e.push(t);return e};function ES(e,t,r,n,i,o,a,s,l,c,p){var d=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!p)return null;var h=document.createElement("span");h.textContent=e.textContent}else h=e;for(var m=null,f=u($S),g=f.next();!g.done&&!(m=OS(h,"backgroundImage",n,"#",g.value)[0]);g=f.next());if("p"==e.nodeName||m)p=!0;e=p;f="default"==(h.getAttribute("xml:space")||(s?"default":"preserve"));g=Array.from(h.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}));s=[];if(!g)for(var y=u(h.childNodes),b=y.next();!b.done;b=y.next())(b=ES(b.value,t,r,n,i,o,a,f,l,h,p))&&s.push(b);n=null!=c;y=/\S/.test(h.textContent);var v=h.hasAttribute("begin")||h.hasAttribute("end")||h.hasAttribute("dur");if(!(v||y||"br"==h.tagName||0!=s.length||n&&!f))return null;b=PS(h,r);y=b.start;for(b=b.end;d&&d.nodeType==Node.ELEMENT_NODE&&"tt"!=d.tagName;)b=kS(d,r,y,b),y=b.start,b=b.end,d=d.parentNode;null==y&&(y=0);y+=t.periodStart;b=null==b?Infinity:b+t.periodStart;y=Math.max(y,t.segmentStart);b=Math.min(b,t.segmentEnd);if(!v&&0<s.length)for(y=Infinity,b=0,t=u(s),r=t.next();!r.done;r=t.next())r=r.value,y=Math.min(y,r.startTime),b=Math.max(b,r.endTime);if("br"==h.tagName)return i=new Et(y,b,""),i.lineBreak=!0,i;t="";g&&(t=h.textContent,f&&(t=t.trim(),t=t.replace(/\s+/g," ")));t=new Et(y,b,t);t.nestedCues=s;p||(t.isContainer=!0);l&&(t.cellResolution=l);l=OS(h,"region",o,"")[0];if(h.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var w=l.getAttribute("xml:id");t.region=a.filter((function(e){return e.id==w}))[0]}a=l;c&&n&&!h.getAttribute("region")&&!h.getAttribute("style")&&(a=OS(c,"region",o,"")[0]);SS(t,h,a,m,i,e,0==s.length);return t}function SS(e,t,r,n,i,o,a){o=o||a;"rtl"==xS(t,r,i,"direction",o)&&(e.direction="rtl");a=xS(t,r,i,"writingMode",o);"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Ot);(a=xS(t,r,i,"textAlign",!0))?(e.positionAlign=WS[a],e.lineAlign=VS[a],e.textAlign=Dt[a.toUpperCase()]):e.textAlign=xt;if(a=xS(t,r,i,"displayAlign",!0))e.displayAlign=Tt[a.toUpperCase()];if(a=xS(t,r,i,"color",o))e.color=a;if(a=xS(t,r,i,"backgroundColor",o))e.backgroundColor=a;if(a=xS(t,r,i,"border",o))e.border=a;if(a=xS(t,r,i,"fontFamily",o))switch(a){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=a}(a=xS(t,r,i,"fontWeight",o))&&"bold"==a&&(e.fontWeight=700);a=xS(t,r,i,"wrapOption",o);e.wrapLine=a&&"noWrap"==a?!1:!0;(a=xS(t,r,i,"lineHeight",o))&&a.match(LS)&&(e.lineHeight=a);(a=xS(t,r,i,"fontSize",o))&&(a.match(LS)||a.match(NS))&&(e.fontSize=a);if(a=xS(t,r,i,"fontStyle",o))e.fontStyle=Mt[a.toUpperCase()];if(n){a=n.getAttribute("imageType")||n.getAttribute("imagetype");var s=n.getAttribute("encoding");n=n.textContent.trim();"PNG"==a&&"Base64"==s&&n&&(e.backgroundImage="data:image/png;base64,"+n)}if(n=xS(t,r,i,"textOutline",o))n=n.split(" "),n[0].match(LS)?e.textStrokeColor=e.color:(e.textStrokeColor=n[0],n.shift()),n[0]&&n[0].match(LS)?e.textStrokeWidth=n[0]:e.textStrokeColor="";(n=xS(t,r,i,"letterSpacing",o))&&n.match(LS)&&(e.letterSpacing=n);(n=xS(t,r,i,"linePadding",o))&&n.match(LS)&&(e.linePadding=n);if(o=xS(t,r,i,"opacity",o))e.opacity=parseFloat(o);(r=DS(r,i,"textDecoration"))&&_S(e,r);(t=CS(t,i,"textDecoration"))&&_S(e,t)}function _S(e,t){t=u(t.split(" "));for(var r=t.next();!r.done;r=t.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&bt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&bt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&bt(e.textDecoration,"overline")}}function xS(e,t,r,n,i){i=void 0===i?!0:i;return(e=CS(e,r,n))?e:i?DS(t,r,n):null}function DS(e,t,r){if(!e)return null;var n=oo(e,KS,r);return n?n:TS(e,t,r)}function CS(e,t,r){var n=oo(e,KS,r);return n?n:TS(e,t,r)}function TS(e,t,r){e=OS(e,"style",t,"");for(var n=null,i=0;i<e.length;i++){var o=io(e[i],"urn:ebu:tt:style",r);o||(o=oo(e[i],KS,r));o||(o=CS(e[i],t,r));o&&(n=o)}return n}function OS(e,t,r,n,i){var o=[];if(!e||1>r.length)return o;var a=e;for(e=null;a&&!(e=i?io(a,i,t):a.getAttribute(t))&&(a=a.parentNode,a instanceof Element););if(t=e)for(t=u(t.split(" ")),i=t.next();!i.done;i=t.next())for(i=i.value,e=u(r),a=e.next();!a.done;a=e.next())if(a=a.value,n+a.getAttribute("xml:id")==i){o.push(a);break}return o}function kS(e,t,r,n){e=PS(e,t);null==r?r=e.start:null!=e.start&&(r+=e.start);null==n?n=e.end:null!=e.start&&(n+=e.start);return{start:r,end:n}}function PS(e,t){var r=AS(e.getAttribute("begin"),t),n=AS(e.getAttribute("end"),t);e=AS(e.getAttribute("dur"),t);null==n&&null!=e&&(n=r+e);return{start:r,end:n}}function AS(e,t){var r=null;if(qS.test(e)){e=qS.exec(e);r=Number(e[1]);var n=Number(e[2]),i=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h;i+=o/t.frameRate;r=i+60*n+3600*r}else if(US.test(e))r=IS(US,e);else if(HS.test(e))r=IS(HS,e);else if(FS.test(e))e=FS.exec(e),r=Number(e[1])/t.frameRate;else if(BS.test(e))e=BS.exec(e),r=Number(e[1])/t.g;else if(zS.test(e))r=IS(zS,e);else if(e)throw new De(2,2,2001,"Could not parse cue time range in TTML");return r}function IS(e,t){e=e.exec(t);return null==e||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}V("shaka.text.TtmlTextParser",wS);wS.prototype.parseMedia=wS.prototype.parseMedia;wS.prototype.setManifestType=wS.prototype.setManifestType;wS.prototype.setSequenceMode=wS.prototype.setSequenceMode;wS.prototype.parseInit=wS.prototype.parseInit;function jS(e,t,r,n){this.frameRate=Number(e)||30;this.h=Number(t)||1;this.g=Number(n);0==this.g&&(this.g=e?this.frameRate*this.h:1);r&&(e=/^(\d+) (\d+)$/g.exec(r))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var RS=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,NS=/^(\d{1,2}(?:\.\d+)?|100)%$/,LS=/^(\d+px|\d+em|\d*\.?\d+c)$/,MS=/^(\d+)px (\d+)px$/,qS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,US=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,HS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,FS=/^(\d*(?:\.\d*)?)f$/,BS=/^(\d*(?:\.\d*)?)t$/,zS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),VS={left:At,center:"center",right:"end",start:At,end:"end"},WS={left:"line-left",center:"center",right:"line-right"},GS=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],KS=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],$S=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ur["application/ttml+xml"]=function(){return new wS};function XS(){this.g=new wS}XS.prototype.parseInit=function(e){var t=!1;(new Ri).box("moov",Ni).box("trak",Ni).box("mdia",Ni).box("minf",Ni).box("stbl",Ni).T("stsd",Li).box("stpp",(function(e){t=!0;e.parser.stop()})).parse(e);if(!t)throw new De(2,2,2007)};XS.prototype.setSequenceMode=function(){};XS.prototype.setManifestType=function(){};XS.prototype.parseMedia=function(e,t){var r=this,n=!1,i=[];(new Ri).box("mdat",qi((function(e){n=!0;i=i.concat(r.g.parseMedia(e,t))}))).parse(e,!1);if(!n)throw new De(2,2,2007);return i};V("shaka.text.Mp4TtmlParser",XS);XS.prototype.parseMedia=XS.prototype.parseMedia;XS.prototype.setManifestType=XS.prototype.setManifestType;XS.prototype.setSequenceMode=XS.prototype.setSequenceMode;XS.prototype.parseInit=XS.prototype.parseInit;ur['application/mp4; codecs="stpp"']=function(){return new XS};ur['application/mp4; codecs="stpp.ttml"']=function(){return new XS};ur['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new XS};ur['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new XS};function YS(){this.h=!1;this.g="UNKNOWN"}YS.prototype.parseInit=function(){};YS.prototype.setSequenceMode=function(e){this.h=e};YS.prototype.setManifestType=function(e){this.g=e};YS.prototype.parseMedia=function(e,t){e=Di(e);e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var r=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new De(2,2,2e3);e=t.vttOffset;if(r[0].includes("X-TIMESTAMP-MAP")&&this.h){var n=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=r[0].match(/MPEGTS:(\d+)/m);if(n&&i){e=n_(new jg(n[1]));if(null==e)throw new De(2,2,2e3);i=Number(i[1]);for(n=t.segmentStart-t.periodStart;95443.7176888889<=n;)n-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}}else r[0].includes("X-TIMESTAMP-MAP")&&"HLS"==this.g&&(e=t.segmentStart);t=[];i=u(r[0].split("\n"));for(n=i.next();!n.done;n=i.next())if(n=n.value,/^Region:/.test(n)){n=new jg(n);var o=new qt;Lg(n);Rg(n);for(var a=Lg(n);a;){var s=o,l=a;(a=/^id=(.*)$/.exec(l))?s.id=a[1]:(a=/^width=(\d{1,2}|100)%$/.exec(l))?s.width=Number(a[1]):(a=/^lines=(\d+)$/.exec(l))?(s.height=Number(a[1]),s.heightUnits=2):(a=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.regionAnchorX=Number(a[1]),s.regionAnchorY=Number(a[2])):(a=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.viewportAnchorX=Number(a[1]),s.viewportAnchorY=Number(a[2])):/^scroll=up$/.exec(l)&&(s.scroll="up");Rg(n);a=Lg(n)}t.push(o)}i=new Map;QS(i);n=[];r=u(r.slice(1));for(o=r.next();!o.done;o=r.next()){o=o.value.split("\n");if((1!=o.length||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&"STYLE"==o[0]){s=[];a=-1;for(l=1;l<o.length;l++)o[l].includes("::cue")&&(s.push([]),a=s.length-1),-1!=a&&(s[a].push(o[l]),o[l].includes("}")&&(a=-1));s=u(s);for(a=s.next();!a.done;a=s.next()){var c=a.value;a="global";(l=c[0].match(/\((.*)\)/))&&(a=l.pop());l=c.slice(1,-1);c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(l=c[1].split(";"));(c=i.get(a))||(c=new Et(0,0,""));for(var p=!1,d=0;d<l.length;d++){var h=/^\s*([^:]+):\s*(.*)/.exec(l[d]);if(h){var m=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":p=!0;c.backgroundColor=m;break;case"color":p=!0;c.color=m;break;case"font-family":p=!0;c.fontFamily=m;break;case"font-size":p=!0;c.fontSize=m;break;case"font-weight":if(700<=parseInt(m,10)||"bold"==m)p=!0,c.fontWeight=700;break;case"font-style":switch(m){case"normal":p=!0;c.fontStyle=Lt;break;case"italic":p=!0;c.fontStyle="italic";break;case"oblique":p=!0,c.fontStyle="oblique"}break;case"opacity":p=!0;c.opacity=parseFloat(m);break;case"text-shadow":p=!0;c.textShadow=m;break;case"white-space":p=!0,c.wrapLine="noWrap"!=m}}}p&&i.set(a,c)}}p=e;if(1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0]||"REGION"==o[0])o=null;else if(s=null,o[0].includes("--\x3e")||(s=o[0],o.splice(0,1)),a=new jg(o[0]),l=n_(a),d=Ng(a,/[ \t]+--\x3e[ \t]+/g),c=n_(a),null==l||null==d||null==c)Q("Failed to parse VTT time code. Cue skipped:",s,o),o=null;else{l+=p;c+=p;p=o.slice(1).join("\n").trim();i.has("global")?(o=i.get("global").clone(),o.startTime=l,o.endTime=c,o.payload=""):o=new Et(l,c,"");JS(p,o,i);Rg(a);for(l=Lg(a);l;)t_(o,l,t),Rg(a),l=Lg(a);null!=s&&(o.id=s)}o&&n.push(o)}return n};function QS(e){for(var t=u(Object.entries(jt)),r=t.next();!r.done;r=t.next()){var n=u(r.value);r=n.next().value;n=n.next().value;var i=new Et(0,0,"");i.color=n;e.set("."+r,i)}t=u(Object.entries(Rt));for(r=t.next();!r.done;r=t.next())n=u(r.value),r=n.next().value,n=n.next().value,i=new Et(0,0,""),i.backgroundColor=n,e.set("."+r,i)}function JS(e,t,r){0===r.size&&QS(r);e:{var n=e;e=[];for(var i=-1,o="",a=0;a<n.length;a++)if("/"===n[a]&&0<a&&"<"===n[a-1]){var s=n.indexOf(">",a);if(s<=a){e=n;break e}if((s=n.substring(a+1,s))&&"c"===s){var l=e.pop();l?l===s?(o+="/"+s+">",a+=s.length+1):l.startsWith("c.")?(a+=s.length+1,o+="/"+l+">"):o+=n[a]:o+=n[a]}else o+=n[a]}else"<"===n[a]?(i=a+1,"c"!=n[i]&&(i=-1)):">"===n[a]&&0<i&&(e.push(n.substr(i,a-i)),i=-1),o+=n[a];e=o}n=[];o=-1;for(i=0;i<e.length;i++)"<"===e[i]?o=i+1:">"===e[i]&&0<o&&(o=e.substr(o,i-o),o.match(o_)&&n.push(o),o=-1);n=u(n);for(i=n.next();!i.done;i=n.next())i=i.value,e=e.replace("<"+i+">",'<div time="'+i+'">'),e+="</div>";e:{i=e;o=[];a=-1;n="";e=!1;for(s=0;s<i.length;s++)if("/"===i[s]){l=i.indexOf(">",s);if(-1===l){e=i;break e}if((l=i.substring(s+1,l))&&"v"==l){e=!0;var c=null;o.length&&(c=o[o.length-1]);if(c){if(c===l)n+="/"+l+">";else{if(!c.startsWith("v")){n+=i[s];continue}n+="/"+c+">"}s+=l.length+1}else n+=i[s]}else n+=i[s]}else"<"===i[s]?(a=s+1,"v"!=i[a]&&(a=-1)):">"===i[s]&&0<a&&(o.push(i.substr(a,s-a)),a=-1),n+=i[s];i=u(o);for(o=i.next();!o.done;o=i.next())o=o.value,a=o.replace(" ",".voice-"),n=n.replace("<"+o+">","<"+a+">"),n=n.replace("</"+o+">","</"+a+">"),e||(n+="</"+a+">");e=n}if(i=vo("<span>"+e+"</span>","span")){n=[];i=i.childNodes;if(1==i.length&&(o=i[0],o.nodeType==Node.TEXT_NODE||o.nodeType==Node.CDATA_SECTION_NODE)){t.payload=i_(e);return}e=u(i);for(i=e.next();!i.done;i=e.next())e_(i.value,t,n,r);t.nestedCues=n}else t.payload=i_(e)}function ZS(e,t){return e&&0<e.length?e:t}function e_(e,t,r,n){var i=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var o=u(e.nodeName.split(/(?=[ .])+/g)),a=o.next();!a.done;a=o.next()){var s=a=a.value;if(s.startsWith(".voice-")){var l=s.split("-").pop();s='v[voice="'+l+'"]';n.has(s)||(s="v[voice="+l+"]")}n.has(s)&&(s=n.get(s))&&(i.backgroundColor=ZS(s.backgroundColor,i.backgroundColor),i.color=ZS(s.color,i.color),i.fontFamily=ZS(s.fontFamily,i.fontFamily),i.fontSize=ZS(s.fontSize,i.fontSize),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.textShadow=s.textShadow,i.wrapLine=s.wrapLine);switch(a){case"br":a=t.clone();a.lineBreak=!0;r.push(a);break;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":if(a=e.getAttribute("color"))i.color=a;break;case"div":if(a=e.getAttribute("time"))if(a=n_(new jg(a)))i.startTime=a}}if(so(e))for(o=!0,n=u(e.textContent.split("\n")),e=n.next();!e.done;e=n.next())e=e.value,o||(o=t.clone(),o.lineBreak=!0,r.push(o)),0<e.length&&(o=i.clone(),o.payload=i_(e),r.push(o)),o=!1;else for(t=u(e.childNodes),e=t.next();!e.done;e=t.next())e_(e.value,i,r,n)}function t_(e,t,r){var n;if(n=/^align:(start|middle|center|end|left|right)$/.exec(t))t=n[1],"middle"==t?e.textAlign=xt:e.textAlign=Dt[t.toUpperCase()];else if(n=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==n[1]?"vertical-lr":"vertical-rl";else if(n=/^size:([\d.]+)%$/.exec(t))e.size=Number(n[1]);else if(n=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))e.position=Number(n[1]),n[2]&&(t=n[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":_t);else if(n=/^region:(.*)$/.exec(t)){if(t=r_(r,n[1]))e.region=t}else if(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(r[1]),r[2]&&(e.lineAlign=It[r[2].toUpperCase()]);else if(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Pt,e.line=Number(r[1]),r[2]&&(e.lineAlign=It[r[2].toUpperCase()])}function r_(e,t){e=e.filter((function(e){return e.id==t}));return e.length?e[0]:null}function n_(e){e=Ng(e,o_);if(null==e)return null;var t=Number(e[2]),r=Number(e[3]);return 59<t||59<r?null:Number(e[4])/1e3+r+60*t+3600*(Number(e[1])||0)}function i_(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},r=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,n=RegExp(r.source);return e&&n.test(e)?e.replace(r,(function(e){return t[e]||"'"})):e||""}V("shaka.text.VttTextParser",YS);YS.prototype.parseMedia=YS.prototype.parseMedia;YS.prototype.setManifestType=YS.prototype.setManifestType;YS.prototype.setSequenceMode=YS.prototype.setSequenceMode;YS.prototype.parseInit=YS.prototype.parseInit;var o_=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ur["text/vtt"]=function(){return new YS};ur['text/vtt; codecs="vtt"']=function(){return new YS};ur['text/vtt; codecs="wvtt"']=function(){return new YS};function a_(){this.g=null}a_.prototype.parseInit=function(e){var t=this,r=!1;(new Ri).box("moov",Ni).box("trak",Ni).box("mdia",Ni).T("mdhd",(function(e){e=qa(e.reader,e.version);t.g=e.timescale})).box("minf",Ni).box("stbl",Ni).T("stsd",Li).box("wvtt",(function(){r=!0})).parse(e);if(!this.g)throw new De(2,2,2008);if(!r)throw new De(2,2,2008)};a_.prototype.setSequenceMode=function(){};a_.prototype.setManifestType=function(){};a_.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new De(2,2,2008);var r=0,n=[],i,o=[],a=!1,s=!1,l=!1,c=null;(new Ri).box("moof",Ni).box("traf",Ni).T("tfdt",(function(e){a=!0;r=Ma(e.reader,e.version).baseMediaDecodeTime})).T("tfhd",(function(e){c=La(e.reader,e.flags).ig})).T("trun",(function(e){s=!0;n=Ua(e.reader,e.version,e.flags).Dg})).box("mdat",qi((function(e){l=!0;i=e}))).parse(e,!1);if(!l&&!a&&!s)throw new De(2,2,2008);e=r;for(var p=new Ai(i,0),d=u(n),h=d.next();!h.done;h=d.next()){h=h.value;var m=h.vf||c,f=h.ve?r+h.ve:e;e=f+(m||0);var g=0;do{var y=p.N();g+=y;var b=p.N(),v=null;"vttc"==Hi(b)?8<y&&(v=p.Ib(y-8)):p.skip(y-8);m&&v&&(y=s_(v,t.periodStart+f/this.g,t.periodStart+e/this.g),o.push(y))}while(h.sampleSize&&g<h.sampleSize)}return o.filter(ke)};function s_(e,t,r){var n,i,o;(new Ri).box("payl",qi((function(e){n=Di(e)}))).box("iden",qi((function(e){i=Di(e)}))).box("sttg",qi((function(e){o=Di(e)}))).parse(e);return n?l_(n,i,o,t,r):null}function l_(e,t,r,n,i){n=new Et(n,i,"");JS(e,n,new Map);t&&(n.id=t);if(r)for(e=new jg(r),t=Lg(e);t;)t_(n,t,[]),Rg(e),t=Lg(e);return n}V("shaka.text.Mp4VttParser",a_);a_.prototype.parseMedia=a_.prototype.parseMedia;a_.prototype.setManifestType=a_.prototype.setManifestType;a_.prototype.setSequenceMode=a_.prototype.setSequenceMode;a_.prototype.parseInit=a_.prototype.parseInit;ur['application/mp4; codecs="wvtt"']=function(){return new a_};function c_(){}c_.prototype.parseInit=function(){};c_.prototype.setSequenceMode=function(){};c_.prototype.setManifestType=function(){};c_.prototype.parseMedia=function(e){var t=Di(e).replace(/\r+/g,"");t=t.trim();e=[];if(""==t)return e;t=u(t.split("\n\n"));for(var r=t.next();!r.done;r=t.next()){r=r.value.split("\n");var n=new jg(r[0]),i=u_(n),o=Ng(n,/,/g);n=u_(n);if(null==i||null==o||null==n)throw new De(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new Et(i,n,r.slice(1).join("\n").trim()))}return e};function u_(e){e=Ng(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null==e)return null;var t=Number(e[2]),r=Number(e[3]);return 59<t||59<r?null:Number(e[4])/1e3+r+60*t+3600*(Number(e[1])||0)}V("shaka.text.SbvTextParser",c_);c_.prototype.parseMedia=c_.prototype.parseMedia;c_.prototype.setManifestType=c_.prototype.setManifestType;c_.prototype.setSequenceMode=c_.prototype.setSequenceMode;c_.prototype.parseInit=c_.prototype.parseInit;ur["text/x-subviewer"]=function(){return new c_};function p_(){this.g=new YS}p_.prototype.parseInit=function(){};p_.prototype.setSequenceMode=function(){};p_.prototype.setManifestType=function(){};p_.prototype.parseMedia=function(e,t){e=Di(e);e=d_(e);e=ut(Oi(e));return this.g.parseMedia(e,t)};function d_(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,"");e=e.trim();e=u(e.split("\n\n"));for(var r=e.next();!r.done;r=e.next())r=r.value.split(/\n/),r[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),t+=r.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}V("shaka.text.SrtTextParser",p_);p_.srt2webvtt=d_;p_.prototype.parseMedia=p_.prototype.parseMedia;p_.prototype.setManifestType=p_.prototype.setManifestType;p_.prototype.setSequenceMode=p_.prototype.setSequenceMode;p_.prototype.parseInit=p_.prototype.parseInit;ur["text/srt"]=function(){return new p_};function h_(){}h_.prototype.parseInit=function(){};h_.prototype.setSequenceMode=function(){};h_.prototype.setManifestType=function(){};h_.prototype.parseMedia=function(e){var t="",r="";e=Di(e).split(/\r?\n\s*\r?\n/);e=u(e);for(var n=e.next();!n.done;n=e.next()){var i=y_.exec(n.value);i&&(n=i[1],i=i[2],"V4 Styles"==n||"V4+ Styles"==n?t=i:"Events"==n&&(r=i))}e=[];n=null;t=u(t.split(/\r?\n/));for(var o=t.next();!o.done;o=t.next())if(i=o.value,!/^\s*;/.test(i)&&(o=b_.exec(i)))if(i=o[1].trim(),o=o[2].trim(),"Format"==i)n=o.split(v_);else if("Style"==i){i=o.split(v_);o={};for(var a=0;a<n.length&&a<i.length;a++)o[n[a]]=i[a];e.push(o)}n=[];t=null;i={};r=u(r.split(/\r?\n/));for(o=r.next();!o.done;i={Je:i.Je},o=r.next())if(o=o.value,!/^\s*;/.test(o)&&(a=b_.exec(o)))if(o=a[1].trim(),a=a[2].trim(),"Format"==o)t=a.split(v_);else if("Dialogue"==o){a=a.split(v_);o={};for(var s=0;s<t.length&&s<a.length;s++)o[t[s]]=a[s];s=g_(o.Start);var l=g_(o.End);a=new Et(s,l,a.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,""));i.Je=o.Style;(o=e.find(function(e){return function(t){return t.Name==e.Je}}(i)))&&m_(a,o);n.push(a)}return n};function m_(e,t){var r=t.Fontname;r&&(e.fontFamily=r);if(r=t.Fontsize)e.fontSize=r+"px";if(r=t.PrimaryColour)if(r=f_(r))e.color=r;if(r=t.BackColour)if(r=f_(r))e.backgroundColor=r;t.Bold&&(e.fontWeight=700);t.Italic&&(e.fontStyle="italic");t.Underline&&e.textDecoration.push("underline");if(r=t.Spacing)e.letterSpacing=r+"px";if(r=t.Alignment)switch(parseInt(r,10)){case 1:e.displayAlign=Ct;e.textAlign="start";break;case 2:e.displayAlign=Ct;e.textAlign=xt;break;case 3:e.displayAlign=Ct;e.textAlign="end";break;case 5:e.displayAlign="before";e.textAlign="start";break;case 6:e.displayAlign="before";e.textAlign=xt;break;case 7:e.displayAlign="before";e.textAlign="end";break;case 9:e.displayAlign="center";e.textAlign="start";break;case 10:e.displayAlign="center";e.textAlign=xt;break;case 11:e.displayAlign="center",e.textAlign="end"}if(t=t.AlphaLevel)e.opacity=parseFloat(t)}function f_(e){e=parseInt(e.replace("&H",""),16);return 0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function g_(e){e=w_.exec(e);return 3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}V("shaka.text.SsaTextParser",h_);h_.prototype.parseMedia=h_.prototype.parseMedia;h_.prototype.setManifestType=h_.prototype.setManifestType;h_.prototype.setSequenceMode=h_.prototype.setSequenceMode;h_.prototype.parseInit=h_.prototype.parseInit;var y_=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,b_=/^\s*([^:]+):\s*(.*)/,v_=/\s*,\s*/,w_=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ur["text/x-ssa"]=function(){return new h_};function E_(e,t){var r=e[t+1]&1?7:9;return t+r<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-r,0<e)?{Yd:r,U:e}:null}function S_(e,t){var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=(e[t+2]&60)>>>2;if(n>r.length-1)return null;var i=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;o|=(e[t+3]&192)>>>6;return{sampleRate:r[n],channelCount:o,Ga:"mp4a.40."+i}}function __(e,t){if(t+1<e.length&&255===e[t]&&240===(e[t+1]&246)){var r=e[t+1]&1?7:9;if(t+r>=e.length)return!1;var n=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;if(n<=r)return!1;t+=n;return t===e.length||t+1<e.length&&255===e[t]&&240===(e[t+1]&246)}return!1}function x_(e){this.i=e;this.h=0;this.g=new Map}n=x_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]?rt(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(er(t)||"mp4a.40.2")+'"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){for(var i=ut(e),o=Na(i),a=o.length;a<i.length&&!__(i,a);a++);e=1e3*r.endTime;o=Ra(o);o.length&&r&&(r=o.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(e=r.data);r=S_(i,a);if(!r)return Promise.reject(new De(2,3,3018));t.audioSamplingRate=r.sampleRate;t.channelsCount=r.channelCount;for(o=[];a<i.length;){var s=E_(i,a);if(!s)return Promise.reject(new De(2,3,3018));var l=s.Yd+s.U;a+l<=i.length&&o.push({data:i.subarray(a+s.Yd,a+l),size:s.U,duration:1024,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});a+=l}i=r.sampleRate;e=Math.floor(e*i/1e3);n={id:t.id,type:"audio",codecs:r.Ga,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:i,duration:n,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:o},stream:t};e=new Qy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=e.initSegment(),this.g.set(t.id,n));t=tb(e);this.h++;t=Yi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.AacTransmuxer",x_);x_.prototype.transmux=x_.prototype.transmux;x_.prototype.getOrginalMimeType=x_.prototype.getOrginalMimeType;x_.prototype.convertCodecs=x_.prototype.convertCodecs;x_.prototype.isSupported=x_.prototype.isSupported;x_.prototype.destroy=x_.prototype.destroy;Bt("audio/aac",(function(){return new x_("audio/aac")}),Wt);function D_(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var r=e[t+4]>>6;if(3<=r)return null;var n=e[t+4]&63,i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*n+r];if(t+i>e.length)return null;var o=e[t+6]>>5,a=0;2===o?a+=2:(o&1&&1!==o&&(a+=2),o&4&&(a+=2));a=(e[t+6]<<8|e[t+7])>>12-a&1;var s=e[t+5]&7;e=new Uint8Array([r<<6|e[t+5]>>3<<1|s>>2,(s&3)<<6|o<<3|a<<2|n>>4,n<<4&224]);return{sampleRate:[48e3,44100,32e3][r],channelCount:[2,1,2,3,3,4,4,5][o]+a,ia:e,U:i}}function C_(e,t){if(11===e[t]&&119===e[t+1]){var r=0,n=5;t+=n;for(var i,o;0<n;){o=e[t];var a=Math.min(n,8),s=8-a;i=4278190080>>>24+s<<s;i=(o&i)>>s;r=r?r<<a|i:i;t+=1;n-=a}if(16>r)return!0}return!1}function T_(e){this.i=e;this.h=0;this.g=new Map}n=T_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]?rt(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ac-3"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){e=ut(e);for(var i=Na(e),o=i.length;o<e.length&&!C_(e,o);o++);var a=1e3*r.endTime;i=Ra(i);i.length&&r&&(r=i.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(a=r.data);r=0;i=new Uint8Array([]);for(var s=[];o<e.length;){var l=D_(e,o);if(!l)return Promise.reject(new De(2,3,3018));t.audioSamplingRate=l.sampleRate;t.channelsCount=l.channelCount;r=l.sampleRate;i=l.ia;s.push({data:e.subarray(o,o+l.U),size:l.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});o+=l.U}e=Math.floor(a*r/1e3);n={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:n,ab:[],ia:i,Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:s},stream:t};e=new Qy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=e.initSegment(),this.g.set(t.id,n));t=tb(e);this.h++;t=Yi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.Ac3Transmuxer",T_);T_.prototype.transmux=T_.prototype.transmux;T_.prototype.getOrginalMimeType=T_.prototype.getOrginalMimeType;T_.prototype.convertCodecs=T_.prototype.convertCodecs;T_.prototype.isSupported=T_.prototype.isSupported;T_.prototype.destroy=T_.prototype.destroy;Bt("audio/ac3",(function(){return new T_("audio/ac3")}),Wt);function O_(e,t){if(t+8>e.length||2935!==(e[t]<<8|e[t+1]<<0))return null;var r=new Va(e.subarray(t+2));Ga(r,2);Ga(r,3);var n=Ka(r,11)+1<<1,i=Ka(r,2);if(3==i){i=Ka(r,2);i=[24e3,22060,16e3][i];var o=3}else i=[48e3,44100,32e3][i],o=Ka(r,2);var a=Ka(r,3),s=Ka(r,1);r=Ka(r,5);if(t+n>e.byteLength)return null;e=Math.floor(n*i/(16*[1,2,3,6][o]));e=new Uint8Array([(e&8160)>>5,(e&31)<<3,i<<6|r<<1|0,0|a<<1|s<<0,0]);return{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][a]+s,ia:e,U:n}}function k_(e){this.i=e;this.h=0;this.g=new Map}n=k_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]?rt(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){e=ut(e);for(var i=Na(e),o=i.length;o<e.length&&2935!==(e[o]<<8|e[o+1]<<0);o++);var a=1e3*r.endTime;i=Ra(i);i.length&&r&&(r=i.find((function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description})))&&(a=r.data);r=0;i=new Uint8Array([]);for(var s=[];o<e.length;){var l=O_(e,o);if(!l)return Promise.reject(new De(2,3,3018));t.audioSamplingRate=l.sampleRate;t.channelsCount=l.channelCount;r=l.sampleRate;i=l.ia;s.push({data:e.subarray(o,o+l.U),size:l.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});o+=l.U}e=Math.floor(a*r/1e3);n={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:n,ab:[],ia:i,Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:s},stream:t};e=new Qy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=e.initSegment(),this.g.set(t.id,n));t=tb(e);this.h++;t=Yi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.Ec3Transmuxer",k_);k_.prototype.transmux=k_.prototype.transmux;k_.prototype.getOrginalMimeType=k_.prototype.getOrginalMimeType;k_.prototype.convertCodecs=k_.prototype.convertCodecs;k_.prototype.isSupported=k_.prototype.isSupported;k_.prototype.destroy=k_.prototype.destroy;Bt("audio/ec3",(function(){return new k_("audio/ec3")}),Wt);function P_(e){if(!e.length)return null;var t=e.find((function(e){return 7==e.type}));e=e.find((function(e){return 8==e.type}));if(!t||!e)return null;var r=new Va(t.data),n=Ka(r,8);Ka(r,8);Ka(r,8);Xa(r);if(I_.includes(n)&&(n=Ya(r),3===n&&Ga(r,1),Xa(r),Xa(r),Ga(r,1),1===Ka(r,1))){n=3!==n?8:12;for(var i=0;i<n;i++)1===Ka(r,1)&&(6>i?Qa(r,16):Qa(r,64))}Xa(r);n=Ya(r);if(0===n)Ya(r);else if(1===n)for(Ga(r,1),Xa(r),Xa(r),n=Ya(r),i=0;i<n;i++)Xa(r);Xa(r);Ga(r,1);n=Ya(r);var o=Ya(r),a=Ka(r,1);0===a&&Ga(r,1);Ga(r,1);var s=i=0,l=0,c=0;1===Ka(r,1)&&(i=Ya(r),s=Ya(r),l=Ya(r),c=Ya(r));r=(2-a)*(o+1)*16-2*l-2*c;n=16*(n+1)-2*i-2*s;i=[];t=t.Ab;i.push(t.byteLength>>>8&255);i.push(t.byteLength&255);i=i.concat.apply(i,p(t));t=[];e=e.Ab;t.push(e.byteLength>>>8&255);t.push(e.byteLength&255);t=t.concat.apply(t,p(e));e=new Uint8Array([1,i[3],i[4],i[5],255,225].concat(i,[1],t));return{height:r,width:n,Da:e}}function A_(e){var t=!1,r=new Uint8Array([]),n=e.find((function(e){return 7==e.type})),i=!1;e=u(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var a=!1;switch(o.type){case 1:a=i=!0;var s=o.data;n&&4<s.length&&(s=Ja(new Va(s)),2===s||4===s||7===s||9===s)&&(t=!0);break;case 5:t=a=i=!0;break;case 6:a=!0;break;case 7:a=!0;break;case 8:a=!0;break;case 9:i=a=!0;break;case 12:a=!0;break;default:a=!1}i&&a&&(a=o.Ab.byteLength,s=new Uint8Array(4),s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=a&255,r=Yi(r,s,o.Ab))}return r.byteLength?{data:r,vg:t}:null}var I_=[100,110,122,244,44,83,86,118,128,138,139,134];function j_(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,i=e[t+2]>>4&15,o=e[t+2]>>2&3;if(1!==r&&0!==i&&15!==i&&3!==o){var a=e[t+3]>>6;i=1e3*N_[14*(3===r?3-n:3===n?3:4)+i-1];o=L_[3*(3===r?0:2===r?1:2)+o];r=M_[r][n];var s=q_[n],l=Math.floor(r*i/o+(e[t+2]>>1&1))*s,c=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);(c=c?parseInt(c[1],10):0)&&87>=c&&2===n&&224e3<=i&&0===a&&(e[t+3]|=128);return{sampleRate:o,channelCount:3===a?1:2,U:l,wi:8*r*s}}return null}function R_(e,t){return 255===e[t]&&224===(e[t+1]&224)&&0!==(e[t+1]&6)}var N_=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],L_=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],M_=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],q_=[0,1,1,4];function U_(e){this.i=e;this.h=0;this.g=new Map}n=U_.prototype;n.destroy=function(){this.g.clear()};n.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]?rt(this.convertCodecs("audio",e)):!1};n.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t};n.getOrginalMimeType=function(){return this.i};n.transmux=function(e,t,r,n){e=ut(e);for(r=Na(e).length;r<e.length;r++){var i=r;if(i+1<e.length&&R_(e,i)){var o=j_(e,i),a=4;o&&o.U&&(a=o.U);i+=a;i=i===e.length||i+1<e.length&&R_(e,i)}else i=!1;if(i)break}var s;for(i=[];r<e.length;){o=j_(e,r);if(!o)return Promise.reject(new De(2,3,3018));s||(s=o);r+o.U<=e.length&&i.push({data:e.subarray(r,r+o.U),size:o.U,duration:1152,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});r+=o.U}if(!s)return Promise.reject(new De(2,3,3018));e=9e4*s.wi/s.sampleRate*this.h;n={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:s.sampleRate,duration:n,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.h,baseMediaDecodeTime:e,$a:i},stream:t};s=new Qy([n]);this.g.has(t.id)?n=this.g.get(t.id):(n=s.initSegment(),this.g.set(t.id,n));t=tb(s);this.h++;t=Yi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.Mp3Transmuxer",U_);U_.prototype.transmux=U_.prototype.transmux;U_.prototype.getOrginalMimeType=U_.prototype.getOrginalMimeType;U_.prototype.convertCodecs=U_.prototype.convertCodecs;U_.prototype.isSupported=U_.prototype.isSupported;U_.prototype.destroy=U_.prototype.destroy;Bt("audio/mpeg",(function(){return new U_("audio/mpeg")}),Wt);function H_(e){this.h=e;this.g=null}n=H_.prototype;n.destroy=function(){};n.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=er(e).split(","),r=je("audio",t);t=je("video",t);return!r||t||"mp3"!=Zt(r)?!1:rt(this.convertCodecs("audio",e))};n.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t};n.getOrginalMimeType=function(){return this.h};n.transmux=function(e){this.g?this.g.clearData():this.g=new Za;e=ut(e);var t=this.g.parse(e);e=t.Rd();if("mp3"!=e.audio||e.video)return Promise.reject(new De(2,3,3018));e=new Uint8Array([]);t=u(t.Zb());for(var r=t.next();!r.done;r=t.next())if(r=r.value.data)for(var n=0;n<r.length;){var i=j_(r,n);i?(n+i.U<=r.length&&(e=Yi(e,r.subarray(n,n+i.U))),n+=i.U):n++}return Promise.resolve(e)};V("shaka.transmuxer.MpegTsTransmuxer",H_);H_.prototype.transmux=H_.prototype.transmux;H_.prototype.getOrginalMimeType=H_.prototype.getOrginalMimeType;H_.prototype.convertCodecs=H_.prototype.convertCodecs;H_.prototype.isSupported=H_.prototype.isSupported;H_.prototype.destroy=H_.prototype.destroy;Bt("video/mp2t",(function(){return new H_("video/mp2t")}),Gt);function F_(e){this.h=e;(this.g=Eg.get("ISOBoxer")())&&B_(this)}function B_(e){function t(){this._procFullBox();this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8));this._procField("sample_count","uint",32);this._procEntries("entry",this.sample_count,(function(e){this._procEntryField(e,"InitializationVector","data",8);this.flags&2&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,(function(e){this._procEntryField(e,"BytesOfClearData","uint",16);this._procEntryField(e,"BytesOfEncryptedData","uint",32)})))}))}e.g.addBoxProcessor("saio",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("entry_count","uint",32);this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}));e.g.addBoxProcessor("saiz",(function(){this._procFullBox();this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32));this._procField("default_sample_info_size","uint",8);this._procField("sample_count","uint",32);0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}));e.g.addBoxProcessor("senc",t);e.g.addBoxProcessor("uuid",(function(){for(var e=!0,r=0;16>r;r++)this.usertype[r]!==V_[r]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))}))}n=F_.prototype;n.destroy=function(){};n.isSupported=function(e,t){var r=e.startsWith("mss/");if(!this.g||!r)return!1;if(t)return rt(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return rt(t)||rt(e)};n.convertCodecs=function(e,t){return t.replace("mss/","")};n.getOrginalMimeType=function(){return this.h};n.transmux=function(e,t,r){if(!r)return Promise.resolve(ut(e));if(!t.mssPrivateData)return Promise.reject(new De(2,3,3020));try{var n,i=this.g.parseBuffer(e),o=i.fetch("tfhd");o.track_ID=t.id+1;var a=i.fetch("tfdt"),s=i.fetch("traf");null===a&&(a=this.g.createFullBox("tfdt",s,o),a.version=1,a.flags=0,a.baseMediaDecodeTime=Math.floor(r.startTime*t.mssPrivateData.timescale));var l=i.fetch("trun"),c=i.fetch("tfxd");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var u=i.fetch("tfrf");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var p=i.fetch("sepiff");if(null!==p){p.type="senc";p.usertype=void 0;var d=i.fetch("saio");if(null===d){d=this.g.createFullBox("saio",s);d.version=0;d.flags=0;d.entry_count=1;d.offset=[0];var h=this.g.createFullBox("saiz",s);h.version=0;h.flags=0;h.sample_count=p.sample_count;h.default_sample_info_size=0;h.sample_info_size=[];if(p.flags&2)for(n=0;n<p.sample_count;n+=1)h.sample_info_size[n]=10+6*p.entry[n].NumberOfEntries;else h.default_sample_info_size=8}}o.flags&=16777214;o.flags|=131072;l.flags|=1;var m=i.fetch("moof");l.data_offset=m.getLength()+8;var f=i.fetch("saio");null!==f&&(f.offset[0]=z_(m,"traf")+z_(s,"senc")+16);var g=ut(i.write());return Promise.resolve(g)}catch(e){return e instanceof De?Promise.reject(e):Promise.reject(new De(2,3,3022))}};function z_(e,t){for(var r=8,n=0;n<e.boxes.length&&e.boxes[n].type!==t;n++)r+=e.boxes[n].size;return r}V("shaka.transmuxer.MssTransmuxer",F_);F_.prototype.transmux=F_.prototype.transmux;F_.prototype.getOrginalMimeType=F_.prototype.getOrginalMimeType;F_.prototype.convertCodecs=F_.prototype.convertCodecs;F_.prototype.isSupported=F_.prototype.isSupported;F_.prototype.destroy=F_.prototype.destroy;var V_=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);Bt("mss/audio/mp4",(function(){return new F_("mss/audio/mp4")}),Wt);Bt("mss/video/mp4",(function(){return new F_("mss/video/mp4")}),Wt);function W_(e){var t=this;this.m=e;this.j=Eg.get("muxjs")();this.h=this.g=null;this.l=[];this.i=!1;this.j&&(this.g=new this.j.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",(function(e){t.l.push(Yi(e.initSegment,e.data))})),this.g.on("done",(function(){var e=Yi.apply(Vi,p(t.l));t.h.resolve(e);t.i=!1})))}n=W_.prototype;n.destroy=function(){this.g&&this.g.dispose();this.g=null};n.isSupported=function(e,t){var r="mp2t"==e.toLowerCase().split(";")[0].split("/")[1];if(!this.j||!r)return!1;if(t)return rt(G_(t,e));t=G_("audio",e);e=G_("video",e);return rt(t)||rt(e)};n.convertCodecs=function(e,t){return"mp2t"==t.toLowerCase().split(";")[0].split("/")[1]?G_(e,t):t};function G_(e,t){t=t.replace(/mp2t/i,"mp4");"audio"==e&&(t=t.replace("video","audio"));if(e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var r="avc1.",n=e[1],i=Number(e[2]);r=("66"==n?r+"4200":"77"==n?r+"4d00":r+"6400")+(i>>4).toString(16);r+=(i&15).toString(16);t=t.replace(e[0],r)}return t}n.getOrginalMimeType=function(){return this.m};n.transmux=function(e){this.i=!0;this.h=new Vn;this.l=[];e=ut(e);this.g.push(e);this.g.flush();this.i&&this.h.reject(new De(2,3,3018));return this.h};V("shaka.transmuxer.MuxjsTransmuxer",W_);W_.prototype.transmux=W_.prototype.transmux;W_.prototype.getOrginalMimeType=W_.prototype.getOrginalMimeType;W_.prototype.convertCodecs=W_.prototype.convertCodecs;W_.prototype.isSupported=W_.prototype.isSupported;W_.prototype.destroy=W_.prototype.destroy;Bt("video/mp2t",(function(){return new W_("video/mp2t")}),Wt);function K_(e){this.j=e;this.g=0;this.h=new Map;this.i=null}n=K_.prototype;n.destroy=function(){this.h.clear()};n.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var r=er(e).split(","),n=je("audio",r);r=je("video",r);if(n&&r||n&&(n=Zt(n),!$_.includes(n))||r&&(n=Zt(r),!X_.includes(n)))return!1;if(t)return rt(this.convertCodecs(t,e));t=this.convertCodecs("audio",e);e=this.convertCodecs("video",e);return rt(t)||rt(e)};n.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=er(t).replace("mp4a.40.34","mp3"),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t};n.getOrginalMimeType=function(){return this.j};n.transmux=function(e,t,r,n,i){this.i?this.i.clearData():this.i=new Za;e=ut(e);var o=this.i.parse(e);e=[];var a=o.Rd();try{r=null;if("video"==i){switch(a.video){case"avc":for(var s=[],l=null,c=[],p=o.Xd(),d=0;d<p.length;d++){var h=p[d],m=void 0;d+1<p.length&&(m=p[d+1]);var f=o.rf(h,m);c=c.concat(f);var g=A_(f);g&&(null==l&&(l=h.dts),m=void 0,m=d+1<p.length?(p[d+1].dts||0)-(h.dts||0):(h.dts||0)-(p[d-1].dts||0),s.push({data:g.data,size:g.data.byteLength,duration:m,zb:Math.round((h.pts||0)-(h.dts||0)),flags:{Eb:0,qb:0,pb:0,jb:0,kb:g.vg?2:1,Fb:g.vg?0:1}}))}var y=P_(c);if(!y||null==l)throw new De(2,3,3018);t.height=y.height;t.width=y.width;r={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:n,ab:[],ia:new Uint8Array([]),Da:y.Da,data:{Kb:this.g,baseMediaDecodeTime:l,$a:s},stream:t}}r&&(e.push(r),r=null)}if("audio"==i){switch(a.audio){case"aac":for(var b=[],v,w=null,E=u(o.Zb()),S=E.next();!S.done;S=E.next()){var _=S.value,x=_.data;if(x){o=0;v=S_(x,o);if(!v)throw new De(2,3,3018);t.audioSamplingRate=v.sampleRate;t.channelsCount=v.channelCount;null==w&&null!==_.pts&&(w=_.pts);for(;o<x.length;){var D=E_(x,o);if(D){var C=D.Yd+D.U;o+C<=x.length&&b.push({data:x.subarray(o+D.Yd,o+C),size:D.U,duration:1024,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}});o+=C}else o++}}}if(!v||null==w)throw new De(2,3,3018);var T=v.sampleRate;o=w/9e4*T;r={id:t.id,type:"audio",codecs:v.Ga,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:T,duration:n,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:o,$a:b},stream:t};break;case"ac3":w=[];v=0;b=new Uint8Array([]);T=null;for(var O=u(o.Zb()),k=O.next();!k.done;k=O.next()){var P=k.value,A=P.data;null==T&&null!==P.pts&&(T=P.pts);for(o=0;o<A.length;){var I=D_(A,o);I?(t.audioSamplingRate=I.sampleRate,t.channelsCount=I.channelCount,v=I.sampleRate,b=I.ia,w.push({data:A.subarray(o,o+I.U),size:I.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}}),o+=I.U):o++}}if(0==v||0==b.byteLength||null==T)throw new De(2,3,3018);o=T/9e4*v;r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:v,duration:n,ab:[],ia:b,Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:o,$a:w},stream:t};break;case"ec3":b=[];v=0;w=new Uint8Array([]);T=null;for(var j=u(o.Zb()),R=j.next();!R.done;R=j.next()){var N=R.value,L=N.data;null==T&&null!==N.pts&&(T=N.pts);for(o=0;o<L.length;){var M=O_(L,o);M?(t.audioSamplingRate=M.sampleRate,t.channelsCount=M.channelCount,v=M.sampleRate,w=M.ia,b.push({data:L.subarray(o,o+M.U),size:M.U,duration:1536,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}}),o+=M.U):o++}}if(0==v||0==w.byteLength||null==T)throw new De(2,3,3018);o=T/9e4*v;r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:v,duration:n,ab:[],ia:w,Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:o,$a:b},stream:t};break;case"mp3":b=[];var q;w=null;for(var U=u(o.Zb()),H=U.next();!H.done;H=U.next()){var F=H.value,B=F.data;if(B)for(null==w&&null!==F.pts&&(w=F.pts),o=0;o<B.length;){var z=j_(B,o);z?(q||(q=z),o+z.U<=B.length&&b.push({data:B.subarray(o,o+z.U),size:z.U,duration:1152,zb:0,flags:{Eb:0,qb:0,pb:0,jb:0,kb:2,Fb:0}}),o+=z.U):o++}}if(!q||null==w)throw new De(2,3,3018);var V=q.sampleRate;o=w/9e4*V;r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:V,duration:n,ab:[],ia:new Uint8Array([]),Da:new Uint8Array([]),data:{Kb:this.g,baseMediaDecodeTime:o,$a:b},stream:t}}r&&e.push(r)}}catch(e){return Promise.reject(e)}if(!e.length)return Promise.reject(new De(2,3,3018));e=new Qy(e);this.h.has(t.id)?n=this.h.get(t.id):(n=e.initSegment(),this.h.set(t.id,n));t=tb(e);this.g++;t=Yi(n,t);return Promise.resolve(t)};V("shaka.transmuxer.TsTransmuxer",K_);K_.prototype.transmux=K_.prototype.transmux;K_.prototype.getOrginalMimeType=K_.prototype.getOrginalMimeType;K_.prototype.convertCodecs=K_.prototype.convertCodecs;K_.prototype.isSupported=K_.prototype.isSupported;K_.prototype.destroy=K_.prototype.destroy;var $_=["aac","ac-3","ec-3","mp3"],X_=["avc"];Bt("video/mp2t",(function(){return new K_("video/mp2t")}),Kt);function Y_(){}var Q_;function J_(){Q_?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Q_=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Z_):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Z_(e,t){var r=this,n;return L((function(i){if(1==i.g)return console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),S(i,Q_.call(r,e,t),2);n=i.h;if(ux(n))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Q_,i.return(n);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=ex;return i.return(ex.call(r,e,t))}))}function ex(e,t){var r=this,n,i,o,a,s,l,c,p,d,h;return L((function(m){if(1==m.g){console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess');n=cx(e);i=[];o=u(t);for(a=o.next();!a.done;a=o.next())s=a.value,l=tx(s.videoCapabilities,n),c=tx(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!l.length||s.audioCapabilities&&s.audioCapabilities.length&&!c.length||(p=Object.assign({},s),p.videoCapabilities=l,p.audioCapabilities=c,i.push(p));if(!i.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return S(m,Q_.call(r,e,i),2)}h=m.h;return m.return(new lx(h,n))}))}function tx(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}V("EmeEncryptionSchemePolyfill",Y_);Y_.install=J_;function rx(){}var nx;function ix(){nx?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(nx=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ox):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function ox(e){var t=this,r,n,i;return L((function(o){switch(o.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(o,nx.call(t,e),2);case 2:r=o.h;if(!e.keySystemConfiguration)return o.return(r);if((n=r.keySystemAccess)&&ux(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=nx,o.return(r);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.mediaCapabilities.decodingInfo=ax;if(n){o.D(3);break}i=r;return S(o,sx(e),4);case 4:return i.keySystemAccess=o.h,o.return(r);case 3:return o.return(ax.call(t,e))}}))}function ax(e){var t=this,r,n,i,o,a,s,l,c;return L((function(u){switch(u.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),r=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,o=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,r=cx(i),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=r||a&&a!=r)?u.return(s):S(u,nx.call(t,e),2);case 2:l=u.h;if(l.keySystemAccess){l.keySystemAccess=new lx(l.keySystemAccess,r);u.D(3);break}if(!e.keySystemConfiguration){u.D(3);break}c=l;return S(u,sx(e),5);case 5:c.keySystemAccess=u.h;case 3:return u.return(l)}}))}function sx(e){var t,r;return L((function(n){if(1==n.g){var i=e.keySystemConfiguration,o=[],a=[];i.audio&&o.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType});i.video&&a.push({robustness:i.video.robustness||"",contentType:e.video.contentType});i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes};o.length&&(i.audioCapabilities=o);a.length&&(i.videoCapabilities=a);t=i;return S(n,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}r=n.h;return n.return(r)}))}V("McEncryptionSchemePolyfill",rx);rx.install=ix;function lx(e,t){this.h=e;this.g=t;this.keySystem=e.keySystem}lx.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),r=t.next();!r.done;r=t.next())r.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=u(e.audioCapabilities),r=t.next();!r.done;r=t.next())r.value.encryptionScheme=this.g;return e};lx.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function cx(e){if(e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3"))return"cenc";if(e.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!");return null}function ux(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return(e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&void 0!==e.encryptionScheme?!0:!1}function px(){}function dx(){J_();ix()}V("EncryptionSchemePolyfills",px);px.install=dx;"undefined"!==typeof r&&r.exports&&(r.exports=px);for(var hx={ach:{u:"Lwo",A:"Acholi"},ady:{u:"Адыгэбзэ",A:"Adyghe"},af:{u:"Afrikaans",A:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",A:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",A:"Afrikaans (South Africa)"},ak:{u:"Tɕɥi",A:"Akan"},ar:{u:"العربية",A:"Arabic"},"ar-AR":{u:"العربية",A:"Arabic"},"ar-MA":{u:"العربية",A:"Arabic (Morocco)"},"ar-SA":{u:"العربية (السعودية)",A:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",A:"Aymara"},az:{u:"Azərbaycan dili",A:"Azerbaijani"},"az-AZ":{u:"Azərbaycan dili",A:"Azerbaijani"},"be-BY":{u:"Беларуская",A:"Belarusian"},bg:{u:"Български",A:"Bulgarian"},"bg-BG":{u:"Български",A:"Bulgarian"},bn:{u:"বাংলা",A:"Bengali"},"bn-IN":{u:"বাংলা (ভারত)",A:"Bengali (India)"},"bn-BD":{u:"বাংলা(বাংলাদেশ)",A:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",A:"Bosnian"},ca:{u:"Català",A:"Catalan"},"ca-ES":{u:"Català",A:"Catalan"},cak:{u:"Maya Kaqchikel",A:"Kaqchikel"},"ck-US":{u:"ᏣᎳᎩ (tsalagi)",A:"Cherokee"},cs:{u:"Čeština",A:"Czech"},"cs-CZ":{u:"Čeština",A:"Czech"},cy:{u:"Cymraeg",A:"Welsh"},"cy-GB":{u:"Cymraeg",A:"Welsh"},da:{u:"Dansk",A:"Danish"},"da-DK":{u:"Dansk",A:"Danish"},de:{u:"Deutsch",A:"German"},"de-AT":{u:"Deutsch (Österreich)",A:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",A:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",A:"German (Switzerland)"},dsb:{u:"Dolnoserbšćina",A:"Lower Sorbian"},el:{u:"Ελληνικά",A:"Greek"},"el-GR":{u:"Ελληνικά",A:"Greek (Greece)"},en:{u:"English",A:"English"},"en-GB":{u:"English (UK)",A:"English (UK)"},"en-AU":{u:"English (Australia)",A:"English (Australia)"},"en-CA":{u:"English (Canada)",A:"English (Canada)"},"en-IE":{u:"English (Ireland)",A:"English (Ireland)"},"en-IN":{u:"English (India)",A:"English (India)"},"en-PI":{u:"English (Pirate)",A:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",A:"English (Upside Down)"},"en-US":{u:"English (US)",A:"English (US)"},"en-ZA":{u:"English (South Africa)",A:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",A:"English (Pirate)"},eo:{u:"Esperanto",A:"Esperanto"},"eo-EO":{u:"Esperanto",A:"Esperanto"},es:{u:"Español",A:"Spanish"},"es-AR":{u:"Español (Argentine)",A:"Spanish (Argentina)"},"es-419":{u:"Español (Latinoamérica)",A:"Spanish (Latin America)"},"es-CL":{u:"Español (Chile)",A:"Spanish (Chile)"},"es-CO":{u:"Español (Colombia)",A:"Spanish (Colombia)"},"es-EC":{u:"Español (Ecuador)",A:"Spanish (Ecuador)"},"es-ES":{u:"Español (España)",A:"Spanish (Spain)"},"es-LA":{u:"Español (Latinoamérica)",A:"Spanish (Latin America)"},"es-NI":{u:"Español (Nicaragua)",A:"Spanish (Nicaragua)"},"es-MX":{u:"Español (México)",A:"Spanish (Mexico)"},"es-US":{u:"Español (Estados Unidos)",A:"Spanish (United States)"},"es-VE":{u:"Español (Venezuela)",A:"Spanish (Venezuela)"},et:{u:"eesti keel",A:"Estonian"},"et-EE":{u:"Eesti (Estonia)",A:"Estonian (Estonia)"},eu:{u:"Euskara",A:"Basque"},"eu-ES":{u:"Euskara",A:"Basque"},fa:{u:"فارسی",A:"Persian"},"fa-IR":{u:"فارسی",A:"Persian"},"fb-LT":{u:"Leet Speak",A:"Leet"},ff:{u:"Fulah",A:"Fulah"},fi:{u:"Suomi",A:"Finnish"},"fi-FI":{u:"Suomi",A:"Finnish"},"fo-FO":{u:"Føroyskt",A:"Faroese"},fr:{u:"Français",A:"French"},"fr-CA":{u:"Français (Canada)",A:"French (Canada)"},"fr-FR":{u:"Français (France)",A:"French (France)"},"fr-BE":{u:"Français (Belgique)",A:"French (Belgium)"},"fr-CH":{u:"Français (Suisse)",A:"French (Switzerland)"},"fy-NL":{u:"Frysk",A:"Frisian (West)"},ga:{u:"Gaeilge",A:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",A:"Irish (Gaelic)"},gl:{u:"Galego",A:"Galician"},"gl-ES":{u:"Galego",A:"Galician"},"gn-PY":{u:"Avañe'ẽ",A:"Guarani"},"gu-IN":{u:"ગુજરાતી",A:"Gujarati"},"gx-GR":{u:"Ἑλληνική ἀρχαία",A:"Classical Greek"},he:{u:"עברית‏",A:"Hebrew"},"he-IL":{u:"עברית‏",A:"Hebrew"},hi:{u:"हिन्दी",A:"Hindi"},"hi-IN":{u:"हिन्दी",A:"Hindi"},hr:{u:"Hrvatski",A:"Croatian"},"hr-HR":{u:"Hrvatski",A:"Croatian"},hsb:{u:"Hornjoserbšćina",A:"Upper Sorbian"},ht:{u:"Kreyòl",A:"Haitian Creole"},hu:{u:"Magyar",A:"Hungarian"},"hu-HU":{u:"Magyar",A:"Hungarian"},"hy-AM":{u:"Հայերեն",A:"Armenian"},id:{u:"Bahasa Indonesia",A:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",A:"Indonesian"},is:{u:"Íslenska",A:"Icelandic"},"is-IS":{u:"Íslenska (Iceland)",A:"Icelandic (Iceland)"},it:{u:"Italiano",A:"Italian"},"it-IT":{u:"Italiano",A:"Italian"},ja:{u:"日本語",A:"Japanese"},"ja-JP":{u:"日本語",A:"Japanese"},"jv-ID":{u:"Basa Jawa",A:"Javanese"},"ka-GE":{u:"ქართული",A:"Georgian"},"kk-KZ":{u:"Қазақша",A:"Kazakh"},km:{u:"ភាសាខ្មែរ",A:"Khmer"},"km-KH":{u:"ភាសាខ្មែរ",A:"Khmer"},kab:{u:"Taqbaylit",A:"Kabyle"},kn:{u:"ಕನ್ನಡ",A:"Kannada"},"kn-IN":{u:"ಕನ್ನಡ (India)",A:"Kannada (India)"},ko:{u:"한국어",A:"Korean"},"ko-KR":{u:"한국어 (韩国)",A:"Korean (Korea)"},ku:{u:"Kurdî",A:"Kurdish"},"ku-TR":{u:"Kurdî",A:"Kurdish"},la:{u:"Latin",A:"Latin"},"la-VA":{u:"Latin",A:"Latin"},lb:{u:"Lëtzebuergesch",A:"Luxembourgish"},"li-NL":{u:"Lèmbörgs",A:"Limburgish"},lt:{u:"Lietuvių",A:"Lithuanian"},"lt-LT":{u:"Lietuvių",A:"Lithuanian"},lv:{u:"Latviešu",A:"Latvian"},"lv-LV":{u:"Latviešu",A:"Latvian"},mai:{u:"मैथिली, মৈথিলী",A:"Maithili"},"mg-MG":{u:"Malagasy",A:"Malagasy"},mk:{u:"Македонски",A:"Macedonian"},"mk-MK":{u:"Македонски (Македонски)",A:"Macedonian (Macedonian)"},ml:{u:"മലയാളം",A:"Malayalam"},"ml-IN":{u:"മലയാളം",A:"Malayalam"},"mn-MN":{u:"Монгол",A:"Mongolian"},mr:{u:"मराठी",A:"Marathi"},"mr-IN":{u:"मराठी",A:"Marathi"},ms:{u:"Bahasa Melayu",A:"Malay"},"ms-MY":{u:"Bahasa Melayu",A:"Malay"},mt:{u:"Malti",A:"Maltese"},"mt-MT":{u:"Malti",A:"Maltese"},my:{u:"ဗမာစကာ",A:"Burmese"},nb:{u:"Norsk (bokmål)",A:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokmål)",A:"Norwegian (bokmal)"},ne:{u:"नेपाली",A:"Nepali"},"ne-NP":{u:"नेपाली",A:"Nepali"},nl:{u:"Nederlands",A:"Dutch"},"nl-BE":{u:"Nederlands (België)",A:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",A:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",A:"Norwegian (nynorsk)"},no:{u:"Norsk",A:"Norwegian"},oc:{u:"Occitan",A:"Occitan"},"or-IN":{u:"ଓଡ଼ିଆ",A:"Oriya"},pa:{u:"ਪੰਜਾਬੀ",A:"Punjabi"},"pa-IN":{u:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",A:"Punjabi (India)"},pl:{u:"Polski",A:"Polish"},"pl-PL":{u:"Polski",A:"Polish"},"ps-AF":{u:"پښتو",A:"Pashto"},pt:{u:"Português",A:"Portuguese"},"pt-BR":{u:"Português (Brasil)",A:"Portuguese (Brazil)"},"pt-PT":{u:"Português (Portugal)",A:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",A:"Quechua"},"rm-CH":{u:"Rumantsch",A:"Romansh"},ro:{u:"Română",A:"Romanian"},"ro-RO":{u:"Română",A:"Romanian"},ru:{u:"Русский",A:"Russian"},"ru-RU":{u:"Русский",A:"Russian"},"sa-IN":{u:"संस्कृतम्",A:"Sanskrit"},"se-NO":{u:"Davvisámegiella",A:"Northern Sámi"},"si-LK":{u:"පළාත",A:"Sinhala (Sri Lanka)"},sk:{u:"Slovenčina",A:"Slovak"},"sk-SK":{u:"Slovenčina (Slovakia)",A:"Slovak (Slovakia)"},sl:{u:"Slovenščina",A:"Slovenian"},"sl-SI":{u:"Slovenščina",A:"Slovenian"},"so-SO":{u:"Soomaaliga",A:"Somali"},sq:{u:"Shqip",A:"Albanian"},"sq-AL":{u:"Shqip",A:"Albanian"},sr:{u:"Српски",A:"Serbian"},"sr-RS":{u:"Српски (Serbia)",A:"Serbian (Serbia)"},su:{u:"Basa Sunda",A:"Sundanese"},sv:{u:"Svenska",A:"Swedish"},"sv-SE":{u:"Svenska",A:"Swedish"},sw:{u:"Kiswahili",A:"Swahili"},"sw-KE":{u:"Kiswahili",A:"Swahili (Kenya)"},ta:{u:"தமிழ்",A:"Tamil"},"ta-IN":{u:"தமிழ்",A:"Tamil"},te:{u:"తెలుగు",A:"Telugu"},"te-IN":{u:"తెలుగు",A:"Telugu"},tg:{u:"забо́ни тоҷикӣ́",A:"Tajik"},"tg-TJ":{u:"тоҷикӣ",A:"Tajik"},th:{u:"ภาษาไทย",A:"Thai"},"th-TH":{u:"ภาษาไทย (ประเทศไทย)",A:"Thai (Thailand)"},tl:{u:"Filipino",A:"Filipino"},"tl-PH":{u:"Filipino",A:"Filipino"},tlh:{u:"tlhIngan-Hol",A:"Klingon"},tr:{u:"Türkçe",A:"Turkish"},"tr-TR":{u:"Türkçe",A:"Turkish"},"tt-RU":{u:"татарча",A:"Tatar"},uk:{u:"Українська",A:"Ukrainian"},"uk-UA":{u:"Українська",A:"Ukrainian"},ur:{u:"اردو",A:"Urdu"},"ur-PK":{u:"اردو",A:"Urdu"},uz:{u:"O'zbek",A:"Uzbek"},"uz-UZ":{u:"O'zbek",A:"Uzbek"},vi:{u:"Tiếng Việt",A:"Vietnamese"},"vi-VN":{u:"Tiếng Việt",A:"Vietnamese"},"xh-ZA":{u:"isiXhosa",A:"Xhosa"},yi:{u:"ייִדיש",A:"Yiddish"},"yi-DE":{u:"ייִדיש (German)",A:"Yiddish (German)"},zh:{u:"中文",A:"Chinese"},"zh-HANS":{u:"中文简体",A:"Chinese Simplified"},"zh-HANT":{u:"中文繁體",A:"Chinese Traditional"},"zh-CN":{u:"中文（中国）",A:"Chinese Simplified (China)"},"zh-HK":{u:"中文（香港）",A:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"中文（新加坡）",A:"Chinese Simplified (Singapore)"},"zh-TW":{u:"中文（台灣）",A:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",A:"Zulu"}},mx=u(Object.keys(hx)),fx=mx.next();!fx.done;fx=mx.next()){var gx=fx.value;hx[gx.toLowerCase()]=hx[gx]}function yx(e,t){var r=this;this.parent=e;this.controls=t;this.eventManager=new fi;this.localization=this.controls.ya;this.player=this.controls.zc();this.video=this.controls.Tb();this.adManager=this.player.Qd();this.ad=t.getAd();this.eventManager.o(this.adManager,"ad-started",(function(e){r.ad=e.ad}));this.eventManager.o(this.adManager,"ad-stopped",(function(){r.ad=null}))}yx.prototype.release=function(){this.eventManager.release();this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null};V("shaka.ui.Element",yx);yx.prototype.release=yx.prototype.release;function bx(e){return vx(e,"shaka-back-to-overflow-button")}function vx(e,t){e=e.getElementsByClassName(t);return e.length?e[0]:null}function wx(e){e&&(e=vx(e,"shaka-chosen-item"))&&e.parentElement.focus()}function Ex(){var e=Dc("i");e.classList.add("material-icons-round");e.classList.add("shaka-chosen-item");e.textContent="done";e.ariaHidden="true";return e}function Sx(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function _x(e,t){var r=Math.floor(e/3600),n=Math.floor(e/60%60);e=Math.floor(e%60);10>e&&(e="0"+e);e=n+":"+e;t&&(10>n&&(e="0"+e),e=r+":"+e);return e}function xx(e,t){yx.call(this,e,t);var r=this;this.i=Dc("div");this.i.classList.add("shaka-ad-counter");this.parent.appendChild(this.i);this.h=Dc("span");this.h.classList.add("shaka-ad-counter-span");this.i.appendChild(this.h);this.g=new dr((function(){var e=Math.round(r.ad.getRemainingTime()),t=r.ad.getDuration();-1!=e&&-1!=t&&(0<e?(e=_x(t-e,!1)+" / "+_x(t,!1),1<r.ad.getSequenceLength()?r.h.textContent=e:(t=r.localization.resolve("AD_TIME"),r.h.textContent=t.replace("[AD_TIME]",e))):(r.g.stop(),r.h.textContent=""))}));this.eventManager.o(this.localization,"locale-updated",(function(){}));this.eventManager.o(this.localization,"locale-changed",(function(){}));this.eventManager.o(this.adManager,"ad-started",(function(){r.g.Ca();r.g.ha(.5)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){r.g.stop();r.h.textContent=""}));this.ad&&(this.g.Ca(),this.g.ha(.5))}b(xx,yx);xx.prototype.release=function(){this.g.stop();this.g=null;yx.prototype.release.call(this)};V("shaka.ui.AdCounter",xx);function Dx(e,t){yx.call(this,e,t);var r=this;this.g=Dc("div");this.g.classList.add("shaka-ad-position");Sx(this.g,!1);this.parent.appendChild(this.g);this.h=Dc("span");this.h.classList.add("shaka-ad-position-span");this.g.appendChild(this.h);this.eventManager.o(this.localization,"locale-updated",(function(){r.ad&&Cx(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){r.ad&&Cx(r)}));this.eventManager.o(this.adManager,"ad-started",(function(){Cx(r)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){r.h.textContent="";Sx(r.g,!1)}));this.ad&&Cx(this)}b(Dx,yx);function Cx(e){var t=e.ad.getSequenceLength();if(1<t){var r=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(r)).replace("[NUM_ADS]",String(t));Sx(e.g,!0)}}V("shaka.ui.AdPosition",Dx);function Tx(e,t){yx.call(this,e,t);var r=this;this.button=Cc();this.parent.appendChild(this.button);this.eventManager.o(this.localization,"locale-updated",(function(){r.g()}));this.eventManager.o(this.localization,"locale-changed",(function(){r.g()}));this.eventManager.o(this.video,"play",(function(){r.g();r.h()}));this.eventManager.o(this.video,"pause",(function(){r.g();r.h()}));this.eventManager.o(this.video,"seeking",(function(){r.g();r.h()}));this.eventManager.o(this.adManager,"ad-paused",(function(){r.g();r.h()}));this.eventManager.o(this.adManager,"ad-resumed",(function(){r.g();r.h()}));this.eventManager.o(this.adManager,"ad-started",(function(){r.g();r.h()}));this.eventManager.o(this.button,"click",(function(){r.ad&&r.ad.isLinear()?Qx(r.controls):Yx(r.controls)}));this.ad&&(this.g(),this.h())}b(Tx,yx);Tx.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.s.paused&&!e.X;return e};Tx.prototype.g=function(){};Tx.prototype.h=function(){};V("shaka.ui.PlayButton",Tx);function Ox(e,t){Tx.call(this,e,t);this.button.classList.add("shaka-play-button");this.button.classList.add("shaka-no-propagation");this.h();this.g()}b(Ox,Tx);Ox.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")};Ox.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)};V("shaka.ui.BigPlayButton",Ox);function kx(t,r){yx.call(this,t,r);var n=this;this.j=this.controls.h;this.h=this.controls.g;this.i=[];this.g=Dc("div");this.g.classList.add("shaka-no-propagation");this.g.classList.add("shaka-context-menu");this.g.classList.add("shaka-hidden");this.h.appendChild(this.g);this.eventManager.o(this.h,"contextmenu",(function(e){if(n.g.classList.contains("shaka-hidden")){e.preventDefault();var t=n.h.getBoundingClientRect();n.g.style.left=e.clientX-t.left+"px";n.g.style.top=e.clientY-t.top+"px";Sx(n.g,!0)}else Sx(n.g,!1)}));this.eventManager.o(e,"click",(function(){Sx(n.g,!1)}));Ax(this)}b(kx,yx);kx.prototype.release=function(){this.h=null;for(var e=u(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[];yx.prototype.release.call(this)};function Px(e,t){Ix.set(e,t)}function Ax(e){for(var t=u(e.j.contextMenuElements),r=t.next();!r.done;r=t.next()){r=r.value;var n=Ix.get(r);n?e.i.push(n.create(e.g,e.controls)):Q("Unrecognized context menu element:",r)}}V("shaka.ui.ContextMenu",kx);kx.registerElement=Px;var Ix=new Map;function jx(e,t,r,n){yx.call(this,e,t);var i=this;this.container=Dc("div");this.container.classList.add("shaka-range-container");this.container.classList.add.apply(this.container.classList,p(r));this.h=!1;this.bar=document.createElement("input");this.C=new dr((function(){i.onChangeEnd();i.h=!1}));this.bar.classList.add("shaka-range-element");this.bar.classList.add.apply(this.bar.classList,p(n));this.bar.type="range";this.bar.step="any";this.bar.min="0";this.bar.max="1";this.bar.value="0";this.container.appendChild(this.bar);this.parent.appendChild(this.container);this.eventManager.o(this.bar,"mousedown",(function(){i.controls.ic()&&(i.h=!0,i.onChangeStart())}));this.eventManager.o(this.bar,"touchstart",(function(e){i.controls.ic()&&(i.h=!0,Rx(i,e),i.onChangeStart())}));this.eventManager.o(this.bar,"input",(function(){i.onChange()}));this.eventManager.o(this.bar,"touchmove",(function(e){i.h&&(Rx(i,e),i.onChange())}));this.eventManager.o(this.bar,"touchend",(function(e){i.h&&(i.h=!1,Rx(i,e),i.onChangeEnd())}));this.eventManager.o(this.bar,"touchcancel",(function(e){i.h&&(i.h=!1,Rx(i,e),i.onChangeEnd())}));this.eventManager.o(this.bar,"mouseup",(function(){i.h&&(i.h=!1,i.onChangeEnd())}));this.eventManager.o(this.bar,"blur",(function(){i.h&&(i.h=!1,i.onChangeEnd())}));this.eventManager.o(this.bar,"contextmenu",(function(e){e.preventDefault();e.stopPropagation()}))}b(jx,yx);n=jx.prototype;n.release=function(){this.C&&(this.C.stop(),this.C=null);yx.prototype.release.call(this)};n.setRange=function(e,t){this.bar.min=e;this.bar.max=t};n.onChangeStart=function(){};n.onChange=function(){};n.onChangeEnd=function(){};n.changeTo=function(e){this.h||(this.h=!0,this.onChangeStart());var t=parseFloat(this.bar.min),r=parseFloat(this.bar.max);this.bar.value=e>r?r:e<t?t:e;this.onChange();this.C.R(.5)};n.getValue=function(){return parseFloat(this.bar.value)};n.setValue=function(e){this.h||(this.bar.value=e)};function Rx(e,t){t.preventDefault();var r=t.changedTouches[0],n=e.bar.getBoundingClientRect();t=parseFloat(e.bar.min);var i=parseFloat(e.bar.max);r=t+(i-t)/n.width*(r.clientX-n.left);r<t?r=t:r>i&&(r=i);e.bar.value=r}V("shaka.ui.RangeElement",jx);jx.prototype.setValue=jx.prototype.setValue;jx.prototype.getValue=jx.prototype.getValue;jx.prototype.changeTo=jx.prototype.changeTo;jx.prototype.onChangeEnd=jx.prototype.onChangeEnd;jx.prototype.onChange=jx.prototype.onChange;jx.prototype.onChangeStart=jx.prototype.onChangeStart;jx.prototype.setRange=jx.prototype.setRange;function Nx(e,t){jx.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var r=this;this.B=Dc("div");this.B.classList.add("shaka-ad-markers");this.container.insertBefore(this.B,this.container.childNodes[0]);this.F=this.controls.h;this.l=new dr((function(){var e=r.getValue();r.player.S()||e==r.video.duration&&(e-=.001);r.video.currentTime=e}));this.G=new dr((function(){Lx(r)}));this.I=!1;this.i=Dc("div");this.i.id="shaka-player-ui-thumbnail-container";this.g=Dc("img");this.g.id="shaka-player-ui-thumbnail-image";this.g.draggable=!1;this.m=Dc("div");this.m.id="shaka-player-ui-thumbnail-time";this.i.appendChild(this.g);this.i.appendChild(this.m);this.container.appendChild(this.i);this.H=!1;this.j=new dr((function(){Bx(r)}));this.s=[];this.eventManager.o(this.localization,"locale-updated",(function(){return Ux(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){return Ux(r)}));this.eventManager.o(this.adManager,"ad-started",(function(){qx(r)||Sx(r.container,!1)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){qx(r)&&Sx(r.container,!0)}));this.eventManager.o(this.adManager,"ad-cue-points-changed",(function(e){r.s=e.cuepoints;Mx(r)}));this.eventManager.o(this.player,"unloading",(function(){r.s=[];Mx(r)}));this.eventManager.o(this.bar,"mousemove",(function(e){if(r.player.Td().length){var t=r.bar.getBoundingClientRect(),n=parseFloat(r.bar.min);e=e.clientX-t.left;Hx(r,e,Math.round(n+(parseFloat(r.bar.max)-n)/t.width*e))}else Bx(r)}));this.eventManager.o(this.container,"mouseleave",(function(){r.j.stop();r.j.R(.25)}));this.setValue(this.video.currentTime);this.update();Ux(this);this.ad&&Sx(this.container,!1)}b(Nx,jx);n=Nx.prototype;n.release=function(){this.l&&(this.l.stop(),this.l=null,this.G.stop(),this.G=null);jx.prototype.release.call(this)};n.onChangeStart=function(){this.I=!this.video.paused;this.controls.Ef(!0);this.video.pause();this.j.stop();this.H=!0};n.onChange=function(){if(this.video.duration)if(this.update(),this.l.R(.125),this.player.Td().length){var e=parseFloat(this.bar.min),t=parseFloat(this.bar.max),r=this.bar.getBoundingClientRect(),n=Math.round(this.getValue());Hx(this,(n-e)/((t-e)/r.width),n)}else Bx(this)};n.onChangeEnd=function(){this.l.Ca();this.controls.Ef(!1);this.I&&this.video.play();this.H&&(this.H=!1,this.j.stop(),this.j.R(.25))};n.isShowing=function(){return!this.container.classList.contains("shaka-hidden")};n.update=function(){var e=this.F.seekBarColors,t=this.getValue(),r=this.video.buffered.length,n=r?this.video.buffered.start(0):0,i=r?this.video.buffered.end(r-1):0,o=this.player.Aa(),a=o.end-o.start;this.setRange(o.start,o.end);qx(this)?(Sx(this.container,!0),0==r?this.container.style.background=e.base:(r=(Math.max(n,o.start)-o.start)/a||0,i=(Math.min(i,o.end)-o.start)/a||0,t=(Math.min(Math.max(t,o.start),o.end)-o.start)/a||0,this.container.style.background="linear-gradient("+["to right",(this.F.showUnbufferedStart?e.base:e.played)+" "+100*r+"%",e.played+" "+100*r+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*i+"%",e.base+" "+100*i+"%"].join()+")")):Sx(this.container,!1)};function Lx(e){if(e.s.length){for(var t=e.player.Aa(),r=t.end-t.start,n=["to right"],i=[],o=e.F.seekBarColors.adBreaks,a=!1,s=u(e.s),l=s.next();!l.done;l=s.next())if(l=l.value,-1!=l.start||l.end||(a=!0),l.start>=t.start&&l.start<t.end&&!(l.end&&l.end>t.end)){var c=(l.start-t.start)/r||0,p=c+.01;l.end&&(p=(l.end-t.start)/r||0);i.push({start:c,end:p})}t=u(i);for(l=t.next();!l.done;l=t.next())r=l.value,n.push("transparent "+100*r.start+"%"),n.push(o+" "+100*r.start+"%"),n.push(o+" "+100*r.end+"%"),n.push("transparent "+100*r.end+"%");a&&(n.push("transparent 99%"),n.push(o+" 99%"));e.B.style.background="linear-gradient("+n.join(",")+")"}else e.B.style.background="transparent"}function Mx(e){Lx(e);var t=e.player.Aa();t=t.end-t.start;e.player.S()&&5<t&&e.G.ha(1)}function qx(e){var t=e.player.Aa();t=t.end-t.start;return e.player.S()&&5>t?!1:null==e.ad||!e.ad.isLinear()}function Ux(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function Hx(e,t,r){var n,i,o,a,s,l,c,u,p,d;L((function(h){if(1==h.g){n=Fx(e);if(!n)return Bx(e),h.return();0>r&&(r=0);i=e.player.Aa();o=Math.max(Math.ceil(i.start),Math.min(Math.floor(i.end),r));return S(h,e.player.pg(n.id,o),2)}a=h.h;if(!a||!a.uris.length)return Bx(e),h.return();e.player.S()?(s=i.end-r,e.m.textContent=1>s?e.localization.resolve("LIVE"):"-"+zx(s)):e.m.textContent=zx(r);l=e.i.clientWidth;c=Math.floor(9*l/16);e.i.style.height=c+"px";e.i.style.top=-(c- -10)+"px";u=Math.min(e.bar.offsetWidth-l,Math.max(0,t-l/2));e.i.style.left=u+"px";e.i.style.visibility="visible";p=a.uris[0].split("#xywh=")[0];if(p!==e.g.src){try{e.i.removeChild(e.g)}catch(e){}e.g=Dc("img");e.g.id="shaka-player-ui-thumbnail-image";e.g.draggable=!1;e.g.src=p;e.i.insertBefore(e.g,e.i.firstChild)}d=l/a.width;a.imageHeight?e.g.height=a.imageHeight:a.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain");a.imageWidth?e.g.width=a.imageWidth:a.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain");e.g.style.left="-"+d*a.positionX+"px";e.g.style.top="-"+d*a.positionY+"px";e.g.style.transform="scale("+d+")";e.g.style.transformOrigin="left top";c=Math.floor(l*a.height/a.width);e.i.style.height=c+"px";e.i.style.top=-(c- -10)+"px";_(h)}))}function Fx(e){var t=e.player.Td();if(!t.length)return null;for(var r={},n=u(["image/avif","image/webp","image/jpeg","image/png","image/svg+xml"]),i=n.next();!i.done;r={Fe:r.Fe,De:r.De},i=n.next())if(r.Fe=i.value,r.De=e.player.getStats().estimatedBandwidth,(i=t.filter(function(e){return function(t){return t.mimeType.toLowerCase()===e.Fe&&t.bandwidth<.01*e.De}}(r)).sort((function(e,t){return t.bandwidth-e.bandwidth})))&&i.length)return i[0];return t[0]}function Bx(e){e.i.style.visibility="hidden";e.m.textContent=""}function zx(e){var t=Math.round(e);e=Math.floor(t/3600);var r=Math.floor((t-3600*e)/60);t=t-3600*e-60*r;10>t&&(t="0"+t);return 0<e?(10>r&&(r="0"+r),e+":"+r+":"+t):r+":"+t}V("shaka.ui.SeekBar",Nx);function Vx(){}Vx.prototype.create=function(e,t){return new Nx(e,t)};Nx.Factory=Vx;function Wx(e,t,r,n){oe.call(this);var i=this;this.P=!0;this.h=n;this.C=new Bd(r,e,this.h.castReceiverAppId,this.h.castAndroidReceiverCompatible);this.hb=!0;this.s=this.C.Tb();this.B=r;this.F=this.C.zc();this.xa=e;this.j=t;this.fb=this.F.Qd();this.l=this.m=null;this.X=!1;this.G=[];this.Pb=[];this.xb=!1;this.Y=new dr((function(){i.j.style.cursor="none";i.xb=!1;uD(i)}));this.$=new dr((function(){i.g.removeAttribute("shown");i.I.R(2)}));this.I=new dr((function(){for(var e=u(i.G),t=e.next();!t.done;t=e.next())Sx(t.value,!1)}));this.Ea=new dr((function(){i.ic()&&fD(i)}));this.J=null;this.H=[];this.ya=bD();this.i=new fi;this.configure(this.h);aD(this);this.ea=new Set;hD(this);this.Ea.ha(.125);this.i.o(this.ya,"locale-changed",(function(e){i.fb.setLocale(e.locales[0])}))}b(Wx,oe);n=Wx.prototype;n.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.B){t.D(2);break}return S(t,document.exitPictureInPicture(),2);case 2:e.i&&(e.i.release(),e.i=null);e.Y&&(e.Y.stop(),e.Y=null);e.$&&(e.$.stop(),e.$=null);e.I&&(e.I.stop(),e.I=null);e.Ea&&(e.Ea.stop(),e.Ea=null);Gx(e);e.g&&(e.j.removeChild(e.g),e.g=null);if(!e.C){t.D(4);break}return S(t,e.C.destroy(),5);case 5:e.C=null;case 4:if(!e.xa){t.D(6);break}return S(t,e.xa.destroy(),7);case 7:e.xa=null;case 6:e.F=null,e.B=null,e.s=null,e.ya=null,e.ea.clear(),oe.prototype.release.call(e),_(t)}}))};function Gx(e){for(var t=u(e.H),r=t.next();!r.done;r=t.next())r.value.release();e.H=[]}function Kx(e,t){vD.set(e,t)}n.Zg=function(e){this.hb=e;hD(this)};n.Zh=function(){uD(this)};n.configure=function(e){this.h=e;this.C.dg(e.castReceiverAppId,e.castAndroidReceiverCompatible);this.l&&(this.l=null);this.vb&&(this.vb=null);this.gb&&(this.gb=null);this.g?(Tc(this.g),Gx(this)):(Jx(this),oD(this));this.j.classList.add("shaka-video-container");this.B.classList.add("shaka-video");eD(this);this.h.addBigPlayButton&&Zx(this);this.h.customContextMenu&&(this.gb=new kx(this.V,this),this.H.push(this.gb));this.Z||rD(this);this.ib=Dc("div");this.ib.classList.add("shaka-server-side-ad-container");this.g.appendChild(this.ib);nD(this);this.G=Array.from(this.j.getElementsByClassName("shaka-settings-menu"));this.G.push.apply(this.G,p(Array.from(this.j.getElementsByClassName("shaka-overflow-menu"))));iD(this);this.Pb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over"));uD(this);e=u(this.j.getElementsByClassName("shaka-no-propagation"));for(var t=e.next();!t.done;t=e.next()){t=t.value;var r=function(e){return e.stopPropagation()};this.i.o(t,"click",r);this.i.o(t,"dblclick",r)}};n.Af=function(e){(this.P=e)?(this.j.setAttribute("shaka-controls","true"),this.B.tabIndex=-1,this.B.controls=!1):this.j.removeAttribute("shaka-controls");uD(this)};n.Ig=function(e){this.B.controls=e;this.B.tabIndex=e?0:-1;e&&this.Af(!1)};n.getAd=function(){return this.m};n.mh=function(){return this.C};n.yh=function(){return this.ya};n.Ph=function(){return this.j};n.Tb=function(){return this.s};n.xh=function(){return this.B};n.zc=function(){return this.F};n.wh=function(){return this.xa};n.rh=function(){return this.g};n.Ih=function(){return this.ib};n.oh=function(){return this.O};n.ph=function(){return this.h};n.Yh=function(){return this.X};n.Ef=function(e){this.X=e};n.Uh=function(){return this.hb};n.ng=function(){return this.l?this.l.getValue():this.s.currentTime};n.Jg=function(e){this.J=e};n.Ld=function(){return this.G.some((function(e){return!e.classList.contains("shaka-hidden")}))};n.Bc=function(){this.I.Ca()};n.$d=function(){return document.fullscreenEnabled||this.B.webkitSupportsFullscreen?!0:!1};n.Dc=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var e=this.B;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1};function $x(e){var t,r,n;return L((function(i){switch(i.g){case 1:x(i,2);if(!document.fullscreenEnabled){t=e.B;t.webkitSupportsFullscreen&&t.webkitEnterFullscreen();i.D(4);break}if(!document.pictureInPictureElement){i.D(5);break}return S(i,document.exitPictureInPicture(),5);case 5:return r=e.h.fullScreenElement,S(i,r.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!e.h.forceLandscapeOnFullscreen||!screen.orientation){i.D(4);break}x(i,9);return S(i,screen.orientation.lock("landscape"),11);case 11:C(i,4,2);break;case 9:T(i,2);case 4:C(i,0);break;case 2:n=T(i),e.dispatchEvent(new G("error",(new Map).set("detail",n))),_(i)}}))}function Xx(e){var t;return L((function(r){if(!document.fullscreenEnabled)return t=e.B,t.webkitSupportsFullscreen&&t.webkitExitFullscreen(),r.D(0);screen.orientation&&screen.orientation.unlock();return S(r,document.exitFullscreen(),0)}))}n.Jf=function(){var e=this;return L((function(t){return e.Dc()?S(t,Xx(e),0):S(t,$x(e),0)}))};n.Ng=function(){Sx(this.K,!0);Sx(this.O,!0);this.g.setAttribute("ad-active","true")};n.qg=function(){Sx(this.K,!1);Sx(this.O,!1);this.g.removeAttribute("ad-active")};function Yx(e){e.P&&e.s.duration&&(e.F.Pe(),e.s.paused&&!e.X?e.s.play():e.s.pause())}function Qx(e){e.m&&e.m.isPaused()?e.m.play():e.m&&e.m.pause()}function Jx(e){e.g=Dc("div");e.g.classList.add("shaka-controls-container");e.j.appendChild(e.g);e.j.setAttribute("shaka-controls","true");e.i.o(e.g,"touchstart",(function(t){e.s.duration&&(e.ic()?e.J=Date.now():(lD(e,t),t.cancelable&&t.preventDefault()))}),{passive:!1});e.i.o(e.g,"click",(function(){pD(e)}));e.i.o(e.g,"dblclick",(function(){e.h.doubleClickForFullscreen&&e.$d()&&e.Jf()}))}function Zx(e){var t=Dc("div");t.classList.add("shaka-play-button-container");e.g.appendChild(t);e.vb=new Ox(t,e);e.H.push(e.vb)}function eD(e){var t=Dc("div");t.classList.add("shaka-scrim-container");e.g.appendChild(t)}function tD(e){e.K=Dc("div");e.K.classList.add("shaka-ad-controls");var t=null!=e.m&&e.m.isLinear();Sx(e.K,t);e.L.appendChild(e.K);t=new Dx(e.K,e);e.H.push(t);t=new xx(e.K,e);e.H.push(t)}function rD(e){e.Z=Dc("div");e.Z.classList.add("shaka-spinner-container");e.j.appendChild(e.Z);var t=Dc("div");t.classList.add("shaka-spinner");e.Z.appendChild(t);e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("shaka-spinner-svg");e.setAttribute("viewBox","0 0 30 30");t.appendChild(e);t=document.createElementNS("http://www.w3.org/2000/svg","circle");t.classList.add("shaka-spinner-path");t.setAttribute("cx","15");t.setAttribute("cy","15");t.setAttribute("r","14.5");t.setAttribute("fill","none");t.setAttribute("stroke-width","1");t.setAttribute("stroke-miterlimit","10");e.appendChild(t)}function nD(e){e.L=Dc("div");e.L.classList.add("shaka-bottom-controls");e.L.classList.add("shaka-no-propagation");e.g.appendChild(e.L);e.i.o(e.L,"click",(function(t){t.target.closest(".shaka-overflow-button")||e.Bc()}));tD(e);e.V=Dc("div");e.V.classList.add("shaka-controls-button-panel");e.V.classList.add("shaka-show-controls-on-mouse-over");e.h.enableTooltips&&e.V.classList.add("shaka-tooltips-on");e.L.appendChild(e.V);for(var t=u(e.h.controlPanelElements),r=t.next();!r.done;r=t.next())r=r.value,vD.get(r)?(r=vD.get(r).create(e.V,e),e.H.push(r)):Q("Unrecognized control panel element requested:",r)}function iD(e){if(e.h.addSeekBar)e.l=wD.create(e.L,e),e.H.push(e.l);else{e=u(e.G);for(var t=e.next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}}function oD(e){e.O=Dc("div");e.O.classList.add("shaka-client-side-ad-container");Sx(e.O,!1);e.i.o(e.O,"click",(function(){pD(e)}));e.j.appendChild(e.O)}function aD(t){t.i.o(t.F,"buffering",(function(){t.P&&Sx(t.Z,t.F.pd())}));t.P&&Sx(t.Z,t.F.pd());t.i.o(e,"keydown",(function(e){gD(t,e)}));t.i.o(e,"click",(function(){return t.Bc()}));t.i.o(t,"submenuopen",(function(){t.Bc()}));t.i.o(t.s,"play",(function(){uD(t)}));t.i.o(t.s,"pause",(function(){uD(t)}));t.i.o(t.j,"mousemove",(function(e){lD(t,e)}));t.i.o(t.j,"touchmove",(function(e){lD(t,e)}),{passive:!0});t.i.o(t.j,"touchend",(function(e){lD(t,e)}),{passive:!0});t.i.o(t.j,"mouseleave",(function(){t.J||t.Y.Ca()}));t.i.o(t.C,"caststatuschanged",(function(){hD(t)}));t.i.o(t.j,"keydown",(function(e){var r=document.activeElement,n=r&&r.classList?r.classList.contains("shaka-volume-bar"):!1,i=r&&r.classList&&r.classList.contains("shaka-seek-bar");t.g.contains(r)&&lD(t,e);if(t.h.enableKeyboardPlaybackControls){r=t.h.keyboardSeekDistance;var o=t.h.keyboardLargeSeekDistance;switch(e.key){case"ArrowLeft":t.l&&!n&&0<r&&(e.preventDefault(),mD(t,t.l.getValue()-r));break;case"ArrowRight":t.l&&!n&&0<r&&(e.preventDefault(),mD(t,t.l.getValue()+r));break;case"PageDown":t.l&&i&&0<r&&(e.preventDefault(),mD(t,t.l.getValue()-o));break;case"PageUp":t.l&&i&&0<r&&(e.preventDefault(),mD(t,t.l.getValue()+o));break;case"Home":t.l&&mD(t,t.F.Aa().start);break;case"End":t.l&&mD(t,t.F.Aa().end);break;case" ":i&&dD(t)}}}));t.i.o(t.j,"keyup",(function(e){t.ea.delete(e.key)}));t.i.o(t.fb,"ad-started",(function(e){t.m=e.ad;t.Ng()}));t.i.o(t.fb,"ad-stopped",(function(){t.m=null;t.qg()}));screen.orientation&&t.i.o(screen.orientation,"change",(function(){return L((function(e){return S(e,sD(t),0)}))}))}function sD(e){return L((function(t){return e.s&&0!=e.s.readyState&&!e.C.sa()&&e.h.enableFullscreenOnRotation&&e.$d()?screen.orientation.type.includes("landscape")&&!e.Dc()?S(t,$x(e),0):screen.orientation.type.includes("portrait")&&e.Dc()?S(t,Xx(e),0):t.D(0):t.return()}))}function lD(e,t){"mousemove"==t.type&&(e.g.classList.remove("shaka-keyboard-navigation"),uD(e));"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.J=Date.now():e.J+1e3<Date.now()&&(e.J=null);e.J&&"mousemove"==t.type||(e.j.style.cursor="",e.xb=!0,e.I.stop(),e.ic()||(fD(e),uD(e)),e.Y.stop(),"touchend"!=t.type&&"keyup"!=t.type&&e.J||e.Y.R(3))}function cD(t){return e.matchMedia("hover: hover").matches?t.Pb.some((function(e){return e.matches(":hover")})):!1}function uD(e){var t=e.m?e.m.isPaused():!1,r=e.s.paused&&!e.X,n=e.g.classList.contains("shaka-keyboard-navigation");t||(!e.m||!e.m.isLinear())&&r||e.xb||n||cD(e)?(fD(e),e.g.setAttribute("shown","true"),e.$.stop()):e.$.R(e.h.fadeDelay)}function pD(e){e.P&&(e.Ld()?e.I.Ca():e.h.singleClickForPlayAndPause&&dD(e))}function dD(e){e.m&&e.m.isLinear()?Qx(e):Yx(e)}function hD(e){var t=e.C.sa();e.dispatchEvent(new G("caststatuschanged",(new Map).set("newStatus",t)));t?e.g.setAttribute("casting","true"):e.g.removeAttribute("casting")}n.ic=function(){return this.P?null!=this.g.getAttribute("shown")||null!=this.g.getAttribute("casting"):!1};function mD(e,t){e.l.changeTo(t);e.ic()&&fD(e)}function fD(e){if(e.l)if(e.l.setValue(e.s.currentTime),e.l.update(),e.l.isShowing())for(var t=u(e.G),r=t.next();!r.done;r=t.next())r.value.classList.remove("shaka-low-position");else for(t=u(e.G),r=t.next();!r.done;r=t.next())r.value.classList.add("shaka-low-position");e.dispatchEvent(new G("timeandseekrangeupdated"))}function gD(t,r){t.ea.add(r.key);var n=t.Ld();"Tab"==r.key&&(t.g.classList.add("shaka-keyboard-navigation"),uD(t),t.i.o(e,"mousedown",(function(){t.i.Lc(e,"mousedown")})));"Escape"==r.key&&t.I.Ca();n&&t.ea.has("Tab")&&yD(t,r)}function yD(e,t){var r=e.G.filter((function(e){return!e.classList.contains("shaka-hidden")}));if(r.length){var n=r[0];if(n.childNodes.length){for(r=n.firstElementChild;r&&r.classList.contains("shaka-hidden");)r=r.nextElementSibling;for(n=n.lastElementChild;n&&n.classList.contains("shaka-hidden");)n=n.previousElementSibling;var i=document.activeElement;e.ea.has("Shift")?i==r&&(t.preventDefault(),n.focus()):i==n&&(t.preventDefault(),r.focus())}}}function bD(){var e=new $e("en");e.ka("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_TIME","الإعلان: [AD_TIME]"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]]));e.ka("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]]));e.ka("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]]));e.ka("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]]));e.ka("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));e.ka("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]]));e.ka("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_TIME","Annonce : [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]]));e.ka("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]]));e.ka("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_TIME","広告: [AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]]));e.ka("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_TIME","광고: [AD_TIME]"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]]));e.ka("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]]));e.ka("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]]));e.ka("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anúncio: [AD_TIME]"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["RESOLUTION","Resolução"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]]));e.ka("ru",new Map([["AD_DURATION","Продолжительность рекламы"],["AD_PROGRESS","Реклама [AD_ON] из [NUM_ADS]"],["AD_TIME","Реклама: [AD_TIME]"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Субтитры"],["CAST","Транслировать..."],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Выкл."],["ON","Вкл."],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]]));e.ka("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_TIME","โฆษณา: [AD_TIME]"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]]));e.ka("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]]));e.ka("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_TIME","广告：[AD_TIME]"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]]));e.ka("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_TIME","廣告：[AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]]));e.cg(navigator.languages||[]);return e}V("shaka.ui.Controls",Wx);Wx.prototype.isOpaque=Wx.prototype.ic;Wx.prototype.hideAdUI=Wx.prototype.qg;Wx.prototype.showAdUI=Wx.prototype.Ng;Wx.prototype.toggleFullScreen=Wx.prototype.Jf;Wx.prototype.isFullScreenEnabled=Wx.prototype.Dc;Wx.prototype.isFullScreenSupported=Wx.prototype.$d;Wx.prototype.hideSettingsMenus=Wx.prototype.Bc;Wx.prototype.anySettingsMenusAreOpen=Wx.prototype.Ld;Wx.prototype.setLastTouchEventTime=Wx.prototype.Jg;Wx.prototype.getDisplayTime=Wx.prototype.ng;Wx.prototype.isCastAllowed=Wx.prototype.Uh;Wx.prototype.setSeeking=Wx.prototype.Ef;Wx.prototype.isSeeking=Wx.prototype.Yh;Wx.prototype.getConfig=Wx.prototype.ph;Wx.prototype.getClientSideAdContainer=Wx.prototype.oh;Wx.prototype.getServerSideAdContainer=Wx.prototype.Ih;Wx.prototype.getControlsContainer=Wx.prototype.rh;Wx.prototype.getLocalPlayer=Wx.prototype.wh;Wx.prototype.getPlayer=Wx.prototype.zc;Wx.prototype.getLocalVideo=Wx.prototype.xh;Wx.prototype.getVideo=Wx.prototype.Tb;Wx.prototype.getVideoContainer=Wx.prototype.Ph;Wx.prototype.getLocalization=Wx.prototype.yh;Wx.prototype.getCastProxy=Wx.prototype.mh;Wx.prototype.getAd=Wx.prototype.getAd;Wx.prototype.setEnabledNativeControls=Wx.prototype.Ig;Wx.prototype.setEnabledShakaControls=Wx.prototype.Af;Wx.prototype.configure=Wx.prototype.configure;Wx.prototype.loadComplete=Wx.prototype.Zh;Wx.prototype.allowCast=Wx.prototype.Zg;Wx.registerSeekBar=function(e){wD=e};Wx.registerElement=Kx;Wx.prototype.destroy=Wx.prototype.destroy;var vD=new Map,wD=new Vx;function ED(e,t){yx.call(this,e,t);var r=this;this.l=this.controls.h;this.j=this.controls.g;this.i=[];this.g=Cc();this.g.classList.add("shaka-overflow-menu-button");this.g.classList.add("shaka-no-propagation");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-tooltip");this.g.textContent="more_vert";this.parent.appendChild(this.g);this.h=Dc("div");this.h.classList.add("shaka-overflow-menu");this.h.classList.add("shaka-no-propagation");this.h.classList.add("shaka-show-controls-on-mouse-over");this.h.classList.add("shaka-hidden");this.j.appendChild(this.h);_D(this);this.eventManager.o(this.localization,"locale-updated",(function(){DD(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){DD(r)}));this.eventManager.o(this.adManager,"ad-started",(function(){r.ad&&r.ad.isLinear()&&Sx(r.g,!1)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){Sx(r.g,!0)}));this.eventManager.o(this.controls,"submenuopen",(function(){Sx(r.h,!1)}));this.eventManager.o(this.h,"touchstart",(function(e){r.controls.Jg(Date.now());e.stopPropagation()}));this.eventManager.o(this.g,"click",(function(){xD(r)}));DD(this);this.ad&&this.ad.isLinear()&&Sx(this.g,!1)}b(ED,yx);ED.prototype.release=function(){this.j=null;for(var e=u(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[];yx.prototype.release.call(this)};function SD(e,t){TD.set(e,t)}function _D(e){for(var t=u(e.l.overflowMenuButtons),r=t.next();!r.done;r=t.next())r=r.value,TD.get(r)?(r=TD.get(r),e.i.push(r.create(e.h,e.controls))):Q("Unrecognized overflow menu element requested:",r)}function xD(e){if(e.controls.Ld())e.controls.Bc();else{Sx(e.h,!0);uD(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};le(e.h.childNodes,t)&&ce(e.h.childNodes,t)[0].focus()}}function DD(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}V("shaka.ui.OverflowMenu",ED);ED.registerElement=SD;function CD(){}CD.prototype.create=function(e,t){return new ED(e,t)};Kx("overflow_menu",new CD);var TD=new Map;function OD(t,r){yx.call(this,t,r);var n=this;this.g=Cc();this.g.classList.add("shaka-airplay-button");this.g.classList.add("shaka-tooltip");this.g.ariaPressed="false";this.h=Dc("i");this.h.classList.add("material-icons-round");this.h.textContent="airplay";this.g.appendChild(this.h);e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden");t=Dc("label");t.classList.add("shaka-overflow-button-label");t.classList.add("shaka-overflow-menu-only");this.j=Dc("span");t.appendChild(this.j);this.i=Dc("span");this.i.classList.add("shaka-current-selection-span");t.appendChild(this.i);this.g.appendChild(t);this.parent.appendChild(this.g);PD(this);kD(this);this.eventManager.o(this.localization,"locale-updated",(function(){PD(n)}));this.eventManager.o(this.localization,"locale-changed",(function(){PD(n)}));this.eventManager.o(this.g,"click",(function(){n.controls.Tb().webkitShowPlaybackTargetPicker()}));t=this.controls.Tb();this.eventManager.o(t,"webkitplaybacktargetavailabilitychanged",(function(e){var t=n.player.Ve()==Kp;Sx(n.g,"available"==e.availability&&t)}));this.eventManager.o(t,"webkitcurrentplaybacktargetiswirelesschanged",(function(){kD(n)}))}b(OD,yx);function kD(e){var t=e.controls.Tb();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function PD(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY");e.j.textContent=e.localization.resolve("AIRPLAY")}V("shaka.ui.AirPlayButton",OD);function AD(){}AD.prototype.create=function(e,t){return new OD(e,t)};SD("airplay",new AD);Kx("airplay",new AD);function ID(e,t,r){this.i=e;this.j=t;this.h=jD(this);t.dataset.shakaPlayerContainer="";t.ui=this;this.$e()&&t.classList.add("shaka-mobile");this.g=new Wx(e,t,r,this.h);this.configure({});r.controls||e.Gf(t);t.ui=this;r.ui=this}n=ID.prototype;n.destroy=function(){var e=this;return L((function(t){if(1==t.g)return e.g?S(t,e.g.destroy(),2):t.D(2);if(4!=t.g)return e.g=null,e.i?S(t,e.i.destroy(),4):t.D(4);e.i=null;_(t)}))};n.$e=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:vr()&&1<navigator.maxTouchPoints};n.getConfiguration=function(){var e=jD(this);ru(e,this.h,jD(this),{},"");return e};n.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=nu(e,t));ru(this.h,e,jD(this),{},"");this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast");this.g.configure(this.h);this.g.dispatchEvent(new G("uiupdated"))};n.qh=function(){return this.g};n.Di=function(e){this.g.Af(e)};function jD(t){var r={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:MD,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:t.j};e.WebKitPlaybackTargetAvailabilityEvent&&r.overflowMenuButtons.push("airplay");t.$e()&&(r.addBigPlayButton=!0,r.controlPanelElements=r.controlPanelElements.filter((function(e){return"play_pause"!=e&&"volume"!=e})));return r}function RD(){var e,t,r,n,i,o,a,s,l,c,p,d,h,m,f,g,y,b,v,w,E;return L((function(D){switch(D.g){case 1:Aw();if(!Du())return ND("shaka-ui-load-failed",qD),D.return();e=document.querySelectorAll("[data-shaka-player-container]");t=document.querySelectorAll("[data-shaka-player]");r=document.querySelectorAll("[data-shaka-player-canvas]");if(!t.length&&!e.length){D.D(2);break}if(t.length&&!e.length){n=u(t);for(i=n.next();!i.done;i=n.next())if(o=i.value,!o.ui){a=document.createElement("div");s=o.parentElement;s.replaceChild(a,o);a.appendChild(o);l=null;c=u(r);for(p=c.next();!p.done;p=c.next())if(d=p.value,d.parentElement==a){l=d;break}l||(l=document.createElement("canvas"),l.classList.add("shaka-canvas-container"),a.appendChild(l));LD(a,o,l)}D.D(2);break}h=u(e);m=h.next();case 4:if(m.done){D.D(2);break}f=m.value;if(f.ui){D.D(5);break}g=null;y=u(t);for(i=y.next();!i.done;i=y.next())if(b=i.value,b.parentElement==f){g=b;break}g||(g=document.createElement("video"),g.setAttribute("playsinline",""),f.appendChild(g));v=null;w=u(r);for(p=w.next();!p.done;p=w.next())if(E=p.value,E.parentElement==f){v=E;break}v||(v=document.createElement("canvas"),v.classList.add("shaka-canvas-container"),f.appendChild(v));x(D,7);return S(D,LD(f,g,v),9);case 9:C(D,5);break;case 7:return T(D),ND("shaka-ui-load-failed",UD),D.return();case 5:m=h.next();D.D(4);break;case 2:ND("shaka-ui-loaded"),_(D)}}))}function ND(e,t){var r=null;void 0!=t&&(r={reasonCode:t});e=new CustomEvent(e,{detail:r});document.dispatchEvent(e)}function LD(e,t,r){var n,i,o,a,s,l,c,p,d;return L((function(h){switch(h.g){case 1:n=new Eu(t);i=new ID(n,e,t);n.Yf(r);o="";a=!1;e.dataset&&e.dataset.shakaPlayerCastReceiverId?(o=e.dataset.shakaPlayerCastReceiverId,a="true"===e.dataset.shakaPlayerCastAndroidReceiverCompatible):t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(o=t.dataset.shakaPlayerCastReceiverId,a="true"===t.dataset.shakaPlayerCastAndroidReceiverCompatible);o.length&&i.configure({castReceiverAppId:o,castAndroidReceiverCompatible:a});t.controls&&i.g.Ig(!0);if(s=t.getAttribute("src"))l=document.createElement("source"),l.setAttribute("src",s),t.appendChild(l),t.removeAttribute("src");c=u(t.querySelectorAll("source"));p=c.next();case 2:if(p.done){h.D(0);break}d=p.value;x(h,5);return S(h,i.g.zc().load(d.getAttribute("src")),7);case 7:h.D(0);break;case 5:T(h);case 3:p=c.next(),h.D(2)}}))}V("shaka.ui.Overlay",ID);ID.prototype.setEnabled=ID.prototype.Di;ID.prototype.getControls=ID.prototype.qh;ID.prototype.configure=ID.prototype.configure;ID.prototype.getConfiguration=ID.prototype.getConfiguration;ID.prototype.isMobile=ID.prototype.$e;ID.prototype.destroy=ID.prototype.destroy;var MD=0;ID.TrackLabelFormat={LANGUAGE:MD,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var qD=0,UD=1;ID.FailReasonCode={NO_BROWSER_SUPPORT:qD,PLAYER_FAILED_TO_LOAD:UD};"complete"==document.readyState?L((function(e){if(1==e.g)return S(e,Promise.resolve(),2);RD();_(e)})):e.addEventListener("load",RD);function HD(e,t,r,n,i,o,a){function s(e,t){return e+": "+t}function l(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var c=e.find((function(e){return 1==e.active})),p=bx(t);Tc(t);t.appendChild(p);p=new Map;for(var d=u(e),h=d.next();!h.done;h=d.next())h=h.value,p.has(h.language)||p.set(h.language,new Set),p.get(h.language).add(l(h));p=new Set;c=c?s(c.language,l(c)):"";d={};e=u(e);for(h=e.next();!h.done;d={cb:d.cb},h=e.next()){d.cb=h.value;h=d.cb.language;var m=d.cb.forced,f=o.resolve(Je.Tg),g=l(d.cb),y=s(h,g);if(!p.has(y)){p.add(y);var b=Cc();b.addEventListener("click",function(e){return function(){r(e.cb)}}(d));var v=Dc("span");b.appendChild(v);v.textContent=FD(h,o);switch(a){case MD:m&&(v.textContent+=" ("+f+")");break;case 1:g?v.textContent=g:(Q("Track #"+d.cb.id+" does not have a role, but the UI is configured to only show role."),v.textContent="?");m&&(v.textContent+=" ("+f+")");break;case 2:g&&(v.textContent+=": "+g);m&&(v.textContent+=" ("+f+")");break;case 3:d.cb.label?v.textContent=d.cb.label:(Q("Track #"+d.cb.id+" does not have a label, but the UI is configured to only show labels."),v.textContent="?")}n&&y==c&&(b.appendChild(Ex()),v.classList.add("shaka-chosen-item"),b.ariaSelected="true",i.textContent=v.textContent);t.appendChild(b)}}}function FD(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var r=Ve(e);return e in hx?hx[e].u:r in hx?hx[r].u+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function BD(e,t,r){yx.call(this,e,t);var n=this;zD(this,r);VD(this);WD(this);this.eventManager.o(this.button,"click",(function(){n.menu.classList.contains("shaka-hidden")?(n.controls.dispatchEvent(new G("submenuopen")),Sx(n.menu,!0),wx(n.menu)):Sx(n.menu,!1)}))}b(BD,yx);function zD(e,t){e.button=Cc();e.button.classList.add("shaka-overflow-button");e.icon=Dc("i");e.icon.classList.add("material-icons-round");e.icon.textContent=t;e.button.appendChild(e.icon);t=Dc("label");t.classList.add("shaka-overflow-button-label");t.classList.add("shaka-overflow-menu-only");e.nameSpan=Dc("span");t.appendChild(e.nameSpan);e.currentSelection=Dc("span");e.currentSelection.classList.add("shaka-current-selection-span");t.appendChild(e.currentSelection);e.button.appendChild(t);e.parent.appendChild(e.button)}function VD(e){e.menu=Dc("div");e.menu.classList.add("shaka-no-propagation");e.menu.classList.add("shaka-show-controls-on-mouse-over");e.menu.classList.add("shaka-settings-menu");e.menu.classList.add("shaka-hidden");e.backButton=Cc();e.backButton.classList.add("shaka-back-to-overflow-button");e.menu.appendChild(e.backButton);e.eventManager.o(e.backButton,"click",(function(){e.controls.Bc()}));var t=Dc("i");t.classList.add("material-icons-round");t.textContent="close";e.backButton.appendChild(t);e.backSpan=Dc("span");e.backButton.appendChild(e.backSpan);e.controls.g.appendChild(e.menu)}function WD(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",(function(){function t(e){return 0==e.classList.contains("shaka-hidden")}Sx(e.parent,!0);le(e.parent.childNodes,t)&&ce(e.parent.childNodes,t)[0].focus();uD(e.controls)})))}V("shaka.ui.SettingsMenu",BD);function GD(e,t){BD.call(this,e,t,"language");var r=this;this.button.classList.add("shaka-language-button");this.button.classList.add("shaka-tooltip-status");this.menu.classList.add("shaka-audio-languages");this.eventManager.o(this.localization,"locale-updated",(function(){$D(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){$D(r)}));this.eventManager.o(this.player,"trackschanged",(function(){var e=0<r.player.Va().length;Sx(r.button,e);KD(r)}));this.eventManager.o(this.player,"variantchanged",(function(){KD(r)}));$D(this);KD(this)}b(GD,BD);function KD(e){var t=e.player.Va();HD(t,e.menu,(function(t){e.player.xf(t.language,t.roles[0])}),!0,e.currentSelection,e.localization,e.controls.h.trackLabelFormat);wx(e.menu);e.controls.dispatchEvent(new G("languageselectionupdated"));e.button.setAttribute("shaka-status",e.currentSelection.innerText)}function $D(e){e.backButton.ariaLabel=e.localization.resolve("BACK");e.button.ariaLabel=e.localization.resolve("LANGUAGE");e.nameSpan.textContent=e.localization.resolve("LANGUAGE");e.backSpan.textContent=e.localization.resolve("LANGUAGE")}V("shaka.ui.AudioLanguageSelection",GD);function XD(){}XD.prototype.create=function(e,t){return new GD(e,t)};SD("language",new XD);Kx("language",new XD);function YD(e,t){yx.call(this,e,t);var r=this;this.h=this.controls.C;this.g=Cc();this.g.classList.add("shaka-cast-button");this.g.classList.add("shaka-tooltip");this.g.ariaPressed="false";this.i=Dc("i");this.i.classList.add("material-icons-round");this.i.textContent="cast";this.g.appendChild(this.i);e=Dc("label");e.classList.add("shaka-overflow-button-label");e.classList.add("shaka-overflow-menu-only");this.l=Dc("span");e.appendChild(this.l);this.j=Dc("span");this.j.classList.add("shaka-current-selection-span");e.appendChild(this.j);this.g.appendChild(e);this.parent.appendChild(this.g);eC(this);JD(this);this.eventManager.o(this.localization,"locale-updated",(function(){eC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){eC(r)}));this.eventManager.o(this.g,"click",(function(){QD(r)}));this.eventManager.o(this.controls,"caststatuschanged",(function(){JD(r)}))}b(YD,yx);function QD(e){var t;L((function(r){if(1==r.g){if(e.h.sa())return e.h.Og(),r.D(0);x(r,3);e.g.disabled=!0;return S(r,e.h.cast(),5)}if(3!=r.g)return e.g.disabled=!1,C(r,0);t=T(r);e.g.disabled=!1;8004!=t.code&&e.controls.dispatchEvent(new G("error",(new Map).set("detail",t)));_(r)}))}function JD(e){var t=e.h.$f()&&e.controls.hb,r=e.h.sa();Sx(e.g,t);e.i.textContent=r?"cast_connected":"cast";t&&(e.g.ariaPressed=r?"true":"false");ZD(e)}function ZD(e){e.j.textContent=e.h.sa()?e.h.se():e.localization.resolve("OFF")}function eC(e){e.g.ariaLabel=e.localization.resolve("CAST");e.l.textContent=e.localization.resolve("CAST");ZD(e)}V("shaka.ui.CastButton",YD);function tC(){}tC.prototype.create=function(e,t){return new YD(e,t)};SD("cast",new tC);Kx("cast",new tC);function rC(e,t){yx.call(this,e,t);var r=this;this.g=Cc();this.g.classList.add("material-icons-round");this.g.classList.add("shaka-fast-forward-button");this.g.classList.add("shaka-tooltip-status");this.g.setAttribute("shaka-status","1x");this.g.textContent="fast_forward";this.parent.appendChild(this.g);nC(this);this.h=this.controls.h.fastForwardRates;this.eventManager.o(this.localization,"locale-updated",(function(){nC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){nC(r)}));this.eventManager.o(this.g,"click",(function(){if(r.video.duration){var e=r.h.indexOf(r.player.Rb())+1;e=e!=r.h.length?r.h[e]:r.h[0];r.player.ze(e);r.g.setAttribute("shaka-status",e+"x")}}))}b(rC,yx);function nC(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}V("shaka.ui.FastForwardButton",rC);function iC(){}iC.prototype.create=function(e,t){return new rC(e,t)};Kx("fast_forward",new iC);function oC(e,t){yx.call(this,e,t);var r=this;this.h=this.controls.B;this.g=Cc();this.g.classList.add("shaka-fullscreen-button");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-tooltip");aC(this);this.g.textContent="fullscreen";this.parent.appendChild(this.g);sC(this);this.eventManager.o(this.localization,"locale-updated",(function(){sC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){sC(r)}));this.eventManager.o(this.g,"click",(function(){return L((function(e){return S(e,r.controls.Jf(),0)}))}));this.eventManager.o(document,"fullscreenchange",(function(){r.g.textContent=r.controls.Dc()?"fullscreen_exit":"fullscreen";sC(r)}));this.eventManager.o(this.h,"loadedmetadata",(function(){aC(r)}));this.eventManager.o(this.h,"loadeddata",(function(){aC(r)}))}b(oC,yx);function aC(e){e.controls.$d()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function sC(e){e.g.ariaLabel=e.localization.resolve(e.controls.Dc()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}V("shaka.ui.FullscreenButton",oC);function lC(){}lC.prototype.create=function(e,t){return new oC(e,t)};Kx("fullscreen",new lC);function cC(e,t){yx.call(this,e,t);var r=this;this.g=Cc();this.g.classList.add("shaka-loop-button");this.g.classList.add("shaka-tooltip");this.i=Dc("i");this.i.classList.add("material-icons-round");this.i.textContent="repeat";this.g.appendChild(this.i);e=Dc("label");e.classList.add("shaka-overflow-button-label");e.classList.add("shaka-overflow-menu-only");this.j=Dc("span");this.j.textContent=this.localization.resolve("LOOP");e.appendChild(this.j);this.l=Dc("span");this.l.classList.add("shaka-current-selection-span");e.appendChild(this.l);this.g.appendChild(e);uC(this);this.parent.appendChild(this.g);this.eventManager.o(this.localization,"locale-updated",(function(){uC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){uC(r)}));this.eventManager.o(this.g,"click",(function(){r.video.loop=!r.video.loop;r.h.Ca();r.h.ha(1)}));this.m=this.video.loop;this.h=new dr((function(){r.m!=r.video.loop&&(uC(r),r.m=r.video.loop)}));this.h.ha(1)}b(cC,yx);cC.prototype.release=function(){this.h.stop();this.h=null;yx.prototype.release.call(this)};function uC(e){e.j.textContent=e.localization.resolve("LOOP");e.l.textContent=e.localization.resolve(e.video.loop?"ON":"OFF");e.i.textContent=e.video.loop?"repeat_on":"repeat";e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}V("shaka.ui.LoopButton",cC);function pC(){}pC.prototype.create=function(e,t){return new cC(e,t)};SD("loop",new pC);Kx("loop",new pC);Px("loop",new pC);function dC(e,t){yx.call(this,e,t);var r=this;this.g=Cc();this.g.classList.add("shaka-mute-button");this.g.classList.add("material-icons-round");this.g.classList.add("shaka-tooltip");this.parent.appendChild(this.g);hC(this);mC(this);this.eventManager.o(this.localization,"locale-updated",(function(){hC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){hC(r)}));this.eventManager.o(this.g,"click",(function(){r.ad&&r.ad.isLinear()?r.ad.setMuted(!r.ad.isMuted()):r.video.muted=!r.video.muted}));this.eventManager.o(this.video,"volumechange",(function(){hC(r);mC(r)}));this.eventManager.o(this.adManager,"ad-volume-changed",(function(){hC(r);mC(r)}));this.eventManager.o(this.adManager,"ad-muted",(function(){hC(r);mC(r)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){r.ad=null;hC(r);mC(r)}))}b(dC,yx);function hC(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function mC(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}V("shaka.ui.MuteButton",dC);function fC(){}fC.prototype.create=function(e,t){return new dC(e,t)};Kx("mute",new fC);function gC(e,t){yx.call(this,e,t);var r=this;this.l=this.controls.B;this.m=this.controls.j;this.g=Cc();this.g.classList.add("shaka-pip-button");this.g.classList.add("shaka-tooltip");this.i=Dc("i");this.i.classList.add("material-icons-round");this.i.textContent="picture_in_picture_alt";this.g.appendChild(this.i);e=Dc("label");e.classList.add("shaka-overflow-button-label");e.classList.add("shaka-overflow-menu-only");this.j=Dc("span");this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE");e.appendChild(this.j);this.h=Dc("span");this.h.classList.add("shaka-current-selection-span");e.appendChild(this.h);this.g.appendChild(e);_C(this);this.parent.appendChild(this.g);yC(this)||Sx(this.g,!1);this.eventManager.o(this.localization,"locale-updated",(function(){_C(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){_C(r)}));this.eventManager.o(this.g,"click",(function(){bC(r)}));this.eventManager.o(this.l,"enterpictureinpicture",(function(){EC(r)}));this.eventManager.o(this.l,"leavepictureinpicture",(function(){SC(r)}));this.eventManager.o(this.controls,"caststatuschanged",(function(e){e.newStatus?yC(r)&&Sx(r.g,!1):yC(r)&&Sx(r.g,!0)}));this.eventManager.o(this.player,"trackschanged",(function(){xC(r)}))}b(gC,yx);function yC(t){return"documentPictureInPicture"in e||document.pictureInPictureEnabled&&!t.video.disablePictureInPicture}function bC(t){var r;L((function(n){switch(n.g){case 1:x(n,2);if(!("documentPictureInPicture"in e)){n.D(4);break}return S(n,vC(t),5);case 5:return n.return();case 4:return document.pictureInPictureElement?S(n,document.exitPictureInPicture(),7):(document.fullscreenElement&&document.exitFullscreen(),S(n,t.video.requestPictureInPicture(),7));case 7:C(n,0);break;case 2:r=T(n),t.controls.dispatchEvent(new G("error",(new Map).set("detail",r))),_(n)}}))}function vC(t){var r,n,i,o,a,s;return L((function(l){if(1==l.g){if(e.documentPictureInPicture.window)return e.documentPictureInPicture.window.close(),SC(t),l.return();r=t.m;n=r.getBoundingClientRect();return S(l,e.documentPictureInPicture.requestWindow({width:n.width,height:n.height}),2)}i=l.h;wC(i);o=r.parentNode||document.body;a=t.m.cloneNode(!0);a.style.visibility="hidden";a.style.height=getComputedStyle(r).height;o.appendChild(a);s=document.createElement("style");s.append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}");i.document.head.append(s);i.document.body.append(r);EC(t);t.eventManager.wa(i,"pagehide",(function(){a.replaceWith(r)}));_(l)}))}function wC(e){var t=[].concat(p(document.styleSheets)).map((function(t){try{return[].concat(p(t.cssRules)).map((function(e){return e.cssText})).join("")}catch(n){var r=document.createElement("link");r.rel="stylesheet";r.type=t.type;r.media=t.media;r.href=t.href;e.document.head.appendChild(r)}return""})).filter(Boolean).join("\n"),r=document.createElement("style");r.textContent=t;e.document.head.appendChild(r)}function EC(e){e.i.textContent="branding_watermark";e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE");e.h.textContent=e.localization.resolve("ON")}function SC(e){e.i.textContent="picture_in_picture_alt";e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE");e.h.textContent=e.localization.resolve("OFF")}function _C(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE");e.g.ariaLabel=e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE");e.h.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function xC(e){L((function(t){if(!yC(e))return Sx(e.g,!1),t.D(0);if(!e.player||!e.player.Cc())return Sx(e.g,!0),t.D(0);Sx(e.g,!1);return document.pictureInPictureElement?S(t,document.exitPictureInPicture(),0):t.D(0)}))}V("shaka.ui.PipButton",gC);function DC(){}DC.prototype.create=function(e,t){return new gC(e,t)};SD("picture_in_picture",new DC);Kx("picture_in_picture",new DC);Px("picture_in_picture",new DC);function CC(e,t){BD.call(this,e,t,"slow_motion_video");var r=this;this.button.classList.add("shaka-playbackrate-button");this.menu.classList.add("shaka-playback-rates");this.button.classList.add("shaka-tooltip-status");this.eventManager.o(this.localization,"locale-updated",(function(){TC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){TC(r)}));this.eventManager.o(this.player,"ratechange",(function(){OC(r,r.player.Rb())}));this.g=new Map(this.controls.h.playbackRates.map((function(e){return[e+"x",e]})));TC(this);kC(this);OC(this,this.player.Rb())}b(CC,BD);function TC(e){e.backButton.ariaLabel=e.localization.resolve("BACK");e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE");e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE");e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function OC(e,t){var r=vx(e.menu,"material-icons-round shaka-chosen-item");if(r){var n=r.parentElement;n.removeAttribute("aria-selected");n.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item");n.removeChild(r)}if(r=Array.from(e.menu.querySelectorAll("span")).find((function(r){return e.g.get(r.textContent)==t})))n=r.parentElement,n.appendChild(Ex()),n.ariaSelected="true",r.classList.add("shaka-chosen-item");e.currentSelection.textContent=t+"x";e.button.setAttribute("shaka-status",t+"x")}function kC(e){for(var t={},r=u(e.g.keys()),n=r.next();!n.done;t={Tc:t.Tc},n=r.next()){t.Tc=n.value;n=Cc();var i=Dc("span");i.textContent=t.Tc;n.appendChild(i);e.eventManager.o(n,"click",function(t){return function(){e.video.playbackRate=e.g.get(t.Tc);e.video.defaultPlaybackRate=e.g.get(t.Tc)}}(t));e.menu.appendChild(n)}wx(e.menu)}V("shaka.ui.PlaybackRateSelection",CC);function PC(){}PC.prototype.create=function(e,t){return new CC(e,t)};SD("playback_rate",new PC);Kx("playback_rate",new PC);function AC(e,t){yx.call(this,e,t);var r=this;this.g=Cc();this.g.classList.add("shaka-current-time");IC(this,"0:00");this.parent.appendChild(this.g);this.eventManager.o(this.g,"click",(function(){r.player.S()&&(r.video.currentTime=r.player.Aa().end)}));this.eventManager.o(this.controls,"timeandseekrangeupdated",(function(){var e=r.controls.X,t=r.controls.ng(),n=r.video.duration,i=r.player.Aa(),o=i.end-i.start;r.player.S()?(t=Math.max(0,Math.floor(i.end-t)),n=3600<=o,1<=t||e?(IC(r,"- "+_x(t,n)),r.g.disabled=!1):(IC(r,r.localization.resolve("LIVE")),r.g.disabled=!0)):(e=3600<=n,t=_x(t,e),n&&(t+=" / "+_x(n,e)),IC(r,t),r.g.disabled=!0)}));this.eventManager.o(this.player,"trackschanged",(function(){r.player.S()&&(r.g.ariaLabel=r.localization.resolve("SKIP_TO_LIVE"))}))}b(AC,yx);function IC(e,t){t!=e.g.textContent&&(e.g.textContent=t)}V("shaka.ui.PresentationTimeTracker",AC);function jC(){}jC.prototype.create=function(e,t){return new AC(e,t)};Kx("time_and_duration",new jC);function RC(e,t){BD.call(this,e,t,"settings");var r=this;this.button.classList.add("shaka-resolution-button");this.button.classList.add("shaka-tooltip-status");this.menu.classList.add("shaka-resolutions");this.eventManager.o(this.localization,"locale-updated",(function(){LC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){LC(r)}));this.eventManager.o(this.player,"variantchanged",(function(){NC(r)}));this.eventManager.o(this.player,"trackschanged",(function(){NC(r)}));this.eventManager.o(this.player,"abrstatuschanged",(function(){NC(r)}));NC(this)}b(RC,BD);function NC(e){var t=[];e.player.Ve()!=Kp&&(t=e.player.Va());var r=t.find((function(e){return e.active}));r&&(t=t.filter((function(e){return e.language==r.language&&e.channelsCount==r.channelsCount})));t=t.filter((function(r,n){return(e.player.Cc()?t.findIndex((function(e){return e.bandwidth==r.bandwidth})):t.findIndex((function(e){return e.height==r.height})))==n}));e.player.Cc()?t.sort((function(e,t){return t.bandwidth-e.bandwidth})):t.sort((function(e,t){return t.height-e.height}));var n=bx(e.menu);Tc(e.menu);e.menu.appendChild(n);n=e.player.getConfiguration().abr.enabled;for(var i={},o=u(t),a=o.next();!a.done;i={wb:i.wb},a=o.next()){i.wb=a.value;a=Cc();a.classList.add("explicit-resolution");e.eventManager.o(a,"click",function(t){return function(){var r=t.wb;e.player.configure({abr:{enabled:!1}});e.player.we(r,e.controls.h.clearBufferOnQualityChange)}}(i));var s=Dc("span");s.textContent=e.player.Cc()?Math.round(i.wb.bandwidth/1e3)+" kbits/s":"PQ"==i.wb.hdr||"HLG"==i.wb.hdr?i.wb.height+"p (HDR)":i.wb.height+"p";a.appendChild(s);n||i.wb!=r||(a.ariaSelected="true",a.appendChild(Ex()),s.classList.add("shaka-chosen-item"),e.currentSelection.textContent=s.textContent);e.menu.appendChild(a)}i=Cc();i.classList.add("shaka-enable-abr-button");e.eventManager.o(i,"click",(function(){e.player.configure({abr:{enabled:!0}});NC(e)}));e.g=Dc("span");e.g.classList.add("shaka-auto-span");e.g.textContent=e.localization.resolve("AUTO_QUALITY");i.appendChild(e.g);n&&(i.ariaSelected="true",i.appendChild(Ex()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"));e.button.setAttribute("shaka-status",e.currentSelection.textContent);e.menu.appendChild(i);wx(e.menu);e.controls.dispatchEvent(new G("resolutionselectionupdated"));LC(e)}function LC(e){var t=e.player.Cc()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t);e.backButton.ariaLabel=e.localization.resolve(t);e.backSpan.textContent=e.localization.resolve(t);e.nameSpan.textContent=e.localization.resolve(t);e.g.textContent=e.localization.resolve("AUTO_QUALITY");e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}V("shaka.ui.ResolutionSelection",RC);function MC(){}MC.prototype.create=function(e,t){return new RC(e,t)};SD("quality",new MC);Kx("quality",new MC);function qC(e,t){yx.call(this,e,t);var r=this;this.g=Cc();this.g.classList.add("material-icons-round");this.g.classList.add("shaka-rewind-button");this.g.classList.add("shaka-tooltip-status");this.g.setAttribute("shaka-status",this.localization.resolve("OFF"));this.g.textContent="fast_rewind";this.parent.appendChild(this.g);UC(this);this.h=this.controls.h.rewindRates;this.eventManager.o(this.localization,"locale-updated",(function(){UC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){UC(r)}));this.eventManager.o(this.g,"click",(function(){if(r.video.duration){var e=r.h.indexOf(r.player.Rb())+1;e=e!=r.h.length?r.h[e]:r.h[0];r.player.ze(e);r.g.setAttribute("shaka-status",e+"x")}}))}b(qC,yx);function UC(e){e.g.ariaLabel=e.localization.resolve("REWIND")}V("shaka.ui.RewindButton",qC);function HC(){}HC.prototype.create=function(e,t){return new qC(e,t)};Kx("rewind",new HC);function FC(e,t){yx.call(this,e,t);var r=this;this.j=Dc("div");this.j.classList.add("shaka-skip-ad-container");this.parent.appendChild(this.j);this.h=Dc("div");this.h.classList.add("shaka-skip-ad-counter");Sx(this.h,!1);this.j.appendChild(this.h);this.g=Cc();this.g.classList.add("shaka-skip-ad-button");this.g.disabled=!0;Sx(this.g,!1);this.g.classList.add("shaka-no-propagation");this.j.appendChild(this.g);BC(this);this.i=new dr((function(){var e=Math.round(r.ad.getTimeUntilSkippable());0<e?r.h.textContent=e:(r.i.stop(),Sx(r.h,!1))}));this.eventManager.o(this.localization,"locale-updated",(function(){BC(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){BC(r)}));this.eventManager.o(this.adManager,"ad-started",(function(){zC(r)}));this.eventManager.o(this.adManager,"ad-skip-state-changed",(function(){r.ad.canSkipNow()&&(r.g.disabled=!1,r.i.stop(),Sx(r.h,!1))}));this.eventManager.o(this.adManager,"ad-stopped",(function(){r.i.stop();r.g.disabled=!0;Sx(r.g,!1);Sx(r.h,!1)}));this.eventManager.o(this.g,"click",(function(){r.ad.skip()}));this.ad&&zC(this)}b(FC,yx);FC.prototype.release=function(){this.i.stop();this.i=null;yx.prototype.release.call(this)};function BC(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function zC(e){e.ad.isSkippable()&&(Sx(e.g,!0),Sx(e.h,!0),e.h.textContent="",e.i.Ca(),e.i.ha(.5))}V("shaka.ui.SkipAdButton",FC);function VC(e,t){Tx.call(this,e,t);this.button.classList.add("shaka-small-play-button");this.button.classList.add("material-icons-round");this.button.classList.add("shaka-tooltip");this.h();this.g()}b(VC,Tx);VC.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"};VC.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}};V("shaka.ui.SmallPlayButton",VC);function WC(){}WC.prototype.create=function(e,t){return new VC(e,t)};Kx("play_pause",new WC);function GC(e,t){yx.call(this,e,t);e=Dc("div");e.classList.add("shaka-spacer");e.ariaHidden="true";this.parent.appendChild(e)}b(GC,yx);V("shaka.ui.Spacer",GC);function KC(){}KC.prototype.create=function(e,t){return new GC(e,t)};Kx("spacer",new KC);function $C(e,t){function r(e){return _x(s.h[e],!1)+" (m)"}function n(e){return Math.round(s.h[e]/1e3)+" (kbits/s)"}function i(e){return s.h[e].toFixed(2)+" (s)"}function o(e){return s.h[e]+" (frames)"}function a(e){return s.h[e]+" (px)"}yx.call(this,e,t);var s=this;this.i=Cc();this.i.classList.add("shaka-statistics-button");this.j=Dc("i");this.j.classList.add("material-icons-round");this.j.textContent="insert_chart_outlined";this.i.appendChild(this.j);e=Dc("label");e.classList.add("shaka-overflow-button-label");this.s=Dc("span");e.appendChild(this.s);this.m=Dc("span");this.m.classList.add("shaka-current-selection-span");e.appendChild(this.m);this.i.appendChild(e);this.parent.appendChild(this.i);this.g=Dc("div");this.g.classList.add("shaka-no-propagation");this.g.classList.add("shaka-show-controls-on-mouse-over");this.g.classList.add("shaka-statistics-container");this.g.classList.add("shaka-hidden");this.controls.g.appendChild(this.g);this.F=[];this.G=["stateHistory","switchHistory"];this.h=this.player.getStats();this.B={};this.C={width:a,height:a,completionPercent:function(e){return s.h[e]+" (%)"},bufferingTime:i,drmTimeSeconds:i,licenseTime:i,liveLatency:i,loadLatency:i,manifestTimeSeconds:i,estimatedBandwidth:n,streamBandwidth:n,maxSegmentDuration:r,pauseTime:r,playTime:r,corruptedFrames:o,decodedFrames:o,droppedFrames:o,stallsDetected:function(e){return s.h[e]+" (stalls)"},gapsJumped:function(e){return s.h[e]+" (gaps)"}};this.l=new dr((function(){s.h=s.player.getStats();for(var e=u(s.F),t=e.next();!t.done;t=e.next())t=t.value,s.B[t].textContent=s.C[t](t)}));XC(this);YC(this);this.eventManager.o(this.localization,"locale-updated",(function(){XC(s)}));this.eventManager.o(this.localization,"locale-changed",(function(){XC(s)}));this.eventManager.o(this.i,"click",(function(){Sx(s.parent,!1);s.g.classList.contains("shaka-hidden")?(s.j.textContent="insert_chart",s.l.ha(.1),Sx(s.g,!0)):(s.j.textContent="insert_chart_outlined",s.l.stop(),Sx(s.g,!1));XC(s)}))}b($C,yx);function XC(e){e.s.textContent=e.localization.resolve("STATISTICS");e.i.ariaLabel=e.localization.resolve("STATISTICS");e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function YC(e){for(var t=u(e.controls.h.statisticsList),r=t.next();!r.done;r=t.next())if(r=r.value,r in e.h&&!e.G.includes(r)){var n=e.g,i=n.appendChild,o=e,a=Dc("div"),s=Dc("label");s.textContent=r+":";a.appendChild(s);s=Dc("span");s.textContent=o.C[r](r);a.appendChild(s);o.B[r]=s;i.call(n,a);e.F.push(r)}else Q("Unrecognized statistic element:",r)}$C.prototype.release=function(){this.l.stop();this.l=null;yx.prototype.release.call(this)};V("shaka.ui.StatisticsButton",$C);function QC(){}QC.prototype.create=function(e,t){return new $C(e,t)};SD("statistics",new QC);Px("statistics",new QC);function JC(e,t){BD.call(this,e,t,"closed_caption");var r=this;this.button.classList.add("shaka-caption-button");this.button.classList.add("shaka-tooltip-status");this.menu.classList.add("shaka-text-languages");this.player&&this.player.jc()?this.button.ariaPressed="true":this.button.ariaPressed="false";ZC(this);this.eventManager.o(this.localization,"locale-updated",(function(){nT(r);tT(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){nT(r);tT(r)}));this.eventManager.o(this.player,"texttrackvisibility",(function(){eT(r);tT(r)}));this.eventManager.o(this.player,"textchanged",(function(){tT(r)}));this.eventManager.o(this.player,"trackschanged",(function(){iT(r)}));eT(this);nT(this);tT(this);iT(this)}b(JC,BD);function ZC(e){var t=Cc();t.ariaSelected="true";e.menu.appendChild(t);t.appendChild(Ex());e.g=Dc("span");e.g.classList.add("shaka-auto-span");t.appendChild(e.g)}function eT(e){e.player.jc()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false");e.controls.dispatchEvent(new G("captionselectionupdated"))}function tT(e){var t=e.player.Sb();HD(t,e.menu,(function(t){return rT(e,t)}),e.player.jc(),e.currentSelection,e.localization,e.controls.h.trackLabelFormat);t=Cc();t.classList.add("shaka-turn-captions-off-button");e.eventManager.o(t,"click",(function(){e.player.Ff(!1);tT(e)}));t.appendChild(e.g);e.menu.appendChild(t);e.player.jc()||(t.ariaSelected="true",t.appendChild(Ex()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF"));e.button.setAttribute("shaka-status",e.currentSelection.textContent);wx(e.menu);e.controls.dispatchEvent(new G("captionselectionupdated"))}function rT(e,t){return L((function(r){e.player.yf(t);return S(r,e.player.Ff(!0),0)}))}function nT(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS");e.backButton.ariaLabel=e.localization.resolve("BACK");e.nameSpan.textContent=e.localization.resolve("CAPTIONS");e.backSpan.textContent=e.localization.resolve("CAPTIONS");e.g.textContent=e.localization.resolve("OFF")}function iT(e){var t=0<e.player.Sb().length;Sx(e.button,t);tT(e)}V("shaka.ui.TextSelection",JC);function oT(){}oT.prototype.create=function(e,t){return new JC(e,t)};SD("captions",new oT);Kx("captions",new oT);function aT(e,t){jx.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var r=this;this.g=this.controls.h;this.eventManager.o(this.video,"volumechange",(function(){return sT(r)}));this.eventManager.o(this.adManager,"ad-volume-changed",(function(){return lT(r)}));this.eventManager.o(this.adManager,"ad-muted",(function(){return lT(r)}));this.eventManager.o(this.adManager,"ad-stopped",(function(){return sT(r)}));this.eventManager.o(this.localization,"locale-updated",(function(){return uT(r)}));this.eventManager.o(this.localization,"locale-changed",(function(){return uT(r)}));sT(this);uT(this);if(this.ad)this.onChange()}b(aT,jx);aT.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=0==this.video.volume?!0:!1)};function sT(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume);cT(e)}function lT(e){var t=e.ad.getVolume();e.setValue(t);cT(e)}function cT(e){var t=e.g.volumeBarColors,r=["to right"];r.push(t.level+100*e.getValue()+"%");r.push(t.base+100*e.getValue()+"%");r.push(t.base+"100%");e.container.style.background="linear-gradient("+r.join(",")+")"}function uT(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}V("shaka.ui.VolumeBar",aT);function pT(){}pT.prototype.create=function(e,t){return new aT(e,t)};Kx("volume",new pT)}).call(n,r,r,undefined);if(true)for(var i in n.shaka)t[i]=n.shaka[i];else{}})()}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/sortablejs/Sortable.js":function(e,t,r){var n,i;(function o(a){"use strict";if(true){!(n=a,i=typeof n==="function"?n.call(t,r,t,e):n,i!==undefined&&(e.exports=i))}else{}})((function e(){"use strict";if(typeof window==="undefined"||!window.document){return function e(){throw new Error("Sortable.js requires a window with a document")}}var t,r,n,i,o,a,s,l,c,u,p,d,h,m,f=[],g=false,y=false,b=false,v=[],w,E,S,_,x,D,C,T,O=false,k=false,P,A,I,j=[],R,N,L=/\s+/g,M="Sortable"+(new Date).getTime(),q=window,U=q.document,H=q.parseInt,F=q.setTimeout,B=q.jQuery||q.Zepto,z=q.Polymer,V={capture:false,passive:false},W=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),G=!!navigator.userAgent.match(/Edge/i),K=!!navigator.userAgent.match(/firefox/i),$=!!(navigator.userAgent.match(/safari/i)&&!navigator.userAgent.match(/chrome/i)&&!navigator.userAgent.match(/android/i)),X=!!navigator.userAgent.match(/iP(ad|od|hone)/i),Y=X,Q=G||W?"cssFloat":"float",J="draggable"in U.createElement("div"),Z=function(){if(W){return false}var e=U.createElement("x");e.style.cssText="pointer-events:auto";return e.style.pointerEvents==="auto"}(),ee=false,te=false,re=Math.abs,ne=Math.min,ie=Math.max,oe=[],ae=function(e,t){var r=ke(e),n=H(r.width)-H(r.paddingLeft)-H(r.paddingRight)-H(r.borderLeftWidth)-H(r.borderRightWidth),i=Le(e,0,t),o=Le(e,1,t),a=i&&ke(i),s=o&&ke(o),l=a&&H(a.marginLeft)+H(a.marginRight)+Je(i).width,c=s&&H(s.marginLeft)+H(s.marginRight)+Je(o).width;if(r.display==="flex"){return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal"}if(r.display==="grid"){return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal"}if(i&&a.float!=="none"){var u=a.float==="left"?"left":"right";return o&&(s.clear==="both"||s.clear===u)?"vertical":"horizontal"}return i&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||l>=n&&r[Q]==="none"||o&&r[Q]==="none"&&l+c>n)?"vertical":"horizontal"},se=function(e,t){for(var r=0;r<v.length;r++){if(Me(v[r]))continue;var n=Je(v[r]),i=v[r][M].options.emptyInsertThreshold,o=e>=n.left-i&&e<=n.right+i,a=t>=n.top-i&&t<=n.bottom+i;if(o&&a){return v[r]}}},le=function(e,t,r,n,i){var o=Je(r),a=n==="vertical"?o.left:o.top,s=n==="vertical"?o.right:o.bottom,l=n==="vertical"?e:t;return a<l&&l<s},ce=function(e,r,n){var i=e===t&&N||Je(e),o=r===t&&N||Je(r),a=n==="vertical"?i.left:i.top,s=n==="vertical"?i.right:i.bottom,l=n==="vertical"?i.width:i.height,c=n==="vertical"?o.left:o.top,u=n==="vertical"?o.right:o.bottom,p=n==="vertical"?o.width:o.height;return a===c||s===u||a+l/2===c+p/2},ue=function(e,t){if(!e||!e.getBoundingClientRect)return pe();var r=e;var n=false;do{if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var i=ke(r);if(r.clientWidth<r.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!r||!r.getBoundingClientRect||r===U.body)return pe();if(n||t)return r;n=true}}}while(r=r.parentNode);return pe()},pe=function(){if(W){return U.documentElement}else{return U.scrollingElement}},de=function(e,t,r){e.scrollLeft+=t;e.scrollTop+=r},he=We((function(e,t,r,n){if(t.scroll){var i=r?r[M]:window,o=t.scrollSensitivity,a=t.scrollSpeed,s=e.clientX,p=e.clientY,d=pe(),h=false;if(c!==r){me();l=t.scroll;u=t.scrollFn;if(l===true){l=ue(r,true);c=l}}var m=0;var y=l;do{var b=y,v=Je(b),w=v.top,E=v.bottom,S=v.left,_=v.right,D=v.width,C=v.height,T,O,k,P,A,I,j,R,N;T=b.scrollWidth;O=b.scrollHeight;k=ke(b);R=b.scrollLeft;N=b.scrollTop;if(b===d){I=D<T&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible");j=C<O&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")}else{I=D<T&&(k.overflowX==="auto"||k.overflowX==="scroll");j=C<O&&(k.overflowY==="auto"||k.overflowY==="scroll")}P=I&&(re(_-s)<=o&&R+D<T)-(re(S-s)<=o&&!!R);A=j&&(re(E-p)<=o&&N+C<O)-(re(w-p)<=o&&!!N);if(!f[m]){for(var L=0;L<=m;L++){if(!f[L]){f[L]={}}}}if(f[m].vx!=P||f[m].vy!=A||f[m].el!==b){f[m].el=b;f[m].vx=P;f[m].vy=A;clearInterval(f[m].pid);if(b&&(P!=0||A!=0)){h=true;f[m].pid=setInterval(function(){if(n&&this.layer===0){Se.active._emulateDragOver(true);Se.active._onTouchMove(x,true)}var t=f[this.layer].vy?f[this.layer].vy*a:0;var r=f[this.layer].vx?f[this.layer].vx*a:0;if("function"===typeof u){if(u.call(i,r,t,e,x,f[this.layer].el)!=="continue"){return}}de(f[this.layer].el,r,t)}.bind({layer:m}),24)}}m++}while(t.bubbleScroll&&y!==d&&(y=ue(y,false)));g=h}}),30),me=function(){f.forEach((function(e){clearInterval(e.pid)}));f=[]},fe=function(e){function t(e,r){return function(n,i,o,a){var s=n.options.group.name&&i.options.group.name&&n.options.group.name===i.options.group.name;if(e==null&&(r||s)){return true}else if(e==null||e===false){return false}else if(r&&e==="clone"){return e}else if(typeof e==="function"){return t(e(n,i,o,a),r)(n,i,o,a)}else{var l=(r?n:i).options.group.name;return e===true||typeof e==="string"&&e===l||e.join&&e.indexOf(l)>-1}}}var r={};var n=e.group;if(!n||typeof n!="object"){n={name:n}}r.name=n.name;r.checkPull=t(n.pull,true);r.checkPut=t(n.put);r.revertClone=n.revertClone;e.group=r},ge=function(e){if(!t||!t.parentNode)return;t.parentNode[M]&&t.parentNode[M]._computeIsAligned(e)},ye=function(e,t){var r=t;while(!r[M]){r=r.parentNode}return e===r},be=function(e,t,r){var n=e.parentNode;while(n&&!n[M]){n=n.parentNode}if(n){n[M][r](Ke(t,{artificialBubble:true}))}},ve=function(){if(!Z&&n){ke(n,"display","none")}},we=function(){if(!Z&&n){ke(n,"display","")}};U.addEventListener("click",(function(e){if(b){e.preventDefault();e.stopPropagation&&e.stopPropagation();e.stopImmediatePropagation&&e.stopImmediatePropagation();b=false;return false}}),true);var Ee=function(e){e=e.touches?e.touches[0]:e;if(t){var r=se(e.clientX,e.clientY);if(r){r[M]._onDragOver({clientX:e.clientX,clientY:e.clientY,target:r,rootEl:r})}}};Ce(U,"dragover",Ee);Ce(U,"mousemove",Ee);Ce(U,"touchmove",Ee);function Se(e,t){if(!(e&&e.nodeType&&e.nodeType===1)){throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(e)}this.el=e;this.options=t=Ke({},t);e[M]=this;var r={group:null,sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:true,draggable:/[uo]l/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:false,invertedSwapThreshold:null,removeCloneOnHide:true,direction:function(){return ae(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,touchStartThreshold:H(window.devicePixelRatio,10)||1,forceFallback:false,fallbackClass:"sortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Se.supportPointer!==false&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5};for(var n in r){!(n in t)&&(t[n]=r[n])}fe(t);for(var i in this){if(i.charAt(0)==="_"&&typeof this[i]==="function"){this[i]=this[i].bind(this)}}this.nativeDraggable=t.forceFallback?false:J;if(this.nativeDraggable){this.options.touchStartThreshold=1}if(t.supportPointer){Ce(e,"pointerdown",this._onTapStart)}else{Ce(e,"mousedown",this._onTapStart);Ce(e,"touchstart",this._onTapStart)}if(this.nativeDraggable){Ce(e,"dragover",this);Ce(e,"dragenter",this)}v.push(this.el);t.store&&t.store.get&&this.sort(t.store.get(this)||[])}Se.prototype={constructor:Se,_computeIsAligned:function(e){var r;if(n&&!Z){ve();r=U.elementFromPoint(e.clientX,e.clientY);we()}else{r=e.target}r=_e(r,this.options.draggable,this.el,false);if(te)return;if(!t||t.parentNode!==this.el)return;var i=this.el.children;for(var o=0;o<i.length;o++){if(_e(i[o],this.options.draggable,this.el,false)&&i[o]!==r){i[o].sortableMouseAligned=le(e.clientX,e.clientY,i[o],this._getDirection(e,null),this.options)}}if(!_e(r,this.options.draggable,this.el,true)){C=null}te=true;F((function(){te=false}),30)},_getDirection:function(e,r){return typeof this.options.direction==="function"?this.options.direction.call(this,e,r,t):this.options.direction},_onTapStart:function(e){if(!e.cancelable)return;var r=this,n=this.el,i=this.options,o=i.preventOnFilter,a=e.type,l=e.touches&&e.touches[0],c=(l||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,p=i.filter,d;Xe(n);if(W&&!e.artificialBubble&&!ye(n,c)){return}if(t){return}if(/mousedown|pointerdown/.test(a)&&e.button!==0||i.disabled){return}if(u.isContentEditable){return}c=_e(c,i.draggable,n,false);if(!c){if(W){be(n,e,"_onTapStart")}return}if(s===c){return}d=Be(c,i.draggable);if(typeof p==="function"){if(p.call(this,e,c,this)){Ie(r,u,"filter",c,n,n,d);o&&e.cancelable&&e.preventDefault();return}}else if(p){p=p.split(",").some((function(e){e=_e(u,e.trim(),n,false);if(e){Ie(r,e,"filter",c,n,n,d);return true}}));if(p){o&&e.cancelable&&e.preventDefault();return}}if(i.handle&&!_e(u,i.handle,n,false)){return}this._prepareDragStart(e,l,c,d)},_handleAutoScroll:function(e,r){if(!t||!this.options.scroll)return;var n=e.clientX,i=e.clientY,o=U.elementFromPoint(n,i),a=this;if(r||G||W||$){he(e,a.options,o,r);var s=ue(o,true);if(g&&(!w||n!==E||i!==S)){w&&clearInterval(w);w=setInterval((function(){if(!t)return;var o=ue(U.elementFromPoint(n,i),true);if(o!==s){s=o;me();he(e,a.options,s,r)}}),10);E=n;S=i}}else{if(!a.options.bubbleScroll||ue(o,true)===pe()){me();return}he(e,a.options,ue(o,false),false)}},_prepareDragStart:function(e,n,i,l){var c=this,u=c.el,d=c.options,m=u.ownerDocument,f;if(i&&!t&&i.parentNode===u){o=u;t=i;r=t.parentNode;a=t.nextSibling;s=i;h=d.group;p=l;_={target:t,clientX:(n||e).clientX,clientY:(n||e).clientY};this._lastX=(n||e).clientX;this._lastY=(n||e).clientY;t.style["will-change"]="all";t.style.transition="";t.style.transform="";f=function(){c._disableDelayedDragEvents();if(!K&&c.nativeDraggable){t.draggable=true}c._triggerDragStart(e,n);Ie(c,o,"choose",t,o,o,p);Oe(t,d.chosenClass,true)};d.ignore.split(",").forEach((function(e){Ae(t,e.trim(),Re)}));if(d.supportPointer){Ce(m,"pointerup",c._onDrop)}else{Ce(m,"mouseup",c._onDrop);Ce(m,"touchend",c._onDrop);Ce(m,"touchcancel",c._onDrop)}if(K&&this.nativeDraggable){this.options.touchStartThreshold=4;t.draggable=true}if(d.delay&&(!this.nativeDraggable||!(G||W))){Ce(m,"mouseup",c._disableDelayedDrag);Ce(m,"touchend",c._disableDelayedDrag);Ce(m,"touchcancel",c._disableDelayedDrag);Ce(m,"mousemove",c._delayedDragTouchMoveHandler);Ce(m,"touchmove",c._delayedDragTouchMoveHandler);d.supportPointer&&Ce(m,"pointermove",c._delayedDragTouchMoveHandler);c._dragStartTimer=F(f,d.delay)}else{f()}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;if(ie(re(t.clientX-this._lastX),re(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))){this._disableDelayedDrag()}},_disableDelayedDrag:function(){t&&Re(t);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Te(e,"mouseup",this._disableDelayedDrag);Te(e,"touchend",this._disableDelayedDrag);Te(e,"touchcancel",this._disableDelayedDrag);Te(e,"mousemove",this._delayedDragTouchMoveHandler);Te(e,"touchmove",this._delayedDragTouchMoveHandler);Te(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,r){r=r||(e.pointerType=="touch"?e:null);if(!this.nativeDraggable||r){if(this.options.supportPointer){Ce(U,"pointermove",this._onTouchMove)}else if(r){Ce(U,"touchmove",this._onTouchMove)}else{Ce(U,"mousemove",this._onTouchMove)}}else{Ce(t,"dragend",this);Ce(o,"dragstart",this._onDragStart)}try{if(U.selection){Ye((function(){U.selection.empty()}))}else{window.getSelection().removeAllRanges()}}catch(e){}},_dragStarted:function(e,r){y=false;if(o&&t){if(this.nativeDraggable){Ce(U,"dragover",this._handleAutoScroll);Ce(U,"dragover",ge)}var n=this.options;!e&&Oe(t,n.dragClass,false);Oe(t,n.ghostClass,true);ke(t,"transform","");Se.active=this;e&&this._appendGhost();Ie(this,o,"start",t,o,o,p,undefined,r)}else{this._nulling()}},_emulateDragOver:function(e){if(x){if(this._lastX===x.clientX&&this._lastY===x.clientY&&!e){return}this._lastX=x.clientX;this._lastY=x.clientY;ve();var r=U.elementFromPoint(x.clientX,x.clientY);var n=r;while(r&&r.shadowRoot){r=r.shadowRoot.elementFromPoint(x.clientX,x.clientY);n=r}if(n){do{if(n[M]){var i;i=n[M]._onDragOver({clientX:x.clientX,clientY:x.clientY,target:r,rootEl:n});if(i&&!this.options.dragoverBubble){break}}r=n}while(n=n.parentNode)}t.parentNode[M]._computeIsAligned(x);we()}},_onTouchMove:function(e,t){if(_){var r=this.options,i=r.fallbackTolerance,o=r.fallbackOffset,a=e.touches?e.touches[0]:e,s=n&&Pe(n),l=n&&s&&s.a,c=n&&s&&s.d,u=Y&&I&&et(I),p=(a.clientX-_.clientX+o.x)/(l||1)+(u?u[0]-j[0]:0)/(l||1),d=(a.clientY-_.clientY+o.y)/(c||1)+(u?u[1]-j[1]:0)/(c||1),h=e.touches?"translate3d("+p+"px,"+d+"px,0)":"translate("+p+"px,"+d+"px)";if(!Se.active&&!y){if(i&&ne(re(a.clientX-this._lastX),re(a.clientY-this._lastY))<i){return}this._onDragStart(e,true)}!t&&this._handleAutoScroll(a,true);D=true;x=a;ke(n,"webkitTransform",h);ke(n,"mozTransform",h);ke(n,"msTransform",h);ke(n,"transform",h);e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!n){var e=this.options.fallbackOnBody?U.body:o,r=Je(t,true,e,!Y),i=ke(t),a=this.options;if(Y){I=e;while(ke(I,"position")==="static"&&ke(I,"transform")==="none"&&I!==U){I=I.parentNode}if(I!==U){var s=Je(I,true);r.top-=s.top;r.left-=s.left}if(I!==U.body&&I!==U.documentElement){if(I===U)I=pe();r.top+=I.scrollTop;r.left+=I.scrollLeft}else{I=pe()}j=et(I)}n=t.cloneNode(true);Oe(n,a.ghostClass,false);Oe(n,a.fallbackClass,true);Oe(n,a.dragClass,true);ke(n,"box-sizing","border-box");ke(n,"margin",0);ke(n,"top",r.top);ke(n,"left",r.left);ke(n,"width",r.width);ke(n,"height",r.height);ke(n,"opacity","0.8");ke(n,"position",Y?"absolute":"fixed");ke(n,"zIndex","100000");ke(n,"pointerEvents","none");e.appendChild(n)}},_onDragStart:function(e,r){var n=this;var a=e.dataTransfer;var s=n.options;i=$e(t);i.draggable=false;i.style["will-change"]="";this._hideClone();Oe(i,n.options.chosenClass,false);n._cloneId=Ye((function(){if(!n.options.removeCloneOnHide){o.insertBefore(i,t)}Ie(n,o,"clone",t)}));!r&&Oe(t,s.dragClass,true);if(r){b=true;n._loopId=setInterval(n._emulateDragOver,50)}else{Te(U,"mouseup",n._onDrop);Te(U,"touchend",n._onDrop);Te(U,"touchcancel",n._onDrop);if(a){a.effectAllowed="move";s.setData&&s.setData.call(n,a,t)}Ce(U,"drop",n);ke(t,"transform","translateZ(0)")}y=true;n._dragStartId=Ye(n._dragStarted.bind(n,r,e));Ce(U,"selectstart",n);if($){ke(U.body,"user-select","none")}},_onDragOver:function(e){var n=this.el,i=e.target,s,l,c,u=this.options,d=u.group,f=Se.active,g=h===d,y=u.sort,v=this;if(ee)return;if(W&&!e.rootEl&&!e.artificialBubble&&!ye(n,i)){return}function w(r){if(r){if(g){f._hideClone()}else{f._showClone(v)}if(f){Oe(t,m?m.options.ghostClass:f.options.ghostClass,false);Oe(t,u.ghostClass,true)}if(m!==v&&v!==Se.active){m=v}else if(v===Se.active){m=null}s&&v._animate(s,t);i&&l&&v._animate(l,i)}if(i===t&&!t.animated||i===n&&!i.animated){C=null}if(!u.dragoverBubble&&!e.rootEl&&i!==U){v._handleAutoScroll(e);t.parentNode[M]._computeIsAligned(e)}!u.dragoverBubble&&e.stopPropagation&&e.stopPropagation();return true}function E(){Ie(v,o,"change",i,n,o,p,Be(t,u.draggable),e)}if(e.preventDefault!==void 0){e.cancelable&&e.preventDefault()}D=true;i=_e(i,u.draggable,n,true);if(!!_e(e.target,null,t,true)||i.animated){return w(false)}if(i!==t){b=false}if(f&&!u.disabled&&(g?y||(c=!o.contains(t)):m===this||(this.lastPutMode=h.checkPull(this,f,t,e))&&d.checkPut(this,f,t,e))){var S=this._getDirection(e,i);s=Je(t);if(c){this._hideClone();r=o;if(a){o.insertBefore(t,a)}else{o.appendChild(t)}return w(true)}var _=Me(n);if(!_||qe(e,S,n)&&!_.animated){if(_&&n===e.target){i=_}if(i){l=Je(i)}if(g){f._hideClone()}else{f._showClone(this)}if(je(o,n,t,s,i,l,e,!!i)!==false){n.appendChild(t);r=n;N=null;E();return w(true)}}else if(i&&i!==t&&i.parentNode===n){var x=0,I,j=i.sortableMouseAligned,R=t.parentNode!==n,L=S==="vertical"?"top":"left",q=Ze(i,"top")||Ze(t,"top"),H=q?q.scrollTop:void 0;if(C!==i){P=null;I=Je(i)[L];O=false}if(ce(t,i,S)&&j||R||q||u.invertSwap||P==="insert"||P==="swap"){if(P!=="swap"){k=u.invertSwap||R}x=Ue(e,i,S,u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,k,C===i);P="swap"}else{x=He(i);P="insert"}if(x===0)return w(false);N=null;C=i;T=x;l=Je(i);var B=i.nextElementSibling,z=false;z=x===1;var V=je(o,n,t,s,i,l,e,z);if(V!==false){if(V===1||V===-1){z=V===1}ee=true;F(Ne,30);if(g){f._hideClone()}else{f._showClone(this)}if(z&&!B){n.appendChild(t)}else{i.parentNode.insertBefore(t,z?B:i)}if(q){de(q,0,H-q.scrollTop)}r=t.parentNode;if(I!==undefined&&!k){A=re(I-Je(i)[L])}E();return w(true)}}if(n.contains(t)){return w(false)}}if(W&&!e.rootEl){be(n,e,"_onDragOver")}return false},_animate:function(e,r){var n=this.options.animation;if(n){var i=Je(r);if(r===t){N=i}if(e.nodeType===1){e=Je(e)}if(e.left+e.width/2!==i.left+i.width/2||e.top+e.height/2!==i.top+i.height/2){var o=Pe(this.el),a=o&&o.a,s=o&&o.d;ke(r,"transition","none");ke(r,"transform","translate3d("+(e.left-i.left)/(a?a:1)+"px,"+(e.top-i.top)/(s?s:1)+"px,0)");R=r.offsetWidth;ke(r,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:""));ke(r,"transform","translate3d(0,0,0)")}typeof r.animated==="number"&&clearTimeout(r.animated);r.animated=F((function(){ke(r,"transition","");ke(r,"transform","");r.animated=false}),n)}},_offUpEvents:function(){var e=this.el.ownerDocument;Te(U,"touchmove",this._onTouchMove);Te(U,"pointermove",this._onTouchMove);Te(e,"mouseup",this._onDrop);Te(e,"touchend",this._onDrop);Te(e,"pointerup",this._onDrop);Te(e,"touchcancel",this._onDrop);Te(U,"selectstart",this)},_onDrop:function(e){var s=this.el,l=this.options;y=false;g=false;k=false;O=false;clearInterval(this._loopId);clearInterval(w);me();Ge();clearTimeout(this._dragStartTimer);Qe(this._cloneId);Qe(this._dragStartId);Te(U,"mousemove",this._onTouchMove);if(this.nativeDraggable){Te(U,"drop",this);Te(s,"dragstart",this._onDragStart);Te(U,"dragover",this._handleAutoScroll);Te(U,"dragover",ge)}if($){ke(U.body,"user-select","")}this._offUpEvents();if(e){if(D){e.cancelable&&e.preventDefault();!l.dropBubble&&e.stopPropagation()}n&&n.parentNode&&n.parentNode.removeChild(n);if(o===r||m&&m.lastPutMode!=="clone"){i&&i.parentNode&&i.parentNode.removeChild(i)}if(t){if(this.nativeDraggable){Te(t,"dragend",this)}Re(t);t.style["will-change"]="";Oe(t,m?m.options.ghostClass:this.options.ghostClass,false);Oe(t,this.options.chosenClass,false);Ie(this,o,"unchoose",t,r,o,p,null,e);if(o!==r){d=Be(t,l.draggable);if(d>=0){Ie(null,r,"add",t,r,o,p,d,e);Ie(this,o,"remove",t,r,o,p,d,e);Ie(null,r,"sort",t,r,o,p,d,e);Ie(this,o,"sort",t,r,o,p,d,e)}m&&m.save()}else{if(t.nextSibling!==a){d=Be(t,l.draggable);if(d>=0){Ie(this,o,"update",t,r,o,p,d,e);Ie(this,o,"sort",t,r,o,p,d,e)}}}if(Se.active){if(d==null||d===-1){d=p}Ie(this,o,"end",t,r,o,p,d,e);this.save()}}}this._nulling()},_nulling:function(){o=t=r=n=a=i=s=l=c=f.length=w=E=S=_=x=D=d=p=C=T=R=N=m=h=Se.active=null;oe.forEach((function(e){e.checked=true}));oe.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":if(t){this._onDragOver(e);De(e)}break;case"selectstart":e.preventDefault();break}},toArray:function(){var e=[],t,r=this.el.children,n=0,i=r.length,o=this.options;for(;n<i;n++){t=r[n];if(_e(t,o.draggable,this.el,false)){e.push(t.getAttribute(o.dataIdAttr)||Fe(t))}}return e},sort:function(e){var t={},r=this.el;this.toArray().forEach((function(e,n){var i=r.children[n];if(_e(i,this.options.draggable,r,false)){t[e]=i}}),this);e.forEach((function(e){if(t[e]){r.removeChild(t[e]);r.appendChild(t[e])}}))},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _e(e,t||this.options.draggable,this.el,false)},option:function(e,t){var r=this.options;if(t===void 0){return r[e]}else{r[e]=t;if(e==="group"){fe(r)}}},destroy:function(){var e=this.el;e[M]=null;Te(e,"mousedown",this._onTapStart);Te(e,"touchstart",this._onTapStart);Te(e,"pointerdown",this._onTapStart);if(this.nativeDraggable){Te(e,"dragover",this);Te(e,"dragenter",this)}Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")}));this._onDrop();v.splice(v.indexOf(this.el),1);this.el=e=null},_hideClone:function(){if(!i.cloneHidden){ke(i,"display","none");i.cloneHidden=true;if(i.parentNode&&this.options.removeCloneOnHide){i.parentNode.removeChild(i)}}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(i.cloneHidden){if(o.contains(t)&&!this.options.group.revertClone){o.insertBefore(i,t)}else if(a){o.insertBefore(i,a)}else{o.appendChild(i)}if(this.options.group.revertClone){this._animate(t,i)}ke(i,"display","");i.cloneHidden=false}}};function _e(e,t,r,n){if(e){r=r||U;do{if(t!=null&&(t[0]===">"&&e.parentNode===r&&ze(e,t.substring(1))||ze(e,t))||n&&e===r){return e}if(e===r)break}while(e=xe(e))}return null}function xe(e){return e.host&&e!==U&&e.host.nodeType?e.host:e.parentNode}function De(e){if(e.dataTransfer){e.dataTransfer.dropEffect="move"}e.cancelable&&e.preventDefault()}function Ce(e,t,r){e.addEventListener(t,r,V)}function Te(e,t,r){e.removeEventListener(t,r,V)}function Oe(e,t,r){if(e&&t){if(e.classList){e.classList[r?"add":"remove"](t)}else{var n=(" "+e.className+" ").replace(L," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(L," ")}}}function ke(e,t,r){var n=e&&e.style;if(n){if(r===void 0){if(U.defaultView&&U.defaultView.getComputedStyle){r=U.defaultView.getComputedStyle(e,"")}else if(e.currentStyle){r=e.currentStyle}return t===void 0?r:r[t]}else{if(!(t in n)&&t.indexOf("webkit")===-1){t="-webkit-"+t}n[t]=r+(typeof r==="string"?"":"px")}}}function Pe(e){var t="";do{var r=ke(e,"transform");if(r&&r!=="none"){t=r+" "+t}}while(e=e.parentNode);if(window.DOMMatrix){return new DOMMatrix(t)}else if(window.WebKitCSSMatrix){return new WebKitCSSMatrix(t)}else if(window.CSSMatrix){return new CSSMatrix(t)}}function Ae(e,t,r){if(e){var n=e.getElementsByTagName(t),i=0,o=n.length;if(r){for(;i<o;i++){r(n[i],i)}}return n}return[]}function Ie(e,t,r,n,o,a,s,l,c){e=e||t[M];var u,p=e.options,d="on"+r.charAt(0).toUpperCase()+r.substr(1);if(window.CustomEvent&&!W&&!G){u=new CustomEvent(r,{bubbles:true,cancelable:true})}else{u=U.createEvent("Event");u.initEvent(r,true,true)}u.to=o||t;u.from=a||t;u.item=n||t;u.clone=i;u.oldIndex=s;u.newIndex=l;u.originalEvent=c;u.pullMode=m?m.lastPutMode:undefined;if(t){t.dispatchEvent(u)}if(p[d]){p[d].call(e,u)}}function je(e,t,r,n,i,o,a,s){var l,c=e[M],u=c.options.onMove,p;if(window.CustomEvent&&!W&&!G){l=new CustomEvent("move",{bubbles:true,cancelable:true})}else{l=U.createEvent("Event");l.initEvent("move",true,true)}l.to=t;l.from=e;l.dragged=r;l.draggedRect=n;l.related=i||t;l.relatedRect=o||Je(t);l.willInsertAfter=s;l.originalEvent=a;e.dispatchEvent(l);if(u){p=u.call(c,l,a)}return p}function Re(e){e.draggable=false}function Ne(){ee=false}function Le(e,r,i){var o=0,a=0,s=e.children;while(a<s.length){if(s[a].style.display!=="none"&&s[a]!==n&&s[a]!==t&&_e(s[a],i.draggable,e,false)){if(o===r){return s[a]}o++}a++}return null}function Me(e){var t=e.lastElementChild;while(t&&(t===n||t.style.display==="none")){t=t.previousElementSibling}return t||null}function qe(e,t,r){var n=Je(Me(r)),i=t==="vertical"?e.clientY:e.clientX,o=t==="vertical"?e.clientX:e.clientY,a=t==="vertical"?n.bottom:n.right,s=t==="vertical"?n.left:n.top,l=t==="vertical"?n.right:n.bottom,c=10;return t==="vertical"?o>l+c||o<=l&&i>a&&o>=s:i>a&&o>s||i<=a&&o>l+c}function Ue(e,r,n,i,o,a,s){var l=Je(r),c=n==="vertical"?e.clientY:e.clientX,u=n==="vertical"?l.height:l.width,p=n==="vertical"?l.top:l.left,d=n==="vertical"?l.bottom:l.right,h=Je(t),m=false;if(!a){if(s&&A<u*i){if(!O&&(T===1?c>p+u*o/2:c<d-u*o/2)){O=true}if(!O){var f=n==="vertical"?h.top:h.left,g=n==="vertical"?h.bottom:h.right;if(T===1?c<p+A:c>d-A){return T*-1}}else{m=true}}else{if(c>p+u*(1-i)/2&&c<d-u*(1-i)/2){return He(r)}}}m=m||a;if(m){if(c<p+u*o/2||c>d-u*o/2){return c>p+u/2?1:-1}}return 0}function He(e){var r=Be(t),n=Be(e);if(r<n){return 1}else{return-1}}function Fe(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;while(r--){n+=t.charCodeAt(r)}return n.toString(36)}function Be(e,t){var r=0;if(!e||!e.parentNode){return-1}while(e&&(e=e.previousElementSibling)){if(e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==i){r++}}return r}function ze(e,t){if(e){try{if(e.matches){return e.matches(t)}else if(e.msMatchesSelector){return e.msMatchesSelector(t)}else if(e.webkitMatchesSelector){return e.webkitMatchesSelector(t)}}catch(e){return false}}return false}var Ve;function We(e,t){return function(){if(!Ve){var r=arguments,n=this;Ve=F((function(){if(r.length===1){e.call(n,r[0])}else{e.apply(n,r)}Ve=void 0}),t)}}}function Ge(){clearTimeout(Ve);Ve=void 0}function Ke(e,t){if(e&&t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}}return e}function $e(e){if(z&&z.dom){return z.dom(e).cloneNode(true)}else if(B){return B(e).clone(true)[0]}else{return e.cloneNode(true)}}function Xe(e){oe.length=0;var t=e.getElementsByTagName("input");var r=t.length;while(r--){var n=t[r];n.checked&&oe.push(n)}}function Ye(e){return F(e,0)}function Qe(e){return clearTimeout(e)}function Je(e,t,r,n){if(!e.getBoundingClientRect&&e!==q)return;var i,o,a,s,l,c,u;if(e!==q&&e!==pe()){i=e.getBoundingClientRect();o=i.top;a=i.left;s=i.bottom;l=i.right;c=i.height;u=i.width}else{o=0;a=0;s=window.innerHeight;l=window.innerWidth;c=window.innerHeight;u=window.innerWidth}if(n&&e!==q){r=r||e.parentNode;if(!W){do{if(r&&r.getBoundingClientRect&&ke(r,"transform")!=="none"){var p=r.getBoundingClientRect();o-=p.top+H(ke(r,"border-top-width"));a-=p.left+H(ke(r,"border-left-width"));s=o+i.height;l=a+i.width;break}}while(r=r.parentNode)}}if(t&&e!==q){var d=Pe(r||e),h=d&&d.a,m=d&&d.d;if(d){o/=m;a/=h;u/=h;c/=m;s=o+c;l=a+u}}return{top:o,left:a,bottom:s,right:l,width:u,height:c}}function Ze(e,t){var r=ue(e,true),n=Je(e)[t];while(r){var i=Je(r)[t],o;if(t==="top"||t==="left"){o=n>=i}else{o=n<=i}if(!o)return r;if(r===pe())break;r=ue(r,false)}return false}function et(e){var t=0,r=0,n=pe();if(e){do{var i=Pe(e),o=i.a,a=i.d;t+=e.scrollLeft*o;r+=e.scrollTop*a}while(e!==n&&(e=e.parentNode))}return[t,r]}Ce(U,"touchmove",(function(e){if((Se.active||y)&&e.cancelable){e.preventDefault()}}));Se.utils={on:Ce,off:Te,css:ke,find:Ae,is:function(e,t){return!!_e(e,t,e,false)},extend:Ke,throttle:We,closest:_e,toggleClass:Oe,clone:$e,index:Be,nextTick:Ye,cancelNextTick:Qe,detectDirection:ae,getChild:Le};Se.create=function(e,t){return new Se(e,t)};Se.version="1.8.4";return Se}))},"./node_modules/ua-parser-js/src/ua-parser.js":function(e,t,r){var n;(function(i,o){"use strict";var a="0.7.24",s="",l="?",c="function",u="undefined",p="object",d="string",h="major",m="model",f="name",g="type",y="vendor",b="version",v="architecture",w="console",E="mobile",S="tablet",_="smarttv",x="wearable",D="embedded";var C={extend:function(e,t){var r={};for(var n in e){if(t[n]&&t[n].length%2===0){r[n]=t[n].concat(e[n])}else{r[n]=e[n]}}return r},has:function(e,t){if(typeof e==="string"){return t.toLowerCase().indexOf(e.toLowerCase())!==-1}else{return false}},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===d?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}};var T={rgx:function(e,t){var r=0,n,i,a,s,l,u;while(r<t.length&&!l){var d=t[r],h=t[r+1];n=i=0;while(n<d.length&&!l){l=d[n++].exec(e);if(!!l){for(a=0;a<h.length;a++){u=l[++i];s=h[a];if(typeof s===p&&s.length>0){if(s.length==2){if(typeof s[1]==c){this[s[0]]=s[1].call(this,u)}else{this[s[0]]=s[1]}}else if(s.length==3){if(typeof s[1]===c&&!(s[1].exec&&s[1].test)){this[s[0]]=u?s[1].call(this,u,s[2]):o}else{this[s[0]]=u?u.replace(s[1],s[2]):o}}else if(s.length==4){this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o}}else{this[s]=u?u:o}}}}r+=2}},str:function(e,t){for(var r in t){if(typeof t[r]===p&&t[r].length>0){for(var n=0;n<t[r].length;n++){if(C.has(t[r][n],e)){return r===l?o:r}}}else if(C.has(t[r],e)){return r===l?o:r}}return e}};var O={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}};var k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6}).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[f,b],[/(opios)[\/\s]+([\w\.]+)/i],[[f,"Opera Mini"],b],[/\s(opr)\/([\w\.]+)/i],[[f,"Opera"],b],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[f,b],[/(konqueror)\/([\w\.]+)/i],[[f,"Konqueror"],b],[/(trident).+rv[:\s]([\w\.]{1,9}).+like\sgecko/i],[[f,"IE"],b],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[f,"Edge"],b],[/(yabrowser)\/([\w\.]+)/i],[[f,"Yandex"],b],[/(Avast)\/([\w\.]+)/i],[[f,"Avast Secure Browser"],b],[/(AVG)\/([\w\.]+)/i],[[f,"AVG Secure Browser"],b],[/(puffin)\/([\w\.]+)/i],[[f,"Puffin"],b],[/(focus)\/([\w\.]+)/i],[[f,"Firefox Focus"],b],[/(opt)\/([\w\.]+)/i],[[f,"Opera Touch"],b],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[f,"UCBrowser"],b],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],b],[/(windowswechat qbcore)\/([\w\.]+)/i],[[f,"WeChat(Win) Desktop"],b],[/(micromessenger)\/([\w\.]+)/i],[[f,"WeChat"],b],[/(brave)\/([\w\.]+)/i],[[f,"Brave"],b],[/(whale)\/([\w\.]+)/i],[[f,"Whale"],b],[/(qqbrowserlite)\/([\w\.]+)/i],[f,b],[/(QQ)\/([\d\.]+)/i],[f,b],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[f,b],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[f,b],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[f,b],[/(MetaSr)[\/\s]?([\w\.]+)/i],[f],[/(LBBROWSER)/i],[f],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[b,[f,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[b,[f,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[f,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[f,b],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[b,[f,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[f,/(.+)/,"$1 WebView"],b],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[f,/(.+(?:g|us))(.+)/,"$1 $2"],b],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[b,[f,"Android Browser"]],[/(coc_coc_browser)\/([\w\.]+)/i],[[f,"Coc Coc"],b],[/(sailfishbrowser)\/([\w\.]+)/i],[[f,"Sailfish Browser"],b],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[f,b],[/(dolfin)\/([\w\.]+)/i],[[f,"Dolphin"],b],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[f,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[f,"Chrome"],b],[/(coast)\/([\w\.]+)/i],[[f,"Opera Coast"],b],[/fxios\/([\w\.-]+)/i],[b,[f,"Firefox"]],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[b,[f,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[b,f],[/webkit.+?(gsa)\/([\w\.]+)\s.*(mobile\s?safari|safari)(\/[\w\.]+)/i],[[f,"GSA"],b],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[f,[b,T.str,O.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[f,b],[/(navigator|netscape)\/([\w\.-]+)/i],[[f,"Netscape"],b],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[f,b]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,C.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[v,/ower/,"",C.lowerize]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[v,C.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[m,y,[g,S]],[/applecoremedia\/[\w\.]+ \((ipad)/],[m,[y,"Apple"],[g,S]],[/(apple\s{0,1}tv)/i],[[m,"Apple TV"],[y,"Apple"],[g,_]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[y,m,[g,S]],[/(kf[A-z]+)(\sbuild\/|\)).+silk\//i],[m,[y,"Amazon"],[g,S]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[m,T.str,O.device.amazon.model],[y,"Amazon"],[g,E]],[/android.+aft([\w])(\sbuild\/|\))/i],[m,[y,"Amazon"],[g,_]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[m,y,[g,E]],[/\((ip[honed|\s\w*]+);/i],[m,[y,"Apple"],[g,E]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[y,m,[g,E]],[/\(bb10;\s(\w+)/i],[m,[y,"BlackBerry"],[g,E]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[m,[y,"Asus"],[g,S]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[y,"Sony"],[m,"Xperia Tablet"],[g,S]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[y,"Sony"],[g,E]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[y,m,[g,w]],[/android.+;\s(shield)\sbuild/i],[m,[y,"Nvidia"],[g,w]],[/(playstation\s[34portablevi]+)/i],[m,[y,"Sony"],[g,w]],[/(sprint\s(\w+))/i],[[y,T.str,O.device.sprint.vendor],[m,T.str,O.device.sprint.model],[g,E]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[y,[m,/_/g," "],[g,E]],[/(nexus\s9)/i],[m,[y,"HTC"],[g,S]],[/d\/huawei([\w\s-]+)[;\)]/i,/android.+\s(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?)/i],[m,[y,"Huawei"],[g,E]],[/android.+(bah2?-a?[lw]\d{2})/i],[m,[y,"Huawei"],[g,S]],[/(microsoft);\s(lumia[\s\w]+)/i],[y,m,[g,E]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[m,[y,"Microsoft"],[g,w]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[y,"Microsoft"],[g,E]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[m,[y,"Motorola"],[g,E]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[m,[y,"Motorola"],[g,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[y,C.trim],[m,C.trim],[g,_]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[y,"Samsung"],[g,_]],[/\(dtv[\);].+(aquos)/i],[m,[y,"Sharp"],[g,_]],[/android.+((sch-i[89]0\d|shw-m380s|SM-P605|SM-P610|SM-P587|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[y,"Samsung"],m,[g,S]],[/smart-tv.+(samsung)/i],[y,[g,_],m],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[y,"Samsung"],m,[g,E]],[/sie-(\w*)/i],[m,[y,"Siemens"],[g,E]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[y,"Nokia"],m,[g,E]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[m,[y,"Acer"],[g,S]],[/android.+([vl]k\-?\d{3})\s+build/i],[m,[y,"LG"],[g,S]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[y,"LG"],m,[g,S]],[/linux;\snetcast.+smarttv/i,/lg\snetcast\.tv-201\d/i],[[y,"LG"],m,[g,_]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[m,[y,"LG"],[g,E]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[y,m,[g,S]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[m,[y,"Lenovo"],[g,S]],[/(lenovo)[_\s-]?([\w-]+)/i],[y,m,[g,E]],[/linux;.+((jolla));/i],[y,m,[g,E]],[/((pebble))app\/[\d\.]+\s/i],[y,m,[g,x]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[y,m,[g,E]],[/crkey/i],[[m,"Chromecast"],[y,"Google"],[g,_]],[/android.+;\s(glass)\s\d/i],[m,[y,"Google"],[g,x]],[/android.+;\s(pixel c)[\s)]/i],[m,[y,"Google"],[g,S]],[/android.+;\s(pixel( [2-9]a?)?( xl)?)[\s)]/i],[m,[y,"Google"],[g,E]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/android.+(redmi[\s\-_]?(?:note|k)?(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i,/android.+(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[m,/_/g," "],[y,"Xiaomi"],[g,E]],[/android.+(mi[\s\-_]?(?:pad)(?:[\s_]?[\w\s]+))(?:\sbuild|\))/i],[[m,/_/g," "],[y,"Xiaomi"],[g,S]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[m,[y,"Meizu"],[g,E]],[/(mz)-([\w-]{2,})/i],[[y,"Meizu"],m,[g,E]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[m,[y,"OnePlus"],[g,E]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[m,[y,"RCA"],[g,S]],[/android.+[;\/\s](Venue[\d\s]{2,7})\s+build/i],[m,[y,"Dell"],[g,S]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[m,[y,"Verizon"],[g,S]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(\S(?:.*\S)?)\s+build/i],[[y,"Barnes & Noble"],m,[g,S]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[m,[y,"NuVision"],[g,S]],[/android.+;\s(k88)\sbuild/i],[m,[y,"ZTE"],[g,S]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[m,[y,"Swiss"],[g,E]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[m,[y,"Swiss"],[g,S]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[m,[y,"Zeki"],[g,S]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[y,"Dragon Touch"],m,[g,S]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[m,[y,"Insignia"],[g,S]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[m,[y,"NextBook"],[g,S]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[y,"Voice"],m,[g,E]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[y,"LvTel"],m,[g,E]],[/android.+;\s(PH-1)\s/i],[m,[y,"Essential"],[g,E]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[m,[y,"Envizen"],[g,S]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[y,m,[g,S]],[/android.+[;\/]\s*(Trio[\s\w\-\.]+)\s+build/i],[m,[y,"MachSpeed"],[g,S]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[y,m,[g,S]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[m,[y,"Rotor"],[g,S]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[y,m,[g,S]],[/android .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[m,[g,E]],[/android .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[m,[g,S]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[g,C.lowerize],y,m],[/[\s\/\(](smart-?tv)[;\)]/i],[[g,_]],[/(android[\w\.\s\-]{0,9});.+build/i],[m,[y,"Generic"]],[/(phone)/i],[[g,E]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[b,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[f,b],[/rv\:([\w\.]{1,9}).+(gecko)/i],[b,f]],os:[[/(xbox);\s+xbox\s([^\);]+)/i,/microsoft\s(windows)\s(vista|xp)/i],[f,b],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[f,[b,T.str,O.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[f,"Windows"],[b,T.str,O.os.windows.version]],[/\((bb)(10);/i],[[f,"BlackBerry"],b],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[f,b],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[f,"Symbian"],b],[/\((series40);/i],[f],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[f,"Firefox OS"],b],[/crkey\/([\d\.]+)/i],[b,[f,"Chromecast"]],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[f,b],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[f,"Chromium OS"],b],[/(sunos)\s?([\w\.\d]*)/i],[[f,"Solaris"],b],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[f,b],[/(haiku)\s(\w+)/i],[f,b],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[b,/_/g,"."],[f,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[f,"Mac OS"],[b,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[f,b]]};var P=function(e,t){if(typeof e==="object"){t=e;e=o}if(!(this instanceof P)){return new P(e,t).getResult()}var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:s);var n=t?C.extend(k,t):k;this.getBrowser=function(){var e={name:o,version:o};T.rgx.call(e,r,n.browser);e.major=C.major(e.version);return e};this.getCPU=function(){var e={architecture:o};T.rgx.call(e,r,n.cpu);return e};this.getDevice=function(){var e={vendor:o,model:o,type:o};T.rgx.call(e,r,n.device);return e};this.getEngine=function(){var e={name:o,version:o};T.rgx.call(e,r,n.engine);return e};this.getOS=function(){var e={name:o,version:o};T.rgx.call(e,r,n.os);return e};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}};this.getUA=function(){return r};this.setUA=function(e){r=e;return this};return this};P.VERSION=a;P.BROWSER={NAME:f,MAJOR:h,VERSION:b};P.CPU={ARCHITECTURE:v};P.DEVICE={MODEL:m,VENDOR:y,TYPE:g,CONSOLE:w,MOBILE:E,SMARTTV:_,TABLET:S,WEARABLE:x,EMBEDDED:D};P.ENGINE={NAME:f,VERSION:b};P.OS={NAME:f,VERSION:b};if(typeof t!==u){if(typeof e!==u&&e.exports){t=e.exports=P}t.UAParser=P}else{if(true){!(n=function(){return P}.call(t,r,t,e),n!==o&&(e.exports=n))}else{}}var A=i&&(i.jQuery||i.Zepto);if(A&&!A.ua){var I=new P;A.ua=I.getResult();A.ua.get=function(){return I.getUA()};A.ua.set=function(e){I.setUA(e);var t=I.getResult();for(var r in t){A.ua[r]=t[r]}}}})(typeof window==="object"?window:this)},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;var n=/^(?=([^\/?#]*))\1([^]*)$/;var i=/(?:\/|^)\.(?=\/)/g;var o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var a={buildAbsoluteURL:function(e,t,r){r=r||{};e=e.trim();t=t.trim();if(!t){if(!r.alwaysNormalize){return e}var i=a.parseURL(e);if(!i){throw new Error("Error trying to parse base URL.")}i.path=a.normalizePath(i.path);return a.buildURLFromParts(i)}var o=a.parseURL(t);if(!o){throw new Error("Error trying to parse relative URL.")}if(o.scheme){if(!r.alwaysNormalize){return t}o.path=a.normalizePath(o.path);return a.buildURLFromParts(o)}var s=a.parseURL(e);if(!s){throw new Error("Error trying to parse base URL.")}if(!s.netLoc&&s.path&&s.path[0]!=="/"){var l=n.exec(s.path);s.netLoc=l[1];s.path=l[2]}if(s.netLoc&&!s.path){s.path="/"}var c={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc){c.netLoc=s.netLoc;if(o.path[0]!=="/"){if(!o.path){c.path=s.path;if(!o.params){c.params=s.params;if(!o.query){c.query=s.query}}}else{var u=s.path;var p=u.substring(0,u.lastIndexOf("/")+1)+o.path;c.path=a.normalizePath(p)}}}if(c.path===null){c.path=r.alwaysNormalize?a.normalizePath(o.path):o.path}return a.buildURLFromParts(c)},parseURL:function(e){var t=r.exec(e);if(!t){return null}return{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}},normalizePath:function(e){e=e.split("").reverse().join("").replace(i,"");while(e.length!==(e=e.replace(o,"")).length){}return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};if(true)e.exports=a;else{}})(this)},"./node_modules/webvtt-parser/parser.js":function(e,t,r){(function(){var e={direction:"horizontal",snapToLines:true,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center"};var r=function(t){if(!t){t={"&amp":"&","&lt":"<","&gt":">","&lrm":"‎","&rlm":"‏","&nbsp":" "}}this.entities=t;this.parse=function(r,o){r=r.replace(/\0/g,"�");var a=/\r\n|\r|\n/,s=Date.now(),l=0,c=r.split(a),u=false,p=[],d=[],h=[];function m(e,t){h.push({message:e,line:l+1,col:t})}var f=c[l],g=f.length,y="WEBVTT",b=0,v=y.length;if(f[0]==="\ufeff"){b=1;v+=1}if(g<v||f.indexOf(y)!==0+b||g>v&&f[v]!==" "&&f[v]!=="\t"){m('No valid signature. (File needs to start with "WEBVTT".)')}l++;while(c[l]!=""&&c[l]!=undefined){m("No blank line after the signature.");if(c[l].indexOf("--\x3e")!=-1){u=true;break}l++}while(c[l]!=undefined){var w;while(!u&&c[l]==""){l++}if(!u&&c[l]==undefined)break;w=Object.assign({},e,{id:"",startTime:0,endTime:0,pauseOnExit:false,direction:"horizontal",snapToLines:true,linePosition:"auto",lineAlign:"start",textPosition:"auto",positionAlign:"auto",size:100,alignment:"center",text:"",tree:null});var E=true;if(c[l].indexOf("--\x3e")==-1){w.id=c[l];if(/^NOTE($|[ \t])/.test(w.id)){l++;while(c[l]!=""&&c[l]!=undefined){if(c[l].indexOf("--\x3e")!=-1)m("Cannot have timestamp in a comment.");l++}continue}if(/^STYLE($|[ \t])/.test(w.id)){var S=[];var _=false;l++;while(c[l]!=""&&c[l]!=undefined){if(c[l].indexOf("--\x3e")!=-1){m("Cannot have timestamp in a style block.");_=true}S.push(c[l]);l++}if(d.length){m("Style blocks cannot appear after the first cue.");continue}if(!_){p.push(S.join("\n"))}continue}l++;if(c[l]==""||c[l]==undefined){m("Cue identifier cannot be standalone.");continue}if(c[l].indexOf("--\x3e")==-1){E=false;m("Cue identifier needs to be followed by timestamp.");continue}}u=false;var x=new n(c[l],m);var D=0;if(d.length>0){D=d[d.length-1].startTime}if(E&&!x.parse(w,D)){w=null;l++;while(c[l]!=""&&c[l]!=undefined){if(c[l].indexOf("--\x3e")!=-1){u=true;break}l++}continue}l++;while(c[l]!=""&&c[l]!=undefined){if(c[l].indexOf("--\x3e")!=-1){m("Blank line missing before cue.");u=true;break}if(w.text!="")w.text+="\n";w.text+=c[l];l++}var C=new i(w.text,m,o,t);w.tree=C.parse(w.startTime,w.endTime);d.push(w)}d.sort((function(e,t){if(e.startTime<t.startTime)return-1;if(e.startTime>t.startTime)return 1;if(e.endTime>t.endTime)return-1;if(e.endTime<t.endTime)return 1;return 0}));return{cues:d,errors:h,time:Date.now()-s,styles:p}}};var n=function(e,t){var r=/[\u0020\t\f]/,n=/[^\u0020\t\f]/,e=e,i=0,o=function(e){t(e,i+1)},a=true;function s(t){while(e[i]!=undefined&&t.test(e[i])){i++}}function l(t){var r="";while(e[i]!=undefined&&t.test(e[i])){r+=e[i];i++}return r}function c(){var t="minutes",r,n,a,s;if(e[i]==undefined){o("No timestamp found.");return}if(!/\d/.test(e[i])){o("Timestamp must start with a character in the range 0-9.");return}r=l(/\d/);if(r.length>2||parseInt(r,10)>59){t="hours"}if(e[i]!=":"){o("No time unit separator found.");return}i++;n=l(/\d/);if(n.length!=2){o("Must be exactly two digits.");return}if(t=="hours"||e[i]==":"){if(e[i]!=":"){o("No seconds found or minutes is greater than 59.");return}i++;a=l(/\d/);if(a.length!=2){o("Must be exactly two digits.");return}}else{if(r.length!=2){o("Must be exactly two digits.");return}a=n;n=r;r="0"}if(e[i]!="."){o('No decimal separator (".") found.');return}i++;s=l(/\d/);if(s.length!=3){o("Milliseconds must be given in three digits.");return}if(parseInt(n,10)>59){o("You cannot have more than 59 minutes.");return}if(parseInt(a,10)>59){o("You cannot have more than 59 seconds.");return}return parseInt(r,10)*60*60+parseInt(n,10)*60+parseInt(a,10)+parseInt(s,10)/1e3}function u(e,t){var n=e.split(r),i=[];for(var a=0;a<n.length;a++){if(n[a]=="")continue;var s=n[a].indexOf(":"),l=n[a].slice(0,s),c=n[a].slice(s+1);if(i.indexOf(l)!=-1){o("Duplicate setting.")}i.push(l);if(c==""){o("No value for setting defined.");return}if(l=="vertical"){if(c!="rl"&&c!="lr"){o("Writing direction can only be set to 'rl' or 'rl'.");continue}t.direction=c}else if(l=="line"){if(/,/.test(c)){var u=c.split(",");c=u[0];var p=u[1]}if(!/^[-\d](\d*)(\.\d+)?%?$/.test(c)){o("Line position takes a number or percentage.");continue}if(c.indexOf("-",1)!=-1){o("Line position can only have '-' at the start.");continue}if(c.indexOf("%")!=-1&&c.indexOf("%")!=c.length-1){o("Line position can only have '%' at the end.");continue}if(c[0]=="-"&&c[c.length-1]=="%"){o("Line position cannot be a negative percentage.");continue}var d=c;var h=false;if(c[c.length-1]=="%"){h=true;d=c.slice(0,c.length-1);if(parseInt(c,10)>100){o("Line position cannot be >100%.");continue}}if(d===""||isNaN(d)||!isFinite(d)){o("Line position needs to be a number");continue}if(p!==undefined){if(!["start","center","end"].includes(p)){o("Line alignment needs to be one of start, center or end");continue}t.lineAlign=p}t.snapToLines=!h;t.linePosition=parseFloat(d);if(parseFloat(d).toString()!==d){t.nonSerializable=true}}else if(l=="position"){if(/,/.test(c)){var u=c.split(",");c=u[0];var m=u[1]}if(c[c.length-1]!="%"){o("Text position must be a percentage.");continue}if(parseInt(c,10)>100||parseInt(c,10)<0){o("Text position needs to be between 0 and 100%.");continue}d=c.slice(0,c.length-1);if(d===""||isNaN(d)||!isFinite(d)){o("Line position needs to be a number");continue}if(m!==undefined){if(!["line-left","center","line-right"].includes(m)){o("Position alignment needs to be one of line-left, center or line-right");continue}t.positionAlign=m}t.textPosition=parseFloat(d)}else if(l=="size"){if(c[c.length-1]!="%"){o("Size must be a percentage.");continue}if(parseInt(c,10)>100){o("Size cannot be >100%.");continue}var f=c.slice(0,c.length-1);if(f===undefined||f===""||isNaN(f)){o("Size needs to be a number");f=100;continue}else{f=parseFloat(f);if(f<0||f>100){o("Size needs to be between 0 and 100%.");continue}}t.size=f}else if(l=="align"){var g=["start","center","end","left","right"];if(g.indexOf(c)==-1){o("Alignment can only be set to one of "+g.join(", ")+".");continue}t.alignment=c}else{o("Invalid setting.")}}}this.parse=function(t,l){s(r);t.startTime=c();if(t.startTime==undefined){return}if(t.startTime<l){o("Start timestamp is not greater than or equal to start timestamp of previous cue.")}if(n.test(e[i])){o("Timestamp not separated from '--\x3e' by whitespace.")}s(r);if(e[i]!="-"){o("No valid timestamp separator found.");return}i++;if(e[i]!="-"){o("No valid timestamp separator found.");return}i++;if(e[i]!=">"){o("No valid timestamp separator found.");return}i++;if(n.test(e[i])){o("'--\x3e' not separated from timestamp by whitespace.")}s(r);t.endTime=c();if(t.endTime==undefined){return}if(t.endTime<=t.startTime){o("End timestamp is not greater than start timestamp.")}if(n.test(e[i])){a=false}s(r);u(e.substring(i),t);return true};this.parseTimestamp=function(){var t=c();if(e[i]!=undefined){o("Timestamp must not have trailing characters.");return}return t}};var i=function(e,t,r,i){this.entities=i;var o=this;var e=e,a=0,s=function(e){if(r=="metadata")return;t(e,a+1)};this.parse=function(t,i){function o(e){const t={...e};if(e.children){t.children=e.children.map(o)}if(t.parent){delete t.parent}return t}var c={children:[]},u=c,p=[];function d(e){u.children.push({type:"object",name:e[1],classes:e[2],children:[],parent:u});u=u.children[u.children.length-1]}function h(e){var t=u;while(t){if(t.name==e)return true;t=t.parent}return}while(e[a]!=undefined){var m=l();if(m[0]=="text"){u.children.push({type:"text",value:m[1],parent:u})}else if(m[0]=="start tag"){if(r=="chapters")s("Start tags not allowed in chapter title text.");var f=m[1];if(f!="v"&&f!="lang"&&m[3]!=""){s("Only <v> and <lang> can have an annotation.")}if(f=="c"||f=="i"||f=="b"||f=="u"||f=="ruby"){d(m)}else if(f=="rt"&&u.name=="ruby"){d(m)}else if(f=="v"){if(h("v")){s("<v> cannot be nested inside itself.")}d(m);u.value=m[3];if(!m[3]){s("<v> requires an annotation.")}}else if(f=="lang"){d(m);u.value=m[3]}else{s("Incorrect start tag.")}}else if(m[0]=="end tag"){if(r=="chapters")s("End tags not allowed in chapter title text.");if(m[1]==u.name){u=u.parent}else if(m[1]=="ruby"&&u.name=="rt"){u=u.parent.parent}else{s("Incorrect end tag.")}}else if(m[0]=="timestamp"){if(r=="chapters")s("Timestamp not allowed in chapter title text.");var g=new n(m[1],s),y=g.parseTimestamp();if(y!=undefined){if(y<=t||y>=i){s("Timestamp must be between start timestamp and end timestamp.")}if(p.length>0&&p[p.length-1]>=y){s("Timestamp must be greater than any previous timestamp.")}u.children.push({type:"timestamp",value:y,parent:u});p.push(y)}}}while(u.parent){if(u.name!="v"){s("Required end tag missing.")}u=u.parent}return o(c)};function l(){var t="data",r="",n="",l=[];while(e[a-1]!=undefined||a==0){var c=e[a];if(t=="data"){if(c=="&"){n=c;t="escape"}else if(c=="<"&&r==""){t="tag"}else if(c=="<"||c==undefined){return["text",r]}else{r+=c}}else if(t=="escape"){if(c=="<"||c==undefined){s("Incorrect escape.");let e;if(e=n.match(/^&#([0-9]+)$/)){r+=String.fromCharCode(e[1])}else{if(o.entities[n]){r+=o.entities[n]}else{r+=n}}return["text",r]}else if(c=="&"){s("Incorrect escape.");r+=n;n=c}else if(/[a-z#0-9]/i.test(c)){n+=c}else if(c==";"){let e;if(e=n.match(/^&#(x?[0-9]+)$/)){r+=String.fromCharCode("0"+e[1])}else if(o.entities[n+c]){r+=o.entities[n+c]}else if(e=Object.keys(i).find((e=>n.startsWith(e)))){r+=o.entities[e]+n.slice(e.length)+c}else{s("Incorrect escape.");r+=n+";"}t="data"}else{s("Incorrect escape.");r+=n+c;t="data"}}else if(t=="tag"){if(c=="\t"||c=="\n"||c=="\f"||c==" "){t="start tag annotation"}else if(c=="."){t="start tag class"}else if(c=="/"){t="end tag"}else if(/\d/.test(c)){r=c;t="timestamp tag"}else if(c==">"||c==undefined){if(c==">"){a++}return["start tag","",[],""]}else{r=c;t="start tag"}}else if(t=="start tag"){if(c=="\t"||c=="\f"||c==" "){t="start tag annotation"}else if(c=="\n"){n=c;t="start tag annotation"}else if(c=="."){t="start tag class"}else if(c==">"||c==undefined){if(c==">"){a++}return["start tag",r,[],""]}else{r+=c}}else if(t=="start tag class"){if(c=="\t"||c=="\f"||c==" "){if(n){l.push(n)}n="";t="start tag annotation"}else if(c=="\n"){if(n){l.push(n)}n=c;t="start tag annotation"}else if(c=="."){if(n){l.push(n)}n=""}else if(c==">"||c==undefined){if(c==">"){a++}if(n){l.push(n)}return["start tag",r,l,""]}else{n+=c}}else if(t=="start tag annotation"){if(c==">"||c==undefined){if(c==">"){a++}n=n.split(/[\u0020\t\f\r\n]+/).filter((function(e){if(e)return true})).join(" ");return["start tag",r,l,n]}else{n+=c}}else if(t=="end tag"){if(c==">"||c==undefined){if(c==">"){a++}return["end tag",r]}else{r+=c}}else if(t=="timestamp tag"){if(c==">"||c==undefined){if(c==">"){a++}return["timestamp",r]}else{r+=c}}else{s("Never happens.")}a++}}};var o=function(){function t(e){const t=("00"+(e-Math.floor(e)).toFixed(3)*1e3).slice(-3);let r=0,n=0,i=0;if(e>=3600){r=Math.floor(e/3600)}n=Math.floor((e-3600*r)/60);i=Math.floor(e-3600*r-60*n);return(r?r+":":"")+(""+n).padStart(2,"0")+":"+(""+i).padStart(2,"0")+"."+t}function r(t){var r="";const n=Object.keys(e).filter((r=>t[r]!==e[r]));if(n.includes("direction")){r+=" vertical:"+t.direction}if(n.includes("alignment")){r+=" align:"+t.alignment}if(n.includes("size")){r+=" size:"+t.size+"%"}if(n.includes("lineAlign")||n.includes("linePosition")){r+=" line:"+t.linePosition+(t.snapToLines?"":"%")+(t.lineAlign&&t.lineAlign!=e.lineAlign?","+t.lineAlign:"")}if(n.includes("textPosition")||n.includes("positionAlign")){r+=" position:"+t.textPosition+"%"+(t.positionAlign&&t.positionAlign!==e.positionAlign?","+t.positionAlign:"")}return r}function n(e){var r="";for(var i=0;i<e.length;i++){var o=e[i];if(o.type=="text"){r+=o.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else if(o.type=="object"){r+="<"+o.name;if(o.classes){for(var a=0;a<o.classes.length;a++){r+="."+o.classes[a]}}if(o.value){r+=" "+o.value}r+=">";if(o.children)r+=n(o.children);r+="</"+o.name+">"}else if(o.type=="timestamp"){r+="<"+t(o.value)+">"}else{r+="<"+o.value+">"}}return r}function i(e){return(e.id!==undefined?e.id+"\n":"")+t(e.startTime)+" --\x3e "+t(e.endTime)+r(e)+"\n"+n(e.tree.children)+"\n\n"}function o(e){return"STYLE\n"+e+"\n\n"}this.serialize=function(e,t){var r="WEBVTT\n\n";if(t){for(var n=0;n<t.length;n++){r+=o(t[n])}}for(var n=0;n<e.length;n++){r+=i(e[n])}return r}};function a(e){e.WebVTTParser=r;e.WebVTTCueTimingsAndSettingsParser=n;e.WebVTTCueTextParser=i;e.WebVTTSerializer=o}if(typeof window!=="undefined")a(window);if(true)a(t)})()},"./other-libs/fineuploader/s3.fine-uploaderv5.1.3.js":function(module,exports){var qq=function(e){return{hide:function(){e.style.display="none";return this},attach:function(t,r){if(e.addEventListener){e.addEventListener(t,r,false)}else if(e.attachEvent){e.attachEvent("on"+t,r)}return function(){qq(e).detach(t,r)}},detach:function(t,r){if(e.removeEventListener){e.removeEventListener(t,r,false)}else if(e.attachEvent){e.detachEvent("on"+t,r)}return this},contains:function(t){if(!t){return false}if(e===t){return true}if(e.contains){return e.contains(t)}else{return!!(t.compareDocumentPosition(e)&8)}},insertBefore:function(t){t.parentNode.insertBefore(e,t);return this},remove:function(){e.parentNode.removeChild(e);return this},css:function(t){if(e.style==null){throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!")}if(t.opacity!=null){if(typeof e.style.opacity!=="string"&&typeof e.filters!=="undefined"){t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"}}qq.extend(e.style,t);return this},hasClass:function(t){var r=new RegExp("(^| )"+t+"( |$)");return r.test(e.className)},addClass:function(t){if(!qq(e).hasClass(t)){e.className+=" "+t}return this},removeClass:function(t){var r=new RegExp("(^| )"+t+"( |$)");e.className=e.className.replace(r," ").replace(/^\s+|\s+$/g,"");return this},getByClass:function(t){var r,n=[];if(e.querySelectorAll){return e.querySelectorAll("."+t)}r=e.getElementsByTagName("*");qq.each(r,(function(e,r){if(qq(r).hasClass(t)){n.push(r)}}));return n},children:function(){var t=[],r=e.firstChild;while(r){if(r.nodeType===1){t.push(r)}r=r.nextSibling}return t},setText:function(t){e.innerText=t;e.textContent=t;return this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var r;if(e.hasAttribute){if(!e.hasAttribute(t)){return false}return/^false$/i.exec(e.getAttribute(t))==null}else{r=e[t];if(r===undefined){return false}return/^false$/i.exec(r)==null}}}};(function(){qq.canvasToBlob=function(e,t,r){return qq.dataUriToBlob(e.toDataURL(t,r))};qq.dataUriToBlob=function(e){var t,r,n=function(e,t){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=r&&new r;if(n){n.append(e);return n.getBlob(t)}else{return new Blob([e],{type:t})}},i,o;if(e.split(",")[0].indexOf("base64")>=0){r=atob(e.split(",")[1])}else{r=decodeURI(e.split(",")[1])}o=e.split(",")[0].split(":")[1].split(";")[0];t=new ArrayBuffer(r.length);i=new Uint8Array(t);qq.each(r,(function(e,t){i[e]=t.charCodeAt(0)}));return n(t,o)};qq.log=function(e,t){if(window.console){if(!t||t==="info"){window.console.log(e)}else{if(window.console[t]){window.console[t](e)}else{window.console.log("<"+t+"> "+e)}}}};qq.isObject=function(e){return e&&!e.nodeType&&Object.prototype.toString.call(e)==="[object Object]"};qq.isFunction=function(e){return typeof e==="function"};qq.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"||e&&window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer};qq.isItemList=function(e){return Object.prototype.toString.call(e)==="[object DataTransferItemList]"};qq.isNodeList=function(e){return Object.prototype.toString.call(e)==="[object NodeList]"||e.item&&e.namedItem};qq.isString=function(e){return Object.prototype.toString.call(e)==="[object String]"};qq.trimStr=function(e){if(String.prototype.trim){return e.trim()}return e.replace(/^\s+|\s+$/g,"")};qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),r=e,n=r.indexOf("{}");qq.each(t,(function(e,t){var i=r.substring(0,n),o=r.substring(n+2);r=i+t+o;n=r.indexOf("{}",n+t.length);if(n<0){return false}}));return r};qq.isFile=function(e){return window.File&&Object.prototype.toString.call(e)==="[object File]"};qq.isFileList=function(e){return window.FileList&&Object.prototype.toString.call(e)==="[object FileList]"};qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)};qq.isInput=function(e,t){var r=function(e){var r=e.toLowerCase();if(t){return r!=="file"}return r==="file"};if(window.HTMLInputElement){if(Object.prototype.toString.call(e)==="[object HTMLInputElement]"){if(e.type&&r(e.type)){return true}}}if(e.tagName){if(e.tagName.toLowerCase()==="input"){if(e.type&&r(e.type)){return true}}}return false};qq.isBlob=function(e){if(window.Blob&&Object.prototype.toString.call(e)==="[object Blob]"){return true}};qq.isXhrUploadSupported=function(){var e=document.createElement("input");e.type="file";return e.multiple!==undefined&&typeof File!=="undefined"&&typeof FormData!=="undefined"&&typeof qq.createXhrInstance().upload!=="undefined"};qq.createXhrInstance=function(){if(window.XMLHttpRequest){return new XMLHttpRequest}try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){qq.log("Neither XHR or ActiveX are supported!","error");return null}};qq.isFolderDropSupported=function(e){return e.items&&e.items.length>0&&e.items[0].webkitGetAsEntry};qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(File.prototype.slice!==undefined||File.prototype.webkitSlice!==undefined||File.prototype.mozSlice!==undefined)};qq.sliceBlob=function(e,t,r){var n=e.slice||e.mozSlice||e.webkitSlice;return n.call(e,t,r)};qq.arrayBufferToHex=function(e){var t="",r=new Uint8Array(e);qq.each(r,(function(e,r){var n=r.toString(16);if(n.length<2){n="0"+n}t+=n}));return t};qq.readBlobToHex=function(e,t,r){var n=qq.sliceBlob(e,t,t+r),i=new FileReader,o=new qq.Promise;i.onload=function(){o.success(qq.arrayBufferToHex(i.result))};i.onerror=o.failure;i.readAsArrayBuffer(n);return o};qq.extend=function(e,t,r){qq.each(t,(function(t,n){if(r&&qq.isObject(n)){if(e[t]===undefined){e[t]={}}qq.extend(e[t],n,true)}else{e[t]=n}}));return e};qq.override=function(e,t){var r={},n=t(r);qq.each(n,(function(t,n){if(e[t]!==undefined){r[t]=e[t]}e[t]=n}));return e};qq.indexOf=function(e,t,r){if(e.indexOf){return e.indexOf(t,r)}r=r||0;var n=e.length;if(r<0){r+=n}for(;r<n;r+=1){if(e.hasOwnProperty(r)&&e[r]===t){return r}}return-1};qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.random()*16|0,r=e=="x"?t:t&3|8;return r.toString(16)}))};qq.ie=function(){return navigator.userAgent.indexOf("MSIE")!==-1||navigator.userAgent.indexOf("Trident")!==-1};qq.ie7=function(){return navigator.userAgent.indexOf("MSIE 7")!==-1};qq.ie8=function(){return navigator.userAgent.indexOf("MSIE 8")!==-1};qq.ie10=function(){return navigator.userAgent.indexOf("MSIE 10")!==-1};qq.ie11=function(){return qq.ie()&&navigator.userAgent.indexOf("rv:11")!==-1};qq.safari=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Apple")!==-1};qq.chrome=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Google")!==-1};qq.opera=function(){return navigator.vendor!==undefined&&navigator.vendor.indexOf("Opera")!==-1};qq.firefox=function(){return!qq.ie11()&&navigator.userAgent.indexOf("Mozilla")!==-1&&navigator.vendor!==undefined&&navigator.vendor===""};qq.windows=function(){return navigator.platform==="Win32"};qq.android=function(){return navigator.userAgent.toLowerCase().indexOf("android")!==-1};qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0};qq.ios6=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 6_")!==-1};qq.ios7=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 7_")!==-1};qq.ios8=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 8_")!==-1};qq.ios800=function(){return qq.ios()&&navigator.userAgent.indexOf(" OS 8_0 ")!==-1};qq.ios=function(){return navigator.userAgent.indexOf("iPad")!==-1||navigator.userAgent.indexOf("iPod")!==-1||navigator.userAgent.indexOf("iPhone")!==-1};qq.iosChrome=function(){return qq.ios()&&navigator.userAgent.indexOf("CriOS")!==-1};qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&navigator.userAgent.indexOf("Safari")!==-1};qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()};qq.preventDefault=function(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var r=e.firstChild;e.removeChild(r);return r}}();qq.each=function(e,t){var r,n;if(e){if(window.Storage&&e.constructor===window.Storage){for(r=0;r<e.length;r++){n=t(e.key(r),e.getItem(e.key(r)));if(n===false){break}}}else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e)){for(r=0;r<e.length;r++){n=t(r,e[r]);if(n===false){break}}}else if(qq.isString(e)){for(r=0;r<e.length;r++){n=t(r,e.charAt(r));if(n===false){break}}}else{for(r in e){if(Object.prototype.hasOwnProperty.call(e,r)){n=t(r,e[r]);if(n===false){break}}}}}};qq.bind=function(e,t){if(qq.isFunction(e)){var r=Array.prototype.slice.call(arguments,2);return function(){var n=qq.extend([],r);if(arguments.length){n=n.concat(Array.prototype.slice.call(arguments))}return e.apply(t,n)}}throw new Error("first parameter must be a function!")};qq.obj2url=function(e,t,r){var n=[],i="&",o=function(e,r){var i=t?/\[\]$/.test(t)?t:t+"["+r+"]":r;if(i!=="undefined"&&r!=="undefined"){n.push(typeof e==="object"?qq.obj2url(e,i,true):Object.prototype.toString.call(e)==="[object Function]"?encodeURIComponent(i)+"="+encodeURIComponent(e()):encodeURIComponent(i)+"="+encodeURIComponent(e))}};if(!r&&t){i=/\?/.test(t)?/\?$/.test(t)?"":"&":"?";n.push(t);n.push(qq.obj2url(e))}else if(Object.prototype.toString.call(e)==="[object Array]"&&typeof e!=="undefined"){qq.each(e,(function(e,t){o(t,e)}))}else if(typeof e!=="undefined"&&e!==null&&typeof e==="object"){qq.each(e,(function(e,t){o(t,e)}))}else{n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}if(t){return n.join(i)}else{return n.join(i).replace(/^&/,"").replace(/%20/g,"+")}};qq.obj2FormData=function(e,t,r){if(!t){t=new FormData}qq.each(e,(function(e,n){e=r?r+"["+e+"]":e;if(qq.isObject(n)){qq.obj2FormData(n,t,e)}else if(qq.isFunction(n)){t.append(e,n())}else{t.append(e,n)}}));return t};qq.obj2Inputs=function(e,t){var r;if(!t){t=document.createElement("form")}qq.obj2FormData(e,{append:function(e,n){r=document.createElement("input");r.setAttribute("name",e);r.setAttribute("value",n);t.appendChild(r)}});return t};qq.parseJson=function(json){if(window.JSON&&qq.isFunction(JSON.parse)){return JSON.parse(json)}else{return eval("("+json+")")}};qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;if(t>0){return e.substr(t,e.length-t)}};qq.getFilename=function(e){if(qq.isInput(e)){return e.value.replace(/.*(\/|\\)/,"")}else if(qq.isFile(e)){if(e.fileName!==null&&e.fileName!==undefined){return e.fileName}}return e.name};qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do{t=e.shift();if(t){t()}}while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}})();(function(){qq.Error=function(e){this.message="[Fine Uploader "+qq.version+"] "+e};qq.Error.prototype=new Error})();qq.version="5.1.3";qq.supportedFeatures=function(){var e,t,r,n,i,o,a,s,l,c,u,p,d,h;function m(){var e=true,t;try{t=document.createElement("input");t.type="file";qq(t).hide();if(t.disabled){e=false}}catch(t){e=false}return e}function f(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)!==undefined}function g(){return(qq.chrome()||qq.opera())&&navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)!==undefined}function y(){if(window.XMLHttpRequest){var e=qq.createXhrInstance();return e.withCredentials!==undefined}return false}function b(){return window.XDomainRequest!==undefined}function v(){if(y()){return true}return b()}function w(){return document.createElement("input").webkitdirectory!==undefined}function E(){try{return!!window.localStorage}catch(e){return false}}e=m();r=e&&qq.isXhrUploadSupported();t=r&&!qq.androidStock();n=r&&f();i=r&&qq.isFileChunkingSupported();o=r&&i&&E();a=r&&g();s=e&&(window.postMessage!==undefined||r);c=y();l=b();u=v();p=w();d=r&&window.FileReader!==undefined;h=function(){if(r){return!qq.androidStock()&&!qq.iosChrome()}return false}();return{ajaxUploading:r,blobUploading:t,canDetermineSize:r,chunking:i,deleteFileCors:u,deleteFileCorsXdr:l,deleteFileCorsXhr:c,fileDrop:r,folderDrop:n,folderSelection:p,imagePreviews:d,imageValidation:d,itemSizeValidation:r,pause:i,progressBar:h,resume:o,scaling:d&&t,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:e,uploadCors:s,uploadCustomHeaders:r,uploadNonMultipart:r,uploadViaPaste:a}}();qq.isGenericPromise=function(e){return!!(e&&e.then&&qq.isFunction(e.then))};qq.Promise=function(){var e,t,r=[],n=[],i=[],o=0;qq.extend(this,{then:function(i,a){if(o===0){if(i){r.push(i)}if(a){n.push(a)}}else if(o===-1){a&&a.apply(null,t)}else if(i){i.apply(null,e)}return this},done:function(r){if(o===0){i.push(r)}else{r.apply(null,t===undefined?e:t)}return this},success:function(){o=1;e=arguments;if(r.length){qq.each(r,(function(t,r){r.apply(null,e)}))}if(i.length){qq.each(i,(function(t,r){r.apply(null,e)}))}return this},failure:function(){o=-1;t=arguments;if(n.length){qq.each(n,(function(e,r){r.apply(null,t)}))}if(i.length){qq.each(i,(function(e,r){r.apply(null,t)}))}return this}})};qq.BlobProxy=function(e,t){qq.extend(this,{referenceBlob:e,create:function(){return t(e)}})};qq.UploadButton=function(e){var t=this,r=new qq.DisposeSupport,n={element:null,multiple:false,acceptFiles:null,folders:false,name:"qqfile",onChange:function(e){},ios8BrowserCrashWorkaround:true,hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"},i,o;qq.extend(n,e);o=qq.getUniqueId();function a(){var e=document.createElement("input");e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,o);t.setMultiple(n.multiple,e);if(n.folders&&qq.supportedFeatures.folderSelection){e.setAttribute("webkitdirectory","")}if(n.acceptFiles){e.setAttribute("accept",n.acceptFiles)}e.setAttribute("type","file");e.setAttribute("name",n.name);qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0});!qq.ie7()&&qq(e).css({height:"100%"});n.element.appendChild(e);r.attach(e,"change",(function(){n.onChange(e)}));r.attach(e,"mouseover",(function(){qq(n.element).addClass(n.hoverClass)}));r.attach(e,"mouseout",(function(){qq(n.element).removeClass(n.hoverClass)}));r.attach(e,"focus",(function(){qq(n.element).addClass(n.focusClass)}));r.attach(e,"blur",(function(){qq(n.element).removeClass(n.focusClass)}));if(window.attachEvent){e.setAttribute("tabIndex","-1")}return e}qq(n.element).css({position:"relative",overflow:"hidden",direction:"ltr"});qq.extend(this,{getInput:function(){return i},getButtonId:function(){return o},setMultiple:function(e,t){var r=t||this.getInput();if(n.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())){r.setAttribute("multiple","")}else{if(e){r.setAttribute("multiple","")}else{r.removeAttribute("multiple")}}},setAcceptFiles:function(e){if(e!==n.acceptFiles){i.setAttribute("accept",e)}},reset:function(){if(i.parentNode){qq(i).remove()}qq(n.element).removeClass(n.focusClass);i=null;i=a()}});i=a()};qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id";qq.UploadData=function(e){var t=[],r={},n={},i={},o={};function a(e){if(qq.isArray(e)){var r=[];qq.each(e,(function(e,n){r.push(t[n])}));return r}return t[e]}function s(e){if(qq.isArray(e)){var n=[];qq.each(e,(function(e,i){n.push(t[r[i]])}));return n}return t[r[e]]}function l(e){var r=[],i=[].concat(e);qq.each(i,(function(e,i){var o=n[i];if(o!==undefined){qq.each(o,(function(e,n){r.push(t[n])}))}}));return r}qq.extend(this,{addFile:function(a){var s=a.status||qq.status.SUBMITTING,l=t.push({name:a.name,originalName:a.name,uuid:a.uuid,size:a.size||-1,status:s})-1;if(a.batchId){t[l].batchId=a.batchId;if(o[a.batchId]===undefined){o[a.batchId]=[]}o[a.batchId].push(l)}if(a.proxyGroupId){t[l].proxyGroupId=a.proxyGroupId;if(i[a.proxyGroupId]===undefined){i[a.proxyGroupId]=[]}i[a.proxyGroupId].push(l)}t[l].id=l;r[a.uuid]=l;if(n[s]===undefined){n[s]=[]}n[s].push(l);e.onStatusChange(l,null,s);return l},retrieve:function(e){if(qq.isObject(e)&&t.length){if(e.id!==undefined){return a(e.id)}else if(e.uuid!==undefined){return s(e.uuid)}else if(e.status){return l(e.status)}}else{return qq.extend([],t,true)}},reset:function(){t=[];r={};n={};o={}},setStatus:function(r,i){var o=t[r].status,a=qq.indexOf(n[o],r);n[o].splice(a,1);t[r].status=i;if(n[i]===undefined){n[i]=[]}n[i].push(r);e.onStatusChange(r,o,i)},uuidChanged:function(e,n){var i=t[e].uuid;t[e].uuid=n;r[n]=e;delete r[i]},updateName:function(e,r){t[e].name=r},updateSize:function(e,r){t[e].size=r},setParentId:function(e,r){t[e].parentId=r},getIdsInProxyGroup:function(e){var r=t[e].proxyGroupId;if(r){return i[r]}return[]},getIdsInBatch:function(e){var r=t[e].batchId;return o[r]}})};qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"};(function(){qq.basePublicApi={addBlobs:function(e,t,r){this.addFiles(e,t,r)},addFiles:function(e,t,r){this._maybeHandleIos8SafariWorkaround();var n=this._storedIds.length===0?qq.getUniqueId():this._currentBatchId,i=qq.bind((function(e){this._handleNewFile({blob:e,name:this._options.blobs.defaultName},n,p)}),this),o=qq.bind((function(e){this._handleNewFile(e,n,p)}),this),a=qq.bind((function(e){var t=qq.canvasToBlob(e);this._handleNewFile({blob:t,name:this._options.blobs.defaultName+".png"},n,p)}),this),s=qq.bind((function(e){var t=e.quality&&e.quality/100,r=qq.canvasToBlob(e.canvas,e.type,t);this._handleNewFile({blob:r,name:e.name},n,p)}),this),l=qq.bind((function(e){if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading){var t=Array.prototype.slice.call(e.files);qq.each(t,(function(e,t){this._handleNewFile(t,n,p)}))}else{this._handleNewFile(e,n,p)}}),this),c=function(){if(qq.isFileList(e)){e=Array.prototype.slice.call(e)}e=[].concat(e)},u=this,p=[];this._currentBatchId=n;if(e){c();qq.each(e,(function(e,t){if(qq.isFileOrInput(t)){l(t)}else if(qq.isBlob(t)){i(t)}else if(qq.isObject(t)){if(t.blob&&t.name){o(t)}else if(t.canvas&&t.name){s(t)}}else if(t.tagName&&t.tagName.toLowerCase()==="canvas"){a(t)}else{u.log(t+" is not a valid file container!  Ignoring!","warn")}}));this.log("Received "+p.length+" files.");this._prepareItemsForUpload(p,t,r)}},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds);qq.each(e,(function(e,r){t.cancel(r)}));this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false}if(t.status===qq.status.PAUSED){this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e)));this._uploadFile(e);return true}else{this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error")}return false},deleteFile:function(e){return this._onSubmitDelete(e)},doesExist:function(e){return this._handler.isValid(e)},drawThumbnail:function(e,t,r,n){var i=new qq.Promise,o,a;if(this._imageGenerator){o=this._thumbnailUrls[e];a={scale:r>0,maxSize:r>0?r:null};if(!n&&qq.supportedFeatures.imagePreviews){o=this.getFile(e)}if(o==null){i.failure({container:t,error:"File or URL not found."})}else{this._imageGenerator.generate(o,t,a).then((function e(t){i.success(t)}),(function e(t,r){i.failure({container:t,error:r||"Problem generating thumbnail"})}))}}else{i.failure({container:t,error:"Missing image generator module"})}return i},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},getEndpoint:function(e){return this._endpointStore.get(e)},getFile:function(e){return this._handler.getFile(e)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(e){return this._uploadData.retrieve({id:e}).name},getParentId:function(e){var t=this.getUploads({id:e}),r=null;if(t){if(t.parentId!==undefined){r=t.parentId}}return r},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._uploadData.retrieve({id:e}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var e=this._currentItemLimit;if(e>0){return e-this._netUploadedOrQueued}return null},getUploads:function(e){return this._uploadData.retrieve(e)},getUuid:function(e){return this._uploadData.retrieve({id:e}).uuid},log:function(e,t){if(this._options.debug&&(!t||t==="info")){qq.log("[Fine Uploader "+qq.version+"] "+e)}else if(t&&t!=="info"){qq.log("[Fine Uploader "+qq.version+"] "+e,t)}},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled){return false}if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e)){this._uploadData.setStatus(e,qq.status.PAUSED);return true}else{this.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}}else{this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error")}return false},reset:function(){this.log("Resetting uploader...");this._handler.reset();this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];qq.each(this._buttons,(function(e,t){t.reset()}));this._paramsStore.reset();this._endpointStore.reset();this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData.reset();this._buttonIdsForFileIds=[];this._pasteHandler&&this._pasteHandler.reset();this._options.session.refreshOnReset&&this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._totalProgress&&this._totalProgress.reset()},retry:function(e){return this._manualRetry(e)},scaleImage:function(e,t){var r=this;return qq.Scaler.prototype.scaleImage(e,t,{log:qq.bind(r.log,r),getFile:qq.bind(r.getFile,r),uploadData:r._uploadData})},setCustomHeaders:function(e,t){this._customHeadersStore.set(e,t)},setDeleteFileCustomHeaders:function(e,t){this._deleteFileCustomHeadersStore.set(e,t)},setDeleteFileEndpoint:function(e,t){this._deleteFileEndpointStore.set(e,t)},setDeleteFileParams:function(e,t){this._deleteFileParamsStore.set(e,t)},setEndpoint:function(e,t){this._endpointStore.set(e,t)},setItemLimit:function(e){this._currentItemLimit=e},setName:function(e,t){this._uploadData.updateName(e,t)},setParams:function(e,t){this._paramsStore.set(e,t)},setUuid:function(e,t){return this._uploadData.uuidChanged(e,t)},uploadStoredFiles:function(){var e;if(this._storedIds.length===0){this._itemError("noFilesError")}else{while(this._storedIds.length){e=this._storedIds.shift();this._uploadFile(e)}}}};qq.basePrivateApi={_addCannedFile:function(e){var t=this._uploadData.addFile({uuid:e.uuid,name:e.name,size:e.size,status:qq.status.UPLOAD_SUCCESSFUL});e.deleteFileEndpoint&&this.setDeleteFileEndpoint(e.deleteFileEndpoint,t);e.deleteFileParams&&this.setDeleteFileParams(e.deleteFileParams,t);if(e.thumbnailUrl){this._thumbnailUrls[t]=e.thumbnailUrl}this._netUploaded++;this._netUploadedOrQueued++;return t},_annotateWithButtonId:function(e,t){if(qq.isFile(e)){e.qqButtonId=this._getButtonId(t)}},_batchError:function(e){this._options.callbacks.onError(null,null,e,undefined)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,demoMode:this._options.demoMode,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t);e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,r,n){e._onDeleteComplete(t,r,n);e._options.callbacks.onDeleteComplete(t,r,n)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createStore:function(e,t){var r={},n=e,i={},o=function(e){if(qq.isObject(e)){return qq.extend({},e)}return e},a=function(){if(qq.isFunction(t)){return t()}return t},s=function(e,r){if(t&&qq.isObject(r)){qq.extend(r,a())}if(i[e]){qq.extend(r,i[e])}};return{set:function(e,t){if(t==null){r={};n=o(e)}else{r[t]=o(e)}},get:function(e){var t;if(e!=null&&r[e]){t=r[e]}else{t=o(n)}s(e,t);return o(t)},addReadOnly:function(e,t){if(qq.isObject(r)){i[e]=i[e]||{};qq.extend(i[e],t)}},remove:function(e){return delete r[e]},reset:function(){r={};i={};n=e}}},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,r,n){e._onUploadStatusChange(t,r,n);e._options.callbacks.onStatusChange(t,r,n);e._maybeAllComplete(t,n);if(e._totalProgress){setTimeout((function(){e._totalProgress.onStatusChange(t,r,n)}),0)}}})},_createUploadButton:function(e){var t=this,r=e.accept||this._options.validation.acceptFiles,n=e.allowedExtensions||this._options.validation.allowedExtensions,i;function o(){if(qq.supportedFeatures.ajaxUploading){if(t._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&t._isAllowedExtension(n,".mov")){return false}if(e.multiple===undefined){return t._options.multiple}return e.multiple}return false}i=new qq.UploadButton({element:e.element,folders:e.folders,name:this._options.request.inputName,multiple:o(),acceptFiles:r,onChange:function(e){t._onInputChange(e)},hoverClass:this._options.classes.buttonHover,focusClass:this._options.classes.buttonFocus,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash});this._disposeSupport.addDisposer((function(){i.dispose()}));t._buttons.push(i);return i},_createUploadHandler:function(e,t){var r=this,n={},i={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,demoMode:this._options.demoMode,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(r.log,r),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(e,t,i,o){if(i<0||o<0){return}if(n[e]){if(n[e].loaded!==i||n[e].total!==o){r._onProgress(e,t,i,o);r._options.callbacks.onProgress(e,t,i,o)}}else{r._onProgress(e,t,i,o);r._options.callbacks.onProgress(e,t,i,o)}n[e]={loaded:i,total:o}},onComplete:function(e,t,i,o){delete n[e];var a=r.getUploads({id:e}).status,s;if(a===qq.status.UPLOAD_SUCCESSFUL||a===qq.status.UPLOAD_FAILED){return}s=r._onComplete(e,t,i,o);if(s instanceof qq.Promise){s.done((function(){r._options.callbacks.onComplete(e,t,i,o)}))}else{r._options.callbacks.onComplete(e,t,i,o)}},onCancel:function(e,t,n){var i=new qq.Promise;r._handleCheckedCallback({name:"onCancel",callback:qq.bind(r._options.callbacks.onCancel,r,e,t),onFailure:i.failure,onSuccess:function(){n.then((function(){r._onCancel(e,t)}));i.success()},identifier:e});return i},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(e,t){r._onUpload(e,t);r._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,n){r._onUploadChunk(e,n);r._options.callbacks.onUploadChunk(e,t,n)},onUploadChunkSuccess:function(e,t,n,i){r._options.callbacks.onUploadChunkSuccess.apply(r,arguments)},onResume:function(e,t,n){return r._options.callbacks.onResume(e,t,n)},onAutoRetry:function(e,t,n,i){return r._onAutoRetry.apply(r,arguments)},onUuidChanged:function(e,t){r.log("Server requested UUID change from '"+r.getUuid(e)+"' to '"+t+"'");r.setUuid(e,t)},getName:qq.bind(r.getName,r),getUuid:qq.bind(r.getUuid,r),getSize:qq.bind(r.getSize,r),setSize:qq.bind(r._setSize,r),getDataByUuid:function(e){return r.getUploads({uuid:e})},isQueued:function(e){var t=r.getUploads({id:e}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:r._uploadData.getIdsInProxyGroup,getIdsInBatch:r._uploadData.getIdsInBatch};qq.each(this._options.request,(function(e,t){i[e]=t}));i.customHeaders=this._customHeadersStore;if(e){qq.each(e,(function(e,t){i[e]=t}))}return new qq.UploadHandlerController(i,t)},_fileOrBlobRejected:function(e){this._netUploadedOrQueued--;this._uploadData.setStatus(e,qq.status.REJECTED)},_formatSize:function(e){var t=-1;do{e=e/1e3;t++}while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={};qq.each(this._options.extraButtons,(function(t,r){var n=r.multiple,i=qq.extend({},e._options.validation,true),o=qq.extend({},r);if(n===undefined){n=e._options.multiple}if(o.validation){qq.extend(i,r.validation,true)}qq.extend(o,{multiple:n,validation:i},true);e._initExtraButton(o)}))},_getButton:function(e){var t=this._extraButtonSpecs[e];if(t){return t.element}else if(e===this._defaultButtonId){return this._options.button}},_getButtonId:function(e){var t,r,n=e;if(n instanceof qq.BlobProxy){n=n.referenceBlob}if(n&&!qq.isBlob(n)){if(qq.isFile(n)){return n.qqButtonId}else if(n.tagName.toLowerCase()==="input"&&n.type.toLowerCase()==="file"){return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}t=n.getElementsByTagName("input");qq.each(t,(function(e,t){if(t.getAttribute("type")==="file"){r=t;return false}}));if(r){return r.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation},_getValidationDescriptor:function(e){if(e.file instanceof qq.BlobProxy){return{name:qq.getFilename(e.file.referenceBlob),size:e.file.referenceBlob.size}}return{name:this.getUploads({id:e.id}).name,size:this.getUploads({id:e.id}).size}},_getValidationDescriptors:function(e){var t=this,r=[];qq.each(e,(function(e,n){r.push(t._getValidationDescriptor(n))}));return r},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e="image/*;capture=camera",t=this._options.camera.button,r=t?this._getButtonId(t):this._defaultButtonId,n=this._options;if(r&&r!==this._defaultButtonId){n=this._extraButtonSpecs[r]}n.multiple=false;if(n.validation.acceptFiles===null){n.validation.acceptFiles=e}else{n.validation.acceptFiles+=","+e}qq.each(this._buttons,(function(e,t){if(t.getButtonId()===r){t.setMultiple(n.multiple);t.setAcceptFiles(n.acceptFiles);return false}}))}},_handleCheckedCallback:function(e){var t=this,r=e.callback();if(qq.isGenericPromise(r)){this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier);return r.then((function(r){t.log(e.name+" promise success for "+e.identifier);e.onSuccess(r)}),(function(){if(e.onFailure){t.log(e.name+" promise failure for "+e.identifier);e.onFailure()}else{t.log(e.name+" promise failure for "+e.identifier)}}))}if(r!==false){e.onSuccess(r)}else{if(e.onFailure){this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback.");e.onFailure()}else{this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed.")}}return r},_handleNewFile:function(e,t,r){var n=this,i=qq.getUniqueId(),o=-1,a=qq.getFilename(e),s=e.blob||e,l=this._customNewFileHandler?this._customNewFileHandler:qq.bind(n._handleNewFileGeneric,n);if(!qq.isInput(s)&&s.size>=0){o=s.size}l(s,a,i,o,r,t,this._options.request.uuidName,{uploadData:n._uploadData,paramsStore:n._paramsStore,addFileToHandler:function(e,t){n._handler.add(e,t);n._netUploadedOrQueued++;n._trackButton(e)}})},_handleNewFileGeneric:function(e,t,r,n,i,o){var a=this._uploadData.addFile({uuid:r,name:t,size:n,batchId:o});this._handler.add(a,e);this._trackButton(a);this._netUploadedOrQueued++;i.push({id:a,file:e})},_handlePasteSuccess:function(e,t){var r=e.type.split("/")[1],n=t;if(n==null){n=this._options.paste.defaultName}n+="."+r;this.addFiles({name:n,blob:e})},_initExtraButton:function(e){var t=this._createUploadButton({element:e.element,multiple:e.multiple,accept:e.validation.acceptFiles,folders:e.folders,allowedExtensions:e.validation.allowedExtensions});this._extraButtonSpecs[t.getButtonId()]=e},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this));if(this._formSupport&&this._formSupport.attachedToForm){this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject);this._options.autoUpload=this._formSupport.newAutoUpload;if(this._formSupport.newEndpoint){this._options.request.endpoint=this._formSupport.newEndpoint}}else{this._paramsStore=this._createStore(this._options.request.params)}},_isDeletePossible:function(){if(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled){return false}if(this._options.cors.expected){if(qq.supportedFeatures.deleteFileCorsXhr){return true}if(qq.supportedFeatures.deleteFileCorsXdr&&this._options.cors.allowXdr){return true}return false}return true},_isAllowedExtension:function(e,t){var r=false;if(!e.length){return true}qq.each(e,(function(e,n){if(qq.isString(n)){var i=new RegExp("\\."+n+"$","i");if(t.match(i)!=null){r=true;return false}}}));return r},_itemError:function(e,t,r){var n=this._options.messages[e],i=[],o=[].concat(t),a=o[0],s=this._getButtonId(r),l=this._getValidationBase(s),c,u;function p(e,t){n=n.replace(e,t)}qq.each(l.allowedExtensions,(function(e,t){if(qq.isString(t)){i.push(t)}}));c=i.join(", ").toLowerCase();p("{file}",this._options.formatFileName(a));p("{extensions}",c);p("{sizeLimit}",this._formatSize(l.sizeLimit));p("{minSizeLimit}",this._formatSize(l.minSizeLimit));u=n.match(/(\{\w+\})/g);if(u!==null){qq.each(u,(function(e,t){p(t,o[e])}))}this._options.callbacks.onError(null,a,n,undefined);return n},_manualRetry:function(e,t){if(this._onBeforeManualRetry(e)){this._netUploadedOrQueued++;this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING);if(t){t(e)}else{this._handler.retry(e)}return true}},_maybeAllComplete:function(e,t){var r=this,n=this._getNotFinished();if(t===qq.status.UPLOAD_SUCCESSFUL){this._succeededSinceLastAllComplete.push(e)}else if(t===qq.status.UPLOAD_FAILED){this._failedSinceLastAllComplete.push(e)}if(n===0&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)){setTimeout((function(){r._onAllComplete(r._succeededSinceLastAllComplete,r._failedSinceLastAllComplete)}),0)}},_maybeHandleIos8SafariWorkaround:function(){var e=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){setTimeout((function(){window.alert(e._options.messages.unsupportedBrowserIos8Safari)}),0);throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)}},_maybeParseAndSendUploadError:function(e,t,r,n){if(!r.success){if(n&&(n.status!==200||n.status!==201)&&!r.error){this._options.callbacks.onError(e,t,"XHR returned response code "+n.status,n)}else{var i=r.error?r.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,i,n)}}},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,r,n,i){var o=this;if(t.length>r){if(e||!this._options.validation.stopOnFirstInvalidFile){setTimeout((function(){var e=o._getValidationDescriptor(t[r]),a=o._getButtonId(t[r].file),s=o._getButton(a);o._handleCheckedCallback({name:"onValidate",callback:qq.bind(o._options.callbacks.onValidate,o,e,s),onSuccess:qq.bind(o._onValidateCallbackSuccess,o,t,r,n,i),onFailure:qq.bind(o._onValidateCallbackFailure,o,t,r,n,i),identifier:"Item '"+e.name+"', size: "+e.size})}),0)}else if(!e){for(;r<t.length;r++){o._fileOrBlobRejected(t[r].id)}}}},_onAllComplete:function(e,t){this._totalProgress&&this._totalProgress.onAllComplete(e,t,this._preventRetries);this._options.callbacks.onAllComplete(qq.extend([],e),qq.extend([],t));this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[]},_onAutoRetry:function(e,t,r,n,i){var o=this;o._preventRetries[e]=r[o._options.retry.preventRetryResponseProperty];if(o._shouldAutoRetry(e,t,r)){o._maybeParseAndSendUploadError.apply(o,arguments);o._options.callbacks.onAutoRetry(e,t,o._autoRetries[e]);o._onBeforeAutoRetry(e,t);o._retryTimeouts[e]=setTimeout((function(){o.log("Retrying "+t+"...");o._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING);if(i){i(e)}else{o._handler.retry(e)}}),o._options.retry.autoAttemptDelay*1e3);return true}},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(e){var t=this._currentItemLimit,r;if(this._preventRetries[e]){this.log("Retries are forbidden for id "+e,"warn");return false}else if(this._handler.isValid(e)){r=this.getName(e);if(this._options.callbacks.onManualRetry(e,r)===false){return false}if(t>0&&this._netUploadedOrQueued+1>t){this._itemError("retryFailTooManyItems");return false}this.log("Retrying upload for '"+r+"' (id: "+e+")...");return true}else{this.log("'"+e+"' is not a valid file ID","error");return false}},_onCancel:function(e,t){this._netUploadedOrQueued--;clearTimeout(this._retryTimeouts[e]);var r=qq.indexOf(this._storedIds,e);if(!this._options.autoUpload&&r>=0){this._storedIds.splice(r,1)}this._uploadData.setStatus(e,qq.status.CANCELED)},_onComplete:function(e,t,r,n){if(!r.success){this._netUploadedOrQueued--;this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED);if(r[this._options.retry.preventRetryResponseProperty]===true){this._preventRetries[e]=true}}else{if(r.thumbnailUrl){this._thumbnailUrls[e]=r.thumbnailUrl}this._netUploaded++;this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)}this._maybeParseAndSendUploadError(e,t,r,n);return r.success?true:false},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,r){var n=this.getName(e);if(r){this._uploadData.setStatus(e,qq.status.DELETE_FAILED);this.log("Delete request for '"+n+"' has failed.","error");if(t.withCredentials===undefined){this._options.callbacks.onError(e,n,"Delete request failed",t)}else{this._options.callbacks.onError(e,n,"Delete request failed with response code "+t.status,t)}}else{this._netUploadedOrQueued--;this._netUploaded--;this._handler.expunge(e);this._uploadData.setStatus(e,qq.status.DELETED);this.log("Delete request for '"+n+"' has succeeded.")}},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++){this._annotateWithButtonId(e.files[t],e)}this.addFiles(e.files)}else if(e.value.length>0){this.addFiles(e)}qq.each(this._buttons,(function(e,t){t.reset()}))},_onProgress:function(e,t,r,n){this._totalProgress&&this._totalProgress.onIndividualProgress(e,r,n)},_onSubmit:function(e,t){},_onSubmitCallbackSuccess:function(e,t){this._onSubmit.apply(this,arguments);this._uploadData.setStatus(e,qq.status.SUBMITTED);this._onSubmitted.apply(this,arguments);this._options.callbacks.onSubmitted.apply(this,arguments);if(this._options.autoUpload){this._uploadFile(e)}else{this._storeForLater(e)}},_onSubmitDelete:function(e,t,r){var n=this.getUuid(e),i;if(t){i=qq.bind(t,this,e,n,r)}if(this._isDeletePossible()){this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:i||qq.bind(this._deleteHandler.sendDelete,this,e,n,r),identifier:e});return true}else{this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible "+"due to CORS on a user agent that does not support pre-flighting.","warn");return false}},_onSubmitted:function(e){},_onTotalProgress:function(e,t){this._options.callbacks.onTotalProgress(e,t)},_onUploadPrep:function(e){},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(e,t){},_onUploadStatusChange:function(e,t,r){if(r===qq.status.PAUSED){clearTimeout(this._retryTimeouts[e])}},_onValidateBatchCallbackFailure:function(e){var t=this;qq.each(e,(function(e,r){t._fileOrBlobRejected(r.id)}))},_onValidateBatchCallbackSuccess:function(e,t,r,n,i){var o,a=this._currentItemLimit,s=this._netUploadedOrQueued;if(a===0||s<=a){if(t.length>0){this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],i),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,r,n),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,r,n),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size})}else{this._itemError("noFilesError")}}else{this._onValidateBatchCallbackFailure(t);o=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,s).replace(/\{itemLimit\}/g,a);this._batchError(o)}},_onValidateCallbackFailure:function(e,t,r,n){var i=t+1;this._fileOrBlobRejected(e[t].id,e[t].file.name);this._maybeProcessNextItemAfterOnValidateCallback(false,e,i,r,n)},_onValidateCallbackSuccess:function(e,t,r,n){var i=this,o=t+1,a=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],a).then((function(){i._upload(e[t].id,r,n);i._maybeProcessNextItemAfterOnValidateCallback(true,e,o,r,n)}),(function(){i._maybeProcessNextItemAfterOnValidateCallback(false,e,o,r,n)}))},_prepareItemsForUpload:function(e,t,r){if(e.length===0){this._itemError("noFilesError");return}var n=this._getValidationDescriptors(e),i=this._getButtonId(e[0].file),o=this._getButton(i);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,n,o),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,n,e,t,r,o),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,e),identifier:"batch validation"})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",(function(t){if(e.getInProgress()){t=t||window.event;t.returnValue=e._options.messages.onLeave;return e._options.messages.onLeave}}))},_refreshSessionData:function(){var e=this,t=this._options.session;if(qq.Session&&this._options.session.endpoint!=null){if(!this._session){qq.extend(t,this._options.cors);t.log=qq.bind(this.log,this);t.addFileRecord=qq.bind(this._addCannedFile,this);this._session=new qq.Session(t)}setTimeout((function(){e._session.refresh().then((function(t,r){e._options.callbacks.onSessionRequestComplete(t,true,r)}),(function(t,r){e._options.callbacks.onSessionRequestComplete(t,false,r)}))}),0)}},_setSize:function(e,t){this._uploadData.updateSize(e,t);this._totalProgress&&this._totalProgress.onNewSize(e)},_shouldAutoRetry:function(e,t,r){var n=this._uploadData.retrieve({id:e});if(!this._preventRetries[e]&&this._options.retry.enableAuto&&n.status!==qq.status.PAUSED){if(this._autoRetries[e]===undefined){this._autoRetries[e]=0}if(this._autoRetries[e]<this._options.retry.maxAutoAttempts){this._autoRetries[e]+=1;return true}}return false},_storeForLater:function(e){this._storedIds.push(e)},_trackButton:function(e){var t;if(qq.supportedFeatures.ajaxUploading){t=this._handler.getFile(e).qqButtonId}else{t=this._getButtonId(this._handler.getInput(e))}if(t){this._buttonIdsForFileIds[e]=t}},_upload:function(e,t,r){var n=this.getName(e);if(t){this.setParams(t,e)}if(r){this.setEndpoint(r,e)}this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,e,n),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,e,n),onFailure:qq.bind(this._fileOrBlobRejected,this,e,n),identifier:e})},_uploadFile:function(e){if(!this._handler.upload(e)){this._uploadData.setStatus(e,qq.status.QUEUED)}},_validateFileOrBlobData:function(e,t){var r=this,n=function(){if(e.file instanceof qq.BlobProxy){return e.file.referenceBlob}return e.file}(),i=t.name,o=t.size,a=this._getButtonId(e.file),s=this._getValidationBase(a),l=new qq.Promise;l.then((function(){}),(function(){r._fileOrBlobRejected(e.id,i)}));if(qq.isFileOrInput(n)&&!this._isAllowedExtension(s.allowedExtensions,i)){this._itemError("typeError",i,n);return l.failure()}if(o===0){this._itemError("emptyError",i,n);return l.failure()}if(o>0&&s.sizeLimit&&o>s.sizeLimit){this._itemError("sizeError",i,n);return l.failure()}if(o>0&&o<s.minSizeLimit){this._itemError("minSizeError",i,n);return l.failure()}if(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(n)){new qq.ImageValidation(n,qq.bind(r.log,r)).validate(s.image).then(l.success,(function(e){r._itemError(e+"ImageError",i,n);l.failure()}))}else{l.success()}return l},_wrapCallbacks:function(){var e,t,r;e=this;t=function(t,r,n){var i;try{return r.apply(e,n)}catch(r){i=r.message||r.toString();e.log("Caught exception in '"+t+"' callback - "+i,"error")}};for(r in this._options.callbacks){(function(){var n,i;n=r;i=e._options.callbacks[n];e._options.callbacks[n]=function(){return t(n,i,arguments)}})()}}}})();(function(){qq.FineUploaderBasic=function(e){var t=this;this._options={debug:false,button:null,multiple:true,maxConnections:3,disableCancelForFormUploads:false,autoUpload:true,request:{endpoint:"/server/upload",params:{},paramsInBody:true,customHeaders:{},forceMultipart:true,inputName:"qqfile",uuidName:"qquuid",totalFileSizeName:"qqtotalfilesize",filenameParam:"qqfilename"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:true,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0}},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,r,n){},onAllComplete:function(e,t){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,r){},onUploadChunkSuccess:function(e,t,r,n){},onResume:function(e,t,r){},onProgress:function(e,t,r,n){},onTotalProgress:function(e,t){},onError:function(e,t,r,n){},onAutoRetry:function(e,t,r){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,r){},onPasteReceived:function(e){},onStatusChange:function(e,t,r){},onSessionRequestComplete:function(e,t,r){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:false,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:false,concurrent:{enabled:false},mandatory:false,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2e6,success:{endpoint:null}},resume:{enabled:false,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){if(e!==undefined&&e.length>33){e=e.slice(0,19)+"..."+e.slice(-14)}return e},text:{defaultResponseError:"Upload failure reason unknown",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:false,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:false,sendCredentials:false,allowXdr:false},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:false,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:true},form:{element:"qq-form",autoUpload:false,interceptSubmit:true},scaling:{sendOriginal:true,orient:true,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:false,sizes:[]},workarounds:{iosEmptyVideos:true,ios8SafariUploads:true,ios8BrowserCrash:true}};qq.extend(this._options,e,true);this._buttons=[];this._extraButtonSpecs={};this._buttonIdsForFileIds=[];this._wrapCallbacks();this._disposeSupport=new qq.DisposeSupport;this._storedIds=[];this._autoRetries=[];this._retryTimeouts=[];this._preventRetries=[];this._thumbnailUrls=[];this._netUploadedOrQueued=0;this._netUploaded=0;this._uploadData=this._createUploadDataTracker();this._initFormSupportAndParams();this._customHeadersStore=this._createStore(this._options.request.customHeaders);this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders);this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params);this._endpointStore=this._createStore(this._options.request.endpoint);this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint);this._handler=this._createUploadHandler();this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler();if(this._options.button){this._defaultButtonId=this._createUploadButton({element:this._options.button}).getButtonId()}this._generateExtraButtonSpecs();this._handleCameraAccess();if(this._options.paste.targetElement){if(qq.PasteSupport){this._pasteHandler=this._createPasteHandler()}else{this.log("Paste support module not found","error")}}this._preventLeaveInProgress();this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this));this._refreshSessionData();this._succeededSinceLastAllComplete=[];this._failedSinceLastAllComplete=[];this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{};if(this._scaler.enabled){this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)}if(qq.TotalProgress&&qq.supportedFeatures.progressBar){this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),(function(e){var r=t._uploadData.retrieve({id:e});return r&&r.size||0}))}this._currentItemLimit=this._options.validation.itemLimit};qq.FineUploaderBasic.prototype=qq.basePublicApi;qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)})();qq.AjaxRequester=function(e){var t,r,n=[],i={},o={acceptHeader:null,validMethods:["POST"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:true,successfulResponseCodes:{DELETE:[200,202,204],POST:[200,201,204],GET:[200,201]},cors:{expected:false,sendCredentials:false},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,r){},onProgress:null};qq.extend(o,e);t=o.log;if(qq.indexOf(o.validMethods,o.method)<0){throw new Error("'"+o.method+"' is not a supported method for this type of request!")}function a(){return qq.indexOf(["GET","POST","HEAD"],o.method)>=0}function s(e){var t=false;qq.each(t,(function(e,r){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],r)<0){t=true;return false}}));return t}function l(e){return o.cors.expected&&e.withCredentials===undefined}function c(){var e;if(window.XMLHttpRequest||window.ActiveXObject){e=qq.createXhrInstance();if(e.withCredentials===undefined){e=new XDomainRequest}}return e}function u(e,t){var r=i[e].xhr;if(!r){if(t){r=t}else{if(o.cors.expected){r=c()}else{r=qq.createXhrInstance()}}i[e].xhr=r}return r}function p(e){var t=qq.indexOf(n,e),r=o.maxConnections,a;delete i[e];n.splice(t,1);if(n.length>=r&&t<r){a=n[r-1];m(a)}}function d(e,r){var n=u(e),i=o.method,a=r===true;p(e);if(a){t(i+" request for "+e+" has failed","error")}else if(!l(n)&&!E(n.status)){a=true;t(i+" request for "+e+" has failed - response code "+n.status,"error")}o.onComplete(e,n,a)}function h(e){var t=i[e].additionalParams,r=o.mandatedParams,n;if(o.paramsStore.get){n=o.paramsStore.get(e)}if(t){qq.each(t,(function(e,t){n=n||{};n[e]=t}))}if(r){qq.each(r,(function(e,t){n=n||{};n[e]=t}))}return n}function m(e,n){var a=u(e,n),s=o.method,c=h(e),p=i[e].payload,d;o.onSend(e);d=f(e,c);if(l(a)){a.onload=b(e);a.onerror=v(e)}else{a.onreadystatechange=g(e)}y(e);a.open(s,d,true);if(o.cors.expected&&o.cors.sendCredentials&&!l(a)){a.withCredentials=true}w(e);t("Sending "+s+" request for "+e);if(p){a.send(p)}else if(r||!c){a.send()}else if(c&&o.contentType&&o.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0){a.send(qq.obj2url(c,""))}else if(c&&o.contentType&&o.contentType.toLowerCase().indexOf("application/json")>=0){a.send(JSON.stringify(c))}else{a.send(c)}return a}function f(e,t){var n=o.endpointStore.get(e),a=i[e].addToPath;if(a!=undefined){n+="/"+a}if(r&&t){return qq.obj2url(t,n)}else{return n}}function g(e){return function(){if(u(e).readyState===4){d(e)}}}function y(e){var t=o.onProgress;if(t){u(e).upload.onprogress=function(r){if(r.lengthComputable){t(e,r.loaded,r.total)}}}}function b(e){return function(){d(e)}}function v(e){return function(){d(e,true)}}function w(e){var t=u(e),r=o.customHeaders,n=i[e].additionalHeaders||{},c=o.method,p={};if(!l(t)){o.acceptHeader&&t.setRequestHeader("Accept",o.acceptHeader);if(o.allowXRequestedWithAndCacheControl){if(!o.cors.expected||(!a()||s(r))){t.setRequestHeader("X-Requested-With","XMLHttpRequest");t.setRequestHeader("Cache-Control","no-cache")}}if(o.contentType&&(c==="POST"||c==="PUT")){t.setRequestHeader("Content-Type",o.contentType)}qq.extend(p,qq.isFunction(r)?r(e):r);qq.extend(p,n);qq.each(p,(function(e,r){t.setRequestHeader(e,r)}))}}function E(e){return qq.indexOf(o.successfulResponseCodes[o.method],e)>=0}function S(e,t,r,a,s,l){i[e]={addToPath:r,additionalParams:a,additionalHeaders:s,payload:l};var c=n.push(e);if(c<=o.maxConnections){return m(e,t)}}r=o.method==="GET"||o.method==="DELETE";qq.extend(this,{initTransport:function(e){var t,r,n,i,a;return{withPath:function(e){t=e;return this},withParams:function(e){r=e;return this},withHeaders:function(e){n=e;return this},withPayload:function(e){i=e;return this},withCacheBuster:function(){a=true;return this},send:function(s){if(a&&qq.indexOf(["GET","DELETE"],o.method)>=0){r.qqtimestamp=(new Date).getTime()}return S(e,s,t,r,n,i)}}},canceled:function(e){p(e)}})};qq.UploadHandler=function(e){var t=e.proxy,r={},n=t.onCancel,i=t.getName;qq.extend(this,{add:function(e,t){r[e]=t;r[e].temp={}},cancel:function(e){var t=this,o=new qq.Promise,a=n(e,i(e),o);a.then((function(){if(t.isValid(e)){r[e].canceled=true;t.expunge(e)}o.success()}))},expunge:function(e){delete r[e]},getThirdPartyFileId:function(e){return r[e].key},isValid:function(e){return r[e]!==undefined},reset:function(){r={}},_getFileState:function(e){return r[e]},_setThirdPartyFileId:function(e,t){r[e].key=t},_wasCanceled:function(e){return!!r[e].canceled}})};qq.UploadHandlerController=function(e,t){var r=this,n=false,i=false,o,a,s,l,c={paramsStore:{},maxConnections:3,chunking:{enabled:false,multiple:{enabled:false}},log:function(e,t){},onProgress:function(e,t,r,n){},onComplete:function(e,t,r,n){},onCancel:function(e,t){},onUploadPrep:function(e){},onUpload:function(e,t){},onUploadChunk:function(e,t,r){},onUploadChunkSuccess:function(e,t,r,n){},onAutoRetry:function(e,t,r,n){},onResume:function(e,t,r){},onUuidChanged:function(e,t){},getName:function(e){},setSize:function(e,t){},isQueued:function(e){},getIdsInProxyGroup:function(e){},getIdsInBatch:function(e){}},u={done:function(e,t,r,n){var i=l._getChunkData(e,t);l._getFileState(e).attemptingResume=false;delete l._getFileState(e).temp.chunkProgress[t];l._getFileState(e).loaded+=i.size;c.onUploadChunkSuccess(e,l._getChunkDataForCallback(i),r,n)},finalize:function(e){var t=c.getSize(e),r=c.getName(e);s("All chunks have been uploaded for "+e+" - finalizing....");l.finalizeChunks(e).then((function(n,i){s("Finalize successful for "+e);var o=h.normalizeResponse(n,true);c.onProgress(e,r,t,t);l._maybeDeletePersistedChunkData(e);h.cleanup(e,o,i)}),(function(t,n){var i=h.normalizeResponse(t,false);s("Problem finalizing chunks for file ID "+e+" - "+i.error,"error");if(i.reset){u.reset(e)}if(!c.onAutoRetry(e,r,i,n)){h.cleanup(e,i,n)}}))},hasMoreParts:function(e){return!!l._getFileState(e).chunking.remaining.length},nextPart:function(e){var t=l._getFileState(e).chunking.remaining.shift();if(t>=l._getTotalChunks(e)){t=null}return t},reset:function(e){s("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+e,"error");l._maybeDeletePersistedChunkData(e);l.reevaluateChunking(e);l._getFileState(e).loaded=0},sendNext:function(e){var t=c.getSize(e),r=c.getName(e),n=u.nextPart(e),o=l._getChunkData(e,n),a=l._getFileState(e).attemptingResume,d=l._getFileState(e).chunking.inProgress||[];if(l._getFileState(e).loaded==null){l._getFileState(e).loaded=0}if(a&&c.onResume(e,r,o)===false){u.reset(e);n=u.nextPart(e);o=l._getChunkData(e,n);a=false}if(n==null&&d.length===0){u.finalize(e)}else{s("Sending chunked upload request for item "+e+": bytes "+(o.start+1)+"-"+o.end+" of "+t);c.onUploadChunk(e,r,l._getChunkDataForCallback(o));d.push(n);l._getFileState(e).chunking.inProgress=d;if(i){p.open(e,n)}if(i&&p.available()&&l._getFileState(e).chunking.remaining.length){u.sendNext(e)}l.uploadChunk(e,n,a).then((function t(r,i){s("Chunked upload request succeeded for "+e+", chunk "+n);l.clearCachedChunk(e,n);var o=l._getFileState(e).chunking.inProgress||[],a=h.normalizeResponse(r,true),c=qq.indexOf(o,n);s(qq.format("Chunk {} for file {} uploaded successfully.",n,e));u.done(e,n,a,i);if(c>=0){o.splice(c,1)}l._maybePersistChunkedState(e);if(!u.hasMoreParts(e)&&o.length===0){u.finalize(e)}else if(u.hasMoreParts(e)){u.sendNext(e)}}),(function t(o,a){s("Chunked upload request failed for "+e+", chunk "+n);l.clearCachedChunk(e,n);var d=h.normalizeResponse(o,false),m;if(d.reset){u.reset(e)}else{m=qq.indexOf(l._getFileState(e).chunking.inProgress,n);if(m>=0){l._getFileState(e).chunking.inProgress.splice(m,1);l._getFileState(e).chunking.remaining.unshift(n)}}if(!l._getFileState(e).temp.ignoreFailure){if(i){l._getFileState(e).temp.ignoreFailure=true;qq.each(l._getXhrs(e),(function(e,t){t.abort()}));l.moveInProgressToRemaining(e);p.free(e,true)}if(!c.onAutoRetry(e,r,d,a)){h.cleanup(e,d,a)}}})).done((function(){l.clearXhr(e,n)}))}}},p={_open:[],_openChunks:{},_waiting:[],available:function(){var e=c.maxConnections,t=0,r=0;qq.each(p._openChunks,(function(e,n){t++;r+=n.length}));return e-(p._open.length-t+r)},free:function(e,t){var r=!t,n=qq.indexOf(p._waiting,e),i=qq.indexOf(p._open,e),o;delete p._openChunks[e];if(h.getProxyOrBlob(e)instanceof qq.BlobProxy){s("Generated blob upload has ended for "+e+", disposing generated blob.");delete l._getFileState(e).file}if(n>=0){p._waiting.splice(n,1)}else if(r&&i>=0){p._open.splice(i,1);o=p._waiting.shift();if(o>=0){p._open.push(o);h.start(o)}}},getWaitingOrConnected:function(){var e=[];qq.each(p._openChunks,(function(t,r){if(r&&r.length){e.push(parseInt(t))}}));qq.each(p._open,(function(t,r){if(!p._openChunks[r]){e.push(parseInt(r))}}));e=e.concat(p._waiting);return e},isUsingConnection:function(e){return qq.indexOf(p._open,e)>=0},open:function(e,t){if(t==null){p._waiting.push(e)}if(p.available()){if(t==null){p._waiting.pop();p._open.push(e)}else{(function(){var r=p._openChunks[e]||[];r.push(t);p._openChunks[e]=r})()}return true}return false},reset:function(){p._waiting=[];p._open=[]}},d={send:function(e,t){l._getFileState(e).loaded=0;s("Sending simple upload request for "+e);l.uploadFile(e).then((function(r,n){s("Simple upload request succeeded for "+e);var i=h.normalizeResponse(r,true),o=c.getSize(e);c.onProgress(e,t,o,o);h.maybeNewUuid(e,i);h.cleanup(e,i,n)}),(function(r,n){s("Simple upload request failed for "+e);var i=h.normalizeResponse(r,false);if(!c.onAutoRetry(e,t,i,n)){h.cleanup(e,i,n)}}))}},h={cancel:function(e){s("Cancelling "+e);c.paramsStore.remove(e);p.free(e)},cleanup:function(e,t,r){var n=c.getName(e);c.onComplete(e,n,t,r);if(l._getFileState(e)){l._clearXhrs&&l._clearXhrs(e)}p.free(e)},getProxyOrBlob:function(e){return l.getProxy&&l.getProxy(e)||l.getFile&&l.getFile(e)},initHandler:function(){var e=t?qq[t]:qq.traditional,r=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";l=new e[r+"UploadHandler"](c,{getDataByUuid:c.getDataByUuid,getName:c.getName,getSize:c.getSize,getUuid:c.getUuid,log:s,onCancel:c.onCancel,onProgress:c.onProgress,onUuidChanged:c.onUuidChanged});if(l._removeExpiredChunkingRecords){l._removeExpiredChunkingRecords()}},isDeferredEligibleForUpload:function(e){return c.isQueued(e)},maybeDefer:function(e,t){if(t&&!l.getFile(e)&&t instanceof qq.BlobProxy){c.onUploadPrep(e);s("Attempting to generate a blob on-demand for "+e);t.create().then((function(t){s("Generated an on-demand blob for "+e);l.updateBlob(e,t);c.setSize(e,t.size);l.reevaluateChunking(e);h.maybeSendDeferredFiles(e)}),(function(t){var r={};if(t){r.error=t}s(qq.format("Failed to generate blob for ID {}.  Error message: {}.",e,t),"error");c.onComplete(e,c.getName(e),qq.extend(r,a),null);h.maybeSendDeferredFiles(e);p.free(e)}))}else{return h.maybeSendDeferredFiles(e)}return false},maybeSendDeferredFiles:function(e){var t=c.getIdsInProxyGroup(e),r=false;if(t&&t.length){s("Maybe ready to upload proxy group file "+e);qq.each(t,(function(t,n){if(h.isDeferredEligibleForUpload(n)&&!!l.getFile(n)){r=n===e;h.now(n)}else if(h.isDeferredEligibleForUpload(n)){return false}}))}else{r=true;h.now(e)}return r},maybeNewUuid:function(e,t){if(t.newUuid!==undefined){c.onUuidChanged(e,t.newUuid)}},normalizeResponse:function(e,t){var r=e;if(!qq.isObject(e)){r={};if(qq.isString(e)&&!t){r.error=e}}r.success=t;return r},now:function(e){var t=c.getName(e);if(!r.isValid(e)){throw new qq.Error(e+" is not a valid file ID to upload!")}c.onUpload(e,t);if(n&&l._shouldChunkThisFile(e)){u.sendNext(e)}else{d.send(e,t)}},start:function(e){var t=h.getProxyOrBlob(e);if(t){return h.maybeDefer(e,t)}else{h.now(e);return true}}};qq.extend(this,{add:function(e,t){l.add.apply(this,arguments)},upload:function(e){if(p.open(e)){return h.start(e)}return false},retry:function(e){if(i){l._getFileState(e).temp.ignoreFailure=false}if(p.isUsingConnection(e)){return h.start(e)}else{return r.upload(e)}},cancel:function(e){var t=l.cancel(e);if(qq.isGenericPromise(t)){t.then((function(){h.cancel(e)}))}else if(t!==false){h.cancel(e)}},cancelAll:function(){var e=p.getWaitingOrConnected(),t;if(e.length){for(t=e.length-1;t>=0;t--){r.cancel(e[t])}}p.reset()},getFile:function(e){if(l.getProxy&&l.getProxy(e)){return l.getProxy(e).referenceBlob}return l.getFile&&l.getFile(e)},isProxied:function(e){return!!(l.getProxy&&l.getProxy(e))},getInput:function(e){if(l.getInput){return l.getInput(e)}},reset:function(){s("Resetting upload handler");r.cancelAll();p.reset();l.reset()},expunge:function(e){if(r.isValid(e)){return l.expunge(e)}},isValid:function(e){return l.isValid(e)},getResumableFilesData:function(){if(l.getResumableFilesData){return l.getResumableFilesData()}return[]},getThirdPartyFileId:function(e){if(r.isValid(e)){return l.getThirdPartyFileId(e)}},pause:function(e){if(r.isResumable(e)&&l.pause&&r.isValid(e)&&l.pause(e)){p.free(e);l.moveInProgressToRemaining(e);return true}return false},isResumable:function(e){return!!l.isResumable&&l.isResumable(e)}});qq.extend(c,e);s=c.log;n=c.chunking.enabled&&qq.supportedFeatures.chunking;i=n&&c.chunking.concurrent.enabled;a=function(){var e={};e[c.preventRetryParam]=true;return e}();h.initHandler()};qq.FormUploadHandler=function(e){var t=e.options,r=this,n=e.proxy,i=qq.getUniqueId(),o={},a={},s={},l=t.isCors,c=t.inputName,u=n.getUuid,p=n.log,d=new qq.WindowReceiveMessage({log:p});function h(e){delete a[e];if(l){clearTimeout(s[e]);delete s[e];d.stopReceivingMessages(e)}var t=document.getElementById(r._getIframeName(e));if(t){t.setAttribute("src","javascript:false;");qq(t).remove()}}function m(e){return e.split("_")[0]}function f(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");t.setAttribute("id",e);t.style.display="none";document.body.appendChild(t);return t}function g(e,t){var n=e.id,i=m(n),l=u(i);o[l]=t;a[i]=qq(e).attach("load",(function(){if(r.getInput(i)){p("Received iframe load event for CORS upload request (iframe name "+n+")");s[n]=setTimeout((function(){var e="No valid message received from loaded iframe for iframe name "+n;p(e,"error");t({error:e})}),1e3)}}));d.receiveMessage(n,(function(e){p("Received the following window message: '"+e+"'");var t=m(n),i=r._parseJsonResponse(e),a=i.uuid,l;if(a&&o[a]){p("Handling response for iframe name "+n);clearTimeout(s[n]);delete s[n];r._detachLoadEvent(n);l=o[a];delete o[a];d.stopReceivingMessages(n);l(i)}else if(!a){p("'"+e+"' does not contain a UUID - ignoring.")}}))}qq.extend(this,new qq.UploadHandler(e));qq.override(this,(function(e){return{add:function(t,r){e.add(t,{input:r});r.setAttribute("name",c);if(r.parentNode){qq(r).remove()}},expunge:function(t){h(t);e.expunge(t)},isValid:function(t){return e.isValid(t)&&r._getFileState(t).input!==undefined}}}));qq.extend(this,{getInput:function(e){return r._getFileState(e).input},_attachLoadEvent:function(e,t){var r;if(l){g(e,t)}else{a[e.id]=qq(e).attach("load",(function(){p("Received response for "+e.id);if(!e.parentNode){return}try{if(e.contentDocument&&e.contentDocument.body&&e.contentDocument.body.innerHTML=="false"){return}}catch(e){p("Error when attempting to access iframe during handling of upload response ("+e.message+")","error");r={success:false}}t(r)}))}},_createIframe:function(e){var t=r._getIframeName(e);return f(t)},_detachLoadEvent:function(e){if(a[e]!==undefined){a[e]();delete a[e]}},_getIframeName:function(e){return e+"_"+i},_initFormForUpload:function(e){var t=e.method,r=e.endpoint,n=e.params,i=e.paramsInBody,o=e.targetName,a=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),s=r;if(i){qq.obj2Inputs(n,a)}else{s=qq.obj2url(n,r)}a.setAttribute("action",s);a.setAttribute("target",o);a.style.display="none";document.body.appendChild(a);return a},_parseJsonResponse:function(e){var t={};try{t=qq.parseJson(e)}catch(e){p("Error when attempting to parse iframe upload response ("+e.message+")","error")}return t}})};qq.XhrUploadHandler=function(e){var t=this,r=e.options.namespace,n=e.proxy,i=e.options.chunking,o=e.options.resume,a=i&&e.options.chunking.enabled&&qq.supportedFeatures.chunking,s=o&&e.options.resume.enabled&&a&&qq.supportedFeatures.resume,l=n.getName,c=n.getSize,u=n.getUuid,p=n.getEndpoint,d=n.getDataByUuid,h=n.onUuidChanged,m=n.onProgress,f=n.log;function g(e){qq.each(t._getXhrs(e),(function(r,n){var i=t._getAjaxRequester(e,r);n.onreadystatechange=null;n.upload.onprogress=null;n.abort();i&&i.canceled&&i.canceled(e)}))}qq.extend(this,new qq.UploadHandler(e));qq.override(this,(function(e){return{add:function(r,n){if(qq.isFile(n)||qq.isBlob(n)){e.add(r,{file:n})}else if(n instanceof qq.BlobProxy){e.add(r,{proxy:n})}else{throw new Error("Passed obj is not a File, Blob, or proxy")}t._initTempState(r);s&&t._maybePrepareForResume(r)},expunge:function(r){g(r);t._maybeDeletePersistedChunkData(r);t._clearXhrs(r);e.expunge(r)}}}));qq.extend(this,{clearCachedChunk:function(e,r){delete t._getFileState(e).temp.cachedChunks[r]},clearXhr:function(e,r){var n=t._getFileState(e).temp;if(n.xhrs){delete n.xhrs[r]}if(n.ajaxRequesters){delete n.ajaxRequesters[r]}},finalizeChunks:function(e,r){var n=t._getTotalChunks(e)-1,i=t._getXhr(e,n);if(r){return(new qq.Promise).success(r(i),i)}return(new qq.Promise).success({},i)},getFile:function(e){return t.isValid(e)&&t._getFileState(e).file},getProxy:function(e){return t.isValid(e)&&t._getFileState(e).proxy},getResumableFilesData:function(){var e=[];t._iterateResumeRecords((function(r,n){t.moveInProgressToRemaining(null,n.chunking.inProgress,n.chunking.remaining);var i={name:n.name,remaining:n.chunking.remaining,size:n.size,uuid:n.uuid};if(n.key){i.key=n.key}e.push(i)}));return e},isResumable:function(e){return!!i&&t.isValid(e)&&!t._getFileState(e).notResumable},moveInProgressToRemaining:function(e,r,n){var i=r||t._getFileState(e).chunking.inProgress,o=n||t._getFileState(e).chunking.remaining;if(i){i.reverse();qq.each(i,(function(e,t){o.unshift(t)}));i.length=0}},pause:function(e){if(t.isValid(e)){f(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,l(e)));t._getFileState(e).paused=true;g(e);return true}},reevaluateChunking:function(e){if(i&&t.isValid(e)){var r=t._getFileState(e),n,o;delete r.chunking;r.chunking={};n=t._getTotalChunks(e);if(n>1||i.mandatory){r.chunking.enabled=true;r.chunking.parts=n;r.chunking.remaining=[];for(o=0;o<n;o++){r.chunking.remaining.push(o)}t._initTempState(e)}else{r.chunking.enabled=false}}},updateBlob:function(e,r){if(t.isValid(e)){t._getFileState(e).file=r}},_clearXhrs:function(e){var r=t._getFileState(e).temp;qq.each(r.ajaxRequesters,(function(e){delete r.ajaxRequesters[e]}));qq.each(r.xhrs,(function(e){delete r.xhrs[e]}))},_createXhr:function(e,r){return t._registerXhr(e,r,qq.createXhrInstance())},_getAjaxRequester:function(e,r){var n=r==null?-1:r;return t._getFileState(e).temp.ajaxRequesters[n]},_getChunkData:function(e,r){var n=i.partSize,o=c(e),a=t.getFile(e),s=n*r,l=s+n>=o?o:s+n,u=t._getTotalChunks(e),p=this._getFileState(e).temp.cachedChunks,d=p[r]||qq.sliceBlob(a,s,l);p[r]=d;return{part:r,start:s,end:l,count:u,blob:d,size:l-s}},_getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}},_getLocalStorageId:function(e){var t="5.0",n=l(e),o=c(e),a=i.partSize,s=p(e);return qq.format("qq{}resume{}-{}-{}-{}-{}",r,t,n,o,a,s)},_getMimeType:function(e){return t.getFile(e).type},_getPersistableData:function(e){return t._getFileState(e).chunking},_getTotalChunks:function(e){if(i){var t=c(e),r=i.partSize;return Math.ceil(t/r)}},_getXhr:function(e,r){var n=r==null?-1:r;return t._getFileState(e).temp.xhrs[n]},_getXhrs:function(e){return t._getFileState(e).temp.xhrs},_iterateResumeRecords:function(e){if(s){qq.each(localStorage,(function(t,n){if(t.indexOf(qq.format("qq{}resume-",r))===0){var i=JSON.parse(n);e(t,i)}}))}},_initTempState:function(e){t._getFileState(e).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(e){t._getFileState(e).notResumable=true},_maybeDeletePersistedChunkData:function(e){var r;if(s&&t.isResumable(e)){r=t._getLocalStorageId(e);if(r&&localStorage.getItem(r)){localStorage.removeItem(r);return true}}return false},_maybePrepareForResume:function(e){var r=t._getFileState(e),n,i;if(s&&r.key===undefined){n=t._getLocalStorageId(e);i=localStorage.getItem(n);if(i){i=JSON.parse(i);if(d(i.uuid)){t._markNotResumable(e)}else{f(qq.format("Identified file with ID {} and name of {} as resumable.",e,l(e)));h(e,i.uuid);r.key=i.key;r.chunking=i.chunking;r.loaded=i.loaded;r.attemptingResume=true;t.moveInProgressToRemaining(e)}}}},_maybePersistChunkedState:function(e){var r=t._getFileState(e),n,i;if(s&&t.isResumable(e)){n=t._getLocalStorageId(e);i={name:l(e),size:c(e),uuid:u(e),key:r.key,chunking:r.chunking,loaded:r.loaded,lastUpdated:Date.now()};localStorage.setItem(n,JSON.stringify(i))}},_registerProgressHandler:function(e,r,n){var i=t._getXhr(e,r),o=l(e),a={simple:function(t,r){var n=c(e);if(t===r){m(e,o,n,n)}else{m(e,o,t>=n?n-1:t,n)}},chunked:function(i,a){var s=t._getFileState(e).temp.chunkProgress,l=t._getFileState(e).loaded,u=i,p=a,d=c(e),h=u-(p-n),f=l;s[r]=h;qq.each(s,(function(e,t){f+=t}));m(e,o,f,d)}};i.upload.onprogress=function(e){if(e.lengthComputable){var t=n==null?"simple":"chunked";a[t](e.loaded,e.total)}}},_registerXhr:function(e,r,n,i){var o=r==null?-1:r,a=t._getFileState(e).temp;a.xhrs=a.xhrs||{};a.ajaxRequesters=a.ajaxRequesters||{};a.xhrs[o]=n;if(i){a.ajaxRequesters[o]=i}return n},_removeExpiredChunkingRecords:function(){var e=o.recordsExpireIn;t._iterateResumeRecords((function(t,r){var n=new Date(r.lastUpdated);n.setDate(n.getDate()+e);if(n.getTime()<=Date.now()){f("Removing expired resume record with key "+t);localStorage.removeItem(t)}}))},_shouldChunkThisFile:function(e){var r=t._getFileState(e);if(!r.chunking){t.reevaluateChunking(e)}return r.chunking.enabled}})};qq.WindowReceiveMessage=function(e){var t={log:function(e,t){}},r={};qq.extend(t,e);qq.extend(this,{receiveMessage:function(e,t){var n=function(e){t(e.data)};if(window.postMessage){r[e]=qq(window).attach("message",n)}else{log("iframe message passing not supported in this browser!","error")}},stopReceivingMessages:function(e){if(window.postMessage){var t=r[e];if(t){t()}}}})};(function(){qq.uiPublicApi={clearStoredFiles:function(){this._parent.prototype.clearStoredFiles.apply(this,arguments);this._templating.clearFiles()},addExtraDropzone:function(e){this._dnd&&this._dnd.setupExtraDropzone(e)},removeExtraDropzone:function(e){if(this._dnd){return this._dnd.removeDropzone(e)}},getItemByFileId:function(e){return this._templating.getFileContainer(e)},reset:function(){this._parent.prototype.reset.apply(this,arguments);this._templating.reset();if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()}if(this._dnd){this._dnd.dispose();this._dnd=this._setupDragAndDrop()}this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0;this._setupClickAndEditEventHandlers()},setName:function(e,t){var r=this._options.formatFileName(t);this._parent.prototype.setName.apply(this,arguments);this._templating.updateFilename(e,r)},pauseUpload:function(e){var t=this._parent.prototype.pauseUpload.apply(this,arguments);t&&this._templating.uploadPaused(e);return t},continueUpload:function(e){var t=this._parent.prototype.continueUpload.apply(this,arguments);t&&this._templating.uploadContinued(e);return t},getId:function(e){return this._templating.getFileId(e)},getDropTarget:function(e){var t=this.getFile(e);return t.qqDropTarget}};qq.uiPrivateApi={_getButton:function(e){var t=this._parent.prototype._getButton.apply(this,arguments);if(!t){if(e===this._defaultButtonId){t=this._templating.getButton()}}return t},_removeFileItem:function(e){this._templating.removeFile(e)},_setupClickAndEditEventHandlers:function(){this._fileButtonsClickHandler=qq.FileButtonsClickHandler&&this._bindFileButtonsClickEvent();this._focusinEventSupported=!qq.firefox();if(this._isEditFilenameEnabled()){this._filenameClickHandler=this._bindFilenameClickEvent();this._filenameInputFocusInHandler=this._bindFilenameInputFocusInEvent();this._filenameInputFocusHandler=this._bindFilenameInputFocusEvent()}},_setupDragAndDrop:function(){var e=this,t=this._options.dragAndDrop.extraDropzones,r=this._templating,n=r.getDropZone();n&&t.push(n);return new qq.DragAndDrop({dropZoneElements:t,allowMultipleItems:this._options.multiple,classes:{dropActive:this._options.classes.dropActive},callbacks:{processingDroppedFiles:function(){r.showDropProcessing()},processingDroppedFilesComplete:function(t,n){r.hideDropProcessing();qq.each(t,(function(e,t){t.qqDropTarget=n}));if(t.length){e.addFiles(t,null,null)}},dropError:function(t,r){e._itemError(t,r)},dropLog:function(t,r){e.log(t,r)}}})},_bindFileButtonsClickEvent:function(){var e=this;return new qq.FileButtonsClickHandler({templating:this._templating,log:function(t,r){e.log(t,r)},onDeleteFile:function(t){e.deleteFile(t)},onCancel:function(t){e.cancel(t)},onRetry:function(t){qq(e._templating.getFileContainer(t)).removeClass(e._classes.retryable);e._templating.hideRetry(t);e.retry(t)},onPause:function(t){e.pauseUpload(t)},onContinue:function(t){e.continueUpload(t)},onGetName:function(t){return e.getName(t)}})},_isEditFilenameEnabled:function(){return this._templating.isEditFilenamePossible()&&!this._options.autoUpload&&qq.FilenameClickHandler&&qq.FilenameInputFocusHandler&&qq.FilenameInputFocusHandler},_filenameEditHandler:function(){var e=this,t=this._templating;return{templating:t,log:function(t,r){e.log(t,r)},onGetUploadStatus:function(t){return e.getUploads({id:t}).status},onGetName:function(t){return e.getName(t)},onSetName:function(t,r){e.setName(t,r)},onEditingStatusChange:function(e,r){var n=qq(t.getEditInput(e)),i=qq(t.getFileContainer(e));if(r){n.addClass("qq-editing");t.hideFilename(e);t.hideEditIcon(e)}else{n.removeClass("qq-editing");t.showFilename(e);t.showEditIcon(e)}i.addClass("qq-temp").removeClass("qq-temp")}}},_onUploadStatusChange:function(e,t,r){this._parent.prototype._onUploadStatusChange.apply(this,arguments);if(this._isEditFilenameEnabled()){if(this._templating.getFileContainer(e)&&r!==qq.status.SUBMITTED){this._templating.markFilenameEditable(e);this._templating.hideEditIcon(e)}}},_bindFilenameInputFocusInEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusInHandler(e)},_bindFilenameInputFocusEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameInputFocusHandler(e)},_bindFilenameClickEvent:function(){var e=qq.extend({},this._filenameEditHandler());return new qq.FilenameClickHandler(e)},_storeForLater:function(e){this._parent.prototype._storeForLater.apply(this,arguments);this._templating.hideSpinner(e)},_onAllComplete:function(e,t){this._parent.prototype._onAllComplete.apply(this,arguments);this._templating.resetTotalProgress()},_onSubmit:function(e,t){var r=this.getFile(e);if(r&&r.qqPath&&this._options.dragAndDrop.reportDirectoryPaths){this._paramsStore.addReadOnly(e,{qqpath:r.qqPath})}this._parent.prototype._onSubmit.apply(this,arguments);this._addToList(e,t)},_onSubmitted:function(e){if(this._isEditFilenameEnabled()){this._templating.markFilenameEditable(e);this._templating.showEditIcon(e);if(!this._focusinEventSupported){this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(e))}}},_onProgress:function(e,t,r,n){this._parent.prototype._onProgress.apply(this,arguments);this._templating.updateProgress(e,r,n);if(Math.round(r/n*100)===100){this._templating.hideCancel(e);this._templating.hidePause(e);this._templating.hideProgress(e);this._templating.setStatusText(e,this._options.text.waitingForResponse);this._displayFileSize(e)}else{this._displayFileSize(e,r,n)}},_onTotalProgress:function(e,t){this._parent.prototype._onTotalProgress.apply(this,arguments);this._templating.updateTotalProgress(e,t)},_onComplete:function(e,t,r,n){var i=this._parent.prototype._onComplete.apply(this,arguments),o=this._templating,a=o.getFileContainer(e),s=this;function l(t){if(!a){return}o.setStatusText(e);qq(a).removeClass(s._classes.retrying);o.hideProgress(e);if(!s._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){o.hideCancel(e)}o.hideSpinner(e);if(t.success){s._markFileAsSuccessful(e)}else{qq(a).addClass(s._classes.fail);if(o.isRetryPossible()&&!s._preventRetries[e]){qq(a).addClass(s._classes.retryable);o.showRetry(e)}s._controlFailureTextDisplay(e,t)}}if(i instanceof qq.Promise){i.done((function(e){l(e)}))}else{l(r)}return i},_markFileAsSuccessful:function(e){var t=this._templating;if(this._isDeletePossible()){t.showDeleteButton(e)}qq(t.getFileContainer(e)).addClass(this._classes.success);this._maybeUpdateThumbnail(e)},_onUploadPrep:function(e){this._parent.prototype._onUploadPrep.apply(this,arguments);this._templating.showSpinner(e)},_onUpload:function(e,t){var r=this._parent.prototype._onUpload.apply(this,arguments);this._templating.showSpinner(e);return r},_onUploadChunk:function(e,t){this._parent.prototype._onUploadChunk.apply(this,arguments);if(t.partIndex>0&&this._handler.isResumable(e)){this._templating.allowPause(e)}},_onCancel:function(e,t){this._parent.prototype._onCancel.apply(this,arguments);this._removeFileItem(e);if(this._getNotFinished()===0){this._templating.resetTotalProgress()}},_onBeforeAutoRetry:function(e){var t,r,n;this._parent.prototype._onBeforeAutoRetry.apply(this,arguments);this._showCancelLink(e);if(this._options.retry.showAutoRetryNote){t=this._autoRetries[e];r=this._options.retry.maxAutoAttempts;n=this._options.retry.autoRetryNote.replace(/\{retryNum\}/g,t);n=n.replace(/\{maxAuto\}/g,r);this._templating.setStatusText(e,n);qq(this._templating.getFileContainer(e)).addClass(this._classes.retrying)}},_onBeforeManualRetry:function(e){if(this._parent.prototype._onBeforeManualRetry.apply(this,arguments)){this._templating.resetProgress(e);qq(this._templating.getFileContainer(e)).removeClass(this._classes.fail);this._templating.setStatusText(e);this._templating.showSpinner(e);this._showCancelLink(e);return true}else{qq(this._templating.getFileContainer(e)).addClass(this._classes.retryable);this._templating.showRetry(e);return false}},_onSubmitDelete:function(e){var t=qq.bind(this._onSubmitDeleteSuccess,this);this._parent.prototype._onSubmitDelete.call(this,e,t)},_onSubmitDeleteSuccess:function(e,t,r){if(this._options.deleteFile.forceConfirm){this._showDeleteConfirm.apply(this,arguments)}else{this._sendDeleteRequest.apply(this,arguments)}},_onDeleteComplete:function(e,t,r){this._parent.prototype._onDeleteComplete.apply(this,arguments);this._templating.hideSpinner(e);if(r){this._templating.setStatusText(e,this._options.deleteFile.deletingFailedText);this._templating.showDeleteButton(e)}else{this._removeFileItem(e)}},_sendDeleteRequest:function(e,t,r){this._templating.hideDeleteButton(e);this._templating.showSpinner(e);this._templating.setStatusText(e,this._options.deleteFile.deletingStatusText);this._deleteHandler.sendDelete.apply(this,arguments)},_showDeleteConfirm:function(e,t,r){var n=this.getName(e),i=this._options.deleteFile.confirmMessage.replace(/\{filename\}/g,n),t=this.getUuid(e),o=arguments,a=this,s;s=this._options.showConfirm(i);if(qq.isGenericPromise(s)){s.then((function(){a._sendDeleteRequest.apply(a,o)}))}else if(s!==false){a._sendDeleteRequest.apply(a,o)}},_addToList:function(e,t,r){var n,i=0,o=this._handler.isProxied(e)&&this._options.scaling.hideScaled,a;if(o){return}if(this._options.display.prependFiles){if(this._totalFilesInBatch>1&&this._filesInBatchAddedToUi>0){i=this._filesInBatchAddedToUi-1}n={index:i}}if(!r){if(this._options.disableCancelForFormUploads&&!qq.supportedFeatures.ajaxUploading){this._templating.disableCancel()}if(!this._options.multiple){a=this.getUploads({id:e});this._handledProxyGroup=this._handledProxyGroup||a.proxyGroupId;if(a.proxyGroupId!==this._handledProxyGroup||!a.proxyGroupId){this._handler.cancelAll();this._clearList();this._handledProxyGroup=null}}}this._templating.addFile(e,this._options.formatFileName(t),n);if(r){this._thumbnailUrls[e]&&this._templating.updateThumbnail(e,this._thumbnailUrls[e],true)}else{this._templating.generatePreview(e,this.getFile(e))}this._filesInBatchAddedToUi+=1;if(r||this._options.display.fileSizeOnSubmit&&qq.supportedFeatures.ajaxUploading){this._displayFileSize(e)}},_clearList:function(){this._templating.clearFiles();this.clearStoredFiles()},_displayFileSize:function(e,t,r){var n=this.getSize(e),i=this._formatSize(n);if(n>=0){if(t!==undefined&&r!==undefined){i=this._formatProgress(t,r)}this._templating.updateSize(e,i)}},_formatProgress:function(e,t){var r=this._options.text.formatProgress;function n(e,t){r=r.replace(e,t)}n("{percent}",Math.round(e/t*100));n("{total_size}",this._formatSize(t));return r},_controlFailureTextDisplay:function(e,t){var r,n,i,o,a;r=this._options.failedUploadTextDisplay.mode;n=this._options.failedUploadTextDisplay.maxChars;i=this._options.failedUploadTextDisplay.responseProperty;if(r==="custom"){o=t[i];if(o){if(o.length>n){a=o.substring(0,n)+"..."}}else{o=this._options.text.failUpload}this._templating.setStatusText(e,a||o);if(this._options.failedUploadTextDisplay.enableTooltip){this._showTooltip(e,o)}}else if(r==="default"){this._templating.setStatusText(e,this._options.text.failUpload)}else if(r!=="none"){this.log("failedUploadTextDisplay.mode value of '"+r+"' is not valid","warn")}},_showTooltip:function(e,t){this._templating.getFileContainer(e).title=t},_showCancelLink:function(e){if(!this._options.disableCancelForFormUploads||qq.supportedFeatures.ajaxUploading){this._templating.showCancel(e)}},_itemError:function(e,t,r){var n=this._parent.prototype._itemError.apply(this,arguments);this._options.showMessage(n)},_batchError:function(e){this._parent.prototype._batchError.apply(this,arguments);this._options.showMessage(e)},_setupPastePrompt:function(){var e=this;this._options.callbacks.onPasteReceived=function(){var t=e._options.paste.namePromptMessage,r=e._options.paste.defaultName;return e._options.showPrompt(t,r)}},_fileOrBlobRejected:function(e,t){this._totalFilesInBatch-=1;this._parent.prototype._fileOrBlobRejected.apply(this,arguments)},_prepareItemsForUpload:function(e,t,r){this._totalFilesInBatch=e.length;this._filesInBatchAddedToUi=0;this._parent.prototype._prepareItemsForUpload.apply(this,arguments)},_maybeUpdateThumbnail:function(e){var t=this._thumbnailUrls[e];this._templating.updateThumbnail(e,t)},_addCannedFile:function(e){var t=this._parent.prototype._addCannedFile.apply(this,arguments);this._addToList(t,this.getName(t),true);this._templating.hideSpinner(t);this._templating.hideCancel(t);this._markFileAsSuccessful(t);return t},_setSize:function(e,t){this._parent.prototype._setSize.apply(this,arguments);this._templating.updateSize(e,this._formatSize(t))}}})();qq.FineUploader=function(e,t){this._parent=t?qq[t].FineUploaderBasic:qq.FineUploaderBasic;this._parent.apply(this,arguments);qq.extend(this._options,{element:null,button:null,listElement:null,dragAndDrop:{extraDropzones:[],reportDirectoryPaths:false},text:{formatProgress:"{percent}% of {total_size}",failUpload:"Upload failed",waitingForResponse:"Processing...",paused:"Paused"},template:"qq-template",classes:{retrying:"qq-upload-retrying",retryable:"qq-upload-retryable",success:"qq-upload-success",fail:"qq-upload-fail",editable:"qq-editable",hide:"qq-hide",dropActive:"qq-upload-drop-area-active"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",enableTooltip:true},messages:{tooManyFilesError:"You may only drop one file",unsupportedBrowser:"Unrecoverable error - this browser does not permit file uploading of any kind."},retry:{showAutoRetryNote:true,autoRetryNote:"Retrying {retryNum}/{maxAuto}..."},deleteFile:{forceConfirm:false,confirmMessage:"Are you sure you want to delete {filename}?",deletingStatusText:"Deleting...",deletingFailedText:"Delete failed"},display:{fileSizeOnSubmit:false,prependFiles:false},paste:{promptForName:false,namePromptMessage:"Please name this image"},thumbnails:{maxCount:0,placeholders:{waitUntilResponse:false,notAvailablePath:null,waitingPath:null},timeBetweenThumbs:750},scaling:{hideScaled:false},showMessage:function(e){setTimeout((function(){window.alert(e)}),0)},showConfirm:function(e){return window.confirm(e)},showPrompt:function(e,t){return window.prompt(e,t)}},true);qq.extend(this._options,e,true);this._templating=new qq.Templating({log:qq.bind(this.log,this),templateIdOrEl:this._options.template,containerEl:this._options.element,fileContainerEl:this._options.listElement,button:this._options.button,imageGenerator:this._imageGenerator,classes:{hide:this._options.classes.hide,editable:this._options.classes.editable},limits:{maxThumbs:this._options.thumbnails.maxCount,timeBetweenThumbs:this._options.thumbnails.timeBetweenThumbs},placeholders:{waitUntilUpdate:this._options.thumbnails.placeholders.waitUntilResponse,thumbnailNotAvailable:this._options.thumbnails.placeholders.notAvailablePath,waitingForThumbnail:this._options.thumbnails.placeholders.waitingPath},text:this._options.text});if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari()){this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari)}else if(!qq.supportedFeatures.uploading||this._options.cors.expected&&!qq.supportedFeatures.uploadCors){this._templating.renderFailure(this._options.messages.unsupportedBrowser)}else{this._wrapCallbacks();this._templating.render();this._classes=this._options.classes;if(!this._options.button&&this._templating.getButton()){this._defaultButtonId=this._createUploadButton({element:this._templating.getButton()}).getButtonId()}this._setupClickAndEditEventHandlers();if(qq.DragAndDrop&&qq.supportedFeatures.fileDrop){this._dnd=this._setupDragAndDrop()}if(this._options.paste.targetElement&&this._options.paste.promptForName){if(qq.PasteSupport){this._setupPastePrompt()}else{this.log("Paste support module not found.","error")}}this._totalFilesInBatch=0;this._filesInBatchAddedToUi=0}};qq.extend(qq.FineUploader.prototype,qq.basePublicApi);qq.extend(qq.FineUploader.prototype,qq.basePrivateApi);qq.extend(qq.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.FineUploader.prototype,qq.uiPrivateApi);qq.Templating=function(e){var t="qq-file-id",r="qq-file-id-",n="qq-max-size",i="qq-server-scale",o="qq-hide-dropzone",a=false,s=0,l=false,c=[],u=-1,p={log:null,limits:{maxThumbs:0,timeBetweenThumbs:750},templateIdOrEl:"qq-template",containerEl:null,fileContainerEl:null,button:null,imageGenerator:null,classes:{hide:"qq-hide",editable:"qq-editable"},placeholders:{waitUntilUpdate:false,thumbnailNotAvailable:null,waitingForThumbnail:null},text:{paused:"Paused"}},d={button:"qq-upload-button-selector",drop:"qq-upload-drop-area-selector",list:"qq-upload-list-selector",progressBarContainer:"qq-progress-bar-container-selector",progressBar:"qq-progress-bar-selector",totalProgressBarContainer:"qq-total-progress-bar-container-selector",totalProgressBar:"qq-total-progress-bar-selector",file:"qq-upload-file-selector",spinner:"qq-upload-spinner-selector",size:"qq-upload-size-selector",cancel:"qq-upload-cancel-selector",pause:"qq-upload-pause-selector",continueButton:"qq-upload-continue-selector",deleteButton:"qq-upload-delete-selector",retry:"qq-upload-retry-selector",statusText:"qq-upload-status-text-selector",editFilenameInput:"qq-edit-filename-selector",editNameIcon:"qq-edit-filename-icon-selector",dropProcessing:"qq-drop-processing-selector",dropProcessingSpinner:"qq-drop-processing-spinner-selector",thumbnail:"qq-thumbnail-selector"},h={},m=new qq.Promise,f=new qq.Promise,g,y,b,v,w,E,S,_,x=function(){var e=p.placeholders.thumbnailNotAvailable,t=p.placeholders.waitingForThumbnail,r={maxSize:u,scale:_};if(S){if(e){p.imageGenerator.generate(e,new Image,r).then((function(e){m.success(e)}),(function(){m.failure();g("Problem loading 'not available' placeholder image at "+e,"error")}))}else{m.failure()}if(t){p.imageGenerator.generate(t,new Image,r).then((function(e){f.success(e)}),(function(){f.failure();g("Problem loading 'waiting for thumbnail' placeholder image at "+t,"error")}))}else{f.failure()}}},D=function(e){var t=new qq.Promise;f.then((function(r){z(r,e);if(!e.src){e.src=r.src;e.onload=function(){e.onload=null;Y(e);t.success()}}else{t.success()}}),(function(){B(e);t.success()}));return t},C=function(e,t,r){var n=F(e);g("Generating new thumbnail for "+e);t.qqThumbnailId=e;return p.imageGenerator.generate(t,n,r).then((function(){s++;Y(n);h[e].success()}),(function(){h[e].failure();if(!p.placeholders.waitUntilUpdate){V(e,n)}}))},T=function(){if(c.length){l=true;var e=c.shift();if(e.update){$(e)}else{K(e)}}else{l=false}},O=function(e){return H(j(e),d.cancel)},k=function(e){return H(j(e),d.continueButton)},P=function(e){return H(j(e),d.deleteButton)},A=function(){return H(w,d.dropProcessing)},I=function(e){return H(j(e),d.editNameIcon)},j=function(e){return qq(E).getByClass(r+e)[0]},R=function(e){return H(j(e),d.file)},N=function(e){return H(j(e),d.pause)},L=function(e){if(e==null){return H(w,d.totalProgressBarContainer)||H(w,d.totalProgressBar)}return H(j(e),d.progressBarContainer)||H(j(e),d.progressBar)},M=function(e){return H(j(e),d.retry)},q=function(e){return H(j(e),d.size)},U=function(e){return H(j(e),d.spinner)},H=function(e,t){return e&&qq(e).getByClass(t)[0]},F=function(e){return S&&H(j(e),d.thumbnail)},B=function(e){e&&qq(e).addClass(p.classes.hide)},z=function(e,t){var r=e.style.maxWidth,n=e.style.maxHeight;if(n&&r&&!t.style.maxWidth&&!t.style.maxHeight){qq(t).css({maxWidth:r,maxHeight:n})}},V=function(e,t){var r=h[e]||(new qq.Promise).failure(),n=new qq.Promise;m.then((function(e){r.then((function(){n.success()}),(function(){z(e,t);t.onload=function(){t.onload=null;n.success()};t.src=e.src;Y(t)}))}));return n},W=function(){var e,t,r,a,s,l,c,h,m;g("Parsing template");if(p.templateIdOrEl==null){throw new Error("You MUST specify either a template element or ID!")}if(qq.isString(p.templateIdOrEl)){e=document.getElementById(p.templateIdOrEl);if(e===null){throw new Error(qq.format("Cannot find template script at ID '{}'!",p.templateIdOrEl))}t=e.innerHTML}else{if(p.templateIdOrEl.innerHTML===undefined){throw new Error("You have specified an invalid value for the template option!  "+"It must be an ID or an Element.")}t=p.templateIdOrEl.innerHTML}t=qq.trimStr(t);a=document.createElement("div");a.appendChild(qq.toElement(t));if(p.button){l=qq(a).getByClass(d.button)[0];if(l){qq(l).remove()}}if(!qq.DragAndDrop||!qq.supportedFeatures.fileDrop){m=qq(a).getByClass(d.dropProcessing)[0];if(m){qq(m).remove()}}c=qq(a).getByClass(d.drop)[0];if(c&&!qq.DragAndDrop){g("DnD module unavailable.","info");qq(c).remove()}if(c&&!qq.supportedFeatures.fileDrop&&qq(c).hasAttribute(o)){qq(c).css({display:"none"})}h=qq(a).getByClass(d.thumbnail)[0];if(!S){h&&qq(h).remove()}else if(h){u=parseInt(h.getAttribute(n));u=u>0?u:null;_=qq(h).hasAttribute(i)}S=S&&h;y=qq(a).getByClass(d.editFilenameInput).length>0;b=qq(a).getByClass(d.retry).length>0;r=qq(a).getByClass(d.list)[0];if(r==null){throw new Error("Could not find the file list container in the template!")}s=r.innerHTML;r.innerHTML="";g("Template parsing complete");return{template:qq.trimStr(a.innerHTML),fileTemplate:qq.trimStr(s)}},G=function(e,t){var r=E,n=r.firstChild;if(t>0){n=qq(r).children()[t].nextSibling}r.insertBefore(e,n)},K=function(e){var t=e.id,r=e.optFileOrBlob,n=r&&r.qqThumbnailId,i=F(t),o={maxSize:u,scale:true,orient:true};if(qq.supportedFeatures.imagePreviews){if(i){if(p.limits.maxThumbs&&p.limits.maxThumbs<=s){V(t,i);T()}else{D(i).done((function(){h[t]=new qq.Promise;h[t].done((function(){setTimeout(T,p.limits.timeBetweenThumbs)}));if(n!=null){Q(t,n)}else{C(t,r,o)}}))}}}else if(i){D(i);T()}},$=function(e){var t=e.id,r=e.thumbnailUrl,n=e.showWaitingImg,i=F(t),o={maxSize:u,scale:_};if(i){if(r){if(p.limits.maxThumbs&&p.limits.maxThumbs<=s){V(t,i);T()}else{if(n){D(i)}return p.imageGenerator.generate(r,i,o).then((function(){Y(i);s++;setTimeout(T,p.limits.timeBetweenThumbs)}),(function(){V(t,i);setTimeout(T,p.limits.timeBetweenThumbs)}))}}else{V(t,i);T()}}},X=function(e,t){var r=L(e),n=e==null?d.totalProgressBar:d.progressBar;if(r&&!qq(r).hasClass(n)){r=qq(r).getByClass(n)[0]}r&&qq(r).css({width:t+"%"})},Y=function(e){e&&qq(e).removeClass(p.classes.hide)},Q=function(e,t){var r=F(e),n=F(t);g(qq.format("ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.",e,t,t));h[t].then((function(){s++;h[e].success();g(qq.format("Now using previously generated thumbnail created for ID {} on ID {}.",t,e));r.src=n.src;Y(r)}),(function(){h[e].failure();if(!p.placeholders.waitUntilUpdate){V(e,r)}}))};qq.extend(p,e);g=p.log;if(!qq.supportedFeatures.imagePreviews){p.limits.timeBetweenThumbs=0;p.limits.maxThumbs=0}w=p.containerEl;S=p.imageGenerator!==undefined;v=W();x();qq.extend(this,{render:function(){g("Rendering template in DOM.");s=0;w.innerHTML=v.template;B(A());this.hideTotalProgress();E=p.fileContainerEl||H(w,d.list);g("Template rendering complete")},renderFailure:function(e){var t=qq.toElement(e);w.innerHTML="";w.appendChild(t)},reset:function(){this.render()},clearFiles:function(){E.innerHTML=""},disableCancel:function(){a=true},addFile:function(e,n,i){var o=qq.toElement(v.fileTemplate),s=H(o,d.file),l;qq(o).addClass(r+e);s&&qq(s).setText(n);o.setAttribute(t,e);if(i){G(o,i.index)}else{E.appendChild(o)}B(L(e));B(q(e));B(P(e));B(M(e));B(N(e));B(k(e));if(a){this.hideCancel(e)}l=F(e);if(l&&!l.src){f.then((function(e){l.src=e.src;if(e.style.maxHeight&&e.style.maxWidth){qq(l).css({maxHeight:e.style.maxHeight,maxWidth:e.style.maxWidth})}Y(l)}))}},removeFile:function(e){qq(j(e)).remove()},getFileId:function(e){var r=e;if(r){while(r.getAttribute(t)==null){r=r.parentNode}return parseInt(r.getAttribute(t))}},getFileList:function(){return E},markFilenameEditable:function(e){var t=R(e);t&&qq(t).addClass(p.classes.editable)},updateFilename:function(e,t){var r=R(e);r&&qq(r).setText(t)},hideFilename:function(e){B(R(e))},showFilename:function(e){Y(R(e))},isFileName:function(e){return qq(e).hasClass(d.file)},getButton:function(){return p.button||H(w,d.button)},hideDropProcessing:function(){B(A())},showDropProcessing:function(){Y(A())},getDropZone:function(){return H(w,d.drop)},isEditFilenamePossible:function(){return y},hideRetry:function(e){B(M(e))},isRetryPossible:function(){return b},showRetry:function(e){Y(M(e))},getFileContainer:function(e){return j(e)},showEditIcon:function(e){var t=I(e);t&&qq(t).addClass(p.classes.editable)},hideEditIcon:function(e){var t=I(e);t&&qq(t).removeClass(p.classes.editable)},isEditIcon:function(e){return qq(e).hasClass(d.editNameIcon)},getEditInput:function(e){return H(j(e),d.editFilenameInput)},isEditInput:function(e){return qq(e).hasClass(d.editFilenameInput)},updateProgress:function(e,t,r){var n=L(e),i;if(n&&r>0){i=Math.round(t/r*100);if(i===100){B(n)}else{Y(n)}X(e,i)}},updateTotalProgress:function(e,t){this.updateProgress(null,e,t)},hideProgress:function(e){var t=L(e);t&&B(t)},hideTotalProgress:function(){this.hideProgress()},resetProgress:function(e){X(e,0);this.hideTotalProgress(e)},resetTotalProgress:function(){this.resetProgress()},showCancel:function(e){if(!a){var t=O(e);t&&qq(t).removeClass(p.classes.hide)}},hideCancel:function(e){B(O(e))},isCancel:function(e){return qq(e).hasClass(d.cancel)},allowPause:function(e){Y(N(e));B(k(e))},uploadPaused:function(e){this.setStatusText(e,p.text.paused);this.allowContinueButton(e);B(U(e))},hidePause:function(e){B(N(e))},isPause:function(e){return qq(e).hasClass(d.pause)},isContinueButton:function(e){return qq(e).hasClass(d.continueButton)},allowContinueButton:function(e){Y(k(e));B(N(e))},uploadContinued:function(e){this.setStatusText(e,"");this.allowPause(e);Y(U(e))},showDeleteButton:function(e){Y(P(e))},hideDeleteButton:function(e){B(P(e))},isDeleteButton:function(e){return qq(e).hasClass(d.deleteButton)},isRetry:function(e){return qq(e).hasClass(d.retry)},updateSize:function(e,t){var r=q(e);if(r){Y(r);qq(r).setText(t)}},setStatusText:function(e,t){var r=H(j(e),d.statusText);if(r){if(t==null){qq(r).clearText()}else{qq(r).setText(t)}}},hideSpinner:function(e){B(U(e))},showSpinner:function(e){Y(U(e))},generatePreview:function(e,t){c.push({id:e,optFileOrBlob:t});!l&&T()},updateThumbnail:function(e,t,r){c.push({update:true,id:e,thumbnailUrl:t,showWaitingImg:r});!l&&T()}})};qq.s3=qq.s3||{};qq.s3.util=qq.s3.util||function(){return{AWS_PARAM_PREFIX:"x-amz-meta-",SESSION_TOKEN_PARAM_NAME:"x-amz-security-token",REDUCED_REDUNDANCY_PARAM_NAME:"x-amz-storage-class",REDUCED_REDUNDANCY_PARAM_VALUE:"REDUCED_REDUNDANCY",SERVER_SIDE_ENCRYPTION_PARAM_NAME:"x-amz-server-side-encryption",SERVER_SIDE_ENCRYPTION_PARAM_VALUE:"AES256",getBucket:function(e){var t=[/^(?:https?:\/\/)?([a-z0-9.\-_]+)\.s3(?:-[a-z0-9\-]+)?\.amazonaws\.com/i,/^(?:https?:\/\/)?s3(?:-[a-z0-9\-]+)?\.amazonaws\.com\/([a-z0-9.\-_]+)/i,/^(?:https?:\/\/)?([a-z0-9.\-_]+)/i],r;qq.each(t,(function(t,n){var i=n.exec(e);if(i){r=i[1];return false}}));return r},getPolicy:function(e){var t={},r=[],n=e.bucket,i=e.key,o=e.acl,a=e.type,s=new Date,l=e.expectedStatus,c=e.sessionToken,u=e.params,p=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),d=e.minFileSize,h=e.maxFileSize,m=e.reducedRedundancy,f=e.serverSideEncryption;t.expiration=qq.s3.util.getPolicyExpirationDate(s);r.push({acl:o});r.push({bucket:n});if(a){r.push({"Content-Type":a})}if(l){r.push({success_action_status:l.toString()})}if(p){r.push({success_action_redirect:p})}if(m){r.push({});r[r.length-1][qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(c){r.push({});r[r.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=c}if(f){r.push({});r[r.length-1][qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}r.push({key:i});qq.each(u,(function(e,t){var n=qq.s3.util.AWS_PARAM_PREFIX+e,i={};i[n]=encodeURIComponent(t);r.push(i)}));t.conditions=r;qq.s3.util.enforceSizeLimits(t,d,h);return t},refreshPolicyCredentials:function(e,t){var r=false;qq.each(e.conditions,(function(e,n){qq.each(n,(function(e,i){if(e===qq.s3.util.SESSION_TOKEN_PARAM_NAME){n[e]=t;r=true}}))}));if(!r){e.conditions.push({});e.conditions[e.conditions.length-1][qq.s3.util.SESSION_TOKEN_PARAM_NAME]=t}},generateAwsParams:function(e,t){var r={},n=e.params,i=new qq.Promise,o=qq.s3.util.getPolicy(e),a=e.sessionToken,s=e.type,l=e.key,c=e.accessKey,u=e.acl,p=e.expectedStatus,d=qq.s3.util.getSuccessRedirectAbsoluteUrl(e.successRedirectUrl),h=e.reducedRedundancy,m=e.serverSideEncryption,f=e.log;r.key=l;r.AWSAccessKeyId=c;if(s){r["Content-Type"]=s}if(p){r.success_action_status=p}if(d){r.success_action_redirect=d}if(h){r[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(m){r[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}if(a){r[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=a}r.acl=u;qq.each(n,(function(e,t){var n=qq.s3.util.AWS_PARAM_PREFIX+e;r[n]=encodeURIComponent(t)}));t(o).then((function(e,t,n){r.policy=e.policy;r.signature=e.signature;if(t){r.AWSAccessKeyId=t}if(n){r[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=n}i.success(r)}),(function(e){e=e||"Can't continue further with request to S3 as we did not receive "+"a valid signature and policy from the server.";f("Policy signing failed.  "+e,"error");i.failure(e)}));return i},enforceSizeLimits:function(e,t,r){var n=t<0?0:t,i=r<=0?9007199254740992:r;if(t>0||r>0){e.conditions.push(["content-length-range",n.toString(),i.toString()])}},getPolicyExpirationDate:function(e){e.setMinutes(e.getMinutes()+5);if(Date.prototype.toISOString){return e.toISOString()}else{var t=function(e){var t=String(e);if(t.length===1){t="0"+t}return t};return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},parseIframeResponse:function(e){var t=e.contentDocument||e.contentWindow.document,r=t.location.search,n=/bucket=(.+)&key=(.+)&etag=(.+)/.exec(r);if(n){return{bucket:n[1],key:n[2],etag:n[3].replace(/%22/g,"")}}},getSuccessRedirectAbsoluteUrl:function(e){if(e){var t=document.createElement("div"),r;if(qq.ie7()){t.innerHTML="<a href='"+e+"'></a>";r=t.firstChild;return r.href}else{r=document.createElement("a");r.href=e;r.href=r.href;return r.href}}},encodeQueryStringParam:function(e){var t=encodeURIComponent(e);t=t.replace(/[!'()]/g,escape);t=t.replace(/\*/g,"%2A");return t.replace(/%20/g,"+")}}}();(function(){qq.nonTraditionalBasePublicApi={setUploadSuccessParams:function(e,t){this._uploadSuccessParamsStore.set(e,t)},setUploadSuccessEndpoint:function(e,t){this._uploadSuccessEndpointStore.set(e,t)}};qq.nonTraditionalBasePrivateApi={_onComplete:function(e,t,r,n){var i=r.success?true:false,o=this,a=arguments,s=this._uploadSuccessEndpointStore.get(e),l=this._options.uploadSuccess.customHeaders,c=this._options.cors,u=new qq.Promise,p=this._uploadSuccessParamsStore.get(e),d=this._paramsStore.get(e),h=function(t){delete o._failedSuccessRequestCallbacks[e];qq.extend(r,t);qq.FineUploaderBasic.prototype._onComplete.apply(o,a);u.success(t)},m=function(i){var s=f;qq.extend(r,i);if(r&&r.reset){s=null}if(!s){delete o._failedSuccessRequestCallbacks[e]}else{o._failedSuccessRequestCallbacks[e]=s}if(!o._onAutoRetry(e,t,r,n,s)){qq.FineUploaderBasic.prototype._onComplete.apply(o,a);u.failure(i)}},f,g;if(i&&s){g=new qq.UploadSuccessAjaxRequester({endpoint:s,customHeaders:l,cors:c,log:qq.bind(this.log,this)});qq.extend(p,o._getEndpointSpecificParams(e,r,n),true);d&&qq.extend(p,d,true);f=qq.bind((function(){g.sendSuccessRequest(e,p).then(h,m)}),o);f();return u}return qq.FineUploaderBasic.prototype._onComplete.apply(this,arguments)},_manualRetry:function(e){var t=this._failedSuccessRequestCallbacks[e];return qq.FineUploaderBasic.prototype._manualRetry.call(this,e,t)}}})();(function(){qq.s3.FineUploaderBasic=function(e){var t={request:{accessKey:null},objectProperties:{acl:"private",bucket:qq.bind((function(e){return qq.s3.util.getBucket(this.getEndpoint(e))}),this),key:"uuid",reducedRedundancy:false,serverSideEncryption:false},credentials:{accessKey:null,secretKey:null,expiration:null,sessionToken:null},signature:{endpoint:null,customHeaders:{}},uploadSuccess:{endpoint:null,params:{},customHeaders:{}},iframeSupport:{localBlankPagePath:null},chunking:{partSize:5242880},cors:{allowXdr:true},callbacks:{onCredentialsExpired:function(){}}};qq.extend(t,e,true);if(!this.setCredentials(t.credentials,true)){this._currentCredentials.accessKey=t.request.accessKey}this._aclStore=this._createStore(t.objectProperties.acl);qq.FineUploaderBasic.call(this,t);this._uploadSuccessParamsStore=this._createStore(this._options.uploadSuccess.params);this._uploadSuccessEndpointStore=this._createStore(this._options.uploadSuccess.endpoint);this._failedSuccessRequestCallbacks={};this._cannedKeys={};this._cannedBuckets={};this._buckets={}};qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.basePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePublicApi);qq.extend(qq.s3.FineUploaderBasic.prototype,qq.nonTraditionalBasePrivateApi);qq.extend(qq.s3.FineUploaderBasic.prototype,{getBucket:function(e){if(this._cannedBuckets[e]==null){return this._buckets[e]}return this._cannedBuckets[e]},getKey:function(e){if(this._cannedKeys[e]==null){return this._handler.getThirdPartyFileId(e)}return this._cannedKeys[e]},reset:function(){qq.FineUploaderBasic.prototype.reset.call(this);this._failedSuccessRequestCallbacks=[];this._buckets={}},setCredentials:function(e,t){if(e&&e.secretKey){if(!e.accessKey){throw new qq.Error("Invalid credentials: no accessKey")}else if(!e.expiration){throw new qq.Error("Invalid credentials: no expiration")}else{this._currentCredentials=qq.extend({},e);if(qq.isString(e.expiration)){this._currentCredentials.expiration=new Date(e.expiration)}}return true}else if(!t){throw new qq.Error("Invalid credentials parameter!")}else{this._currentCredentials={}}},setAcl:function(e,t){this._aclStore.set(e,t)},_createUploadHandler:function(){var e=this,t={aclStore:this._aclStore,getBucket:qq.bind(this._determineBucket,this),getKeyName:qq.bind(this._determineKeyName,this),iframeSupport:this._options.iframeSupport,objectProperties:this._options.objectProperties,signature:this._options.signature,validation:{minSizeLimit:this._options.validation.minSizeLimit,maxSizeLimit:this._options.validation.sizeLimit}};qq.override(this._endpointStore,(function(e){return{get:function(t){var r=e.get(t);if(r.indexOf("http")<0){return"http://"+r}return r}}}));qq.override(this._paramsStore,(function(e){return{get:function(t){var r=e.get(t),n={};qq.each(r,(function(e,t){n[e.toLowerCase()]=qq.isFunction(t)?t():t}));return n}}}));t.signature.credentialsProvider={get:function(){return e._currentCredentials},onExpired:function(){var t=new qq.Promise,r=e._options.callbacks.onCredentialsExpired();if(qq.isGenericPromise(r)){r.then((function(r){try{e.setCredentials(r);t.success()}catch(r){e.log("Invalid credentials returned from onCredentialsExpired callback! ("+r.message+")","error");t.failure("onCredentialsExpired did not return valid credentials.")}}),(function(r){e.log("onCredentialsExpired callback indicated failure! ("+r+")","error");t.failure("onCredentialsExpired callback failed.")}))}else{e.log("onCredentialsExpired callback did not return a promise!","error");t.failure("Unexpected return value for onCredentialsExpired.")}return t}};return qq.FineUploaderBasic.prototype._createUploadHandler.call(this,t,"s3")},_determineBucket:function(e){var t=this._options.objectProperties.bucket,r=new qq.Promise,n=this;if(qq.isFunction(t)){t=t(e);if(qq.isGenericPromise(t)){r=t}else{r.success(t)}}else if(qq.isString(t)){r.success(t)}r.then((function t(r){n._buckets[e]=r}),(function t(r){qq.log("Problem determining bucket for ID "+e+" ("+r+")","error")}));return r},_determineKeyName:function(e,t){var r=new qq.Promise,n=this._options.objectProperties.key,i=qq.getExtension(t),o=r.failure,a=function(e,t){var n=e;if(t!==undefined){n+="."+t}r.success(n)};switch(n){case"uuid":a(this.getUuid(e),i);break;case"filename":a(t);break;default:if(qq.isFunction(n)){this._handleKeynameFunction(n,e,a,o)}else{this.log(n+" is not a valid value for the s3.keyname option!","error");o()}}return r},_handleKeynameFunction:function(e,t,r,n){var i=this,o=function(e){r(e)},a=function(e){i.log(qq.format("Failed to retrieve key name for {}.  Reason: {}",t,e||"null"),"error");n(e)},s=e.call(this,t);if(qq.isGenericPromise(s)){s.then(o,a)}else if(s==null){a()}else{o(s)}},_getEndpointSpecificParams:function(e,t,r){var n={key:this.getKey(e),uuid:this.getUuid(e),name:this.getName(e),bucket:this.getBucket(e)};if(r&&r.getResponseHeader("ETag")){n.etag=r.getResponseHeader("ETag")}else if(t.etag){n.etag=t.etag}return n},_onSubmitDelete:function(e,t){var r={key:this.getKey(e),bucket:this.getBucket(e)};return qq.FineUploaderBasic.prototype._onSubmitDelete.call(this,e,t,r)},_addCannedFile:function(e){var t;if(e.s3Key==null){throw new qq.Error("Did not find s3Key property in server session response.  This is required!")}else{t=qq.FineUploaderBasic.prototype._addCannedFile.apply(this,arguments);this._cannedKeys[t]=e.s3Key;this._cannedBuckets[t]=e.s3Bucket}return t}})})();qq.s3.RequestSigner=function(e){var t,r=this,n={},i={expectingPolicy:false,method:"POST",signatureSpec:{credentialsProvider:{},endpoint:null,customHeaders:{}},maxConnections:3,paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(e,t){}},o;qq.extend(i,e,true);o=i.signatureSpec.credentialsProvider;function a(e,t,r){var o=t.responseText,a=n[e],s=a.promise,l,c;delete n[e];if(o){try{c=qq.parseJson(o)}catch(e){i.log("Error attempting to parse signature response: "+e,"error")}}if(c&&c.invalid){r=true;l="Invalid policy document or request headers!"}else if(c){if(i.expectingPolicy&&!c.policy){r=true;l="Response does not include the base64 encoded policy!"}else if(!c.signature){r=true;l="Response does not include the signature!"}}else{r=true;l="Received an empty or invalid response from the server!"}if(r){if(l){i.log(l,"error")}s.failure(l)}else{s.success(c)}}function s(e,t,n,i,o,a,s){var l="POST",c=[],u="",p;switch(e){case r.REQUEST_TYPE.MULTIPART_ABORT:l="DELETE";p=qq.format("uploadId={}",a);break;case r.REQUEST_TYPE.MULTIPART_INITIATE:p="uploads";break;case r.REQUEST_TYPE.MULTIPART_COMPLETE:p=qq.format("uploadId={}",a);break;case r.REQUEST_TYPE.MULTIPART_UPLOAD:l="PUT";p=qq.format("partNumber={}&uploadId={}",s,a);break}p=n+"?"+p;qq.each(o,(function(e){c.push(e)}));c.sort();qq.each(c,(function(e,t){u+=t+":"+o[t]+"\n"}));return{toSign:qq.format("{}\n\n{}\n\n{}/{}/{}",l,i||"",u||"\n",t,p),endOfUrl:p}}function l(e,t,r,n){var i;if(e.signatureConstructor){if(n){i=e.signatureConstructor.getHeaders();i[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=n;e.signatureConstructor.withHeaders(i)}u(e.signatureConstructor.getToSign().stringToSign,t)}else{n&&qq.s3.util.refreshPolicyCredentials(e,n);c(e,t,r,n)}}function c(e,t,r,n){var i=JSON.stringify(e),a=CryptoJS.enc.Utf8.parse(i),s=CryptoJS.enc.Base64.stringify(a),l=CryptoJS.HmacSHA1(s,o.get().secretKey),c=CryptoJS.enc.Base64.stringify(l);t.success({policy:s,signature:c},r,n)}function u(e,t){var r=CryptoJS.enc.Utf8.parse(e),n=CryptoJS.HmacSHA1(r,o.get().secretKey),i=CryptoJS.enc.Base64.stringify(n);t.success({signature:i})}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:i.method,contentType:"application/json; charset=utf-8",endpointStore:{get:function(){return i.signatureSpec.endpoint}},paramsStore:i.paramsStore,maxConnections:i.maxConnections,customHeaders:i.signatureSpec.customHeaders,log:i.log,onComplete:a,cors:i.cors,successfulResponseCodes:{POST:[200,201]}}));qq.extend(this,{getSignature:function(e,r){var a=r,s=new qq.Promise;if(o.get().secretKey&&window.CryptoJS){if(o.get().expiration.getTime()>Date.now()){l(r,s)}else{o.onExpired().then((function(){l(r,s,o.get().accessKey,o.get().sessionToken)}),(function(e){i.log("Attempt to update expired credentials apparently failed! Unable to sign request.  ","error");s.failure("Unable to sign request - expired credentials.")}))}}else{i.log("Submitting S3 signature request for "+e);if(a.signatureConstructor){a={headers:a.signatureConstructor.getToSign().stringToSign}}t.initTransport(e).withParams(a).send();n[e]={promise:s}}return s},constructStringToSign:function(e,t,r){var n={},i,a,l,c;return{withHeaders:function(e){n=e;return this},withUploadId:function(e){i=e;return this},withContentType:function(e){a=e;return this},withPartNum:function(e){l=e;return this},getToSign:function(){var u=o.get().sessionToken;n["x-amz-date"]=(new Date).toUTCString();if(u){n[qq.s3.util.SESSION_TOKEN_PARAM_NAME]=u}c=s(e,t,r,a,n,i,l);return{headers:function(){if(a){n["Content-Type"]=a}return n}(),endOfUrl:c.endOfUrl,stringToSign:c.toSign}},getHeaders:function(){return qq.extend({},n)},getEndOfUrl:function(){return c&&c.endOfUrl}}}})};qq.s3.RequestSigner.prototype.REQUEST_TYPE={MULTIPART_INITIATE:"multipart_initiate",MULTIPART_COMPLETE:"multipart_complete",MULTIPART_ABORT:"multipart_abort",MULTIPART_UPLOAD:"multipart_upload"};qq.UploadSuccessAjaxRequester=function(e){var t,r=[],n={method:"POST",endpoint:null,maxConnections:3,customHeaders:{},paramsStore:{},cors:{expected:false,sendCredentials:false},log:function(e,t){}};qq.extend(n,e);function i(e,t,i){var o=r[e],a=t.responseText,s={success:true},l={success:false},c;delete r[e];n.log(qq.format("Received the following response body to an upload success request for id {}: {}",e,a));try{c=qq.parseJson(a);if(i||c&&(c.error||c.success===false)){n.log("Upload success request was rejected by the server.","error");o.failure(qq.extend(c,l))}else{n.log("Upload success was acknowledged by the server.");o.success(qq.extend(c,s))}}catch(t){if(i){n.log(qq.format("Your server indicated failure in its upload success request response for id {}!",e),"error");o.failure(l)}else{n.log("Upload success was acknowledged by the server.");o.success(s)}}}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",method:n.method,endpointStore:{get:function(){return n.endpoint}},paramsStore:n.paramsStore,maxConnections:n.maxConnections,customHeaders:n.customHeaders,log:n.log,onComplete:i,cors:n.cors,successfulResponseCodes:{POST:[200,201]}}));qq.extend(this,{sendSuccessRequest:function(e,i){var o=new qq.Promise;n.log("Submitting upload success request/notification for "+e);t.initTransport(e).withParams(i).send();r[e]=o;return o}})};qq.s3.InitiateMultipartAjaxRequester=function(e){var t,r={},n={filenameParam:"qqfilename",method:"POST",endpointStore:null,paramsStore:null,signatureSpec:null,aclStore:null,reducedRedundancy:false,serverSideEncryption:false,maxConnections:3,getContentType:function(e){},getBucket:function(e){},getKey:function(e){},getName:function(e){},log:function(e,t){}},i;qq.extend(n,e);i=new qq.s3.RequestSigner({signatureSpec:n.signatureSpec,cors:n.cors,log:n.log});function o(e){var t=n.getBucket(e),r={},o=new qq.Promise,a=n.getKey(e),s;r["x-amz-acl"]=n.aclStore.get(e);if(n.reducedRedundancy){r[qq.s3.util.REDUCED_REDUNDANCY_PARAM_NAME]=qq.s3.util.REDUCED_REDUNDANCY_PARAM_VALUE}if(n.serverSideEncryption){r[qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_NAME]=qq.s3.util.SERVER_SIDE_ENCRYPTION_PARAM_VALUE}r[qq.s3.util.AWS_PARAM_PREFIX+n.filenameParam]=encodeURIComponent(n.getName(e));qq.each(n.paramsStore.get(e),(function(e,t){r[qq.s3.util.AWS_PARAM_PREFIX+e]=encodeURIComponent(t)}));s=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_INITIATE,t,a).withContentType(n.getContentType(e)).withHeaders(r);i.getSignature(e,{signatureConstructor:s}).then((function(e){r=s.getHeaders();r.Authorization="AWS "+n.signatureSpec.credentialsProvider.get().accessKey+":"+e.signature;o.success(r,s.getEndOfUrl())}),o.failure);return o}function a(e,t,i){var o=r[e],a=new DOMParser,s=a.parseFromString(t.responseText,"application/xml"),l,c,u,p,d;delete r[e];if(i){d=t.status;c=s.getElementsByTagName("Message");if(c.length>0){p=c[0].textContent}}else{l=s.getElementsByTagName("UploadId");if(l.length>0){u=l[0].textContent}else{p="Upload ID missing from request"}}if(u===undefined){if(p){n.log(qq.format("Specific problem detected initiating multipart upload request for {}: '{}'.",e,p),"error")}else{n.log(qq.format("Unexplained error with initiate multipart upload request for {}.  Status code {}.",e,d),"error")}o.failure("Problem initiating upload request.",t)}else{n.log(qq.format("Initiate multipart upload request successful for {}.  Upload ID is {}",e,u));o.success(u,t)}}t=qq.extend(this,new qq.AjaxRequester({method:n.method,contentType:null,endpointStore:n.endpointStore,maxConnections:n.maxConnections,allowXRequestedWithAndCacheControl:false,log:n.log,onComplete:a,successfulResponseCodes:{POST:[200,201]}}));qq.extend(this,{send:function(e){var i=new qq.Promise;o(e).then((function(o,a){n.log("Submitting S3 initiate multipart upload request for "+e);r[e]=i;t.initTransport(e).withPath(a).withHeaders(o).send()}),i.failure);return i}})};qq.s3.CompleteMultipartAjaxRequester=function(e){var t,r={},n={method:"POST",contentType:"text/xml",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(e){},getKey:function(e){},log:function(e,t){}},i;qq.extend(n,e);i=new qq.s3.RequestSigner({signatureSpec:n.signatureSpec,cors:n.cors,log:n.log});function o(e,t){var r={},o=new qq.Promise,a=n.getBucket(e),s=i.constructStringToSign(i.REQUEST_TYPE.MULTIPART_COMPLETE,a,n.getKey(e)).withUploadId(t).withContentType("application/xml; charset=UTF-8");i.getSignature(e,{signatureConstructor:s}).then((function(e){r=s.getHeaders();r.Authorization="AWS "+n.signatureSpec.credentialsProvider.get().accessKey+":"+e.signature;o.success(r,s.getEndOfUrl())}),o.failure);return o}function a(e,t,i){var o=r[e],a=new DOMParser,s=n.getBucket(e),l=n.getKey(e),c=a.parseFromString(t.responseText,"application/xml"),u=c.getElementsByTagName("Bucket"),p=c.getElementsByTagName("Key");delete r[e];n.log(qq.format("Complete response status {}, body = {}",t.status,t.responseText));if(i){n.log(qq.format("Complete Multipart Upload request for {} failed with status {}.",e,t.status),"error")}else{if(u.length&&p.length){if(u[0].textContent!==s){i=true;n.log(qq.format("Wrong bucket in response to Complete Multipart Upload request for {}.",e),"error")}}else{i=true;n.log(qq.format("Missing bucket and/or key in response to Complete Multipart Upload request for {}.",e),"error")}}if(i){o.failure("Problem combining the file parts!",t)}else{o.success({},t)}}function s(e){var t=document.implementation.createDocument(null,"CompleteMultipartUpload",null);e.sort((function(e,t){return e.part-t.part}));qq.each(e,(function(e,r){var n=r.part,i=r.etag,o=t.createElement("Part"),a=t.createElement("PartNumber"),s=t.createTextNode(n),l=t.createTextNode(i),c=t.createElement("ETag");c.appendChild(l);a.appendChild(s);o.appendChild(a);o.appendChild(c);qq(t).children()[0].appendChild(o)}));return(new XMLSerializer).serializeToString(t)}t=qq.extend(this,new qq.AjaxRequester({method:n.method,contentType:"application/xml; charset=UTF-8",endpointStore:n.endpointStore,maxConnections:n.maxConnections,allowXRequestedWithAndCacheControl:false,log:n.log,onComplete:a,successfulResponseCodes:{POST:[200,201]}}));qq.extend(this,{send:function(e,i,a){var l=new qq.Promise;o(e,i).then((function(i,o){var c=s(a);n.log("Submitting S3 complete multipart upload request for "+e);r[e]=l;delete i["Content-Type"];t.initTransport(e).withPath(o).withHeaders(i).withPayload(c).send()}),l.failure);return l}})};qq.s3.AbortMultipartAjaxRequester=function(e){var t,r={method:"DELETE",endpointStore:null,signatureSpec:null,maxConnections:3,getBucket:function(e){},getKey:function(e){},log:function(e,t){}},n;qq.extend(r,e);n=new qq.s3.RequestSigner({signatureSpec:r.signatureSpec,cors:r.cors,log:r.log});function i(e,t){var i={},o=new qq.Promise,a=r.endpointStore.get(e),s=r.getBucket(e),l=n.constructStringToSign(n.REQUEST_TYPE.MULTIPART_ABORT,s,r.getKey(e)).withUploadId(t);n.getSignature(e,{signatureConstructor:l}).then((function(e){i=l.getHeaders();i.Authorization="AWS "+r.signatureSpec.credentialsProvider.get().accessKey+":"+e.signature;o.success(i,l.getEndOfUrl())}),o.failure);return o}function o(e,t,n){var i=new DOMParser,o=i.parseFromString(t.responseText,"application/xml"),a=o.getElementsByTagName("Error"),s;r.log(qq.format("Abort response status {}, body = {}",t.status,t.responseText));if(n){r.log(qq.format("Abort Multipart Upload request for {} failed with status {}.",e,t.status),"error")}else{if(a.length){n=true;s=o.getElementsByTagName("Message")[0].textContent;r.log(qq.format("Failed to Abort Multipart Upload request for {}.  Error: {}",e,s),"error")}else{r.log(qq.format("Abort MPU request succeeded for file ID {}.",e))}}}t=qq.extend(this,new qq.AjaxRequester({validMethods:["DELETE"],method:r.method,contentType:null,endpointStore:r.endpointStore,maxConnections:r.maxConnections,allowXRequestedWithAndCacheControl:false,log:r.log,onComplete:o,successfulResponseCodes:{DELETE:[204]}}));qq.extend(this,{send:function(e,n){i(e,n).then((function(n,i){r.log("Submitting S3 Abort multipart upload request for "+e);t.initTransport(e).withPath(i).withHeaders(n).send()}))}})};qq.s3.XhrUploadHandler=function(e,t){var r=t.getName,n=t.log,i=200,o=e.getBucket,a=e.getKeyName,s=e.filenameParam,l=e.paramsStore,c=e.endpointStore,u=e.aclStore,p=e.objectProperties.reducedRedundancy,d=e.objectProperties.serverSideEncryption,h=e.validation,m=e.signature,f=this,g=e.signature.credentialsProvider,y={combine:function(e){var t=f._getPersistableData(e).uploadId,r=f._getPersistableData(e).etags,n=new qq.Promise;b.completeMultipart.send(e,t,r).then(n.success,(function t(r,i){n.failure(w.done(e,i).response,i)}));return n},done:function(e,t,r){var n=w.response.parse(e,t),i;if(n.success){i=t.getResponseHeader("ETag");if(!f._getPersistableData(e).etags){f._getPersistableData(e).etags=[]}f._getPersistableData(e).etags.push({part:r+1,etag:i})}},initHeaders:function(t,r){var n={},i=e.endpointStore.get(t),o=w.bucket.getName(t),a=w.key.urlSafe(t),s=new qq.Promise,l=b.restSignature.constructStringToSign(b.restSignature.REQUEST_TYPE.MULTIPART_UPLOAD,o,a).withPartNum(r+1).withUploadId(f._getPersistableData(t).uploadId);b.restSignature.getSignature(t+"."+r,{signatureConstructor:l}).then((function(e){n=l.getHeaders();n.Authorization="AWS "+g.get().accessKey+":"+e.signature;s.success(n,l.getEndOfUrl())}),s.failure);return s},put:function(t,r){var n=f._createXhr(t,r),i=f._getChunkData(t,r),o=e.endpointStore.get(t),a=new qq.Promise;y.initHeaders(t,r).then((function(e,s){var l=o+"/"+s;f._registerProgressHandler(t,r,i.size);w.track(t,n,r).then(a.success,a.failure);n.open("PUT",l,true);qq.each(e,(function(e,t){n.setRequestHeader(e,t)}));n.send(i.blob)}),(function(){a.failure({error:"Problem signing the chunk!"},n)}));return a},send:function(e,t){var r=new qq.Promise;y.setup(e).then((function(){y.put(e,t).then(r.success,r.failure)}),(function(e,t){r.failure({error:e},t)}));return r},setup:function(e){var t=new qq.Promise,r=f._getPersistableData(e).uploadId,n=new qq.Promise;if(!r){f._getPersistableData(e).uploadId=n;b.initiateMultipart.send(e).then((function(r){f._getPersistableData(e).uploadId=r;n.success(r);t.success(r)}),(function(r){f._getPersistableData(e).uploadId=null;t.failure(r);n.failure(r)}))}else if(r instanceof qq.Promise){r.then((function(e){t.success(e)}))}else{t.success(r)}return t}},b={abortMultipart:new qq.s3.AbortMultipartAjaxRequester({endpointStore:c,signatureSpec:m,cors:e.cors,log:n,getBucket:function(e){return w.bucket.getName(e)},getKey:function(e){return w.key.urlSafe(e)}}),completeMultipart:new qq.s3.CompleteMultipartAjaxRequester({endpointStore:c,signatureSpec:m,cors:e.cors,log:n,getBucket:function(e){return w.bucket.getName(e)},getKey:function(e){return w.key.urlSafe(e)}}),initiateMultipart:new qq.s3.InitiateMultipartAjaxRequester({filenameParam:s,endpointStore:c,paramsStore:l,signatureSpec:m,aclStore:u,reducedRedundancy:p,serverSideEncryption:d,cors:e.cors,log:n,getContentType:function(e){return f._getMimeType(e)},getBucket:function(e){return w.bucket.getName(e)},getKey:function(e){return w.key.urlSafe(e)},getName:function(e){return r(e)}}),policySignature:new qq.s3.RequestSigner({expectingPolicy:true,signatureSpec:m,cors:e.cors,log:n}),restSignature:new qq.s3.RequestSigner({signatureSpec:m,cors:e.cors,log:n})},v={initParams:function(e){var t=l.get(e);t[s]=r(e);return qq.s3.util.generateAwsParams({endpoint:c.get(e),params:t,type:f._getMimeType(e),bucket:w.bucket.getName(e),key:f.getThirdPartyFileId(e),accessKey:g.get().accessKey,sessionToken:g.get().sessionToken,acl:u.get(e),expectedStatus:i,minFileSize:h.minSizeLimit,maxFileSize:h.maxSizeLimit,reducedRedundancy:p,serverSideEncryption:d,log:n},qq.bind(b.policySignature.getSignature,this,e))},send:function(e){var t=new qq.Promise,r=f._createXhr(e),i=f.getFile(e);f._registerProgressHandler(e);w.track(e,r).then(t.success,t.failure);v.setup(e,r,i).then((function(t){n("Sending upload request for "+e);r.send(t)}),t.failure);return t},setup:function(e,t,r){var n=new FormData,i=c.get(e),o=i,a=new qq.Promise;v.initParams(e).then((function(e){t.open("POST",o,true);qq.obj2FormData(e,n);n.append("file",r);a.success(n)}),(function(e){a.failure({error:e})}));return a}},w={bucket:{promise:function(e){var t=new qq.Promise,r=f._getFileState(e).bucket;if(r){t.success(r)}else{o(e).then((function(r){f._getFileState(e).bucket=r;t.success(r)}),t.failure)}return t},getName:function(e){return f._getFileState(e).bucket}},done:function(e,t){var r=w.response.parse(e,t),i=r.success!==true;if(i&&w.response.shouldReset(r.code)){n("This is an unrecoverable error, we must restart the upload entirely on the next retry attempt.","error");r.reset=true}return{success:!i,response:r}},key:{promise:function(e){var t=new qq.Promise,n=f.getThirdPartyFileId(e);if(n==null){n=new qq.Promise;f._setThirdPartyFileId(e,n);a(e,r(e)).then((function(r){f._setThirdPartyFileId(e,r);t.success(r)}),(function(r){f._setThirdPartyFileId(e,null);t.failure(r)}))}else if(qq.isGenericPromise(n)){t.then(n.success,n.failure)}else{t.success(n)}return t},urlSafe:function(e){return encodeURIComponent(f.getThirdPartyFileId(e))}},response:{parse:function(e,t){var r={},o;try{n(qq.format("Received response status {} with body: {}",t.status,t.responseText));if(t.status===i){r.success=true}else{o=w.response.parseError(t.responseText);if(o){r.error=o.message;r.code=o.code}}}catch(e){n("Error when attempting to parse xhr response text ("+e.message+")","error")}return r},parseError:function(e){var t=new DOMParser,r=t.parseFromString(e,"application/xml"),n=r.getElementsByTagName("Error"),i={},o,a;if(n.length){o=r.getElementsByTagName("Code");a=r.getElementsByTagName("Message");if(a.length){i.message=a[0].textContent}if(o.length){i.code=o[0].textContent}return i}},shouldReset:function(e){return e==="EntityTooSmall"||e==="InvalidPart"||e==="InvalidPartOrder"||e==="NoSuchUpload"}},start:function(e,t){var r=new qq.Promise;w.key.promise(e).then((function(){w.bucket.promise(e).then((function(){if(t==null){v.send(e).then(r.success,r.failure)}else{y.send(e,t).then(r.success,r.failure)}}))}),(function(e){r.failure({error:e})}));return r},track:function(e,t,r){var n=new qq.Promise;t.onreadystatechange=function(){if(t.readyState===4){var i;if(r==null){i=w.done(e,t);n[i.success?"success":"failure"](i.response,t)}else{y.done(e,t,r);i=w.done(e,t);n[i.success?"success":"failure"](i.response,t)}}};return n}};qq.extend(this,{uploadChunk:w.start,uploadFile:w.start});qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"s3"},e),proxy:qq.extend({getEndpoint:e.endpointStore.get},t)}));qq.override(this,(function(e){return{expunge:function(t){var r=f._getPersistableData(t)&&f._getPersistableData(t).uploadId,n=f._maybeDeletePersistedChunkData(t);if(r!==undefined&&n){b.abortMultipart.send(t,r)}e.expunge(t)},finalizeChunks:function(e){return y.combine(e)},_getLocalStorageId:function(t){var r=e._getLocalStorageId(t),n=w.bucket.getName(t);return r+"-"+n}}}))};qq.s3.FormUploadHandler=function(e,t){var r=this,n=t.onUuidChanged,i=t.getName,o=t.getUuid,a=t.log,s=e.getBucket,l=e.getKeyName,c=e.filenameParam,u=e.paramsStore,p=e.endpointStore,d=e.aclStore,h=e.objectProperties.reducedRedundancy,m=e.objectProperties.serverSideEncryption,f=e.validation,g=e.signature,y=e.iframeSupport.localBlankPagePath,b=e.signature.credentialsProvider,v=new qq.s3.RequestSigner({signatureSpec:g,cors:e.cors,log:a});if(y===undefined){throw new Error("successRedirectEndpoint MUST be defined if you intend to use browsers that do not support the File API!")}function w(t,n){var i,o=e.endpointStore.get(t),s=qq.s3.util.getBucket(o),l,c,u;try{l=n.contentDocument||n.contentWindow.document;c=l.body.innerHTML;u=qq.s3.util.parseIframeResponse(n);if(u.bucket===s&&u.key===qq.s3.util.encodeQueryStringParam(r.getThirdPartyFileId(t))){return true}a("Response from AWS included an unexpected bucket or key name.","error")}catch(e){a("Error when attempting to parse form upload response ("+e.message+")","error")}return false}function E(e){var t=u.get(e);t[c]=i(e);return qq.s3.util.generateAwsParams({endpoint:p.get(e),params:t,bucket:r._getFileState(e).bucket,key:r.getThirdPartyFileId(e),accessKey:b.get().accessKey,sessionToken:b.get().sessionToken,acl:d.get(e),minFileSize:f.minSizeLimit,maxFileSize:f.maxSizeLimit,successRedirectUrl:y,reducedRedundancy:h,serverSideEncryption:m,log:a},qq.bind(v.getSignature,this,e))}function S(t,n){var o=new qq.Promise,a=e.demoMode?"GET":"POST",s=e.endpointStore.get(t),l=i(t);E(t).then((function(e){var t=r._initFormForUpload({method:a,endpoint:s,params:e,paramsInBody:true,targetName:n.name});o.success(t)}),(function(e){o.failure(e);x(t,n,l,{error:e})}));return o}function _(e){var t=r._createIframe(e),n=r.getInput(e),i=new qq.Promise;S(e,t).then((function(o){o.appendChild(n);r._attachLoadEvent(t,(function(r){a("iframe loaded");if(r){if(r.success===false){a("Amazon likely rejected the upload request","error");i.failure(r)}}else{r={};r.success=w(e,t);if(r.success===false){a("A success response was received by Amazon, but it was invalid in some way.","error");i.failure(r)}else{qq.extend(r,qq.s3.util.parseIframeResponse(t));i.success(r)}}x(e,t)}));a("Sending upload request for "+e);o.submit();qq(o).remove()}),i.failure);return i}function x(e,t){r._detachLoadEvent(e);t&&qq(t).remove()}qq.extend(this,new qq.FormUploadHandler({options:{isCors:false,inputName:"file"},proxy:{onCancel:e.onCancel,onUuidChanged:n,getName:i,getUuid:o,log:a}}));qq.extend(this,{uploadFile:function(e){var t=i(e),n=new qq.Promise;if(r.getThirdPartyFileId(e)){if(r._getFileState(e).bucket){_(e).then(n.success,n.failure)}else{s(e).then((function(t){r._getFileState(e).bucket=t;_(e).then(n.success,n.failure)}))}}else{l(e,t).then((function(t){s(e).then((function(i){r._getFileState(e).bucket=i;r._setThirdPartyFileId(e,t);_(e).then(n.success,n.failure)}),(function(e){n.failure({error:e})}))}),(function(e){n.failure({error:e})}))}return n}})};(function(){qq.s3.FineUploader=function(e){var t={failedUploadTextDisplay:{mode:"custom"}};qq.extend(t,e,true);qq.FineUploader.call(this,t,"s3");if(!qq.supportedFeatures.ajaxUploading&&t.iframeSupport.localBlankPagePath===undefined){this._options.element.innerHTML="<div>You MUST set the <code>localBlankPagePath</code> property "+"of the <code>iframeSupport</code> option since this browser does not support the File API!</div>"}};qq.extend(qq.s3.FineUploader.prototype,qq.s3.FineUploaderBasic.prototype);qq.extend(qq.s3.FineUploader.prototype,qq.uiPublicApi);qq.extend(qq.s3.FineUploader.prototype,qq.uiPrivateApi)})();qq.PasteSupport=function(e){var t,r;t={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}};function n(e){return e.type&&e.type.indexOf("image/")===0}function i(){r=qq(t.targetElement).attach("paste",(function(e){var r=e.clipboardData;if(r){qq.each(r.items,(function(e,r){if(n(r)){var i=r.getAsFile();t.callbacks.pasteReceived(i)}}))}}))}function o(){if(r){r()}}qq.extend(t,e);i();qq.extend(this,{reset:function(){o()}})};qq.DragAndDrop=function(e){var t,r="qq-hidezones",n="qq-hide-dropzone",i=[],o=[],a=new qq.DisposeSupport;t={dropZoneElements:[],allowMultipleItems:true,classes:{dropActive:null},callbacks:new qq.DragAndDrop.callbacks};qq.extend(t,e,true);function s(e,r){var n=Array.prototype.slice.call(e);t.callbacks.dropLog("Grabbed "+e.length+" dropped files.");r.dropDisabled(false);t.callbacks.processingDroppedFilesComplete(n,r.getElement())}function l(e){var r=new qq.Promise;if(e.isFile){e.file((function(t){var n=e.name,i=e.fullPath,a=i.indexOf(n);i=i.substr(0,a);if(i.charAt(0)==="/"){i=i.substr(1)}t.qqPath=i;o.push(t);r.success()}),(function(n){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+n.code+".","error");r.failure()}))}else if(e.isDirectory){c(e).then((function e(t){var n=t.length;qq.each(t,(function(e,t){l(t).done((function(){n-=1;if(n===0){r.success()}}))}));if(!t.length){r.success()}}),(function n(i){t.callbacks.dropLog("Problem parsing '"+e.fullPath+"'.  FileError code "+i.code+".","error");r.failure()}))}return r}function c(e,t,r,n){var i=n||new qq.Promise,o=t||e.createReader();o.readEntries((function t(n){var a=r?r.concat(n):n;if(n.length){setTimeout((function(){c(e,o,a,i)}),0)}else{i.success(a)}}),i.failure);return i}function u(e,r){var n=[],i=new qq.Promise;t.callbacks.processingDroppedFiles();r.dropDisabled(true);if(e.files.length>1&&!t.allowMultipleItems){t.callbacks.processingDroppedFilesComplete([]);t.callbacks.dropError("tooManyFilesError","");r.dropDisabled(false);i.failure()}else{o=[];if(qq.isFolderDropSupported(e)){qq.each(e.items,(function(e,t){var r=t.webkitGetAsEntry();if(r){if(r.isFile){o.push(t.getAsFile())}else{n.push(l(r).done((function(){n.pop();if(n.length===0){i.success()}})))}}}))}else{o=e.files}if(n.length===0){i.success()}}return i}function p(e){var l=new qq.UploadDropZone({HIDE_ZONES_EVENT_NAME:r,element:e,onEnter:function(r){qq(e).addClass(t.classes.dropActive);r.stopPropagation()},onLeaveNotDescendants:function(r){qq(e).removeClass(t.classes.dropActive)},onDrop:function(e){u(e.dataTransfer,l).then((function(){s(o,l)}),(function(){t.callbacks.dropLog("Drop event DataTransfer parsing failed.  No files will be uploaded.","error")}))}});a.addDisposer((function(){l.dispose()}));qq(e).hasAttribute(n)&&qq(e).hide();i.push(l);return l}function d(e){var t;qq.each(e.dataTransfer.types,(function(e,r){if(r==="Files"){t=true;return false}}));return t}function h(e){if(qq.firefox()){return!e.relatedTarget}if(qq.safari()){return e.x<0||e.y<0}return e.x===0&&e.y===0}function m(){var e=t.dropZoneElements,i=function(){setTimeout((function(){qq.each(e,(function(e,r){qq(r).hasAttribute(n)&&qq(r).hide();qq(r).removeClass(t.classes.dropActive)}))}),10)};qq.each(e,(function(t,r){var i=p(r);if(e.length&&qq.supportedFeatures.fileDrop){a.attach(document,"dragenter",(function(t){if(!i.dropDisabled()&&d(t)){qq.each(e,(function(e,t){if(t instanceof HTMLElement&&qq(t).hasAttribute(n)){qq(t).css({display:"block"})}}))}}))}}));a.attach(document,"dragleave",(function(e){if(h(e)){i()}}));a.attach(qq(document).children()[0],"mouseenter",(function(e){i()}));a.attach(document,"drop",(function(e){e.preventDefault();i()}));a.attach(document,r,i)}m();qq.extend(this,{setupExtraDropzone:function(e){t.dropZoneElements.push(e);p(e)},removeDropzone:function(e){var r,n=t.dropZoneElements;for(r in n){if(n[r]===e){return n.splice(r,1)}}},dispose:function(){a.dispose();qq.each(i,(function(e,t){t.dispose()}))}})};qq.DragAndDrop.callbacks=function(){return{processingDroppedFiles:function(){},processingDroppedFilesComplete:function(e,t){},dropError:function(e,t){qq.log("Drag & drop error code '"+e+" with these specifics: '"+t+"'","error")},dropLog:function(e,t){qq.log(e,t)}}};qq.UploadDropZone=function(e){var t=new qq.DisposeSupport,r,n,i,o;r={element:null,onEnter:function(e){},onLeave:function(e){},onLeaveNotDescendants:function(e){},onDrop:function(e){}};qq.extend(r,e);n=r.element;function a(){return qq.safari()||qq.firefox()&&qq.windows()}function s(e){if(!o){if(a){t.attach(document,"dragover",(function(e){e.preventDefault()}))}else{t.attach(document,"dragover",(function(e){if(e.dataTransfer){e.dataTransfer.dropEffect="none";e.preventDefault()}}))}o=true}}function l(e){if(!qq.supportedFeatures.fileDrop){return false}var t,r=e.dataTransfer,n=qq.safari();t=qq.ie()&&qq.supportedFeatures.fileDrop?true:r.effectAllowed!=="none";return r&&t&&(r.files||!n&&r.types.contains&&r.types.contains("Files"))}function c(e){if(e!==undefined){i=e}return i}function u(){var e;function t(){e=document.createEvent("Event");e.initEvent(r.HIDE_ZONES_EVENT_NAME,true,true)}if(window.CustomEvent){try{e=new CustomEvent(r.HIDE_ZONES_EVENT_NAME)}catch(e){t()}}else{t()}document.dispatchEvent(e)}function p(){t.attach(n,"dragover",(function(e){if(!l(e)){return}var t=qq.ie()&&qq.supportedFeatures.fileDrop?null:e.dataTransfer.effectAllowed;if(t==="move"||t==="linkMove"){e.dataTransfer.dropEffect="move"}else{e.dataTransfer.dropEffect="copy"}e.stopPropagation();e.preventDefault()}));t.attach(n,"dragenter",(function(e){if(!c()){if(!l(e)){return}r.onEnter(e)}}));t.attach(n,"dragleave",(function(e){if(!l(e)){return}r.onLeave(e);var t=document.elementFromPoint(e.clientX,e.clientY);if(qq(this).contains(t)){return}r.onLeaveNotDescendants(e)}));t.attach(n,"drop",(function(e){if(!c()){if(!l(e)){return}e.preventDefault();e.stopPropagation();r.onDrop(e);u()}}))}s();p();qq.extend(this,{dropDisabled:function(e){return c(e)},dispose:function(){t.dispose()},getElement:function(){return n}})};qq.DeleteFileAjaxRequester=function(e){var t,r={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(e){return{}},paramsStore:{},demoMode:false,cors:{expected:false,sendCredentials:false},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,r){}};qq.extend(r,e);function n(){if(r.method.toUpperCase()==="POST"){return{_method:"DELETE"}}return{}}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:r.method,endpointStore:r.endpointStore,paramsStore:r.paramsStore,mandatedParams:n(),maxConnections:r.maxConnections,customHeaders:function(e){return r.customHeaders.get(e)},demoMode:r.demoMode,log:r.log,onSend:r.onDelete,onComplete:r.onDeleteComplete,cors:r.cors}));qq.extend(this,{sendDelete:function(e,n,i){var o=i||{};r.log("Submitting delete file request for "+e);if(r.method==="DELETE"){t.initTransport(e).withPath(n).withParams(o).send()}else{o[r.uuidParamName]=n;t.initTransport(e).withParams(o).send()}}})};(function(){function e(e){var t=e.naturalWidth,r=e.naturalHeight,n=document.createElement("canvas"),i;if(t*r>1024*1024){n.width=n.height=1;i=n.getContext("2d");i.drawImage(e,-t+1,0);return i.getImageData(0,0,1,1).data[3]===0}else{return false}}function t(e,t,r){var n=document.createElement("canvas"),i=0,o=r,a=r,s,l,c,u;n.width=1;n.height=r;s=n.getContext("2d");s.drawImage(e,0,0);l=s.getImageData(0,0,1,r).data;while(a>i){c=l[(a-1)*4+3];if(c===0){o=a}else{i=a}a=o+i>>1}u=a/r;return u===0?1:u}function r(e,t,r){var n=document.createElement("canvas"),o=t.mime||"image/jpeg";i(e,n,t,r);return n.toDataURL(o,t.quality||.8)}function n(e){var t=5241e3;if(!qq.ios()){throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!")}if(e.origHeight*e.origWidth>t){return{newHeight:Math.round(Math.sqrt(t*(e.origHeight/e.origWidth))),newWidth:Math.round(Math.sqrt(t*(e.origWidth/e.origHeight)))}}}function i(r,i,a,s){var l=r.naturalWidth,c=r.naturalHeight,u=a.width,p=a.height,d=i.getContext("2d"),h;d.save();if(!qq.supportedFeatures.unlimitedScaledImageSize){h=n({origWidth:u,origHeight:p});if(h){qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",u,p,h.newWidth,h.newHeight),"warn");u=h.newWidth;p=h.newHeight}}o(i,u,p,a.orientation);if(qq.ios()){(function(){if(e(r)){l/=2;c/=2}var n=1024,i=document.createElement("canvas"),o=s?t(r,l,c):1,a=Math.ceil(n*u/l),h=Math.ceil(n*p/c/o),m=0,f=0,g,y,b;i.width=i.height=n;g=i.getContext("2d");while(m<c){y=0,b=0;while(y<l){g.clearRect(0,0,n,n);g.drawImage(r,-y,-m);d.drawImage(i,0,0,n,n,b,f,a,h);y+=n;b+=a}m+=n;f+=h}d.restore();i=g=null})()}else{d.drawImage(r,0,0,u,p)}i.qqImageRendered&&i.qqImageRendered()}function o(e,t,r,n){switch(n){case 5:case 6:case 7:case 8:e.width=r;e.height=t;break;default:e.width=t;e.height=r}var i=e.getContext("2d");switch(n){case 2:i.translate(t,0);i.scale(-1,1);break;case 3:i.translate(t,r);i.rotate(Math.PI);break;case 4:i.translate(0,r);i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI);i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI);i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI);i.translate(t,-r);i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI);i.translate(-t,0);break;default:break}}function a(e,t){var r=this;if(window.Blob&&e instanceof Blob){(function(){var t=new Image,n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!n){throw Error("No createObjectURL function found to create blob url")}t.src=n.createObjectURL(e);r.blob=e;e=t})()}if(!e.naturalWidth&&!e.naturalHeight){e.onload=function(){var e=r.imageLoadListeners;if(e){r.imageLoadListeners=null;setTimeout((function(){for(var t=0,r=e.length;t<r;t++){e[t]()}}),0)}};e.onerror=t;this.imageLoadListeners=[]}this.srcImage=e}a.prototype.render=function(e,t){t=t||{};var n=this,o=this.srcImage.naturalWidth,a=this.srcImage.naturalHeight,s=t.width,l=t.height,c=t.maxWidth,u=t.maxHeight,p=!this.blob||this.blob.type==="image/jpeg",d=e.tagName.toLowerCase(),h;if(this.imageLoadListeners){this.imageLoadListeners.push((function(){n.render(e,t)}));return}if(s&&!l){l=a*s/o<<0}else if(l&&!s){s=o*l/a<<0}else{s=o;l=a}if(c&&s>c){s=c;l=a*s/o<<0}if(u&&l>u){l=u;s=o*l/a<<0}h={width:s,height:l},qq.each(t,(function(e,t){h[e]=t}));if(d==="img"){(function(){var t=e.src;e.src=r(n.srcImage,h,p);t===e.src&&e.onload()})()}else if(d==="canvas"){i(this.srcImage,e,h,p)}if(typeof this.onrender==="function"){this.onrender(e)}};qq.MegaPixImage=a})();qq.ImageGenerator=function(e){function t(e){return e.tagName.toLowerCase()==="img"}function r(e){return e.tagName.toLowerCase()==="canvas"}function n(){return(new Image).crossOrigin!==undefined}function i(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}function o(e){var t=e.split("/"),r=t[t.length-1],n=qq.getExtension(r);n=n&&n.toLowerCase();switch(n){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function a(e){var t=document.createElement("a"),r,n,i;t.href=e;r=t.protocol;i=t.port;n=t.hostname;if(r.toLowerCase()!==window.location.protocol.toLowerCase()){return true}if(n.toLowerCase()!==window.location.hostname.toLowerCase()){return true}if(i!==window.location.port&&!qq.ie()){return true}return false}function s(t,r){t.onload=function(){t.onload=null;t.onerror=null;r.success(t)};t.onerror=function(){t.onload=null;t.onerror=null;e("Problem drawing thumbnail!","error");r.failure(t,"Problem drawing thumbnail!")}}function l(e,t){e.qqImageRendered=function(){t.success(e)}}function c(n,i){var o=t(n)||r(n);if(t(n)){s(n,i)}else if(r(n)){l(n,i)}else{i.failure(n);e(qq.format("Element container of type {} is not supported!",n.tagName),"error")}return o}function u(t,r,n){var i=new qq.Promise,o=new qq.Identify(t,e),a=n.maxSize,s=n.orient==null?true:n.orient,l=function(){r.onerror=null;r.onload=null;e("Could not render preview, file may be too large!","error");i.failure(r,"Browser cannot render image!")};o.isPreviewable().then((function(n){var o={parse:function(){return(new qq.Promise).success()}},u=s?new qq.Exif(t,e):o,p=new qq.MegaPixImage(t,l);if(c(r,i)){u.parse().then((function(e){var t=e&&e.Orientation;p.render(r,{maxWidth:a,maxHeight:a,orientation:t,mime:n})}),(function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t));p.render(r,{maxWidth:a,maxHeight:a,mime:n})}))}}),(function(){e("Not previewable");i.failure(r,"Not previewable")}));return i}function p(e,t,r,n){var i=new Image,s=new qq.Promise;c(i,s);if(a(e)){i.crossOrigin="anonymous"}i.src=e;s.then((function a(){c(t,r);var s=new qq.MegaPixImage(i);s.render(t,{maxWidth:n,maxHeight:n,mime:o(e)})}),r.failure)}function d(e,t,r,n){c(t,r);qq(t).css({maxWidth:n+"px",maxHeight:n+"px"});t.src=e}function h(e,o,s){var l=new qq.Promise,u=s.scale,h=u?s.maxSize:null;if(u&&t(o)){if(i()){if(a(e)&&!n()){d(e,o,l,h)}else{p(e,o,l,h)}}else{d(e,o,l,h)}}else if(r(o)){p(e,o,l,h)}else if(c(o,l)){o.src=e}return l}qq.extend(this,{generate:function(t,r,n){if(qq.isString(t)){e("Attempting to update thumbnail based on server response.");return h(t,r,n||{})}else{e("Attempting to draw client-side image preview.");return u(t,r,n||{})}}})};qq.Exif=function(e,t){var r=[274],n={274:{name:"Orientation",bytes:2}};function i(e){var t=0,r=0;while(e.length>0){t+=parseInt(e.substring(0,2),16)*Math.pow(2,r);e=e.substring(2,e.length);r+=8}return t}function o(t,r){var n=t,i=r;if(n===undefined){n=2;i=new qq.Promise}qq.readBlobToHex(e,n,4).then((function(e){var t=/^ffe([0-9])/.exec(e),r;if(t){if(t[1]!=="1"){r=parseInt(e.slice(4,8),16);o(n+r+2,i)}else{i.success(n)}}else{i.failure("No EXIF header to be found!")}}));return i}function a(){var t=new qq.Promise;qq.readBlobToHex(e,0,6).then((function(e){if(e.indexOf("ffd8")!==0){t.failure("Not a valid JPEG!")}else{o().then((function(e){t.success(e)}),(function(e){t.failure(e)}))}}));return t}function s(t){var r=new qq.Promise;qq.readBlobToHex(e,t+10,2).then((function(e){r.success(e==="4949")}));return r}function l(t,r){var n=new qq.Promise;qq.readBlobToHex(e,t+18,2).then((function(e){if(r){return n.success(i(e))}else{n.success(parseInt(e,16))}}));return n}function c(t,r){var n=t+20,i=r*12;return qq.readBlobToHex(e,n,i)}function u(e){var t=[],r=0;while(r+24<=e.length){t.push(e.slice(r,r+24));r+=24}return t}function p(e,t){var o=16,a=qq.extend([],r),s={};qq.each(t,(function(t,r){var l=r.slice(0,4),c=e?i(l):parseInt(l,16),u=a.indexOf(c),p,d,h;if(u>=0){d=n[c].name;h=n[c].bytes;p=r.slice(o,o+h*2);s[d]=e?i(p):parseInt(p,16);a.splice(u,1)}if(a.length===0){return false}}));return s}qq.extend(this,{parse:function(){var r=new qq.Promise,n=function(e){t(qq.format("EXIF header parse failed: '{}' ",e));r.failure(e)};a().then((function(i){t(qq.format("Moving forward with EXIF header parsing for '{}'",e.name===undefined?"blob":e.name));s(i).then((function(e){t(qq.format("EXIF Byte order is {} endian",e?"little":"big"));l(i,e).then((function(o){t(qq.format("Found {} APP1 directory entries",o));c(i,o).then((function(n){var i=u(n),o=p(e,i);t("Successfully parsed some EXIF tags");r.success(o)}),n)}),n)}),n)}),n);return r}})};qq.Identify=function(e,t){function r(e,t){var r=false,n=[].concat(e);qq.each(n,(function(e,n){if(t.indexOf(n)===0){r=true;return false}}));return r}qq.extend(this,{isPreviewable:function(){var n=this,i=new qq.Promise,o=false,a=e.name===undefined?"blob":e.name;t(qq.format("Attempting to determine if {} can be rendered in this browser",a));t("First pass: check type attribute of blob object.");if(this.isPreviewableSync()){t("Second pass: check for magic bytes in file header.");qq.readBlobToHex(e,0,4).then((function(e){qq.each(n.PREVIEWABLE_MIME_TYPES,(function(t,n){if(r(n,e)){if(t!=="image/tiff"||qq.supportedFeatures.tiffPreviews){o=true;i.success(t)}return false}}));t(qq.format("'{}' is {} able to be rendered in this browser",a,o?"":"NOT"));if(!o){i.failure()}}),(function(){t("Error reading file w/ name '"+a+"'.  Not able to be rendered in this browser.");i.failure()}))}else{i.failure()}return i},isPreviewableSync:function(){var r=e.type,n=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),r)>=0,i=false,o=e.name===undefined?"blob":e.name;if(n){if(r==="image/tiff"){i=qq.supportedFeatures.tiffPreviews}else{i=true}}!i&&t(o+" is not previewable in this browser per the blob's type attr");return i}})};qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]};qq.ImageValidation=function(e,t){function r(e){var t=false;qq.each(e,(function(e,r){if(r>0){t=true;return false}}));return t}function n(){var r=new qq.Promise;new qq.Identify(e,t).isPreviewable().then((function(){var n=new Image,i=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(i){n.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error");r.failure()};n.onload=function(){r.success({width:this.width,height:this.height})};n.src=i.createObjectURL(e)}else{t("No createObjectURL function available to generate image URL!","error");r.failure()}}),r.failure);return r}function i(e,t){var r;qq.each(e,(function(e,n){if(n>0){var i=/(max|min)(Width|Height)/.exec(e),o=i[2].charAt(0).toLowerCase()+i[2].slice(1),a=t[o];switch(i[1]){case"min":if(a<n){r=e;return false}break;case"max":if(a>n){r=e;return false}break}}}));return r}this.validate=function(e){var o=new qq.Promise;t("Attempting to validate image.");if(r(e)){n().then((function(t){var r=i(e,t);if(r){o.failure(r)}else{o.success()}}),o.success)}else{o.success()}return o}};qq.Session=function(e){var t={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(e){},log:function(e,t){}};qq.extend(t,e,true);function r(e){if(qq.isArray(e)){return true}t.log("Session response is not an array.","error")}function n(e,n,i,o){var a=false;n=n&&r(e);if(n){qq.each(e,(function(e,r){if(r.uuid==null){a=true;t.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",e),"error")}else if(r.name==null){a=true;t.log(qq.format("Session response item {} did not include a valid name - ignoring.",e),"error")}else{try{t.addFileRecord(r);return true}catch(e){a=true;t.log(e.message,"error")}}return false}))}o[n&&!a?"success":"failure"](e,i)}this.refresh=function(){var e=new qq.Promise,r=function(t,r,i){n(t,r,i,e)},i=qq.extend({},t),o=new qq.SessionAjaxRequester(qq.extend(i,{onComplete:r}));o.queryServer();return e}};qq.SessionAjaxRequester=function(e){var t,r={endpoint:null,customHeaders:{},params:{},cors:{expected:false,sendCredentials:false},onComplete:function(e,t,r){},log:function(e,t){}};qq.extend(r,e);function n(e,t,n){var i=null;if(t.responseText!=null){try{i=qq.parseJson(t.responseText)}catch(e){r.log("Problem parsing session response: "+e.message,"error");n=true}}r.onComplete(i,!n,t)}t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return r.endpoint}},customHeaders:r.customHeaders,log:r.log,onComplete:n,cors:r.cors}));qq.extend(this,{queryServer:function(){var e=qq.extend({},r.params);r.log("Session query request.");t.initTransport("sessionRefresh").withParams(e).withCacheBuster().send()}})};qq.FormSupport=function(e,t,r){var n=this,i=e.interceptSubmit,o=e.element,a=e.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:a,attachedToForm:false,getFormInputsAsObject:function(){if(o==null){return null}return n._form2Obj(o)}});function s(e){if(e.getAttribute("action")){n.newEndpoint=e.getAttribute("action")}}function l(e,t){if(e.checkValidity&&!e.checkValidity()){r("Form did not pass validation checks - will not upload.","error");t()}else{return true}}function c(e){var r=e.submit;qq(e).attach("submit",(function(n){n=n||window.event;if(n.preventDefault){n.preventDefault()}else{n.returnValue=false}l(e,r)&&t()}));e.submit=function(){l(e,r)&&t()}}function u(e){if(e){if(qq.isString(e)){e=document.getElementById(e)}if(e){r("Attaching to form element.");s(e);i&&c(e)}}return e}o=u(o);this.attachedToForm=!!o};qq.extend(qq.FormSupport.prototype,{_form2Obj:function(e){var t={},r=function(e){var t=["button","image","reset","submit"];return qq.indexOf(t,e.toLowerCase())<0},n=function(e){return qq.indexOf(["checkbox","radio"],e.toLowerCase())>=0},i=function(e){if(n(e.type)&&!e.checked){return true}return e.disabled&&e.type.toLowerCase()!=="hidden"},o=function(e){var t=null;qq.each(qq(e).children(),(function(e,r){if(r.tagName.toLowerCase()==="option"&&r.selected){t=r.value;return false}}));return t};qq.each(e.elements,(function(e,n){if((qq.isInput(n,true)||n.tagName.toLowerCase()==="textarea")&&r(n.type)&&!i(n)){t[n.name]=n.value}else if(n.tagName.toLowerCase()==="select"&&!i(n)){var a=o(n);if(a!==null){t[n.name]=a}}}));return t}});qq.Scaler=function(e,t){var r=this,n=e.sendOriginal,i=e.orient,o=e.defaultType,a=e.defaultQuality/100,s=e.failureText,l=e.includeExif,c=this._getSortedSizes(e.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&c.length>0,getFileRecords:function(e,r,u){var p=this,d=[],h=u.blob?u.blob:u,m=new qq.Identify(h,t);if(m.isPreviewableSync()){qq.each(c,(function(e,n){var c=p._determineOutputType({defaultType:o,requestedType:n.type,refType:h.type});d.push({uuid:qq.getUniqueId(),name:p._getName(r,{name:n.name,type:c,refType:h.type}),blob:new qq.BlobProxy(h,qq.bind(p._generateScaledImage,p,{maxSize:n.maxSize,orient:i,type:c,quality:a,failedText:s,includeExif:l,log:t}))})}));n&&d.push({uuid:e,name:r,blob:h})}else{d.push({uuid:e,name:r,blob:h})}return d},handleNewFile:function(e,t,r,n,i,o,a,s){var l=this,c=e.qqButtonId||e.blob&&e.blob.qqButtonId,u=[],p=null,d=s.addFileToHandler,h=s.uploadData,m=s.paramsStore,f=qq.getUniqueId();qq.each(l.getFileRecords(r,t,e),(function(t,r){var a=e,s=n,l;if(r.blob instanceof qq.BlobProxy){a=r.blob;s=-1}l=h.addFile({uuid:r.uuid,name:r.name,size:s,batchId:o,proxyGroupId:f});if(r.blob instanceof qq.BlobProxy){u.push(l)}else{p=l}d(l,a);i.push({id:l,file:a})}));if(p!==null){qq.each(u,(function(e,t){var r={qqparentuuid:h.retrieve({id:p}).uuid,qqparentsize:h.retrieve({id:p}).size};r[a]=h.retrieve({id:t}).uuid;h.setParentId(t,p);m.addReadOnly(t,r)}));if(u.length){(function(){var e={};e[a]=h.retrieve({id:p}).uuid;m.addReadOnly(p,e)})()}}}})};qq.extend(qq.Scaler.prototype,{scaleImage:function(e,t,r){if(!qq.supportedFeatures.scaling){throw new qq.Error("Scaling is not supported in this browser!")}var n=new qq.Promise,i=r.log,o=r.getFile(e),a=r.uploadData.retrieve({id:e}),s=a&&a.name,l=a&&a.uuid,c={sendOriginal:false,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},u=new qq.Scaler(c,i);if(!qq.Scaler||!qq.supportedFeatures.imagePreviews||!o){n.failure();i("Could not generate requested scaled image for "+e+".  "+"Scaling is either not possible in this browser, or the file could not be located.","error")}else{qq.bind((function(){var t=u.getFileRecords(l,s,o)[0];if(t&&t.blob instanceof qq.BlobProxy){t.blob.create().then(n.success,n.failure)}else{i(e+" is not a scalable image!","error");n.failure()}}),this)()}return n},_determineOutputType:function(e){var t=e.requestedType,r=e.defaultType,n=e.refType;if(!r&&!t){if(n!=="image/jpeg"){return"image/png"}return n}if(!t){return r}if(qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0){if(t==="image/tiff"){return qq.supportedFeatures.tiffPreviews?t:r}return t}return r},_getName:function(e,t){var r=e.lastIndexOf("."),n=t.type||"image/png",i=t.refType,o="",a=qq.getExtension(e),s="";if(t.name&&t.name.trim().length){s=" ("+t.name+")"}if(r>=0){o=e.substr(0,r);if(i!==n){a=n.split("/")[1]}o+=s+"."+a}else{o=e+s}return o},_getSortedSizes:function(e){e=qq.extend([],e);return e.sort((function(e,t){if(e.maxSize>t.maxSize){return 1}if(e.maxSize<t.maxSize){return-1}return 0}))},_generateScaledImage:function(e,t){var r=this,n=e.log,i=e.maxSize,o=e.orient,a=e.type,s=e.quality,l=e.failedText,c=e.includeExif&&t.type==="image/jpeg"&&a==="image/jpeg",u=new qq.Promise,p=new qq.ImageGenerator(n),d=document.createElement("canvas");n("Attempting to generate scaled version for "+t.name);p.generate(t,d,{maxSize:i,orient:o}).then((function(){var e=d.toDataURL(a,s),i=function(){n("Success generating scaled version for "+t.name);var r=qq.dataUriToBlob(e);u.success(r)};if(c){r._insertExifHeader(t,e,n).then((function(t){e=t;i()}),(function(){n("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error");i()}))}else{i()}}),(function(){n("Failed attempt to generate scaled version for "+t.name,"error");u.failure(l)}));return u},_insertExifHeader:function(e,t,r){var n=new FileReader,i=new qq.Promise,o="";n.onload=function(){o=n.result;i.success(ExifRestorer.restore(o,t))};n.onerror=function(){r("Problem reading "+e.name+" during attempt to transfer EXIF data to scaled version.","error");i.failure()};n.readAsDataURL(e);return i},_dataUriToBlob:function(e){var t,r,n,i;if(e.split(",")[0].indexOf("base64")>=0){t=atob(e.split(",")[1])}else{t=decodeURI(e.split(",")[1])}r=e.split(",")[0].split(":")[1].split(";")[0];n=new ArrayBuffer(t.length);i=new Uint8Array(n);qq.each(t,(function(e,t){i[e]=t.charCodeAt(0)}));return this._createBlob(n,r)},_createBlob:function(e,t){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=r&&new r;if(n){n.append(e);return n.getBlob(t)}else{return new Blob([e],{type:t})}}});var ExifRestorer=function(){var e={};e.KEY_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";e.encode64=function(e){var t="",r,n,i="",o,a,s,l="",c=0;do{r=e[c++];n=e[c++];i=e[c++];o=r>>2;a=(r&3)<<4|n>>4;s=(n&15)<<2|i>>6;l=i&63;if(isNaN(n)){s=l=64}else if(isNaN(i)){l=64}t=t+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(l);r=n=i="";o=a=s=l=""}while(c<e.length);return t};e.restore=function(e,t){var r="data:image/jpeg;base64,";if(!e.match(r)){return t}var n=this.decode64(e.replace(r,""));var i=this.slice2Segments(n);var o=this.exifManipulation(t,i);return r+this.encode64(o)};e.exifManipulation=function(e,t){var r=this.getExifArray(t),n=this.insertExif(e,r),i=new Uint8Array(n);return i};e.getExifArray=function(e){var t;for(var r=0;r<e.length;r++){t=e[r];if(t[0]==255&t[1]==225){return t}}return[]};e.insertExif=function(e,t){var r=e.replace("data:image/jpeg;base64,",""),n=this.decode64(r),i=n.indexOf(255,3),o=n.slice(0,i),a=n.slice(i),s=o;s=s.concat(t);s=s.concat(a);return s};e.slice2Segments=function(e){var t=0,r=[];while(1){if(e[t]==255&e[t+1]==218){break}if(e[t]==255&e[t+1]==216){t+=2}else{var n=e[t+2]*256+e[t+3],i=t+n+2,o=e.slice(t,i);r.push(o);t=i}if(t>e.length){break}}return r};e.decode64=function(e){var t="",r,n,i="",o,a,s,l="",c=0,u=[];var p=/[^A-Za-z0-9\+\/\=]/g;if(p.exec(e)){throw new Error("There were invalid base64 characters in the input text.  "+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='")}e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=this.KEY_STR.indexOf(e.charAt(c++));a=this.KEY_STR.indexOf(e.charAt(c++));s=this.KEY_STR.indexOf(e.charAt(c++));l=this.KEY_STR.indexOf(e.charAt(c++));r=o<<2|a>>4;n=(a&15)<<4|s>>2;i=(s&3)<<6|l;u.push(r);if(s!=64){u.push(n)}if(l!=64){u.push(i)}r=n=i="";o=a=s=l=""}while(c<e.length);return u};return e}();qq.TotalProgress=function(e,t){var r={},n=0,i=0,o=-1,a=-1,s=function(t,r){if(t!==o||r!==a){e(t,r)}o=t;a=r},l=function(e,t){var r=true;qq.each(e,(function(e,n){if(qq.indexOf(t,n)>=0){r=false;return false}}));return r},c=function(e){d(e,-1,-1);delete r[e]},u=function(e,t,r){if(t.length===0||l(t,r)){s(i,i);this.reset()}},p=function(e){var n=t(e);if(n>0){d(e,0,n);r[e]={loaded:0,total:n}}},d=function(e,t,o){var a=r[e]?r[e].loaded:0,l=r[e]?r[e].total:0;if(t===-1&&o===-1){n-=a;i-=l}else{if(t){n+=t-a}if(o){i+=o-l}}s(n,i)};qq.extend(this,{onAllComplete:u,onStatusChange:function(e,t,r){if(r===qq.status.CANCELED||r===qq.status.REJECTED){c(e)}else if(r===qq.status.SUBMITTING){p(e)}},onIndividualProgress:function(e,t,n){d(e,t,n);r[e]={loaded:t,total:n}},onNewSize:function(e){p(e)},reset:function(){r={};n=0;i=0}})};qq.UiEventHandler=function(e,t){var r=new qq.DisposeSupport,n={eventType:"click",attachTo:null,onHandled:function(e,t){}};qq.extend(this,{addHandler:function(e){i(e)},dispose:function(){r.dispose()}});function i(e){r.attach(e,n.eventType,(function(e){e=e||window.event;var t=e.target||e.srcElement;n.onHandled(t,e)}))}qq.extend(t,{getFileIdFromItem:function(e){return e.qqFileId},getDisposeSupport:function(){return r}});qq.extend(n,e);if(n.attachTo){i(n.attachTo)}};qq.FileButtonsClickHandler=function(e){var t={},r={templating:null,log:function(e,t){},onDeleteFile:function(e){},onCancel:function(e){},onRetry:function(e){},onPause:function(e){},onContinue:function(e){},onGetName:function(e){}},n={cancel:function(e){r.onCancel(e)},retry:function(e){r.onRetry(e)},deleteButton:function(e){r.onDeleteFile(e)},pause:function(e){r.onPause(e)},continueButton:function(e){r.onContinue(e)}};function i(e,t){qq.each(n,(function(n,i){var o=n.charAt(0).toUpperCase()+n.slice(1),a;if(r.templating["is"+o](e)){a=r.templating.getFileId(e);qq.preventDefault(t);r.log(qq.format("Detected valid file button click event on file '{}', ID: {}.",r.onGetName(a),a));i(a);return false}}))}qq.extend(r,e);r.eventType="click";r.onHandled=i;r.attachTo=r.templating.getFileList();qq.extend(this,new qq.UiEventHandler(r,t))};qq.FilenameClickHandler=function(e){var t={},r={templating:null,log:function(e,t){},classes:{file:"qq-upload-file",editNameIcon:"qq-edit-filename-icon"},onGetUploadStatus:function(e){},onGetName:function(e){}};qq.extend(r,e);function n(e,n){if(r.templating.isFileName(e)||r.templating.isEditIcon(e)){var i=r.templating.getFileId(e),o=r.onGetUploadStatus(i);if(o===qq.status.SUBMITTED){r.log(qq.format("Detected valid filename click event on file '{}', ID: {}.",r.onGetName(i),i));qq.preventDefault(n);t.handleFilenameEdit(i,e,true)}}}r.eventType="click";r.onHandled=n;qq.extend(this,new qq.FilenameEditHandler(r,t))};qq.FilenameInputFocusInHandler=function(e,t){var r={templating:null,onGetUploadStatus:function(e){},log:function(e,t){}};if(!t){t={}}function n(e,n){if(r.templating.isEditInput(e)){var i=r.templating.getFileId(e),o=r.onGetUploadStatus(i);if(o===qq.status.SUBMITTED){r.log(qq.format("Detected valid filename input focus event on file '{}', ID: {}.",r.onGetName(i),i));t.handleFilenameEdit(i,e)}}}r.eventType="focusin";r.onHandled=n;qq.extend(r,e);qq.extend(this,new qq.FilenameEditHandler(r,t))};qq.FilenameInputFocusHandler=function(e){e.eventType="focus";e.attachTo=null;qq.extend(this,new qq.FilenameInputFocusInHandler(e,{}))};qq.FilenameEditHandler=function(e,t){var r={templating:null,log:function(e,t){},onGetUploadStatus:function(e){},onGetName:function(e){},onSetName:function(e,t){},onEditingStatusChange:function(e,t){}};function n(e){var t=r.onGetName(e),n=t.lastIndexOf(".");if(n>0){t=t.substr(0,n)}return t}function i(e){var t=r.onGetName(e);return qq.getExtension(t)}function o(e,t){var n=e.value,o;if(n!==undefined&&qq.trimStr(n).length>0){o=i(t);if(o!==undefined){n=n+"."+o}r.onSetName(t,n)}r.onEditingStatusChange(t,false)}function a(e,r){t.getDisposeSupport().attach(e,"blur",(function(){o(e,r)}))}function s(e,r){t.getDisposeSupport().attach(e,"keyup",(function(t){var n=t.keyCode||t.which;if(n===13){o(e,r)}}))}qq.extend(r,e);r.attachTo=r.templating.getFileList();qq.extend(this,new qq.UiEventHandler(r,t));qq.extend(t,{handleFilenameEdit:function(e,t,i){var o=r.templating.getEditInput(e);r.onEditingStatusChange(e,true);o.value=n(e);if(i){o.focus()}a(o,e);s(o,e)}})};var CryptoJS=CryptoJS||function(e,t){var r={};var n=r.lib={};var i=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;if(t){r.mixIn(t)}if(!r.hasOwnProperty("init")){r.init=function(){r.$super.init.apply(this,arguments)}}r.init.prototype=r;r.$super=this;return r},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e){if(e.hasOwnProperty(t)){this[t]=e[t]}}if(e.hasOwnProperty("toString")){this.toString=e.toString}},clone:function(){return this.init.prototype.extend(this)}}}();var o=n.WordArray=i.extend({init:function(e,r){e=this.words=e||[];if(r!=t){this.sigBytes=r}else{this.sigBytes=e.length*4}},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words;var r=e.words;var n=this.sigBytes;var i=e.sigBytes;this.clamp();if(n%4){for(var o=0;o<i;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}}else if(r.length>65535){for(var o=0;o<i;o+=4){t[n+o>>>2]=r[o>>>2]}}else{t.push.apply(t,r)}this.sigBytes+=i;return this},clamp:function(){var t=this.words;var r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8;t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){var r=[];for(var n=0;n<t;n+=4){r.push(e.random()*4294967296|0)}return new o.init(r,t)}});var a=r.enc={};var s=a.Hex={stringify:function(e){var t=e.words;var r=e.sigBytes;var n=[];for(var i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16));n.push((o&15).toString(16))}return n.join("")},parse:function(e){var t=e.length;var r=[];for(var n=0;n<t;n+=2){r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4}return new o.init(r,t/2)}};var l=a.Latin1={stringify:function(e){var t=e.words;var r=e.sigBytes;var n=[];for(var i=0;i<r;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){var t=e.length;var r=[];for(var n=0;n<t;n++){r[n>>>2]|=(e.charCodeAt(n)&255)<<24-n%4*8}return new o.init(r,t)}};var c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}};var u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init;this._nDataBytes=0},_append:function(e){if(typeof e=="string"){e=c.parse(e)}this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data;var n=r.words;var i=r.sigBytes;var a=this.blockSize;var s=a*4;var l=i/s;if(t){l=e.ceil(l)}else{l=e.max((l|0)-this._minBufferSize,0)}var c=l*a;var u=e.min(c*4,i);if(c){for(var p=0;p<c;p+=a){this._doProcessBlock(n,p)}var d=n.splice(0,c);r.sigBytes-=u}return new o.init(d,u)},clone:function(){var e=i.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0});var p=n.Hasher=u.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){u.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){if(e){this._append(e)}var t=this._doFinalize();return t},blockSize:512/32,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new d.HMAC.init(e,r).finalize(t)}}});var d=r.algo={};return r}(Math);(function(){var e=CryptoJS;var t=e.lib;var r=t.WordArray;var n=e.enc;var i=n.Base64={stringify:function(e){var t=e.words;var r=e.sigBytes;var n=this._map;e.clamp();var i=[];for(var o=0;o<r;o+=3){var a=t[o>>>2]>>>24-o%4*8&255;var s=t[o+1>>>2]>>>24-(o+1)%4*8&255;var l=t[o+2>>>2]>>>24-(o+2)%4*8&255;var c=a<<16|s<<8|l;for(var u=0;u<4&&o+u*.75<r;u++){i.push(n.charAt(c>>>6*(3-u)&63))}}var p=n.charAt(64);if(p){while(i.length%4){i.push(p)}}return i.join("")},parse:function(e){var t=e.length;var n=this._map;var i=n.charAt(64);if(i){var o=e.indexOf(i);if(o!=-1){t=o}}var a=[];var s=0;for(var l=0;l<t;l++){if(l%4){var c=n.indexOf(e.charAt(l-1))<<l%4*2;var u=n.indexOf(e.charAt(l))>>>6-l%4*2;a[s>>>2]|=(c|u)<<24-s%4*8;s++}}return r.create(a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var e=CryptoJS;var t=e.lib;var r=t.Base;var n=e.enc;var i=n.Utf8;var o=e.algo;var a=o.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init;if(typeof t=="string"){t=i.parse(t)}var r=e.blockSize;var n=r*4;if(t.sigBytes>n){t=e.finalize(t)}t.clamp();var o=this._oKey=t.clone();var a=this._iKey=t.clone();var s=o.words;var l=a.words;for(var c=0;c<r;c++){s[c]^=1549556828;l[c]^=909522486}o.sigBytes=a.sigBytes=n;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var t=this._hasher;var r=t.finalize(e);t.reset();var n=t.finalize(this._oKey.clone().concat(r));return n}})})();(function(){var e=CryptoJS;var t=e.lib;var r=t.WordArray;var n=t.Hasher;var i=e.algo;var o=[];var a=i.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){var r=this._hash.words;var n=r[0];var i=r[1];var a=r[2];var s=r[3];var l=r[4];for(var c=0;c<80;c++){if(c<16){o[c]=e[t+c]|0}else{var u=o[c-3]^o[c-8]^o[c-14]^o[c-16];o[c]=u<<1|u>>>31}var p=(n<<5|n>>>27)+l+o[c];if(c<20){p+=(i&a|~i&s)+1518500249}else if(c<40){p+=(i^a^s)+1859775393}else if(c<60){p+=(i&a|i&s|a&s)-1894007588}else{p+=(i^a^s)-899497514}l=s;s=a;a=i<<30|i>>>2;i=n;n=p}r[0]=r[0]+n|0;r[1]=r[1]+i|0;r[2]=r[2]+a|0;r[3]=r[3]+s|0;r[4]=r[4]+l|0},_doFinalize:function(){var e=this._data;var t=e.words;var r=this._nDataBytes*8;var n=e.sigBytes*8;t[n>>>5]|=128<<24-n%32;t[(n+64>>>9<<4)+14]=Math.floor(r/4294967296);t[(n+64>>>9<<4)+15]=r;e.sigBytes=t.length*4;this._process();return this._hash},clone:function(){var e=n.clone.call(this);e._hash=this._hash.clone();return e}});e.SHA1=n._createHelper(a);e.HmacSHA1=n._createHmacHelper(a)})();module.exports=qq},"./src/udemy/js/asset/asset.less":function(e,t,r){e.exports={"unsupported-asset":"asset--unsupported-asset--2qVda","bulleted-list":"asset--bulleted-list--1w-6o","unsupported-asset-description":"asset--unsupported-asset-description--3gsyd"}},"./src/udemy/js/asset/asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./src/udemy/js/utils/mobx.js");var o,a,s,l,c,u,p,d;let h=(o=(d=class e extends i["a"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"id",a,this);babelHelpers.initializerDefineProperty(this,"title",s,this);babelHelpers.initializerDefineProperty(this,"status",l,this);babelHelpers.initializerDefineProperty(this,"delayedAssetMessage",c,this);babelHelpers.initializerDefineProperty(this,"processingErrors",u,this);babelHelpers.initializerDefineProperty(this,"fileName",p,this)}get apiDataMap(){return{id:"id",type:"asset_type",fileName:"filename",externalUrl:"external_url",timeEstimation:"time_estimation",mediaLicenseToken:"media_license_token",courseIsDrmed:"course_is_drmed",downloadUrls:"download_urls",title:"title",status:"status",delayedAssetMessage:"delayed_asset_message",processingErrors:"processing_errors",isExternal:"is_external"}}get isCourseDrmed(){return!!this.courseIsDrmed}get isEncrypted(){return!!this.mediaLicenseToken}get downloadUrl(){const e=this.downloadUrls&&this.downloadUrls[this.type];if(e&&e.length>0){return e[0].file}}},d.requestFields=["status","delayed_asset_message","processing_errors"],d.extraParams={},d),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"id",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"title",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),l=babelHelpers.applyDecoratedDescriptor(o.prototype,"status",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),c=babelHelpers.applyDecoratedDescriptor(o.prototype,"delayedAssetMessage",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),u=babelHelpers.applyDecoratedDescriptor(o.prototype,"processingErrors",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),p=babelHelpers.applyDecoratedDescriptor(o.prototype,"fileName",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),o)},"./src/udemy/js/asset/asset.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./src/udemy/js/utils/ud-api.js");var o=r("./src/udemy/js/asset/asset.mobx-model.js");var a,s,l;let c=(a=n["t"].ref,s=class e{constructor(e,t,r,n,i){babelHelpers.initializerDefineProperty(this,"asset",l,this);this.assetId=e;this.courseId=r;this.lectureId=n;this.practiceId=i;if(!t){t=o["a"]}this.modelClass=t}fetchData(e,t){if(e||t){this.asset=e||new this.modelClass(t);return}const r=this.modelClass.requestFields;this.modelClass.extraParams.course_id=this.courseId;this.modelClass.extraParams.lecture_id=this.lectureId;this.modelClass.extraParams.practice_id=this.practiceId;return i["f"].get(`/assets/${this.assetId}/`,{params:Object.assign({"fields[asset]":`@min,${r.join(",")}`},this.modelClass.extraParams)}).then(Object(n["e"])((e=>{this.asset=new this.modelClass(e.data)})))}},l=babelHelpers.applyDecoratedDescriptor(s.prototype,"asset",[a],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"fetchData",[n["e"]],Object.getOwnPropertyDescriptor(s.prototype,"fetchData"),s.prototype),s)},"./src/udemy/js/asset/asset.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/mobx-react/dist/mobx-react.module.js");var i=r("./node_modules/prop-types/index.js");var o=r.n(i);var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./src/udemy/js/asset/asset.mobx-store.js");var c=r("./src/udemy/js/asset/constants.js");var u=r("./src/udemy/js/asset/delayed-state.react-component.js");var p=r("./src/udemy/js/asset/failed-state.react-component.js");var d=r("./src/udemy/js/asset/unprocessed-state.react-component.js");function h(e,t,r){var i;return Object(n["f"])((i=class extends s.a.Component{constructor(e){super(e);this.store=new l["a"](e.id,r,e.courseId,e.lectureId,e.practiceId)}componentDidMount(){this.store.fetchData(this.props.asset,this.props.assetData)}render(){if(!this.store.asset){return null}let e;switch(this.store.asset.status){case c["b"].SUCCESS:e=s.a.createElement(t,this.props);break;case c["b"].UNPROCESSED:e=s.a.createElement(d["a"],null);break;case c["b"].FAILED:e=s.a.createElement(p["a"],null);break;case c["b"].DELAYED:e=s.a.createElement(u["a"],null);break}if(!e){return null}return s.a.createElement(n["c"],{store:this.store},e)}},i.displayName=e,i.propTypes={id:o.a.number.isRequired,asset:o.a.object,assetData:o.a.object,courseId:o.a.number,lectureId:o.a.number,practiceId:o.a.number},i.defaultProps={asset:null,assetData:null,courseId:null,lectureId:null,practiceId:null},i))}},"./src/udemy/js/asset/constants.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return n}));r.d(t,"b",(function(){return i}));r.d(t,"d",(function(){return o}));r.d(t,"a",(function(){return a}));const n=Object.freeze({ARTICLE:"Article",AUDIO:"Audio",EBOOK:"E-Book",EXTERNAL_LINK:"ExternalLink",FILE:"File",IFRAME:"IFrame",IMPORT_CONTENT:"ImportContent",PRESENTATION:"Presentation",SOURCE_CODE:"SourceCode",UPCOMING:"Upcoming",VIDEO:"Video",VIDEO_MASHUP:"VideoMashup"});const i=Object.freeze({SUCCESS:1,UNPROCESSED:0,FAILED:-1,DELAYED:-2});const o=4*60*60*1e3;const a=5*60*1e3},"./src/udemy/js/asset/delayed-state.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/mobx-react/dist/mobx-react.module.js");var i=r("./node_modules/react/index.js");var o=r.n(i);var a=r("./src/udemy/js/asset/asset.less");var s=r.n(a);t["a"]=Object(n["e"])("store")((e=>{let{store:t}=e;const r=t.asset?t.asset.delayedAssetMessage:"";return o.a.createElement("div",{className:"udlite-in-udheavy unsupported-asset asset--unsupported-asset--2qVda"},o.a.createElement("div",{className:"unsupported-asset-content"},o.a.createElement("p",null,r)))}))},"./src/udemy/js/asset/failed-state.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/mobx-react/dist/mobx-react.module.js");var i=r("./node_modules/react/index.js");var o=r.n(i);var a=r("./src/udemy/js/asset/asset.less");var s=r.n(a);t["a"]=Object(n["e"])("store")((e=>{let{store:t}=e;return o.a.createElement("div",{className:"udlite-in-udheavy unsupported-asset asset--unsupported-asset--2qVda"},o.a.createElement("div",{className:"unsupported-asset-content"},o.a.createElement("p",null,gettext("Your video failed to process for the following reasons:")),o.a.createElement("ul",{className:"asset--bulleted-list--1w-6o"},(t.asset.processingErrors||[]).map(((e,t)=>o.a.createElement("li",{key:t},o.a.createElement("span",null,e.message),e.help_link&&" ",e.help_link&&o.a.createElement("a",{href:e.help_link,className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer"},gettext("Get Help"))))))))}))},"./src/udemy/js/asset/presentation/presentation-asset.less":function(e,t,r){e.exports={relative:"presentation-asset--relative--3utX1",absolute:"presentation-asset--absolute--1CINh","flex-align-center":"presentation-asset--flex-align-center--2d-TA",container:"presentation-asset--container--1MxeC","progress-bar":"presentation-asset--progress-bar--3cyrN","inner-bar":"presentation-asset--inner-bar--3Khvf","inner-bar-full":"presentation-asset--inner-bar-full--3_xMv","inner-bar-progress":"presentation-asset--inner-bar-progress--1KcGo","progress-unit":"presentation-asset--progress-unit--2vI0q",controls:"presentation-asset--controls--1rkMW","controls-left":"presentation-asset--controls-left--2Tncc","controls-right":"presentation-asset--controls-right--SMalg","slide-counter-display":"presentation-asset--slide-counter-display--1wH7f",slide:"presentation-asset--slide--X97Pn","slide-center":"presentation-asset--slide-center--VvSIP","slide-right":"presentation-asset--slide-right--2ukpt","slide-left":"presentation-asset--slide-left--2IxlY"}},"./src/udemy/js/asset/presentation/presentation-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./src/udemy/js/asset/asset.mobx-model.js");var o,a,s;let l=(o=(s=class e extends i["a"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"slideUrls",a,this)}get apiDataMap(){return{...super.apiDataMap,slideUrls:"slide_urls"}}},s.requestFields=i["a"].requestFields.concat(["slide_urls"]),s),a=babelHelpers.applyDecoratedDescriptor(o.prototype,"slideUrls",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),o)},"./src/udemy/js/asset/presentation/presentation-asset.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var a=r("./node_modules/@udemy/icons/dist/collapse-diagonal.ud-icon");var s=r.n(a);var l=r("./node_modules/@udemy/icons/dist/expand-diagonal.ud-icon");var c=r.n(l);var u=r("./node_modules/@udemy/icons/dist/next.ud-icon");var p=r.n(u);var d=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var h=r.n(d);var m=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var f=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var g=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var y=r("./node_modules/autobind-decorator/lib/esm/index.js");var b=r("./node_modules/classnames/index.js");var v=r.n(b);var w=r("./node_modules/mobx-react/dist/mobx-react.module.js");var E=r("./node_modules/prop-types/index.js");var S=r.n(E);var _=r("./node_modules/react/index.js");var x=r.n(_);var D=r("./src/udemy/js/utils/noop.js");var C=r("./src/udemy/js/asset/asset.react-component.js");var T=r("./src/udemy/js/asset/presentation/presentation-asset.mobx-model.js");var O=r("./node_modules/mobx/lib/mobx.module.js");var k=r("./src/udemy/js/utils/fullscreen.tsx");var P,A,I,j;let R=(P=class e{constructor(e,t,r,n){babelHelpers.initializerDefineProperty(this,"currentSlideNum",A,this);babelHelpers.initializerDefineProperty(this,"isTransitioning",I,this);babelHelpers.initializerDefineProperty(this,"isFullscreen",j,this);this.slideUrls=e;this.onSlideChangeFn=t;this.onStartFn=r;this.onCompleteFn=n}toggleFullscreen(e){if(this.isFullscreen&&k["b"].exitFullscreen()!==false){this.isFullscreen=false}else if(!this.isFullscreen&&k["b"].requestFullscreen(e)!==false){this.isFullscreen=true}}goToNext(){if(!this.isNextDisabled){this.skipTo(this.currentSlideNum+1)}}goToPrev(){if(!this.isPrevDisabled){this.skipTo(this.currentSlideNum-1)}}skipTo(e){if(e===this.currentSlideNum||this.isTransitioning){return}if(this.currentSlideNum===1){this.onStartFn()}this.isTransitioning=true;this.currentSlideNum=e;this.onSlideChange();this.isTransitioning=false}onSlideChange(){const e={position:this.currentSlideNum,total:this.numSlides};this.onSlideChangeFn(e);if(this.currentSlideNum===this.numSlides){this.onCompleteFn()}}get numSlides(){return this.slideUrls.length}get progressUnitWidth(){return 100/this.numSlides}get progressUnitWidths(){const e=Array(this.numSlides-1).fill(`${this.progressUnitWidth}%`);e.push(`${100-(this.numSlides-1)*this.progressUnitWidth}%`);return e}get currentProgressWidth(){let e=100;if(this.currentSlideNum<this.numSlides){e=this.progressUnitWidth*this.currentSlideNum}return`${e}%`}get isPrevDisabled(){return this.currentSlideNum===1||this.isTransitioning}get isNextDisabled(){return this.currentSlideNum>=this.numSlides||this.isTransitioning}},A=babelHelpers.applyDecoratedDescriptor(P.prototype,"currentSlideNum",[O["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 1}}),I=babelHelpers.applyDecoratedDescriptor(P.prototype,"isTransitioning",[O["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),j=babelHelpers.applyDecoratedDescriptor(P.prototype,"isFullscreen",[O["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(P.prototype,"toggleFullscreen",[y["a"],O["e"]],Object.getOwnPropertyDescriptor(P.prototype,"toggleFullscreen"),P.prototype),babelHelpers.applyDecoratedDescriptor(P.prototype,"goToNext",[y["a"]],Object.getOwnPropertyDescriptor(P.prototype,"goToNext"),P.prototype),babelHelpers.applyDecoratedDescriptor(P.prototype,"goToPrev",[y["a"]],Object.getOwnPropertyDescriptor(P.prototype,"goToPrev"),P.prototype),babelHelpers.applyDecoratedDescriptor(P.prototype,"skipTo",[O["e"]],Object.getOwnPropertyDescriptor(P.prototype,"skipTo"),P.prototype),babelHelpers.applyDecoratedDescriptor(P.prototype,"currentProgressWidth",[O["g"]],Object.getOwnPropertyDescriptor(P.prototype,"currentProgressWidth"),P.prototype),babelHelpers.applyDecoratedDescriptor(P.prototype,"isPrevDisabled",[O["g"]],Object.getOwnPropertyDescriptor(P.prototype,"isPrevDisabled"),P.prototype),babelHelpers.applyDecoratedDescriptor(P.prototype,"isNextDisabled",[O["g"]],Object.getOwnPropertyDescriptor(P.prototype,"isNextDisabled"),P.prototype),P);var N=r("./src/udemy/js/asset/presentation/presentation-asset.less");var L,M,q,U;const H={"./presentation-asset.less":{relative:"presentation-asset--relative--3utX1",absolute:"presentation-asset--absolute--1CINh","flex-align-center":"presentation-asset--flex-align-center--2d-TA",container:"presentation-asset--container--1MxeC","progress-bar":"presentation-asset--progress-bar--3cyrN","inner-bar":"presentation-asset--inner-bar--3Khvf","inner-bar-full":"presentation-asset--inner-bar-full--3_xMv","inner-bar-progress":"presentation-asset--inner-bar-progress--1KcGo","progress-unit":"presentation-asset--progress-unit--2vI0q",controls:"presentation-asset--controls--1rkMW","controls-left":"presentation-asset--controls-left--2Tncc","controls-right":"presentation-asset--controls-right--SMalg","slide-counter-display":"presentation-asset--slide-counter-display--1wH7f",slide:"presentation-asset--slide--X97Pn","slide-center":"presentation-asset--slide-center--VvSIP","slide-right":"presentation-asset--slide-right--2ukpt","slide-left":"presentation-asset--slide-left--2IxlY"}};const F=e=>{let{className:t,left:r,right:n,...i}=e;return x.a.createElement("div",Object.assign({className:(t?t+" ":"")+"presentation-asset--absolute--1CINh presentation-asset--flex-align-center--2d-TA presentation-asset--controls--1rkMW","data-purpose":"presentation-footer"},i),x.a.createElement("div",{className:"presentation-asset--flex-align-center--2d-TA presentation-asset--controls-left--2Tncc"},r),x.a.createElement("div",{className:"presentation-asset--flex-align-center--2d-TA presentation-asset--controls-right--SMalg"},n))};F.propTypes={left:S.a.node.isRequired,right:S.a.node.isRequired,className:S.a.string};F.defaultProps={className:null};let B=(L=Object(w["e"])("store"),L(M=Object(w["f"])(M=(q=(U=class e extends x.a.Component{constructor(e){super(e);this.ref=x.a.createRef();this.store=new R(e.store.asset.slideUrls,e.onSlideChange,e.onStart,e.onComplete)}componentDidMount(){this.store.onSlideChange();this.ref.current.focus()}onSkipToProgressUnit(e){const t=parseInt(e.currentTarget.dataset.index,10);this.store.skipTo(t+1)}get slideImages(){return this.props.store.asset.slideUrls.map(((e,t)=>{const r=v()("absolute slide slide-center",{"slide-left":t+1<this.store.currentSlideNum,"slide-right":t+1>this.store.currentSlideNum});return x.a.createElement("div",{key:t,"data-purpose":"slide-image-container",className:i()(r,H)},x.a.createElement(m["a"],{src:e,alt:gettext("Slide"),width:720,height:540}))}))}get slideLinks(){return this.store.progressUnitWidths.map(((e,t)=>x.a.createElement(f["a"],{key:t,udStyle:"link",className:"presentation-asset--progress-unit--2vI0q",style:{width:e},"data-index":t,onClick:this.onSkipToProgressUnit,"aria-label":interpolate(gettext("Slide %(slideNum)s"),{slideNum:t+1},true),"data-purpose":"slide-link"})))}get currentSlideText(){return interpolate(gettext("%(currentSlideNum)s of %(totalSlides)s Slides"),{currentSlideNum:this.store.currentSlideNum,totalSlides:this.store.numSlides},true)}get navigationControls(){return x.a.createElement(x.a.Fragment,null,x.a.createElement(g["a"],{size:"small",udStyle:"brand",round:true,onClick:this.store.goToPrev,disabled:this.store.isPrevDisabled,"data-purpose":"previous-slide"},x.a.createElement(h.a,{label:gettext("Previous"),size:"medium"})),x.a.createElement(g["a"],{size:"small",udStyle:"brand",round:true,onClick:this.store.goToNext,disabled:this.store.isNextDisabled,"data-purpose":"next-slide"},x.a.createElement(p.a,{label:gettext("Next"),size:"medium"})),x.a.createElement("span",{className:"presentation-asset--slide-counter-display--1wH7f","data-purpose":"slide-text"},this.currentSlideText))}get rightControls(){const e=this.store.isFullscreen?gettext("Exit fullscreen"):gettext("Fullscreen");const t=this.store.isFullscreen?s.a:c.a;return x.a.createElement(g["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:this.toggleFullscreen,"data-purpose":"fullscreen-toggle-button"},x.a.createElement(t,{label:e,size:"medium"}))}onKeyDown(e){if(e.keyCode===70){this.toggleFullscreen()}else if(e.keyCode===o["b"].LEFT){e.preventDefault();this.store.goToPrev()}else if(e.keyCode===o["b"].RIGHT){e.preventDefault();this.store.goToNext()}}toggleFullscreen(){this.store.toggleFullscreen(this.ref.current)}render(){return x.a.createElement("div",{className:"udlite-in-udheavy presentation-asset--relative--3utX1 presentation-asset--container--1MxeC",onKeyDown:this.onKeyDown,tabIndex:"0",ref:this.ref},x.a.createElement("div",{className:"presentation-asset--relative--3utX1"},this.slideImages),x.a.createElement("div",{className:"presentation-asset--absolute--1CINh presentation-asset--progress-bar--3cyrN"},x.a.createElement("div",{className:"presentation-asset--absolute--1CINh presentation-asset--inner-bar--3Khvf presentation-asset--inner-bar-full--3_xMv"}),x.a.createElement("div",{className:"presentation-asset--absolute--1CINh presentation-asset--inner-bar--3Khvf presentation-asset--inner-bar-progress--1KcGo",style:{width:this.store.currentProgressWidth}}),x.a.createElement("div",{className:"presentation-asset--absolute--1CINh"},this.slideLinks)),this.props.renderFooter(F,{left:this.navigationControls,right:this.rightControls}))}},U.propTypes={store:S.a.object.isRequired,onSlideChange:S.a.func,onStart:S.a.func,onComplete:S.a.func,renderFooter:S.a.func},U.defaultProps={onSlideChange:D["a"],onStart:D["a"],onComplete:D["a"],renderFooter:(e,t)=>x.a.createElement(e,t)},U),babelHelpers.applyDecoratedDescriptor(q.prototype,"onSkipToProgressUnit",[y["a"]],Object.getOwnPropertyDescriptor(q.prototype,"onSkipToProgressUnit"),q.prototype),babelHelpers.applyDecoratedDescriptor(q.prototype,"onKeyDown",[y["a"]],Object.getOwnPropertyDescriptor(q.prototype,"onKeyDown"),q.prototype),babelHelpers.applyDecoratedDescriptor(q.prototype,"toggleFullscreen",[y["a"]],Object.getOwnPropertyDescriptor(q.prototype,"toggleFullscreen"),q.prototype),q))||M)||M);var z=t["a"]=Object(C["a"])("PresentationAsset",B,T["a"])},"./src/udemy/js/asset/unprocessed-state.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/react/index.js");var i=r.n(n);var o=r("./src/udemy/js/asset/asset.less");var a=r.n(o);t["a"]=()=>i.a.createElement("div",{className:"udlite-in-udheavy unsupported-asset asset--unsupported-asset--2qVda"},i.a.createElement("div",{className:"unsupported-asset-content"},i.a.createElement("p",null,gettext("We've uploaded your file, and are processing it to ensure it works smoothly "+"on Udemy. As soon as it's ready, we'll send you an email."))))},"./src/udemy/js/asset/video/mashup/video-mashup-asset.less":function(e,t,r){e.exports={"video-wrapper":"video-mashup-asset--video-wrapper--1bR5t","presentation-default-size":"video-mashup-asset--presentation-default-size--2ZkNQ",content:"video-mashup-asset--content--1bnop",slide:"video-mashup-asset--slide--1SVd7","video-small-overlay":"video-mashup-asset--video-small-overlay--vpVEu","presentation-small-size":"video-mashup-asset--presentation-small-size--2bsUm",intervals:"video-mashup-asset--intervals--1W6ps",interval:"video-mashup-asset--interval--13YQu"}},"./src/udemy/js/asset/video/mashup/video-mashup-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("./src/udemy/js/asset/video/video-asset.mobx-model.js");class i extends n["a"]{get apiDataMap(){return{...super.apiDataMap,slides:"slides",length:"length"}}}i.requestFields=n["a"].requestFields.concat(["slides","length"]).filter((e=>e!=="thumbnail_sprite"))},"./src/udemy/js/asset/video/mashup/video-mashup-asset.react-component.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/classnames/index.js");var o=r.n(i);var a=r("./node_modules/mobx/lib/mobx.module.js");var s=r("./node_modules/mobx-react/dist/mobx-react.module.js");var l=r("./node_modules/prop-types/index.js");var c=r.n(l);var u=r("./node_modules/react/index.js");var p=r.n(u);var d=r("./src/udemy/js/video-player/progress-bar/progress-bar.mobx-store.js");var h=r("./src/udemy/js/asset/asset.react-component.js");var m=r("./src/udemy/js/asset/video/shaka-video-asset.react-component.tsx");var f=r("./src/udemy/js/asset/video/video-asset.react-component.js");const g=Object.freeze({PRESENTATION:"presentation",VIDEO:"video"});const y=130;var b=r("./src/udemy/js/asset/video/mashup/video-mashup-asset.less");var v=r.n(b);var w=r("./src/udemy/js/asset/video/mashup/video-mashup-asset.mobx-model.js");var E=r("./node_modules/react-dom/index.js");var S=r.n(E);var _,x;let D=(_=(x=class e extends p.a.Component{get elementPosition(){const{mouseXPosition:e,videoWidth:t,videoPositionLeft:r}=this.props;const n=e-r;const i=t-n;if(i>y){return{left:"10px"}}const o=y-i;return{right:`${o/2+10}px`}}onMouseEnter(e){return this.props.onMouseEnter(this.props.index,e)}render(){return p.a.createElement("div",{className:"video-mashup-asset--interval--13YQu",style:{width:this.props.width},role:"presentation","data-purpose":"mashup-thumbnail",onMouseEnter:this.onMouseEnter},this.props.isVisible&&p.a.createElement("div",{className:"video-mashup-thumbnail"},p.a.createElement("div",{"data-purpose":"mashup-thumbnail-image",style:{backgroundImage:`url("${this.props.slideUrl}")`,...this.elementPosition}})))}},x.propTypes={index:c.a.number.isRequired,width:c.a.string.isRequired,mouseXPosition:c.a.number,videoWidth:c.a.number.isRequired,videoPositionLeft:c.a.number,isVisible:c.a.bool.isRequired,onMouseEnter:c.a.func.isRequired,slideUrl:c.a.string.isRequired},x.defaultProps={mouseXPosition:0,videoPositionLeft:0},x),babelHelpers.applyDecoratedDescriptor(_.prototype,"onMouseEnter",[n["a"]],Object.getOwnPropertyDescriptor(_.prototype,"onMouseEnter"),_.prototype),_);var C,T,O,k,P;let A=(C=Object(s["e"])("progressBarStore"),C(T=Object(s["f"])(T=(O=(P=class e extends p.a.Component{constructor(){super(...arguments);this.mouseXPosition=0;babelHelpers.initializerDefineProperty(this,"visibleThumbnailIndex",k,this)}setVisibleThumbnailIndex(e){this.visibleThumbnailIndex=e}onMouseEnter(e,t){this.mouseXPosition=t.screenX;this.setVisibleThumbnailIndex(e)}onMouseLeave(){this.setVisibleThumbnailIndex(null)}get thumbnails(){const{slides:e}=this.props;let t=100;return e.map(((e,r)=>{let n;const{slides:i,duration:o}=this.props;if(r===i.length-1){n=t}else{n=Math.round((i[r+1].time-i[r].time)/o*100)}t-=n;return p.a.createElement(D,{key:r,index:r,width:`${n}%`,mouseXPosition:this.mouseXPosition,videoPositionLeft:this.props.videoPositionLeft,videoWidth:this.props.videoWidth,isVisible:this.visibleThumbnailIndex===r,onMouseEnter:this.onMouseEnter,slideUrl:e.url})}))}render(){if(!this.props.progressBarStore.ref){return null}return S.a.createPortal(p.a.createElement("div",{className:"video-mashup-asset--intervals--1W6ps","data-purpose":"mashup-thumbnails-intervals",onMouseLeave:this.onMouseLeave},this.thumbnails),this.props.progressBarStore.progressHolderRef)}},P.propTypes={slides:c.a.array.isRequired,duration:c.a.number.isRequired,videoWidth:c.a.number.isRequired,videoPositionLeft:c.a.number,progressBarStore:c.a.object.isRequired},P.defaultProps={videoPositionLeft:0},P),k=babelHelpers.applyDecoratedDescriptor(O.prototype,"visibleThumbnailIndex",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(O.prototype,"setVisibleThumbnailIndex",[a["e"]],Object.getOwnPropertyDescriptor(O.prototype,"setVisibleThumbnailIndex"),O.prototype),babelHelpers.applyDecoratedDescriptor(O.prototype,"onMouseEnter",[n["a"]],Object.getOwnPropertyDescriptor(O.prototype,"onMouseEnter"),O.prototype),babelHelpers.applyDecoratedDescriptor(O.prototype,"onMouseLeave",[n["a"]],Object.getOwnPropertyDescriptor(O.prototype,"onMouseLeave"),O.prototype),O))||T)||T);r.d(t,"VideoMashupAssetBase",(function(){return F}));var I,j,R,N,L,M,q,U,H;let F=(I=Object(s["e"])("store"),I(j=Object(s["f"])(j=(R=(H=class e extends p.a.Component{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"videoPositionLeft",N,this);babelHelpers.initializerDefineProperty(this,"currentTime",L,this);babelHelpers.initializerDefineProperty(this,"player",M,this);babelHelpers.initializerDefineProperty(this,"isPlaying",q,this);babelHelpers.initializerDefineProperty(this,"mode",U,this);this.ref=p.a.createRef();this.progressBarStore=e.playerOptions.progressBarStore||new d["a"]}componentDidMount(){this.setMode(g.PRESENTATION)}componentDidUpdate(){if(this.videoPositionLeft===undefined){this.setVideoPositionLeft()}}setVideoPositionLeft(){const e=this.ref.current&&"getBoundingClientRect"in this.ref.current;if(e){const{x:e=0}=this.ref.current.getBoundingClientRect();this.videoPositionLeft=e}}setMode(e){this.mode=e}onTimeUpdate(e){this.currentTime=e;if(typeof this.props.playerOptions.onTimeUpdate==="function"){this.props.playerOptions.onTimeUpdate(e)}}get currentSlideUrl(){const{slides:e}=this.props.store.asset;for(let t=e.length-1;t>=0;t--){if(this.currentTime>=e[t].time){return`url("${e[t].url}")`}}return""}setPlayer(e){this.player=e}renderVideoElement(e){return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{role:"presentation","data-purpose":`mashup-slide-${this.mode===g.PRESENTATION?"big":"small"}-content`,className:"video-mashup-asset--content--1bnop"},p.a.createElement("div",{className:"video-mashup-asset--slide--1SVd7",style:{backgroundImage:this.currentSlideUrl}})),e,this.mode===g.PRESENTATION&&p.a.createElement("div",{"data-purpose":"video-small-overlay",className:"video-mashup-asset--video-small-overlay--vpVEu"}))}onClick(e){const{target:t={nodeName:""}}=e;const r=t.classList.contains(v.a["video-small-overlay"]);const n=t.classList.contains(v.a.slide)||t.classList.contains("video-popover-area");const i=this.mode===g.PRESENTATION;const o=this.mode===g.VIDEO;if(i&&n){this.player[this.isPlaying?"pause":"play"]()}if(o&&n){this.setMode(g.PRESENTATION)}if(i&&r){this.setMode(g.VIDEO)}}onPlayPauseToggled(e){this.isPlaying=e;if(typeof this.props.playerOptions.onPlayPauseToggled==="function"){this.props.playerOptions.onPlayPauseToggled(e)}}onPlayerReady(e){this.player=e;if(typeof this.props.playerOptions.onPlayerReady==="function"){this.props.playerOptions.onPlayerReady(e)}}get wrapperClasses(){return o()(v.a["video-wrapper"],{[v.a["presentation-default-size"]]:this.mode===g.PRESENTATION,[v.a["presentation-small-size"]]:this.mode===g.VIDEO})}get shouldRenderThumbnails(){return!!this.player&&!!this.ref.current}render(){const{playerOptions:e,...t}=this.props;let r;if(this.props.isShakaPlayerEnabled){r=p.a.createElement(m["b"],Object.assign({playerOptions:{...e,onTimeUpdate:this.onTimeUpdate,onPlayPauseToggled:this.onPlayPauseToggled,onPlayerReady:this.onPlayerReady,renderVideoElement:this.renderVideoElement,playerId:this.props.store.asset.playerId}},t),this.props.children)}else{r=p.a.createElement(f["a"],Object.assign({playerOptions:{...e,onTimeUpdate:this.onTimeUpdate,onPlayPauseToggled:this.onPlayPauseToggled,onPlayerReady:this.onPlayerReady,renderVideoElement:this.renderVideoElement,playerId:this.props.store.asset.playerId}},t),this.props.children)}return p.a.createElement("div",{className:this.wrapperClasses,ref:this.ref,role:"presentation","data-purpose":"mashup-wrapper",onClick:this.onClick},r,this.shouldRenderThumbnails&&p.a.createElement(s["c"],{progressBarStore:this.progressBarStore},p.a.createElement(A,{slides:this.props.store.asset.slides,videoWidth:this.ref.current.offsetWidth,videoPositionLeft:this.videoPositionLeft,duration:this.props.store.asset.timeEstimation})))}},H.propTypes={store:c.a.object.isRequired,playerOptions:c.a.object,isShakaPlayerEnabled:c.a.bool},H.defaultProps={playerOptions:{},isShakaPlayerEnabled:false},H),N=babelHelpers.applyDecoratedDescriptor(R.prototype,"videoPositionLeft",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return undefined}}),L=babelHelpers.applyDecoratedDescriptor(R.prototype,"currentTime",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),M=babelHelpers.applyDecoratedDescriptor(R.prototype,"player",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),q=babelHelpers.applyDecoratedDescriptor(R.prototype,"isPlaying",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),U=babelHelpers.applyDecoratedDescriptor(R.prototype,"mode",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return g.VIDEO}}),babelHelpers.applyDecoratedDescriptor(R.prototype,"setVideoPositionLeft",[a["e"]],Object.getOwnPropertyDescriptor(R.prototype,"setVideoPositionLeft"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"setMode",[a["e"]],Object.getOwnPropertyDescriptor(R.prototype,"setMode"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"onTimeUpdate",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(R.prototype,"onTimeUpdate"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"setPlayer",[a["e"]],Object.getOwnPropertyDescriptor(R.prototype,"setPlayer"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"renderVideoElement",[n["a"]],Object.getOwnPropertyDescriptor(R.prototype,"renderVideoElement"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"onClick",[n["a"]],Object.getOwnPropertyDescriptor(R.prototype,"onClick"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"onPlayPauseToggled",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(R.prototype,"onPlayPauseToggled"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"onPlayerReady",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(R.prototype,"onPlayerReady"),R.prototype),R))||j)||j);var B=t["default"]=Object(h["a"])("VideoMashupAsset",F,w["a"])},"./src/udemy/js/asset/video/shaka-video-asset.react-component.tsx":function(e,t,r){"use strict";var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./node_modules/mobx-react/dist/mobx-react.module.js");var o=r("./node_modules/prop-types/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./src/udemy/js/base-components/error-boundary/error-boundary.react-component.tsx");var u=r("./src/udemy/js/utils/merge-objects.js");var p=r("./src/udemy/js/shaka-video-player/shaka-video-player.react-component.tsx");var d=r("./src/udemy/js/asset/asset.mobx-store.js");var h=r("./src/udemy/js/asset/constants.js");var m=r("./src/udemy/js/asset/delayed-state.react-component.js");var f=r("./src/udemy/js/asset/failed-state.react-component.js");var g=r("./src/udemy/js/asset/unprocessed-state.react-component.js");function y(e,t,r){var n;return Object(i["f"])((n=class e extends l.a.Component{constructor(e){super(e);this.store=new d["a"](e.id,r)}componentDidMount(){this.store.fetchData(this.props.asset,this.props.assetData)}render(){if(!this.store.asset){return null}let e;switch(this.store.asset.status){case h["b"].SUCCESS:e=l.a.createElement(t,this.props);break;case h["b"].UNPROCESSED:e=l.a.createElement(g["a"],null);break;case h["b"].FAILED:e=l.a.createElement(f["a"],null);break;case h["b"].DELAYED:e=l.a.createElement(m["a"],null);break}if(!e){return null}return l.a.createElement(i["c"],{store:this.store},e)}},n.displayName=e,n.propTypes={id:a.a.number.isRequired,asset:a.a.object,assetData:a.a.object},n.defaultProps={asset:null,assetData:null},n))}var b=r("./src/udemy/js/asset/video/video-asset-schema-markup.react-component.js");var v=r("./src/udemy/js/asset/video/video-asset.mobx-model.js");r.d(t,"b",(function(){return E}));r.d(t,"a",(function(){return S}));var w=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let E=class e extends l.a.Component{render(){let e=Object(u["a"])(this.props.playerOptions,this.props.store.asset.videoPlayerProps);e=Object(n["A"])(e);if(!e.muxMetadata){e.muxMetadata=this.props.muxMetadata}return l.a.createElement(l.a.Fragment,null,l.a.createElement(c["a"],null,this.props.addGoogleVideoSchema&&l.a.createElement(b["a"],{title:this.props.title,course:this.props.course,asset:this.props.store.asset})),l.a.createElement(p["a"],Object.assign({},e,{extraVideoAttributes:this.props.extraVideoAttributes}),this.props.children))}};E.propTypes={store:a.a.object.isRequired,id:a.a.number.isRequired,playerOptions:a.a.object,addGoogleVideoSchema:a.a.bool,course:a.a.object,title:a.a.string,muxMetadata:a.a.object,extraVideoAttributes:a.a.object};E.defaultProps={playerOptions:{},addGoogleVideoSchema:false,course:{},title:"",asset:{},muxMetadata:{},extraVideoAttributes:{}};E=w([Object(i["e"])("store"),i["f"]],E);const S=y("ShakaVideoAsset",E,v["a"])},"./src/udemy/js/asset/video/video-asset-schema-markup.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./node_modules/prop-types/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./node_modules/react-helmet/es/Helmet.js");var l=r("./src/udemy/js/utils/get-config-data.js");const c=Object(l["a"])();class u extends o["Component"]{constructor(e){super(e);this.schemaObject={"@type":"VideoObject","@context":"http://schema.org",publisher:{"@type":"Organization",name:"Udemy",sameAs:c.url.to_app,logo:{"@type":"ImageObject",url:`${c.url.to_app}${"/staticx/udemy/images/v7/apple-touch-icon-60x60.png"}`,height:60,width:60}},provider:{"@type":"Organization",name:e.course.visible_instructors[0].display_name,sameAs:`${c.url.to_app.slice(0,-1)}${e.course.visible_instructors[0].url}`},name:e.title,description:e.course.headline,isAccessibleForFree:true,image:e.asset.thumbnailUrl,inLanguage:e.course.locale.locale.slice(0,2),thumbnailUrl:e.asset.thumbnailUrl,uploadDate:e.asset.created}}render(){return a.a.createElement(s["a"],null,a.a.createElement("script",{type:"application/ld+json"},JSON.stringify(this.schemaObject)))}}u.propTypes={course:i.a.shape({headline:i.a.string.isRequired,visible_instructors:i.a.arrayOf(i.a.shape({display_name:i.a.string.isRequired,url:i.a.string.isRequired}).isRequired).isRequired,locale:i.a.shape({locale:i.a.string.isRequired})}).isRequired,title:i.a.string.isRequired,asset:i.a.shape({thumbnailUrl:i.a.string.isRequired,created:i.a.string.isRequired}).isRequired}},"./src/udemy/js/asset/video/video-asset.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/asset/asset.mobx-model.js");var a,s,l,c,u,p,d,h;let m=(a=i["t"].ref,s=i["t"].ref,l=i["t"].ref,c=(h=class e extends o["a"]{get apiDataMap(){return{...super.apiDataMap,thumbnailUrl:"thumbnail_url",thumbnailSprite:"thumbnail_sprite",mediaLicenseToken:"media_license_token",mediaSources:"media_sources",captions:{source:"captions",defaultValue:[]},created:"created"}}constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"mediaLicenseToken",u,this);babelHelpers.initializerDefineProperty(this,"mediaSources",p,this);babelHelpers.initializerDefineProperty(this,"thumbnailSprite",d,this);this.playerId=Object(n["a"])(`playerId__${this.id}`)}get videoPlayerProps(){return{playerId:this.playerId,assetId:this.id,mediaLicenseToken:this.mediaLicenseToken,mediaSources:(this.mediaSources||[]).slice(),duration:this.timeEstimation,captions:(this.captions||[]).slice(),thumbnailSprite:this.thumbnailSprite}}},h.requestFields=o["a"].requestFields.concat(["time_estimation","media_license_token","media_sources","thumbnail_url","captions","thumbnail_sprite","created"]),h.extraParams=Object.assign({},o["a"].extraParams,{"fields[caption]":"@default,is_translation"}),h),u=babelHelpers.applyDecoratedDescriptor(c.prototype,"mediaLicenseToken",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),p=babelHelpers.applyDecoratedDescriptor(c.prototype,"mediaSources",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),d=babelHelpers.applyDecoratedDescriptor(c.prototype,"thumbnailSprite",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),c)},"./src/udemy/js/asset/video/video-asset.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./node_modules/mobx-react/dist/mobx-react.module.js");var o=r("./node_modules/prop-types/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./src/udemy/js/base-components/error-boundary/error-boundary.react-component.tsx");var u=r("./src/udemy/js/utils/merge-objects.js");var p=r("./src/udemy/js/video-player/video-player.react-component.js");var d=r("./src/udemy/js/asset/asset.react-component.js");var h=r("./src/udemy/js/asset/video/video-asset-schema-markup.react-component.js");var m=r("./src/udemy/js/asset/video/video-asset.mobx-model.js");var f,g,y;let b=(f=Object(i["e"])("store"),f(g=Object(i["f"])(g=(y=class e extends l.a.Component{render(){let e=Object(u["a"])(this.props.playerOptions,this.props.store.asset.videoPlayerProps);e=Object(n["A"])(e);if(!e.muxMetadata){e.muxMetadata=this.props.muxMetadata}return l.a.createElement(l.a.Fragment,null,l.a.createElement(c["a"],null,this.props.addGoogleVideoSchema&&l.a.createElement(h["a"],{title:this.props.title,course:this.props.course,asset:this.props.store.asset})),l.a.createElement(p["default"],Object.assign({},e,{extraVideoAttributes:this.props.extraVideoAttributes}),this.props.children))}},y.propTypes={store:a.a.object.isRequired,id:a.a.number.isRequired,playerOptions:a.a.object,addGoogleVideoSchema:a.a.bool,course:a.a.object,title:a.a.string,muxMetadata:a.a.object,extraVideoAttributes:a.a.object},y.defaultProps={playerOptions:{},addGoogleVideoSchema:false,course:{},title:"",asset:{},muxMetadata:{},extraVideoAttributes:{}},y))||g)||g);t["b"]=Object(d["a"])("VideoAsset",b,m["a"])},"./src/udemy/js/auth/auth-ajax-modal.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/prop-types/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./src/udemy/js/base-components/dialog/ajax-modal.react-component.js");var u=r("./src/udemy/js/utils/noop.js");const p=e=>{if(e.includes("forgot-password")){return r.e("forgot-password-udlite-app").then(r.bind(null,"./src/udemy/js/forgot-password/udlite-app.js"))}return Promise.all([r.e("auth-server-side"),r.e("auth-udlite-app")]).then(r.bind(null,"./src/udemy/js/auth/udlite-app.js"))};function d(e){return l.a.createElement(c["a"],Object.assign({labelledById:"auth-to-udemy-title",preloader:p,shouldInterceptContent:true},e,{className:i()("ud-auth-modal",e.className)}))}d.propTypes={isOpen:a.a.bool.isRequired,onClose:a.a.func,url:a.a.string.isRequired,preloader:a.a.func,className:a.a.string};d.defaultProps={onClose:u["a"],preloader:null,className:""}},"./src/udemy/js/base-components/checked-state/checked-state-checkbox.react-component.tsx":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state-checkbox.react-component.js");var i=r("./node_modules/react/index.js");var o=r.n(i);var a=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state.react-component.js");var s=r("./node_modules/mobx/lib/mobx.module.js");var l=r("./node_modules/prop-types/index.js");var c=r.n(l);var u=r("./src/udemy/js/utils/isomorphic-rendering.js");var p,d;let h=Object(u["a"])(p=(d=class e extends o.a.Component{constructor(e){super(e);this.forcedProps={};if(e.isIsomorphicallyRendered&&!e.getIsRootComponentMounted()){const t=typeof document!=="undefined"&&document.getElementById(e.id);if(t&&t.dataset.checked!==e["data-checked"]){this.forcedProps["data-checked"]=t.dataset.checked;Object(s["D"])(e.getIsRootComponentMounted,(()=>{const t={id:this.props.id,dataset:{checked:e["data-checked"]}};e.onChange({target:t})}))}}}componentDidMount(){this.forcedProps={}}render(){const{getIsRootComponentMounted:e,isIsomorphicallyRendered:t,...r}=this.props;return o.a.createElement(a["a"],Object.assign({},r,this.forcedProps))}},d.propTypes={id:c.a.string.isRequired,"data-checked":c.a.oneOf(["","checked"]).isRequired,onChange:c.a.func.isRequired,onEscape:c.a.func,getIsRootComponentMounted:c.a.func,isIsomorphicallyRendered:c.a.bool},d.defaultProps={onEscape:null,getIsRootComponentMounted:null,isIsomorphicallyRendered:false},d))||p;const m=e=>o.a.createElement(n["a"],Object.assign({},e,{checkedStateComponent:h}));m.displayName=`withDjangoCheckedState(${n["a"].name})`;var f=t["a"]=m},"./src/udemy/js/base-components/dialog/ajax-modal.less":function(e,t,r){e.exports={"ajax-error":"ajax-modal--ajax-error--xufYN"}},"./src/udemy/js/base-components/dialog/ajax-modal.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/@udemy/i18n/dist/esm/index.js");var a=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");var s=r("./node_modules/autobind-decorator/lib/esm/index.js");var l=r("./node_modules/classnames/index.js");var c=r.n(l);var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/prop-types/index.js");var d=r.n(p);var h=r("./node_modules/react/index.js");var m=r.n(h);var f=r("./node_modules/axios/index.js");var g=r.n(f);var y=r("./node_modules/mobx/lib/mobx.module.js");var b=r("./src/udemy/js/utils/get-config-data.js");var v=r("./src/udemy/js/utils/noop.js");var w=r("./src/udemy/js/utils/serialize-form.js");var E,S,_,x,D;let C=(E=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"_url",S,this);babelHelpers.initializerDefineProperty(this,"content",_,this);babelHelpers.initializerDefineProperty(this,"isLoading",x,this);babelHelpers.initializerDefineProperty(this,"hasErrorContent",D,this);this.setUrl(e)}setUrl(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e!==this._url||t){this.content="";this._url=e}}setContent(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.content=e;this.hasErrorContent=t}async fetchContent(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(this.content){return Promise.resolve()}this.isLoading=true;this.hasErrorContent=false;this.content="";const t=[g.a.get(this._url,{headers:{Accept:"text/html","X-Requested-With":"XMLHttpRequest"},params:{display_type:"popup"}})];if(e){t.push(e(this._url).catch(v["a"]))}try{const[e]=await Promise.all(t);Object(y["x"])((()=>{this.content=e.data;this.isLoading=false}))}catch(e){Object(y["x"])((()=>{if(e.response&&e.response.data){this.content=e.response.data}else{this.content=e.message}this.hasErrorContent=true;this.isLoading=false}))}}submitForm(e){const t=Object(w["a"])(e);const r=[];Object.entries(t).forEach((e=>{let[t,n]=e;if(Array.isArray(n)){n.forEach((e=>{r.push(`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)}))}else{r.push(`${encodeURIComponent(t)}=${encodeURIComponent(n)}`)}}));return g.a.request({baseURL:Object(b["a"])().url.to_root,method:e.getAttribute("method")||"get",url:e.getAttribute("action"),data:r.join("&"),headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}})}},S=babelHelpers.applyDecoratedDescriptor(E.prototype,"_url",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),_=babelHelpers.applyDecoratedDescriptor(E.prototype,"content",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),x=babelHelpers.applyDecoratedDescriptor(E.prototype,"isLoading",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),D=babelHelpers.applyDecoratedDescriptor(E.prototype,"hasErrorContent",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(E.prototype,"setUrl",[y["e"]],Object.getOwnPropertyDescriptor(E.prototype,"setUrl"),E.prototype),babelHelpers.applyDecoratedDescriptor(E.prototype,"setContent",[y["e"]],Object.getOwnPropertyDescriptor(E.prototype,"setContent"),E.prototype),babelHelpers.applyDecoratedDescriptor(E.prototype,"fetchContent",[y["e"]],Object.getOwnPropertyDescriptor(E.prototype,"fetchContent"),E.prototype),E);var T=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var O=r("./src/udemy/js/utils/server-or-client.ts");var k=r("./src/udemy/js/loaders/ud-app-loader.js");var P,A,I;let j=Object(u["f"])(P=(A=(I=class e extends h["Component"]{constructor(e,t){super(e,t);this.modalBodyRef=m.a.createRef();this.contentChanged=false}componentDidMount(){this.bootstrapContents();this.disposers=[Object(y["o"])(this.props.ajaxContentStore,"content",this.unloadOldContent)]}componentDidUpdate(){if(this.contentChanged){this.bootstrapContents();this.contentChanged=false}}componentWillUnmount(){this.disposers&&this.disposers.forEach((e=>e()));this.unmountContents()}bootstrapContents(){this.udAppUnloader=Object(k["a"])(this.modalBodyRef.current);this.props.onBootstrapContents(this.modalBodyRef.current)}unmountContents(){if(this.udAppUnloader){this.udAppUnloader();this.udAppUnloader=null}}unloadOldContent(e){const t=this.props.ajaxContentStore.content;this.contentChanged=t!==e.newValue;if(t&&this.contentChanged){this.unmountContents()}return e}render(){return m.a.createElement("div",Object.assign({ref:this.modalBodyRef},Object(T["a"])({descriptionOfCaller:"ajax-modal-body:content",html:this.props.ajaxContentStore.content,domPurifyConfig:{ADD_ATTR:["target"]}})))}},I.propTypes={ajaxContentStore:d.a.object.isRequired,onBootstrapContents:d.a.func.isRequired},I),babelHelpers.applyDecoratedDescriptor(A.prototype,"unloadOldContent",[s["a"]],Object.getOwnPropertyDescriptor(A.prototype,"unloadOldContent"),A.prototype),A))||P;var R=r("./src/udemy/js/base-components/dialog/ajax-modal.less");var N,L,M;const q={"./ajax-modal.less":{"ajax-error":"ajax-modal--ajax-error--xufYN"}};const U=e=>{const{title:t,renderTitle:r,...n}=e;return n};let H=Object(u["f"])(N=(L=(M=class e extends h["Component"]{constructor(e){super(e);this.store=new C(this.props.url)}componentDidMount(){this.fetchContent(this.props.url,this.props.isOpen)}componentDidUpdate(e){if(e.isOpen!==this.props.isOpen){this.fetchContent(this.props.url,this.props.isOpen)}}componentWillUnmount(){if(this.contentNode){this.contentNode.removeEventListener("intercept-ajax-content",this.applyInterceptor);this.contentNode.removeEventListener("close-ajax-modal",this.props.onClose);this.contentNode=null}}fetchContent(e,t){if(t){this.store.setUrl(e,this.props.skipCache);this.store.fetchContent(this.props.preloader)}}onBootstrapContents(e){this.contentNode=e;this.applyInterceptor();this.contentNode.removeEventListener("close-ajax-modal",this.props.onClose);this.contentNode.addEventListener("close-ajax-modal",this.props.onClose)}applyInterceptor(){if(this.props.shouldInterceptContent){this.contentNode.removeEventListener("intercept-ajax-content",this.applyInterceptor);this.contentNode.addEventListener("intercept-ajax-content",this.applyInterceptor);const e=this.contentNode.querySelectorAll("a:not([data-disable-loader])");Array.from(e).forEach((e=>{e.removeEventListener("click",this.onClickLink);e.addEventListener("click",this.onClickLink)}));const t=this.contentNode.querySelectorAll("form:not([data-disable-loader])");Array.from(t).forEach((e=>{e.removeEventListener("submit",this.onSubmitForm);e.addEventListener("submit",this.onSubmitForm)}));this.handleRunCommandElements(this.contentNode)}}handleRunCommandElements(e){const t=Array.from(e.querySelectorAll(".run-command"));t.forEach((e=>{if(e.classList.contains("close-popup")){this.props.onClose()}if(e.classList.contains("redirect")){O["a"].global.location.href=e.dataset.url}if(e.classList.contains("refresh-page")){O["a"].global.location.reload()}}));return t.length>0}onClickLink(e){const t=e.target;const r=document.createElement("a");r.href=t.href;if(t.target==="_blank"||!t.href||!r.host){return true}e.preventDefault();this.fetchContent(t.href,this.props.isOpen)}async onSubmitForm(e){e.preventDefault();try{const{data:t}=await this.store.submitForm(e.target);if(t&&t.returnUrl){O["a"].global.location.href=t.returnUrl}else if(t&&typeof t==="string"){this.store.setContent(this.contentNode.innerHTML);const e=document.createElement("div");e.innerHTML=t;if(!this.handleRunCommandElements(e)){this.store.setContent(t)}}}catch(e){this.store.setContent(this.props.gettext("An unknown error occurred"),true)}}renderTitle(){return[this.props.labelledById,null]}render(){const{skipCache:e,url:t,labelledById:r,className:n,gettext:o,...s}=this.props;const l=!this.store.isLoading&&!!this.store.content;let u=null;if(l&&this.store.hasErrorContent){u=m.a.createElement("div",Object.assign({id:r,className:"ud-modal-title"},Object(T["a"])({descriptionOfCaller:"ajax-modal:error-content",html:this.store.content})))}else if(l){u=m.a.createElement(j,{ajaxContentStore:this.store,onBootstrapContents:this.onBootstrapContents})}return m.a.createElement(a["a"],Object.assign({},s,{fullPage:l?s.fullPage:false,loading:!l,title:"",renderTitle:this.renderTitle,className:(n?n+" ":"")+i()(c()({"ajax-error":this.store.hasErrorContent}),q)}),u)}},M.propTypes={isOpen:d.a.bool.isRequired,requireExplicitAction:d.a.bool,onClose:d.a.func,onOpen:d.a.func,fullPage:d.a.bool,loading:d.a.bool,className:d.a.string,getContainer:d.a.func,url:d.a.string.isRequired,labelledById:d.a.string.isRequired,preloader:d.a.func,shouldInterceptContent:d.a.bool,skipCache:d.a.bool,gettext:d.a.func},M.defaultProps={...U(a["a"].defaultProps),preloader:null,shouldInterceptContent:false,skipCache:false},M),babelHelpers.applyDecoratedDescriptor(L.prototype,"fetchContent",[s["a"]],Object.getOwnPropertyDescriptor(L.prototype,"fetchContent"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"onBootstrapContents",[s["a"]],Object.getOwnPropertyDescriptor(L.prototype,"onBootstrapContents"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"applyInterceptor",[s["a"]],Object.getOwnPropertyDescriptor(L.prototype,"applyInterceptor"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"onClickLink",[s["a"]],Object.getOwnPropertyDescriptor(L.prototype,"onClickLink"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"onSubmitForm",[s["a"]],Object.getOwnPropertyDescriptor(L.prototype,"onSubmitForm"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"renderTitle",[s["a"]],Object.getOwnPropertyDescriptor(L.prototype,"renderTitle"),L.prototype),L))||N;var F=t["a"]=Object(o["k"])(H)},"./src/udemy/js/base-components/error-boundary/error-boundary.react-component.tsx":function(e,t,r){"use strict";r.d(t,"b",(function(){return s}));var n=r("./node_modules/@udemy/shared-utils/dist/esm/react/error-boundary.react-component.js");var i=r("./node_modules/react/index.js");var o=r.n(i);var a=r("./src/udemy/js/utils/ud-raven.js");function s(e){return Object(n["b"])(e,a["a"].captureException)}const l=e=>o.a.createElement(n["a"],Object.assign({captureException:a["a"].captureException},e));t["a"]=l},"./src/udemy/js/base-components/form/autosuggest/autosuggest.mobx-store.tsx":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.mobx-store.js");var i=r("./src/udemy/js/utils/ud-raven.js");class o extends n["a"]{constructor(){super(i["a"].captureException)}}t["a"]=o},"./src/udemy/js/base-components/price-text/formatted-currency.react-component.tsx":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-merchandising-components/dist/esm/currency/formatted-currency.react-component.js");t["a"]=n["a"]},"./src/udemy/js/base-components/responsive/match-media.react-component.tsx":function(e,t,r){"use strict";r.d(t,"c",(function(){return u}));var n=r("./node_modules/@udemy/hooks/dist/esm/index.js");r.d(t,"b",(function(){return n["a"]}));r.d(t,"d",(function(){return n["b"]}));var i=r("./node_modules/@udemy/styles/dist/esm/tokens/generated/index.js");var o=r("./node_modules/react/index.js");var a=r.n(o);const s="breakpoint-";const l=Object.keys(i["a"]).filter((e=>e.startsWith(s))).map((e=>e.substring(s.length)));const c=e=>{if(l.includes(e)){const t=e.endsWith("-max")?"max-width":"min-width";const r=`${s}${e}`;const n=i["a"][r];return`(${t}: ${n})`}return e};const u=e=>{const t=c(e);const r=Object(o["useMemo"])((()=>typeof window!=="undefined"&&window.matchMedia(t)),[t]);const[n,i]=Object(o["useState"])(!!(r&&r.matches));Object(o["useEffect"])((()=>{if(!r){return}const e=e=>{i(e.matches)};i(r.matches);if(r.addEventListener){r.addEventListener("change",e)}else{r.addListener(e)}return()=>{if(r.removeEventListener){r.removeEventListener("change",e)}else{r.removeListener(e)}}}),[t,r]);return n};const p=e=>t=>r=>{const n=Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return Object.assign(Object.assign({},e),{[r]:u(n)})}),{});return a.a.createElement(t,Object.assign({},r,n))};t["a"]=p},"./src/udemy/js/base-components/router/memoized-browser-router.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/history/esm/history.js");var i=r("./node_modules/prop-types/index.js");var o=r.n(i);var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./node_modules/react-router/esm/react-router.js");function c(e,t){const r=Object.assign({},t),i=e&&e.querySelector("base"),o=i?i.getAttribute("href"):undefined;if(typeof r.basename==="undefined"&&o){r.basename=o.replace(/\/$/,"")}return Object(n["a"])(r)}const u=new Map;const p=(e,t)=>{const r=u.get(e);if(!r){const r=c(e,t);u.set(e,{history:r,historyProps:t});return r}if(r.historyProps.basename!==t.basename){throw new Error("You cannot have two MemoizedBrowserRouter instances within the same container "+"but with different browser history props. The instances are using history "+`created with history props ${JSON.stringify(r.historyProps)}, but `+`you have an instance with history props ${JSON.stringify(t)}.`)}return r.history};class d extends a["Component"]{constructor(e){super(e);const t={basename:e.basename};this.history=p(e.container,t)}render(){return s.a.createElement(l["d"],{history:this.history},this.props.children)}}d.propTypes={basename:o.a.string,container:function(){return o.a.oneOfType([o.a.instanceOf(Document),o.a.instanceOf(Element)])(...arguments)}};d.defaultProps={basename:undefined,container:typeof document!=="undefined"?document:null}},"./src/udemy/js/base-components/router/page-tracking-route.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");var i=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/helpers.js");var o=r("./node_modules/@udemy/event-tracking/dist/esm/lib/events.js");var a=r("./node_modules/prop-types/index.js");var s=r.n(a);var l=r("./node_modules/react/index.js");var c=r.n(l);var u=r("./node_modules/react-router/esm/react-router.js");var p=r("./src/udemy/js/utils/server-or-client.ts");var d=r("./src/udemy/js/utils/ud-user-specific-tracking-params.js");class h extends c.a.Component{componentDidMount(){this.handlePageChange()}componentDidUpdate(){this.handlePageChange()}componentWillUnmount(){delete d["a"].spaTrackingActive}handlePageChange(){const e=!!d["a"].spaTrackingActive;d["a"].spaTrackingActive=true;const t=n["a"].context.pathname;const r=p["a"].global.location.pathname;if(r===t){return}const a=Object(i["b"])();n["a"].setPageContext(this.props.pageKey,a);n["a"].publishEvent(new o["c"](e))}render(){const{pageKey:e,...t}=this.props;return c.a.createElement(u["c"],t)}}h.propTypes={...u["c"].propTypes,pageKey:s.a.string.isRequired}},"./src/udemy/js/base-components/tabs/tabs.react-component.tsx":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-structure-components/dist/esm/index.js");r.d(t,"a",(function(){return n["a"]}));var i=r("./node_modules/@udemy/react-structure-components/dist/esm/tabs/tabs.react-component.js");var o=r("./node_modules/@udemy/shared-utils/dist/esm/data/get-request-data.js");var a=r("./node_modules/@udemy/shared-utils/dist/esm/react/get-display-name.js");var s=r("./node_modules/react/index.js");var l=r.n(s);const c=Object.assign((e=>{const t=Object(o["a"])().isMobile;return l.a.createElement(i["b"],Object.assign({prioritizeTouch:t},e))}),{displayName:`WithLegacyCompatibility(${Object(a["a"])(i["b"])})`},{Tab:i["a"]});t["b"]=c},"./src/udemy/js/base-components/ungraduated/code/code-block.react-component.tsx":function(e,t,r){"use strict";var n=r("./node_modules/classnames/index.js");var i=r.n(n);var o=r("./node_modules/google-code-prettify/bin/prettify.min.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./src/udemy/js/base-components/ungraduated/code/code.global.less");var u=r.n(c);class p extends s["Component"]{constructor(){super(...arguments);this.node=undefined;this.containerNode=undefined;this.onClick=e=>{if(this.props.preventClick){e.stopPropagation();e.preventDefault()}};this.setContainerNode=e=>{this.containerNode=e};this.setNode=e=>{this.node=e}}componentDidMount(){var e;if(this._hasValue){(e=this.node)===null||e===void 0?void 0:e.classList.remove("prettyprinted");Object(o["prettyPrint"])(null,this.containerNode)}}componentDidUpdate(e){var t;if(e.value!==this.props.value&&this._hasValue){(t=this.node)===null||t===void 0?void 0:t.classList.remove("prettyprinted");Object(o["prettyPrint"])(null,this.containerNode)}}get _hasValue(){return Boolean(this.props.value)}render(){const e=i()({prettyprint:this._hasValue,linenums:this.props.showLineNumbers},this.props.language?`lang-${this.props.language}`:"",this.props.className);return l.a.createElement("div",{ref:this.setContainerNode},l.a.createElement("pre",{className:e,onClick:this.onClick,role:"presentation",ref:this.setNode},this.props.value))}}p.defaultProps={showLineNumbers:true,language:undefined,preventClick:false};t["a"]=p},"./src/udemy/js/base-components/ungraduated/code/code.global.less":function(e,t,r){},"./src/udemy/js/base-components/ungraduated/comments/comment-thread.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var o=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var a=r("./node_modules/classnames/index.js");var s=r.n(a);var l=r("./node_modules/mobx-react/dist/mobx-react.module.js");var c=r("./node_modules/prop-types/index.js");var u=r.n(c);var p=r("./node_modules/react/index.js");var d=r.n(p);var h=r("./src/udemy/js/utils/noop.js");var m=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var f=r("./node_modules/@udemy/icons/dist/delete.ud-icon");var g=r.n(f);var y=r("./node_modules/@udemy/icons/dist/edit.ud-icon");var b=r.n(y);var v=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var w=r("./node_modules/@udemy/react-core-components/dist/esm/avatar/avatar.react-component.js");var E=r("./node_modules/@udemy/react-date-time-components/dist/esm/relative-duration/relative-duration.react-component.js");var S=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal-trigger/modal-trigger.react-component.js");var _=r("./node_modules/@udemy/react-dialog-components/dist/esm/confirm-modal/confirm-modal.react-component.js");var x=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var D=r("./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.react-component.js");var C=r("./node_modules/autobind-decorator/lib/esm/index.js");var T=r("./node_modules/mobx/lib/mobx.module.js");var O=r("./node_modules/react-dom/index.js");var k=r.n(O);var P=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/rich-text-editor.react-component.js");var A=r("./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/rich-text-viewer.react-component.js");var I=r("./src/udemy/js/report-abuse/report-abuse-modal-trigger.react-component.js");var j=r("./src/udemy/js/report-abuse/report-abuse-tooltip.react-component.js");var R=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var N=r("./src/udemy/js/utils/get-config-data.js");var L=r("./src/udemy/js/utils/ud-me.js");var M=r("./src/udemy/js/base-components/ungraduated/comments/comment.mobx-model.js");var q=r("./src/udemy/js/base-components/ungraduated/comments/constants.js");var U=r("./src/udemy/js/base-components/ungraduated/comments/comment.less");var H,F,B,z,V,W;const G=Object(N["a"])();let K=Object(l["f"])(H=(F=(W=class e extends d.a.Component{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"isEditMode",B,this);babelHelpers.initializerDefineProperty(this,"isTextAreaFocused",z,this);babelHelpers.initializerDefineProperty(this,"isWysiwygActive",V,this);this.editCommentTipId=Object(m["a"])("edit-comment-tip")}componentDidMount(){if(!this.comment.id){this.toggleEditMode({autoFocus:false})}}componentWillUnmount(){this.wysiwygRef=null}get placeholderText(){if(!this.props.placeholder){return Object(q["b"])({gettext:this.props.gettext})}return this.props.placeholder}toggleEditMode(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e={autoFocus:true,...e};this.isEditMode=!this.isEditMode;if(this.isEditMode&&e.autoFocus){if(this.props.richTextTheme&&!this.isWysiwygActive){this.toggleWysiwyg()}else if(!this.props.richTextTheme){setTimeout((()=>{if(this.textAreaRef){this.textAreaRef.focus();const e=this.textAreaRef.value.length;if(this.textAreaRef.setSelectionRange&&e>0){this.textAreaRef.setSelectionRange(e,e)}}}),0)}}}setTextAreaFocused(){this.isTextAreaFocused=true}setTextAreaNotFocused(){this.isTextAreaFocused=false}onKeyDown(e){if(e.key==="Escape"){e.preventDefault();e.target.blur();if(this.comment.id){this.toggleEditMode()}}}onKeyPress(e){if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();e.target.blur();this.saveComment()}}onClickEdit(){this.toggleEditMode()}onWysiwygSubmit(){this.toggleWysiwyg();this.saveComment()}onWysiwygCancel(){this.toggleWysiwyg();this.isEditMode=!this.comment.id}saveComment(){this.comment.save().then((()=>{if(this.comment.id){this.toggleEditMode()}else{this.comment.setContent("")}})).catch(h["a"])}deleteComment(e){e();this.comment.delete().catch(h["a"])}onInputChange(e){this.comment.setContent(e.target.value)}onWysiwygInputChange(e){this.comment.setContent(e)}toggleWysiwyg(){this.isWysiwygActive=!this.isWysiwygActive;if(this.isWysiwygActive){setTimeout((()=>{this.isWysiwygActive&&this.wysiwygRef&&this.wysiwygRef.focus()}),0)}}get comment(){return this.props.comment}setTextAreaRef(e){this.textAreaRef=e?k.a.findDOMNode(e):null}setWysiwygRef(e){this.wysiwygRef=e}renderDisplayMode(){const{gettext:e}=this.props;const t=L["a"].id===this.comment.user.id;const r=G.features.report_abuse&&!t;return d.a.createElement("div",{className:"comment--flex--3UHH1 comment--comment-right--2CL6A","data-purpose":"content-container"},d.a.createElement("div",{className:"comment--flex-row--2fJt8"},d.a.createElement("div",{className:"comment--flex-row--2fJt8 comment--flex--3UHH1 comment--comment-top-info--1B7aK"},d.a.createElement("span",{className:"comment--commenter-name-row--26eyx"},d.a.createElement("a",{href:this.comment.user.url,"data-purpose":"commenter-name"},d.a.createElement("span",{className:"comment--ellipsis--2Lqu9"},this.comment.user.title))),this.comment.created&&d.a.createElement("span",{className:"comment--bullet--3tnjs"}," ","·"," "),this.comment.created&&d.a.createElement("time",{"data-purpose":"comment-time"},d.a.createElement(E["a"],{datetime:this.comment.created})),r&&d.a.createElement("span",{className:"comment--bullet--3tnjs"}," ","·"," "),r&&d.a.createElement(I["a"],{objectId:this.comment.id,objectType:"comment",trigger:d.a.createElement(j["a"],{udStyle:"link",className:"ud-link-neutral"})})),t&&d.a.createElement("div",{className:"comment--flex-row--2fJt8 comment--comment-top-btns--3cPJJ"},d.a.createElement(v["a"],{className:"ud-link-neutral",udStyle:"ghost",size:"small","data-purpose":"edit-button",disabled:this.comment.isDeleting,onClick:this.onClickEdit},d.a.createElement(b.a,{label:e("Edit comment")})),d.a.createElement(S["a"],{trigger:d.a.createElement(v["a"],{className:"ud-link-neutral",udStyle:"ghost",size:"small","data-purpose":"delete-button",disabled:this.comment.isDeleting},d.a.createElement(g.a,{label:e("Delete comment")})),renderModal:t=>{let{isOpen:r,onClose:n}=t;return d.a.createElement(_["a"],{className:"udlite-in-udheavy",isOpen:r,onCancel:n,onConfirm:()=>this.deleteComment(n)},e("Are you sure you want to delete?"))}}))),this.comment.content&&!!(this.props.richTextTheme||this.props.textToHTML)&&d.a.createElement(A["a"],{"data-purpose":"content",unsafeHTML:this.props.textToHTML?this.props.textToHTML(this.comment.content):this.comment.content}),this.comment.content&&!(this.props.richTextTheme||this.props.textToHTML)&&d.a.createElement("div",{"data-purpose":"content"},this.comment.content))}renderBasicEditor(){const{gettext:e}=this.props;return d.a.createElement(d.a.Fragment,null,d.a.createElement(x["b"],{label:e("Enter your comment:"),labelProps:{className:"ud-sr-only"}},d.a.createElement(D["a"],{ref:this.setTextAreaRef,value:this.comment.content,disabled:this.comment.isSubmitting,rows:"1",onFocus:this.setTextAreaFocused,onBlur:this.setTextAreaNotFocused,onChange:this.onInputChange,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,placeholder:this.placeholderText,"data-purpose":"edit-textarea","aria-describedby":this.editCommentTipId})),this.isTextAreaFocused&&d.a.createElement("div",Object.assign({id:this.editCommentTipId,className:"ud-text-xs comment--edit-comment-tip--JQc1_"},Object(R["a"])({descriptionOfCaller:"comments:edit-comment-tip",html:e("Press <b>Enter</b> to post, <b>Esc</b> to cancel, <b>Shift + Enter</b> to go to a new line"),dataPurpose:"edit-comment-tip"}))))}renderWysiwygEditor(){const{gettext:e}=this.props;const t=d.a.createElement(x["b"],{label:this.placeholderText,labelProps:{className:"ud-sr-only"}},d.a.createElement(D["a"],{rows:"1",onFocus:this.toggleWysiwyg,placeholder:this.props.placeholder,"data-purpose":"edit-textarea"}));const r=d.a.createElement(d.a.Fragment,null,d.a.createElement(P["a"],{theme:this.props.richTextTheme,placeholder:this.placeholderText,value:this.comment.content,contentEditable:!this.comment.isSubmitting,onInit:this.setWysiwygRef,onValueChange:this.onWysiwygInputChange}),d.a.createElement("div",{className:"comment--flex-row--2fJt8 comment--footer-btns--3NVjh"},d.a.createElement(i["a"],{size:"small","data-purpose":"submit-wysiwyg",disabled:this.comment.isSubmitting,onClick:this.onWysiwygSubmit},e("Submit")),d.a.createElement(i["a"],{className:"ud-link-neutral",udStyle:"ghost",size:"small","data-purpose":"cancel-wysiwyg",disabled:this.comment.isSubmitting,onClick:this.onWysiwygCancel},e("Cancel"))));return this.isWysiwygActive?r:t}renderEditMode(){return d.a.createElement("div",{className:"comment--flex--3UHH1 comment--comment-right--2CL6A","data-purpose":"edit-container"},this.props.richTextTheme?this.renderWysiwygEditor():this.renderBasicEditor())}render(){const{gettext:e}=this.props;return d.a.createElement("div",{className:"comment--flex-row--2fJt8 comment--comment--1ilOY","data-purpose":"comment"},d.a.createElement(w["a"],{user:{...this.comment.user,display_name:e("Commenter")},alt:"DISPLAY_NAME",size:"medium",srcKey:"image_50x50","data-purpose":"avatar",title:e("Commenter")}),this.isEditMode?this.renderEditMode():this.renderDisplayMode())}},W.propTypes={comment:u.a.instanceOf(M["a"]).isRequired,richTextTheme:u.a.oneOf(Object.values(P["a"].THEMES)),placeholder:u.a.string,textToHTML:u.a.func,gettext:u.a.func},W.defaultProps={richTextTheme:null,textToHTML:null},W),B=babelHelpers.applyDecoratedDescriptor(F.prototype,"isEditMode",[T["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),z=babelHelpers.applyDecoratedDescriptor(F.prototype,"isTextAreaFocused",[T["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),V=babelHelpers.applyDecoratedDescriptor(F.prototype,"isWysiwygActive",[T["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(F.prototype,"toggleEditMode",[T["e"]],Object.getOwnPropertyDescriptor(F.prototype,"toggleEditMode"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"setTextAreaFocused",[C["a"],T["e"]],Object.getOwnPropertyDescriptor(F.prototype,"setTextAreaFocused"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"setTextAreaNotFocused",[C["a"],T["e"]],Object.getOwnPropertyDescriptor(F.prototype,"setTextAreaNotFocused"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onKeyDown",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"onKeyDown"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onKeyPress",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"onKeyPress"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onClickEdit",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"onClickEdit"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onWysiwygSubmit",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"onWysiwygSubmit"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onWysiwygCancel",[C["a"],T["e"]],Object.getOwnPropertyDescriptor(F.prototype,"onWysiwygCancel"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"saveComment",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"saveComment"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"deleteComment",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"deleteComment"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onInputChange",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"onInputChange"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"onWysiwygInputChange",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"onWysiwygInputChange"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"toggleWysiwyg",[C["a"],T["e"]],Object.getOwnPropertyDescriptor(F.prototype,"toggleWysiwyg"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"setTextAreaRef",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"setTextAreaRef"),F.prototype),babelHelpers.applyDecoratedDescriptor(F.prototype,"setWysiwygRef",[C["a"]],Object.getOwnPropertyDescriptor(F.prototype,"setWysiwygRef"),F.prototype),F))||H;var $=Object(n["k"])(K);var X=r("./src/udemy/js/base-components/ungraduated/comments/comments.mobx-store.js");var Y,Q;let J=Object(l["f"])(Y=(Q=class e extends d.a.Component{constructor(e){super(e);this.store=e.commentsStore||new X["a"](this.props.resourceUrl,this.props.commentThread,this.props.createCommentCallback,this.props.editCommentCallback,this.props.deleteCommentCallback,{gettext:e.gettext})}componentDidMount(){if(this.props.autoLoad&&this.props.commentThread){this.store.loadComments()}}render(){const{gettext:e,interpolate:t}=this.props;const r=!!this.store.numComments&&this.store.comments.length===0&&!this.store.isLoading;const n=this.store.hasNextPage&&!r&&!this.store.isLoading;const a=this.props.canReply&&d.a.createElement($,{key:"new-comment","data-purpose":"new-comment",comment:this.store.newComment,richTextTheme:this.props.richTextTheme,textToHTML:this.props.textToHTML,placeholder:this.props.newCommentPlaceholder});const l=(this.props.isReversed?this.store.comments.slice(0).reverse():this.store.comments).map((e=>d.a.createElement($,{key:e.id,comment:e,richTextTheme:this.props.richTextTheme,textToHTML:this.props.textToHTML})));const c=r&&d.a.createElement(i["a"],{className:"ud-link-neutral ud-link-underline comment--more-btn--2jqM6",udStyle:"link","data-purpose":"show-comments-link",onClick:this.store.loadComments},t(e("Show comments (%(numComments)s)"),{numComments:this.store.numComments},true));const u=n&&d.a.createElement(i["a"],{className:"ud-link-neutral ud-link-underline comment--more-btn--2jqM6",udStyle:"link","data-purpose":"load-more-link",onClick:this.store.loadComments},t(this.props.isReversed?e("Load earlier (%(remainingComments)s)"):e("Load more (%(remainingComments)s)"),{remainingComments:this.store.numComments-this.store.comments.length},true));const p=this.store.isLoading&&d.a.createElement(o["a"],{block:true,size:"medium",className:"comment--loader--2tVIo"});const h=this.props.isReversed?[u,c,p,l,a]:[a,l,c,u,p];return d.a.createElement("div",{className:s()(this.props.className,"udlite-in-udheavy")},h.map(((e,t)=>d.a.createElement(d.a.Fragment,{key:t},e))))}},Q.propTypes={commentsStore:u.a.object,resourceUrl:u.a.string.isRequired,className:u.a.string,commentThread:u.a.object,autoLoad:u.a.bool,canReply:u.a.bool,isReversed:u.a.bool,richTextTheme:$.propTypes.richTextTheme,textToHTML:$.propTypes.textToHTML,createCommentCallback:u.a.func,editCommentCallback:u.a.func,deleteCommentCallback:u.a.func,newCommentPlaceholder:u.a.string,gettext:u.a.func,interpolate:u.a.func},Q.defaultProps={commentsStore:undefined,className:"",commentThread:undefined,autoLoad:false,canReply:true,isReversed:false,richTextTheme:$.defaultProps.richTextTheme,textToHTML:$.defaultProps.textToHTML,createCommentCallback:h["a"],editCommentCallback:h["a"],deleteCommentCallback:h["a"],newCommentPlaceholder:$.defaultProps.placeholder},Q))||Y;var Z=t["a"]=Object(n["k"])(J)},"./src/udemy/js/base-components/ungraduated/comments/comment.less":function(e,t,r){e.exports={ellipsis:"comment--ellipsis--2Lqu9","flex-row":"comment--flex-row--2fJt8",flex:"comment--flex--3UHH1","comment-right":"comment--comment-right--2CL6A","comment-top-info":"comment--comment-top-info--1B7aK","commenter-name-row":"comment--commenter-name-row--26eyx","comment-top-btns":"comment--comment-top-btns--3cPJJ",comment:"comment--comment--1ilOY","edit-comment-tip":"comment--edit-comment-tip--JQc1_","footer-btns":"comment--footer-btns--3NVjh",loader:"comment--loader--2tVIo","more-btn":"comment--more-btn--2jqM6",bullet:"comment--bullet--3tnjs"}},"./src/udemy/js/base-components/ungraduated/comments/comment.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("./node_modules/@udemy/react-messaging-components/dist/esm/toaster/toaster.mobx-store.js");var i=r("./node_modules/autobind-decorator/lib/esm/index.js");var o=r("./node_modules/mobx/lib/mobx.module.js");var a=r("./src/udemy/js/utils/ud-api.js");var s,l,c,u;let p=(s=class e{constructor(e,t,r){let{gettext:n}=r;babelHelpers.initializerDefineProperty(this,"content",l,this);babelHelpers.initializerDefineProperty(this,"isSubmitting",c,this);babelHelpers.initializerDefineProperty(this,"isDeleting",u,this);this.commentsStore=e;this.id=t.id;this.created=t.created;this.user=t.user;this.gettext=n;this.setObservablesFromAPIData(t)}setObservablesFromAPIData(e){this.content=e.content}setContent(e){this.content=e}save(){if(this.isSubmitting){return Promise.reject("Cannot save right now.")}if(!this.content||!this.content.trim()||this.content.replace(/(<([^>]+)>)|(&nbsp;)|\s/g,"").length===0){this._showCommentErrorToast();return Promise.reject("Cannot save an empty comment.")}this.isSubmitting=true;this.content=this.content.trim();const e={content:this.content};if(this.cannedCommentId){e.canned_comments=[this.cannedCommentId]}let t;if(this.id){t=this.commentsStore.updateComment(this.id,e)}else{t=this.commentsStore.createComment(e)}return t.catch(this._showReloadPageErrorToast).finally(Object(o["e"])((()=>{this.isSubmitting=false})))}delete(){if(this.isDeleting){return Promise.reject("Cannot delete right now.")}this.isDeleting=true;return this.commentsStore.deleteComment(this.id).catch(this._showReloadPageErrorToast).finally(Object(o["e"])((()=>{this.isDeleting=false})))}_showReloadPageErrorToast(){const e={udStyle:"error",title:a["g"],ctaText:this.gettext("Reload page"),onAction:()=>window.location.reload()};n["a"].addAlertBannerToast(e,{autoDismiss:true})}_showCommentErrorToast(){const e={udStyle:"error",title:this.gettext("Cannot save empty comment"),ctaText:this.gettext("Dismiss"),dismissButtonProps:false};n["a"].addAlertBannerToast(e,{autoDismiss:true})}},l=babelHelpers.applyDecoratedDescriptor(s.prototype,"content",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),c=babelHelpers.applyDecoratedDescriptor(s.prototype,"isSubmitting",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),u=babelHelpers.applyDecoratedDescriptor(s.prototype,"isDeleting",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"setObservablesFromAPIData",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"setObservablesFromAPIData"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"setContent",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"setContent"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"save",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"save"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"delete",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"delete"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"_showReloadPageErrorToast",[i["a"]],Object.getOwnPropertyDescriptor(s.prototype,"_showReloadPageErrorToast"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"_showCommentErrorToast",[i["a"]],Object.getOwnPropertyDescriptor(s.prototype,"_showCommentErrorToast"),s.prototype),s)},"./src/udemy/js/base-components/ungraduated/comments/comments.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/utils/noop.js");var a=r("./src/udemy/js/utils/ud-api.js");var s=r("./src/udemy/js/utils/ud-me.js");var l=r("./src/udemy/js/base-components/ungraduated/comments/comment.mobx-model.js");var c=r("./src/udemy/js/base-components/ungraduated/comments/constants.js");var u,p,d,h,m;let f=(u=class e{constructor(e,t,r,n,i,a){let{gettext:c}=a;babelHelpers.initializerDefineProperty(this,"hasNextPage",p,this);babelHelpers.initializerDefineProperty(this,"isLoading",d,this);babelHelpers.initializerDefineProperty(this,"comments",h,this);babelHelpers.initializerDefineProperty(this,"numComments",m,this);this.currentPage=1;this.createCommentCallback=o["a"];this.editCommentCallback=o["a"];this.deleteCommentCallback=o["a"];this.resourceUrl=e;this.commentThread=t;this.createCommentCallback=r;this.editCommentCallback=n;this.deleteCommentCallback=i;this.gettext=c;if(this.commentThread){this.setNumComments(this.commentThread.num_comments);if(this.commentThread.comments){this.addComments(this.commentThread.comments)}if(this.numComments>this.comments.length){this.setHasNextPage(true)}}this.newComment=new l["a"](this,{user:s["a"]},{gettext:this.gettext})}loadComments(){this.isLoading=true;return a["f"].get(this.resourceUrl,{params:{page:this.currentPage,page_size:c["a"]}}).then(Object(i["e"])((e=>{let{data:t}=e;this.setHasNextPage(!!t.next);this.setNumComments(t.count);this.addComments(t.results);this.currentPage+=1}))).catch((e=>{if(e.status===404){this.setHasNextPage(false)}})).finally(Object(i["e"])((()=>{this.isLoading=false})))}setHasNextPage(e){this.hasNextPage=e}setNumComments(e){this.numComments=e}addComments(e){e.forEach((e=>{if(!this.commentIds.has(e.id)){this.comments.push(new l["a"](this,e,{gettext:this.gettext}))}}))}createComment(e){return a["f"].post(this.resourceUrl,e).then(Object(i["e"])((e=>{let{data:t}=e;this.numComments+=1;const r=new l["a"](this,Object.assign({},t),{gettext:this.gettext});this.comments.unshift(r);this.createCommentCallback(r)})))}updateComment(e,t){return a["f"].patch(`${this.resourceUrl}${e}/`,t).then((e=>{let{data:t}=e;const r=new l["a"](this,Object.assign({},t),{gettext:this.gettext});this.editCommentCallback(r)}))}deleteComment(e){return a["f"].delete(`${this.resourceUrl}${e}/`).then(Object(i["e"])((()=>{this.numComments-=1;this.comments=this.comments.filter((t=>t.id!==e));this.currentPage=Math.max(1,this.currentPage-1);this.loadComments();this.deleteCommentCallback(e)})))}get commentIds(){return new Set(this.comments.map((e=>e.id)))}},p=babelHelpers.applyDecoratedDescriptor(u.prototype,"hasNextPage",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),d=babelHelpers.applyDecoratedDescriptor(u.prototype,"isLoading",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),h=babelHelpers.applyDecoratedDescriptor(u.prototype,"comments",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),m=babelHelpers.applyDecoratedDescriptor(u.prototype,"numComments",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(u.prototype,"loadComments",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(u.prototype,"loadComments"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"setHasNextPage",[i["e"]],Object.getOwnPropertyDescriptor(u.prototype,"setHasNextPage"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"setNumComments",[i["e"]],Object.getOwnPropertyDescriptor(u.prototype,"setNumComments"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"addComments",[i["e"]],Object.getOwnPropertyDescriptor(u.prototype,"addComments"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"commentIds",[i["g"]],Object.getOwnPropertyDescriptor(u.prototype,"commentIds"),u.prototype),u)},"./src/udemy/js/base-components/ungraduated/comments/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r.d(t,"b",(function(){return i}));const n=8;const i=e=>{let{gettext:t}=e;return t("Enter your comment")}},"./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/utils/noop.js");var a=r("./src/udemy/js/utils/ud-api-stat.js");var s=r("./src/udemy/js/utils/ud-s3fineuploader.js");var l,c,u,p,d;let h=(l=class e extends s["a"]{constructor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};super({acl:"private",allowedExtensionsDotted:[],sizeLimit:10*1e3*1e3,...e});babelHelpers.initializerDefineProperty(this,"id",c,this);babelHelpers.initializerDefineProperty(this,"file",u,this);babelHelpers.initializerDefineProperty(this,"error",p,this);babelHelpers.initializerDefineProperty(this,"s3json",d,this);const{onUploadStarted:t,onUploadCanceled:r,onUploadCompleted:n,onUploadFailed:i}=e;this.onUploadStarted=t||o["a"];this.onUploadCanceled=r||o["a"];this.onUploadCompleted=n||o["a"];this.onUploadFailed=i||o["a"];this.registerUploadCompleteHandler(this.onFileUpload);this.registerUploadErrorHandler(this.onUploadError);this.registerUploadProgressHandler(this.updateFileProgress)}getValidationProps(){return this.error?{validationState:"error",note:this.error}:{}}clearFile(){this.file=null;this.error="";this.reset()}onFileSelected(e){const t=e.target.files[0];this.file={name:t.name,progressPercentage:0};this.upload(t);this.onUploadStarted(this.id,t.name)}onChangeSelectedFile(e){this.clearFile();this.onUploadCanceled(this.id,e.name)}onFileUpload(e){const t={key:e.key,uuid:e.uuid,name:e.name,bucket:e.bucket};const r=JSON.stringify(t);this.onUploadCompleted(this.id,e.name,r,this.clearFile);++this.id}onUploadError(e,t,r){if(t){this.error=r;this.onUploadFailed(e,t)}a["b"].increment("s3_fine_uploader.upload.fail")}updateFileProgress(e,t){if(this.file){if(t===0){this.file.progressPercentage=0}else{this.file.progressPercentage=Math.round(e/t*100)}}}setS3Json(e){this.s3json=e}},c=babelHelpers.applyDecoratedDescriptor(l.prototype,"id",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),u=babelHelpers.applyDecoratedDescriptor(l.prototype,"file",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),p=babelHelpers.applyDecoratedDescriptor(l.prototype,"error",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),d=babelHelpers.applyDecoratedDescriptor(l.prototype,"s3json",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),babelHelpers.applyDecoratedDescriptor(l.prototype,"clearFile",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"clearFile"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"onFileSelected",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"onFileSelected"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"onChangeSelectedFile",[n["a"]],Object.getOwnPropertyDescriptor(l.prototype,"onChangeSelectedFile"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"onFileUpload",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"onFileUpload"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"onUploadError",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"onUploadError"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"updateFileProgress",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"updateFileProgress"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setS3Json",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"setS3Json"),l.prototype),l)},"./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r("./node_modules/@udemy/react-form-components/dist/esm/file-uploader/file-uploader.react-component.js");var i=r("./node_modules/autobind-decorator/lib/esm/index.js");var o=r("./node_modules/mobx-react/dist/mobx-react.module.js");var a=r("./node_modules/prop-types/index.js");var s=r.n(a);var l=r("./node_modules/react/index.js");var c=r.n(l);var u=r("./src/udemy/js/utils/noop.js");var p=r("./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.mobx-model.js");var d,h,m;let f=Object(o["f"])(d=(h=(m=class e extends l["Component"]{handleChangeSelectedFile(e){const{uploader:t,onChangeSelectedFile:r}=this.props;t.onChangeSelectedFile(e);r(e)}render(){const{uploader:e,onChangeSelectedFile:t,...r}=this.props;return c.a.createElement(n["a"],Object.assign({},r,{onChange:e.onFileSelected,onChangeSelectedFile:this.handleChangeSelectedFile,allowedExtensionsDotted:e.allowedExtensionsDotted,progressPercentage:e.file?e.file.progressPercentage:null}))}},m.propTypes={...n["a"].propTypes,uploader:s.a.instanceOf(p["a"]).isRequired},m.defaultProps={...n["a"].defaultProps,onChangeSelectedFile:u["a"]},m),babelHelpers.applyDecoratedDescriptor(h.prototype,"handleChangeSelectedFile",[i["a"]],Object.getOwnPropertyDescriptor(h.prototype,"handleChangeSelectedFile"),h.prototype),h))||d},"./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/image-upload-preview-with-crop.less":function(e,t,r){e.exports={"preview-wrapper":"image-upload-preview-with-crop--preview-wrapper--3mrme","image-wrapper":"image-upload-preview-with-crop--image-wrapper--2soBW",loading:"image-upload-preview-with-crop--loading--3DLPS","crop-wrapper":"image-upload-preview-with-crop--crop-wrapper--3IZ4V",hidden:"image-upload-preview-with-crop--hidden--1L8WT",note:"image-upload-preview-with-crop--note--17PEX",error:"image-upload-preview-with-crop--error--2b6LX"}},"./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/image-upload-preview-with-crop.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/@udemy/i18n/dist/esm/index.js");var a=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var s=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var l=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var c=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var u=r("./node_modules/autobind-decorator/lib/esm/index.js");var p=r("./node_modules/classnames/index.js");var d=r.n(p);var h=r("./node_modules/mobx-react/dist/mobx-react.module.js");var m=r("./node_modules/prop-types/index.js");var f=r.n(m);var g=r("./node_modules/react/index.js");var y=r.n(g);var b=r("./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.mobx-model.js");var v=r("./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.react-component.js");var w=r("./src/udemy/js/utils/get-config-data.js");var E=r("./node_modules/mobx/lib/mobx.module.js");var S=r("./src/udemy/js/utils/ud-api.js");var _,x,D,C,T;const O={INITIAL:"INITIAL",CROP:"CROP",CROPPED:"CROPPED"};let k=(_=class e{constructor(e,t){let{gettext:r}=t;babelHelpers.initializerDefineProperty(this,"loadingStatus",x,this);babelHelpers.initializerDefineProperty(this,"cropMode",D,this);babelHelpers.initializerDefineProperty(this,"error",C,this);babelHelpers.initializerDefineProperty(this,"imageUrl",T,this);this.asset={};this.pixelCrop={};this.lastValidImage=void 0;this.setImageUrl(e);this.lastValidImage=e;this.gettext=r}get isLoading(){return!!this.loadingStatus}get isLoadingCrop(){return this.loadingStatus===O.CROP}get isLoadingCropped(){return this.loadingStatus===O.CROPPED}setDataAssetForCrop(e){const t=`https://${e.bucket}.s3.amazonaws.com/${e.key}`;this.asset={...e,url:t};this.imageUrl=t;this.cropMode=true;this.setImageLoadingStatus(O.CROP)}setError(e){const t={502:this.gettext("The uploaded image is too large. Please upload a smaller image.")};if(e.response){this.error=t[e.response.status]||e.response.data||e.response.statusText}else{this.error=e}this.imageUrl=this.lastValidImage;this.setImageLoadingStatus(null);this.cropMode=false}cleanError(){this.error=null}setImageLoadingStatus(e){this.loadingStatus=e}setImageUrl(e){this.imageUrl=e}setPixelCrop(e){this.pixelCrop=e}updateCropPreview(){const e={...this.asset,...this.pixelCrop};this.setImageLoadingStatus(O.CROPPED);return S["f"].post("cropped-images/",e).then(Object(E["e"])((e=>{this.cropMode=false;this.imageUrl=e.data.url;this.lastValidImage=this.imageUrl}))).catch(Object(E["e"])((e=>{this.setError(e)})))}},x=babelHelpers.applyDecoratedDescriptor(_.prototype,"loadingStatus",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return O.INITIAL}}),D=babelHelpers.applyDecoratedDescriptor(_.prototype,"cropMode",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),C=babelHelpers.applyDecoratedDescriptor(_.prototype,"error",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),T=babelHelpers.applyDecoratedDescriptor(_.prototype,"imageUrl",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(_.prototype,"setDataAssetForCrop",[E["e"]],Object.getOwnPropertyDescriptor(_.prototype,"setDataAssetForCrop"),_.prototype),babelHelpers.applyDecoratedDescriptor(_.prototype,"setError",[E["e"]],Object.getOwnPropertyDescriptor(_.prototype,"setError"),_.prototype),babelHelpers.applyDecoratedDescriptor(_.prototype,"cleanError",[E["e"]],Object.getOwnPropertyDescriptor(_.prototype,"cleanError"),_.prototype),babelHelpers.applyDecoratedDescriptor(_.prototype,"setImageLoadingStatus",[E["e"]],Object.getOwnPropertyDescriptor(_.prototype,"setImageLoadingStatus"),_.prototype),babelHelpers.applyDecoratedDescriptor(_.prototype,"setImageUrl",[E["e"]],Object.getOwnPropertyDescriptor(_.prototype,"setImageUrl"),_.prototype),babelHelpers.applyDecoratedDescriptor(_.prototype,"updateCropPreview",[E["e"]],Object.getOwnPropertyDescriptor(_.prototype,"updateCropPreview"),_.prototype),_);var P=r("./node_modules/react-image-crop/index.js");var A=r.n(P);var I=r("./src/udemy/js/utils/noop.js");var j=r("./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/react-crop.global.less");var R,N,L;const M=Object.freeze({EXACT_SIZE:1,WRONG_SIZE:2});let q=Object(h["f"])(R=(N=(L=class e extends g["Component"]{constructor(){super(...arguments);this.state={}}onChangeHandler(e,t){const{minHeight:r,minWidth:n}=this.props;if(t.height<r||t.width<n){return false}this.setState({crop:e});if(this.props.onChange){this.props.onChange(e,t)}}onImageLoaded(e){const{minHeight:t,minWidth:r,aspect:n,onImageLoaded:i,onComplete:o,onError:a,gettext:s,interpolate:l}=this.props;if(e.naturalHeight===t&&e.naturalWidth===r){a(M.EXACT_SIZE,null);return false}if(e.naturalHeight<t||e.naturalWidth<r){const e=l(s("The uploaded image is too small. Minimum image size is %(minWidth)sx%(minHeight)spx. Please upload a larger image."),{minWidth:r,minHeight:t},true);a(M.WRONG_SIZE,e);return false}const c=n||r/t;const u=e.naturalWidth/e.naturalHeight;const p=u>c;const d={width:!p?e.naturalWidth:Math.round(e.naturalHeight*c),height:p?e.naturalHeight:Math.round(e.naturalWidth/c)};const h={height:100*d.height/e.naturalHeight,width:100*d.width/e.naturalWidth};const m={y:(e.naturalHeight-d.height)/2,x:(e.naturalWidth-d.width)/2,...d,aspect:n};const f={x:(100-h.width)/2,y:(100-h.height)/2,...h,aspect:n};this.setState({crop:f,minHeight:100*t/e.naturalHeight,minWidth:100*r/e.naturalWidth});i(e);o(f,m)}render(){const{onChange:e,minHeight:t,minWidth:r,aspect:n,...i}=Object(o["d"])(this.props);return y.a.createElement(A.a,Object.assign({},i,this.state,{onChange:this.onChangeHandler,onImageLoaded:this.onImageLoaded}))}},L.propTypes={minHeight:f.a.number.isRequired,minWidth:f.a.number.isRequired,onComplete:f.a.func.isRequired,aspect:f.a.number,onChange:f.a.func,onError:f.a.func,onImageLoaded:f.a.func,gettext:f.a.func,interpolate:f.a.func},L.defaultProps={aspect:undefined,onChange:I["a"],onError:I["a"],onImageLoaded:I["a"]},L),babelHelpers.applyDecoratedDescriptor(N.prototype,"onChangeHandler",[u["a"]],Object.getOwnPropertyDescriptor(N.prototype,"onChangeHandler"),N.prototype),babelHelpers.applyDecoratedDescriptor(N.prototype,"onImageLoaded",[u["a"]],Object.getOwnPropertyDescriptor(N.prototype,"onImageLoaded"),N.prototype),N))||R;var U=Object(o["k"])(q);var H=r("./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/uploading-backdrop.react-component.js");var F=r("./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/image-upload-preview-with-crop.less");var B,z,V;const W={"./image-upload-preview-with-crop.less":{"preview-wrapper":"image-upload-preview-with-crop--preview-wrapper--3mrme","image-wrapper":"image-upload-preview-with-crop--image-wrapper--2soBW",loading:"image-upload-preview-with-crop--loading--3DLPS","crop-wrapper":"image-upload-preview-with-crop--crop-wrapper--3IZ4V",hidden:"image-upload-preview-with-crop--hidden--1L8WT",note:"image-upload-preview-with-crop--note--17PEX",error:"image-upload-preview-with-crop--error--2b6LX"}};const G=Object(w["a"])();let K=Object(h["f"])(B=(z=(V=class e extends g["Component"]{constructor(e){super(e);const{gettext:t}=e;const{onUploadCompleted:r,...n}=Object(o["d"])(e);this.uploader=new b["a"]({acl:"public-read",bucketUrl:G.third_party.s3.image_asset.bucket_url,key:G.third_party.s3.image_asset.key,allowedExtensionsDotted:n.allowedExtensions,onUploadStarted:this.onUploadStarted,onUploadCompleted:this.onUploadCompleted,...n});this.store=new k(this.props.imageUrl,{gettext:t})}setImageAsLoaded(){this.store.setImageLoadingStatus(null)}updateCropPreview(){const{pixelCrop:e,asset:t}=this.store;if(this.props.onCrop){this.props.onCrop({...t,...e})}this.store.updateCropPreview();const r=Object.assign(this.store.pixelCrop,{url:this.store.imageUrl});this.uploader.setS3Json(JSON.stringify(r))}onUploadCompleted(e,t,r){const n=JSON.parse(r);this.store.setDataAssetForCrop(n);if(this.props.onUploadCompleted){this.props.onUploadCompleted(n)}}onUploadStarted(){this.store.cleanError();this.store.setImageLoadingStatus(O.CROP)}updateCrop(e,t){this.store.setPixelCrop({h:t.height,w:t.width,x:t.x,y:t.y})}resetCropPreview(){const{minHeight:e,minWidth:t}=this.props;this.store.setPixelCrop({h:e,w:t,x:0,y:0});this.updateCropPreview()}cropError(e,t){if(e===M.EXACT_SIZE){this.resetCropPreview();return}this.store.setError(t)}onChangeSelectedFile(){this.store.setImageLoadingStatus(null)}render(){const{tips:e,minHeight:t,minWidth:r,aspect:n,fieldName:o,fieldPurpose:u,adjacentTips:p,className:h,uploadLabel:m,disabled:f,gettext:g}=this.props;const{imageUrl:b,isLoading:w,isLoadingCrop:E,isLoadingCropped:S,cropMode:_,error:x}=this.store;const D={};if(!_){Object.assign(D,this.uploader.getValidationProps())}if(x){D.validationState="error"}return y.a.createElement("div",{className:d()(h,"udlite-in-udheavy")},y.a.createElement("div",{className:"ud-image-upload-preview-wrapper image-upload-preview-with-crop--preview-wrapper--3mrme"},y.a.createElement("div",{className:"image-upload-preview-with-crop--image-wrapper--2soBW"},(_||S)&&y.a.createElement("div",{className:i()(d()("crop-wrapper",{hidden:E}),W)},y.a.createElement(U,{src:b,onComplete:this.updateCrop,keepSelection:true,minHeight:t,minWidth:r,aspect:n,onImageLoaded:this.setImageAsLoaded,onError:this.cropError})),(!_||E)&&y.a.createElement(a["a"],{"data-purpose":"image-preview",src:b,alt:"",onLoad:this.setImageAsLoaded,height:t,width:r,style:{maxHeight:`${Object(c["c"])(t)}rem`},className:i()(d()({hidden:S,loading:w&&!E}),W)}),w&&y.a.createElement(H["a"],null)),e&&y.a.createElement("div",{className:"ud-text-xs image-upload-preview-with-crop--note--17PEX"},e)),y.a.createElement("div",{className:"ud-image-upload-form-wrapper"},p,y.a.createElement(l["b"],Object.assign({label:u||g("Add / Change File"),labelProps:!u?{className:"ud-sr-only"}:{}},D),_?y.a.createElement(s["a"],{onClick:this.updateCropPreview,disabled:w,udStyle:"secondary"},g("Crop image")):y.a.createElement(v["a"],{uploader:this.uploader,uploadLabel:m,onChangeSelectedFile:this.onChangeSelectedFile,disabled:f}),x&&y.a.createElement("div",{className:"ud-text-xs image-upload-preview-with-crop--error--2b6LX image-upload-preview-with-crop--note--17PEX"},x)),y.a.createElement("input",{type:"hidden",name:o,value:this.uploader.s3json})))}},V.propTypes={allowedExtensions:f.a.array.isRequired,imageUrl:f.a.string.isRequired,minHeight:f.a.number.isRequired,minWidth:f.a.number.isRequired,aspect:f.a.number,fieldName:f.a.string,fieldPurpose:f.a.string,uploadLabel:f.a.string,onCrop:f.a.func,onUploadCompleted:f.a.func,tips:f.a.any,adjacentTips:f.a.any,className:f.a.string,disabled:f.a.bool,gettext:f.a.func},V.defaultProps={aspect:undefined,fieldName:undefined,fieldPurpose:"",uploadLabel:undefined,onCrop:undefined,onUploadCompleted:undefined,tips:undefined,adjacentTips:undefined,className:undefined,disabled:false},V),babelHelpers.applyDecoratedDescriptor(z.prototype,"setImageAsLoaded",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"setImageAsLoaded"),z.prototype),babelHelpers.applyDecoratedDescriptor(z.prototype,"updateCropPreview",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"updateCropPreview"),z.prototype),babelHelpers.applyDecoratedDescriptor(z.prototype,"onUploadCompleted",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"onUploadCompleted"),z.prototype),babelHelpers.applyDecoratedDescriptor(z.prototype,"onUploadStarted",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"onUploadStarted"),z.prototype),babelHelpers.applyDecoratedDescriptor(z.prototype,"updateCrop",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"updateCrop"),z.prototype),babelHelpers.applyDecoratedDescriptor(z.prototype,"cropError",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"cropError"),z.prototype),babelHelpers.applyDecoratedDescriptor(z.prototype,"onChangeSelectedFile",[u["a"]],Object.getOwnPropertyDescriptor(z.prototype,"onChangeSelectedFile"),z.prototype),z))||B;var $=t["a"]=Object(o["k"])(K)},"./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/react-crop.global.less":function(e,t,r){},"./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/uploading-backdrop.less":function(e,t,r){e.exports={backdrop:"uploading-backdrop--backdrop--3DKxH"}},"./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/uploading-backdrop.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var i=r("./node_modules/react/index.js");var o=r.n(i);var a=r("./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/uploading-backdrop.less");var s=r.n(a);const l=()=>o.a.createElement("div",{className:"uploading-backdrop--backdrop--3DKxH"},o.a.createElement(n["a"],{size:"large"}));t["a"]=l},"./src/udemy/js/base-components/ungraduated/form/rich-text-editor/constants.js":function(e,t,r){"use strict";r.d(t,"n",(function(){return n}));r.d(t,"m",(function(){return i}));r.d(t,"b",(function(){return a}));r.d(t,"a",(function(){return s}));r.d(t,"f",(function(){return l}));r.d(t,"h",(function(){return c}));r.d(t,"g",(function(){return u}));r.d(t,"l",(function(){return d}));r.d(t,"d",(function(){return h}));r.d(t,"c",(function(){return m}));r.d(t,"e",(function(){return f}));r.d(t,"k",(function(){return g}));r.d(t,"j",(function(){return y}));r.d(t,"i",(function(){return b}));const n={ANNOUNCEMENT:"ANNOUNCEMENT",ARTICLE_LECTURE:"ARTICLE_LECTURE",ASSESSMENT_EDITOR:"ASSESSMENT_EDITOR",ASSIGNMENT:"ASSIGNMENT",ASSIGNMENT_QUESTION:"ASSIGNMENT_QUESTION",BOOKMARK:"BOOKMARK",CREATE_LAB_EDITOR:"CREATE_LAB_EDITOR",CODING_EXERCISE_INSTRUCTIONS:"CODING_EXERCISE_INSTRUCTIONS",COURSE_DESCRIPTION:"COURSE_DESCRIPTION",COURSE_MESSAGE:"COURSE_MESSAGE",LECTURE_DESCRIPTION:"LECTURE_DESCRIPTION",PRACTICE_TEST_DESCRIPTION:"PRACTICE_TEST_DESCRIPTION",PRACTICE_TEST_QUESTION:"PRACTICE_TEST_QUESTION",PRACTICE_TEST_QUESTION_EXPLANATION:"PRACTICE_TEST_QUESTION_EXPLANATION",MESSAGE:"MESSAGE",ORGANIZATION_CUSTOM_ERROR_MESSAGE:"ORGANIZATION_CUSTOM_ERROR_MESSAGE",Q_AND_A:"Q_AND_A",Q_AND_A_EDIT:"Q_AND_A_EDIT",QUIZ_ANSWER:"QUIZ_ANSWER",QUIZ_DESCRIPTION:"QUIZ_DESCRIPTION",QUIZ_QUESTION:"QUIZ_QUESTION",SIMPLE:"SIMPLE",TEST_VIDEO:"TEST_VIDEO",USER_DESCRIPTION:"USER_DESCRIPTION",FEATURED_QUESTIONS:"FEATURED_QUESTIONS",PLAN_EDITOR:"PLAN_EDITOR"};const i=new Set(["UNDO","REDO"]);const o=new Set(["UNDO","REDO","UNDO_FORMAT","ADD_HARD_BREAK","ADD_NON_BREAKING_SPACE","TOGGLE_STRONG","TOGGLE_EM"]);const a=new Set(["SET_PARAGRAPH","TOGGLE_BLOCKQUOTE","TOGGLE_HEADING","EXIT_FIRST_BLOCK","EXIT_LAST_BLOCK"]);const s=new Set(["PROMPT_ANCHOR","ADD_ANCHOR","UNDO_ANCHOR"]);const l=new Set(["PROMPT_IMAGE_UPLOAD","PROMPT_IMAGE_EDIT","ADD_IMAGE","EDIT_IMAGE","CLICK_IMAGE","RESIZE_IMAGE","DELETE_FIGURE","DELETE_IMAGE","EXIT_FIGURE","ARROW_UP_NEAR_IMAGE","ARROW_LEFT_NEAR_IMAGE","ARROW_DOWN_NEAR_IMAGE","ARROW_RIGHT_NEAR_IMAGE"]);const c=new Set(["PROMPT_MATH_INSERT","PROMPT_MATH_EDIT","ADD_MATH","CLICK_MATH","DELETE_MATH"]);const u=new Set(["WRAP_ORDERED_LIST","TOGGLE_ORDERED_LIST","WRAP_BULLET_LIST","TOGGLE_BULLET_LIST","LIFT_LIST_ITEM","SINK_LIST_ITEM","SPLIT_LIST_ITEM"]);const p=new Set(["TOGGLE_CODE","EXIT_FIRST_BLOCK","EXIT_LAST_BLOCK","CONVERT_TAB_TO_SPACES"]);const d=new Set(["PROMPT_ANCHOR","PROMPT_IMAGE_UPLOAD","TOGGLE_HTML_MODE"]);const h={[n.ANNOUNCEMENT]:new Set([...o,...s,...l,...u]),[n.ARTICLE_LECTURE]:new Set([...o,...s,...a,...p,...l,...u,"TOGGLE_HTML_MODE"]),[n.ASSESSMENT_EDITOR]:new Set([...o,...p,...u,...l,...c,"TOGGLE_HTML_MODE"]),[n.ASSIGNMENT]:new Set([...o,...s,...a,...p,...l,...u,"TOGGLE_HTML_MODE"]),[n.ASSIGNMENT_QUESTION]:o,[n.BOOKMARK]:new Set([...o,...a,...p,...u]),[n.CREATE_LAB_EDITOR]:new Set([...o,...a,...s,...p,...l,...u,"TOGGLE_HTML_MODE"]),[n.CODING_EXERCISE_INSTRUCTIONS]:new Set([...o,...s,...p,...l,...u]),[n.COURSE_DESCRIPTION]:new Set([...o,...u]),[n.COURSE_MESSAGE]:new Set([...o,...l,...u,...p]),[n.ORGANIZATION_CUSTOM_ERROR_MESSAGE]:new Set([...o,...s]),[n.LECTURE_DESCRIPTION]:new Set([...o,...u]),[n.PRACTICE_TEST_DESCRIPTION]:new Set([...o,...s,...p,...l,...u]),[n.PRACTICE_TEST_QUESTION]:new Set([...o,...p,...l,...u]),[n.PRACTICE_TEST_QUESTION_EXPLANATION]:new Set([...o,...s,...p,...l,...u]),[n.MESSAGE]:new Set([...o,...p,...l]),[n.Q_AND_A]:new Set([...o,...s,...p,...l]),[n.Q_AND_A_EDIT]:new Set([...o,...s,...p,...l,"TOGGLE_HTML_MODE"]),[n.QUIZ_ANSWER]:new Set([...o,...p]),[n.QUIZ_DESCRIPTION]:o,[n.QUIZ_QUESTION]:new Set([...o,...p,...l]),[n.SIMPLE]:o,[n.TEST_VIDEO]:new Set([...o,...s,...l,...u]),[n.USER_DESCRIPTION]:o,[n.FEATURED_QUESTIONS]:new Set([...o,...s,...p,...l,...u]),[n.PLAN_EDITOR]:new Set([...o,...s,...a,...p,...l,...u])};const m=2;const f=4;const g=1024*1024;const y=30;const b=y*g},"./src/udemy/js/base-components/ungraduated/form/rich-text-editor/helpers.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return l}));r.d(t,"f",(function(){return c}));r.d(t,"b",(function(){return u}));r.d(t,"d",(function(){return p}));r.d(t,"e",(function(){return d}));r.d(t,"a",(function(){return h}));r.d(t,"h",(function(){return m}));r.d(t,"g",(function(){return f}));r.d(t,"i",(function(){return g}));var n=r("./src/udemy/js/ud-mathjax/constants.js");var i=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/constants.js");const o=["http","https","ftp","ftps"];const a={};let s=null;function l(e){return i["d"][e]}function c(e){if(a[e]===undefined){switch(e){case"UPLOAD_API":a[e]="upload"in XMLHttpRequest.prototype;break;case"DROP_EVENT":a[e]="ondrop"in u().createElement("div")&&"FileReader"in window;break;default:throw new Error(`Unknown browser feature: ${e}`)}}return a[e]}function u(){if(!s){s=document.implementation.createHTMLDocument("title")}return s}function p(e,t){if(typeof t==="string"){return e.has(t)}for(const r of t){if(!e.has(r)){return false}}return true}function d(e){if(!e){return""}const t=u().createElement("div");t.innerHTML=e;return t.textContent}function h(e,t){let r=e;while(r){const e=(r.tagName||"").toLowerCase();if(r===t||e==="img"){return false}if(e==="a"){return r}r=r.parentNode}return null}function m(e,t,r,n,i){if(n&&!e){r.href=i("This field is required.")}else if(e&&e.startsWith("mailto:")){const n=e.split(":")[1];if(n.match(/.+@.+\...+/)){t.href=e}else{r.href=i("Enter a valid URL.")}}else if(e&&!e.startsWith("/")){const n=/([\w-]{1,63}\.[a-zA-Z-]{2,63}|(?:\d{1,3}\.){3}\d{1,3})/g;if(!e.match(n)){r.href=i("Enter a valid URL.")}else{const n=e.split("://")[0];if(n===e){t.href=`http://${e}`}else if(!o.includes(n.toLowerCase())){r.href=i("Enter a valid URL.")}}}}function f(e){let t=e.trim();if(t.startsWith(n["c"])){t=t.slice(n["c"].length)}if(t.endsWith(n["b"])){t=t.slice(0,-n["b"].length)}return t}function g(e){return`${n["c"]}${e}${n["b"]}`}},"./src/udemy/js/base-components/ungraduated/form/rich-text-editor/rich-text-editor.global.less":function(e,t,r){},"./src/udemy/js/base-components/ungraduated/form/rich-text-editor/rich-text-editor.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/react-form-components/dist/esm/with-counter/with-counter.js");var o=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var a=r("./node_modules/autobind-decorator/lib/esm/index.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/prop-types/index.js");var p=r.n(u);var d=r("./node_modules/react/index.js");var h=r.n(d);var m=r("./src/udemy/js/utils/noop.js");var f=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js");var g=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var y=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");var b=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var v=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var w=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var E=r("./node_modules/mobx/lib/mobx.module.js");var S=r("./src/udemy/js/ud-mathjax/load-mathjax.js");var _=r("./src/udemy/js/utils/handle-import-error.js");var x=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/helpers.js");var D,C,T,O,k;let P=(D=class e{constructor(e){let{gettext:t}=e;babelHelpers.initializerDefineProperty(this,"initial",C,this);babelHelpers.initializerDefineProperty(this,"isEditing",T,this);babelHelpers.initializerDefineProperty(this,"data",O,this);babelHelpers.initializerDefineProperty(this,"error",k,this);this.reset();this.gettext=t}reset(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{data:{},isEditing:false};const t={href:"",text:"",...e.data};Object(E["y"])(this,{initial:t,isEditing:e.isEditing,data:{...t},error:{}})}isValid(){var e;let t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{commit:true};const r={};const n={};Object(x["h"])(this.data.href,r,n,true,this.gettext);if(r.href&&!this.data.text){r.text=r.href}else if((e=this.data.text)!==null&&e!==void 0&&e.trim()){r.text=this.data.text}else{n.text=this.gettext("This field is required.")}const i=Object.keys(n).length===0;if(t.commit){this.error=n;if(i){this.data={...this.data,...r}}}return i}hasFieldChanged(e){return this.data[e]!==this.initial[e]}setIsEditing(e){this.isEditing=e}setData(e,t){this.data[e]=t}},C=babelHelpers.applyDecoratedDescriptor(D.prototype,"initial",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),T=babelHelpers.applyDecoratedDescriptor(D.prototype,"isEditing",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),O=babelHelpers.applyDecoratedDescriptor(D.prototype,"data",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),k=babelHelpers.applyDecoratedDescriptor(D.prototype,"error",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(D.prototype,"reset",[E["e"]],Object.getOwnPropertyDescriptor(D.prototype,"reset"),D.prototype),babelHelpers.applyDecoratedDescriptor(D.prototype,"isValid",[E["e"]],Object.getOwnPropertyDescriptor(D.prototype,"isValid"),D.prototype),babelHelpers.applyDecoratedDescriptor(D.prototype,"setIsEditing",[E["e"]],Object.getOwnPropertyDescriptor(D.prototype,"setIsEditing"),D.prototype),babelHelpers.applyDecoratedDescriptor(D.prototype,"setData",[E["e"]],Object.getOwnPropertyDescriptor(D.prototype,"setData"),D.prototype),D);var A=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/constants.js");var I,j,R,N;let L=(I=class e{constructor(e){let{gettext:t}=e;babelHelpers.initializerDefineProperty(this,"initial",j,this);babelHelpers.initializerDefineProperty(this,"data",R,this);babelHelpers.initializerDefineProperty(this,"error",N,this);this.gettext=t;this.reset()}reset(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{data:{}};const t={alt:"",caption:"",height:"",href:"",src:"",width:"",...e.data};Object(E["y"])(this,{initial:t,data:{...t},error:{}})}isValid(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{commit:true};const t={};const r={};Object(x["h"])(this.data.href,t,r,false,this.gettext);const n=Object.keys(r).length===0;if(e.commit){this.error=r;if(n){this.data={...this.data,...t}}}return n}hasFieldChanged(e){return this.data[e]!==this.initial[e]}setData(e,t){this.data[e]=t}},j=babelHelpers.applyDecoratedDescriptor(I.prototype,"initial",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),R=babelHelpers.applyDecoratedDescriptor(I.prototype,"data",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),N=babelHelpers.applyDecoratedDescriptor(I.prototype,"error",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(I.prototype,"reset",[E["e"]],Object.getOwnPropertyDescriptor(I.prototype,"reset"),I.prototype),babelHelpers.applyDecoratedDescriptor(I.prototype,"isValid",[E["e"]],Object.getOwnPropertyDescriptor(I.prototype,"isValid"),I.prototype),babelHelpers.applyDecoratedDescriptor(I.prototype,"setData",[E["e"]],Object.getOwnPropertyDescriptor(I.prototype,"setData"),I.prototype),I);var M,q;let U=(M=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isOverlayShown",q,this);this.getPos=e}setIsOverlayShown(e){this.isOverlayShown=e}},q=babelHelpers.applyDecoratedDescriptor(M.prototype,"isOverlayShown",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(M.prototype,"setIsOverlayShown",[E["e"]],Object.getOwnPropertyDescriptor(M.prototype,"setIsOverlayShown"),M.prototype),M);var H=r("./node_modules/axios/index.js");var F=r.n(H);var B=r("./src/udemy/js/utils/ud-api.js");var z=r("./src/udemy/js/utils/ud-api-stat.js");var V=r("./src/udemy/js/utils/ud-raven.js");var W,G,K,$;const X="rich_text_editor.upload.failed";let Y=(W=class e{constructor(e,t){let{gettext:r}=t;babelHelpers.initializerDefineProperty(this,"files",G,this);babelHelpers.initializerDefineProperty(this,"error",K,this);babelHelpers.initializerDefineProperty(this,"isDragActive",$,this);this._cancelSource=null;this.context=e;this.gettext=r}get hasError(){return Object.keys(this.error).length>0}get errorMessage(){const e=this.gettext;const t=Object.values(this.error);let r,n;for(r=0;r<t.length;r++){n=t[r];if(n==="UPLOAD_FAILURE"){return e("An error occurred uploading your file. Please try again later.")}if(n==="INVALID_IMAGE"){return interpolate(e("Images must be in .jpg, .png, or .gif format and smaller than "+"%(fileSizeInMegaBytes)smb"),{fileSizeInMegaBytes:A["j"]},true)}}return""}get progressPercentage(){let e=0;let t=0;this.files.forEach((r=>{e+=r.loaded;t+=r.size}));return t===0?null:Math.round(e/t*100)}_addError(e,t){this.error={...this.error,[e]:t}}setIsDragActive(e){this.isDragActive=e}uploadAndInsertImages(e,t){this._uploadToS3(e).then((()=>{t("ADD_IMAGE",{focusBeforeCommand:true})})).catch((e=>{V["a"].captureException(e)}))}_uploadToS3(e){const t=e.map((e=>({name:e.name,loaded:0,size:e.size,type:e.type,url:""})));this.error={};this.files=t;this._cancelSource=H["CancelToken"].source();return Promise.all(this.files.map(((t,r)=>{this._validateFile(t,r);if(this.error[r]){return Promise.resolve()}return B["f"].get("/s3-rich-text-upload-urls/",{cancelToken:this._cancelSource.token,params:{name:t.name,type:t.type,context:this.context.toLowerCase()}}).then((n=>{const i=decodeURIComponent(n.data);return F.a.put(i,e[r],{cancelToken:this._cancelSource.token,headers:{"Content-Type":t.type,"x-amz-acl":"public-read"},onUploadProgress:Object(E["e"])((e=>{t.loaded=e.loaded;t.size=e.total}))}).then(Object(E["e"])((()=>{t.loaded=t.size;t.url=i.split("?")[0]})))})).catch(Object(E["e"])((e=>{if(!Object(H["isCancel"])(e)){this._addError(r,"UPLOAD_FAILURE")}})))})))}_validateFile(e,t){const r=e.type.startsWith("image");const n=e.size;if(!r||n>A["i"]){this._addError(t,"INVALID_IMAGE")}if(!r){z["b"].increment(X,{error:"not-image"})}else if(n>30*A["k"]&&n<=50*A["k"]){z["b"].increment(X,{error:"size-30-50mbs"})}else if(n>50*A["k"]&&n<=100*A["k"]){z["b"].increment(X,{error:"size-50-100mbs"})}else if(n>100*A["k"]){z["b"].increment(X,{error:"size->100mbs"})}}resetFiles(){this.files=[];if(this._cancelSource){this._cancelSource.cancel()}}resetError(){this.error={}}},G=babelHelpers.applyDecoratedDescriptor(W.prototype,"files",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),K=babelHelpers.applyDecoratedDescriptor(W.prototype,"error",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),$=babelHelpers.applyDecoratedDescriptor(W.prototype,"isDragActive",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(W.prototype,"hasError",[E["g"]],Object.getOwnPropertyDescriptor(W.prototype,"hasError"),W.prototype),babelHelpers.applyDecoratedDescriptor(W.prototype,"errorMessage",[E["g"]],Object.getOwnPropertyDescriptor(W.prototype,"errorMessage"),W.prototype),babelHelpers.applyDecoratedDescriptor(W.prototype,"progressPercentage",[E["g"]],Object.getOwnPropertyDescriptor(W.prototype,"progressPercentage"),W.prototype),babelHelpers.applyDecoratedDescriptor(W.prototype,"setIsDragActive",[E["e"]],Object.getOwnPropertyDescriptor(W.prototype,"setIsDragActive"),W.prototype),babelHelpers.applyDecoratedDescriptor(W.prototype,"_uploadToS3",[E["e"]],Object.getOwnPropertyDescriptor(W.prototype,"_uploadToS3"),W.prototype),babelHelpers.applyDecoratedDescriptor(W.prototype,"resetFiles",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(W.prototype,"resetFiles"),W.prototype),babelHelpers.applyDecoratedDescriptor(W.prototype,"resetError",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(W.prototype,"resetError"),W.prototype),W);var Q,J;let Z=(Q=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isOverlayShown",J,this);this.getPos=e;this.typesetHandler=null}setIsOverlayShown(e){this.isOverlayShown=e}},J=babelHelpers.applyDecoratedDescriptor(Q.prototype,"isOverlayShown",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Q.prototype,"setIsOverlayShown",[E["e"]],Object.getOwnPropertyDescriptor(Q.prototype,"setIsOverlayShown"),Q.prototype),Q);var ee,te,re,ne;let ie=(ee=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"mathRepresentation",te,this);babelHelpers.initializerDefineProperty(this,"isInline",re,this);babelHelpers.initializerDefineProperty(this,"isEditing",ne,this);this.context=e}setIsEditing(e){this.isEditing=e}setMathRepresentation(e){this.mathRepresentation=e}setIsInline(e){this.isInline=e}},te=babelHelpers.applyDecoratedDescriptor(ee.prototype,"mathRepresentation",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),re=babelHelpers.applyDecoratedDescriptor(ee.prototype,"isInline",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ne=babelHelpers.applyDecoratedDescriptor(ee.prototype,"isEditing",[E["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(ee.prototype,"setIsEditing",[E["e"]],Object.getOwnPropertyDescriptor(ee.prototype,"setIsEditing"),ee.prototype),babelHelpers.applyDecoratedDescriptor(ee.prototype,"setMathRepresentation",[E["e"]],Object.getOwnPropertyDescriptor(ee.prototype,"setMathRepresentation"),ee.prototype),babelHelpers.applyDecoratedDescriptor(ee.prototype,"setIsInline",[E["e"]],Object.getOwnPropertyDescriptor(ee.prototype,"setIsInline"),ee.prototype),ee);var oe;let ae=null;let se=null;function le(){ae=null}let ce=(oe=class e{constructor(e,t){let{theme:r}=e;let{gettext:n}=t;this.gettext=n;Object(E["l"])(this,{_activeImageEditorId:null,_activeMathEditorId:null,_imageEditors:{},_mathEditor:{},activeFormats:{TOGGLE_STRONG:false,TOGGLE_EM:false},anchorForm:new P({gettext:this.gettext}),commands:{},editorState:null,editorValue:"",features:Object(x["c"])(r),isEditorFocused:false,_hasEditorFocusedAtLeastOnce:false,htmlMode:Object(E["l"])({},{docChanged:false,show:false,editorState:null,serializer:null},{editorState:E["t"].ref,serializer:E["t"].ref}),imageEditForm:new L({gettext:this.gettext}),imageUploader:new Y(r,{gettext:this.gettext}),mathForm:new ie(r),isAnchorTooltipShown:false,isEditorLibLoaded:!!ae,isEditorRendered:false,isMathjaxLibLoaded:!!se,isResizingImage:false,activeModal:null,serializer:null,showPlaceholder:true},{_imageEditors:E["t"].ref,anchorForm:E["t"].ref,commands:E["t"].ref,editorState:E["t"].ref,editorValue:E["t"].ref,features:E["t"].ref,imageEditForm:E["t"].ref,imageUploader:E["t"].ref,serializer:E["t"].ref})}get editorValueTextContent(){return Object(x["e"])(this.editorValue)}get editorLib(){return ae}get mathjaxLib(){return se}_setEditorLib(e){ae=e;this.isEditorLibLoaded=true;return e}_setMathjaxLib(e){se=e;this.isMathjaxLibLoaded=true;return e}loadEditorLib(){return Promise.all([r.e("vendors~ud-prosemirror"),r.e("ud-prosemirror")]).then(r.bind(null,"./src/udemy/js/ud-prosemirror/index.js")).then(this._setEditorLib).catch(_["a"])}loadMathjaxLib(){return Object(S["a"])().then(this._setMathjaxLib).catch(_["a"])}initializeEditorState(e,t){const r=this.editorLib.buildSchema(this.features);this.commands=this.editorLib.buildCommands(this.features,r,this);const n=this.editorLib.buildPlugins(r,this.commands);this.serializer=new this.editorLib.helpers.RichTextSerializer(r,{preserveWhitespace:"full"});const i=this.serializer.toInternalValue(e);const o=this.editorLib.EditorState.create({doc:i,schema:r,plugins:n});this.syncWithEditor(o,null,t)}initializeHTMLModeEditorState(){const e=this.editorLib.buildSchema(A["m"]);const t=this.editorLib.buildCommands(A["m"],e,this);const r=this.editorLib.buildPlugins(e,t);this.htmlMode.serializer=new this.editorLib.helpers.PlainTextSerializer(e,{preserveWhitespace:"full"});this.syncWithHTMLModeEditor(this.editorLib.EditorState.create({schema:e,plugins:r}),null)}setEditorRenderedTrue(){this.isEditorRendered=true}showAnchorTooltip(e){this._syncAnchorFormWithEditor(e);this.isAnchorTooltipShown=true}hideAnchorTooltip(){this.isAnchorTooltipShown=false}setIsResizingImage(e){this.isResizingImage=e}registerImageEditor(e,t){this._imageEditors[e]=new U(t)}unregisterImageEditor(e){delete this._imageEditors[e];if(e===this._activeImageEditorId){this._activeImageEditorId=null}}getImageEditor(e){return this._imageEditors[e]}get activeImageEditor(){return this._imageEditors[this._activeImageEditorId]||null}setActiveImageEditor(e){if(this.activeImageEditor){this.activeImageEditor.setIsOverlayShown(false)}this._activeImageEditorId=e;if(this.activeImageEditor){this.activeImageEditor.setIsOverlayShown(true)}}registerMathEditor(e,t,r){this._mathEditor[e]=new Z(t);this._mathEditor[e].typesetHandler=r}unregisterMathEditor(e){delete this._mathEditor[e];if(e===this._activeMathEditorId){this._activeMathEditorId=null}}getMathEditor(e){return this._mathEditor[e]}get activeMathEditor(){return this._mathEditor[this._activeMathEditorId]||null}setActiveMathEditor(e){if(this.activeMathEditor){this.activeMathEditor.setIsOverlayShown(false);this.activeMathEditor.typesetHandler()}this._activeMathEditorId=e;if(this.activeMathEditor){this.activeMathEditor.setIsOverlayShown(true)}}setEditorFocus(e){this.isEditorFocused=e}syncWithEditor(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const n=!t;this.editorState=e;if(r){this._hasEditorFocusedAtLeastOnce=true}if(n||t.docChanged){this.editorValue=this.serializer.toText(e.doc);this.hideAnchorTooltip()}const i=(e.storedMarks||[]).length>0;this.showPlaceholder=e.doc.content.size<=A["c"]&&!i;const{isMarkActive:o}=this.editorLib.helpers;const a=e.schema.marks;Object.assign(this.activeFormats,{TOGGLE_STRONG:this._hasEditorFocusedAtLeastOnce&&this.features.has("TOGGLE_STRONG")&&o(e,a.strong),TOGGLE_EM:this._hasEditorFocusedAtLeastOnce&&this.features.has("TOGGLE_EM")&&o(e,a.em)});this._syncAnchorFormWithEditor(e,{parseFormData:false})}_syncAnchorFormWithEditor(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{parseFormData:true};if(!Object(x["d"])(this.features,A["a"])){return}const{parseAnchorForm:r}=this.editorLib.helpers;const{text:n,href:i,hasAnchor:o}=r(e,t);if(t.parseFormData){this.anchorForm.reset({data:{text:n,href:i},isEditing:o})}else{this.anchorForm.setIsEditing(o)}}openAnchorModal(e){this.activeModal="ANCHOR";this._syncAnchorFormWithEditor(e);this.hideAnchorTooltip()}openImageUploadModal(){this.activeModal="IMAGE_UPLOAD";this.imageUploader.resetFiles();this.imageUploader.resetError()}openImageEditModal(e){const t=this.activeImageEditor;const{parseImageEditor:r}=this.editorLib.helpers;const{image:n,link:i,caption:o}=r(e,t.getPos());this.imageEditForm.reset({data:{src:n.attrs.src||"",alt:n.attrs.alt||"",href:i?i.attrs.href:"",caption:o?o.textContent:""}});t.setIsOverlayShown(false);this.activeModal="IMAGE_EDIT"}openMathModal(){this.activeModal="MATH_MODAL"}closeModal(){if(this.activeModal==="IMAGE_UPLOAD"){this.imageUploader.resetError()}this.activeModal=null}toggleHTMLMode(){this.htmlMode.show=!this.htmlMode.show;if(this.htmlMode.show){this.htmlMode.docChanged=false}}syncWithHTMLModeEditor(e,t){this.htmlMode.editorState=e;if(t&&t.docChanged){this.htmlMode.docChanged=true;this.showPlaceholder=e.doc.content.size<=A["c"];this.editorValue=this.htmlMode.serializer.toText(e.doc)}}},babelHelpers.applyDecoratedDescriptor(oe.prototype,"editorValueTextContent",[E["g"]],Object.getOwnPropertyDescriptor(oe.prototype,"editorValueTextContent"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"_setEditorLib",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"_setEditorLib"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"_setMathjaxLib",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"_setMathjaxLib"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"initializeEditorState",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"initializeEditorState"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"initializeHTMLModeEditorState",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"initializeHTMLModeEditorState"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"setEditorRenderedTrue",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"setEditorRenderedTrue"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"showAnchorTooltip",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"showAnchorTooltip"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"hideAnchorTooltip",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"hideAnchorTooltip"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"setIsResizingImage",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"setIsResizingImage"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"unregisterImageEditor",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"unregisterImageEditor"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"setActiveImageEditor",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"setActiveImageEditor"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"unregisterMathEditor",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"unregisterMathEditor"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"setActiveMathEditor",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"setActiveMathEditor"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"setEditorFocus",[E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"setEditorFocus"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"syncWithEditor",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"syncWithEditor"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"_syncAnchorFormWithEditor",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"_syncAnchorFormWithEditor"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"openAnchorModal",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"openAnchorModal"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"openImageUploadModal",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"openImageUploadModal"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"openImageEditModal",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"openImageEditModal"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"openMathModal",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"openMathModal"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"closeModal",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"closeModal"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"toggleHTMLMode",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"toggleHTMLMode"),oe.prototype),babelHelpers.applyDecoratedDescriptor(oe.prototype,"syncWithHTMLModeEditor",[a["a"],E["e"]],Object.getOwnPropertyDescriptor(oe.prototype,"syncWithHTMLModeEditor"),oe.prototype),oe);var ue,pe,de;let he=Object(c["f"])(ue=(pe=(de=class e extends d["Component"]{onSubmit(e){e.stopPropagation();e.preventDefault();this.props.doCommand("ADD_ANCHOR",{focusBeforeCommand:true})}onChangeTextField(e){this.props.model.anchorForm.setData(e.target.name,e.target.value)}render(){const{model:e}=this.props;const t=e.anchorForm;return h.a.createElement(y["a"],{className:"udlite-in-udheavy",isOpen:e.activeModal==="ANCHOR",onClose:e.closeModal,title:t.isEditing?this.props.gettext("Edit link"):this.props.gettext("Insert link")},h.a.createElement("form",{className:"rt-modal-form",onSubmit:this.onSubmit,"data-purpose":"anchor-form"},h.a.createElement(b["b"],{label:this.props.gettext("URL"),note:t.error.href||null,validationState:t.error.href?"error":"neutral"},h.a.createElement(v["b"],{"data-dialog-auto-focus":!f["b"],required:true,name:"href",value:t.data.href,onChange:this.onChangeTextField,"data-purpose":"href-field"})),h.a.createElement(b["b"],{label:this.props.gettext("Text"),note:t.error.text||null,validationState:t.error.text?"error":"neutral"},h.a.createElement(v["b"],{name:"text",value:t.data.text,onChange:this.onChangeTextField,"data-purpose":"text-field"})),h.a.createElement(w["a"],null,h.a.createElement(g["a"],{udStyle:"ghost",onClick:e.closeModal,"data-purpose":"anchor-form-cancel"},this.props.gettext("Cancel")),h.a.createElement(g["a"],{type:"submit"},this.props.gettext("Insert")))))}},de.propTypes={doCommand:p.a.func.isRequired,model:p.a.instanceOf(ce).isRequired,gettext:p.a.func},de),babelHelpers.applyDecoratedDescriptor(pe.prototype,"onSubmit",[a["a"]],Object.getOwnPropertyDescriptor(pe.prototype,"onSubmit"),pe.prototype),babelHelpers.applyDecoratedDescriptor(pe.prototype,"onChangeTextField",[a["a"]],Object.getOwnPropertyDescriptor(pe.prototype,"onChangeTextField"),pe.prototype),pe))||ue;const me=Object(n["k"])(he);var fe=me;var ge=r("./node_modules/@udemy/icons/dist/close.ud-icon");var ye=r.n(ge);var be=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var ve=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.react-component.js");var we,Ee,Se;const _e=()=>null;let xe=Object(c["f"])(we=(Ee=(Se=class e extends d["Component"]{editAnchor(){this.props.doCommand("PROMPT_ANCHOR",{focusOnEditor:false})}undoAnchor(){this.props.doCommand("UNDO_ANCHOR")}render(){const e=this.props.getTarget();if(!this.props.model.isAnchorTooltipShown||!e){return null}const t=this.props.model.anchorForm.data.href;return h.a.createElement(ve["a"],{detachFromTarget:true,withPadding:false,placement:"bottom",trigger:h.a.createElement(_e,{id:e.id}),isOpen:true},h.a.createElement("div",{className:"rt-anchor-tooltip udlite-in-udheavy"},h.a.createElement("span",{className:"rt-anchor-tooltip-text"},t?h.a.createElement("a",{className:"ud-text-sm",href:t,target:"_blank",rel:"noopener noreferrer"},t):null,t?" | ":null,h.a.createElement(g["a"],{udStyle:"link",typography:"ud-text-sm",onClick:this.editAnchor,"data-purpose":"anchor-tooltip-edit"},this.props.gettext("Edit"))," | ",h.a.createElement(g["a"],{udStyle:"link",typography:"ud-text-sm",onClick:this.undoAnchor,"data-purpose":"anchor-tooltip-unlink"},this.props.gettext("Unlink"))),h.a.createElement(be["a"],{className:"ud-link-neutral",udStyle:"ghost",onClick:this.props.onHide},h.a.createElement(ye.a,{label:this.props.gettext("Close")}))))}},Se.propTypes={getTarget:p.a.func.isRequired,doCommand:p.a.func.isRequired,model:p.a.instanceOf(ce).isRequired,onHide:p.a.func.isRequired,gettext:p.a.func},Se),babelHelpers.applyDecoratedDescriptor(Ee.prototype,"editAnchor",[a["a"]],Object.getOwnPropertyDescriptor(Ee.prototype,"editAnchor"),Ee.prototype),babelHelpers.applyDecoratedDescriptor(Ee.prototype,"undoAnchor",[a["a"]],Object.getOwnPropertyDescriptor(Ee.prototype,"undoAnchor"),Ee.prototype),Ee))||we;const De=Object(n["k"])(xe);var Ce=De;var Te,Oe,ke;let Pe=Object(c["f"])(Te=(Oe=(ke=class e extends d["Component"]{componentDidMount(){const e=this;const{model:t,getEditorProps:r,onWillMount:n,onDidMount:i}=this.props;n();const o=r()||{};this.view=new t.editorLib.EditorView(this.ref,{attributes(){return{placeholder:e.props.placeholder,class:"rt-scaffolding",style:`min-height:${e.props.minHeight};`,role:"textbox","aria-multiline":true,"aria-label":e.props.placeholder}},editable(){return e.props.contentEditable},...o});i(this.view)}componentDidUpdate(t){const r=e.contentEditablePropNames.some((e=>t[e]!==this.props[e]));if(r){this.view.updateState(this.view.state)}}componentWillUnmount(){if(this.view){this.view.destroy()}}setRef(e){this.ref=e}render(){const{model:e,dataPurpose:t,editorMode:r}=this.props;const n=r==="WYSIWYG"&&!e.htmlMode.show||r==="HTML"&&e.htmlMode.show;return h.a.createElement("div",{className:l()("rt-editor ud-text-md",{"rt-hidden":!n,"rt-editor--empty":e.showPlaceholder,"rt-editor--html-mode":r==="HTML","rt-editor--resizing-image":e.isResizingImage,"rt-editor--wysiwyg-mode":r==="WYSIWYG"}),"data-purpose":t,ref:this.setRef})}},ke.contentEditablePropNames=["contentEditable","minHeight","placeholder"],ke.propTypes={model:p.a.instanceOf(ce).isRequired,contentEditable:p.a.bool.isRequired,minHeight:p.a.string.isRequired,placeholder:p.a.string.isRequired,getEditorProps:p.a.func,onWillMount:p.a.func,onDidMount:p.a.func,editorMode:p.a.oneOf(["WYSIWYG","HTML"]),dataPurpose:p.a.string},ke.defaultProps={getEditorProps:m["a"],onWillMount:m["a"],onDidMount:m["a"],editorMode:"WYSIWYG",dataPurpose:""},ke),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"setRef",[a["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"setRef"),Oe.prototype),Oe))||Te;var Ae=r("./src/udemy/js/utils/escape/escape-html.js");var Ie,je;const Re=e=>h.a.createElement(Le,Object.assign({},e,{show:e.model.htmlMode.show}));Re.propTypes={model:p.a.instanceOf(ce).isRequired,contentEditable:p.a.bool.isRequired,minHeight:p.a.string.isRequired,placeholder:p.a.string.isRequired,onHide:p.a.func.isRequired,onValueChange:p.a.func.isRequired};var Ne=Object(c["f"])(Re);let Le=(Ie=(je=class e extends d["Component"]{componentDidUpdate(e){const t=this.props.model.htmlMode.serializer;if(this.props.show&&!e.show){const e=this.formatValue(this.props.model.editorValue);const r=t.toInternalValue(e);this.props.model.editorLib.helpers.overrideDoc(this.view,r);this.view.focus()}else if(!this.props.show&&e.show){this.props.onHide()}}getEditorProps(){const e=this.props.model.htmlMode;const t=e.serializer.fromDOMSerializer;return{state:e.editorState,dispatchTransaction:this.dispatchTransaction,clipboardTextParser:t.parseClipboardText,domParser:t,transformPastedHTML:t.transformPastedHTML}}onEditorWillMount(){this.props.model.initializeHTMLModeEditorState()}onEditorDidMount(e){this.view=e}dispatchTransaction(e){if(!this.props.contentEditable){return}const t=this.view.state.apply(e);this.view.updateState(t);const r=this.props.model.editorValue;this.props.model.syncWithHTMLModeEditor(t,e);if(r!==this.props.model.editorValue){this.props.onValueChange(this.props.model.editorValue)}}formatValue(e){const t=Object(x["b"])().createElement("div");t.innerHTML=e;const r=[];for(let e=0;e<t.childNodes.length;e++){t.childNodes[e].outerHTML.split("\n").forEach((e=>{r.push(`<p>${Object(Ae["a"])(e)}</p>`)}))}return r.join("")}render(){const{model:e,contentEditable:t,minHeight:r,placeholder:n}=this.props;return h.a.createElement(Pe,{model:e,contentEditable:t,minHeight:r,placeholder:n,getEditorProps:this.getEditorProps,onWillMount:this.onEditorWillMount,onDidMount:this.onEditorDidMount,editorMode:"HTML",dataPurpose:"html-mode"})}},je.propTypes={...Re.propTypes,show:p.a.bool.isRequired},je),babelHelpers.applyDecoratedDescriptor(Ie.prototype,"getEditorProps",[a["a"]],Object.getOwnPropertyDescriptor(Ie.prototype,"getEditorProps"),Ie.prototype),babelHelpers.applyDecoratedDescriptor(Ie.prototype,"onEditorWillMount",[a["a"]],Object.getOwnPropertyDescriptor(Ie.prototype,"onEditorWillMount"),Ie.prototype),babelHelpers.applyDecoratedDescriptor(Ie.prototype,"onEditorDidMount",[a["a"]],Object.getOwnPropertyDescriptor(Ie.prototype,"onEditorDidMount"),Ie.prototype),babelHelpers.applyDecoratedDescriptor(Ie.prototype,"dispatchTransaction",[a["a"]],Object.getOwnPropertyDescriptor(Ie.prototype,"dispatchTransaction"),Ie.prototype),Ie);var Me=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var qe,Ue,He;let Fe=Object(c["f"])(qe=(Ue=(He=class e extends d["Component"]{onChangeTextField(e){this.props.model.imageEditForm.setData(e.target.name,e.target.value)}onSubmit(e){e.stopPropagation();e.preventDefault();this.props.doCommand("EDIT_IMAGE",{focusBeforeCommand:true})}onDelete(){this.props.doCommand("DELETE_IMAGE")}renderContent(){const{hasAnchorFeatures:e,model:t,gettext:r}=this.props;const n=t.imageEditForm;return h.a.createElement("div",{className:"rt-image-edit-modal__content"},h.a.createElement("div",{className:"rt-image-edit-modal__img"},h.a.createElement(Me["a"],{src:n.data.src,alt:n.data.alt,"data-purpose":"src-field",lazy:false,height:"unset",width:"unset"})),h.a.createElement("div",{className:"rt-flex"},h.a.createElement(b["b"],{label:r("Title"),note:n.error.alt||null,validationState:n.error.alt?"error":"neutral"},h.a.createElement(v["b"],{"data-dialog-auto-focus":!f["b"],name:"alt",value:n.data.alt,onChange:this.onChangeTextField,"data-purpose":"alt-field"})),h.a.createElement(b["b"],{label:r("Caption"),note:n.error.caption||null,validationState:n.error.caption?"error":"neutral"},h.a.createElement(v["b"],{name:"caption",value:n.data.caption,onChange:this.onChangeTextField,"data-purpose":"caption-field"})),e?h.a.createElement(b["b"],{label:r("Link"),note:n.error.href||null,validationState:n.error.href?"error":"neutral"},h.a.createElement(v["b"],{name:"href",value:n.data.href,onChange:this.onChangeTextField,"data-purpose":"href-field"})):null))}render(){const{model:e,gettext:t}=this.props;return h.a.createElement(y["a"],{className:"udlite-in-udheavy",isOpen:e.activeModal==="IMAGE_EDIT",onClose:e.closeModal,title:t("Edit")},h.a.createElement("form",{className:"rt-modal-form",onSubmit:this.onSubmit,"data-purpose":"image-edit-form"},this.renderContent(),h.a.createElement(w["a"],null,h.a.createElement(g["a"],{udStyle:"secondary",onClick:this.onDelete,"data-purpose":"delete-image-btn"},t("Delete")),h.a.createElement("div",{className:"rt-flex"}),h.a.createElement(g["a"],{udStyle:"ghost",onClick:e.closeModal,"data-purpose":"image-edit-form-cancel"},t("Cancel")),h.a.createElement(g["a"],{type:"submit"},t("Save")))))}},He.propTypes={doCommand:p.a.func.isRequired,hasAnchorFeatures:p.a.bool.isRequired,model:p.a.instanceOf(ce).isRequired,gettext:p.a.func},He),babelHelpers.applyDecoratedDescriptor(Ue.prototype,"onChangeTextField",[a["a"]],Object.getOwnPropertyDescriptor(Ue.prototype,"onChangeTextField"),Ue.prototype),babelHelpers.applyDecoratedDescriptor(Ue.prototype,"onSubmit",[a["a"]],Object.getOwnPropertyDescriptor(Ue.prototype,"onSubmit"),Ue.prototype),babelHelpers.applyDecoratedDescriptor(Ue.prototype,"onDelete",[a["a"]],Object.getOwnPropertyDescriptor(Ue.prototype,"onDelete"),Ue.prototype),Ue))||qe;var Be=Object(n["k"])(Fe);var ze=r("./node_modules/react-dom/index.js");var Ve=r.n(ze);var We=r("./node_modules/@udemy/design-system-utils/dist/esm/root-close-wrapper/root-close-wrapper.react-component.js");var Ge=r("./src/udemy/js/base-components/ungraduated/resizer/resizer.react-component.js");var Ke,$e,Xe;let Ye=0;let Qe=Object(c["f"])(Ke=($e=(Xe=class e extends d["Component"]{constructor(e,t){super(e,t);Ye+=1;this.id=Ye;this.props.model.registerImageEditor(this.id,this.props.getPos)}componentWillUnmount(){this.props.model.unregisterImageEditor(this.id)}get imageEditorModel(){return this.props.model.getImageEditor(this.id)}onRootClose(){if(this.imageEditorModel){this.imageEditorModel.setIsOverlayShown(false)}}onMouseDown(e){e.preventDefault()}onImageClick(e){e.stopPropagation();e.preventDefault();this.props.model.setActiveImageEditor(this.id);this.props.doCommand("CLICK_IMAGE",{focusOnEditor:false})}onEditButtonClick(){this.props.model.setActiveImageEditor(this.id);this.props.doCommand("PROMPT_IMAGE_EDIT",{focusOnEditor:false})}onResizeStart(){this.props.model.setIsResizingImage(true)}onResizeEnd(){this.props.model.setIsResizingImage(false);this.props.model.imageEditForm.reset({data:{width:this.imgRef.clientWidth,height:this.imgRef.clientHeight}});this.props.doCommand("RESIZE_IMAGE",{focusOnEditor:false})}onResize(e,t){if(this.imgRef.naturalWidth>0&&this.imgRef.naturalHeight>0){const e=this.imgRef.naturalWidth/this.imgRef.naturalHeight;let r,n;if(e>1){r=Math.max(100,Math.round(t.width))}else{n=Math.max(100,Math.round(t.height));r=n*e}this.imgRef.style.width=`${r}px`;n=Math.round(this.imgRef.clientWidth/e);this.imgRef.style.height=`${n}px`}}setImgRef(e){this.imgRef=e?Ve.a.findDOMNode(e):null}renderImage(){const{node:e}=this.props;return h.a.createElement(Me["a"],Object.assign({ref:this.setImgRef},e.attrs,{draggable:false,alt:e.attrs.alt||"",title:e.attrs.alt||"",role:"presentation",onClick:this.onImageClick,onMouseDown:this.onMouseDown,lazy:false,height:parseFloat(e.attrs.height)||"unset",width:parseFloat(e.attrs.width)||"unset"}))}renderEditMode(){const{gettext:e}=this.props;const t=f["b"]?{onTouchStart:this.onEditButtonClick}:{onClick:this.onEditButtonClick};return h.a.createElement(We["b"],{onRootClose:this.onRootClose},h.a.createElement(Ge["a"],{className:"rt-image-editor","data-purpose":"edit-image-container",edges:{right:".js-resizer-handle",bottom:".js-resizer-handle"},onStart:this.onResizeStart,onMove:this.onResize,onEnd:this.onResizeEnd},this.renderImage(),h.a.createElement("div",{className:"rt-node-editor__overlay"},h.a.createElement(g["a"],Object.assign({className:"rt-node-editor__overlay-btn",udStyle:"primary",size:"xsmall","data-purpose":"edit-image-btn"},t),e("Edit"))),h.a.createElement("div",{"aria-hidden":"true",className:l()({"js-resizer-handle":true,"rt-image-editor__resizer-handle":true,"rt-image-editor__resizer-handle--mobile":f["b"]})})))}render(){return this.imageEditorModel.isOverlayShown?this.renderEditMode():this.renderImage()}},Xe.propTypes={node:p.a.object.isRequired,getPos:p.a.func.isRequired,model:p.a.instanceOf(ce).isRequired,doCommand:p.a.func.isRequired,gettext:p.a.func},Xe),babelHelpers.applyDecoratedDescriptor($e.prototype,"onRootClose",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onRootClose"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"onMouseDown",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onMouseDown"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"onImageClick",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onImageClick"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"onEditButtonClick",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onEditButtonClick"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"onResizeStart",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onResizeStart"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"onResizeEnd",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onResizeEnd"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"onResize",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"onResize"),$e.prototype),babelHelpers.applyDecoratedDescriptor($e.prototype,"setImgRef",[a["a"]],Object.getOwnPropertyDescriptor($e.prototype,"setImgRef"),$e.prototype),$e))||Ke;var Je=Object(n["k"])(Qe);class Ze{constructor(e,t,r,n,i){this.dom=document.createElement("div");this.dom.style.display="inline-block";this.dom.setAttribute("data-purpose","image-editor-node-view");const o=h.a.createElement(Je,{node:e,getPos:r,model:n,doCommand:i});Ve.a.render(o,this.dom)}ignoreMutation(){return true}stopEvent(e){const t=e.type.toLowerCase();return!(t.startsWith("drag")||t.startsWith("drop"))}destroy(){Ve.a.unmountComponentAtNode(this.dom);this.dom=null}}var et=r("./node_modules/@udemy/react-messaging-components/dist/esm/alert-banner/alert-banner.react-component.js");const tt=Object(c["f"])((e=>{let{model:t,hideWhenActiveModal:r=false}=e;const{gettext:i}=Object(n["j"])();if(!t.imageUploader.hasError||r&&t.activeModal){return null}return h.a.createElement(et["a"],{udStyle:"error",className:"rt-menu-bar-alert",showIcon:false,title:t.imageUploader.errorMessage,ctaText:i("Dismiss"),dismissButtonProps:false,onAction:t.imageUploader.resetError})}));tt.propTypes={model:p.a.instanceOf(ce).isRequired,hideWhenActiveModal:p.a.bool};tt.displayName="ImageUploadErrorAlert";var rt=tt;var nt=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var it=r("./node_modules/@udemy/icons/dist/image.ud-icon");var ot=r.n(it);var at=r("./node_modules/@udemy/react-messaging-components/dist/esm/meter/meter.react-component.js");const st=Object(c["f"])((e=>{let{model:t,hideWhenActiveModal:r=false}=e;const{gettext:i}=Object(n["j"])();if(t.imageUploader.progressPercentage===null||r&&t.activeModal){return null}const o=Object(x["f"])("UPLOAD_API");return h.a.createElement(at["a"],{className:"rt-image-upload-progress-bar","data-purpose":"image-upload-progress-bar",value:o?t.imageUploader.progressPercentage:100,min:0,max:100,label:i("%(percent)s% complete")})}));st.propTypes={model:p.a.instanceOf(ce).isRequired,hideWhenActiveModal:p.a.bool};st.displayName="ImageUploadProgressBar";var lt=st;var ct,ut,pt;class dt extends d["Component"]{constructor(){super(...arguments);this.id=Object(nt["a"])("rich-text-editor-image-uploader")}render(){const{children:e,...t}=this.props;return h.a.createElement("label",{htmlFor:this.id},h.a.createElement("input",Object.assign({},t,{id:this.id,type:"file",multiple:true,accept:"image/*",className:"ud-sr-only"})),h.a.createElement("span",{className:"rt-image-uploader__label ud-link-underline"},e))}}let ht=Object(c["f"])(ct=(ut=(pt=class e extends d["Component"]{onFileSelected(e){const t=[...e.target.files];this.props.model.imageUploader.uploadAndInsertImages(t,this.props.doCommand)}onDragActive(e){e.preventDefault();this.props.model.imageUploader.setIsDragActive(true)}onDragInactive(e){e.preventDefault();this.props.model.imageUploader.setIsDragActive(false)}onDrop(e){e.preventDefault();if(e.dataTransfer&&e.dataTransfer.files){const{doCommand:t,model:r}=this.props;const n=r.imageUploader;const i=[...e.dataTransfer.files];n.setIsDragActive(false);n.uploadAndInsertImages(i,t)}}render(){const{model:e,gettext:t}=this.props;const r=e.imageUploader;const i=Object(x["f"])("DROP_EVENT");const o=i?{onDragEnter:this.onDragActive,onDragOver:this.onDragActive,onDragLeave:this.onDragInactive,onDragEnd:this.onDragInactive,onDrop:this.onDrop}:{};const a={onChange:this.onFileSelected};return h.a.createElement(y["a"],{className:l()("udlite-in-udheavy rt-image-uploader",{"rt-image-uploader--drag-active":i&&r.isDragActive}),isOpen:e.activeModal==="IMAGE_UPLOAD",onClose:e.closeModal,title:t("Upload an image")},h.a.createElement("form",Object.assign({className:"rt-image-uploader__form","data-purpose":"image-upload-form"},o),h.a.createElement(lt,{model:e}),h.a.createElement("div",null,h.a.createElement(ot.a,{label:false,className:"rt-image-uploader__icon"})),i?h.a.createElement(n["b"],{html:t('Drag and drop an image or <a class="uploader">select a file</a>'),interpolate:{uploader:h.a.createElement(dt,a)}}):h.a.createElement(dt,a,t("Select a file")),e.imageUploader.hasError?h.a.createElement("div",{className:"rt-image-uploader__error","data-purpose":"image-upload-form-error"},e.imageUploader.errorMessage):null))}},pt.propTypes={doCommand:p.a.func.isRequired,model:p.a.instanceOf(ce).isRequired,gettext:p.a.func},pt),babelHelpers.applyDecoratedDescriptor(ut.prototype,"onFileSelected",[a["a"]],Object.getOwnPropertyDescriptor(ut.prototype,"onFileSelected"),ut.prototype),babelHelpers.applyDecoratedDescriptor(ut.prototype,"onDragActive",[a["a"]],Object.getOwnPropertyDescriptor(ut.prototype,"onDragActive"),ut.prototype),babelHelpers.applyDecoratedDescriptor(ut.prototype,"onDragInactive",[a["a"]],Object.getOwnPropertyDescriptor(ut.prototype,"onDragInactive"),ut.prototype),babelHelpers.applyDecoratedDescriptor(ut.prototype,"onDrop",[a["a"]],Object.getOwnPropertyDescriptor(ut.prototype,"onDrop"),ut.prototype),ut))||ct;var mt=Object(n["k"])(ht);var ft,gt,yt;let bt=0;let vt=Object(c["f"])(ft=(gt=(yt=class e extends d["Component"]{constructor(e,t){super(e,t);const{content:r}=e.node.content;this.id=++bt;this.content=r[0].text;this.contentRef=h.a.createRef();this.props.model.registerMathEditor(this.id,this.props.getPos,this.mathTypeset)}componentDidMount(){this.mathTypeset()}componentWillUnmount(){this.props.model.unregisterMathEditor(this.id)}mathTypeset(){const{mathjaxLib:e}=this.props.model;if(e){e.startup.promise=e.startup.promise.then((()=>e.typesetPromise([this.contentRef.current])))}}onRootClose(){const{activeMathEditor:e}=this.props.model;if(e){e.setIsOverlayShown(false);this.mathTypeset()}}onMouseDown(e){e.preventDefault()}get mathEditorModel(){return this.props.model.getMathEditor(this.id)}onMathClick(e){e.stopPropagation();e.preventDefault();this.mathTypeset();this.props.model.setActiveMathEditor(this.id);this.props.doCommand("CLICK_MATH",{focusOnEditor:false})}onEditButtonClick(){this.mathTypeset();this.props.model.setActiveMathEditor(this.id);this.props.model.mathForm.setMathRepresentation(this.content);this.props.model.mathForm.setIsInline(this.props.isInline);this.props.doCommand("PROMPT_MATH_EDIT",{focusOnEditor:false})}renderMath(){return h.a.createElement("div",{className:"rt-math-editor__representation",ref:this.contentRef,onClick:this.onMathClick,role:"math presentation",onMouseDown:this.onMouseDown,"data-purpose":"math-render"},this.content)}renderEditMode(){const e=f["b"]?{onTouchStart:this.onEditButtonClick}:{onClick:this.onEditButtonClick};return h.a.createElement(We["b"],{onRootClose:this.onRootClose},h.a.createElement("div",{className:"rt-math-editor__container",onMouseDown:this.onMouseDown},this.renderMath(),h.a.createElement("div",{className:"rt-node-editor__overlay"},h.a.createElement(g["a"],Object.assign({className:"rt-node-editor__overlay-btn",udStyle:"primary",size:"xsmall","data-purpose":"edit-math-btn"},e),this.props.gettext("Edit")))))}render(){return this.mathEditorModel.isOverlayShown?this.renderEditMode():this.renderMath()}},yt.propTypes={node:p.a.object.isRequired,getPos:p.a.func.isRequired,model:p.a.instanceOf(ce).isRequired,doCommand:p.a.func.isRequired,isInline:p.a.bool.isRequired,gettext:p.a.func},yt),babelHelpers.applyDecoratedDescriptor(gt.prototype,"mathTypeset",[a["a"]],Object.getOwnPropertyDescriptor(gt.prototype,"mathTypeset"),gt.prototype),babelHelpers.applyDecoratedDescriptor(gt.prototype,"onRootClose",[a["a"]],Object.getOwnPropertyDescriptor(gt.prototype,"onRootClose"),gt.prototype),babelHelpers.applyDecoratedDescriptor(gt.prototype,"onMouseDown",[a["a"]],Object.getOwnPropertyDescriptor(gt.prototype,"onMouseDown"),gt.prototype),babelHelpers.applyDecoratedDescriptor(gt.prototype,"onMathClick",[a["a"]],Object.getOwnPropertyDescriptor(gt.prototype,"onMathClick"),gt.prototype),babelHelpers.applyDecoratedDescriptor(gt.prototype,"onEditButtonClick",[a["a"]],Object.getOwnPropertyDescriptor(gt.prototype,"onEditButtonClick"),gt.prototype),babelHelpers.applyDecoratedDescriptor(gt.prototype,"renderMath",[a["a"]],Object.getOwnPropertyDescriptor(gt.prototype,"renderMath"),gt.prototype),gt))||ft;var wt=Object(n["k"])(vt);class Et{constructor(e,t,r,n,i,o){this.dom=document.createElement("div");if(o){this.dom.style.display="inline-block"}this.dom.setAttribute("data-purpose","math-editor-node-view");const a=h.a.createElement(wt,{node:e,getPos:r,model:n,doCommand:i,isInline:o});Ve.a.render(a,this.dom)}ignoreMutation(){return true}destroy(){Ve.a.unmountComponentAtNode(this.dom);this.dom=null}}var St=r("./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.react-component.js");var _t=r("./node_modules/@udemy/react-form-components/dist/esm/checkbox/checkbox.react-component.js");var xt,Dt,Ct;let Tt=Object(c["f"])(xt=(Dt=(Ct=class e extends d["Component"]{onSubmit(e){e.stopPropagation();e.preventDefault();this.props.doCommand("ADD_MATH",{focusBeforeCommand:true})}onMathRepresentationChange(e){this.props.model.mathForm.setMathRepresentation(Object(x["i"])(e.target.value))}get unwrappedMathRepresentation(){const{model:e}=this.props;return Object(x["g"])(e.mathForm.mathRepresentation)}onIsInlineChange(e){this.props.model.mathForm.setIsInline(e.target.checked)}render(){const{model:e,gettext:t}=this.props;const r=e.mathForm;return h.a.createElement(y["a"],{isOpen:e.activeModal==="MATH_MODAL",onClose:e.closeModal,title:r.isEditing?t("Edit math representation"):t("Insert math representation")},h.a.createElement("form",{className:"rt-modal-form",onSubmit:this.onSubmit,"data-purpose":"math-form"},h.a.createElement(b["b"],{label:t("Math representation in AsciiMath format")},h.a.createElement(St["a"],{style:{resize:"none"},value:this.unwrappedMathRepresentation,placeholder:t("Example: a/(1-a^2)"),onChange:this.onMathRepresentationChange,"data-purpose":"math-representation-field"})),h.a.createElement(_t["a"],{checked:r.isInline,onChange:this.onIsInlineChange},t("Inline")),h.a.createElement(w["a"],null,h.a.createElement(g["a"],{udStyle:"ghost",onClick:e.closeModal,"data-purpose":"math-form-cancel"},t("Cancel")),h.a.createElement(g["a"],{type:"submit","data-purpose":"math-form-insert-update"},r.isEditing?t("Edit"):t("Insert")))))}},Ct.propTypes={doCommand:p.a.func.isRequired,model:p.a.instanceOf(ce).isRequired,gettext:p.a.func},Ct),babelHelpers.applyDecoratedDescriptor(Dt.prototype,"onSubmit",[a["a"]],Object.getOwnPropertyDescriptor(Dt.prototype,"onSubmit"),Dt.prototype),babelHelpers.applyDecoratedDescriptor(Dt.prototype,"onMathRepresentationChange",[a["a"]],Object.getOwnPropertyDescriptor(Dt.prototype,"onMathRepresentationChange"),Dt.prototype),babelHelpers.applyDecoratedDescriptor(Dt.prototype,"onIsInlineChange",[a["a"]],Object.getOwnPropertyDescriptor(Dt.prototype,"onIsInlineChange"),Dt.prototype),Dt))||xt;var Ot=Object(n["k"])(Tt);var kt=r("./node_modules/@udemy/icons/dist/code.ud-icon");var Pt=r.n(kt);var At=r("./node_modules/@udemy/icons/dist/format-bold.ud-icon");var It=r.n(At);var jt=r("./node_modules/@udemy/icons/dist/format-italic.ud-icon");var Rt=r.n(jt);var Nt=r("./node_modules/@udemy/icons/dist/format-list-bullet.ud-icon");var Lt=r.n(Nt);var Mt=r("./node_modules/@udemy/icons/dist/format-list-number.ud-icon");var qt=r.n(Mt);var Ut=r("./node_modules/@udemy/icons/dist/link.ud-icon");var Ht=r.n(Ut);var Ft=r("./node_modules/@udemy/icons/dist/math.ud-icon");var Bt=r.n(Ft);var zt=r("./node_modules/@udemy/react-menu-components/dist/esm/dropdown/dropdown.react-component.js");var Vt,Wt,Gt;let Kt=Object(c["f"])(Vt=(Wt=(Gt=class e extends d["Component"]{onClickItem(e){const t=!A["l"].has(e);this.props.doCommand(e,{focusOnEditor:t})}getItemProps(e,t){const{model:r}=this.props;const n=!!r.activeFormats[e];let i=false;if(!r.isEditorRendered||!this.props.contentEditable){i=true}else if(r.htmlMode.show){i=e!=="TOGGLE_HTML_MODE"}else if(e==="UNDO_ANCHOR"){i=!r.anchorForm.isEditing}return{className:l()(t,{active:n}),disabled:i,onClick:()=>this.onClickItem(e),"data-purpose":e}}getButtonProps(){return{size:"medium",typography:"ud-text-sm",udStyle:"ghost"}}renderButton(e,t){return!this.props.model.features.has(e)?null:h.a.createElement(g["a"],Object.assign({},this.getButtonProps(),this.getItemProps(e,"rt-menu-btn ud-link-neutral")),t)}renderIconButton(e,t,r){return!this.props.model.features.has(e)?null:h.a.createElement(be["a"],Object.assign({},this.getButtonProps(),this.getItemProps(e,"rt-menu-icon-btn ud-link-neutral"),{title:r}),h.a.createElement(t,{label:r}))}renderDropdown(e,t,r){const n=r.filter((e=>this.props.model.features.has(e.feature))).map((e=>{let{feature:t,className:r,...n}=e;return h.a.createElement(zt["a"].MenuItem,Object.assign({key:t},this.getItemProps(t,r),n))}));return!n.length?null:h.a.createElement(zt["a"],Object.assign({useDrawer:false},e,{trigger:h.a.createElement(zt["a"].Button,Object.assign({},this.getButtonProps(),{className:"rt-menu-btn ud-link-neutral",disabled:n.every((e=>e.props.disabled))}),t)}),h.a.createElement(zt["a"].Menu,null,n))}render(){const{counter:e,model:t,menuBarPosition:r,gettext:n,interpolate:i}=this.props;return h.a.createElement("div",{className:"rt-menu-bar","data-purpose":"menu-bar"},this.renderDropdown({placement:r==="bottom"?"top-start":"bottom-start"},n("Styles"),[{feature:"SET_PARAGRAPH",children:n("Normal text")},{feature:"TOGGLE_BLOCKQUOTE",className:"rt-menu-item-blockquote",children:n("Quote")},{feature:"TOGGLE_HEADING",className:"rt-menu-item-heading",children:i(n("Heading %(number)s"),{number:A["e"]},true)}]),this.renderIconButton("TOGGLE_STRONG",It.a,n("Bold")),this.renderIconButton("TOGGLE_EM",Rt.a,n("Italic")),this.renderIconButton("TOGGLE_ORDERED_LIST",qt.a,n("Numbers")),this.renderIconButton("TOGGLE_BULLET_LIST",Lt.a,n("Bullets")),this.renderIconButton("PROMPT_ANCHOR",Ht.a,t.anchorForm.isEditing?n("Edit link"):n("Insert link")),this.renderIconButton("PROMPT_IMAGE_UPLOAD",ot.a,n("Image")),this.renderIconButton("TOGGLE_CODE",Pt.a,n("Code")),this.renderIconButton("PROMPT_MATH_INSERT",Bt.a,n("Math")),h.a.createElement("div",{className:"rt-menu-bar-right"},this.renderButton("TOGGLE_HTML_MODE",t.htmlMode.show?n("Live Preview"):n("Edit HTML")),e))}},Gt.propTypes={contentEditable:p.a.bool.isRequired,doCommand:p.a.func.isRequired,menuBarPosition:p.a.oneOf(["top","bottom"]),model:p.a.instanceOf(ce).isRequired,counter:p.a.node,gettext:p.a.func,interpolate:p.a.func},Gt.defaultProps={counter:null,menuBarPosition:"top"},Gt),babelHelpers.applyDecoratedDescriptor(Wt.prototype,"onClickItem",[a["a"]],Object.getOwnPropertyDescriptor(Wt.prototype,"onClickItem"),Wt.prototype),Wt))||Vt;var $t=Object(n["k"])(Kt);var Xt=r("./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/rich-text-scaffolding.global.less");var Yt=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/rich-text-editor.global.less");var Qt,Jt,Zt;const er=Object(c["f"])((e=>{let{model:t,name:r}=e;return h.a.createElement("input",{name:r,type:"hidden",className:"rt-hidden",value:t.editorValue})}));const tr=Object(i["a"])((e=>{let{count:t}=e;return h.a.createElement("span",{className:l()("rt-counter",{"rt-counter-error":t<0}),"data-purpose":"form-control-counter"},t)}));const rr=Object(c["f"])((e=>{let{model:t,maxLength:r}=e;return h.a.createElement(tr,{value:t.editorValueTextContent,maxLength:r})}));let nr=Object(c["f"])(Qt=(Jt=(Zt=class e extends d["Component"]{constructor(e,t){super(e,t);this.model=new ce({theme:this.props.theme},{gettext:e.gettext});this.anchorClickTarget=null;this.focusTrappingDialogProps={findTriggerNode:()=>this.view}}componentDidMount(){this.model.loadEditorLib();if(Object(x["d"])(this.model.features,A["h"])){this.model.loadMathjaxLib()}}UNSAFE_componentWillReceiveProps(e){if(this.model.isEditorRendered&&e.value!==this.props.value&&e.value!==this.model.editorValue){const t=this.model.serializer.toInternalValue(e.value);this.model.editorLib.helpers.overrideDoc(this.view,t)}}componentWillUnmount(){this.view=null}getEditorProps(){const e=this;const t=this.model.serializer.fromDOMSerializer;return{state:this.model.editorState,dispatchTransaction:this.dispatchTransaction,clipboardTextParser:t.parseClipboardText,domParser:t,transformPastedHTML:t.transformPastedHTML,handleClick:this.handleClick,handleDOMEvents:{drop:this.handleDrop,blur(){e.model.setEditorFocus(false);return e.props.onBlur()},focus(){e.model.setEditorFocus(true);return e.props.onFocus()}},handleKeyDown(t,r){return e.props.onKeyDown(r)},nodeViews:{image(t,r,n){return new Ze(t,r,n,e.model,e.doCommand)},math_block(t,r,n){return new Et(t,r,n,e.model,e.doCommand,false)},math_inline(t,r,n){return new Et(t,r,n,e.model,e.doCommand,true)}}}}onEditorWillMount(){this.model.initializeEditorState(this.props.value,this.props.autoFocus)}onEditorDidMount(e){const t=this;this.view=e;this.model.setEditorRenderedTrue();if(this.props.autoFocus){this.model.editorLib.helpers.setCursorAndFocus(this.view)}this.props.onInit({focus(){if(t.view){t.model.editorLib.helpers.setCursorAndFocus(t.view)}},blur(){t.view&&t.view.dom.blur()}})}dispatchTransaction(e){if(!this.props.contentEditable){return}const t=this.view.state.apply(e);this.view.updateState(t);const r=this.model.editorValue;this.model.syncWithEditor(t,e,this.view.focused);if(r!==this.model.editorValue){this.props.onValueChange(this.model.editorValue);if(Object(x["d"])(this.model.features,A["f"])){this.doCommand("DELETE_FIGURE",{focusOnEditor:false})}}}showAnchorTooltip(e,t){this.anchorClickTarget=e;this.model.showAnchorTooltip(t)}hideAnchorTooltip(){this.anchorClickTarget=null;this.model.hideAnchorTooltip()}handleClick(e,t,r){const n=Object(x["a"])(r.target,e.dom);if(n&&(this.anchorClickTarget!==n||!this.model.isAnchorTooltipShown)){this.showAnchorTooltip(n,e.state)}else{this.hideAnchorTooltip()}}handleDrop(e,t){t.preventDefault();const r=Object(x["d"])(this.model.features,A["f"]);if(t.dataTransfer&&t.dataTransfer.files&&r){const e=[...t.dataTransfer.files];this.model.imageUploader.uploadAndInsertImages(e,this.doCommand)}}doCommand(e,t){t={focusOnEditor:true,focusBeforeCommand:false,...t};if(!this.view||!this.props.contentEditable||!this.model.isEditorRendered){return}const r=this.model.commands[e];const n=this.view;if(t.focusOnEditor&&t.focusBeforeCommand){n.focus()}r(n.state,n.dispatch,n);if(t.focusOnEditor&&!t.focusBeforeCommand){n.focus()}}onHideHTMLMode(){if(this.model.htmlMode.docChanged){const e=this.model.serializer.toInternalValue(this.model.editorValue);this.model.editorLib.helpers.overrideDoc(this.view,e)}this.model.editorLib.helpers.setCursorAndFocus(this.view)}getAnchorClickTarget(){return this.anchorClickTarget}setWrapperRef(e){this.wrapperRef=e}renderCounter(){if(!this.props.withCounter){return null}return h.a.createElement(rr,{model:this.model,maxLength:this.props.maxLength})}render(){const{contentEditable:e,minHeight:t,placeholder:r,name:n,menuBarPosition:i,onValueChange:a,toolbarFixed:s}=this.props;const u=Object(x["d"])(this.model.features,A["a"]);const p=Object(x["d"])(this.model.features,A["f"]);const d=Object(x["d"])(this.model.features,A["h"]);const m=this.model.features.has("TOGGLE_HTML_MODE");const g=h.a.createElement("div",{className:l()("rt-menu-bar-container",{"rt-menu-bar-container-sticky":s&&i!=="bottom"}),"data-purpose":"menu-bar-container"},h.a.createElement($t,{contentEditable:e,counter:this.renderCounter(),doCommand:this.doCommand,menuBarPosition:i,model:this.model}),this.model.isEditorLibLoaded&&p?h.a.createElement(lt,{model:this.model,hideWhenActiveModal:true}):null,this.model.isEditorLibLoaded&&p?h.a.createElement(rt,{model:this.model,hideWhenActiveModal:true}):null);const y=this.model.isEditorLibLoaded?h.a.createElement(Pe,{model:this.model,contentEditable:e,minHeight:t,placeholder:r,getEditorProps:this.getEditorProps,onWillMount:this.onEditorWillMount,onDidMount:this.onEditorDidMount,editorMode:"WYSIWYG",dataPurpose:"wysiwyg-mode"}):h.a.createElement("div",{className:"rt-editor rt-editor--wysiwyg-mode","data-purpose":"placeholder-wysiwyg-mode"},h.a.createElement("div",{className:"ProseMirror",style:{minHeight:t}},h.a.createElement(o["a"],{block:true,size:"large"})));return h.a.createElement(c["c"],{focusTrappingDialogProps:this.focusTrappingDialogProps},h.a.createElement("div",{ref:this.setWrapperRef,className:l()("udlite-in-udheavy rt-editor-container",{"rt-editor-focused":this.model.isEditorFocused})},i==="bottom"?y:g,i==="bottom"?g:y,this.model.isEditorLibLoaded&&m?h.a.createElement(Ne,{model:this.model,contentEditable:e,minHeight:t,placeholder:r,onHide:this.onHideHTMLMode,onValueChange:a}):null,n?h.a.createElement(er,{model:this.model,name:n}):null,this.model.isEditorLibLoaded&&u?h.a.createElement(fe,{doCommand:this.doCommand,model:this.model}):null,this.model.isEditorLibLoaded&&u&&!f["b"]?h.a.createElement(Ce,{getTarget:this.getAnchorClickTarget,doCommand:this.doCommand,model:this.model,onHide:this.hideAnchorTooltip}):null,this.model.isEditorLibLoaded&&p?h.a.createElement(mt,{doCommand:this.doCommand,model:this.model}):null,this.model.isEditorLibLoaded&&p?h.a.createElement(Be,{doCommand:this.doCommand,hasAnchorFeatures:u,model:this.model}):null,this.model.isEditorLibLoaded&&d?h.a.createElement(Ot,{doCommand:this.doCommand,model:this.model}):null))}},Zt.THEMES=A["n"],Zt.propTypes={theme:p.a.oneOf(Object.values(A["n"])).isRequired,value:p.a.string,autoFocus:p.a.bool,contentEditable:p.a.bool,maxLength:p.a.number,minHeight:p.a.string,name:p.a.string,onBlur:p.a.func,onFocus:p.a.func,onInit:p.a.func,onKeyDown:p.a.func,onValueChange:p.a.func,placeholder:p.a.string,toolbarFixed:p.a.bool,withCounter:p.a.bool,menuBarPosition:p.a.oneOf(["top","bottom"]),gettext:p.a.func},Zt.defaultProps={value:"",autoFocus:false,contentEditable:true,maxLength:null,minHeight:"70px",name:null,onBlur:m["a"],onFocus:m["a"],onInit:m["a"],onKeyDown:m["a"],onValueChange:m["a"],placeholder:"",toolbarFixed:true,withCounter:false,menuBarPosition:"top"},Zt),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"getEditorProps",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"getEditorProps"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"onEditorWillMount",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"onEditorWillMount"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"onEditorDidMount",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"onEditorDidMount"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"dispatchTransaction",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"dispatchTransaction"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"hideAnchorTooltip",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"hideAnchorTooltip"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"handleClick",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"handleClick"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"handleDrop",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"handleDrop"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"doCommand",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"doCommand"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"onHideHTMLMode",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"onHideHTMLMode"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"getAnchorClickTarget",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"getAnchorClickTarget"),Jt.prototype),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"setWrapperRef",[a["a"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setWrapperRef"),Jt.prototype),Jt))||Qt;var ir=t["a"]=Object.assign(Object(n["k"])(nr),{THEMES:nr.THEMES})},"./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/open-full-size-image.less":function(e,t,r){e.exports={wrapper:"open-full-size-image--wrapper--2kvh_",backdrop:"open-full-size-image--backdrop--20cbM","dialog-container":"open-full-size-image--dialog-container--lzTJB","dialog-overlay":"open-full-size-image--dialog-overlay--4MAPb",dialog:"open-full-size-image--dialog--3jPo6","dialog-scroll-wrapper":"open-full-size-image--dialog-scroll-wrapper--3PEby","dialog-close-button":"open-full-size-image--dialog-close-button--1goLT"}},"./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/rich-text-scaffolding.global.less":function(e,t,r){},"./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/rich-text-viewer.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/classnames/index.js");var o=r.n(i);var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/base-components/ungraduated/code/code-block.react-component.tsx");var d=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var h=r("./src/udemy/js/utils/ud-render-react-components.js");var m=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var f=r("./node_modules/@udemy/i18n/dist/esm/index.js");var g=r("./node_modules/@udemy/icons/dist/close.ud-icon");var y=r.n(g);var b=r("./node_modules/@udemy/icons/dist/search.ud-icon");var v=r.n(b);var w=r("./node_modules/@udemy/react-checked-state-components/dist/esm/checked-state/checked-state.react-component.js");var E=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var S=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var _=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var x=r("./node_modules/@udemy/react-dialog-components/dist/esm/full-page-overlay/full-page-overlay.react-component.js");var D=r("./node_modules/@udemy/react-dialog-components/dist/esm/focus-trapping-dialog/focus-trapping-dialog.react-component.js");var C=r("./node_modules/mobx/lib/mobx.module.js");var T=r("./node_modules/react-dom/index.js");var O=r.n(T);var k=r("./src/udemy/js/base-components/checked-state/checked-state-checkbox.react-component.tsx");var P=r("./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/open-full-size-image.less");var A,I,j,R,N,L,M;const q=()=>{const{gettext:e}=Object(f["j"])();return u.a.createElement(v.a,{label:e("Larger image"),size:"large"})};const U=()=>{const{gettext:e}=Object(f["j"])();return u.a.createElement(u.a.Fragment,null,e("Full size image"))};const H=()=>{const{gettext:e}=Object(f["j"])();return u.a.createElement(y.a,{label:e("close modal")})};let F=Object(a["f"])(j=(R=(M=class e extends c["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"isModalOpen",N,this);babelHelpers.initializerDefineProperty(this,"shouldRenderClosedModal",L,this)}onToggleModal(e){this.isModalOpen=e;this.shouldRenderClosedModal=true;if(!e){setTimeout(Object(C["e"])((()=>{this.shouldRenderClosedModal=false})),x["a"])}}onClickTrigger(e){e.preventDefault();this.isModalOpen=false;this.shouldRenderClosedModal=true}render(){const{alt:e,src:t,href:r}=this.props;const n=u.a.createElement(E["a"],{src:t,alt:e,lazy:false,height:"unset",width:"unset"});const i=r&&u.a.createElement("a",{href:r,rel:"nofollow noopener noreferrer",target:"_blank"},n);return u.a.createElement("div",{className:"open-full-size-image--wrapper--2kvh_","data-purpose":"open-full-size-image"},n,u.a.createElement(S["a"],{udStyle:"link",className:"open-full-size-image--backdrop--20cbM",onClick:this.onClickTrigger},u.a.createElement(q,null)),(this.isModalOpen||this.shouldRenderClosedModal)&&u.a.createElement(B,{isOpen:this.isModalOpen,onToggle:this.onToggleModal},i||n))}},M.propTypes={alt:l.a.string,src:l.a.string.isRequired,href:l.a.string},M.defaultProps={alt:"",href:null},M),N=babelHelpers.applyDecoratedDescriptor(R.prototype,"isModalOpen",[C["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),L=babelHelpers.applyDecoratedDescriptor(R.prototype,"shouldRenderClosedModal",[C["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(R.prototype,"onToggleModal",[n["a"],C["e"]],Object.getOwnPropertyDescriptor(R.prototype,"onToggleModal"),R.prototype),babelHelpers.applyDecoratedDescriptor(R.prototype,"onClickTrigger",[n["a"],C["e"]],Object.getOwnPropertyDescriptor(R.prototype,"onClickTrigger"),R.prototype),R))||j;let B=(A=(I=class e extends c["Component"]{constructor(){super(...arguments);this.containerRef=u.a.createRef();this.dialogRef=u.a.createRef();this.id=Object(m["a"])("full-size-image-modal");this.labelledById=Object(m["a"])("full-size-image-modal-title")}componentDidMount(){this.onChange(true)}onChange(e){this.dialogRef.current.onToggle(e,this.containerRef.current);this.props.onToggle(e)}render(){const e=u.a.createElement("div",{ref:this.containerRef,className:"open-full-size-image--dialog-container--lzTJB"},u.a.createElement(k["a"],{id:this.id,className:"ud-full-page-overlay-checkbox",closeOnEscape:true,checked:this.props.isOpen,onChange:e=>this.onChange(Object(w["b"])(e))}),u.a.createElement("div",{className:"ud-full-page-overlay-container open-full-size-image--dialog-scroll-wrapper--3PEby"},u.a.createElement(x["b"],{cssToggleId:this.id,className:"open-full-size-image--dialog-overlay--4MAPb"}),u.a.createElement(D["a"],{ref:this.dialogRef,labelledById:this.labelledById,className:"open-full-size-image--dialog--3jPo6"},u.a.createElement(D["a"].Title,{id:this.labelledById,show:false},u.a.createElement(U,null)),this.props.children,u.a.createElement(_["a"],{cssToggleId:this.id,udStyle:"ghost",className:"open-full-size-image--dialog-close-button--1goLT"},u.a.createElement(H,null)))));return O.a.createPortal(e,document.body)}},I.propTypes={isOpen:l.a.bool.isRequired,onToggle:l.a.func.isRequired},I),babelHelpers.applyDecoratedDescriptor(A.prototype,"onChange",[n["a"]],Object.getOwnPropertyDescriptor(A.prototype,"onChange"),A.prototype),A);var z=r("./src/udemy/js/base-components/ungraduated/form/rich-text-viewer/rich-text-scaffolding.global.less");r.d(t,"a",(function(){return K}));var V,W,G;let K=Object(a["f"])(V=(W=(G=class e extends c["Component"]{componentDidMount(){this.fixupHtml()}componentDidUpdate(e){if(e.unsafeHTML!==this.props.unsafeHTML){this.fixupHtml()}}fixupHtml(){this.wrapCodeBlocks(this.node);if(this.props.wrapImages){this.wrapImages(this.node)}if(this.props.openBlankTarget){this.blankTargets(this.node)}}blankTargets(e){Array.from(e.querySelectorAll("a")).forEach((e=>{e.setAttribute("target","_blank");e.setAttribute("rel","noopener noreferrer")}))}wrapCodeBlocks(e){const t="ud-component--base-components--code-block";Array.from(e.querySelectorAll("pre.prettyprint")).forEach((e=>{const r=e.parentNode;if(r.classList.contains(t)){return}const n=document.createElement("div");n.className=t;r.insertBefore(n,e);n.appendChild(e);Object(h["a"])(n,`.${t}`,p["a"],{...this.props.prettify,value:e.textContent,className:e.className,showLineNumbers:e.classList.contains("linenums")})}))}wrapImages(e){const t="ud-component--base-components--open-full-size-image";Array.from(e.querySelectorAll("img")).forEach((e=>{e.style.display="none";const r=e.nextSibling;if(r&&r.classList&&r.classList.contains(t)){return}const n=document.createElement("span");n.className=t;e.parentNode.insertBefore(n,r);Object(h["a"])(n,`.${t}`,F,{alt:e.getAttribute("alt")||"",src:e.getAttribute("src"),href:e.parentNode.getAttribute("href")})}))}setRefs(e){this.node=e}render(){const{prettify:e,wrapImages:t,unsafeHTML:r,openBlankTarget:n,...i}=this.props;return u.a.createElement("div",Object.assign({ref:this.setRefs},Object(d["a"])({descriptionOfCaller:"rich-text-viewer:html",html:r,domPurifyConfig:{ADD_ATTR:["target"]}}),i,{className:o()(i.className,"rt-scaffolding")}))}},G.propTypes={unsafeHTML:l.a.string.isRequired,prettify:l.a.shape({preventClick:l.a.bool}),wrapImages:l.a.bool,openBlankTarget:l.a.bool},G.defaultProps={prettify:{},wrapImages:false,openBlankTarget:false},G),babelHelpers.applyDecoratedDescriptor(W.prototype,"setRefs",[n["a"]],Object.getOwnPropertyDescriptor(W.prototype,"setRefs"),W.prototype),W))||V},"./src/udemy/js/base-components/ungraduated/form/text-input/text-input-with-addons.less":function(e,t,r){e.exports={"with-addons":"text-input-with-addons--with-addons--1byxB",addon:"text-input-with-addons--addon--1dOJH"}},"./src/udemy/js/base-components/ungraduated/form/text-input/text-input-with-addons.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-container.react-component.js");var i=r("./node_modules/prop-types/index.js");var o=r.n(i);var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./src/udemy/js/base-components/ungraduated/form/text-input/text-input-with-addons.less");var c=r.n(l);class u extends s.a.Component{render(){return s.a.createElement("div",{className:"text-input-with-addons--with-addons--1byxB"},s.a.createElement(n["a"],this.props))}}const p=e=>{let{componentClass:t,...r}=e;return s.a.createElement(t,Object.assign({},r,{className:(r.className?r.className+" ":"")+"text-input-with-addons--addon--1dOJH"}))};p.propTypes={componentClass:o.a.elementType};p.defaultProps={componentClass:"div"};u.Addon=p},"./src/udemy/js/base-components/ungraduated/resizer/resizer.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/prop-types/index.js");var o=r.n(i);var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./src/udemy/js/utils/noop.js");var c=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js");var u,p;const d=Element&&Element.prototype||{};const h=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.msMatchesSelector||(e=>[].indexOf.call(document.querySelectorAll(e),undefined)!==-1);let m=(u=(p=class e extends a["Component"]{constructor(){super(...arguments);this.x=0;this.y=0;this.width=0;this.height=0;this.edges={onTop:false,onLeft:false,onRight:false,onBottom:false};this.isResizing=false}componentDidMount(){document.addEventListener("mousemove",this.onMouseMove);document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("touchmove",this.onTouchMove);document.addEventListener("touchend",this.onTouchEnd)}componentWillUnmount(){document.removeEventListener("mousemove",this.onMouseMove);document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("touchmove",this.onTouchMove);document.removeEventListener("touchend",this.onTouchEnd)}get resizeData(){let e=this.width;let t=this.height;if(this.edges.onTop){t=this.height-this.y}else if(this.edges.onBottom){t=this.y}if(this.edges.onLeft){e=this.width-this.x}else if(this.edges.onRight){e=this.x}return{width:e,height:t,edges:this.edges,container:this.ref}}isEdgeEnabled(e,t){const r=this.props.edges[e];if(typeof r==="string"){return h.call(t,r)}return r}calculateDimensions(e){const t=this.ref.getBoundingClientRect();this.x=e.clientX-t.left;this.y=e.clientY-t.top;this.width=t.width;this.height=t.height}setResizeCursor(){this.originalCursor=document.body.style.cursor;if(this.edges.onTop&&this.edges.onLeft){document.body.style.cursor="nwse-resize"}else if(this.edges.onTop&&this.edges.onRight){document.body.style.cursor="nesw-resize"}else if(this.edges.onTop){document.body.style.cursor="ns-resize"}else if(this.edges.onLeft&&this.edges.onBottom){document.body.style.cursor="nesw-resize"}else if(this.edges.onLeft){document.body.style.cursor="ew-resize"}else if(this.edges.onBottom&&this.edges.onRight){document.body.style.cursor="nwse-resize"}else if(this.edges.onBottom){document.body.style.cursor="ns-resize"}else if(this.edges.onRight){document.body.style.cursor="ew-resize"}}setOriginalCursor(){document.body.style.cursor=this.originalCursor||""}onDown(e){this.calculateDimensions(e);const t=this.props.dragMargin;this.edges={onTop:this.isEdgeEnabled("top",e.target)&&this.y<t,onLeft:this.isEdgeEnabled("left",e.target)&&this.x<t,onRight:this.isEdgeEnabled("right",e.target)&&this.x>=this.width-t,onBottom:this.isEdgeEnabled("bottom",e.target)&&this.y>=this.height-t};this.setResizeCursor();this.isResizing=this.edges.onTop||this.edges.onLeft||this.edges.onRight||this.edges.onBottom;if(this.isResizing){this.props.onStart(e,this.resizeData)}}onMouseDown(e){e.preventDefault();this.onDown(e)}onTouchStart(e){e.preventDefault();this.onDown(e.touches[0])}onMove(e){if(this.isResizing){this.calculateDimensions(e);this.props.onMove(e,this.resizeData)}}onMouseMove(e){this.onMove(e)}onTouchMove(e){this.onMove(e.touches[0])}onUp(e){if(this.isResizing){this.props.onEnd(e,this.resizeData)}this.setOriginalCursor();this.isResizing=false}onMouseUp(e){this.onUp(e)}onTouchEnd(e){if(e.touches.length===0){this.onUp(e.changedTouches[0])}}setRef(e){this.ref=e}render(){const{edges:e,onStart:t,onMove:r,onEnd:n,dragMargin:i,...o}=this.props;return s.a.createElement("div",Object.assign({},o,{ref:this.setRef,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart}))}},p.propTypes={edges:o.a.shape({top:o.a.oneOfType([o.a.string,o.a.bool]),left:o.a.oneOfType([o.a.string,o.a.bool]),right:o.a.oneOfType([o.a.string,o.a.bool]),bottom:o.a.oneOfType([o.a.string,o.a.bool])}),onStart:o.a.func,onMove:o.a.func.isRequired,onEnd:o.a.func,dragMargin:o.a.number},p.defaultProps={edges:{top:true,left:true,right:true,bottom:true},onStart:l["a"],onEnd:l["a"],dragMargin:c["b"]?30:5},p),babelHelpers.applyDecoratedDescriptor(u.prototype,"onMouseDown",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"onMouseDown"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"onTouchStart",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"onTouchStart"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"onMouseMove",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"onMouseMove"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"onTouchMove",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"onTouchMove"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"onMouseUp",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"onMouseUp"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"onTouchEnd",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"onTouchEnd"),u.prototype),babelHelpers.applyDecoratedDescriptor(u.prototype,"setRef",[n["a"]],Object.getOwnPropertyDescriptor(u.prototype,"setRef"),u.prototype),u)},"./src/udemy/js/base-components/ungraduated/sortable/sortable.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));r.d(t,"b",(function(){return p}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/react/index.js");var o=r.n(i);var a=r("./node_modules/react-sortablejs/lib/index.js");var s=r.n(a);var l,c;let u=(l=(c=class e extends i["Component"]{onEnd(e){if(this.props.options.onEnd){if(e.from!==e.to){e.from.insertBefore(e.item,e.from.childNodes[e.oldIndex])}this.props.options.onEnd(e)}}setRef(e){if(e){this.sortable=e.sortable}else{this.sortable=null}}render(){const e={...this.props};e.options={...e.options,onEnd:this.onEnd};return o.a.createElement(s.a,Object.assign({},e,{ref:this.setRef}))}},c.propTypes=s.a.propTypes,c.defaultProps=s.a.defaultProps,c),babelHelpers.applyDecoratedDescriptor(l.prototype,"onEnd",[n["a"]],Object.getOwnPropertyDescriptor(l.prototype,"onEnd"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setRef",[n["a"]],Object.getOwnPropertyDescriptor(l.prototype,"setRef"),l.prototype),l);function p(e,t,r,n){let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;if(t===0||!n){return}const{top:o,bottom:a}=n.el.getBoundingClientRect();if(o>i&&t<0||a<i&&t>0){return}window.scrollTo(window.pageXOffset+e,window.pageYOffset+t)}},"./src/udemy/js/browse/components/my-learning-unit/constants.js":function(e,t,r){"use strict";var n=r("./src/udemy/js/browse/lab-events.ts");var i=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class o extends i["a"]{constructor(e){super("LabsDiscoverEvent");this.componentVisited=e.componentVisited}}r.d(t,"b",(function(){return a}));r.d(t,"a",(function(){return s}));r.d(t,"c",(function(){return l}));const a="/labs/listing/";const s=Object.freeze({MY_LEARNING_SHOW_LABS:"my_learning_show_labs",MY_LEARNING_LABS_TAB:"my_learning_labs_tab",MY_LEARNING_LABS_PAGE:"my_learning_labs_page",LABS_LANDING_PAGE:"labs_landing_page",LABS_IN_COURSE_PROMPT:"labs_in_course_prompt",LABS_IN_SEARCH:"labs_in_search",LABS_UNIT_LIHP:"labs_unit_lihp",LABS_UNIT_TOPIC:"labs_unit_topic",LAB_OVERVIEW_PAGE:"lab_overview_page",LAB_LISTING_PAGE:"lab_listing_page"});const l=Object.freeze({DISCOVER:o,DISCOVERY_CARD_CLICK:n["b"]})},"./src/udemy/js/browse/lab-events.ts":function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));r.d(t,"c",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"d",(function(){return s}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class i extends n["a"]{constructor(e){let{labId:t,courseId:r=undefined,uiRegion:n,trackingId:i=undefined,sourcePageId:o=undefined,sourcePageType:a=undefined}=e;super("LabDiscoveryCardClickEvent");this.labId=t;this.courseId=r;this.uiRegion=n;this.trackingId=i;this.sourcePageId=o;this.sourcePageType=a}}class o extends n["a"]{constructor(e){let{labId:t,courseId:r,uiRegion:n,sourcePageId:i,sourcePageType:o}=e;super("LabDiscoveryCardImpressionEvent");this.labId=t;this.courseId=r;this.uiRegion=n;this.sourcePageId=i;this.sourcePageType=o}}class a extends n["a"]{constructor(){super("ExploreLabsClickEvent")}}class s extends n["a"]{constructor(){super("LabsInfoModalLaunchEvent")}}},"./src/udemy/js/browse/ui-regions.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n={ALL_COURSES:"all_courses",ASSESSMENT_UNIT_PP_LIHP:"assessment_unit_pp_lihp",ASSESSMENT_UNIT_TOPIC:"assessment_unit_topic",ASSESSMENT_RECOMMENDATION:"assessment_recommendation",BODY:"body",BOTTOM_DRAWER:"bottom_drawer",BOTTOM_DRAWER_COURSE_CARD:"bottom_drawer.course_card",BOTTOM_DRAWER_LECTURE_LIST:"bottom_drawer.lecture_list",BOTTOM_DRAWER_RECOMMENDATION:"bottom_drawer.recommendation",CAREER_TRACKS:"career_tracks",COLLECTIONS:"collections",COURSE_ACTIONS:"course_actions",COURSE_COMPARISON:"course_comparison",COURSE_DIRECTORY:"course_directory",COURSE_LEDE:"course_lede",COURSE_OBJECTIVES:"course_objectives",COURSE_TAKING_HEADER:"course_taking_header",CURATED_FOR_UB:"curated_for_ub",CURRICULUM:"curriculum",LAB_RECOMMENDATION:"lab_recommendation",LEARNING_MAP:"learning_map",LEARNING_MAP_SIDE_NAV:"learning_map_side_nav",LEARNING_MAP_DRAWER_NAV:"learning_map_drawer_nav",LECTURE_STACK:"lecture_stack",LECTURE_DISCOVERY_UNIT_LECTURE_CARD:"lecture_discovery_unit.lecture_card",LECTURE_DISCOVERY_UNIT_VIDEO_CARD:"lecture_discovery_unit.video_card",LECTURE_DISCOVERY_UNIT_VIDEO_CARD_DRAWER:"lecture_discovery_unit.video_card.bottom_drawer",MORE_COURSES_BY_INSTRUCTORS:"more_courses_by_instructors",NOT_AVAILABLE:"not_available",OCCUPATION_GOAL_HEADER:"occupation_goal_header",OLP_ENTRY_BANNER:"olp_entry_banner",OTHER_SUBSCRIPTION_PLANS:"other_subscription_plans",PERSONAL_PLAN_BANNER:"personal_plan_banner",PERSONAL_PLAN_CHECKLIST:"personal_plan_checklist",PERSONAL_PLAN:"personal_plan",PURCHASE_SECTION:"purchase_section",QUICK_PREVIEW:"quick_preview",RECOMMENDATIONS:"recommendations",RETURN_TO_UDEMY:"return_to_udemy",SEARCH:"search",SEARCH_RECOMMENDATION_UNIT:"search_recommendation_unit",SET_CAREER_GOAL_UNIT:"set_career_goal_unit",SIDEBAR:"sidebar",SIMILAR_OCCUPATIONS:"similar_occupations",SLIDER:"slider",STICKY_FOOTER:"sticky_footer",STICKY_HEADER:"sticky_header",SUBS_COLLECTION_SAMPLER:"subs-collection-sampler",SUBSCRIBE_NOTICE:"subscribe_notice",SUBSCRIPTION_EXPRESS_CHECKOUT_SUCCESS:"subscription_express_checkout_success",TESTLET_RESULTS:"testlet_results",UB_ADVERTISEMENT:"ub_advertisement",UDEMY_LOGO:"udemy_logo",UDEMY_PRO_BANNER:"udemy_pro_banner",WISHLIST:"wishlist",SUBSCRIPTION_OPTIONS_CTA:"subscription_options_cta"}},"./src/udemy/js/caption-editor/animated-save-button.less":function(e,t,r){e.exports={"save-button":"animated-save-button--save-button--1bwEl",overlay:"animated-save-button--overlay--1Q1Iu"}},"./src/udemy/js/caption-editor/caption-editor.less":function(e,t,r){e.exports={flex:"caption-editor--flex--2TxZU",takeover:"caption-editor--takeover--fWx1k","editor-loading-state":"caption-editor--editor-loading-state--2wZq1",editor:"caption-editor--editor--j4GJG","takeover-logo-wrapper":"caption-editor--takeover-logo-wrapper--2mTuL","takeover-title":"caption-editor--takeover-title--2AQS2","takeover-header-buttons":"caption-editor--takeover-header-buttons--arHmY","takeover-content":"caption-editor--takeover-content--295dZ","modal-footer-buttons":"caption-editor--modal-footer-buttons--DALk0","modal-footer-left-buttons":"caption-editor--modal-footer-left-buttons--RvgiU",discard:"caption-editor--discard--33d7r",disabled:"caption-editor--disabled--aMaO1",player:"caption-editor--player--2u1AT",sidebar:"caption-editor--sidebar--3UP97","alert-banner":"caption-editor--alert-banner--V49iV","cues-empty":"caption-editor--cues-empty--1kAwk","cues-empty-content":"caption-editor--cues-empty-content--6uAmA","cues-empty-subtitle":"caption-editor--cues-empty-subtitle--1hrwv"}},"./src/udemy/js/caption-editor/cue-content-editor.less":function(e,t,r){e.exports={"cue-content-alert":"cue-content-editor--cue-content-alert--35lrc","cue-content-textarea-wrapper":"cue-content-editor--cue-content-textarea-wrapper--3WePp","cue-content-display":"cue-content-editor--cue-content-display--3Agk2","cue-content-textarea":"cue-content-editor--cue-content-textarea--2vAvD"}},"./src/udemy/js/caption-editor/cue-list.less":function(e,t,r){e.exports={"cues-container":"cue-list--cues-container--mYChc",cues:"cue-list--cues--3XY19"}},"./src/udemy/js/caption-editor/cue.less":function(e,t,r){e.exports={cue:"cue--cue--ppfXz",editing:"cue--editing--28sHQ",playing:"cue--playing--1MCH1","cue-time":"cue--cue-time--2kOEV"}},"./src/udemy/js/caption-editor/options-bar.less":function(e,t,r){e.exports={"options-bar":"options-bar--options-bar--2N_s1"}},"./src/udemy/js/caption/caption.mobx-model.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return b}));r.d(t,"a",(function(){return v}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/axios/index.js");var o=r.n(i);var a=r("./node_modules/mobx/lib/mobx.module.js");var s=r("./src/udemy/js/utils/ud-api-stat.js");var l=r("./src/udemy/js/utils/ud-me.js");var c=r("./src/udemy/js/utils/ud-raven.js");var u=r("./src/udemy/js/caption/constants.js");var p=r("./src/udemy/js/caption/cue.mobx-model.js");var d=r("./src/udemy/js/caption/vtt-parser.js");var h,m,f,g,y;let b=(h=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"_cues",m,this);this._loadPromise=null;babelHelpers.initializerDefineProperty(this,"isLoaded",f,this);babelHelpers.initializerDefineProperty(this,"error",g,this);babelHelpers.initializerDefineProperty(this,"status",y,this);this.id=e.id;this.locale=e.locale_id||e.locale&&e.locale.locale;this.language=this.locale?this.locale.slice(0,2):undefined;this.source=e.source;this.title=e.title;this.url=e.url;this.confidenceThreshold=e.confidence_threshold;this.assetId=e.asset_id;this.isEdit=e.is_edit;this.isEditOfAutoCaption=e.is_edit_of_autocaption;this.filteringTags=e.filteringTags;this.isTranslation=e.is_translation;this.modified=e.modified;this.retries=0;this.setStatus(e.status);this._correctedCueIds=(e.corrected_cue_ids||[]).map((e=>parseInt(e,10)));Object(a["D"])((()=>this.error),(()=>{if(this.error.errorType===u["h"].PARSING){c["a"].captureException(new Error(`Caption failed when ${this.error.errorType}: ${this.error.message} for caption ${this.id}`))}s["b"].increment(u["i"].ERROR,this.error)}))}setStatus(e){this.status=e}constructCue(e){return new p["b"](e)}loadFromSource(){if(this._loadPromise){return this._loadPromise}let e=0;this._loadPromise=o.a.get(this.url).then((t=>{Object(d["c"])(t.data,Object(a["e"])((t=>{t.id=e;t.isCorrect=this._correctedCueIds.includes(e);this._cues.push(this.constructCue(t));e++})),Object(a["e"])((()=>{this.isLoaded=true;s["b"].increment(u["i"].LOADED,{language:this.language,userCountry:l["a"].country,retries:this.retries})})),this._handleParsingError)})).catch(this._handleLoadingError);return this._loadPromise}_handleParsingError(e){this.error={errorType:u["h"].PARSING,message:e.message}}_shouldRetryLoading(e){return this.retries<u["e"]&&(e.message===u["j"]||u["k"].includes(e.status))}_retryLoading(){const e=Math.pow(2,this.retries)*1e3;this.retries++;setTimeout(this.loadFromSource,e)}_handleLoadingError(e){const t={status:e.response&&e.response.status,message:e.message,userCountry:l["a"].country,retries:this.retries};if(this._shouldRetryLoading(t)){this._loadPromise=null;t.errorType=u["h"].RETRY;this.error=t;this._retryLoading()}else{t.errorType=u["h"].LOADING;this.error=t}}get cues(){if(!this.isLoaded){return[]}return this._cues}get asString(){const e=this.cues.map((e=>{const t=Object(p["a"])(e.startTime,3);const r=Object(p["a"])(e.endTime,3);return[e.id,`${t} --\x3e ${r}`,e.text].join("\n")}));return["WEBVTT",e.join("\n\n")].join("\n\n")}get correctedCueIds(){return this.cues.reduce(((e,t)=>{if(t.isCorrect){e.push(t.id)}return e}),[])}},m=babelHelpers.applyDecoratedDescriptor(h.prototype,"_cues",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),f=babelHelpers.applyDecoratedDescriptor(h.prototype,"isLoaded",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),g=babelHelpers.applyDecoratedDescriptor(h.prototype,"error",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),y=babelHelpers.applyDecoratedDescriptor(h.prototype,"status",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(h.prototype,"setStatus",[a["e"]],Object.getOwnPropertyDescriptor(h.prototype,"setStatus"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"loadFromSource",[n["a"]],Object.getOwnPropertyDescriptor(h.prototype,"loadFromSource"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"_handleParsingError",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(h.prototype,"_handleParsingError"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"_retryLoading",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(h.prototype,"_retryLoading"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"_handleLoadingError",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(h.prototype,"_handleLoadingError"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"cues",[a["g"]],Object.getOwnPropertyDescriptor(h.prototype,"cues"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"asString",[a["g"]],Object.getOwnPropertyDescriptor(h.prototype,"asString"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"correctedCueIds",[a["g"]],Object.getOwnPropertyDescriptor(h.prototype,"correctedCueIds"),h.prototype),h);function v(e,t){const r=new Blob([e.asString],{type:"text/vtt"});if(t){r.name=t}return r}},"./src/udemy/js/caption/constants.js":function(e,t,r){"use strict";r.d(t,"g",(function(){return n}));r.d(t,"f",(function(){return i}));r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));r.d(t,"c",(function(){return s}));r.d(t,"d",(function(){return l}));r.d(t,"h",(function(){return c}));r.d(t,"i",(function(){return u}));r.d(t,"e",(function(){return p}));r.d(t,"j",(function(){return d}));r.d(t,"k",(function(){return h}));const n=Object.freeze({PUBLISHED:"caption",DRAFT:"draft-caption",CROWDSOURCED:"crowdsourced-caption"});const i=Object.freeze({PROCESSING:-3,FAILED:-1,UNPROCESSED:0,SUCCESS:1,TRANSCODED:2,DELETING:42});const o=Object.freeze({INITIAL:20,UPLOADING:70,FINAL:10});const a=Object.freeze({VALIDATION:"VALIDATION",UPLOAD:"UPLOAD",NAME_COLLISION:"NAME_COLLISION"});const s=Object.freeze(["vtt"]);const l=Object.freeze(s.map((e=>`.${e}`)));const c=Object.freeze({LOADING:"loading",PARSING:"parsing",RETRY:"retry"});const u=Object.freeze({ERROR:"caption_model.error",LOADED:"caption_model.loaded"});const p=4;const d="Network Error";const h=[503,504]},"./src/udemy/js/caption/cue.mobx-model.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return l}));r.d(t,"a",(function(){return c}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./src/udemy/js/utils/escape/unescape-html.js");var o,a,s;let l=(o=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"text",a,this);babelHelpers.initializerDefineProperty(this,"isCorrect",s,this);this.id=parseInt(e.id,10);this.startTime=e.startTime;this.endTime=e.endTime;this.setObservablesFromAPIData(e)}setObservablesFromAPIData(e){this.text=e.text;this.isCorrect=e.isCorrect}setText(e){this.text=e}markCorrect(e){this.isCorrect=e}get displayText(){return Object(i["a"])(this.text.replace(/<[^>]+>/g,""))}},a=babelHelpers.applyDecoratedDescriptor(o.prototype,"text",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"isCorrect",[n["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"setObservablesFromAPIData",[n["e"]],Object.getOwnPropertyDescriptor(o.prototype,"setObservablesFromAPIData"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setText",[n["e"]],Object.getOwnPropertyDescriptor(o.prototype,"setText"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"markCorrect",[n["e"]],Object.getOwnPropertyDescriptor(o.prototype,"markCorrect"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"displayText",[n["g"]],Object.getOwnPropertyDescriptor(o.prototype,"displayText"),o.prototype),o);function c(e,t){const r=(e%1).toFixed(t).substring(2);e=Math.trunc(e);const n=Math.floor(e/3600);const i=Math.floor(e/60)-n*60;const o=e-(n*3600+i*60);function a(e){const t=`${e}`;return"00".substring(0,2-t.length)+t}const s=[a(i),a(o)];if(n>0){s.unshift(a(n))}return`${s.join(":")}${t?`.${r}`:""}`}},"./src/udemy/js/caption/vtt-parser.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"b",(function(){return s}));var n=r("./node_modules/videojs-vtt.js/lib/browser-index.js");var i=r.n(n);function o(e,t,r,i){const o=new n["WebVTT"].Parser(null,n,n["WebVTT"].StringDecoder());o.oncue=t;o.onflush=r;o.onparsingerror=i;o.parse(e);o.flush()}function a(e){if(!e.trim().length){return true}const t=n["WebVTT"].convertCueToDOMTree(window,e);const r=t.textContent.trim();return!r.length}function s(e){return/-->/.test(e)}},"./src/udemy/js/course-captions/caption-manager.less":function(e,t,r){e.exports={description:"caption-manager--description--2b7Qh"}},"./src/udemy/js/course-captions/captions-alert.less":function(e,t,r){e.exports={"alert-banner":"captions-alert--alert-banner--2452H",body:"captions-alert--body--1oP-N",footer:"captions-alert--footer--2T50I"}},"./src/udemy/js/course-captions/captions-form.less":function(e,t,r){e.exports={flex:"captions-form--flex--278CW",ellipsis:"captions-form--ellipsis--3bPAt","color-negative":"captions-form--color-negative--hldu1","filter-buttons":"captions-form--filter-buttons--1Clv2","curriculum-section":"captions-form--curriculum-section--MLXTD","curriculum-section-title":"captions-form--curriculum-section-title--18afv","error-alert-banner":"captions-form--error-alert-banner--A-DhG","lecture-item":"captions-form--lecture-item--24qdX","lecture-item-uploading":"captions-form--lecture-item-uploading--rErIw","lecture-item-details":"captions-form--lecture-item-details--2OTry","progress-bar":"captions-form--progress-bar--2O5EW","progress-bar-text-container":"captions-form--progress-bar-text-container--1rpM8","progress-bar-text":"captions-form--progress-bar-text--16Z3l","lecture-item-cell":"captions-form--lecture-item-cell--3LvWv","lecture-title":"captions-form--lecture-title--2m-XR","caption-edited-date":"captions-form--caption-edited-date--3YqzF","caption-actions-cell":"captions-form--caption-actions-cell--thbah","caption-actions":"captions-form--caption-actions--1NiJz","empty-circle-container":"captions-form--empty-circle-container--2NFRP","empty-circle":"captions-form--empty-circle--1IttS","caption-action-button":"captions-form--caption-action-button--3dPul",uploader:"captions-form--uploader--1occP",tooltip:"captions-form--tooltip--ASQ8C","caption-edit-menu-item":"captions-form--caption-edit-menu-item--1PaEl","hidden-lg-max":"captions-form--hidden-lg-max--3uUqy","caption-action-dropdown":"captions-form--caption-action-dropdown--3zvst"}},"./src/udemy/js/course-captions/language-selector.less":function(e,t,r){e.exports={"trigger-text":"language-selector--trigger-text--vl5bU",menus:"language-selector--menus--2f7MK","cancel-text":"language-selector--cancel-text--1Dpxm","add-new-language-text":"language-selector--add-new-language-text--2O63C"}},"./src/udemy/js/course-labels/constants.js":function(e,t,r){"use strict";r.d(t,"e",(function(){return n}));r.d(t,"b",(function(){return i}));r.d(t,"c",(function(){return o}));r.d(t,"d",(function(){return a}));r.d(t,"a",(function(){return s}));const n="proposed_course_label";const i="course_label";const o=4;const a="proposed_course_has_label";const s="course_has_label"},"./src/udemy/js/course-labels/course-has-label.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/utils/ud-api.js");var a=r("./src/udemy/js/tapen/structured-data-search-admin/constants.ts");var s,l;let c=(s=class e{constructor(e,t,r,n,i){babelHelpers.initializerDefineProperty(this,"label",l,this);this._initData(t);this.courseId=e;this.propagateChangesToServer=r;this.onCreate=n;this.onDelete=i}_initData(e){Object(i["l"])(this,{approval_status:e.approval_status,is_primary:e.is_primary});this.label=e.label}get apiUrl(){return`courses/${this.courseId}/labels/${this.label.id}/`}setPrimary(e){this.is_primary=e;if(!this.propagateChangesToServer){return Promise.resolve()}return o["f"].patch(`${this.apiUrl}`,{is_primary:e})}create(){if(!this.propagateChangesToServer){this.onCreate(this);return Promise.resolve()}return o["f"].put(`${this.apiUrl}`).then((()=>{this.onCreate(this)}))}delete(){if(!this.propagateChangesToServer){this.onDelete(this);return Promise.resolve()}return o["f"].delete(`${this.apiUrl}`).then((()=>{this.onDelete(this)}))}},l=babelHelpers.applyDecoratedDescriptor(s.prototype,"label",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(s.prototype,"_initData",[i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"_initData"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"setPrimary",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"setPrimary"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"create",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"create"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"delete",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"delete"),s.prototype),s);c.APPROVAL_STATUS=a["a"]},"./src/udemy/js/course-labels/course-has-labels.mobx-store.js":function(e,t,r){"use strict";var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/utils/ud-api.js");var a=r("./src/udemy/js/course-labels/constants.js");var s=r("./src/udemy/js/course-labels/course-has-label.mobx-store.js");var l=r("./src/udemy/js/course-labels/course-labels.mobx-store.js");var c;let u=(c=class e{constructor(e,t,r,n,o){Object(i["l"])(this,{approval_status:t.approval_status,is_primary:t.is_primary});this.courseId=e;this.label=t.label;this.propagateChangesToServer=r;this.onCreate=n;this.onDelete=o}get apiUrl(){return`courses/${this.courseId}/proposed-assignments/${this.label._class}/`}setPrimary(e){this.is_primary=e;if(!this.propagateChangesToServer){return Promise.resolve()}return o["f"].patch(`${this.apiUrl}${this.label.id}/`,{is_primary:e})}create(){if(!this.propagateChangesToServer){this.onCreate(this);return Promise.resolve()}return o["f"].post(this.apiUrl,{label_id:this.label.id}).then((()=>{this.onCreate(this)}))}delete(){if(!this.propagateChangesToServer){this.onDelete(this);return Promise.resolve()}return o["f"].delete(`${this.apiUrl}${this.label.id}/`).then((()=>{this.onDelete(this)}))}},babelHelpers.applyDecoratedDescriptor(c.prototype,"setPrimary",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setPrimary"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"create",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(c.prototype,"create"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"delete",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(c.prototype,"delete"),c.prototype),c);r.d(t,"a",(function(){return g}));var p,d,h,m,f;let g=(p=class e{constructor(e,t,r){babelHelpers.initializerDefineProperty(this,"approvedCourseHasLabels",d,this);babelHelpers.initializerDefineProperty(this,"proposedCourseHasLabels",h,this);babelHelpers.initializerDefineProperty(this,"removedApprovedCourseHasLabels",m,this);babelHelpers.initializerDefineProperty(this,"removedProposedCourseHasLabels",f,this);this.courseId=e;this.propagateChangesToServer=r;for(const e of t){this._addLocalCourseHasLabel(e)}}addAssignment(e){const t=e.label.id;if(e instanceof u){this.proposedCourseHasLabels.push(e);this._removeCourseHasLabel(t,"removedProposedCourseHasLabels")}else if(e instanceof s["a"]){this.approvedCourseHasLabels.push(e);this._removeCourseHasLabel(t,"removedApprovedCourseHasLabels")}}removeAssignment(e){const t=e.label.id;if(e instanceof u){this.removedProposedCourseHasLabels.push(e);this._removeCourseHasLabel(t,"proposedCourseHasLabels")}else if(e instanceof s["a"]){this.removedApprovedCourseHasLabels.push(e);this._removeCourseHasLabel(t,"approvedCourseHasLabels")}}makeCourseHasLabel(e){return new s["a"](this.courseId,e,this.propagateChangesToServer,this.addAssignment,this.removeAssignment)}makeProposedCourseHasLabel(e){return new u(this.courseId,e,this.propagateChangesToServer,this.addAssignment,this.removeAssignment)}_addLocalCourseHasLabel(e){let t;if(e._class===a["a"]){t=this.makeCourseHasLabel(e)}else if(e._class===a["d"]){t=this.makeProposedCourseHasLabel(e)}this.addAssignment(t);return t}_removeCourseHasLabel(e,t){this[t]=this[t].filter((t=>t.label.id!==e))}get courseHasLabels(){return[...this.approvedCourseHasLabels,...this.proposedCourseHasLabels]}get removedAssignments(){return[...this.removedApprovedCourseHasLabels,...this.removedProposedCourseHasLabels]}get canAddLabel(){return this.visibleCourseHasLabels.length<a["c"]}addLabel(e){const t=this.proposedCourseHasLabels.find((t=>t.label.id===e.id));if(!t){const t=this.makeProposedCourseHasLabel({label:e,approval_status:s["a"].APPROVAL_STATUS.unapproved,is_primary:false});return t.create()}return Promise.resolve()}get primaryCourseHasLabels(){return this.visibleCourseHasLabels.filter((e=>e.is_primary))}get nonPrimaryCourseHasLabels(){return this.visibleCourseHasLabels.filter((e=>!e.is_primary))}get visibleCourseHasLabels(){return this.courseHasLabels.filter((e=>!e.is_deleted))}get canApprove(){return this.visibleCourseHasLabels.every((e=>e.label.status===l["b"].LABEL_STATUS.approved))&&this.primaryCourseHasLabels.length>0}get approvalStatus(){const e=e=>e.approval_status===s["a"].APPROVAL_STATUS.escalated;const t=e=>e.approval_status===s["a"].APPROVAL_STATUS.unapproved;if(this.proposedCourseHasLabels.some(e)){return s["a"].APPROVAL_STATUS.escalated}else if(this.proposedCourseHasLabels.some(t)){return s["a"].APPROVAL_STATUS.unapproved}return s["a"].APPROVAL_STATUS.approved}changeApproval(e){return o["f"].patch(`courses/${this.courseId}/proposed-assignments/`,{approval_status:e}).then(Object(i["e"])((()=>{for(const t of this.courseHasLabels){t.approval_status=e}})))}},d=babelHelpers.applyDecoratedDescriptor(p.prototype,"approvedCourseHasLabels",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),h=babelHelpers.applyDecoratedDescriptor(p.prototype,"proposedCourseHasLabels",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),m=babelHelpers.applyDecoratedDescriptor(p.prototype,"removedApprovedCourseHasLabels",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),f=babelHelpers.applyDecoratedDescriptor(p.prototype,"removedProposedCourseHasLabels",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),babelHelpers.applyDecoratedDescriptor(p.prototype,"addAssignment",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(p.prototype,"addAssignment"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"removeAssignment",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(p.prototype,"removeAssignment"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"_addLocalCourseHasLabel",[n["a"]],Object.getOwnPropertyDescriptor(p.prototype,"_addLocalCourseHasLabel"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"courseHasLabels",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"courseHasLabels"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"removedAssignments",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"removedAssignments"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"canAddLabel",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"canAddLabel"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"addLabel",[i["e"]],Object.getOwnPropertyDescriptor(p.prototype,"addLabel"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"primaryCourseHasLabels",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"primaryCourseHasLabels"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"nonPrimaryCourseHasLabels",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"nonPrimaryCourseHasLabels"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"visibleCourseHasLabels",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"visibleCourseHasLabels"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"canApprove",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"canApprove"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"approvalStatus",[i["g"]],Object.getOwnPropertyDescriptor(p.prototype,"approvalStatus"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"changeApproval",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(p.prototype,"changeApproval"),p.prototype),p)},"./src/udemy/js/course-labels/course-label.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/@udemy/icons/dist/close.ud-icon");var a=r.n(o);var s=r("./node_modules/@udemy/icons/dist/expand-plus.ud-icon");var l=r.n(s);var c=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var u=r("./node_modules/autobind-decorator/lib/esm/index.js");var p=r("./node_modules/classnames/index.js");var d=r.n(p);var h=r("./node_modules/prop-types/index.js");var m=r.n(h);var f=r("./node_modules/react/index.js");var g=r.n(f);var y=r("./src/udemy/js/utils/noop.js");var b=r("./src/udemy/js/course-labels/course-labels.less");var v=r.n(b);var w,E;const S={"./course-labels.less":{ellipsis:"course-labels--ellipsis--3TS2I","ud-ellipsis-1-line":"course-labels--ud-ellipsis-1-line--6lxio",strikethrough:"course-labels--strikethrough--3f4WC","course-labels":"course-labels--course-labels--gbBja","course-label":"course-labels--course-label--1Vi_C","course-label-link":"course-labels--course-label-link--nsMd1","course-label-icon-btn":"course-labels--course-label-icon-btn--3JKTe","primary-label-selects":"course-labels--primary-label-selects--18YSV","primary-label-select":"course-labels--primary-label-select--3mx9x"}};let _=(w=(E=class e extends f["Component"]{addLabel(e){e.preventDefault();this.props.onAdd(this.props.label)}deleteLabel(e){e.preventDefault();this.props.onDelete(this.props.label)}render(){let e,t;let r=g.a.createElement("span",{className:"course-labels--ellipsis--3TS2I"},this.props.label.title);if(this.props.strikeThrough&&!this.props.locked&&this.props.showAdd){t=g.a.createElement(l.a,{label:gettext("Add")});e=this.addLabel}else if(!this.props.strikeThrough&&!this.props.locked){t=g.a.createElement(a.a,{label:gettext("Deselect")});e=this.deleteLabel}if(this.props.link){t=t&&g.a.createElement(c["a"],{udStyle:"link",onClick:e,className:"course-labels--course-label-icon-btn--3JKTe"},t);e=null;r=g.a.createElement("a",{href:this.props.link,target:"_blank",rel:"noopener noreferrer",className:"course-labels--course-label-link--nsMd1"},r)}return g.a.createElement(c["a"],{componentClass:e?"button":"div",round:true,size:"small","data-purpose":`label-id-${this.props.label.id}`,onClick:e,className:i()(d()("course-label",{strikethrough:this.props.strikeThrough}),S)},r,t)}},E.propTypes={label:m.a.object.isRequired,strikeThrough:m.a.bool,locked:m.a.bool,onDelete:m.a.func,onAdd:m.a.func,showAdd:m.a.bool,link:m.a.string},E.defaultProps={strikeThrough:false,locked:false,onDelete:y["a"],onAdd:y["a"],showAdd:false,link:null},E),babelHelpers.applyDecoratedDescriptor(w.prototype,"addLabel",[u["a"]],Object.getOwnPropertyDescriptor(w.prototype,"addLabel"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"deleteLabel",[u["a"]],Object.getOwnPropertyDescriptor(w.prototype,"deleteLabel"),w.prototype),w)},"./src/udemy/js/course-labels/course-labels.less":function(e,t,r){e.exports={ellipsis:"course-labels--ellipsis--3TS2I",strikethrough:"course-labels--strikethrough--3f4WC","course-labels":"course-labels--course-labels--gbBja","course-label":"course-labels--course-label--1Vi_C","course-label-link":"course-labels--course-label-link--nsMd1","course-label-icon-btn":"course-labels--course-label-icon-btn--3JKTe","primary-label-selects":"course-labels--primary-label-selects--18YSV","primary-label-select":"course-labels--primary-label-select--3mx9x"}},"./src/udemy/js/course-labels/course-labels.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));r.d(t,"b",(function(){return h}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/base-components/form/autosuggest/autosuggest.mobx-store.tsx");var a=r("./src/udemy/js/utils/ud-api.js");var s,l;const c={"fields[course_label]":"@default,versions"};const u={"fields[proposed_course_label]":"@default"};const p=6;const d={id:-1};let h=(s=class e extends o["a"]{constructor(e){super();babelHelpers.initializerDefineProperty(this,"addNewLabel",l,this);this.canPropose=e}create(e){return a["f"].post("course-labels/propose/",{title:e},{params:u})}async loadSuggestions(e){let{q:t,signal:r}=e;const n={...c,search:t};const i=await a["f"].get("course-labels/",{params:n,signal:r});const o=(i.data.results||[]).slice(0,p);if(this.canPropose){o.push(d)}this.setSuggestions(o)}handleNewLabelClick(){this.addNewLabel=true}reset(){this.clearInputValue();this.addNewLabel=false}},l=babelHelpers.applyDecoratedDescriptor(s.prototype,"addNewLabel",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"loadSuggestions",[i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"loadSuggestions"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"handleNewLabelClick",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"handleNewLabelClick"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"reset",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(s.prototype,"reset"),s.prototype),s);h.LABEL_STATUS={deleted:-1,pending:0,approved:1}},"./src/udemy/js/course-labels/course-labels.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var i=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var o=r("./node_modules/autobind-decorator/lib/esm/index.js");var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/course-labels/label-autosuggestion.react-component.tsx");var d=r("./src/udemy/js/instructor/toasts.js");var h=r("./src/udemy/js/utils/ud-me.js");var m=r("./src/udemy/js/course-labels/course-has-labels.mobx-store.js");var f=r("./src/udemy/js/course-labels/course-label.react-component.js");var g=r("./src/udemy/js/course-labels/course-labels.mobx-store.js");var y=r("./src/udemy/js/course-labels/course-labels.less");var b=r.n(y);var v,w,E;let S=Object(a["f"])(v=(w=(E=class e extends c["Component"]{constructor(e){super(e);this.canPropose=this.props.canPropose&&h["a"].locale==="en_US";this.courseLabelsStore=new g["b"](this.canPropose)}onSuggestionSelected(e){if(e===g["a"]){return this.addProposedLabel()}this.courseLabelsStore.reset();this.props.courseHasLabelsStore.addLabel(e).catch((()=>{Object(d["a"])(interpolate(gettext('Something went wrong adding the topic "%(topic)s" to this course.  Please refresh and try again.'),{topic:e.title},true))}))}addProposedLabel(){if(!this.canPropose){return}const e=this.courseLabelsStore.inputValue;this.courseLabelsStore.create(e).then((e=>{this.props.courseHasLabelsStore.addLabel(e.data);this.courseLabelsStore.reset()})).catch((()=>{this.courseLabelsStore.reset();Object(d["a"])(interpolate(gettext('Something went wrong proposing the topic "%(topic)s".  Please try again.'),{topic:e},true))}))}renderLabels(e){if(this.props.renderLabels){return this.props.renderLabels()}const t=[];e.forEach((e=>{if(!e.is_deleted||this.props.strikeThrough){t.push(u.a.createElement(f["a"],{key:e.label.id,label:e.label,strikeThrough:e.is_deleted,locked:this.props.locked,onAdd:e.create,showAdd:this.props.courseHasLabelsStore.canAddLabel,onDelete:e.delete}))}}));return!t.length?null:u.a.createElement("span",{className:"course-labels--course-labels--gbBja"},t)}renderAutosuggestComponent(){return u.a.createElement(p["a"],{autosuggestPlaceholder:gettext("e.g. Landscape Photography"),onSuggestionSelected:this.onSuggestionSelected,courseLabelsStore:this.courseLabelsStore,autofocus:this.props.courseHasLabelsStore.visibleCourseHasLabels.length>0,addProposedLabel:this.addProposedLabel})}get searchBoxVisible(){return this.courseLabelsStore.addNewLabel&&this.props.courseHasLabelsStore.canAddLabel||!this.props.courseHasLabelsStore.visibleCourseHasLabels.length}render(){let e,t;if(this.searchBoxVisible){e=this.renderAutosuggestComponent()}else if(!this.props.locked&&this.props.courseHasLabelsStore.canAddLabel){t=u.a.createElement(n["a"],{udStyle:"link","data-purpose":"display-autosuggest-box",onClick:this.courseLabelsStore.handleNewLabelClick,className:"ud-link-neutral ud-link-underline",typography:"ud-text-xs"},gettext("Propose another topic..."))}else if(!this.props.locked){t=gettext("A maximum of 4 topics are allowed. To replace a topic, first remove one.")}return u.a.createElement(i["b"],{label:gettext("Topic"),labelProps:{className:"ud-sr-only"},note:t},this.renderLabels(this.props.courseHasLabelsStore.courseHasLabels),e)}},E.propTypes={courseHasLabelsStore:l.a.instanceOf(m["a"]).isRequired,strikeThrough:l.a.bool,renderLabels:l.a.func,canPropose:l.a.bool,locked:l.a.bool},E.defaultProps={strikeThrough:false,renderLabels:undefined,canPropose:true,locked:false},E),babelHelpers.applyDecoratedDescriptor(w.prototype,"onSuggestionSelected",[o["a"]],Object.getOwnPropertyDescriptor(w.prototype,"onSuggestionSelected"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"addProposedLabel",[o["a"]],Object.getOwnPropertyDescriptor(w.prototype,"addProposedLabel"),w.prototype),w))||v},"./src/udemy/js/course-labels/label-autosuggestion.less":function(e,t,r){e.exports={ellipsis:"label-autosuggestion--ellipsis--usFEX",ul:"label-autosuggestion--ul--3m5dt",suggestions:"label-autosuggestion--suggestions--2khwV","propose-label":"label-autosuggestion--propose-label--12bUz","suggested-label":"label-autosuggestion--suggested-label--30mh6"}},"./src/udemy/js/course-labels/label-autosuggestion.react-component.tsx":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var i=r("./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.react-component.js");var o=r("./node_modules/autobind-decorator/lib/esm/index.js");var a=r("./node_modules/mobx/lib/mobx.module.js");var s=r("./node_modules/mobx-react/dist/mobx-react.module.js");var l=r("./node_modules/react/index.js");var c=r.n(l);var u=r("./src/udemy/js/course-labels/course-labels.mobx-store.js");var p=r("./src/udemy/js/course-labels/label-autosuggestion.less");var d=r.n(p);var h=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let m=class e extends c.a.Component{constructor(){super(...arguments);this.shouldBlurAutosuggest=true}setShouldBlurAutosuggest(e){this.shouldBlurAutosuggest=e}onSuggestionsMouseDown(){this.setShouldBlurAutosuggest(false)}onInputBlur(){this.autosuggestBlurTimeoutId&&clearTimeout(this.autosuggestBlurTimeoutId);this.autosuggestBlurTimeoutId=setTimeout((()=>{this.shouldBlurAutosuggest&&this.props.courseLabelsStore.reset();this.setShouldBlurAutosuggest(true)}),0)}onInputKeyDown(e){var t,r;if(e.keyCode===n["b"].RETURN&&!this.props.courseLabelsStore.selectedSuggestion){e.preventDefault();(r=(t=this.props).addProposedLabel)===null||r===void 0?void 0:r.call(t)}}renderSuggestions(e,t){return c.a.createElement("ul",{className:"ud-unstyled-list label-autosuggestion--suggestions--2khwV",onMouseDown:this.onSuggestionsMouseDown},e.map(((e,r)=>{if(e===u["a"]){return c.a.createElement("li",{key:r,className:"label-autosuggestion--propose-label--12bUz"},t(r,interpolate(gettext('Propose new topic "%s"'),[this.props.courseLabelsStore.inputValue]),{"data-purpose":"propose-label"}))}return c.a.createElement("li",{key:r,className:"label-autosuggestion--suggested-label--30mh6"},t(r,c.a.createElement("span",{className:"label-autosuggestion--ellipsis--usFEX"},e.title),{round:true,udStyle:"secondary",size:"small",typography:"ud-heading-sm"}))})))}render(){return c.a.createElement(i["a"],{autosuggestStore:this.props.courseLabelsStore,renderSuggestions:this.renderSuggestions,noResultsContent:null,onSuggestionSelected:this.props.onSuggestionSelected,"data-purpose":"autosuggest-input",placeholder:this.props.autosuggestPlaceholder,autoFocus:this.props.autofocus,onBlur:this.onInputBlur,onKeyDown:this.onInputKeyDown})}};h([a["t"]],m.prototype,"shouldBlurAutosuggest",void 0);h([a["e"]],m.prototype,"setShouldBlurAutosuggest",null);h([o["a"]],m.prototype,"onSuggestionsMouseDown",null);h([o["a"]],m.prototype,"onInputBlur",null);h([o["a"]],m.prototype,"onInputKeyDown",null);h([o["a"]],m.prototype,"renderSuggestions",null);m=h([s["f"]],m)},"./src/udemy/js/course-labels/primary-label-select.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var i=r("./node_modules/@udemy/react-form-components/dist/esm/select/select.react-component.js");var o=r("./node_modules/autobind-decorator/lib/esm/index.js");var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/utils/noop.js");var d=r("./src/udemy/js/course-labels/course-labels.less");var h=r.n(d);var m,f,g;let y=Object(a["f"])(m=(f=(g=class e extends c["Component"]{onChange(e){const t=this.props.primaryLabel;let r;if(e.target.value===""){r=null}else{r=this.props.labels.find((t=>t.label.id===parseInt(e.target.value,10)))}this.props.onPrimaryLabelChange(t,r)}render(){const{primaryLabel:e}=this.props;return u.a.createElement("div",{className:"course-labels--primary-label-selects--18YSV"},u.a.createElement("div",{className:"course-labels--primary-label-select--3mx9x"},u.a.createElement(n["b"],{label:this.props.placeholderCopy,labelProps:{className:"ud-sr-only"}},u.a.createElement(i["a"],{name:"labels_primary",value:e===null?"":e.label.id,onChange:this.onChange,"data-purpose":"primary-label-input",disabled:this.props.locked},u.a.createElement("option",{value:""},this.props.placeholderCopy),this.props.labels.map((e=>u.a.createElement("option",{key:e.label.id,value:e.label.id},gettext(e.label.title))))))))}},g.propTypes={primaryLabel:l.a.object,labels:l.a.array.isRequired,placeholderCopy:l.a.string,onPrimaryLabelChange:l.a.func,locked:l.a.bool},g.defaultProps={primaryLabel:null,placeholderCopy:gettext("Select a primary topic"),onPrimaryLabelChange:p["a"],locked:false},g),babelHelpers.applyDecoratedDescriptor(f.prototype,"onChange",[o["a"]],Object.getOwnPropertyDescriptor(f.prototype,"onChange"),f.prototype),f))||m},"./src/udemy/js/course-manage-practice-test/events.ts":function(e,t,r){"use strict";r.d(t,"y",(function(){return P}));r.d(t,"a",(function(){return a}));r.d(t,"b",(function(){return s}));r.d(t,"c",(function(){return l}));r.d(t,"d",(function(){return c}));r.d(t,"e",(function(){return u}));r.d(t,"f",(function(){return p}));r.d(t,"g",(function(){return d}));r.d(t,"h",(function(){return h}));r.d(t,"i",(function(){return m}));r.d(t,"j",(function(){return f}));r.d(t,"k",(function(){return g}));r.d(t,"l",(function(){return y}));r.d(t,"m",(function(){return b}));r.d(t,"n",(function(){return v}));r.d(t,"o",(function(){return w}));r.d(t,"p",(function(){return E}));r.d(t,"r",(function(){return S}));r.d(t,"s",(function(){return _}));r.d(t,"t",(function(){return x}));r.d(t,"u",(function(){return D}));r.d(t,"v",(function(){return C}));r.d(t,"w",(function(){return T}));r.d(t,"x",(function(){return O}));r.d(t,"q",(function(){return k}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class i extends n["a"]{constructor(e,t){super(e);this.practiceTest=t.practiceTest;this.course=t.course}}class o extends i{constructor(e,t){super(e,t);this.question=t.question}}class a extends o{constructor(e){super("PracticeTestAIErrorPresented",e)}}class s extends o{constructor(e){super("PracticeTestAIGenerationAccepted",e)}}class l extends o{constructor(e){super("PracticeTestAIGenerationDismissed",e)}}class c extends o{constructor(e){super("PracticeTestAIGenerationNotAcceptedErrorPresented",e)}}class u extends o{constructor(e){super("PracticeTestAIGenerationRequested",e);this.isFirstRequest=e.isFirstRequest}}class p extends i{constructor(e){super("PracticeTestCreated",e)}}class d extends i{constructor(e){super("PracticeTestEdited",e);this.status=e.status}}class h extends i{constructor(e){super("PracticeTestPreviewed",e)}}class m extends i{constructor(e){super("PracticeTestPublished",e)}}class f extends o{constructor(e){super("PracticeTestQuestionAnswerAdded",e)}}class g extends o{constructor(e){super("PracticeTestQuestionAnswerDeleted",e)}}class y extends i{constructor(e){super("PracticeTestQuestionBulkUploadCanceled",e)}}class b extends i{constructor(e){super("PracticeTestQuestionBulkUploadFailureModalPresented",e)}}class v extends i{constructor(e){super("PracticeTestQuestionBulkUploadOverwriteCanceled",e)}}class w extends i{constructor(e){super("PracticeTestQuestionBulkUploadOverwriteConfirmed",e)}}class E extends i{constructor(e){super("PracticeTestQuestionBulkUploadTemplateDownloaded",e)}}class S extends o{constructor(e){super("PracticeTestQuestionCorrectAnswerSelected",e);this.selectedAnswers=e.selectedAnswer}}class _ extends o{constructor(e){super("PracticeTestQuestionDeleted",e)}}class x extends o{constructor(e){super("PracticeTestQuestionDomainAdded",e);this.newlyCreated=e.newlyCreated}}class D extends o{constructor(e){super("PracticeTestQuestionDomainDeleted",e)}}class C extends o{constructor(e){super("PracticeTestQuestionEdited",e);this.isAIGenerated=e.isAIGenerated;this.pctOfEditOnAIGeneratedFeedbacks=e.pctOfEditOnAIGeneratedFeedbacks}}class T extends i{constructor(e){super("PracticeTestQuestionMenuSelected",e);this.selectionType=e.selectionType}}class O extends o{constructor(e){super("PracticeTestQuestionResourceAdded",e);this.resourceType=e.resourceType}}class k extends i{constructor(e){super("PracticeTestQuestionsBulkUploaded",e)}}function P(e,t){return new e(t)}},"./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupon-creation-modal.less":function(e,t,r){e.exports={block:"coupon-creation-modal--block--1TDNp","mt-xxs":"coupon-creation-modal--mt-xxs--2p0Mm","mt-xs":"coupon-creation-modal--mt-xs--2wKK3","mt-sm":"coupon-creation-modal--mt-sm--1IUWc","text-center":"coupon-creation-modal--text-center--Qco18","text-with-tooltip-icon":"coupon-creation-modal--text-with-tooltip-icon--20Ba2","tooltip-icon":"coupon-creation-modal--tooltip-icon--2HiiL",loader:"coupon-creation-modal--loader--icSpJ","alert-banner":"coupon-creation-modal--alert-banner--2o1Ts","coupon-options":"coupon-creation-modal--coupon-options--Lq6kf","coupon-option":"coupon-creation-modal--coupon-option--1Bnje","datetime-inputs":"coupon-creation-modal--datetime-inputs--NF567","left-right-buttons":"coupon-creation-modal--left-right-buttons--gX9Ij"}},"./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupon-creation.less":function(e,t,r){e.exports={"create-coupon-container":"coupon-creation--create-coupon-container--kKUuq","coupons-remaining":"coupon-creation--coupons-remaining--2uFXB","create-coupon-button":"coupon-creation--create-coupon-button--2WUcw"}},"./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupons-table/coupon-code-link.less":function(e,t,r){e.exports={"success-text":"coupon-code-link--success-text--18th-","success-icon":"coupon-code-link--success-icon--26K8w"}},"./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupons-table/desktop/coupons-desktop.less":function(e,t,r){e.exports={"title-container":"coupons-desktop--title-container--3-n3p","search-coupons":"coupons-desktop--search-coupons--1ah4z","no-results":"coupons-desktop--no-results--3F3mH","enable-coupon-toggler":"coupons-desktop--enable-coupon-toggler--2iuyo",pagination:"coupons-desktop--pagination--1F-YL",loading:"coupons-desktop--loading--3UIAg",pulse:"coupons-desktop--pulse--2vjXr"}},"./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupons-table/mobile/coupons-mobile.less":function(e,t,r){e.exports={container:"coupons-mobile--container--3IeO4","accordion-panel":"coupons-mobile--accordion-panel--V-5wC",title:"coupons-mobile--title--3hTak","create-multiple-coupons":"coupons-mobile--create-multiple-coupons--Q5j3B","search-coupons":"coupons-mobile--search-coupons--3Vo31","coupon-link":"coupons-mobile--coupon-link--3vaxq","no-results":"coupons-mobile--no-results--1P_9K",coupon:"coupons-mobile--coupon--2s0O6",pagination:"coupons-mobile--pagination--1Ja_c",loading:"coupons-mobile--loading--1pef_",pulse:"coupons-mobile--pulse--3OpLy"}},"./src/udemy/js/course-manage-price-and-coupons/coupons/v2/percent-coupons-route.less":function(e,t,r){e.exports={heading:"percent-coupons-route--heading--3g1u8","alert-banner":"percent-coupons-route--alert-banner--1SG9a","referral-link-panel":"percent-coupons-route--referral-link-panel--2dSvY","referral-link":"percent-coupons-route--referral-link--3vSmv","mobile-copy-button":"percent-coupons-route--mobile-copy-button--1KrJN"}},"./src/udemy/js/course-manage-price-and-coupons/price/beta-badge.less":function(e,t,r){e.exports={"beta-badge":"beta-badge--beta-badge--2rZHv"}},"./src/udemy/js/course-manage-price-and-coupons/price/price-form/price-select.less":function(e,t,r){e.exports={"price-select":"price-select--price-select--3gmzG","btn-group":"price-select--btn-group--EPlhv",btn:"price-select--btn--3_dyL","title-container":"price-select--title-container--3nGzv","title-spacer":"price-select--title-spacer--3up0m"}},"./src/udemy/js/course-manage-price-and-coupons/price/price.less":function(e,t,r){e.exports={"alert-banner":"price--alert-banner--2eKBX","opt-in-section-title":"price--opt-in-section-title--3EOsp"}},"./src/udemy/js/course-manage-price-and-coupons/price/v2/price-select.less":function(e,t,r){e.exports={"price-select":"price-select--price-select--LvR_3","btn-group":"price-select--btn-group--3FVz4","save-price-button":"price-select--save-price-button--HoGXL",btn:"price-select--btn---8cU6","title-container":"price-select--title-container--QyKkS","title-spacer":"price-select--title-spacer--1wsTx","text-bottom-align":"price-select--text-bottom-align--1dEYs","font-weight-bold":"price-select--font-weight-bold--2CEJ2","popover-secondary-price-tier":"price-select--popover-secondary-price-tier--PUgRi"}},"./src/udemy/js/course-manage-price-and-coupons/price/v2/price.less":function(e,t,r){e.exports={"course-pricing-free-prices-only-container":"price--course-pricing-free-prices-only-container--2yMfu","course-pricing-opted-in-container":"price--course-pricing-opted-in-container--Jh44w","course-pricing-opted-out-container":"price--course-pricing-opted-out-container--3pTqk","course-pricing-selection":"price--course-pricing-selection--1sTb4","course-pricing-deals":"price--course-pricing-deals--3jukF",heading:"price--heading--3v5ct","content-opted-out":"price--content-opted-out--3UMRg","learn-more":"price--learn-more--2CiXl","course-pricing-deals-panel":"price--course-pricing-deals-panel--2L2oW","alert-banner":"price--alert-banner--2auwF","alert-banner-free-paid":"price--alert-banner-free-paid--1zmSd","opt-in-section-title":"price--opt-in-section-title--10EpF","course-price-select":"price--course-price-select--2gmu5","course-pricing-deals-panel-top":"price--course-pricing-deals-panel-top--3s6b5","course-pricing-deals-panel-bottom":"price--course-pricing-deals-panel-bottom--3aelS","price-range":"price--price-range--3HSBo","price-range-non-free":"price--price-range-non-free--25ML7","price-range-to-be-computed":"price--price-range-to-be-computed--33Jvn","price-range-error":"price--price-range-error--p9thw","info-price-popover":"price--info-price-popover--3ju7r","popover-secondary-price-tier":"price--popover-secondary-price-tier--1b5Sb","where-price-shown":"price--where-price-shown--2aZwp","font-weight-normal":"price--font-weight-normal--38Sa2"}},"./src/udemy/js/course-manage-v2/accessibility/accessibility.less":function(e,t,r){e.exports={subheading:"accessibility--subheading--2HJSe","item-learn-more":"accessibility--item-learn-more--3Fmv1",checkbox:"accessibility--checkbox--3ydSt",accordion:"accessibility--accordion--c00vK"}},"./src/udemy/js/course-manage-v2/app.global.less":function(e,t,r){},"./src/udemy/js/course-manage-v2/app.less":function(e,t,r){e.exports={container:"app--container--7qJMh",content:"app--content--3vcMt"}},"./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var l=r("./src/udemy/js/utils/noop.js");var c=r("./src/udemy/js/utils/s3-upload-configuration.js");var u=r("./src/udemy/js/utils/ud-api.js");var p=r("./src/udemy/js/utils/ud-s3fineuploader.js");var d=r("./src/udemy/js/course-manage-v2/asset-library/constants.js");var h,m,f,g;let y=(h=class e{constructor(e,t,r){this._completeCallback=l["a"];babelHelpers.initializerDefineProperty(this,"isInitialized",m,this);babelHelpers.initializerDefineProperty(this,"isLoading",f,this);babelHelpers.initializerDefineProperty(this,"asset",g,this);this.sortableFields=[];this.uploadLabelsOverride=void 0;this.changeLabelsOverride=void 0;this.type=e;this.fileUploader=new p["a"]({sizeLimit:this.maxFileSize,acl:"private",allowedExtensionsDotted:this.allowedExtensionsDotted,onProgress:this.onUploadProgress,onComplete:this._onUploadComplete,onError:this._onError});this.uploadLabelsOverride=t||{};this.changeLabelsOverride=r||{}}get displayedAssetType(){return this.type===d["c"].misc?d["c"].file:this.type}deleteAsset(){if(this.asset){this.asset.isDisabled=true;this.asset=null;this.fileUploader.cancel();this.fileUploader.reset()}}initializeAsset(e){this.setAsset(e.title);this.updateAssetStatus(e)}setAsset(e){this.asset={id:"placeholder",progress_percentage:0,status:d["b"].uploading,title:e,created:new Date,asset_type:this.displayedAssetType,isDisabled:false,openExtraInfo:false,processing_errors:[],delayed_asset_message:null};this.isInitialized=true}updateAssetStatus(e){if(!this.asset){return}["status","processing_errors","delayed_asset_message"].forEach((t=>{if(t in e){this.asset[t]=e[t]}}));if(this.asset.status===d["b"].failed){this.asset.openExtraInfo=true;this.asset.isDisabled=false}}get isDisabled(){return this.assets.some((e=>e.isDisabled))}disableAsset(){this.assets.forEach(Object(i["e"])((e=>{e.isDisabled=true})))}get assets(){if(this.asset){return[this.asset]}return[]}get total(){return this.assets.length}get maxFileSize(){if(this.type===d["c"].video){return 1e3*1e3*4e3}return 1e3*1e3*1e3}get notes(){let e;switch(this.type){case d["c"].video:e=gettext("<b>Note</b>: All files should be at least 720p and less than 4.0 GB.");break;case d["c"].audio:e=gettext("<b>Note</b>: An audio lecture lets your voice do the teaching. "+"An aural experience can be useful to stimulate the imagination and "+"promote independent visualization and knowledge association. "+"If you use an audio lecture, make sure your audio is clean, crisp, and easy to listen to!");break;case d["c"].presentation:e=gettext("<b>Note</b>: A presentation means slides (e.g. PowerPoint, Keynote). "+"Slides are a great way to combine text and visuals to explain concepts in an effective and efficient way. "+"Use meaningful graphics and clearly legible text!");break;case d["c"].ebook:e=gettext("<b>Note</b>: A document lecture is for any type of PDF document or handout for your students. "+"You can make this a downloadable document for easy and quick reference. "+"Make sure everything is legible and the file size is less than 1 GiB.");break;case d["c"].sourceCode:e=gettext("<b>Note</b>: Only available for Python and Ruby for now. You can upload .py and .rb files.");break;case d["c"].file:case d["c"].misc:e=gettext("<b>Note</b>: A resource is for any type of document that can be used to help students in the lecture. "+"This file is going to be seen as a lecture extra. Make sure everything is legible and the file size is less than 1 GiB.");break;default:break}if(this.asset&&this.asset.status===d["b"].processing){e=interpolate(gettext("<b>Note:</b> This %(type)s is still being processed. We will send you an email when it is ready."),{type:this.type.toLowerCase()},true)}else if(this.asset&&this.asset.delayed_asset_message){e=interpolate(gettext("<b>Note:</b> %(note)s"),{note:this.asset.delayed_asset_message},true)}if(!e){return null}return a.a.createElement("div",Object(s["a"])({descriptionOfCaller:"asset-uploader:note",html:e}))}get allowedExtensions(){return this.fileUploader.allowedExtensions}get allowedExtensionsDotted(){switch(this.type){case d["c"].video:return c["e"];case d["c"].audio:return c["a"];case d["c"].presentation:case d["c"].ebook:return c["c"];case d["c"].sourceCode:return c["d"];case d["c"].file:case d["c"].misc:default:return[]}}get uploadLabel(){switch(this.type){case d["c"].video:return this.uploadLabelsOverride[this.type]||gettext("Select Video");case d["c"].audio:return this.uploadLabelsOverride[this.type]||gettext("Select Audio");case d["c"].presentation:case d["c"].ebook:return this.uploadLabelsOverride[this.type]||gettext("Select PDF");default:return this.uploadLabelsOverride[this.type]||gettext("Select File")}}get changeLabel(){switch(this.type){case d["c"].video:return this.changeLabelsOverride[this.type]||gettext("Change Video");case d["c"].audio:return this.changeLabelsOverride[this.type]||gettext("Change Audio");case d["c"].presentation:case d["c"].ebook:return this.changeLabelsOverride[this.type]||gettext("Change PDF");default:return this.changeLabelsOverride[this.type]||gettext("Change File")}}upload(e){this.fileUploader.upload(e)}onUploadProgress(e,t){if(this.asset){this.asset.progress_percentage=Math.round(e/t*100)}}registerUploadCompleteHandler(e){this._completeCallback=e}_onUploadComplete(e){let t=null;switch(this.type){case d["c"].video:t="users/me/video-assets/";break;case d["c"].audio:t="users/me/audio-assets/";break;case d["c"].presentation:t="users/me/presentation-assets/";break;case d["c"].ebook:t="users/me/ebook-assets/";break;case d["c"].sourceCode:t="users/me/source-code-assets/";break;case d["c"].file:case d["c"].misc:t="users/me/file-assets/";break}if(!t){this._onError(e.id,e.name,"File extension is not supported!");return}u["f"].post(t,e).then(Object(i["e"])((e=>{if(this.asset){this.asset.status=d["b"].processing;this._completeCallback(e.data)}}))).catch((t=>{this._onError(e.id,e.name,Object(u["j"])(t).detail)}))}_onError(e,t,r){if(this.asset&&t){this.asset.status=d["b"].failed;this.asset.processing_errors=[{message:r}];this.asset.openExtraInfo=true}}toggleAssetInfo(){this.asset.openExtraInfo=!this.asset.openExtraInfo}},m=babelHelpers.applyDecoratedDescriptor(h.prototype,"isInitialized",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),f=babelHelpers.applyDecoratedDescriptor(h.prototype,"isLoading",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),g=babelHelpers.applyDecoratedDescriptor(h.prototype,"asset",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(h.prototype,"deleteAsset",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"deleteAsset"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"initializeAsset",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"initializeAsset"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"setAsset",[i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"setAsset"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"updateAssetStatus",[i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"updateAssetStatus"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"isDisabled",[i["g"]],Object.getOwnPropertyDescriptor(h.prototype,"isDisabled"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"assets",[i["g"]],Object.getOwnPropertyDescriptor(h.prototype,"assets"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"total",[i["g"]],Object.getOwnPropertyDescriptor(h.prototype,"total"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"onUploadProgress",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"onUploadProgress"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"registerUploadCompleteHandler",[n["a"]],Object.getOwnPropertyDescriptor(h.prototype,"registerUploadCompleteHandler"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"_onUploadComplete",[n["a"]],Object.getOwnPropertyDescriptor(h.prototype,"_onUploadComplete"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"_onError",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"_onError"),h.prototype),babelHelpers.applyDecoratedDescriptor(h.prototype,"toggleAssetInfo",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(h.prototype,"toggleAssetInfo"),h.prototype),h)},"./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var i=r("./node_modules/@udemy/react-form-components/dist/esm/file-uploader/file-uploader.react-component.js");var o=r("./node_modules/autobind-decorator/lib/esm/index.js");var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/course-manage-v2/asset-library/asset-table.react-component.js");var d=r("./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.mobx-store.js");var h,m,f;let g=Object(a["f"])(h=(m=(f=class e extends c["Component"]{constructor(e){super(e);this.props.store.registerUploadCompleteHandler(this.onAssetUpload)}onAssetUpload(e){let{id:t}=e;this.props.store.disableAsset();this.props.onUpload(t)}async onFileSelected(e){const t=e.target.files[0];this.props.store.setAsset(t.name);const r=await this.props.validateBeforeUpload(t);if(r){this.props.store.upload(t)}else{this.props.store.deleteAsset()}}renderUploadForm(){return u.a.createElement(n["b"],{label:this.props.store.uploadLabel,labelProps:{className:"ud-sr-only"},note:this.props.showNotes?this.props.store.notes:null,validationState:this.props.validationState},u.a.createElement(i["a"],{allowedExtensionsDotted:this.props.store.allowedExtensionsDotted,name:"asset",onChange:this.onFileSelected,purpose:"asset-uploader-input",uploadLabel:this.props.store.uploadLabel}))}render(){return u.a.createElement("div",null,!this.props.store.total?this.renderUploadForm():u.a.createElement(p["a"],{store:this.props.store,onDelete:this.props.store.deleteAsset,onToggleInfo:this.props.store.toggleAssetInfo,hideTrashWhenDisabled:this.props.hideTrashWhenDisabled}))}},f.propTypes={store:l.a.instanceOf(d["a"]).isRequired,onUpload:l.a.func.isRequired,hideTrashWhenDisabled:l.a.bool,disabled:l.a.bool,showNotes:l.a.bool,validateBeforeUpload:l.a.func,validationState:l.a.oneOf(["neutral","error"])},f.defaultProps={disabled:false,hideTrashWhenDisabled:false,showNotes:true,validateBeforeUpload:()=>Promise.resolve(true),validationState:"neutral"},f),babelHelpers.applyDecoratedDescriptor(m.prototype,"onAssetUpload",[o["a"]],Object.getOwnPropertyDescriptor(m.prototype,"onAssetUpload"),m.prototype),babelHelpers.applyDecoratedDescriptor(m.prototype,"onFileSelected",[o["a"]],Object.getOwnPropertyDescriptor(m.prototype,"onFileSelected"),m.prototype),m))||h},"./src/udemy/js/course-manage-v2/asset-creator/form-asset-creator.less":function(e,t,r){e.exports={form:"form-asset-creator--form--13c9P","alert-banner":"form-asset-creator--alert-banner--xBKkT","submit-row":"form-asset-creator--submit-row--2LcIb"}},"./src/udemy/js/course-manage-v2/asset-creator/media-asset-creator.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n=r("./node_modules/mobx-react/dist/mobx-react.module.js");var i=r("./node_modules/prop-types/index.js");var o=r.n(i);var a=r("./node_modules/react/index.js");var s=r.n(a);var l=r("./src/udemy/js/base-components/tabs/tabs.react-component.tsx");var c=r("./src/udemy/js/course-manage-v2/asset-library/asset-library.mobx-store.js");var u=r("./src/udemy/js/course-manage-v2/asset-library/asset-library.react-component.js");var p=r("./src/udemy/js/course-manage-v2/asset-library/constants.js");var d=r("./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.mobx-store.js");var h=r("./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.react-component.js");var m,f;let g=Object(n["f"])(m=(f=class e extends a["Component"]{render(){return s.a.createElement(l["b"],null,s.a.createElement(l["b"].Tab,{title:interpolate(gettext("Upload %(type)s"),{type:p["a"][this.props.type]},true)},s.a.createElement(h["a"],{store:this.props.uploaderStore,onUpload:this.props.onAssetSelected})),s.a.createElement(l["b"].Tab,{title:gettext("Add from library")},s.a.createElement(u["a"],{store:this.props.libraryStore,onSelect:this.props.onAssetSelected})))}},f.propTypes={libraryStore:o.a.instanceOf(c["a"]).isRequired,uploaderStore:o.a.instanceOf(d["a"]).isRequired,type:o.a.oneOf([p["c"].audio,p["c"].ebook,p["c"].presentation,p["c"].video]).isRequired,onAssetSelected:o.a.func.isRequired},f))||m},"./src/udemy/js/course-manage-v2/asset-creator/selected-asset-cards.less":function(e,t,r){e.exports={flex:"selected-asset-cards--flex--1_LSs",ellipsis:"selected-asset-cards--ellipsis--2ass-","asset-card":"selected-asset-cards--asset-card--3tf0k","child-asset-details":"selected-asset-cards--child-asset-details--3L-sy","thumbnail-container":"selected-asset-cards--thumbnail-container--jymMF","content-summary":"selected-asset-cards--content-summary--3QJ65","btn-icon":"selected-asset-cards--btn-icon--2Qolz",actions:"selected-asset-cards--actions--15cOx"}},"./src/udemy/js/course-manage-v2/asset-creator/single-asset-table.less":function(e,t,r){e.exports={notes:"single-asset-table--notes--V9vfL"}},"./src/udemy/js/course-manage-v2/asset-creator/video-mashup-asset-creator/video-mashup-asset-creator.less":function(e,t,r){e.exports={ellipsis:"video-mashup-asset-creator--ellipsis--3TNCW",step:"video-mashup-asset-creator--step--viFow","step-header":"video-mashup-asset-creator--step-header--4cT1E","step-title":"video-mashup-asset-creator--step-title--2fgup","step-num":"video-mashup-asset-creator--step-num--3BoSm","step-completed":"video-mashup-asset-creator--step-completed--9mcUA","step-draft":"video-mashup-asset-creator--step-draft--3M0HA",synchronizer:"video-mashup-asset-creator--synchronizer--1t-9K","synchronizer-placeholder":"video-mashup-asset-creator--synchronizer-placeholder--1tkzM","asset-preview-container":"video-mashup-asset-creator--asset-preview-container--1z4Kn","action-buttons":"video-mashup-asset-creator--action-buttons--lP2G6","center-action-button":"video-mashup-asset-creator--center-action-button--39jA9"}},"./src/udemy/js/course-manage-v2/asset-library/asset-library.less":function(e,t,r){e.exports={"search-row":"asset-library--search-row--2KcVC",pagination:"asset-library--pagination--3JNij"}},"./src/udemy/js/course-manage-v2/asset-library/asset-library.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/axios/index.js");var o=r.n(i);var a=r("./node_modules/mobx/lib/mobx.module.js");var s=r("./src/udemy/js/utils/debounce.js");var l=r("./src/udemy/js/utils/ud-api.js");var c=r("./src/udemy/js/course-manage-v2/curriculum/item/constants.js");var u=r("./src/udemy/js/course-manage-v2/asset-library/constants.js");var p,d,h,m,f,g,y,b,v,w;let E=(p=class e{constructor(e){this.type=void 0;this.cancelSource=void 0;babelHelpers.initializerDefineProperty(this,"isInitialized",d,this);babelHelpers.initializerDefineProperty(this,"isLoading",h,this);babelHelpers.initializerDefineProperty(this,"page",m,this);babelHelpers.initializerDefineProperty(this,"pageSize",f,this);babelHelpers.initializerDefineProperty(this,"total",g,this);babelHelpers.initializerDefineProperty(this,"unused",y,this);babelHelpers.initializerDefineProperty(this,"assets",b,this);babelHelpers.initializerDefineProperty(this,"searchQuery",v,this);babelHelpers.initializerDefineProperty(this,"sortBy",w,this);this.sortableFields=["title","created"];this.type=e;this._debouncedSearchAssets=Object(s["a"])(this._searchAssets,200)}get numPages(){return Math.ceil(this.total/this.pageSize)}setPage(e){this.page=e;return this._loadAssets()}setSearchQuery(e){this.searchQuery=e;this._debouncedSearchAssets()}_searchAssets(){this.page=1;this._loadAssets()}setSortBy(e){const t=e.fieldName===this.sortBy.fieldName;this.sortBy={fieldName:e.fieldName,ascending:t?!this.sortBy.ascending:e.initialSortOrder==="ascending"};return this._loadAssets()}_loadAssets(){if(this.isLoading){this.cancelSource.cancel()}this.isLoading=true;this.cancelSource=i["CancelToken"].source();const e={page:this.page,unused:this.unused,page_size:this.pageSize,"fields[asset]":c["f"].join(",")};if(this.sortBy.ascending){e.ordering=this.sortBy.fieldName}else{e.ordering=`-${this.sortBy.fieldName}`}if(this.searchQuery){e.search=this.searchQuery}if(this.type){if(this.type==="Misc"){this.type=[u["c"].audio,u["c"].ebook,u["c"].externalLink,u["c"].file,u["c"].presentation,u["c"].sourceCode,u["c"].video,u["c"].videoMashup]}e.asset_type=this.type}return l["f"].get("/users/me/assets/",{params:e,cancelToken:this.cancelSource.token,paramsSerializer:e=>Object(l["m"])(e,{arrayBrackets:false})}).then(Object(a["e"])((e=>{let{data:t}=e;this.assets=t.results.map((e=>{e.isDisabled=false;e.openExtraInfo=false;return e}));this.total=t.count}))).catch(Object(a["e"])((e=>{if(!Object(i["isCancel"])(e)){this.assets=[];this.total=0}}))).then(Object(a["e"])((()=>{this.isInitialized=true;this.isLoading=false})))}deleteAsset(e){const t=this.assets.find((t=>t.id==e));t.isDisabled=true;return l["f"].delete(`/users/me/assets/${e}/`).then(Object(a["e"])((()=>{this.assets.remove(t);this.total-=1}))).catch(Object(a["e"])((()=>{t.isDisabled=false})))}toggleAssetInfo(e){const t=this.assets.find((t=>t.id==e));t.openExtraInfo=!t.openExtraInfo}get isDisabled(){return this.assets.some((e=>e.isDisabled))}disableAsset(e){const t=this.assets.find((t=>t.id==e));t.isDisabled=true}},d=babelHelpers.applyDecoratedDescriptor(p.prototype,"isInitialized",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),h=babelHelpers.applyDecoratedDescriptor(p.prototype,"isLoading",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),m=babelHelpers.applyDecoratedDescriptor(p.prototype,"page",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 1}}),f=babelHelpers.applyDecoratedDescriptor(p.prototype,"pageSize",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 10}}),g=babelHelpers.applyDecoratedDescriptor(p.prototype,"total",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),y=babelHelpers.applyDecoratedDescriptor(p.prototype,"unused",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),b=babelHelpers.applyDecoratedDescriptor(p.prototype,"assets",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),v=babelHelpers.applyDecoratedDescriptor(p.prototype,"searchQuery",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),w=babelHelpers.applyDecoratedDescriptor(p.prototype,"sortBy",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{fieldName:"created",ascending:false}}}),babelHelpers.applyDecoratedDescriptor(p.prototype,"numPages",[a["g"]],Object.getOwnPropertyDescriptor(p.prototype,"numPages"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"setPage",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"setPage"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"setSearchQuery",[a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"setSearchQuery"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"_searchAssets",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"_searchAssets"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"setSortBy",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"setSortBy"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"_loadAssets",[a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"_loadAssets"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"deleteAsset",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"deleteAsset"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"toggleAssetInfo",[n["a"],a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"toggleAssetInfo"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"isDisabled",[a["g"]],Object.getOwnPropertyDescriptor(p.prototype,"isDisabled"),p.prototype),babelHelpers.applyDecoratedDescriptor(p.prototype,"disableAsset",[a["e"]],Object.getOwnPropertyDescriptor(p.prototype,"disableAsset"),p.prototype),p)},"./src/udemy/js/course-manage-v2/asset-library/asset-library.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n=r("./node_modules/@udemy/icons/dist/search.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var a=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-form.react-component.js");var s=r("./node_modules/@udemy/react-navigation-components/dist/esm/pagination/pagination.react-component.js");var l=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var c=r("./node_modules/autobind-decorator/lib/esm/index.js");var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/prop-types/index.js");var d=r.n(p);var h=r("./node_modules/react/index.js");var m=r.n(h);var f=r("./src/udemy/js/course-manage-v2/asset-library/asset-library.mobx-store.js");var g=r("./src/udemy/js/course-manage-v2/asset-library/asset-table.react-component.js");var y=r("./src/udemy/js/course-manage-v2/asset-library/asset-library.less");var b=r.n(y);var v,w,E;let S=Object(u["f"])(v=(w=(E=class e extends h["Component"]{componentDidMount(){this.props.store.setPage(1)}onSearchQueryChange(e){if(!this.props.store.isDisabled){this.props.store.setSearchQuery(e.target.value)}}onAssetSelect(e){this.props.store.disableAsset(e);this.props.onSelect(e)}onToggleInfo(e){this.props.store.toggleAssetInfo(e)}renderSearch(){const{isLoading:e,searchQuery:t}=this.props.store;const r=m.a.createElement(i.a,{label:gettext("Submit search"),color:"inherit",size:"small"});const n=e&&m.a.createElement(l["a"],{color:"inherit",size:"xsmall",overlay:true});return m.a.createElement("div",{className:"asset-library--search-row--2KcVC"},m.a.createElement(o["b"],{label:gettext("Search files by name"),labelProps:{className:"ud-sr-only"}},m.a.createElement(a["a"],{size:"small",placeholder:gettext("Search files by name"),value:t,onChange:this.onSearchQueryChange,submitButtonContent:m.a.createElement(m.a.Fragment,null,n,r)})))}render(){return m.a.createElement("div",null,this.renderSearch(),m.a.createElement(g["a"],{store:this.props.store,onDelete:this.props.store.deleteAsset,onSelect:this.onAssetSelect,onToggleInfo:this.onToggleInfo}),m.a.createElement(s["a"],{activePage:this.props.store.page,pageCount:this.props.store.numPages,onPageChange:this.props.store.setPage,className:"asset-library--pagination--3JNij"}))}},E.propTypes={store:d.a.instanceOf(f["a"]).isRequired,onSelect:d.a.func.isRequired},E),babelHelpers.applyDecoratedDescriptor(w.prototype,"onSearchQueryChange",[c["a"]],Object.getOwnPropertyDescriptor(w.prototype,"onSearchQueryChange"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"onAssetSelect",[c["a"]],Object.getOwnPropertyDescriptor(w.prototype,"onAssetSelect"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"onToggleInfo",[c["a"]],Object.getOwnPropertyDescriptor(w.prototype,"onToggleInfo"),w.prototype),w))||v},"./src/udemy/js/course-manage-v2/asset-library/asset-status.less":function(e,t,r){e.exports={"upload-progress-container":"asset-status--upload-progress-container--XV4UO","upload-progress":"asset-status--upload-progress--3zADz",positive:"asset-status--positive--2Tn6B",negative:"asset-status--negative--2Ktdp"}},"./src/udemy/js/course-manage-v2/asset-library/asset-table.less":function(e,t,r){e.exports={empty:"asset-table--empty--3bItE","asset-table-container":"asset-table--asset-table-container--2Spjo","full-width":"asset-table--full-width--3H29p","action-buttons":"asset-table--action-buttons--3agUO","asset-status":"asset-table--asset-status--11R9h"}},"./src/udemy/js/course-manage-v2/asset-library/asset-table.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var i=r("./node_modules/@udemy/react-structure-components/dist/esm/table/table.react-component.js");var o=r("./node_modules/autobind-decorator/lib/esm/index.js");var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/utils/get-request-data.js");var d=r("./src/udemy/js/utils/noop.js");var h=r("./node_modules/@udemy/icons/dist/close.ud-icon");var m=r.n(h);var f=r("./node_modules/@udemy/icons/dist/collapse.ud-icon");var g=r.n(f);var y=r("./node_modules/@udemy/icons/dist/delete.ud-icon");var b=r.n(y);var v=r("./node_modules/@udemy/icons/dist/expand.ud-icon");var w=r.n(v);var E=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var S=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var _=r("./src/udemy/js/course-manage-v2/asset-library/constants.js");var x,D,C;let T=Object(a["f"])(x=(D=(C=class e extends c["Component"]{deleteHandler(){return this.props.onDelete(this.props.asset.id)}selectHandler(){return this.props.onSelect(this.props.asset.id)}toggleInfoHandler(){return this.props.onToggleInfo(this.props.asset.id)}renderDeleteButton(e){return u.a.createElement(E["a"],{udStyle:"ghost",size:"xsmall",disabled:this.props.disabled,key:`asset-${this.props.asset.id}-delete`,onClick:this.deleteHandler,"data-purpose":"delete-asset-button"},u.a.createElement(e,{label:gettext("Delete")}))}render(){const e=this.props.asset;const t=!this.props.hideTrashWhenDisabled||!this.props.disabled;const r=[];if(e.status===_["b"].uploading){t&&r.push(this.renderDeleteButton(m.a))}else if(e.status===_["b"].processing){t&&r.push(this.renderDeleteButton(b.a))}else if(e.status===_["b"].failed){t&&r.push(this.renderDeleteButton(b.a));const n=e.openExtraInfo?g.a:w.a;const i=e.openExtraInfo?gettext("Collapse"):gettext("Expand");r.push(u.a.createElement(E["a"],{udStyle:"ghost",size:"xsmall",key:`asset-${e.id}-show-extra`,onClick:this.toggleInfoHandler,"data-purpose":"extra-toggle"},u.a.createElement(n,{label:i})))}else{r.push(u.a.createElement(S["a"],{udStyle:"ghost",size:"xsmall",disabled:this.props.disabled,key:`asset-${e.id}-select`,onClick:this.selectHandler,"data-purpose":"select-asset-button"},gettext("Select")));t&&r.push(this.renderDeleteButton(b.a))}return u.a.createElement("div",{className:this.props.className},r)}},C.propTypes={asset:l.a.object.isRequired,onDelete:l.a.func.isRequired,onSelect:l.a.func.isRequired,onToggleInfo:l.a.func,className:l.a.string,disabled:l.a.bool,hideTrashWhenDisabled:l.a.bool},C.defaultProps={onToggleInfo:d["a"],className:"",disabled:false,hideTrashWhenDisabled:false},C),babelHelpers.applyDecoratedDescriptor(D.prototype,"deleteHandler",[o["a"]],Object.getOwnPropertyDescriptor(D.prototype,"deleteHandler"),D.prototype),babelHelpers.applyDecoratedDescriptor(D.prototype,"selectHandler",[o["a"]],Object.getOwnPropertyDescriptor(D.prototype,"selectHandler"),D.prototype),babelHelpers.applyDecoratedDescriptor(D.prototype,"toggleInfoHandler",[o["a"]],Object.getOwnPropertyDescriptor(D.prototype,"toggleInfoHandler"),D.prototype),D))||x;var O=r("./node_modules/@udemy/react-messaging-components/dist/esm/meter/meter.react-component.js");var k=r("./src/udemy/js/course-manage-v2/asset-library/asset-status.less");var P,A;let I=Object(a["f"])(P=(A=class e extends c["Component"]{render(){const{className:e,asset:t}=this.props;switch(t.status){case _["b"].uploading:return u.a.createElement("div",{className:(e?e+" ":"")+"asset-status--upload-progress-container--XV4UO"},u.a.createElement(O["a"],{"aria-hidden":true,value:t.progress_percentage,min:0,max:100,label:gettext("%(percent)s%"),className:"asset-status--upload-progress--3zADz"}),u.a.createElement("div",{className:"ud-text-xs"},interpolate(gettext("%(percent)s%"),{percent:parseInt(t.progress_percentage,10)},true)));case _["b"].queued:return u.a.createElement("div",{className:e},gettext("Queued"));case _["b"].failed:return u.a.createElement("div",{className:(e?e+" ":"")+"asset-status--negative--2Ktdp"},gettext("Failed"));case _["b"].processing:return u.a.createElement("div",{className:e},gettext("Processing"));case _["b"].success:return u.a.createElement("div",{className:(e?e+" ":"")+"asset-status--positive--2Tn6B"},gettext("Success"))}}},A.propTypes={asset:l.a.object.isRequired,className:l.a.string},A.defaultProps={className:undefined},A))||P;var j=r("./src/udemy/js/course-manage-v2/asset-library/asset-table.less");r.d(t,"a",(function(){return M}));var R,N,L;let M=Object(a["f"])(R=(N=(L=class e extends c["Component"]{renderAction(e){if(this.props.renderAction){return u.a.createElement("div",{className:"asset-table--action-buttons--3agUO"},this.props.renderAction(e))}return u.a.createElement(T,{asset:e,className:"asset-table--action-buttons--3agUO",onDelete:this.props.onDelete,onSelect:this.props.onSelect,onToggleInfo:this.props.onToggleInfo,disabled:this.props.store.isDisabled||this.props.store.isLoading,hideTrashWhenDisabled:this.props.hideTrashWhenDisabled})}get columns(){const{sortableFields:e}=this.props.store;return[{fieldName:"title",initialSortOrder:e.includes("title")?"ascending":null,headerName:gettext("Filename")},{fieldName:"asset_type",initialSortOrder:e.includes("asset_type")?"ascending":null,headerName:gettext("Type")},{fieldName:"status",initialSortOrder:e.includes("status")?"ascending":null,headerName:gettext("Status")},{fieldName:"created",initialSortOrder:e.includes("created")?"descending":null,headerName:gettext("Date")},{fieldName:"action",headerName:gettext("Actions"),isScreenReaderOnly:true}]}renderErrors(e){return u.a.createElement("div",{className:"line-length-md"},u.a.createElement("p",{className:"ud-text-bold"},interpolate(ngettext("Your %(type)s upload failed for %(errorCount)s reason:","Your %(type)s upload failed for %(errorCount)s reasons:",e.processing_errors.length),{type:_["a"][e.asset_type].toLowerCase(),errorCount:e.processing_errors.length},true)),u.a.createElement("ul",{className:"ud-text-sm ud-text-with-links"},e.processing_errors.map(((e,t)=>u.a.createElement("li",{key:t},u.a.createElement("span",null,e.message),e.help_link&&" ",e.help_link&&u.a.createElement("a",{href:e.help_link,target:"_blank",rel:"noopener noreferrer"},gettext("Get Help")))))))}render(){if(!this.props.store.isInitialized){return u.a.createElement(n["a"],{block:true,size:"large"})}let e=[];this.props.store.assets.forEach((t=>{e.push({title:t.title,asset_type:t.asset_type,status:u.a.createElement(I,{className:"asset-table--asset-status--11R9h",asset:t}),created:new Date(t.created).toLocaleDateString(Object(p["a"])().locale.replace("_","-")||"en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),action:this.renderAction(t)});if(t.processing_errors&&t.processing_errors.length){e.push({extra:this.renderErrors(t),isOpen:t.openExtraInfo})}return e}));if(!e.length){const{isLoading:t,total:r}=this.props.store;e=[{empty:true,isLoading:t,total:r}]}const t=(e,t,r,o)=>{if(!r.extra&&!r.empty){return Object(i["c"])(e,t,r,o)}else if(r.extra){return u.a.createElement("tr",{key:o,style:r.isOpen?{}:{display:"none"}},u.a.createElement("td",{colSpan:e.length,className:"asset-table--full-width--3H29p"},r.extra))}return u.a.createElement("tr",{key:o},u.a.createElement("td",{colSpan:e.length,className:"asset-table--full-width--3H29p"},u.a.createElement("div",{className:"asset-table--empty--3bItE"},!r.total&&!r.isLoading&&gettext("No results found."),!r.total&&r.isLoading&&u.a.createElement(n["a"],{size:"large"}))))};return u.a.createElement("div",{className:"asset-table--asset-table-container--2Spjo","data-purpose":"asset-table"},u.a.createElement(i["a"],{noBackgroundColor:true,noBorder:true,padding:"xs",caption:gettext("Library"),columns:this.columns,rows:e,renderRow:t,onSort:this.props.store.isDisabled?d["a"]:this.props.store.setSortBy,sortBy:this.props.store.sortBy}))}},L.propTypes={store:l.a.shape({isDisabled:l.a.bool.isRequired,isLoading:l.a.bool.isRequired,isInitialized:l.a.bool.isRequired,total:l.a.number.isRequired,sortableFields:l.a.array.isRequired,assets:l.a.oneOfType([a["b"].observableArray,l.a.array]).isRequired,setSortBy:l.a.func,sortBy:l.a.shape({fieldName:l.a.string,ascending:l.a.bool})}).isRequired,onDelete:l.a.func,onSelect:l.a.func,onToggleInfo:l.a.func,renderAction:l.a.func,hideTrashWhenDisabled:l.a.bool},L.defaultProps={onDelete:d["a"],onSelect:d["a"],onToggleInfo:d["a"],renderAction:null,hideTrashWhenDisabled:false},L),babelHelpers.applyDecoratedDescriptor(N.prototype,"renderAction",[o["a"]],Object.getOwnPropertyDescriptor(N.prototype,"renderAction"),N.prototype),babelHelpers.applyDecoratedDescriptor(N.prototype,"renderErrors",[o["a"]],Object.getOwnPropertyDescriptor(N.prototype,"renderErrors"),N.prototype),N))||R},"./src/udemy/js/course-manage-v2/asset-library/constants.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return n}));r.d(t,"f",(function(){return i}));r.d(t,"e",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"b",(function(){return s}));r.d(t,"d",(function(){return l}));const n=Object.freeze({article:"Article",audio:"Audio",ebook:"E-Book",externalLink:"ExternalLink",file:"File",iFrame:"IFrame",importContent:"ImportContent",misc:"Misc",presentation:"Presentation",sourceCode:"SourceCode",video:"Video",videoMashup:"VideoMashup"});const i=Object.freeze(new Set([n.video,n.videoMashup]));const o=Object.freeze(new Set([n.article,n.importContent,n.iFrame]));const a={[n.article]:gettext("Article"),[n.audio]:gettext("Audio"),[n.ebook]:gettext("E-Book"),[n.externalLink]:gettext("External Link"),[n.file]:gettext("File"),[n.iFrame]:gettext("IFrame"),[n.importContent]:gettext("Imported Content"),[n.misc]:gettext("File"),[n.presentation]:gettext("Presentation"),[n.sourceCode]:gettext("Source Code"),[n.video]:gettext("Video"),[n.videoMashup]:gettext("Video & Slide Mashup")};const s=Object.freeze({uploading:"uploading",queued:-2,failed:-1,processing:0,success:1});const l=Object.freeze({main:"main",supplementary:"supplementary"})},"./src/udemy/js/course-manage-v2/availability/availability.less":function(e,t,r){e.exports={inline:"availability--inline--UN-p3",form:"availability--form--2sDJi",radio:"availability--radio--3EwpE","radio-label-text":"availability--radio-label-text--3VvQj","checkbox-row":"availability--checkbox-row--33cpT"}},"./src/udemy/js/course-manage-v2/availability/constants.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return n}));r.d(t,"c",(function(){return i}));r.d(t,"e",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"d",(function(){return s}));const n="AVAILABLE";const i="NOT_AVAILABLE";const o="UNSPECIFIED";const a={AVAILABLE:1,NOT_AVAILABLE:2,UNSPECIFIED:3};const s=[gettext("12 hours"),gettext("24 hours"),gettext("48 hours"),gettext("2-4 days"),gettext("1 week")]},"./src/udemy/js/course-manage-v2/constants.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return n}));r.d(t,"a",(function(){return i}));r.d(t,"c",(function(){return o}));const n=2;const i=n*60*60;const o=gettext("March 17, 2020")},"./src/udemy/js/course-manage-v2/content-only/content-only.less":function(e,t,r){e.exports={"header-panel":"content-only--header-panel--32p3M","header-panel-left":"content-only--header-panel-left--2cslp","header-panel-right":"content-only--header-panel-right--23he0","header-text":"content-only--header-text--oy4O2","cta-image":"content-only--cta-image--21c9z","cta-text":"content-only--cta-text--1UKIU","cta-button":"content-only--cta-button--lZfxK","bottom-panel":"content-only--bottom-panel--MqfCu","bottom-panel-section-title":"content-only--bottom-panel-section-title--3yOKJ","bottom-panel-title":"content-only--bottom-panel-title--3r5rz",requirements:"content-only--requirements--CpH1r"}},"./src/udemy/js/course-manage-v2/course-basics/course-basics-form.less":function(e,t,r){e.exports={hidden:"course-basics-form--hidden---Qypj",form:"course-basics-form--form--F7iPX","primary-label-select":"course-basics-form--primary-label-select--MIJH5","inline-fields":"course-basics-form--inline-fields--3ZuU2","category-fields":"course-basics-form--category-fields--1M1_V","label-with-icon":"course-basics-form--label-with-icon--1eGQu","icon-container":"course-basics-form--icon-container--T4IAI","image-upload":"course-basics-form--image-upload--1BfBH",tip:"course-basics-form--tip--1PHmc","header-tip":"course-basics-form--header-tip--2mbHJ",spacer:"course-basics-form--spacer--1d9kw"}},"./src/udemy/js/course-manage-v2/course-basics/instructor.less":function(e,t,r){e.exports={"instructors-status":"instructor--instructors-status--1Tk1q",instructor:"instructor--instructor--1mDcX","instructor-status":"instructor--instructor-status--2F6BH","instructor-profile":"instructor--instructor-profile--3qtPb"}},"./src/udemy/js/course-manage-v2/course-basics/video-upload-with-preview.less":function(e,t,r){e.exports={wrapper:"video-upload-with-preview--wrapper--1Gozg","form-wrapper":"video-upload-with-preview--form-wrapper--3pOXd","preview-wrapper":"video-upload-with-preview--preview-wrapper--18TJX","image-wrapper":"video-upload-with-preview--image-wrapper--yHDpJ",aspect:"video-upload-with-preview--aspect--3UFqF",overlay:"video-upload-with-preview--overlay--3venS",tips:"video-upload-with-preview--tips--31TuE","asset-uploaded":"video-upload-with-preview--asset-uploaded--32wuC"}},"./src/udemy/js/course-manage-v2/course-goals/goals-form-question.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/icons/dist/expand-plus.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var a=r("./node_modules/@udemy/react-messaging-components/dist/esm/alert-banner/alert-banner.react-component.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/prop-types/index.js");var p=r.n(u);var d=r("./node_modules/react/index.js");var h=r.n(d);var m=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var f=r("./src/udemy/js/course-manage-v2/course-goals/question.mobx-model.js");var g=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var y=r.n(g);var b=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var v=r("./node_modules/@udemy/icons/dist/delete.ud-icon");var w=r.n(v);var E=r("./node_modules/@udemy/icons/dist/menu.ud-icon");var S=r.n(E);var _=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var x=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-with-counter.react-component.js");var D=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var C=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var T=r("./node_modules/autobind-decorator/lib/esm/index.js");var O=r("./src/udemy/js/base-components/ungraduated/sortable/sortable.react-component.js");var k=r("./src/udemy/js/utils/array-move.js");var P=r("./src/udemy/js/utils/ud-performance.ts");var A=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js");var I=r("./src/udemy/js/course-manage-v2/course-goals/goals-form.less");var j=r.n(I);var R,N,L,M;const q={styles:{"sortable-answer":"goals-form--sortable-answer--PLpb9","sortable-answer-handle":"goals-form--sortable-answer-handle--21rsH","show-buttons-on-hover":"goals-form--show-buttons-on-hover--1MIu0","sortable-drag":"goals-form--sortable-drag--1QcZX","hide-buttons":"goals-form--hide-buttons--PHgbN",subtitle:"goals-form--subtitle--3R5d-","question-label":"goals-form--question-label--1lkHx","question-text-container":"goals-form--question-text-container--2ac22","question-line-container":"goals-form--question-line-container--3No4q","question-form":"goals-form--question-form--2k1az","form-error":"goals-form--form-error--ISwO8","goal-form-question-container":"goals-form--goal-form-question-container--1d48k"}};const U=e=>{let{questionId:t,id:r,value:n,onChange:i,placeholder:o,label:a,onDelete:s,validationState:c,validationError:u,deleteButtonDisabled:p,maxLength:d,withCounter:m}=e;const f=m?x["a"]:D["b"];return h.a.createElement(C["b"],{formControlId:r,label:a,labelProps:{className:"ud-sr-only"},validationState:c,note:u,className:y()(l()({"sortable-answer":true,"show-buttons-on-hover":!A["b"]&&!!n,"hide-buttons":!n,"question-line-container":true}),q)},h.a.createElement("div",{className:"goals-form--question-form--2k1az"},h.a.createElement("div",{className:"goals-form--question-text-container--2ac22"},h.a.createElement(f,{defaultValue:n,onChange:i,placeholder:o,"data-purpose":`${t}-input-${r}`,maxLength:d})),h.a.createElement(_["a"],{udStyle:"secondary",onClick:()=>{s(r)},disabled:p},h.a.createElement(w.a,{label:gettext("Delete")})),h.a.createElement(_["a"],{udStyle:"secondary",className:"js-drag-handle goals-form--sortable-answer-handle--21rsH"},h.a.createElement(S.a,{label:gettext("Move")}))))};let H=(R=Object(c["e"])("store"),R(N=Object(c["f"])(N=(L=(M=class e extends d["Component"]{componentDidMount(){if(this.props.shouldSendPerfMetric){P["a"].mark("CourseManage.course-goals-form-inputs-rendered")}}onSortEnd(e){let{oldIndex:t,newIndex:r}=e;const n=Object(k["a"])(this.props.question.answerList,t,r);this.props.question.updateAllAnswers(n);this.props.store.setDirty();document.body.classList.remove("course-manage--on-drag")}onSortStart(){document.body.classList.add("course-manage--on-drag")}updateListValue(e){this.props.question.updateAnswer(e.target.id,e.target.value);this.props.store.setDirty()}deleteListValue(e){this.props.question.deleteAnswer(e);this.props.store.setDirty()}addItemOnEnter(e){if(e.keyCode==b["b"].RETURN){e.preventDefault();const t=this.props.question.getNextAnswerOrCreate(e.target.id);if(t){setTimeout((()=>{const e=document.querySelector(`input[id="${t}"]`);e&&e.focus()}))}}}render(){const{question:e,placeholders:t,questionId:r,deleteButtonDisabled:n,maxLength:i,withCounter:o}=this.props;return h.a.createElement("div",{onKeyDown:this.addItemOnEnter},h.a.createElement(O["a"],{options:{dragClass:j.a["sortable-drag"],forceFallback:true,group:r,handle:".js-drag-handle",onEnd:this.onSortEnd,onStart:this.onSortStart,scrollSpeed:20}},e.answerList.map(((e,a)=>{let s="";if(t&&t.length>0)s=t[a%t.length];return h.a.createElement(U,{key:e.key,id:e.key,value:e.value,onChange:this.updateListValue,questionId:r,label:interpolate(gettext("Answer %(answerNumber)s"),{answerNumber:a+1},true),placeholder:s,onDelete:this.deleteListValue,validationState:e.validationState,validationError:e.validationError,deleteButtonDisabled:n,maxLength:i,withCounter:o})}))))}},M.propTypes={questionId:p.a.string.isRequired,placeholders:p.a.arrayOf(p.a.string),question:p.a.instanceOf(f["a"]).isRequired,store:p.a.object.isRequired,shouldSendPerfMetric:p.a.bool,deleteButtonDisabled:p.a.bool,maxLength:p.a.number,withCounter:p.a.bool},M.defaultProps={shouldSendPerfMetric:false,deleteButtonDisabled:false,placeholders:null,maxLength:-1,withCounter:false},M),babelHelpers.applyDecoratedDescriptor(L.prototype,"onSortEnd",[T["a"]],Object.getOwnPropertyDescriptor(L.prototype,"onSortEnd"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"onSortStart",[T["a"]],Object.getOwnPropertyDescriptor(L.prototype,"onSortStart"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"updateListValue",[T["a"]],Object.getOwnPropertyDescriptor(L.prototype,"updateListValue"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"deleteListValue",[T["a"]],Object.getOwnPropertyDescriptor(L.prototype,"deleteListValue"),L.prototype),babelHelpers.applyDecoratedDescriptor(L.prototype,"addItemOnEnter",[T["a"]],Object.getOwnPropertyDescriptor(L.prototype,"addItemOnEnter"),L.prototype),L))||N)||N);r.d(t,"a",(function(){return F}));class F extends h.a.Component{render(){let e;if(this.props.label){e=h.a.createElement("div",{className:(l()({"ud-heading-sm":this.props.labelHeadingSize==="small","ud-heading-md":this.props.labelHeadingSize==="medium"})?l()({"ud-heading-sm":this.props.labelHeadingSize==="small","ud-heading-md":this.props.labelHeadingSize==="medium"})+" ":"")+"goals-form--question-label--1lkHx"},this.props.label)}const t=this.props.errors.length>0;return h.a.createElement("div",{className:"goals-form--goal-form-question-container--1d48k"},h.a.createElement("div",null,e,this.props.explanation,h.a.createElement("br",null),h.a.createElement(H,{store:this.props.store,questionId:this.props.questionId,placeholders:this.props.placeholders,question:this.props.question,shouldSendPerfMetric:this.props.shouldSendPerfMetric,deleteButtonDisabled:this.props.deleteButtonDisabled,maxLength:this.props.maxLength,withCounter:this.props.withCounter})),t?h.a.createElement(a["a"],{className:"goals-form--form-error--ISwO8",udStyle:"error",showCta:false,title:h.a.createElement("span",Object.assign({className:"ud-text-with-links"},Object(m["a"])({descriptionOfCaller:"goals-form-question:error",domPurifyConfig:{ADD_ATTR:["target"]},html:this.props.errors.join(" ")})))}):null,h.a.createElement(o["a"],{"data-purpose":`add-${this.props.questionId}`,udStyle:"ghost",onClick:this.props.question.pushEmptyAnswer},h.a.createElement(i.a,{size:"medium",label:false}),gettext("Add more to your response")))}}F.propTypes={questionId:p.a.string.isRequired,errors:c["b"].arrayOrObservableArray,label:p.a.string,explanation:p.a.object,placeholders:p.a.arrayOf(p.a.string),question:p.a.instanceOf(f["a"]).isRequired,shouldSendPerfMetric:p.a.bool,store:p.a.object.isRequired,deleteButtonDisabled:p.a.bool,maxLength:p.a.number,withCounter:p.a.bool,labelHeadingSize:p.a.oneOf(["small","medium"])};F.defaultProps={errors:[],label:"",explanation:null,placeholders:null,shouldSendPerfMetric:false,deleteButtonDisabled:false,maxLength:-1,withCounter:false,labelHeadingSize:"medium"}},"./src/udemy/js/course-manage-v2/course-goals/goals-form.less":function(e,t,r){e.exports={"sortable-answer":"goals-form--sortable-answer--PLpb9","sortable-answer-handle":"goals-form--sortable-answer-handle--21rsH","show-buttons-on-hover":"goals-form--show-buttons-on-hover--1MIu0","sortable-drag":"goals-form--sortable-drag--1QcZX","hide-buttons":"goals-form--hide-buttons--PHgbN",subtitle:"goals-form--subtitle--3R5d-","question-label":"goals-form--question-label--1lkHx","question-text-container":"goals-form--question-text-container--2ac22","question-line-container":"goals-form--question-line-container--3No4q","question-form":"goals-form--question-form--2k1az","form-error":"goals-form--form-error--ISwO8","goal-form-question-container":"goals-form--goal-form-question-container--1d48k"}},"./src/udemy/js/course-manage-v2/course-goals/question.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/autobind-decorator/lib/esm/index.js");var o=r("./node_modules/mobx/lib/mobx.module.js");var a=r("./src/udemy/js/utils/form-validators.js");var s,l,c;let u=(s=class e{constructor(){babelHelpers.initializerDefineProperty(this,"answerList",l,this);babelHelpers.initializerDefineProperty(this,"maxCharCount",c,this)}pushEmptyAnswer(){const e=this.answerList[this.answerList.length-1];if(e&&e.value.trim()===""){return false}const t=Object(n["a"])("answer-list");this.answerList.push({key:t,value:"",validationState:null,validationError:null});return t}ensureMinAnswerCount(e){while(this.answerList.length<e){const e=Object(n["a"])("answer-list");this.answerList.push({key:e,value:"",validationState:null,validationError:null})}}setMaxCharCount(e){this.maxCharCount=e}getNextAnswerOrCreate(e){const t=this.answerList.findIndex((t=>t.key===e));if(t<this.answerList.length-1){return this.answerList[t+1].key}return this.pushEmptyAnswer()}deleteAnswer(e){this.answerList=this.answerList.filter((t=>t.key!==e))}updateAnswer(e,t){const r=this.answerList.find((t=>t.key===e));r.value=t;this.validateAnswer(r)}validateAnswer(e){const t={text:e.value};const r=Object(a["b"])([a["c"]],t);if(r==="error"){e.validationState=r;e.validationError=gettext("External links are not allowed here.")}else if(this.maxCharCount>0&&e.value.length>this.maxCharCount){e.validationState="error";e.validationError=interpolate(gettext("Learning objectives can't be longer than %s characters"),[this.maxCharCount])}else{e.validationState=null;e.validationError=null}}initializeAllAnswers(e){const t=[];e.forEach((e=>{const r={key:Object(n["a"])("answer-list"),value:e,validationState:null};this.validateAnswer(r);t.push(r)}));this.answerList=t}updateAllAnswers(e){e.forEach((e=>{this.validateAnswer(e)}));this.answerList=e}get hasValidationErrors(){return!!this.answerList&&this.answerList.filter((e=>e.validationState==="error")).length>0}get nonEmptyAnswerCount(){return this.answerList.filter((e=>e.validationState!=="error"&&e.value!=="")).length}get answerCount(){return this.answerList.filter((e=>e.validationState!=="error")).length}},l=babelHelpers.applyDecoratedDescriptor(s.prototype,"answerList",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),c=babelHelpers.applyDecoratedDescriptor(s.prototype,"maxCharCount",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"pushEmptyAnswer",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"pushEmptyAnswer"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"ensureMinAnswerCount",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"ensureMinAnswerCount"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"setMaxCharCount",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"setMaxCharCount"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"getNextAnswerOrCreate",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"getNextAnswerOrCreate"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"deleteAnswer",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"deleteAnswer"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"updateAnswer",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"updateAnswer"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"initializeAllAnswers",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"initializeAllAnswers"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"updateAllAnswers",[o["e"]],Object.getOwnPropertyDescriptor(s.prototype,"updateAllAnswers"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"hasValidationErrors",[o["g"]],Object.getOwnPropertyDescriptor(s.prototype,"hasValidationErrors"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"nonEmptyAnswerCount",[o["g"]],Object.getOwnPropertyDescriptor(s.prototype,"nonEmptyAnswerCount"),s.prototype),babelHelpers.applyDecoratedDescriptor(s.prototype,"answerCount",[o["g"]],Object.getOwnPropertyDescriptor(s.prototype,"answerCount"),s.prototype),s)},"./src/udemy/js/course-manage-v2/course-publish/course-publish-modal.less":function(e,t,r){e.exports={"mt-sm":"course-publish-modal--mt-sm--27p_Z","mt-lg":"course-publish-modal--mt-lg--E6MMI",form:"course-publish-modal--form--1QStl","url-prefix":"course-publish-modal--url-prefix--1EAqz"}},"./src/udemy/js/course-manage-v2/curriculum/add-item-forms.less":function(e,t,r){e.exports={ellipsis:"add-item-forms--ellipsis--CWuck","block-btns-row":"add-item-forms--block-btns-row--1XyfH","inline-btns-row":"add-item-forms--inline-btns-row--3fZ9n","section-row":"add-item-forms--section-row--2npGN"}},"./src/udemy/js/course-manage-v2/curriculum/add-item.less":function(e,t,r){e.exports={"add-item-toggler":"add-item--add-item-toggler--1k-rh","icon-wrapper":"add-item--icon-wrapper--GRi6k",icon:"add-item--icon--2FsmW",open:"add-item--open--2FcI6",lecture:"add-item--lecture--2ZWW9",section:"add-item--section--1_IVB","add-item-toggler-last-item":"add-item--add-item-toggler-last-item--13s0A","expand-icon":"add-item--expand-icon--28mRO"}},"./src/udemy/js/course-manage-v2/curriculum/curriculum-editor.less":function(e,t,r){e.exports={alert:"curriculum-editor--alert--3Ed1K",info:"curriculum-editor--info--31DNc","alert-container":"curriculum-editor--alert-container--zgMwN","bulk-container":"curriculum-editor--bulk-container--2cGXT","add-item-forms":"curriculum-editor--add-item-forms--1H8nN","beta-badge":"curriculum-editor--beta-badge--1Zbop",green:"curriculum-editor--green--3EnyO",yellow:"curriculum-editor--yellow--1f7-F",content:"curriculum-editor--content---7B0q","button-wrapper":"curriculum-editor--button-wrapper--20e3x"}},"./src/udemy/js/course-manage-v2/curriculum/curriculum-list.less":function(e,t,r){e.exports={dragging:"curriculum-list--dragging--6J7YC","curriculum-list":"curriculum-list--curriculum-list--3rkPc",section:"curriculum-list--section--3L2Cm","first-child-is-clone":"curriculum-list--first-child-is-clone--1cN-A","non-section-item":"curriculum-list--non-section-item--2ilUv","inline-insert-enabled":"curriculum-list--inline-insert-enabled--e7uT6","fake-section":"curriculum-list--fake-section--1GsTK","inline-insert":"curriculum-list--inline-insert--vjbTx","inline-insert-non-section-item":"curriculum-list--inline-insert-non-section-item--2bEtY","inline-insert-button-row":"curriculum-list--inline-insert-button-row--1WWhb","last-item":"curriculum-list--last-item--1_8lY","inline-insert-last-item":"curriculum-list--inline-insert-last-item--tJQRA","inline-insert-section":"curriculum-list--inline-insert-section--2yFJE","list-item":"curriculum-list--list-item--MB8ip",open:"curriculum-list--open--VjfTb","inline-insert-button":"curriculum-list--inline-insert-button--1_HAG","fake-section-empty":"curriculum-list--fake-section-empty--3I_9L","inline-insert-form":"curriculum-list--inline-insert-form--33LaF"}},"./src/udemy/js/course-manage-v2/curriculum/item/constants.js":function(e,t,r){"use strict";r.d(t,"r",(function(){return n}));r.d(t,"s",(function(){return i}));r.d(t,"q",(function(){return o}));r.d(t,"t",(function(){return a}));r.d(t,"p",(function(){return s}));r.d(t,"j",(function(){return l}));r.d(t,"i",(function(){return c}));r.d(t,"h",(function(){return u}));r.d(t,"n",(function(){return p}));r.d(t,"o",(function(){return d}));r.d(t,"w",(function(){return h}));r.d(t,"x",(function(){return m}));r.d(t,"v",(function(){return f}));r.d(t,"b",(function(){return g}));r.d(t,"g",(function(){return y}));r.d(t,"f",(function(){return b}));r.d(t,"z",(function(){return v}));r.d(t,"y",(function(){return w}));r.d(t,"e",(function(){return E}));r.d(t,"a",(function(){return S}));r.d(t,"c",(function(){return _}));r.d(t,"m",(function(){return D}));r.d(t,"l",(function(){return C}));r.d(t,"u",(function(){return T}));r.d(t,"d",(function(){return O}));r.d(t,"k",(function(){return k}));const n=250;const i=100;const o=64;const a=2;const s=Object.freeze({initial:"initial",loading:"loading",loaded:"loaded"});const l=Object.freeze(["can_toggle_curriculum_published_state","has_sufficient_preview_length","is_paid","is_practice_test_course","max_num_of_non_section_items","max_num_of_practice_tests","practice_test_only_min_num_of_practice_tests","organization_id","published_time","published_title","url","locale"]);const c=Object.freeze(["title","description","object_index","gt_assignments_v2"]);const u=Object.freeze(["title","description","object_index"]);const p=Object.freeze(["asset","title","is_published","description","is_downloadable","is_free","object_index","supplementary_assets"]);const d=Object.freeze(["asset","is_downloadable"]);const h=Object.freeze(["description","duration","title","type","is_published","object_index","pass_percent","is_draft","requires_draft","is_randomized"]);const m=Object.freeze(h.concat(["num_assessments"]));const f=Object.freeze(["is_draft","requires_draft"]);const g=Object.freeze(["assessment_type","prompt","correct_response","section"]);const y=Object.freeze(["title","is_published","object_index"]);const b=Object.freeze(["created","asset_type","content_summary","time_estimation","status","source_url","thumbnail_url","title","processing_errors","delayed_asset_message","body"]);const v=Object.freeze(b.concat("captions","media_license_token","media_sources","time_estimation","length","slides","slide_urls","thumbnail_sprite"));const w=Object.freeze({codingExercise:"coding-exercise",practiceTest:"practice-test",simpleQuiz:"simple-quiz"});const E=Object.freeze({fitb:"fill-in-the-blanks",multipleChoice:"multiple-choice",multipleSelect:"multi-select"});const S=Object.freeze({single:"single",batch:"batch"});const _=Object.freeze({[E.fitb]:gettext("Fill in the Blanks"),[E.multipleChoice]:gettext("Multiple Choice"),[E.multipleSelect]:gettext("Multiple Selection")});const x=Object.freeze({[w.codingExercise]:"coding-exercises",[w.practiceTest]:"practice-tests",[w.simpleQuiz]:"simple-quizzes"});const D=Object.freeze({section:"chapter",lecture:"lecture",quiz:"quiz",assignment:"practice"});const C=Object.freeze({[D.assignment]:gettext("This assignment is being deleted. We'll let you know when the process is complete."),[D.lecture]:gettext("This lecture is being deleted. We'll let you know when the process is complete.")});const T=Object.freeze({[w.codingExercise]:gettext("This coding exercise is being deleted. We'll let you know when the process is complete."),[w.practiceTest]:gettext("This practice test is being deleted. We'll let you know when the process is complete."),[w.simpleQuiz]:gettext("This quiz is being deleted. We'll let you know when the process is complete.")});const O=gettext("This assessment is being deleted. We'll let you know when the process is complete.");const k=(()=>{const e={...D,...w};delete e[D.quiz];return Object.freeze(e)})()},"./src/udemy/js/course-manage-v2/curriculum/item/content-tab.less":function(e,t,r){e.exports={"tab-container":"content-tab--tab-container--1KRkM",tab:"content-tab--tab--1KHTI",title:"content-tab--title--1WltY",close:"content-tab--close--3QxOF","tab-content":"content-tab--tab-content--3l4Vv"}},"./src/udemy/js/course-manage-v2/curriculum/item/content-type-selector.less":function(e,t,r){e.exports={list:"content-type-selector--list--jesAx",box:"content-type-selector--box--pBX2a",icon:"content-type-selector--icon--1rX_x","icon-after":"content-type-selector--icon-after--1XF38",label:"content-type-selector--label--3y8d3",asset:"content-type-selector--asset--P8aIn",assessment:"content-type-selector--assessment--20S44","assessment-creation":"content-type-selector--assessment-creation--ie7c_","icon-before":"content-type-selector--icon-before--3zk7s"}},"./src/udemy/js/course-manage-v2/curriculum/item/default-item-editor.less":function(e,t,r){e.exports={"item-editor":"default-item-editor--item-editor--3GhNq","edit-content":"default-item-editor--edit-content--HLXOq","add-content":"default-item-editor--add-content--1wZ-X",hidden:"default-item-editor--hidden--ta67x","intial-focus":"default-item-editor--intial-focus--1UztC",flash:"default-item-editor--flash--28TK6"}},"./src/udemy/js/course-manage-v2/curriculum/item/item-bar.less":function(e,t,r){e.exports={ellipsis:"item-bar--ellipsis--Lbep0",flex:"item-bar--flex--AcNdN",row:"item-bar--row--3ZgKF","item-bar":"item-bar--item-bar--1qWKU","item-bar-deleting":"item-bar--item-bar-deleting--1dqDy","item-bar-section":"item-bar--item-bar-section--178i3",main:"item-bar--main--3LgFa",left:"item-bar--left--6blR1",right:"item-bar--right--4qb_w","left-content":"item-bar--left-content--af69I","title-desktop":"item-bar--title-desktop--305o_","title-mobile":"item-bar--title-mobile--2qLqw",icon:"item-bar--icon--1R2Ix","drag-handle":"item-bar--drag-handle--2q7kQ","button-container":"item-bar--button-container--11FBT",label:"item-bar--label--1yiC3"}},"./src/udemy/js/course-manage-v2/curriculum/item/item-form.less":function(e,t,r){e.exports={flex:"item-form--flex--v1fQR","item-form":"item-form--item-form--2egBT",title:"item-form--title--2iqUM",switch:"item-form--switch--eMAwU","submit-row":"item-form--submit-row--20Iiu","form-list":"item-form--form-list--2QkqD","topic-input-container":"item-form--topic-input-container--2Mv6R","form-section":"item-form--form-section--xWe0J"}},"./src/udemy/js/course-manage-v2/curriculum/item/item-icon-button.less":function(e,t,r){e.exports={"icon-button":"item-icon-button--icon-button--1IKG6","icon-button-always-show":"item-icon-button--icon-button-always-show--2-12f","icon-button-mobile":"item-icon-button--icon-button-mobile--24Rqg"}},"./src/udemy/js/course-manage-v2/curriculum/item/lecture/lecture-editor.less":function(e,t,r){e.exports={"preview-enabled-label":"lecture-editor--preview-enabled-label--3Di3v","edit-content-header":"lecture-editor--edit-content-header--11ZDs","lecture-settings-btns":"lecture-editor--lecture-settings-btns--minew","edit-content-header-left":"lecture-editor--edit-content-header-left--xCpw5","lecture-settings":"lecture-editor--lecture-settings--7Lmmh","edit-content-row":"lecture-editor--edit-content-row--2w0QH","supplementary-asset-row":"lecture-editor--supplementary-asset-row--3vH0i","edit-content-button-row":"lecture-editor--edit-content-button-row--33Lxr",alert:"lecture-editor--alert--2pXuV","description-box":"lecture-editor--description-box--2RUMn","tabs-container":"lecture-editor--tabs-container--3vU8k","table-container":"lecture-editor--table-container--1OMb2","select-content-type":"lecture-editor--select-content-type--1BK9j"}},"./src/udemy/js/course-manage-v2/curriculum/item/lecture/link-to-lab.less":function(e,t,r){e.exports={"link-to-lab":"link-to-lab--link-to-lab--1tzUA",error:"link-to-lab--error--dlbLZ",title:"link-to-lab--title--3Z7Ki","info-tooltip":"link-to-lab--info-tooltip--QUfyg"}},"./src/udemy/js/course-manage-v2/curriculum/item/lecture/supplementary-asset.less":function(e,t,r){e.exports={flex:"supplementary-asset--flex--2ujDz",ellipsis:"supplementary-asset--ellipsis--3RKkW","supplementary-asset":"supplementary-asset--supplementary-asset--3IH13"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/apply-draft-form.less":function(e,t,r){e.exports={"send-announcement-row":"apply-draft-form--send-announcement-row--1fhoj","send-announcement-popover":"apply-draft-form--send-announcement-popover--2P9oG"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/assessment-editor.less":function(e,t,r){e.exports={flex:"assessment-editor--flex--DZXNO",editor:"assessment-editor--editor--UXV9S","answer-option":"assessment-editor--answer-option--1OCgu","fitb-question-form-group":"assessment-editor--fitb-question-form-group--20Tyz","knowledge-area":"assessment-editor--knowledge-area--11Kiw","answer-option-inactive":"assessment-editor--answer-option-inactive--1hIbU","answer-option-toggle-wrapper":"assessment-editor--answer-option-toggle-wrapper--1jKtC","answer-option-delete":"assessment-editor--answer-option-delete--rHhxt","answer-option-feedback":"assessment-editor--answer-option-feedback--J3h3o","new-knowledge-area":"assessment-editor--new-knowledge-area--1WLtz","knowledge-area-delete":"assessment-editor--knowledge-area-delete--pGvpB","submit-row":"assessment-editor--submit-row--2420s"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/assessment-list.less":function(e,t,r){e.exports={dragging:"assessment-list--dragging--IGKBx",flex:"assessment-list--flex--1U_Ei",ellipsis:"assessment-list--ellipsis--2023T","assessment-list":"assessment-list--assessment-list--1sF23","assessment-list-item-content":"assessment-list--assessment-list-item-content--1rnzJ",highlight:"assessment-list--highlight--DDLEW","sort-handle":"assessment-list--sort-handle--1OSub","assessment-type":"assessment-list--assessment-type--34uX-"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/bulk-question-uploader.less":function(e,t,r){e.exports={container:"bulk-question-uploader--container--c1Dp2",description:"bulk-question-uploader--description--1paR_",disclaimer:"bulk-question-uploader--disclaimer--2EYVC"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/bulk-question-uploader.mobx-model.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/utils/ud-s3fineuploader.js");var a,s,l;let c=(a=class e extends o["a"]{constructor(){super({acl:"private",allowedExtensionsDotted:[".csv"],sizeLimit:10*1e3*1e3});babelHelpers.initializerDefineProperty(this,"file",s,this);babelHelpers.initializerDefineProperty(this,"error",l,this);this.registerUploadProgressHandler(this._updateFileProgress)}setFile(e){this.file={name:e,progressPercentage:0}}setError(e){this.error=e}clearFile(){this.file=null;this.error="";this.reset()}_updateFileProgress(e,t){if(this.file){if(t===0){this.file.progressPercentage=0}else{this.file.progressPercentage=Math.round(e/t*100)}}}},s=babelHelpers.applyDecoratedDescriptor(a.prototype,"file",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),l=babelHelpers.applyDecoratedDescriptor(a.prototype,"error",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),babelHelpers.applyDecoratedDescriptor(a.prototype,"setFile",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"setFile"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"setError",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"setError"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"clearFile",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"clearFile"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"_updateFileProgress",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"_updateFileProgress"),a.prototype),a)},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/draft-alert.less":function(e,t,r){e.exports={"draft-alert":"draft-alert--draft-alert--39we7","draft-alert-content":"draft-alert--draft-alert-content--3XZwH","draft-alert-cta-container":"draft-alert--draft-alert-cta-container---8cXs","draft-alert-icon":"draft-alert--draft-alert-icon--3HCoE","draft-alert-title":"draft-alert--draft-alert-title--7kPfx"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/parsers.js":function(e,t,r){"use strict";r.d(t,"d",(function(){return a}));r.d(t,"e",(function(){return s}));r.d(t,"c",(function(){return l}));r.d(t,"b",(function(){return c}));r.d(t,"a",(function(){return u}));const n="a".charCodeAt(0);function i(e){return String.fromCharCode(n+e)}function o(e){return e.toLowerCase().charCodeAt(0)-n}function a(e,t,r){const n=r.map(o);return e.map(((e,r)=>{const i=t[r];const o=n.indexOf(r)>=0;return l(e,i,o)}))}function s(e){const t=[];const r=[];const n=[];e.forEach(((e,o)=>{t.push(e.value);r.push(e.feedback);if(e.checked){n.push(i(o))}}));return{answers:t,feedbacks:r,correctResponse:n}}function l(e,t,r){return{value:e,feedback:t||"",checked:r}}function c(e,t){let r=e;t.forEach(((e,t)=>{const n=`<u-blank data-order="${t}"></u-blank>`;const i=`__${e}__`;r=r.replace(n,i)}));r=r.replace(/<\/u-blank>/g,"");return r}function u(e){e=e.trim();let t=e;const r=[];const n=e.replace(/<[^>]+>/g,"").match(/__[^]+?__/gm);(n||[]).forEach(((e,n)=>{r.push(e.replace(/__/g,"").trim());t=t.replace(e,`<u-blank data-order="${n}"></u-blank>`)}));return{question:t,correctResponse:r}}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/quiz-editor.less":function(e,t,r){e.exports={"quiz-editor":"quiz-editor--quiz-editor--2RKDC","edit-questions-header":"quiz-editor--edit-questions-header--2jn2R","edit-questions-header-left":"quiz-editor--edit-questions-header-left--i9aVs","quiz-settings-btns":"quiz-editor--quiz-settings-btns--2bGw_","draft-alert-editor-wrapper":"quiz-editor--draft-alert-editor-wrapper--29Fnd","item-bar":"quiz-editor--item-bar--bbsyc"}},"./src/udemy/js/course-manage-v2/curriculum/item/quiz/quiz-is-saving-backdrop.less":function(e,t,r){e.exports={"quiz-is-saving-backdrop":"quiz-is-saving-backdrop--quiz-is-saving-backdrop--1FsgR"}},"./src/udemy/js/course-manage-v2/curriculum/item/section/section-editor.less":function(e,t,r){e.exports={"section-edit-form":"section-editor--section-edit-form--3omY0",hidden:"section-editor--hidden--3E3tT"}},"./src/udemy/js/course-manage-v2/curriculum/item/section/topic/section-topic-form-input.less":function(e,t,r){e.exports={"section-topic-form-container":"section-topic-form-input--section-topic-form-container--2ExtX","icon-container":"section-topic-form-input--icon-container--1mBPt","topic-with-icon":"section-topic-form-input--topic-with-icon--kjAxF"}},"./src/udemy/js/course-manage-v2/curriculum/item/section/topic/section-topic.less":function(e,t,r){e.exports={ellipsis:"section-topic--ellipsis--17RLN","section-topics":"section-topic--section-topics--cvSOw","section-topic":"section-topic--section-topic--3zVoJ"}},"./src/udemy/js/course-manage-v2/curriculum/item/section/topic/section-topics.less":function(e,t,r){e.exports={"section-topic":"section-topics--section-topic--2eahW","section-topics":"section-topics--section-topics--3TuEk","autosuggest-display-container":"section-topics--autosuggest-display-container--20_Ao"}},"./src/udemy/js/course-manage-v2/curriculum/item/section/topic/topic-autosuggestion.less":function(e,t,r){e.exports={ellipsis:"topic-autosuggestion--ellipsis--qxo9K",ul:"topic-autosuggestion--ul--2FmX_",suggestions:"topic-autosuggestion--suggestions--1hnGF","propose-topic":"topic-autosuggestion--propose-topic--1wfwb","suggested-topic":"topic-autosuggestion--suggested-topic--3di9P"}},"./src/udemy/js/course-manage-v2/events-v2.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return s}));r.d(t,"c",(function(){return c}));r.d(t,"d",(function(){return a}));r.d(t,"e",(function(){return u}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");var i=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");class o{constructor(e,t){this.id=e;this.title=t}}class a{constructor(e){this.id=e}}class s extends n["a"]{constructor(e){let{assignment:t,course:r}=e;super("AssignmentCreated");this.assignment=t;this.course=r}}class l extends n["a"]{constructor(e){let{assignment:t,course:r}=e;super("AssignmentEdited");this.assignment=t;this.course=r}}class c extends n["a"]{constructor(e){let{assignment:t,course:r}=e;super("AssignmentPublished");this.assignment=t;this.course=r}}function u(e,t,r){const n=new o(e,t);const s=new a(r);i["a"].publishEvent(new l({assignment:n,course:s}))}},"./src/udemy/js/course-manage-v2/events.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r.d(t,"b",(function(){return o}));r.d(t,"d",(function(){return a}));r.d(t,"c",(function(){return s}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class i extends n["a"]{constructor(e){let{step:t,action:r}=e;super("CourseCreateActionEvent");this.step=t;this.action=r}}class o extends n["a"]{constructor(e){let{courseId:t,category:r,action:n,objectType:i,objectId:o}=e;super("CourseManageActionEvent");this.courseId=t;this.category=r;this.action=n;this.objectType=i;this.objectId=o}}class a extends n["a"]{constructor(e){super("InstructorOnboardingActionEvent");this.action=e}}class s extends n["a"]{constructor(e){let{category:t,input:r,action:n}=e;super("InstructorCourseListActionEvent");this.category=t;this.input=r;this.action=n}}},"./src/udemy/js/course-manage-v2/full-page-takeover-header.less":function(e,t,r){e.exports={row:"full-page-takeover-header--row--22wJg",flex:"full-page-takeover-header--flex--2wYRF",header:"full-page-takeover-header--header--yZv70",content:"full-page-takeover-header--content--3dgJE",left:"full-page-takeover-header--left--2LtYt",title:"full-page-takeover-header--title--x4F1h",status:"full-page-takeover-header--status--2cjmy","settings-btn":"full-page-takeover-header--settings-btn--2HIwO","back-btn":"full-page-takeover-header--back-btn--1vdpz","back-to-courses":"full-page-takeover-header--back-to-courses--nsJ3P"}},"./src/udemy/js/course-manage-v2/live-chat/live-chat.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var n=r("./node_modules/@udemy/styles/dist/esm/tokens/generated/index.js");var i=r("./node_modules/js-cookie/src/js.cookie.js");var o=r.n(i);var a=r("./node_modules/prop-types/index.js");var s=r.n(a);var l=r("./node_modules/react/index.js");var c=r.n(l);var u=r("./node_modules/react-router/esm/react-router.js");var p=r("./src/udemy/js/utils/ud-external-loaders.js");var d=r("./src/udemy/js/utils/ud-me.js");var h,m;const f=1500000232621;const g="livechat.display.expand";const y="22e8b16c-80bd-4ef9-b45b-40fc67fbd3f0";const b=[/\/captions\/\w{2}_\w{2}\/edit/];let v=Object(u["m"])(h=(m=class e extends l["Component"]{constructor(){super(...arguments);this.originalPushState=void 0;this.isHidden=false}componentDidMount(){this.replacePushState();this.applyWidgetSettings();p["a"].loadZendeskWebWidget(y,(()=>{const e=setInterval((()=>{this.applyWidgetSettings();if(window.zE){clearInterval(e);this.toggleWidgetForUrl(window.location.url);const t=setInterval((()=>{this.initializeWidget();if(window.zE("webWidget:get","chat:department",f)){clearInterval(t);this.enableChatIfAgentsAvailable()}}),1e3)}}),100)}))}componentWillUnmount(){this.resetPushState()}replacePushState(){this.originalPushState=window.history.pushState;const e=this;window.history.pushState=function(t,r,n){e.toggleWidgetForUrl(n);e.originalPushState.call(this,t,r,n)}}resetPushState(){window.history.pushState=this.originalPushState}toggleWidgetForUrl(e){if(window.zE){if(b.some((t=>t.test(e)))){this.isHidden=true;window.zE("webWidget","hide")}else if(this.isHidden){this.isHidden=false;window.zE("webWidget","show")}}}applyWidgetSettings(){window.zESettings={webWidget:{zIndex:999,contactForm:{suppress:false},helpCenter:{suppress:false},talk:{suppress:true},answerBot:{suppress:false}}}}initializeWidget(){window.zE("webWidget","updateSettings",{webWidget:{answerBot:{contactOnlyAfterQuery:true,search:{labels:["instructor"]}},chat:{hideWhenOffline:false,title:gettext("Ask us anything"),prechatForm:{greeting:{"*":gettext("Need help choosing a microphone? "+"Have questions about the review process? "+"Ask us anything. We're here to help!")}},departments:{select:f},offlineForm:{greeting:{"*":gettext("Leave a message")}}},color:{theme:n["a"]["color-purple-300"],launcher:n["a"]["color-purple-300"],button:n["a"]["color-gray-500"]}}});window.zE("webWidget","prefill",{name:{value:d["a"].title},email:{value:d["a"].email}});window.zE("webWidget","setLocale",d["a"].language)}enableChatIfAgentsAvailable(){const e=e=>{o.a.set(g,e,{path:"/"})};window.zE("webWidget:on","close",(()=>{e(0)}));window.zE("webWidget:on","open",(()=>{e(1)}));const t=window.zE("webWidget:get","chat:department",f).status==="online";if(t){window.zE("webWidget","updateSettings",{webWidget:{launcher:{chatLabel:{"*":gettext("Have a question?")}},chat:{suppress:false}}})}else{window.zE("webWidget","updateSettings",{webWidget:{launcher:{chatLabel:{"*":gettext("Leave a message")}},chat:{suppress:true}}})}}render(){return false}},m.propTypes={location:s.a.object.isRequired},m))||h},"./src/udemy/js/course-manage-v2/loader.less":function(e,t,r){e.exports={loader:"loader--loader--2_P5Y"}},"./src/udemy/js/course-manage-v2/main-content.less":function(e,t,r){e.exports={content:"main-content--content--1Myl4",wide:"main-content--wide--yPj7d"}},"./src/udemy/js/course-manage-v2/main-content.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/classnames/index.js");var a=r.n(o);var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/course-manage-v2/main-content.less");var d=r.n(p);const h={"./main-content.less":{content:"main-content--content--1Myl4",wide:"main-content--wide--yPj7d"}};class m extends c["Component"]{render(){const e=a()("content",{wide:this.props.wideContent});return u.a.createElement("div",{className:i()(e,h)},this.props.children)}}m.propTypes={wideContent:l.a.bool};m.defaultProps={wideContent:false}},"./src/udemy/js/course-manage-v2/messages/messages.less":function(e,t,r){e.exports={form:"messages--form--Iu05m"}},"./src/udemy/js/course-manage-v2/quality-feedback/criteria-comment-text-to-html.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e){if(!e){return e}const t=document.createElement("div");t.textContent=e;const r=t.innerHTML.replace(/\n/g,"<br/>");const n=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:/~+#-]*[\w@?^=%&amp;/~+#-])?/gi;const i=[];const o=[];let a;while((a=n.exec(r))!==null){i.push(a.index);o.push(a[0])}if(i.length===0){return r}let s=r.substring(0,i[0]);let l;for(let e=0;e<i.length;e++){if(e+1<i.length){l=r.substring(i[e],i[e+1])}else{l=r.substring(i[e])}s+=l.replace(o[e],`<a href="${o[e]}" target="_blank" rel="nofollow noreferrer noopener">${o[e]}</a>`)}return s}},"./src/udemy/js/course-manage-v2/quality-feedback/qrp-feedback-panel-group.less":function(e,t,r){e.exports={"panel-group-title":"qrp-feedback-panel-group--panel-group-title--puIln","panel-group-subtitle":"qrp-feedback-panel-group--panel-group-subtitle--2u-Mc","panel-group":"qrp-feedback-panel-group--panel-group--baql7",panel:"qrp-feedback-panel-group--panel--3lPlJ","panel-header":"qrp-feedback-panel-group--panel-header--3KN2k","panel-title":"qrp-feedback-panel-group--panel-title--3uM0v","toggle-fixed-btn-container":"qrp-feedback-panel-group--toggle-fixed-btn-container--3m2pl","solution-text":"qrp-feedback-panel-group--solution-text--3uZJg",exceptional:"qrp-feedback-panel-group--exceptional--1Zs9k","needs-fix":"qrp-feedback-panel-group--needs-fix--6Qi2F",acceptable:"qrp-feedback-panel-group--acceptable--21o88","marked-as-fixed":"qrp-feedback-panel-group--marked-as-fixed--oWrPy"}},"./src/udemy/js/course-manage-v2/quality-feedback/quality-feedback.less":function(e,t,r){e.exports={"mt-lg":"quality-feedback--mt-lg--2xhvO","resubmit-row":"quality-feedback--resubmit-row--1xbY2","resubmit-btn-row":"quality-feedback--resubmit-btn-row--3IO4l"}},"./src/udemy/js/course-manage-v2/settings/add-co-instructor.less":function(e,t,r){e.exports={"permission-checkbox":"add-co-instructor--permission-checkbox--3Swrd","permission-checkbox-container":"add-co-instructor--permission-checkbox-container--Y0tJg","permissions-info":"add-co-instructor--permissions-info--1Xoxd","co-instructor-email-input":"add-co-instructor--co-instructor-email-input--1uumV"}},"./src/udemy/js/course-manage-v2/settings/course-eligibility-modal-form.less":function(e,t,r){e.exports={subheader:"course-eligibility-modal-form--subheader--21PQy",form:"course-eligibility-modal-form--form--jywnA"}},"./src/udemy/js/course-manage-v2/settings/course-eligibility-modal-form.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var i=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");var o=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var a=r("./node_modules/@udemy/react-form-components/dist/esm/select/select.react-component.js");var s=r("./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.react-component.js");var l=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var c=r("./node_modules/autobind-decorator/lib/esm/index.js");var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/prop-types/index.js");var d=r.n(p);var h=r("./node_modules/react/index.js");var m=r.n(h);var f=r("./node_modules/mobx/lib/mobx.module.js");var g=r("./src/udemy/js/instructor/toasts.js");var y=r("./src/udemy/js/utils/noop.js");var b=r("./src/udemy/js/utils/ud-api.js");var v,w,E,S,_;let x=(v=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"detail",w,this);babelHelpers.initializerDefineProperty(this,"selectedCourseId",E,this);babelHelpers.initializerDefineProperty(this,"newIsOrganizationEligible",S,this);babelHelpers.initializerDefineProperty(this,"disableSubmitButton",_,this);this.init(e)}init(e){if(e){this.selectedCourseId=e.id;this.newIsOrganizationEligible=!e.isOrganizationEligible}else{this.disableSubmitButton=true}}updateDetail(e){this.detail=e}updateSelectedCourseId(e,t){this.selectedCourseId=e;this.newIsOrganizationEligible=!t}updateOrganizationEligible(e){this.newIsOrganizationEligible=e}postOrganizationCourseEligible(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:y["a"];this.disableSubmitButton=true;const t={course_id:this.selectedCourseId,reason:this.detail,is_eligible:this.newIsOrganizationEligible};return b["f"].post("users/me/organization-course-eligibility/",t).then(Object(f["e"])((()=>{this.disableSubmitButton=false;e();Object(g["c"])(gettext("Course program eligibility updated"))}))).catch(Object(f["e"])((()=>{this.disableSubmitButton=false;Object(g["b"])(b["g"])})))}},w=babelHelpers.applyDecoratedDescriptor(v.prototype,"detail",[f["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),E=babelHelpers.applyDecoratedDescriptor(v.prototype,"selectedCourseId",[f["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),S=babelHelpers.applyDecoratedDescriptor(v.prototype,"newIsOrganizationEligible",[f["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),_=babelHelpers.applyDecoratedDescriptor(v.prototype,"disableSubmitButton",[f["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(v.prototype,"init",[f["e"]],Object.getOwnPropertyDescriptor(v.prototype,"init"),v.prototype),babelHelpers.applyDecoratedDescriptor(v.prototype,"updateDetail",[f["e"]],Object.getOwnPropertyDescriptor(v.prototype,"updateDetail"),v.prototype),babelHelpers.applyDecoratedDescriptor(v.prototype,"updateSelectedCourseId",[f["e"]],Object.getOwnPropertyDescriptor(v.prototype,"updateSelectedCourseId"),v.prototype),babelHelpers.applyDecoratedDescriptor(v.prototype,"updateOrganizationEligible",[f["e"]],Object.getOwnPropertyDescriptor(v.prototype,"updateOrganizationEligible"),v.prototype),babelHelpers.applyDecoratedDescriptor(v.prototype,"postOrganizationCourseEligible",[f["e"]],Object.getOwnPropertyDescriptor(v.prototype,"postOrganizationCourseEligible"),v.prototype),v);var D=r("./src/udemy/js/course-manage-v2/settings/course-eligibility-modal-form.less");r.d(t,"a",(function(){return A}));var C,T,O;function k(e){return`${e.id}:${e.isOrganizationEligible}`}function P(e){const t=e.split(":");const r=t[1]==="true";return{id:parseInt(t[0],10),isOrganizationEligible:r}}let A=Object(u["f"])(C=(T=(O=class e extends h["Component"]{constructor(e){super(e);this.sortedCourses=[];this.defaultCourse=null;if(e.courses.length){this.sortedCourses=e.courses.slice().sort(((e,t)=>t.title>e.title?-1:1));this.defaultCourse=this.sortedCourses[0]}this.store=new x(this.defaultCourse)}onDetailChange(e){let{target:t}=e;this.store.updateDetail(t.value)}onCourseIdActionChange(e){let{target:t}=e;const r=P(t.value);this.store.updateSelectedCourseId(r.id,r.isOrganizationEligible)}onEligibleActionChange(e){let{target:t}=e;this.store.updateOrganizationEligible(t.value)}onSubmit(e){e.preventDefault();this.store.postOrganizationCourseEligible(this.props.onClose)}render(){const{courses:e,...t}=this.props;const r=this.sortedCourses.map((e=>m.a.createElement("option",{key:e.id,value:k({id:e.id,isOrganizationEligible:e.isOrganizationEligible})},e.title)));const c=gettext("If you believe your course does not meet the requirements in the Udemy Business "+"Program terms, let us know below. By opting into the program, all of your "+"courses are eligible unless you specify otherwise. If this changes in the "+"future, you can resubmit the form below.");return m.a.createElement(i["a"],Object.assign({},t,{title:gettext("Course eligibility for the UB program")}),m.a.createElement("form",{onSubmit:this.onSubmit,className:"course-eligibility-modal-form--form--jywnA"},m.a.createElement("p",{className:"course-eligibility-modal-form--subheader--21PQy"},c),m.a.createElement(o["b"],{label:gettext("Course name")},m.a.createElement(a["a"],{defaultValue:this.defaultCourse,onChange:this.onCourseIdActionChange},r)),m.a.createElement(o["b"],{label:gettext("Change course eligibility to")},m.a.createElement(a["a"],{value:this.store.newIsOrganizationEligible,onChange:this.onEligibleActionChange},m.a.createElement("option",{key:"is-eligible",value:"true"},gettext("Is eligible")),m.a.createElement("option",{key:"is-not-eligible",value:"false"},gettext("Is not eligible")))),m.a.createElement(o["b"],{label:gettext("Details on course eligibility")},m.a.createElement(s["a"],{placeholder:gettext("Please explain why this course is or is not eligible"),onChange:this.onDetailChange,value:this.store.detail})),m.a.createElement(l["a"],null,m.a.createElement(n["a"],{onClick:t.onClose,udStyle:"ghost"},gettext("Cancel")),m.a.createElement(n["a"],{type:"submit",disabled:this.store.disableSubmitButton},gettext("Submit")))))}},O.propTypes={courses:d.a.array.isRequired,isOpen:d.a.bool.isRequired,onClose:d.a.func.isRequired},O),babelHelpers.applyDecoratedDescriptor(T.prototype,"onDetailChange",[c["a"]],Object.getOwnPropertyDescriptor(T.prototype,"onDetailChange"),T.prototype),babelHelpers.applyDecoratedDescriptor(T.prototype,"onCourseIdActionChange",[c["a"]],Object.getOwnPropertyDescriptor(T.prototype,"onCourseIdActionChange"),T.prototype),babelHelpers.applyDecoratedDescriptor(T.prototype,"onEligibleActionChange",[c["a"]],Object.getOwnPropertyDescriptor(T.prototype,"onEligibleActionChange"),T.prototype),babelHelpers.applyDecoratedDescriptor(T.prototype,"onSubmit",[c["a"]],Object.getOwnPropertyDescriptor(T.prototype,"onSubmit"),T.prototype),T))||C},"./src/udemy/js/course-manage-v2/settings/course-instructors.less":function(e,t,r){e.exports={instructors:"course-instructors--instructors--Kjfh-","instructor-cell":"course-instructors--instructor-cell--3QYiJ","owner-badge":"course-instructors--owner-badge--2IQpa","pending-badge":"course-instructors--pending-badge--1hFL_","revenue-share":"course-instructors--revenue-share--1US88","add-instructor":"course-instructors--add-instructor--rNUG7","submit-row":"course-instructors--submit-row--2IIt8","alert-banner":"course-instructors--alert-banner--2XlUv","text-center":"course-instructors--text-center--3Fabp",row:"course-instructors--row--3nfqA",percentage:"course-instructors--percentage--OayhQ","manage-instructors-header":"course-instructors--manage-instructors-header--19DeX","manage-instructors-permissions-info":"course-instructors--manage-instructors-permissions-info--3ocNp","permission-checkbox":"course-instructors--permission-checkbox--2hsxe","revoke-invitation-button":"course-instructors--revoke-invitation-button--2SFVH"}},"./src/udemy/js/course-manage-v2/settings/course-instructors.react-component.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/i18n/dist/esm/index.js");var i=r("./node_modules/@udemy/icons/dist/expand-plus.ud-icon");var o=r.n(i);var a=r("./node_modules/@udemy/icons/dist/info-outline.ud-icon");var s=r.n(a);var l=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var c=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal-trigger/modal-trigger.react-component.js");var u=r("./node_modules/@udemy/react-dialog-components/dist/esm/confirm-modal/confirm-modal.react-component.js");var p=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");var d=r("./node_modules/@udemy/react-form-components/dist/esm/checkbox/checkbox.react-component.js");var h=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var m=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-container.react-component.js");var f=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var g=r("./node_modules/@udemy/react-messaging-components/dist/esm/alert-banner/alert-banner.react-component.js");var y=r("./node_modules/@udemy/react-messaging-components/dist/esm/badge/badge.react-component.js");var b=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.react-component.js");var v=r("./node_modules/@udemy/react-structure-components/dist/esm/table/table.react-component.js");var w=r("./node_modules/autobind-decorator/lib/esm/index.js");var E=r("./node_modules/classnames/index.js");var S=r.n(E);var _=r("./node_modules/mobx-react/dist/mobx-react.module.js");var x=r("./node_modules/prop-types/index.js");var D=r.n(x);var C=r("./node_modules/react/index.js");var T=r.n(C);var O=r("./src/udemy/js/course-manage-v2/main-content.react-component.js");var k=r("./src/udemy/js/instructor/toasts.js");var P=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var A=r("./src/udemy/js/utils/get-config-data.js");var I=r("./src/udemy/js/utils/ud-api.js");var j=r("./src/udemy/js/utils/ud-link.js");var R=r("./src/udemy/js/utils/ud-me.js");var N=r("./node_modules/@udemy/react-messaging-components/dist/esm/toaster/toaster.mobx-store.js");var L=r("./node_modules/mobx/lib/mobx.module.js");var M,q,U,H,F,B;let z=(M=class e{constructor(e,t){babelHelpers.initializerDefineProperty(this,"newInstructorEmail",q,this);babelHelpers.initializerDefineProperty(this,"newInstructorEmailError",U,this);babelHelpers.initializerDefineProperty(this,"newInstructorPermissions",H,this);babelHelpers.initializerDefineProperty(this,"newInstructorVisible",F,this);babelHelpers.initializerDefineProperty(this,"isSaving",B,this);this.courseId=null;this.permissions={2:{code:"instructor:edit_course",order:1,text:gettext("Manage course")},4:{code:"instructor:manage_course_reviews",order:6,text:gettext("Reviews")},6:{code:"instructor:view_course_revenue_report",order:7,text:gettext("Revenue report")},8:{code:"instructor:manage_course_qa",order:4,text:gettext("Q&A"),MXOnly:true},10:{code:"instructor:manage_course_assignments",order:5,text:gettext("Assignments")},14:{code:"instructor:manage_captions",order:2,text:gettext("Captions")},18:{code:"instructor:manage_course_performance",order:3,text:gettext("Performance")}};this.courseId=e;this.newInstructorPermissions=Object.entries(this.permissions).filter((e=>!t||!t.includes(e[1].code))).map((e=>{let[t,r]=e;return{id:t,text:r.text,checked:false,disabled:false,order:r.order}})).sort(((e,t)=>e.order-t.order))}setNewInstructorEmail(e){this.newInstructorEmailError="";this.newInstructorEmail=e}setNewInstructorVisible(e){this.newInstructorVisible=e}setNewInstructorPermission(e,t){const r=2;const n=14;this.newInstructorPermissions.find((t=>t.id==e)).checked=t;if(e==r){const e=this.newInstructorPermissions.find((e=>e.id==n));e.checked=t;e.disabled=t}}get isEmailValid(){return this.newInstructorEmail.match(/.+@.+\...+/)}save(e,t){this.isSaving=true;const r=this._getNewInstructorData();return I["f"].post(`/users/me/taught-courses/${this.courseId}/co-instructor-invitations/`,r).then(Object(L["e"])((()=>{const t={udStyle:"success",title:gettext("Invitation sent"),body:gettext("You'll be notified if they accept."),showCta:false};N["a"].addAlertBannerToast(t,{autoDismiss:true});this.isSaving=false;if(e){e()}}))).catch(Object(L["e"])((e=>{if(e.response&&e.response.data&&e.response.data.recipient_email){this.newInstructorEmailError=e.response.data.recipient_email}else{let t=e.message||gettext("An unknown error has occurred.");if(e.response&&e.response.headers&&e.response.headers["x-ui-message"]){t=e.response.headers["x-ui-message"]}const r={udStyle:"error",title:gettext("Error"),body:t,showCta:false};N["a"].addAlertBannerToast(r,{autoDismiss:true})}this.isSaving=false;if(t){t()}})))}_getNewInstructorData(){return{recipient_email:this.newInstructorEmail,permissions:this.newInstructorPermissions.filter((e=>e.checked)).map((e=>this.permissions[e.id].code)),visible:this.newInstructorVisible}}},q=babelHelpers.applyDecoratedDescriptor(M.prototype,"newInstructorEmail",[L["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),U=babelHelpers.applyDecoratedDescriptor(M.prototype,"newInstructorEmailError",[L["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),H=babelHelpers.applyDecoratedDescriptor(M.prototype,"newInstructorPermissions",[L["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),F=babelHelpers.applyDecoratedDescriptor(M.prototype,"newInstructorVisible",[L["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),B=babelHelpers.applyDecoratedDescriptor(M.prototype,"isSaving",[L["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(M.prototype,"setNewInstructorEmail",[w["a"],L["e"]],Object.getOwnPropertyDescriptor(M.prototype,"setNewInstructorEmail"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"setNewInstructorVisible",[w["a"],L["e"]],Object.getOwnPropertyDescriptor(M.prototype,"setNewInstructorVisible"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"setNewInstructorPermission",[w["a"],L["e"]],Object.getOwnPropertyDescriptor(M.prototype,"setNewInstructorPermission"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"isEmailValid",[L["g"]],Object.getOwnPropertyDescriptor(M.prototype,"isEmailValid"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"save",[w["a"],L["e"]],Object.getOwnPropertyDescriptor(M.prototype,"save"),M.prototype),M);var V=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var W=r("./src/udemy/js/course-manage-v2/settings/add-co-instructor.less");var G,K,$;let X=Object(_["f"])(G=(K=($=class e extends C["Component"]{onEmailChangeHandler(e){this.props.store.setNewInstructorEmail(e.target.value)}onPermissionChangeHandler(e){this.props.store.setNewInstructorPermission(e.target.id,e.target.checked)}onVisibleChangeHandler(e){this.props.store.setNewInstructorVisible(e.target.checked)}renderPermissions(){return this.props.store.newInstructorPermissions.map((e=>T.a.createElement("div",{key:`permission-div-${e.id}`,className:"add-co-instructor--permission-checkbox--3Swrd"},T.a.createElement(d["a"],{id:e.id,checked:e.checked,onChange:this.onPermissionChangeHandler,disabled:e.disabled},e.text))))}onSaveSuccess(){this.props.onSubmitted()}render(){return T.a.createElement("div",null,T.a.createElement(h["b"],{label:gettext("Email"),note:this.props.store.newInstructorEmailError,validationState:this.props.store.newInstructorEmailError?"error":null},T.a.createElement(f["b"],{value:this.props.store.newInstructorEmail,onChange:this.onEmailChangeHandler,"data-purpose":"membership-duration",placeholder:gettext("Associated with a Udemy account"),className:"add-co-instructor--co-instructor-email-input--1uumV","data-dialog-auto-focus":true})),T.a.createElement("div",{className:"add-co-instructor--permissions-info--1Xoxd"},T.a.createElement("h3",{className:"ud-heading-sm"},gettext("Permissions")),T.a.createElement(re,null)),T.a.createElement("div",{className:"add-co-instructor--permission-checkbox-container--Y0tJg"},T.a.createElement("div",{className:"add-co-instructor--permission-checkbox--3Swrd"},T.a.createElement(d["a"],{checked:this.props.store.newInstructorVisible,onChange:this.onVisibleChangeHandler},gettext("Visible"))),this.renderPermissions()),T.a.createElement(V["a"],null,T.a.createElement(l["a"],{"data-purpose":"cancel-button",udStyle:"ghost",onClick:()=>this.props.onCancel()},gettext("Cancel")),T.a.createElement(l["a"],{"data-purpose":"send-invitation-button",disabled:!this.props.store.isEmailValid||this.props.store.isSaving,onClick:()=>this.props.store.save(this.onSaveSuccess,null)},gettext("Send invitation"))))}},$.propTypes={store:D.a.object.isRequired,onSubmitted:D.a.func.isRequired,onCancel:D.a.func.isRequired},$),babelHelpers.applyDecoratedDescriptor(K.prototype,"onEmailChangeHandler",[w["a"]],Object.getOwnPropertyDescriptor(K.prototype,"onEmailChangeHandler"),K.prototype),babelHelpers.applyDecoratedDescriptor(K.prototype,"onPermissionChangeHandler",[w["a"]],Object.getOwnPropertyDescriptor(K.prototype,"onPermissionChangeHandler"),K.prototype),babelHelpers.applyDecoratedDescriptor(K.prototype,"onVisibleChangeHandler",[w["a"]],Object.getOwnPropertyDescriptor(K.prototype,"onVisibleChangeHandler"),K.prototype),babelHelpers.applyDecoratedDescriptor(K.prototype,"onSaveSuccess",[w["a"]],Object.getOwnPropertyDescriptor(K.prototype,"onSaveSuccess"),K.prototype),K))||G;var Y=r("./src/udemy/js/course-manage-v2/settings/course-instructors.less");r.d(t,"a",(function(){return re}));r.d(t,"b",(function(){return ne}));var Q,J,Z,ee;const te=Object(A["a"])();class re extends T.a.Component{render(){return T.a.createElement(T.a.Fragment,null,T.a.createElement(b["a"],{placement:"bottom-start",a11yRole:"description",trigger:T.a.createElement(l["a"],{udStyle:"link"},T.a.createElement(s.a,{label:gettext("Learn more about permissions")})),canToggleOnHover:true},T.a.createElement(n["b"],{html:gettext('Visit <a class="link">the link</a> to '+"learn more about permissions."),interpolate:{link:T.a.createElement("a",{className:"ud-link-underline",href:j["a"].toSupportLink("adding_co_instructors"),target:"_blank",rel:"noopener noreferrer"})}})))}}let ne=(Q=Object(_["e"])("store"),Q(J=Object(_["f"])(J=(Z=(ee=class e extends C["Component"]{renderError(e,t){let r=e;if(typeof e!=="string"){r=e.message;if(e.isHTML){r=T.a.createElement("span",Object(P["a"])({descriptionOfCaller:"course-instructors:error-message",html:e.message}))}}return T.a.createElement(g["a"],Object.assign({showCta:false,udStyle:"error",className:"course-instructors--alert-banner--2XlUv",title:r},t))}get columns(){const e=te.brand.is_discussions_enabled;const t=te.brand.is_add_reviews_enabled;const r=this.props.store.instructorStore.course.isPaid;return[{fieldName:"instructor",headerName:gettext("Instructor"),width:144},r&&{fieldName:"revenueShare",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Revenue <br /> share"),interpolate:{}})),width:88},{fieldName:"visible",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Visible"),interpolate:{}})),width:88},{fieldName:"manage",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Manage"),interpolate:{}})),width:88},{fieldName:"captions",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Captions"),interpolate:{}})),width:88},{fieldName:"performance",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Performance"),interpolate:{}})),width:88},e&&{fieldName:"qa",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Q&A"),interpolate:{}})),width:88},{fieldName:"assignments",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Assignments"),interpolate:{}})),width:88},t&&{fieldName:"reviews",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Reviews"),interpolate:{}})),width:88},r&&{fieldName:"revenueReport",headerName:T.a.createElement("div",{className:"course-instructors--text-center--3Fabp"},T.a.createElement(n["b"],{html:gettext("Revenue <br /> report"),interpolate:{}})),width:88}].filter(Boolean)}pendingRow(e){const{instructorStore:t}=this.props.store;const r=(e,t)=>T.a.createElement(d["a"],Object.assign({className:"course-instructors--permission-checkbox--2hsxe",disabled:true},t),T.a.createElement("span",{className:"ud-sr-only"},e));const n=(t,n,i)=>{const o=e[t];return r(n,{checked:o,...i})};const i=()=>T.a.createElement("div",{className:"course-instructors--revenue-share--1US88"},T.a.createElement(h["b"],{label:gettext("Share of Instructor Revenue"),labelProps:{className:"ud-sr-only"}},T.a.createElement(m["a"],null,T.a.createElement(f["b"],{size:"medium",maxLength:"3",value:"",disabled:true}),T.a.createElement("div",{className:"course-instructors--percentage--OayhQ"},"%"))));const o=()=>T.a.createElement(l["a"],{udStyle:"link",className:"ud-link-underline course-instructors--revoke-invitation-button--2SFVH",typography:"ud-text-md","data-purpose":"revoke-invitation-button",onClick:()=>t.revokeInvitation(e.id)},gettext("Revoke"));return{instructor:T.a.createElement("div",{className:"course-instructors--instructor-cell--3QYiJ"},e.recipient_email,T.a.createElement("div",{className:"course-instructors--row--3nfqA"},T.a.createElement(y["a"],{className:"course-instructors--pending-badge--1hFL_"},gettext("Pending")),o())),visible:r(gettext("Visible"),{checked:e.visible}),manage:n("instructor:edit_course",gettext("Manage")),captions:n("instructor:manage_captions",gettext("Captions")),performance:n("instructor:manage_course_performance",gettext("Performance")),qa:n("instructor:manage_course_qa",gettext("Q&A")),assignments:n("instructor:manage_course_assignments",gettext("Assignments")),reviews:n("instructor:manage_course_reviews",gettext("Reviews")),revenueReport:n("instructor:view_course_revenue_report",gettext("Revenue Report")),revenueShare:i()}}row(e){const{instructorStore:t,course:r}=this.props.store;const n=(e,t)=>T.a.createElement(d["a"],Object.assign({className:"course-instructors--permission-checkbox--2hsxe"},t),T.a.createElement("span",{className:"ud-sr-only"},e));const i=(r,i,o)=>{const a=e[r];const s=e.is_owner;const l=n=>{t.setPermission(e.user.id,r,n.target.checked)};return n(i,{checked:a,disabled:s,onChange:l,...o})};const o=()=>{const r=r=>{if(!/^[0-9]{0,3}$/g.test(r.target.value)){return r.preventDefault()}const n=Number(r.target.value);if(!(0<=n&&n<=100)){return r.preventDefault()}t.setRevenuePercentage(e.user.id,n);if(n>0){t.setPermission(e.user.id,"instructor:view_course_revenue_report",true)}};return T.a.createElement("div",{className:"course-instructors--revenue-share--1US88"},T.a.createElement(h["b"],{label:gettext("Share of Instructor Revenue"),labelProps:{className:"ud-sr-only"}},T.a.createElement(m["a"],null,T.a.createElement(f["b"],{size:"medium",maxLength:"3",value:e.revenue_share_percentage,onChange:r}),T.a.createElement("div",{className:"course-instructors--percentage--OayhQ"},"%"))))};const a=()=>{if(R["a"].id===e.user.id){return T.a.createElement(c["a"],{trigger:T.a.createElement(l["a"],{udStyle:"link",className:"ud-link-underline",typography:"ud-text-md","data-purpose":"leave-course-button"},gettext("Leave course")),renderModal:e=>{let{isOpen:t,onClose:n}=e;return T.a.createElement(u["a"],{confirmText:gettext("Leave course"),isOpen:t,onCancel:n,onConfirm:()=>{n();this.props.store.leaveCourse().then((()=>{this.props.window.location.href="/instructor/courses/?flash=left-course"})).catch((()=>Object(k["b"])(I["g"])))}},interpolate(gettext('Do you want to leave the course "%(course_title)s" as a co-instructor?'),{course_title:r.title},true))}})}return T.a.createElement(l["a"],{udStyle:"link",className:"ud-link-underline",typography:"ud-text-md","data-purpose":"remove-instructor-button",onClick:()=>t.deleteInstructor(e.user.id)},gettext("Remove"))};return{instructor:T.a.createElement("div",{className:"course-instructors--instructor-cell--3QYiJ"},e.user.title,e.is_owner&&T.a.createElement("div",{className:"course-instructors--row--3nfqA"},T.a.createElement(y["a"],{className:"course-instructors--owner-badge--2IQpa"},gettext("Owner"))),!e.is_owner&&T.a.createElement("div",{className:"course-instructors--row--3nfqA"},a())),visible:n(gettext("Visible"),{checked:e.visible,onChange:r=>t.setVisible(e.user.id,r.target.checked)}),manage:i("instructor:edit_course",gettext("Manage"),{onChange:r=>{const n=e.user.id;const i=r.target.checked;t.setPermission(n,"instructor:edit_course",i);t.setPermission(n,"instructor:manage_captions",i)}}),captions:i("instructor:manage_captions",gettext("Captions"),{disabled:e["instructor:edit_course"]}),performance:i("instructor:manage_course_performance",gettext("Performance")),qa:i("instructor:manage_course_qa",gettext("Q&A")),assignments:i("instructor:manage_course_assignments",gettext("Assignments")),reviews:i("instructor:manage_course_reviews",gettext("Reviews")),revenueReport:i("instructor:view_course_revenue_report",gettext("Revenue Report"),e.revenue_share_percentage>0?{checked:true,disabled:true}:{}),revenueShare:o(e)}}onCoInstructorModalSubmit(e){e.onClose();this.props.store.instructorStore.fetchPendingInstructors()}onCoInstructorModalCancel(e){e.onClose()}renderAddInstructorModal(e){const t=[];if(!te.brand.is_discussions_enabled){t.push("instructor:manage_course_qa")}if(!te.brand.is_add_reviews_enabled){t.push("instructor:manage_course_reviews")}if(!this.props.store.instructorStore.course.isPaid){t.push("instructor:view_course_revenue_report")}return T.a.createElement(p["a"],Object.assign({},e,{title:gettext("Add instructors")}),T.a.createElement(X,{onSubmitted:()=>this.onCoInstructorModalSubmit(e),onCancel:()=>this.onCoInstructorModalCancel(e),store:new z(this.props.store.instructorStore.course.id,t)}))}async save(){const{instructorStore:e}=this.props.store;await e.save();if(e.instructorRemovedSelfManagePermission){this.props.window.location.href="/instructor/courses/"}}render(){const{instructorStore:e}=this.props.store;if(!e){return null}return T.a.createElement(O["a"],null,T.a.createElement("div",{className:"course-instructors--manage-instructors-header--19DeX"},T.a.createElement("div",{className:"course-instructors--manage-instructors-permissions-info--3ocNp"},T.a.createElement("h3",{className:"ud-heading-md"},gettext("Manage instructor permissions")),T.a.createElement(re,null)),T.a.createElement("div",{className:"course-instructors--add-instructor--rNUG7"},T.a.createElement(c["a"],{renderModal:this.renderAddInstructorModal,trigger:T.a.createElement(l["a"],{udStyle:"ghost",size:"xsmall"},T.a.createElement(o.a,{size:"small",color:"info",label:false}),gettext("Add instructor"))}))),T.a.createElement("div",{className:(S()({"full-width-lines":true,"ud-text-sm":true})?S()({"full-width-lines":true,"ud-text-sm":true})+" ":"")+"course-instructors--instructors--Kjfh-"},T.a.createElement(v["a"],{columns:this.columns,rows:[...e.instructors.map(this.row),...e.pendingInstructors.filter((t=>!e.revokingInvitations.includes(t.id))).map(this.pendingRow)]}),T.a.createElement("div",{className:"course-instructors--submit-row--2IIt8"},T.a.createElement(l["a"],{"data-purpose":"save-instructor-button",disabled:!e.isValidRevenue||e.isSaving,onClick:this.save},gettext("Save"))),!e.isValidRevenue&&!e.isLoading&&this.renderError(gettext("Your total revenue must add up to 100%.")),e.errors.map(((e,t)=>this.renderError(e,{key:t})))))}},ee.propTypes={store:D.a.object.isRequired,window:D.a.object},ee.defaultProps={window:window},ee),babelHelpers.applyDecoratedDescriptor(Z.prototype,"pendingRow",[w["a"]],Object.getOwnPropertyDescriptor(Z.prototype,"pendingRow"),Z.prototype),babelHelpers.applyDecoratedDescriptor(Z.prototype,"row",[w["a"]],Object.getOwnPropertyDescriptor(Z.prototype,"row"),Z.prototype),babelHelpers.applyDecoratedDescriptor(Z.prototype,"onCoInstructorModalSubmit",[w["a"]],Object.getOwnPropertyDescriptor(Z.prototype,"onCoInstructorModalSubmit"),Z.prototype),babelHelpers.applyDecoratedDescriptor(Z.prototype,"onCoInstructorModalCancel",[w["a"]],Object.getOwnPropertyDescriptor(Z.prototype,"onCoInstructorModalCancel"),Z.prototype),babelHelpers.applyDecoratedDescriptor(Z.prototype,"renderAddInstructorModal",[w["a"]],Object.getOwnPropertyDescriptor(Z.prototype,"renderAddInstructorModal"),Z.prototype),babelHelpers.applyDecoratedDescriptor(Z.prototype,"save",[w["a"]],Object.getOwnPropertyDescriptor(Z.prototype,"save"),Z.prototype),Z))||J)||J)},"./src/udemy/js/course-manage-v2/settings/course-settings.less":function(e,t,r){e.exports={"mt-sm":"course-settings--mt-sm--sJeTv","privacy-form":"course-settings--privacy-form--3HMRJ","mt-md":"course-settings--mt-md--2jxjR","mt-lg":"course-settings--mt-lg--pOlhd","mb-xs":"course-settings--mb-xs--12IKD","line-length-md":"course-settings--line-length-md--TAr8U","danger-zone":"course-settings--danger-zone--_lK8a","danger-row":"course-settings--danger-row--1XwRT","danger-btn":"course-settings--danger-btn--3HaPI","danger-info":"course-settings--danger-info--1QX0i"}},"./src/udemy/js/course-manage-v2/side-nav/side-nav.less":function(e,t,r){e.exports={"side-nav":"side-nav--side-nav--h8FTL","nav-section":"side-nav--nav-section--2jHwe","nav-section-title":"side-nav--nav-section-title--Hq2Jb","nav-item-link":"side-nav--nav-item-link--2qfvl","nav-item":"side-nav--nav-item--3XyR4","publish-button":"side-nav--publish-button--yW0v1","nav-item-active":"side-nav--nav-item-active--10cLf",completion:"side-nav--completion--25WQ7","counter-container":"side-nav--counter-container--3ii4u",counter:"side-nav--counter--3ehTU","toggle-menu-btn":"side-nav--toggle-menu-btn--UZeDa",open:"side-nav--open--22jsc",nav:"side-nav--nav--6iscr","nav-sections":"side-nav--nav-sections--1OE5j"}},"./src/udemy/js/course-manage-v2/students/invitation-request-table.less":function(e,t,r){e.exports={"invitation-request-table":"invitation-request-table--invitation-request-table--2dLis","user-profile":"invitation-request-table--user-profile--3-Nw6",actions:"invitation-request-table--actions--S_k4m"}},"./src/udemy/js/course-manage-v2/students/invite-students-modal-body.less":function(e,t,r){e.exports={"alert-banner":"invite-students-modal-body--alert-banner--2-_n0"}},"./src/udemy/js/course-manage-v2/students/students-list.less":function(e,t,r){e.exports={"no-students":"students-list--no-students--gL9g6","button-bar":"students-list--button-bar--2Anl-","search-field":"students-list--search-field--3sYti","table-container":"students-list--table-container--zRv60","student-name":"students-list--student-name--3zWCU","ub-badge":"students-list--ub-badge--sPTo_",pagination:"students-list--pagination--lrds7"}},"./src/udemy/js/course-manage-v2/sub-header/sub-header.less":function(e,t,r){e.exports={"flex-align-center":"sub-header--flex-align-center--1_RER",container:"sub-header--container--1pQeg",content:"sub-header--content--1H7YJ"}},"./src/udemy/js/course-manage-v2/sub-header/sub-header.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/prop-types/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./src/udemy/js/course-manage-v2/sub-header/sub-header.less");var l=r.n(s);class c extends o["Component"]{render(){const{title:e,children:t,actionButtons:r}=this.props;return a.a.createElement("div",{className:"sub-header--flex-align-center--1_RER sub-header--container--1pQeg"},a.a.createElement("div",{className:"sub-header--flex-align-center--1_RER sub-header--content--1H7YJ"},a.a.createElement("h2",{"data-purpose":"page-title",className:"ud-heading-serif-xl"},e),t),r&&a.a.createElement("div",{className:"sub-header--flex-align-center--1_RER sub-header--content--1H7YJ"},r))}}c.propTypes={actionButtons:i.a.node,title:i.a.string.isRequired};c.defaultProps={actionButtons:null}},"./src/udemy/js/course-manage-v2/udlite-app.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@udemy/react-structure-components/dist/esm/error-page/error-page.react-component.js");var i=r("./node_modules/mobx-react/dist/mobx-react.module.js");var o=r("./node_modules/prop-types/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./node_modules/react-router/esm/react-router.js");var u=r("./src/udemy/js/base-components/router/memoized-browser-router.react-component.js");var p=r("./src/udemy/js/base-components/router/page-tracking-route.react-component.js");var d=r("./src/udemy/js/course-manage-v2/main-content.react-component.js");var h=r("./src/udemy/js/utils/ud-system-message.js");var m=r("./node_modules/@udemy/i18n/dist/esm/index.js");var f=r("./node_modules/autobind-decorator/lib/esm/index.js");var g=r("./src/udemy/js/utils/ud-link.js");var y=r("./node_modules/@udemy/react-core-components/dist/esm/router-link/router-link.react-component.js");var b=r("./node_modules/@udemy/react-messaging-components/dist/esm/alert-banner/alert-banner.react-component.js");var v=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var w=r("./src/udemy/js/course-manage-v2/loader.less");const E=e=>l.a.createElement(v["b"],Object.assign({className:"loader--loader--2_P5Y"},e));var S=E;const _=["en","es","pt","fr","it"];const x=["fr","de","pl","it","es","pt"];const D={DISABLED:"disabled",DISABLED_LANGUAGE_CATEGORY:"disabledLanguageCategory",LOW_QUALITY:"lowQuality",MANUAL_COVERAGE:"manualCoverage",AUTO_COVERAGE:"autoCoverage",AUTO_TRANSLATED_CAPTIONS:"auto_translated_captions",INCOMPLETE_AUTO_TRANSLATED_CAPTIONS:"incomplete_auto_translated_captions",AUTO_GENERATED_CAPTION_INSTRUCTIONS:"auto_generated_caption_instructions",REACH_MORE_STUDENT_WITH_CAPTIONS:"reach_more_student_with_captions",REACH_MORE_STUDENT_WITH_TRANSLATED_CAPTIONS:"reach_more_student_with_translated_captions"};const C={[D.REACH_MORE_STUDENT_WITH_TRANSLATED_CAPTIONS]:{title:gettext("Reach more students with translated captions"),body:gettext("Translated captions can help your content to be more accessible to more students. You can upload translated captions for your course at any time.")},[D.REACH_MORE_STUDENT_WITH_CAPTIONS]:{title:gettext("Reach more students with captions"),body:gettext("Captions can help your content to be accessible to more students. You can upload captions for your course at any time.")},[D.AUTO_GENERATED_CAPTION_INSTRUCTIONS]:{title:gettext("Reach more students with captions"),body:gettext("Udemy will add auto-generated captions to your course to make course content more accessible. Captions will be available within 48 hours of publishing your course. You can review and edit your captions on this page once they have been generated."),footerLink:{title:gettext("Find out more about captions here."),href:"/udemy-teach-hub/course_creation/"}},[D.AUTO_TRANSLATED_CAPTIONS]:{title:gettext("Reach international students with captions"),body:gettext("Your course captions have been automatically translated into %(locale)s. If you want do not want these captions available on your course, you can disable them."),systemMessageId:h["a"].ids.autoTranslatedCaptions},[D.INCOMPLETE_AUTO_TRANSLATED_CAPTIONS]:{level:"warning",title:gettext("Some lectures are missing captions because auto-translation failed due to missing punctuation."),body:gettext("To have these lectures retranslated, please review all source captions in English and add punctuation where relevant.")},[D.LOW_QUALITY]:{level:"warning",title:gettext("Captions have been automatically generated for this course in %(locale)s, but have been disabled since they are low "+"quality"),body:gettext("We recommend reviewing these captions for errors. You can easily edit and improve captions by clicking Edit to launch "+"Udemy's Caption Editing Tool."),systemMessageId:h["a"].ids.courseTranslationLowConfidence},[D.DISABLED_LANGUAGE_CATEGORY]:{level:"warning",title:gettext("Closed Captions have been automatically generated for this course in %(locale)s, but have been disabled since this is a "+"Language course"),body:gettext("If the course contains other languages the resulting captions may be low quality. You can enable captions for this course but "+"we recommend that you first review the captions and fix any errors."),systemMessageId:h["a"].ids.courseTranslationDisabledLanguageCat},[D.DISABLED]:{level:"warning",title:gettext("Captions have been disabled for %(locale)s.")},[D.MANUAL_COVERAGE]:{level:"success",title:gettext("All published lectures have been captioned."),body:gettext("Students will now see the ‘CC’ icon for %(locale)s on your course landing page."),systemMessageId:h["a"].ids.courseTranslationManualCoverage},[D.AUTO_COVERAGE]:{level:"success",title:gettext("Captions have been automatically generated for this course in %(locale)s"),body:gettext("We recommend reviewing these captions for errors. You can easily edit and improve captions by clicking Edit to launch "+"Udemy's Caption Editing Tool."),systemMessageId:h["a"].ids.courseTranslationAutoCoverage}};const T={PUBLIC:"public",RESTRICTED:"restricted"};const O=["chapter","lecture"];const k=["Video","VideoMashup"];const P={id:-1,title:gettext("Ungrouped lectures")};const A={id:-2,title:gettext("Promotional video")};const I={VALIDATION:gettext("The caption file could not be uploaded due to the following error:"),UPLOAD:gettext("An error occurred uploading your file. Please try again later."),NAME_COLLISION:gettext("An error occurred uploading your file. Please try again later.")};const j={ALL:"ALL",UNCAPTIONED:"UNCAPTIONED",AUTOCAPTIONED:"AUTOCAPTIONED",LOW_QUALITY:"LOW_QUALITY"};const R={"fields[caption]":"asset_id,locale_id,title,url,source,status,confidence_threshold,modified,is_edit,is_edit_of_autocaption"};const N={"fields[draft_caption]":"asset_id,locale_id,source,status,published_caption_id,modified"};const L={"fields[asset]":"asset_type,id",captions_status:"__all__"};const M={page_size:200};const q=1e3;const U="course_translation";const H="promo-video";const F={managed:1,manual:2,auto:3};var B=r("./src/udemy/js/course-captions/captions-alert.less");var z,V,W,G;let K=(z=Object(i["e"])("store"),z(V=Object(i["f"])(V=(W=(G=class e extends l.a.Component{dismissSystemMessageAlert(){this.props.store.dismissSystemMessageAlertNotifyingServer(this._alert.systemMessageId,this.props.store.translationRecord.id,U)}get _alert(){return C[this.props.alertCode]}render(){const{level:e,title:t,body:r,systemMessageId:n,footerLink:i}=this._alert;const o={locale:this.props.store.localeTitles[this.props.store.currentLocaleId]};const a={udStyle:e||"information",showCta:false,title:interpolate(t,o,true),body:!r&&!i?null:l.a.createElement(l.a.Fragment,null,r&&l.a.createElement("p",{className:"captions-alert--body--1oP-N"},interpolate(r,o,true)),i&&l.a.createElement("div",{className:"ud-text-with-links captions-alert--footer--2T50I"},l.a.createElement("a",{className:"ud-heading-md",href:i.href},interpolate(i.title,o,true))))};if(n){return this.props.store.hasSeenAlert(n)?null:l.a.createElement(b["a"],Object.assign({},a,{"data-purpose":"caption-dismissible-alert",className:"captions-alert--alert-banner--2452H",showCta:true,ctaText:gettext("Dismiss"),onAction:this.dismissSystemMessageAlert,dismissButtonProps:false}))}return l.a.createElement(b["a"],Object.assign({},a,{"data-purpose":"caption-alert",className:"captions-alert--alert-banner--2452H"}))}},G.propTypes={store:a.a.object.isRequired,alertCode:a.a.string.isRequired},G),babelHelpers.applyDecoratedDescriptor(W.prototype,"dismissSystemMessageAlert",[f["a"]],Object.getOwnPropertyDescriptor(W.prototype,"dismissSystemMessageAlert"),W.prototype),W))||V)||V);var $=r("./src/udemy/js/survey/radio-button.react-component.js");var X=r("./src/udemy/js/course-captions/captions-form.less");var Y,Q,J,Z;const ee=e=>{let{activeTab:t,name:r,text:n,setActiveTab:i,filteredCounts:o}=e;if(o[r]===0){if(t===r){i(j.ALL)()}return null}const a=()=>i(r);return l.a.createElement($["a"],{name:"captions-filter",checked:t===r,onChange:a()},interpolate(n,{count:o[r]},true))};ee.propTypes={activeTab:a.a.string.isRequired,name:a.a.oneOf(Object.keys(j)).isRequired,text:a.a.string.isRequired,setActiveTab:a.a.func.isRequired,filteredCounts:a.a.object.isRequired};let te=(Y=Object(i["e"])("store"),Y(Q=Object(i["f"])(Q=(J=(Z=class e extends s["Component"]{setTab(e){return()=>this.props.store.setActiveTab(e)}isAllManualCaptioned(){const e=Object.values(this.props.store.filteredCounts);return e.every((e=>e===0))}render(){if(this.isAllManualCaptioned()){this.props.store.setActiveTab(j.ALL);return null}const{activeTab:e,filteredCounts:t}=this.props.store;const r={activeTab:e,filteredCounts:t,setActiveTab:this.setTab};return l.a.createElement("div",{className:"captions-form--filter-buttons--1Clv2","data-purpose":"captions-filter"},l.a.createElement($["a"],{name:"captions-filter",checked:e===j.ALL,onChange:this.setTab(j.ALL)},gettext("All")),l.a.createElement(ee,Object.assign({name:j.UNCAPTIONED,text:gettext("Uncaptioned (%(count)s)")},r)),l.a.createElement(ee,Object.assign({name:j.AUTOCAPTIONED,text:gettext("Autogenerated (%(count)s)")},r)),l.a.createElement(ee,Object.assign({name:j.LOW_QUALITY,text:gettext("Low Quality (%(count)s)")},r)))}},Z.propTypes={store:a.a.object.isRequired},Z),babelHelpers.applyDecoratedDescriptor(J.prototype,"setTab",[f["a"]],Object.getOwnPropertyDescriptor(J.prototype,"setTab"),J.prototype),J))||Q)||Q);var re=r("./node_modules/@udemy/icons/dist/more.ud-icon");var ne=r.n(re);var ie=r("./node_modules/@udemy/icons/dist/success.ud-icon");var oe=r.n(ie);var ae=r("./node_modules/@udemy/icons/dist/warning.ud-icon");var se=r.n(ae);var le=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var ce=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var ue=r("./node_modules/@udemy/react-date-time-components/dist/esm/relative-duration/relative-duration.react-component.js");var pe=r("./node_modules/@udemy/react-dialog-components/dist/esm/confirm-modal/confirm-modal.react-component.js");var de=r("./node_modules/@udemy/react-menu-components/dist/esm/dropdown/dropdown.react-component.js");var he=r("./node_modules/mobx/lib/mobx.module.js");var me=r("./src/udemy/js/caption/constants.js");var fe=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var ge=r("./node_modules/@udemy/icons/dist/info.ud-icon");var ye=r.n(ge);var be=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.react-component.js");const ve=e=>{let{children:t,iconProps:r,...n}=e;return l.a.createElement(be["a"],Object.assign({a11yRole:"description",canToggleOnHover:true,placement:"bottom",className:"captions-form--tooltip--ASQ8C",trigger:l.a.createElement(ye.a,Object.assign({label:gettext("Get info")},r))},n),l.a.createElement("div",{className:"ud-text-sm"},t))};ve.propTypes={iconProps:a.a.object};ve.defaultProps={iconProps:{}};var we=ve;var Ee=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var Se,_e;let xe=(Se=(_e=class e extends s["Component"]{constructor(){super(...arguments);this.id=Object(Ee["a"])("uploader")}handleChange(e){const t=e.target.files[0];t&&this.props.onChange(t);e.target.value=""}render(){const{onChange:e,...t}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{accept:me["d"].join(","),onChange:this.handleChange,type:"file",name:this.id,id:this.id,className:"ud-sr-only captions-form--uploader--1occP","data-purpose":"upload-caption"}),l.a.createElement(le["a"],Object.assign({},t,{componentClass:"label",htmlFor:this.id})))}},_e.propTypes={onChange:a.a.func.isRequired},_e),babelHelpers.applyDecoratedDescriptor(Se.prototype,"handleChange",[f["a"]],Object.getOwnPropertyDescriptor(Se.prototype,"handleChange"),Se.prototype),Se);var De,Ce,Te,Oe,ke;const Pe=e=>{let{caption:t}=e;if(!t||t.status!==me["f"].SUCCESS){return null}return l.a.createElement("span",null,l.a.createElement(ue["a"],{datetime:t.modified}))};Pe.propTypes={caption:a.a.shape({status:a.a.number.isRequired,modified:a.a.string.isRequired})};Pe.defaultProps={caption:undefined};const Ae=e=>{let{caption:t,isLecturePublished:r,isCourseLocale:n}=e;if(!t||t.status===me["f"].FAILED){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Uncaptioned")),r||!n?null:l.a.createElement(we,null,gettext("Unpublished videos will not be autocaptioned.")))}else if(t.status===me["f"].DELETING){return l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Deleting"))}else if(t.status!==me["f"].SUCCESS){if(t.source==="auto"){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Generating (Up to one hour)")),l.a.createElement(we,null,gettext("Captions are being created automatically for this lecture.")))}return l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Processing"))}if(t.source==="auto"){if(!t.confidenceThreshold){return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Auto-generated (Needs review)")),l.a.createElement(we,null,gettext("These captions may have errors. Please click edit and review captions.")))}return l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Auto-generated"))}if(t.isEdit){return l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Edited"))}return l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},gettext("Uploaded"))};Ae.propTypes={caption:a.a.object,isLecturePublished:a.a.bool.isRequired,isCourseLocale:a.a.bool.isRequired};Ae.defaultProps={caption:undefined};const Ie=e=>{let{caption:t,changeCaptionFn:r,deleteFn:n,editFn:i}=e;const o=[];const a=t&&t.status!==me["f"].FAILED;if(t&&t.status===1){o.push(l.a.createElement(de["a"].MenuItem,{key:"edit",className:"captions-form--caption-edit-menu-item--1PaEl",onClick:i},gettext("Edit")))}o.push(l.a.createElement(de["a"].MenuItem,{key:"upload",componentClass:xe,typography:"ud-text-sm",udStyle:"ghost",onChange:r},gettext("Upload")));if(t&&t.status===1){o.push(l.a.createElement(de["a"].MenuItem,{componentClass:"div",key:"download",href:t.url,target:"_blank"},gettext("Download")))}if(n&&t&&t.status===1&&t.source!=="auto"){const e=t.isEditOfAutoCaption?gettext("Reset"):gettext("Delete");o.push(l.a.createElement(de["a"].MenuItem,{key:"delete","data-purpose":"delete-caption",onClick:n},l.a.createElement("span",{className:"captions-form--color-negative--hldu1"},e)))}let s=null;if(t&&t.status===me["f"].SUCCESS){s=l.a.createElement(le["a"],{key:"edit",onClick:i,size:"xsmall",udStyle:"secondary",className:"captions-form--caption-action-button--3dPul captions-form--hidden-lg-max--3uUqy"},gettext("Edit"))}else if(!a){s=l.a.createElement(xe,{key:"upload",onChange:r,udStyle:"secondary",className:"captions-form--caption-action-button--3dPul",size:"xsmall"},gettext("Upload"))}return l.a.createElement(l.a.Fragment,null,s,a?l.a.createElement(de["a"],{placement:"bottom-end",className:"captions-form--caption-action-dropdown--3zvst",trigger:l.a.createElement(ce["a"],{"data-purpose":"dropdown-ellipsis-editor",size:"xsmall",udStyle:"ghost"},l.a.createElement(ne.a,{label:gettext("Actions"),size:"medium"}))},l.a.createElement(de["a"].Menu,null,o)):null)};Ie.propTypes={caption:a.a.object,changeCaptionFn:a.a.func,deleteFn:a.a.func,editFn:a.a.func};Ie.defaultProps={caption:undefined,changeCaptionFn:undefined,deleteFn:undefined,editFn:undefined};function je(e){let{type:t,message:r,block:n}=e;return l.a.createElement(b["a"],{udStyle:"error",className:"captions-form--error-alert-banner--A-DhG","data-purpose":"caption-upload-alert",showCta:false,title:I[t],body:!r&&!n?null:l.a.createElement(l.a.Fragment,null,r&&l.a.createElement("p",Object(fe["a"])({descriptionOfCaller:"lecture-item:message",html:r})),n&&l.a.createElement("pre",null,n))})}je.propTypes={type:a.a.string.isRequired,message:a.a.string.isRequired,block:a.a.string};je.defaultProps={block:undefined};const Re=e=>{let{fileName:t,progress:r=0}=e;const n=l.a.createElement("div",{className:"captions-form--progress-bar-text--16Z3l"},l.a.createElement(v["a"],{size:"small"}),interpolate(gettext("Uploading %(fileName)s"),{fileName:t},true));return l.a.createElement("div",{className:"captions-form--lecture-item-uploading--rErIw captions-form--progress-bar-text-container--1rpM8"},n,l.a.createElement("span",{className:"ud-sr-only"},interpolate(gettext("%(percent)s% complete"),{percent:r},true)),l.a.createElement("div",{"aria-hidden":true,className:"captions-form--progress-bar--2O5EW captions-form--progress-bar-text-container--1rpM8",style:{width:`${r}%`}},n))};Re.propTypes={fileName:a.a.string.isRequired,progress:a.a.number.isRequired};let Ne=(De=Object(i["e"])("store"),Object(c["m"])(Ce=De(Ce=Object(i["f"])(Ce=(Te=(ke=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"showDeleteConfirmation",Oe,this)}onDeleteConfirm(){const{lecture:e,store:t}=this.props;this.showDeleteConfirmation=false;t.deleteCaption(e)}onDeleteCancel(){this.showDeleteConfirmation=false}onDeleteClick(){this.showDeleteConfirmation=true}onEditClick(){const{history:e,lecture:t,store:r}=this.props;e.push(r.getEditorUrl(t.id))}onChangeCaption(){const{lecture:e,store:t}=this.props;return r=>{t.replaceCaption(e,r)}}getTitle(){const{lecture:e}=this.props;if(e.isPromoVideo){return gettext("Promotional video")}const t=e.is_published?gettext("Lecture %(lectureNumber)s: %(lectureTitle)s"):gettext("Unpublished lecture: %(lectureTitle)s");return interpolate(t,{lectureTitle:e.title,lectureNumber:e.object_index},true)}getIcon(){const{lecture:e,store:t}=this.props;const r=t.getCaptionsFor(e);if(!r||r.status===me["f"].FAILED){return l.a.createElement("div",{className:"captions-form--empty-circle-container--2NFRP"},l.a.createElement("div",{className:"captions-form--empty-circle--1IttS"}))}else if(r.status!==me["f"].SUCCESS){return l.a.createElement(v["a"],{size:"small"})}else if(r.confidenceThreshold){return l.a.createElement(oe.a,{label:false,color:"positive"})}return l.a.createElement(se.a,{label:false,color:"neutral"})}getActions(e){const{store:t}=this.props;const r={caption:e,changeCaptionFn:this.onChangeCaption(),editFn:this.onEditClick};if(t.canUserEditCourse){r.deleteFn=this.onDeleteClick}return l.a.createElement("div",{className:"captions-form--flex--278CW captions-form--lecture-item-cell--3LvWv captions-form--caption-actions-cell--thbah"},l.a.createElement("div",{className:"captions-form--caption-actions--1NiJz"},l.a.createElement(Ie,r)))}render(){const{lecture:e,store:t}=this.props;const r=e.uploadStatus.get(t.currentLocaleId)||{};const n=t.getCaptionsFor(e);if(r.onProcess){return l.a.createElement(Re,{fileName:r.fileName,progress:r.progress})}const i=n&&n.isEditOfAutoCaption?gettext("Are you sure you want to reset this caption file? "+"If you reset this caption file the original auto-generated caption file will "+"be restored."):gettext("Are you sure you want to delete this caption file? "+"If an auto-generated caption file exists it will replace the deleted file.");return l.a.createElement("div",{"data-purpose":"lecture-caption-container"},!r.error?null:l.a.createElement(je,r.error),l.a.createElement("div",{className:"ud-text-sm captions-form--lecture-item--24qdX"},l.a.createElement("div",{className:"captions-form--lecture-item-cell--3LvWv"},this.getIcon()),l.a.createElement("div",{className:"captions-form--flex--278CW captions-form--lecture-item-cell--3LvWv captions-form--lecture-item-details--2OTry"},l.a.createElement("div",{className:"captions-form--flex--278CW captions-form--lecture-item-cell--3LvWv captions-form--lecture-title--2m-XR"},l.a.createElement("span",{className:"captions-form--ellipsis--3bPAt"},this.getTitle())),l.a.createElement("div",{className:"captions-form--flex--278CW captions-form--lecture-item-cell--3LvWv captions-form--hidden-lg-max--3uUqy"},l.a.createElement(Ae,{caption:n,isLecturePublished:e.is_published,isCourseLocale:t.isDefaultLocale})),l.a.createElement("div",{className:"captions-form--flex--278CW captions-form--lecture-item-cell--3LvWv captions-form--caption-edited-date--3YqzF"},l.a.createElement(Pe,{caption:n}))),this.getActions(n),l.a.createElement(pe["a"],{onCancel:this.onDeleteCancel,onConfirm:this.onDeleteConfirm,isOpen:this.showDeleteConfirmation},i)))}},ke.propTypes={history:a.a.object.isRequired,lecture:a.a.object.isRequired,store:a.a.object.isRequired},ke),Oe=babelHelpers.applyDecoratedDescriptor(Te.prototype,"showDeleteConfirmation",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Te.prototype,"onDeleteConfirm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Te.prototype,"onDeleteConfirm"),Te.prototype),babelHelpers.applyDecoratedDescriptor(Te.prototype,"onDeleteCancel",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Te.prototype,"onDeleteCancel"),Te.prototype),babelHelpers.applyDecoratedDescriptor(Te.prototype,"onDeleteClick",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Te.prototype,"onDeleteClick"),Te.prototype),babelHelpers.applyDecoratedDescriptor(Te.prototype,"onEditClick",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Te.prototype,"onEditClick"),Te.prototype),babelHelpers.applyDecoratedDescriptor(Te.prototype,"onChangeCaption",[f["a"]],Object.getOwnPropertyDescriptor(Te.prototype,"onChangeCaption"),Te.prototype),babelHelpers.applyDecoratedDescriptor(Te.prototype,"getActions",[f["a"]],Object.getOwnPropertyDescriptor(Te.prototype,"getActions"),Te.prototype),Te))||Ce)||Ce)||Ce);var Le,Me,qe;const Ue=Object(i["f"])((e=>{let{curriculum:t,filter:r}=e;const n=t.items.filter(r);return l.a.createElement("div",{className:"captions-form--curriculum-section--MLXTD"},l.a.createElement("div",{className:"captions-form--curriculum-section-title--18afv"},l.a.createElement("h4",{className:"ud-heading-sm"},t.title)),n.map((e=>l.a.createElement(Ne,{key:e.id,lecture:e}))))}));Ue.propTypes={curriculum:a.a.shape({id:a.a.number.isRequired,title:a.a.string.isRequired,items:i["b"].arrayOrObservableArray.isRequired}),currentLocaleId:a.a.string.isRequired,filter:a.a.func};Ue.defaultProps={filter:()=>true};let He=(Le=Object(i["e"])("store"),Le(Me=Object(i["f"])(Me=(qe=class e extends s["Component"]{componentDidMount(){this.interval=setInterval((()=>this.props.store.refreshCaptions()),30*1e3)}componentWillUnmount(){clearInterval(this.interval)}curriculumList(){const{activeTab:e,currentLocaleId:t,curriculumList:r}=this.props.store;const n={[j.ALL]:()=>true,[j.UNCAPTIONED]:this.props.store.uncaptionedVideoFilter,[j.AUTOCAPTIONED]:this.props.store.autocaptionedFilter,[j.LOW_QUALITY]:this.props.store.lowQualityFilter};return r.filter((t=>{let{items:r}=t;return r.length>0&&r.some(n[e])})).map((r=>l.a.createElement(Ue,{key:r.id,filter:n[e],currentLocaleId:t,curriculum:r})))}render(){const{lecturesLoaded:e,lectureCount:t}=this.props.store;if(!e){return l.a.createElement(S,null)}if(t===0){return l.a.createElement(b["a"],{showCta:false,title:l.a.createElement(m["b"],{className:"ud-text-with-links",html:gettext("When you add video lectures to your course via the "+'<a class="curriculumLink">Curriculum</a> you will be able to add captions '+"to those videos here."),interpolate:{curriculumLink:l.a.createElement(y["a"],{to:"/curriculum"})}})})}return l.a.createElement("div",null,this.props.store.alertCodes.map(((e,t)=>l.a.createElement(K,{key:t,alertCode:e}))),l.a.createElement(te,null),this.curriculumList())}},qe.propTypes={store:a.a.object.isRequired},qe))||Me)||Me);var Fe=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");var Be=r("./node_modules/@udemy/react-dialog-components/dist/esm/focus-trapping-dialog/focus-trapping-dialog.react-component.js");var ze=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var Ve=r("./node_modules/@udemy/react-structure-components/dist/esm/minimal-header/minimal-header.react-component.js");var We=r("./node_modules/react-dom/index.js");var Ge=r.n(We);var Ke=r("./other-libs/fineuploader/s3.fine-uploaderv5.1.3.js");var $e=r.n(Ke);var Xe=r("./src/udemy/js/utils/noop.js");var Ye=r("./src/udemy/js/utils/s3-upload-configuration.js");var Qe=r("./src/udemy/js/utils/ud-api.js");var Je=r("./src/udemy/js/utils/ud-api-stat.js");var Ze=r("./src/udemy/js/caption/vtt-parser.js");const et={BAD_TIME_OFFSET:["Malformed time offset.",gettext("One or more of the caption entries has incorrectly formatted timing information.\n\n"+"Please fix the caption entry:")],NO_CONTENT:["The file is empty.",gettext("The file is empty.")],MISSING_WEBVTT_HEADER:["Missing WEBVTT header.",gettext("The file is missing the WEBVTT header which is required for valid vtt files.\n"+"Please add WEBVTT to the first line of the file.")],MISSING_TIMINGS:["Missing timings.",gettext("One or more of the caption entries has text but no times. "+"Each caption entry should have a start time, end time and some text in the following format:"+"\n\n00:03:00.000 --\x3e 00:05:00.000\nSome text...\n\nPlease add times for the text:")],MISSING_TRACK_TEXT:["Missing track text.",gettext("One of the caption entries has times but no text. "+"Each caption entry should have a start time, end time and some text in the following format:"+"\n\n00:05:00.000 --\x3e 00:03:00.000\nSome text..."+"\n\nPlease add text or remove the caption entry:")],EMPTY_TRACK_TEXT:["Invalid content.",gettext("One of the caption entries has markup and no text."+"Each caption entry should have a start time, end time and some text in the following format:"+"\n\n00:05:00.000 --\x3e 00:03:00.000\nSome &lt;b&gt;text&lt;/b&gt;..."+"\n\nPlease add text or remove the caption entry:")],NO_CUE_BLOCKS:["No cue blocks.",gettext("There are no recognisable caption entries in the file. "+"Each caption entry should have a start time, end time and some text in the following format:"+"\n\n00:05:00.000 --\x3e 00:03:00.000\nSome text...")],SINGLE_TIMING_END_BEFORE_START:["Malformed cue: end time offset not bigger than start time offset.",gettext("One of the caption entries has an end time that is earlier than the start time."+"\n\nPlease fix the following caption entry so that the end time is later than the start time:")],LAST_START_TIME_BIGGER_THAN_VIDEO_LENGTH:["Last cue's start time offset bigger than the video length.",gettext("The last caption entry has a start time that is later than the end of the video."+"\n\nPlease fix this caption entry by updating the start time to be earlier than the end of the video "+"or by removing it completely:")],SEPARATOR_IN_TRACK_TEXT:["A timing separator (--\x3e) is in the track text.",gettext("One of the caption entries has a timing separator (--\x3e) in the track text."+"\n\nPlease remove the timing separator from the following caption entry:")]};class tt extends Error{constructor(e,t,r,n){super(e);this.name="ValidationError";this.translated=t;this.code=r;this.block=n}static getErrorForCode(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";const[r,n]=et[e];return new tt(r,n,e,t)}}const rt=/[a-z]/i;function nt(e){if(rt.test(e)){return NaN}return Number(e)}function it(e){return Math.floor(nt(e))}const ot=/\.\d{3}$/;const at=(e,t)=>{const r=e.split(":").reverse();if(!ot.test(r[0])){throw tt.getErrorForCode("BAD_TIME_OFFSET",t)}let n=0;const i=nt(r[0]);if(Number.isNaN(i)){throw tt.getErrorForCode("BAD_TIME_OFFSET",t)}n+=i*1e3;if(!r[1]){return n}const o=it(r[1],10);if(Number.isNaN(o)||o<0||o>59){throw tt.getErrorForCode("BAD_TIME_OFFSET",t)}n+=o*6e4;if(!r[2]){return n}const a=it(r[2],10);if(Number.isNaN(a)){throw tt.getErrorForCode("BAD_TIME_OFFSET",t)}n+=a*36e5;return n};var st=(e,t)=>{if(e.length===0){throw tt.getErrorForCode("NO_CONTENT")}const r=/(?:\r\n|\n){2,}/;const n=/\r\n|\n/;const i=/\b[ \t]+-->[ \t]+\b/;const[o,...a]=e.split(r);if(o.indexOf("WEBVTT")===-1){throw tt.getErrorForCode("MISSING_WEBVTT_HEADER")}else{const e=o.split(n)[0];if(!/^\ufeff?WEBVTT(:?$|[ \t])/.test(e)){throw tt.getErrorForCode("MISSING_WEBVTT_HEADER")}}let s={startOffset:-1,endOffset:-1};a.forEach((e=>{if(e.length===0){return}if(/^NOTE|STYLE|REGION/.test(e)){return}const t=e.split(n);let r=null;let o=null;if(i.test(t[0])){r=t[0];o=t.slice(1)}else if(i.test(t[1])){r=t[1];o=t.slice(2)}if(!r||r.length===0){throw tt.getErrorForCode("MISSING_TIMINGS",e)}if(!o||o.length===0||!o[0].trim()){throw tt.getErrorForCode("MISSING_TRACK_TEXT",e)}if(Object(Ze["a"])(o[0])){throw tt.getErrorForCode("EMPTY_TRACK_TEXT",e)}if(Object(Ze["b"])(o[0])){throw tt.getErrorForCode("SEPARATOR_IN_TRACK_TEXT",e)}let[a,l]=r.split(i);let[c]=l.split(/[ \t]/);a=at(a,e);c=at(c,e);if(a>=c){throw tt.getErrorForCode("SINGLE_TIMING_END_BEFORE_START",e)}s={startOffset:a,endOffset:c}}));if(t&&t.video_length&&s.startOffset>t.video_length*1e3){throw tt.getErrorForCode("LAST_START_TIME_BIGGER_THAN_VIDEO_LENGTH",a[a.length-1])}};var lt;function ct(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:me["g"].DRAFT;if(!Object.values(me["g"]).includes(n)){throw new Error(`${n} is not a valid caption type.`)}const i={[me["g"].PUBLISHED]:"captions",[me["g"].DRAFT]:"draft-captions",[me["g"].CROWDSOURCED]:"crowdsourced-captions"};const o=i[n];let a=`/courses/${e}/assets/${t}/${o}/`;if(r){a+=`${r}/`}return a}let ut=(lt=class e{constructor(e,t,r){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:me["g"].DRAFT;this._uploader=void 0;this.filesInfo={};const{acl:i,bucketUrl:o,key:a,sizeLimit:s}=t;this.courseId=e;this.getCaptionData=r||Xe["a"];this.captionType=n;this._uploader=new $e.a.s3.FineUploaderBasic({...Ye["f"],autoLoad:true,request:{endpoint:o,accessKey:a},validation:{itemLimit:10,minSizeLimit:1,allowedExtensions:me["c"],sizeLimit:s||Ye["g"]},objectProperties:{acl:i},callbacks:{onUpload:(e,t)=>{if(this.filesInfo.fileName!==t){this._uploader.setName(e,this.filesInfo.current);this.filesInfo.current=null}},onProgress:this._onProgress,onAllComplete:this._onUploadComplete,onError:this._onError}})}validate(e,t){return new Promise(((r,n)=>{const i=new FileReader;i.onload=e=>{try{st(e.target.result,{video_length:t});r();Je["b"].increment("web_file_uploader.upload.validation_success")}catch(e){if(e.name==="ValidationError"){n(e);Je["b"].increment("web_file_uploader.upload.validation_fail",{type:e.code})}else{throw e}}};i.readAsText(e)}))}upload(e,t,r,n){const i=e.name;const o=e.isEdit;if(this.filesInfo[i]||this.filesInfo.current){n.onError({message:"",type:me["b"].NAME_COLLISION});Je["b"].increment("web_file_uploader.upload.fail");return}this.filesInfo.current=i;this.filesInfo[i]={assetId:t.id,locale:r,callbacks:n,isEdit:o};this._setProgress(i,me["a"].INITIAL);this.validate(e,t.time_estimation).then((()=>{this._uploader.addFiles(e)})).catch((e=>{const{block:t,translated:r,code:o}=e;n.onError({block:t,message:r,code:o,type:me["b"].VALIDATION});this._clean(null,i)}))}_clean(e,t){if(this._isValidId(e)){this._uploader.cancel(e)}this.filesInfo.current=null;this.filesInfo[t]=null}_isValidId(e){return e!==null}_setProgress(e,t){this.filesInfo[e].callbacks.onProgress(t)}_onError(e,t){if(!this._isValidId(e)){return false}const r=this.filesInfo[t];r.callbacks.onError({message:"",type:me["b"].UPLOAD});Je["b"].increment("web_file_uploader.upload.fail")}_onProgress(e,t,r,n){if(!this._isValidId(e)){return false}let i=0;if(n>0){i=Math.round(r/n*me["a"].UPLOADING)}i+=me["a"].INITIAL;this._setProgress(t,i)}refreshCaptionStatus(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;const n=this._uploader.getName(e);const i=this.filesInfo[n];const o={params:{"fields[draft_caption]":"status,published_caption_id"}};const a=ct(this.courseId,i.assetId,t,this.captionType);return Qe["f"].get(a,o).then((o=>{const a=o.data.status;const s=o.data.published_caption_id;if(a===me["f"].FAILED){this._onError(e,n)}else if([me["f"].PROCESSING,me["f"].UNPROCESSED].includes(a)){const n=Math.min(16,++r);const i=Math.pow(2,n)*1e3;setTimeout((()=>{this.refreshCaptionStatus(e,t,r)}),i)}else if(a===me["f"].SUCCESS){i.callbacks.onProcessComplete(a,s);Je["b"].increment("web_file_uploader.upload.processed");this._clean(e,n)}})).catch((t=>{this._onError(e,n,t);this._clean(e,n)}))}_onUploadComplete(e){let[t]=e;if(!this._isValidId(t)){return false}const r=this._uploader.getName(t);const n=this.filesInfo[r];const i={locale_id:n.locale,asset:n.assetId,file_name:this._uploader.getKey(t),uuid:this._uploader.getUuid(t),title:r,bucket:this._uploader.getBucket(t)};if(n.isEdit){i.is_edit=true}Object.assign(i,this.getCaptionData());const o={params:{"fields[draft_caption]":"locale,title,url,source,status,confidence_threshold,modified,is_edit,is_edit_of_autocaption","fields[locale]":"title"}};this._setProgress(r,me["a"].UPLOADING+me["a"].INITIAL);Je["b"].increment("web_file_uploader.upload.completed");return Qe["f"].post(ct(this.courseId,n.assetId,undefined,this.captionType),i,o).then((e=>{this._setProgress(r,100);n.callbacks.onUploadComplete(e.data);this.refreshCaptionStatus(t,e.data.id)})).catch((e=>{this._onError(t,r,e);this._clean(t,r)}))}},babelHelpers.applyDecoratedDescriptor(lt.prototype,"_onError",[f["a"]],Object.getOwnPropertyDescriptor(lt.prototype,"_onError"),lt.prototype),babelHelpers.applyDecoratedDescriptor(lt.prototype,"_onProgress",[f["a"]],Object.getOwnPropertyDescriptor(lt.prototype,"_onProgress"),lt.prototype),babelHelpers.applyDecoratedDescriptor(lt.prototype,"_onUploadComplete",[f["a"]],Object.getOwnPropertyDescriptor(lt.prototype,"_onUploadComplete"),lt.prototype),lt);var pt=r("./src/udemy/js/utils/ud-prop-types.js");var dt=r("./src/udemy/js/caption-editor/animated-save-button.less");var ht,mt,ft,gt;const yt={IDLE:"IDLE",SAVING:"SAVING",SAVED:"SAVED"};const bt=2e3;let vt=Object(i["f"])(ht=(mt=(gt=class e extends l.a.Component{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"buttonState",ft,this)}componentDidUpdate(e){if(!e.isSaving&&this.props.isSaving){this.updateButton(yt.SAVING)}else if(e.isSaving&&!this.props.isSaving&&!this.props.hasError){this.updateButton(yt.SAVED);setTimeout((()=>this.updateButton(yt.IDLE)),bt)}else if(e.isSaving&&!this.props.isSaving&&!!this.props.hasError){this.updateButton(yt.IDLE)}}updateButton(e){this.buttonState=e}handleClick(){if(!this.props.isSaving){this.props.onClick()}}render(){const{children:e,onClick:t,isSaving:r,hasError:n,disabled:i,...o}=this.props;let a;if(this.buttonState===yt.SAVING){a=l.a.createElement(v["a"],{color:"inherit"})}else if(this.buttonState===yt.SAVED){a=l.a.createElement(oe.a,{label:gettext("Saved"),color:"inherit"})}return l.a.createElement(le["a"],Object.assign({className:"animated-save-button--save-button--1bwEl",onClick:this.handleClick,"data-purpose":"editor-save",disabled:i&&this.buttonState!==yt.SAVED},o),a&&l.a.createElement("span",{className:"animated-save-button--overlay--1Q1Iu"},a),e)}},gt.propTypes={onClick:a.a.func.isRequired,isSaving:a.a.bool.isRequired,hasError:a.a.bool.isRequired,disabled:a.a.bool},gt.defaultProps={disabled:false},gt),ft=babelHelpers.applyDecoratedDescriptor(mt.prototype,"buttonState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return yt.IDLE}}),babelHelpers.applyDecoratedDescriptor(mt.prototype,"updateButton",[he["e"]],Object.getOwnPropertyDescriptor(mt.prototype,"updateButton"),mt.prototype),babelHelpers.applyDecoratedDescriptor(mt.prototype,"handleClick",[f["a"]],Object.getOwnPropertyDescriptor(mt.prototype,"handleClick"),mt.prototype),mt))||ht;var wt=r("./src/udemy/js/caption/caption.mobx-model.js");var Et=r("./src/udemy/js/utils/user-settings.js");var St=r("./src/udemy/js/video-player/captions/captions.mobx-store.js");var _t=r("./src/udemy/js/video-player/captions/constants.js");const xt={SAVING:"SAVING",PARSING:"PARSING",LOADING:"LOADING"};const Dt={DISCARD:"DISCARD",EXIT:"EXIT",EXIT_WITHOUT_SAVING:"EXIT_WITHOUT_SAVING"};const Ct={[xt.LOADING]:{type:xt.LOADING,title:gettext("Video Loading Error"),text:gettext("The Caption Editor could not load the associated video. "+"To resolve this issue, please re-upload the video from the Curriculum page."),actions:[Dt.EXIT]},[xt.PARSING]:{type:xt.PARSING,title:gettext("Caption Loading Error"),text:gettext(" The Caption Editor could not open this caption file. To resolve this issue, please re-upload the caption file."),actions:[Dt.EXIT]},[xt.SAVING]:{type:xt.SAVING,title:gettext("Saving Error"),text:gettext("An error occurred and your changes could not be saved. If you continue to have issues saving changes, please "+'contact support <a href="https://support.udemy.com/hc/en-us/requests/new?type=instructor" target="_blank"}>here</a>.'),actions:[Dt.EXIT_WITHOUT_SAVING,Dt.DISCARD]}};const Tt={"fields[asset]":"id,title,captions,media_license_token,media_sources,thumbnail_sprite","fields[caption]":"@default,confidence_threshold"};const Ot=Object.freeze({ERROR:"caption_editor.error"});const kt=Object.freeze({CUE_CONTENT_CHANGE:"cue.change.content",CUE_SELECT:"cue.select",QUIT_EDITING:"quit",QUIT_WITHOUT_SAVING:"quit-unsaved-changes",SAVE_CAPTIONS:"save"});const Pt={id:"low_caption_quality",title:gettext("These captions have been auto-generated and may have a significant amount of errors."),body:gettext("Please review the captions and fix any errors.")};const At=.43;var It,jt,Rt,Nt,Lt,Mt,qt,Ut,Ht,Ft,Bt,zt,Vt,Wt,Gt,Kt,$t,Xt,Yt,Qt;let Jt=(It=he["t"].ref,jt=he["t"].ref,Rt=he["t"].ref,Nt=he["t"].ref,Lt=class e{_makeKeyMapFn(e){e.shouldCall=()=>true;return e}constructor(e,t,r,n,i,o,a,s){this.captionsStore=null;this.videoPlayer=null;babelHelpers.initializerDefineProperty(this,"asset",Mt,this);babelHelpers.initializerDefineProperty(this,"videoCaption",qt,this);babelHelpers.initializerDefineProperty(this,"transcriptCaption",Ut,this);babelHelpers.initializerDefineProperty(this,"editingCueId",Ht,this);babelHelpers.initializerDefineProperty(this,"error",Ft,this);babelHelpers.initializerDefineProperty(this,"pauseWhenTyping",Bt,this);babelHelpers.initializerDefineProperty(this,"isEditorLoading",zt,this);babelHelpers.initializerDefineProperty(this,"isAssetLoading",Vt,this);babelHelpers.initializerDefineProperty(this,"isVideoPlaying",Wt,this);babelHelpers.initializerDefineProperty(this,"isSaving",Gt,this);babelHelpers.initializerDefineProperty(this,"isProcessing",Kt,this);babelHelpers.initializerDefineProperty(this,"isDirty",$t,this);babelHelpers.initializerDefineProperty(this,"errorModalContent",Xt,this);babelHelpers.initializerDefineProperty(this,"isExitModalVisible",Yt,this);babelHelpers.initializerDefineProperty(this,"isHotkeyOverlayVisible",Qt,this);this.seenMessages=he["t"].map({});this.keyMap=[{name:gettext("Play / Pause"),key:"shift+space",fn:this._makeKeyMapFn(this.toggleVideoPlayPause)},{name:gettext("Go forward one second"),key:"shift+right",fn:this._makeKeyMapFn(this.skipVideoPlayerTime.bind(this,1))},{name:gettext("Go back one second"),key:"shift+left",fn:this._makeKeyMapFn(this.skipVideoPlayerTime.bind(this,-1))},{name:gettext("Edit next caption"),key:"shift+down",fn:this._makeKeyMapFn(this.selectNextCue)},{name:gettext("Edit previous caption"),key:"shift+up",fn:this._makeKeyMapFn(this.selectPrevCue)}];this.courseId=e;this.assetId=t;this.videoCaptionLocaleId=r;this.transcriptLocaleId=n;this.uploader=i;this.onCaptionCreated=o;this.exitFn=a;this.onPlayerReadyCallback=s;this.setPauseWhenTypingSetting(Et["c"].get(Et["a"].captionEditorPauseWhenTyping));Object(he["D"])((()=>this.error),(()=>{Je["b"].increment(Ot.ERROR,{error:this.error.type})}))}get APIFieldFilters(){return Tt}initialise(){return Qe["f"].get(`/assets/${this.assetId}/`,{params:this.APIFieldFilters}).then(Object(he["e"])((e=>{this.asset=e.data;const t=this.asset.captions.filter((e=>[this.videoCaptionLocaleId,this.transcriptLocaleId].includes(e.locale_id)));this.captionsStore=new St["a"](t,false);this.captionsStore.captions.forEach((e=>{if(e.locale===this.videoCaptionLocaleId){this.videoCaption=e}if(e.locale===this.transcriptLocaleId){this.transcriptCaption=e}}));this.videoCaption.setMode(_t["h"].ACTIVE);if(this.transcriptCaption!==this.videoCaption){this.transcriptCaption.setMode(_t["h"].INACTIVE)}this.isAssetLoading=false}))).catch((()=>this.setError(Ct.LOADING)))}async fetchDraftCaptions(){const e=await Qe["f"].get(`courses/${this.courseId}/assets/${this.assetId}/draft-captions/`,{...N,locale:this.videoCaptionLocaleId});Object(he["x"])((()=>{const t=e.data.results.find((e=>[this.videoCaptionLocaleId,this.transcriptLocaleId].includes(e.locale_id)));this.isProcessing=(t===null||t===void 0?void 0:t.status)===0;if(this.isProcessing){this.setCurrentCue(null)}}))}get messages(){return[this.editingLowQualityCaptionMessage].filter((e=>e))}get editingLowQualityCaptionMessage(){if(this.transcriptCaption&&this.transcriptCaption.confidenceThreshold<=At){return Pt}}hasSeenAlert(e){return this.seenMessages.get(e)}dismissMessageAlert(e){this.seenMessages.set(e,true)}onPlayerReady(e){this.videoPlayer=e;this.isEditorLoading=false;Object(he["D"])((()=>this.captionsStore.isLoaded),this.initialiseCues);Object(he["D"])((()=>this.captionsStore.hasError),(()=>this.setError(Ct.PARSING)));this.onPlayerReadyCallback(e)}onVideoPlayPause(e){this.isVideoPlaying=e}initialiseCues(){if(!this.localCues.length){return}if(this.isProcessing){this.setCurrentCue(null);return}const e=this.localCues[0];this.setVideoPlayerTime(e);this.setCurrentCue(e.id)}toggleVideoPlayPause(e){e.preventDefault();this.isVideoPlaying=!this.isVideoPlaying}skipVideoPlayerTime(e,t){t.preventDefault();this.videoPlayer.currentTime(this.videoPlayer.currentTime()+e)}setVideoPlayerTime(e){if(e.startTime!==this.videoPlayer.currentTime()){this.videoPlayer.currentTime(e.startTime)}}setCurrentCue(e){this.editingCueId=e}selectCue(e){if(!this.playingCueIds.includes(e.id)){this.setVideoPlayerTime(e)}this.setCurrentCue(e.id)}selectNextCue(e){e.preventDefault();const t=this.localCues[this.editingCueIndex+1];if(t){this.selectCue(t)}}selectPrevCue(e){e.preventDefault();const t=this.localCues[this.editingCueIndex-1];if(t){this.selectCue(t)}}onCueContentChange(e,t){this.isDirty=true;e.setText(t);if(this.pauseWhenTyping){this.isVideoPlaying=false}}markCorrect(e,t){this.isDirty=true;e.markCorrect(t)}setPauseWhenTypingSetting(e){this.pauseWhenTyping=e}togglePauseWhenTypingSetting(){this.setPauseWhenTypingSetting(!this.pauseWhenTyping);Et["c"].set(Et["a"].captionEditorPauseWhenTyping,this.pauseWhenTyping)}hideCloseEditorModal(){this.isExitModalVisible=false}exitEditor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.isDirty){if(e){this.isDirty=false}else{this.isExitModalVisible=true;return false}}this.exitFn();return true}forceExitEditor(){this.exitEditor(true)}saveAsFile(){this.editingCueId=null;this.isSaving=true;const e=this.transcriptCaption.title;const t=Object(wt["a"])(this.transcriptCaption,e);t.isEdit=true;let r={};return new Promise(((e,n)=>{this.uploader.upload(t,this.asset,this.transcriptLocaleId,{onError:Object(he["e"])((e=>{this.setError(Ct.SAVING);this.isSaving=false;n(e)})),onProgress:Xe["a"],onUploadComplete:Object(he["e"])((e=>{r=e;this.isSaving=false;this.isDirty=false;this.isProcessing=true;r.status=me["f"].PROCESSING;this.onCaptionCreated(r)})),onProcessComplete:Object(he["e"])((t=>{this.isProcessing=false;r.status=t;this.onCaptionCreated(r);e(r)}))})}))}playerErrorHandler(){this.isEditorLoading=false;this.setError(Ct.LOADING)}setError(e){this.error=e;this.errorModalContent={title:e.title||"",text:e.text||"",actions:e.actions||[]}}clearError(){this.error=null}toggleOverlayVisibility(){this.isHotkeyOverlayVisible=!this.isHotkeyOverlayVisible}get isLoading(){return this.isAssetLoading||this.isEditorLoading||!this.captionsStore.isLoaded}get playerSettings(){return{playerId:"edit-captions-player",preload:"auto",captionsStore:this.captionsStore,mediaLicenseToken:this.asset.media_license_token,mediaSources:this.asset.media_sources,assetId:this.asset.id,thumbnailSprite:this.asset.thumbnail_sprite,onPlayerReady:this.onPlayerReady,onPlayerError:this.playerErrorHandler,isPlaying:this.isVideoPlaying,onPlayPause:this.onVideoPlayPause,extraVideoAttributes:{playsInline:true},userActivityEnabled:false,hotkeysEnabled:true,fullscreenEnabled:false}}get playingCueIds(){return this.transcriptCaption?this.transcriptCaption.activeCues.map((e=>e.id)):[]}get localCues(){return this.transcriptCaption?this.transcriptCaption.cues:[]}get editingCueIndex(){return this.localCues.findIndex((e=>e.id===this.editingCueId))}},Mt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"asset",[It],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),qt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"videoCaption",[jt],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Ut=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"transcriptCaption",[Rt],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Ht=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"editingCueId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Ft=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Bt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"pauseWhenTyping",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),zt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isEditorLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),Vt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isAssetLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),Wt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isVideoPlaying",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Gt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Kt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isProcessing",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),$t=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isDirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Xt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"errorModalContent",[Nt],{configurable:true,enumerable:true,writable:true,initializer:function(){return{title:"",text:"",actions:[]}}}),Yt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isExitModalVisible",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Qt=babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isHotkeyOverlayVisible",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"editingLowQualityCaptionMessage",[he["g"]],Object.getOwnPropertyDescriptor(Lt.prototype,"editingLowQualityCaptionMessage"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"dismissMessageAlert",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"dismissMessageAlert"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"onPlayerReady",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"onPlayerReady"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"onVideoPlayPause",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"onVideoPlayPause"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"initialiseCues",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"initialiseCues"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"toggleVideoPlayPause",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"toggleVideoPlayPause"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"skipVideoPlayerTime",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"skipVideoPlayerTime"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"setVideoPlayerTime",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"setVideoPlayerTime"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"setCurrentCue",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"setCurrentCue"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"selectCue",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"selectCue"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"selectNextCue",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"selectNextCue"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"selectPrevCue",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"selectPrevCue"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"onCueContentChange",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"onCueContentChange"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"markCorrect",[he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"markCorrect"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"setPauseWhenTypingSetting",[he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"setPauseWhenTypingSetting"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"togglePauseWhenTypingSetting",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"togglePauseWhenTypingSetting"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"hideCloseEditorModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"hideCloseEditorModal"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"exitEditor",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"exitEditor"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"forceExitEditor",[f["a"]],Object.getOwnPropertyDescriptor(Lt.prototype,"forceExitEditor"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"saveAsFile",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"saveAsFile"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"playerErrorHandler",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"playerErrorHandler"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"setError",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"setError"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"clearError",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"clearError"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"toggleOverlayVisibility",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lt.prototype,"toggleOverlayVisibility"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"isLoading",[he["g"]],Object.getOwnPropertyDescriptor(Lt.prototype,"isLoading"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"playerSettings",[he["g"]],Object.getOwnPropertyDescriptor(Lt.prototype,"playerSettings"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"playingCueIds",[he["g"]],Object.getOwnPropertyDescriptor(Lt.prototype,"playingCueIds"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"localCues",[he["g"]],Object.getOwnPropertyDescriptor(Lt.prototype,"localCues"),Lt.prototype),babelHelpers.applyDecoratedDescriptor(Lt.prototype,"editingCueIndex",[he["g"]],Object.getOwnPropertyDescriptor(Lt.prototype,"editingCueIndex"),Lt.prototype),Lt);var Zt=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var er=r.n(Zt);var tr=r("./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/hotkey-overlay.react-component.js");var rr=r("./src/udemy/js/utils/hotkeys.js");var nr=r("./src/udemy/js/video-player/control-bar/controls.js");var ir=r("./src/udemy/js/video-player/video-player.react-component.js");var or=r("./src/udemy/js/caption-editor/caption-editor.less");var ar,sr,lr,cr;let ur=(ar=Object(i["e"])("store"),ar(sr=Object(i["f"])(sr=(lr=(cr=class e extends l.a.Component{dismissMessage(){this.props.store.dismissMessageAlert(this.props.message.id)}render(){return!this.props.store.hasSeenAlert(this.props.message.id)?l.a.createElement(b["a"],{"data-purpose":"caption-dismissible-alert",className:"caption-editor--alert-banner--V49iV",showIcon:false,title:this.props.message.title,body:this.props.message.body,ctaText:gettext("Dismiss"),onAction:this.dismissMessage,dismissButtonProps:false}):null}},cr.propTypes={store:a.a.object.isRequired,message:a.a.object.isRequired},cr),babelHelpers.applyDecoratedDescriptor(lr.prototype,"dismissMessage",[f["a"]],Object.getOwnPropertyDescriptor(lr.prototype,"dismissMessage"),lr.prototype),lr))||sr)||sr);var pr=r("./node_modules/@udemy/design-system-utils/dist/esm/ios/lock-page-scroll.js");var dr=r("./node_modules/@udemy/icons/dist/arrow-right.ud-icon");var hr=r.n(dr);var mr=r("./node_modules/classnames/index.js");var fr=r.n(mr);var gr=r("./src/udemy/js/caption/cue.mobx-model.js");var yr=r("./node_modules/autosize/dist/autosize.js");var br=r.n(yr);var vr=r("./src/udemy/js/caption-editor/cue-content-editor.less");var wr,Er,Sr,_r;let xr=Object(i["f"])(wr=(Er=(_r=class e extends l.a.Component{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"valueCopy",Sr,this);this.error=false;this.previousKeyPress=null}componentDidMount(){this.setValue(this.props.value);if(this.props.active){this.initialiseEditor()}}UNSAFE_componentWillReceiveProps(e){if(e.value!==this.valueCopy){this.setValue(e.value)}if(this.props.active&&!e.active){br.a.destroy(this.textarea)}}componentDidUpdate(e){if(!e.active&&this.props.active){this.initialiseEditor()}if(this.props.active){br.a.update(this.textarea)}}initialiseEditor(){this.originalValue=this.valueCopy;br()(this.textarea);this.textarea.focus()}setValue(e){this.valueCopy=e}handleChange(e){const t=e.target.value;this.setValue(t.replace(/(\r\n|\r|\n){2,}/g,"\n").replace(/^\s+/gm,""));this.validate();if(!this.error){this.props.onChange(this.valueCopy)}}handleBlur(){if(this.error){this.setValue(this.originalValue);this.props.onChange(this.valueCopy);this.error=null}}avoidDoubleEnter(e){const t=this.previousKeyPress==="Enter"&&e.key==="Enter";const r=this.textarea.selectionStart===0&&["Enter"," "].includes(e.key);if(t||r){e.preventDefault()}this.previousKeyPress=e.key}showError(){return l.a.createElement(b["a"],{showCta:false,udStyle:"error",className:"cue-content-editor--cue-content-alert--35lrc",showIcon:false,title:gettext("Caption entry text can't be empty.")})}validate(){this.error=Object(Ze["a"])(this.valueCopy)}get cueEditor(){return l.a.createElement("textarea",{ref:e=>{this.textarea=e},rows:"1",className:"ud-text-md cue-content-editor--cue-content-textarea--2vAvD",value:this.valueCopy,onChange:this.handleChange,onBlur:this.handleBlur,onKeyDown:this.avoidDoubleEnter})}get cueDisplay(){return l.a.createElement("div",{className:"cue-content-editor--cue-content-display--3Agk2","data-purpose":"cue-display",role:"textbox",onClick:this.props.onFocus,onFocus:this.props.onFocus,tabIndex:"0"},this.valueCopy)}render(){return l.a.createElement("div",{className:"cue-content-editor--cue-content-textarea-wrapper--3WePp"},this.props.active?this.cueEditor:this.cueDisplay,this.error&&this.showError())}},_r.propTypes={value:a.a.string.isRequired,active:a.a.bool.isRequired,onChange:a.a.func.isRequired,onFocus:a.a.func.isRequired},_r),Sr=babelHelpers.applyDecoratedDescriptor(Er.prototype,"valueCopy",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return this.props.value}}),babelHelpers.applyDecoratedDescriptor(Er.prototype,"setValue",[he["e"]],Object.getOwnPropertyDescriptor(Er.prototype,"setValue"),Er.prototype),babelHelpers.applyDecoratedDescriptor(Er.prototype,"handleChange",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Er.prototype,"handleChange"),Er.prototype),babelHelpers.applyDecoratedDescriptor(Er.prototype,"handleBlur",[f["a"]],Object.getOwnPropertyDescriptor(Er.prototype,"handleBlur"),Er.prototype),babelHelpers.applyDecoratedDescriptor(Er.prototype,"avoidDoubleEnter",[f["a"]],Object.getOwnPropertyDescriptor(Er.prototype,"avoidDoubleEnter"),Er.prototype),Er))||wr;var Dr=r("./src/udemy/js/caption-editor/cue.less");var Cr,Tr,Or,kr;const Pr={"./cue.less":{cue:"cue--cue--ppfXz",editing:"cue--editing--28sHQ",playing:"cue--playing--1MCH1","cue-time":"cue--cue-time--2kOEV"}};let Ar=(Cr=Object(i["e"])("store"),Cr(Tr=Object(i["f"])(Tr=(Or=(kr=class e extends l.a.Component{componentDidUpdate(e){if(!e.isEditing&&this.props.isEditing&&this.cueElement.scrollIntoView){this.cueElement.scrollIntoView({behavior:"smooth"})}}handleSelect(){const{store:e,cue:t}=this.props;e.selectCue(t)}handleChange(e){const{store:t,cue:r}=this.props;t.onCueContentChange(r,e)}handleMarkCorrect(e){this.props.store.markCorrect(this.props.cue,e.target.checked)}render(){const{cue:e,isEditing:t,isPlaying:r}=this.props;const n=Object(gr["a"])(e.startTime,1);const i=Object(gr["a"])(e.endTime,1);const o=fr()("cue",{editing:t,playing:r});return l.a.createElement("div",{onClick:this.handleSelect,ref:e=>{this.cueElement=e},className:er()(o,Pr)},l.a.createElement("div",{className:"cue--cue-time--2kOEV","aria-label":interpolate(gettext("Between %s and %s"),[n,i])},l.a.createElement("span",null,n),l.a.createElement(hr.a,{label:false}),l.a.createElement("span",null,i)),l.a.createElement(xr,{active:t,value:e.text,onFocus:this.handleSelect,onChange:this.handleChange}))}},kr.propTypes={store:a.a.object.isRequired,cue:a.a.object.isRequired,isEditing:a.a.bool.isRequired,isPlaying:a.a.bool.isRequired},kr),babelHelpers.applyDecoratedDescriptor(Or.prototype,"handleSelect",[f["a"]],Object.getOwnPropertyDescriptor(Or.prototype,"handleSelect"),Or.prototype),babelHelpers.applyDecoratedDescriptor(Or.prototype,"handleChange",[f["a"]],Object.getOwnPropertyDescriptor(Or.prototype,"handleChange"),Or.prototype),babelHelpers.applyDecoratedDescriptor(Or.prototype,"handleMarkCorrect",[f["a"]],Object.getOwnPropertyDescriptor(Or.prototype,"handleMarkCorrect"),Or.prototype),Or))||Tr)||Tr);var Ir=r("./src/udemy/js/caption-editor/cue-list.less");var jr,Rr,Nr;let Lr=(jr=Object(i["e"])("store"),jr(Rr=Object(i["f"])(Rr=(Nr=class e extends l.a.Component{constructor(){super(...arguments);this.ref=l.a.createRef()}componentDidMount(){Object(pr["b"])(this.ref.current)}componentWillUnmount(){Object(pr["c"])(this.ref.current)}render(){const e=this.props.store.localCues.map((e=>l.a.createElement(Ar,{key:e.id,cue:e,isEditing:e.id===this.props.store.editingCueId,isPlaying:this.props.store.playingCueIds.includes(e.id)})));return l.a.createElement("div",{ref:this.ref,className:"cue-list--cues-container--mYChc"},l.a.createElement("div",{className:"cue-list--cues--3XY19"},e))}},Nr.propTypes={store:a.a.object.isRequired},Nr))||Rr)||Rr);var Mr=r("./node_modules/@udemy/react-form-components/dist/esm/checkbox/checkbox.react-component.js");var qr=r("./src/udemy/js/caption-editor/options-bar.less");var Ur,Hr,Fr;let Br=(Ur=Object(i["e"])("store"),Ur(Hr=Object(i["f"])(Hr=(Fr=class e extends l.a.Component{render(){return l.a.createElement("div",{className:"options-bar--options-bar--2N_s1"},l.a.createElement(le["a"],{udStyle:"ghost",size:"small",typography:"ud-text-sm",onClick:this.props.store.toggleOverlayVisibility},gettext("View Keyboard Shortcuts")),l.a.createElement(Mr["a"],{checked:this.props.store.pauseWhenTyping,onChange:this.props.store.togglePauseWhenTypingSetting},gettext("Pause when typing")))}},Fr.propTypes={store:a.a.object.isRequired},Fr))||Hr)||Hr);var zr,Vr,Wr;const Gr={"./caption-editor.less":{flex:"caption-editor--flex--2TxZU",takeover:"caption-editor--takeover--fWx1k","editor-loading-state":"caption-editor--editor-loading-state--2wZq1",editor:"caption-editor--editor--j4GJG","takeover-logo-wrapper":"caption-editor--takeover-logo-wrapper--2mTuL","takeover-title":"caption-editor--takeover-title--2AQS2","ud-ellipsis-1-line":"caption-editor--ud-ellipsis-1-line--1W7Dc","takeover-header-buttons":"caption-editor--takeover-header-buttons--arHmY","takeover-content":"caption-editor--takeover-content--295dZ","modal-footer-buttons":"caption-editor--modal-footer-buttons--DALk0","modal-footer-left-buttons":"caption-editor--modal-footer-left-buttons--RvgiU",discard:"caption-editor--discard--33d7r",disabled:"caption-editor--disabled--aMaO1",player:"caption-editor--player--2u1AT",sidebar:"caption-editor--sidebar--3UP97","alert-banner":"caption-editor--alert-banner--V49iV","cues-empty":"caption-editor--cues-empty--1kAwk","cues-empty-content":"caption-editor--cues-empty-content--6uAmA","cues-empty-subtitle":"caption-editor--cues-empty-subtitle--1hrwv"}};let Kr=(zr=Object(i["e"])("store"),zr(Vr=Object(i["f"])(Vr=(Wr=class e extends l.a.Component{constructor(){super(...arguments);this.ref=l.a.createRef()}componentDidMount(){rr["a"].registerMap(this.props.store.keyMap)}componentWillUnmount(){rr["a"].unregisterMap(this.props.store.keyMap)}renderEmptySidebar(){return l.a.createElement("div",{className:"caption-editor--cues-empty--1kAwk"},l.a.createElement("div",{className:"caption-editor--cues-empty-content--6uAmA"},l.a.createElement("h3",{className:"ud-heading-md"},gettext("This caption file is empty.")),l.a.createElement("p",{className:"caption-editor--cues-empty-subtitle--1hrwv"},gettext("This might be because the lecture does not have any spoken audio, "+"or because you have uploaded an empty .vtt file."))))}render(){const e=!!this.props.store.localCues.length;let t=this.props.store.messages||[];t=t.map((e=>l.a.createElement(ur,{key:e.id,message:e})));const{isProcessing:r,isSaving:n}=this.props.store;return l.a.createElement("div",{className:"caption-editor--editor--j4GJG",ref:this.ref},l.a.createElement("div",{className:"caption-editor--flex--2TxZU caption-editor--player--2u1AT"},l.a.createElement(ir["default"],this.props.store.playerSettings,l.a.createElement(nr["d"],null),l.a.createElement(nr["g"],null),l.a.createElement(nr["e"],null),l.a.createElement(nr["b"],null),l.a.createElement(nr["f"],null),l.a.createElement(nr["i"],null),l.a.createElement(nr["j"],null),l.a.createElement(nr["h"],null))),l.a.createElement("div",{"data-purpose":"sidebar",className:er()(`flex sidebar${r||n?" disabled":""}`,Gr)},!e&&this.renderEmptySidebar(),e&&t,e&&l.a.createElement(Lr,null),e&&l.a.createElement(Br,null)),l.a.createElement(tr["a"],{keyMap:this.props.store.keyMap,isOpen:this.props.store.isHotkeyOverlayVisible,onClose:this.props.store.toggleOverlayVisibility,container:this.ref.current}))}},Wr.propTypes={store:a.a.object.isRequired},Wr))||Vr)||Vr);var $r,Xr,Yr;let Qr=($r=Object(i["e"])("store"),$r(Xr=Object(i["f"])(Xr=(Yr=class e extends l.a.Component{render(){const{error:e,errorModalContent:t}=this.props.store;const{title:r,text:n,actions:i}=t;return l.a.createElement(Fe["a"],{isOpen:!!e,onClose:this.props.store.clearError,requireExplicitAction:true,title:r},l.a.createElement("div",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"error-modal:error-text",html:n}))),l.a.createElement(ze["a"],null,i.map(((e,t)=>{const r={key:e,udStyle:"primary",onClick:this.props.store.forceExitEditor,children:gettext("Exit Editor")};if(i.length>1&&t<i.length-1){r.udStyle="ghost"}if(e===Dt.DISCARD){r.onClick=this.props.store.clearError;r.children=gettext("Return to Editor")}else if(e===Dt.EXIT_WITHOUT_SAVING){r.children=gettext("Exit Without Saving")}return l.a.createElement(le["a"],r)}))))}},Yr.propTypes={store:a.a.object.isRequired},Yr))||Xr)||Xr);var Jr,Zr,en;const tn=e=>{let{isOpen:t,isSaving:r,onDiscard:n,onCancel:i,onSave:o}=e;return l.a.createElement(Fe["a"],{isOpen:t,onClose:i,requireExplicitAction:true,title:gettext("You have unsaved edits made to this caption file. If you quit you will lose these changes.")},l.a.createElement(ze["a"],null,l.a.createElement("div",{className:"caption-editor--modal-footer-buttons--DALk0"},l.a.createElement("div",{className:"caption-editor--modal-footer-left-buttons--RvgiU"},l.a.createElement(le["a"],{onClick:n,udStyle:"ghost"},l.a.createElement("span",{className:"caption-editor--discard--33d7r"},gettext("Discard changes"))),l.a.createElement(le["a"],{onClick:i,udStyle:"ghost"},gettext("Cancel"))),l.a.createElement(le["a"],{onClick:o,disabled:r},gettext("Save and Publish")))))};const rn=()=>l.a.createElement("div",{className:"caption-editor--editor-loading-state--2wZq1","data-purpose":"initialising-editor"},l.a.createElement(v["b"],null));let nn=Object(i["f"])(Jr=(Zr=(en=class e extends l.a.Component{constructor(e){super(e);this.dialogRef=l.a.createRef();this.labelledById=Object(Ee["a"])("caption-editor");this.store=e.captionEditStore||new Jt(e.courseId,e.assetId,e.videoCaptionLocaleId||e.transcriptLocaleId,e.transcriptLocaleId,e.uploader,e.onCaptionCreated,e.onExit,e.onPlayerReady)}componentDidMount(){this.onToggleDialog(true);window.addEventListener("beforeunload",this.onBrowserExit);this.store.initialise();this.store.fetchDraftCaptions();this.props.addControlledCloseFn(this.store.exitEditor)}componentWillUnmount(){this.onToggleDialog(false);window.removeEventListener("beforeunload",this.onBrowserExit)}onToggleDialog(e){this.dialogRef.current.onToggle(e)}onBrowserExit(e){if(this.store.isDirty){e.returnValue=gettext("You have unsaved edits made to this caption file. If you quit you will lose these changes.")}}onSaveHandler(){this.store.saveAsFile();this.props.onSaveBtnClick()}onSaveAndQuitHandler(){this.store.saveAsFile().then(this.store.exitEditor)}onExitHandler(){if(this.props.onExitBtnClick()===false){return}return this.store.exitEditor()}get buttons(){return l.a.createElement("div",{className:"caption-editor--takeover-header-buttons--arHmY"},this.props.actionButtons,l.a.createElement(vt,{onClick:this.onSaveHandler,isSaving:this.store.isSaving,hasError:!!this.store.error,disabled:this.store.isProcessing},this.store.isProcessing?gettext("Processing"):gettext("Save & Publish")),l.a.createElement(le["a"],{udStyle:"ghost",onClick:this.onExitHandler,disabled:this.store.isSaving,"data-purpose":"editor-exit"},gettext("Quit")))}renderLogo(e,t){return l.a.createElement("div",{className:"caption-editor--takeover-logo-wrapper--2mTuL"},l.a.createElement(e,t))}render(){const e=l.a.createElement(i["c"],{store:this.store},l.a.createElement(Be["a"],{ref:this.dialogRef,labelledById:this.labelledById,className:"caption-editor--takeover--fWx1k"},l.a.createElement(Qr,null),l.a.createElement(tn,{isOpen:this.store.isExitModalVisible,isSaving:this.store.isSaving,onDiscard:this.store.forceExitEditor,onCancel:this.store.hideCloseEditorModal,onSave:this.onSaveAndQuitHandler}),l.a.createElement(Ve["a"],{renderLogo:this.renderLogo},l.a.createElement("div",{className:"caption-editor--flex--2TxZU caption-editor--takeover-title--2AQS2"},l.a.createElement("h2",{id:this.labelledById,className:"ud-text-lg"},this.props.title)),this.buttons),l.a.createElement("div",{className:"caption-editor--flex--2TxZU caption-editor--takeover-content--295dZ"},this.store.isLoading&&l.a.createElement(rn,null),!this.store.isAssetLoading&&l.a.createElement(Kr,null))));return Ge.a.createPortal(e,document.body)}},en.propTypes={captionEditStore:a.a.object,courseId:a.a.number.isRequired,assetId:a.a.number.isRequired,title:a.a.string.isRequired,uploader:Object(pt["c"])("captionEditStore")(a.a.instanceOf(ut)).isRequired,onSaveBtnClick:a.a.func,onExitBtnClick:a.a.func,onExit:Object(pt["c"])("captionEditStore")(a.a.func).isRequired,onCaptionCreated:a.a.func,videoCaptionLocaleId:a.a.string,transcriptLocaleId:Object(pt["c"])("captionEditStore")(a.a.string).isRequired,actionButtons:a.a.node,onPlayerReady:a.a.func,addControlledCloseFn:a.a.func},en.defaultProps={captionEditStore:null,onSaveBtnClick:Xe["a"],onExitBtnClick:Xe["a"],onCaptionCreated:Xe["a"],videoCaptionLocaleId:"",actionButtons:null,onPlayerReady:Xe["a"],addControlledCloseFn:Xe["a"]},en),babelHelpers.applyDecoratedDescriptor(Zr.prototype,"onToggleDialog",[f["a"]],Object.getOwnPropertyDescriptor(Zr.prototype,"onToggleDialog"),Zr.prototype),babelHelpers.applyDecoratedDescriptor(Zr.prototype,"onBrowserExit",[f["a"]],Object.getOwnPropertyDescriptor(Zr.prototype,"onBrowserExit"),Zr.prototype),babelHelpers.applyDecoratedDescriptor(Zr.prototype,"onSaveHandler",[f["a"]],Object.getOwnPropertyDescriptor(Zr.prototype,"onSaveHandler"),Zr.prototype),babelHelpers.applyDecoratedDescriptor(Zr.prototype,"onSaveAndQuitHandler",[f["a"]],Object.getOwnPropertyDescriptor(Zr.prototype,"onSaveAndQuitHandler"),Zr.prototype),babelHelpers.applyDecoratedDescriptor(Zr.prototype,"onExitHandler",[f["a"]],Object.getOwnPropertyDescriptor(Zr.prototype,"onExitHandler"),Zr.prototype),babelHelpers.applyDecoratedDescriptor(Zr.prototype,"renderLogo",[f["a"]],Object.getOwnPropertyDescriptor(Zr.prototype,"renderLogo"),Zr.prototype),Zr))||Jr;var on=r("./src/udemy/js/survey/survey-modal.react-component.js");var an=r("./src/udemy/js/survey/survey.mobx-store.js");var sn,ln,cn,un;let pn=(sn=Object(i["e"])("store"),sn(ln=Object(c["m"])(ln=Object(i["f"])(ln=(cn=(un=class e extends l.a.Component{constructor(e){super(e);this.surveyStore=new an["a"]("caption-editing",e.store.courseId)}async componentDidMount(){await this.surveyStore.getSurvey();this.surveyStore.setUserAnswers({})}onCaptionCreated(e){this.props.store.refreshCaption(e,this.props.lecture.id)}returnToCaptionManage(){this.props.history.push(`${this.props.store.relativePath}/${this.props.localeId}/`)}get hasUserCompletedOrSeenSurvey(){return[h["a"].ids.captionEditorSurvey,h["a"].ids.captionEditorSurveyPopup].some((e=>this.props.store.seenSystemMessages[e]))}openSurvey(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.videoPlayer&&this.videoPlayer.pause();this.props.store.openSurvey(e)}feedbackButtonHandler(){this.openSurvey()}onSaveBtnClick(){if(!this.hasUserCompletedOrSeenSurvey){this.openSurvey()}}onExitBtnClick(){if(!this.hasUserCompletedOrSeenSurvey){this.openSurvey(true);return false}}onPlayerReady(e){this.videoPlayer=e}render(){const{lecture:e,title:t,localeId:r,store:n}=this.props;let i;if(!this.props.store.seenSystemMessages[h["a"].ids.captionEditorSurvey]){i=l.a.createElement(le["a"],{udStyle:"ghost",onClick:this.feedbackButtonHandler},gettext("Give feedback"))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(nn,{courseId:this.props.courseId,assetId:e.asset.id,title:t,transcriptLocaleId:r,relativePath:n.relativePath,uploader:n.fileUploader,onSaveBtnClick:this.onSaveBtnClick,onCaptionCreated:this.onCaptionCreated,onExitBtnClick:this.onExitBtnClick,onExit:this.returnToCaptionManage,actionButtons:i,onPlayerReady:this.onPlayerReady,addControlledCloseFn:n.addControlledEditorCloseFn}),l.a.createElement(on["a"],{surveyStore:this.surveyStore,isOpen:n.isEditorFeedbackSurveyVisible,onClose:n.hideEditorFeedbackSurvey,onSubmit:n.onEditorFeedbackSurveySubmit,thankYouPageProps:{text:gettext("Thanks for taking the time to give us your opinion. "+"We are working hard to make it easy for you to manage and improve your captions.")}}))}},un.propTypes={courseId:a.a.number.isRequired,lecture:a.a.object.isRequired,title:a.a.string.isRequired,localeId:a.a.string.isRequired,store:a.a.object.isRequired,history:a.a.object.isRequired},un),babelHelpers.applyDecoratedDescriptor(cn.prototype,"onCaptionCreated",[f["a"]],Object.getOwnPropertyDescriptor(cn.prototype,"onCaptionCreated"),cn.prototype),babelHelpers.applyDecoratedDescriptor(cn.prototype,"returnToCaptionManage",[f["a"]],Object.getOwnPropertyDescriptor(cn.prototype,"returnToCaptionManage"),cn.prototype),babelHelpers.applyDecoratedDescriptor(cn.prototype,"feedbackButtonHandler",[f["a"]],Object.getOwnPropertyDescriptor(cn.prototype,"feedbackButtonHandler"),cn.prototype),babelHelpers.applyDecoratedDescriptor(cn.prototype,"onSaveBtnClick",[f["a"]],Object.getOwnPropertyDescriptor(cn.prototype,"onSaveBtnClick"),cn.prototype),babelHelpers.applyDecoratedDescriptor(cn.prototype,"onExitBtnClick",[f["a"]],Object.getOwnPropertyDescriptor(cn.prototype,"onExitBtnClick"),cn.prototype),babelHelpers.applyDecoratedDescriptor(cn.prototype,"onPlayerReady",[f["a"]],Object.getOwnPropertyDescriptor(cn.prototype,"onPlayerReady"),cn.prototype),cn))||ln)||ln)||ln);var dn=r("./src/udemy/js/course-captions/caption-manager.less");var hn,mn,fn,gn;let yn=(hn=Object(i["e"])("store"),hn(mn=Object(i["f"])(mn=(fn=(gn=class e extends s["Component"]{componentDidMount(){if(this.props.match.params.localeId){this.props.store.setInitialLocaleId(this.props.match.params.localeId)}}captionEditor(e){const{store:t,match:r}=this.props;const n=r.params.localeId||t.initialLocaleId;let i=e.match.params.lectureId;const o=i===H;if(!o){i=parseInt(i,10)}const a=t.lecturesById[i];if(!a){return l.a.createElement(c["b"],{to:r.url})}return l.a.createElement(pn,{courseId:t.courseId,lecture:a,title:a.title,localeId:n})}get editorRoute(){if(!this.props.store.lecturesLoaded){return null}const{url:e}=this.props.match;return l.a.createElement(c["c"],{path:`${e}/edit/:lectureId/`,render:this.captionEditor})}render(){return l.a.createElement("div",null,l.a.createElement("div",{className:"caption-manager--description--2b7Qh"},l.a.createElement(m["b"],{html:gettext("Learners of all levels of language proficiency highly value "+"subtitles as it helps follow, understand and memorize the content. "+"Also having subtitles to ensure the content is accessible for "+"those that are deaf or hard of hearing is crucial. "+'<a class="support_link">Learn more</a>.'),interpolate:{support_link:l.a.createElement("a",{href:g["a"].toSupportLink("adding_captions_to_video")})}})),l.a.createElement(He,null),this.editorRoute)}},gn.propTypes={store:a.a.object.isRequired,match:a.a.object.isRequired},gn),babelHelpers.applyDecoratedDescriptor(fn.prototype,"captionEditor",[f["a"]],Object.getOwnPropertyDescriptor(fn.prototype,"captionEditor"),fn.prototype),fn))||mn)||mn);var bn=r("./src/udemy/js/course-manage-v2/sub-header/sub-header.react-component.js");var vn,wn,En;let Sn=(vn=Object(i["e"])("store"),vn(wn=Object(i["f"])(wn=(En=class e extends l.a.Component{render(){const{translationRecord:e,togglingAvailability:t,course:r,isLanguageCourse:n}=this.props.store;let i,o;const a=e&&e.availability===T.RESTRICTED;const s=r&&r.is_in_any_ufb_content_collection&&!n&&e&&e.locale.locale===r.locale.locale&&_.includes(r.locale.locale.slice(0,2));const c=!e||t||!a&&s;if(a){i=gettext("Enable");o="primary"}else{i=gettext("Disable");o="secondary"}const u=l.a.createElement(le["a"],{disabled:c,"data-purpose":"toggle-caption-language-availability",onClick:this.props.store.toggleAvailability,udStyle:o},i);if(s&&c){return l.a.createElement(be["a"],{canToggleOnHover:true,placement:"right",trigger:u},l.a.createElement("b",null,gettext("All courses in the Udemy Business collection must have captions "+"enabled to maximize accessibility for learners.")))}return u}},En.propTypes={store:a.a.object.isRequired},En))||wn)||wn);const _n=e=>{let{isOpen:t,onClose:r,handleExport:n}=e;return l.a.createElement(Fe["a"],{isOpen:t,onClose:r,title:gettext("Export Course Captions")},l.a.createElement("p",null,gettext("Your captions will be prepared and emailed to you shortly. "+"This might take a few minutes depending on the number of video lectures. Continue?")),l.a.createElement(ze["a"],null,l.a.createElement(le["a"],{udStyle:"ghost",onClick:r},gettext("Cancel")),l.a.createElement(le["a"],{onClick:n},gettext("Export"))))};_n.propTypes={isOpen:a.a.bool.isRequired,onClose:a.a.func.isRequired,handleExport:a.a.func.isRequired};var xn=_n;var Dn,Cn,Tn,On;let kn=(Dn=Object(i["e"])("store"),Dn(Cn=Object(c["m"])(Cn=Object(i["f"])(Cn=(Tn=(On=class e extends s["Component"]{removeLocaleAndRedirect(){return this.props.store.removeLocale().then((e=>{this.props.history.push(`${this.props.store.relativePath}/${e}/`)}))}render(){const{canUserEditCourse:e,currentLanguageLoaded:t,isDefaultLocale:r,lectureCount:n,translationRecord:i,uncaptionedVideosCount:o,openBulkDownloadModal:a}=this.props.store;const s=t&&!r&&i&&!i.has_autogenerated_captions;const c=[];if(n!==o){c.push(l.a.createElement(de["a"].MenuItem,{key:"bulkDownload",onClick:a},gettext("Bulk download")))}if(e&&s){c.push(l.a.createElement(de["a"].MenuItem,{key:"removeLanguge",onClick:this.removeLocaleAndRedirect},gettext("Remove language")))}if(c.length){return l.a.createElement(de["a"],{placement:"bottom-end",trigger:l.a.createElement(ce["a"],{udStyle:"ghost"},l.a.createElement(ne.a,{label:gettext("Caption language options")}))},l.a.createElement(de["a"].Menu,null,c))}return null}},On.propTypes={store:a.a.object.isRequired,history:a.a.shape({push:a.a.func.isRequired}).isRequired},On),babelHelpers.applyDecoratedDescriptor(Tn.prototype,"removeLocaleAndRedirect",[f["a"]],Object.getOwnPropertyDescriptor(Tn.prototype,"removeLocaleAndRedirect"),Tn.prototype),Tn))||Cn)||Cn)||Cn);var Pn=r("./node_modules/@udemy/icons/dist/close.ud-icon");var An=r.n(Pn);var In=r("./node_modules/@udemy/icons/dist/next.ud-icon");var jn=r.n(In);var Rn=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var Nn=r("./src/udemy/js/course-captions/language-selector.less");var Ln,Mn,qn,Un,Hn;let Fn=(Ln=Object(i["e"])("store"),Ln(Mn=Object(c["m"])(Mn=Object(i["f"])(Mn=(qn=(Hn=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"isAllLanguages",Un,this)}setAddLanguagePane(){this.isAllLanguages=false}setLanguageSelectorPane(){this.isAllLanguages=true;return false}setLanguage(e){return Object(he["e"])((()=>{const{history:t,store:r}=this.props;this.isAllLanguages=false;r.setLocale(e);t.push(`${r.relativePath}/${e}/`)}))}addLanguage(e){return()=>{this.props.store.addNewLocale(e).then((()=>{this.setLanguage(e)()}))}}defaultDropdown(){const{captionedLocaleList:e,localeTitles:t}=this.props.store;return[l.a.createElement(de["a"].Menu,{key:"captioned-locales"},e.map((e=>l.a.createElement(de["a"].MenuItem,{key:e,onClick:this.setLanguage(e)},t[e])))),l.a.createElement(de["a"].Menu,{key:"add-new-language"},l.a.createElement(de["a"].MenuItem,{onClick:this.setLanguageSelectorPane},l.a.createElement("span",{className:"language-selector--add-new-language-text--2O63C"},gettext("Add new language"),l.a.createElement(jn.a,{label:false}))))]}allDropdown(){const{filteredLocaleList:e,localeTitles:t}=this.props.store;return[l.a.createElement(de["a"].Menu,{key:"cancel"},l.a.createElement(de["a"].MenuItem,{onClick:this.setAddLanguagePane},l.a.createElement("span",{className:"ud-heading-md ud-link-neutral language-selector--cancel-text--1Dpxm",ref:e=>{e&&e.parentNode.parentNode.focus()}},gettext("Cancel"),l.a.createElement(An.a,{label:false})))),l.a.createElement(de["a"].Menu,{key:"filtered-locales"},e.map((e=>l.a.createElement(de["a"].MenuItem,{key:e.locale,componentClass:"button",onClick:this.addLanguage(e.locale)},t[e.locale]))))]}render(){return l.a.createElement(de["a"],{placement:"bottom-start",menuWidth:"large",menuMaxHeight:`${Object(Rn["c"])(600)}rem`,trigger:l.a.createElement(de["a"].Button,null,l.a.createElement("span",{className:"language-selector--trigger-text--vl5bU"},this.props.store.currentLocaleTitle))},l.a.createElement("div",{className:"language-selector--menus--2f7MK"},this.isAllLanguages?this.allDropdown():this.defaultDropdown()))}},Hn.propTypes={store:a.a.object.isRequired,history:a.a.shape({push:a.a.func.isRequired})},Hn.defaultProps={history:undefined},Hn),Un=babelHelpers.applyDecoratedDescriptor(qn.prototype,"isAllLanguages",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(qn.prototype,"setAddLanguagePane",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(qn.prototype,"setAddLanguagePane"),qn.prototype),babelHelpers.applyDecoratedDescriptor(qn.prototype,"setLanguageSelectorPane",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(qn.prototype,"setLanguageSelectorPane"),qn.prototype),babelHelpers.applyDecoratedDescriptor(qn.prototype,"setLanguage",[f["a"]],Object.getOwnPropertyDescriptor(qn.prototype,"setLanguage"),qn.prototype),babelHelpers.applyDecoratedDescriptor(qn.prototype,"addLanguage",[f["a"]],Object.getOwnPropertyDescriptor(qn.prototype,"addLanguage"),qn.prototype),babelHelpers.applyDecoratedDescriptor(qn.prototype,"defaultDropdown",[f["a"]],Object.getOwnPropertyDescriptor(qn.prototype,"defaultDropdown"),qn.prototype),babelHelpers.applyDecoratedDescriptor(qn.prototype,"allDropdown",[f["a"]],Object.getOwnPropertyDescriptor(qn.prototype,"allDropdown"),qn.prototype),qn))||Mn)||Mn)||Mn);var Bn,zn,Vn;let Wn=(Bn=Object(i["e"])("store"),Bn(zn=Object(i["f"])(zn=(Vn=class e extends l.a.Component{render(){const{uncaptionedPublishedLectureProgress:e}=this.props.store;const t=gettext("The ‘CC’ icon will only be shown on your course when all published video lectures in your course have captions.");const r=interpolate(gettext("%(uncaptionedPublishedLectureProgress)s published lectures captioned"),{uncaptionedPublishedLectureProgress:e},true);return l.a.createElement("div",{className:"captions-form--hidden-lg-max--3uUqy"},l.a.createElement("span",null,r),l.a.createElement(we,null,t))}},Vn.propTypes={store:a.a.object.isRequired},Vn))||zn)||zn);var Gn,Kn,$n;let Xn=(Gn=Object(i["e"])("store"),Gn(Kn=Object(i["f"])(Kn=($n=class e extends s["Component"]{renderActionButtons(){const{canUserEditCourse:e,currentLanguageLoaded:t,isBulkDownloadModalVisible:r,triggerBulkDownload:n,closeBulkDownloadModal:i}=this.props.store;return l.a.createElement(l.a.Fragment,null,e&&t&&l.a.createElement(Sn,null),l.a.createElement(kn,null),l.a.createElement(xn,{isOpen:r,onClose:i,handleExport:n}))}render(){const{lecturesLoaded:e,currentLanguageLoaded:t,relativePath:r}=this.props.store;return l.a.createElement(bn["a"],{title:gettext("Captions"),actionButtons:this.renderActionButtons()},t&&l.a.createElement(Fn,{relativePath:r}),e&&l.a.createElement(Wn,null))}},$n.propTypes={store:a.a.object.isRequired},$n))||Kn)||Kn);var Yn,Qn,Jn,Zn,ei,ti,ri,ni,ii,oi,ai,si,li,ci;function ui(e,t){return`/courses/${e}/download-captions/?locale=${t}`}let pi=(Yn=class e{constructor(e,t,r,n){babelHelpers.initializerDefineProperty(this,"activeTab",Qn,this);babelHelpers.initializerDefineProperty(this,"currentLanguageLoaded",Jn,this);babelHelpers.initializerDefineProperty(this,"lecturesLoaded",Zn,this);babelHelpers.initializerDefineProperty(this,"isLanguageCourse",ei,this);babelHelpers.initializerDefineProperty(this,"curriculumList",ti,this);babelHelpers.initializerDefineProperty(this,"localeList",ri,this);babelHelpers.initializerDefineProperty(this,"defaultLocaleId",ni,this);babelHelpers.initializerDefineProperty(this,"currentLocaleId",ii,this);babelHelpers.initializerDefineProperty(this,"translationRecords",oi,this);babelHelpers.initializerDefineProperty(this,"togglingAvailability",ai,this);babelHelpers.initializerDefineProperty(this,"isBulkDownloadModalVisible",si,this);babelHelpers.initializerDefineProperty(this,"seenSystemMessages",li,this);babelHelpers.initializerDefineProperty(this,"isEditorFeedbackSurveyVisible",ci,this);this.captions=he["t"].map();this.relativePath=null;this.initialLocaleId=null;this.editorUrlFormat="/:localeId/edit/:lectureId/";this.courseId=e;this.fileUploader=new ut(e,{key:t,bucketUrl:r,sizeLimit:0,acl:"private"});this.relativePath=n}_setupUploadStatus(e){e.uploadStatus=he["t"].map({});return e}getCaptionsFor(e){const t=Array.from(this.captions.values()).filter((t=>{var r;return(t.assetId===e.asset_id||((r=e.child_assets)===null||r===void 0?void 0:r.some((e=>e.id===t.assetId))))&&t.locale===this.currentLocaleId})).sort(((e,t)=>F[e.source]<=F[t.source]?-1:1));return t[0]}getCaptionsForLocale(e){return Array.from(this.captions.values()).filter((t=>t.locale===e))}_promoVideoChapter(e){const t=this._setupUploadStatus(e);return{...A,items:[t]}}_groupByChapter(e){if(e.length===0){return[]}const t=e[0]._class==="chapter"?[]:[{...P,items:[]}];return e.reduce(((e,t)=>{if(t._class==="chapter"){e.push({id:t.id,title:t.title,items:[]})}else if(t.asset_id&&k.includes(t.asset.asset_type)){e[e.length-1].items.push(this._setupUploadStatus(t))}return e}),t)}_cleanError(e,t){const r=e.uploadStatus.get(t);if(r){delete r.error}}setEditorUrlFormat(e){this.editorUrlFormat=e}getEditorUrl(e){return this.relativePath+this.editorUrlFormat.replace(":localeId",this.currentLocaleId).replace(":lectureId",e)}setActiveTab(e){this.activeTab=e}_setContentAsLoaded(){this.lecturesLoaded=true;this.currentLanguageLoaded=true}_setLoadingForAWhile(){this.lecturesLoaded=false;setTimeout(this._setContentAsLoaded,q)}setLocale(e){const t=this.localeTitles[e]?e:this.defaultLocaleId;if(this.currentLocaleId!==t){if(this.getCaptionsForLocale(t).length<=1){this.lecturesLoaded=false;return this.fetchCaptions(t).finally(Object(he["e"])((()=>{this.currentLocaleId=t;this.lecturesLoaded=true})))}this.currentLocaleId=t;return Promise.resolve(this._setLoadingForAWhile())}}addNewLocale(e){return Qe["f"].post(`courses/${this.courseId}/translations/`,{locale:e},{params:{"fields[course_translation]":"@all"}}).then(Object(he["e"])((e=>{const t=e.data;this.translationRecords=Object.assign({},this.translationRecords,{[t.locale.locale]:t})})))}removeLocale(){const e=this.translationRecord.locale.locale;this.lecturesLoaded=false;return Qe["f"].delete(`courses/${this.courseId}/translations/${e}/`).then((()=>this.removeDraftCaptionsForLocale())).then(Object(he["e"])((()=>{this.removeCaptionsForLocale(e);this.setLocale(this.defaultLocaleId);delete this.translationRecords[e];this.translationRecords=Object.assign({},this.translationRecords);return this.currentLocaleId})))}async removeDraftCaptionsForLocale(){await Qe["f"].delete(`/courses/${this.courseId}/draft-captions/?locale=${this.translationRecord.locale.locale}`)}setInitialLocaleId(e){this.initialLocaleId=e;this.currentLocaleId=e}async fetchCaptions(e){try{const t=await Qe["f"].get(`/courses/${this.courseId}/captions/`,{params:{...R,locale:e}});const r=await this.fetchDraftCaptions(e);Object(he["x"])((()=>{this.captions.clear();this._setupPromoCaptions();this.groupCaptionsById(t.data.results);this.updateCaptionStatusByDraftCaptions(r)}))}catch(e){if(e.response.status===404){window.location.href=window.location.href.replace(this.currentLocaleId,this.defaultLocaleId);return[]}throw e}}async fetchDraftCaptions(e){const t=await Qe["f"].get(`/courses/${this.courseId}/draft-captions/`,{params:{...N,locale:e}});return t.data.results}async refreshCaptions(){Object(he["x"])((async()=>{if(this.course.promo_asset){await this.fetchCourse()}this.fetchCaptions(this.currentLocaleId)}))}updateCaptionStatusByDraftCaptions(e){e.forEach((e=>{if(e.status!==0)return;const t=this.captions.get(e.published_caption_id);if(!t){this.prepareCaptionFromDraftCaption(e)}else if(new Date(t.modified).getTime()>new Date(e.modified).getTime()){return null}else{t.status=me["f"].PROCESSING}}))}prepareCaptionFromDraftCaption(e){const t=new wt["b"]({...e,status:me["f"].PROCESSING,id:e.published_caption_id||e.id});this.captions.set(t.id,t)}removeCaptionsForLocale(e){const t=this.getCaptionsForLocale(e).map((e=>e.id));return t.map((e=>this.captions.delete(e)))}groupCaptionsById(e){return e.reduce(((e,t)=>{e.set(t.id,new wt["b"](t));return e}),this.captions)}groupCaptionsByAssetId(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(e){return e.reduce(((e,t)=>{e[t.assetId]=t;return e}),t)}return t}fetchCourse(){return Qe["f"].get(`/courses/${this.courseId}/`,{params:{...R,"fields[asset]":"asset_type,id,captions","fields[course]":"can_edit,primary_subcategory,promo_asset,locale,is_published,"+"organization_id,is_in_any_ufb_content_collection,is_language_course","fields[locale]":"@default"}}).then(Object(he["e"])((e=>{let{data:t}=e;this.course=t;return t})))}fetchSeenMessages(){return Qe["f"].get(`/users/me/system-messages/localization-messages/${this.courseId}/seen/`).then(Object(he["e"])((e=>{let{data:t}=e;this.seenSystemMessages=t})))}fetchTranslations(){return Qe["f"].get(`/courses/${this.courseId}/translations/`,{params:{...M,"fields[course_translation]":"@all"}}).then(Object(he["e"])((e=>{this.translationRecords=e.data.results.reduce(((e,t)=>{e[t.locale.locale]=t;return e}),{})})))}fetchCurriculumItems(){const e={params:{...L,page_size:999,asset_types:k.join(","),curriculum_types:O.join(","),"fields[lecture]":"title,type,object_index,sort_order,is_published,asset_id,asset,child_assets"}};return Qe["f"].get(`/courses/${this.courseId}/instructor-curriculum-items/`,e).then((e=>e.data.results))}loadCaptionsAndCurriculumItems(){return Promise.all([this.fetchCaptions(this.currentLocaleId),this.fetchCurriculumItems(),this.fetchTranslations(),this.fetchSeenMessages()])}fetchLocales(){return Qe["f"].get("/locales/",{params:M}).then(Object(he["e"])((e=>{let{data:t}=e;this.localeList=t.results;return t.results})))}_setupLocale(e){let[t]=e;this.isLanguageCourse=t.is_language_course;this.defaultLocaleId=t.locale.locale;if(!this.currentLocaleId){this.currentLocaleId=this.localeTitles[this.initialLocaleId]?this.initialLocaleId:this.defaultLocaleId}}_setupPromoCaptions(){if(this.course.promo_asset){this.course.promo_asset.captions.map((e=>{const t=new wt["b"]({asset_id:this.course.promo_asset.id,...e});const r=this.captions.get(t.id);if(r){t.status=r.status}this.captions.set(t.id,t);return t}))}}_createPromoLecture(){if(this.course.promo_asset){const e={isPromoVideo:true,is_published:true,title:gettext("Promotional video"),id:H,asset_id:this.course.promo_asset.id,asset:{...this.course.promo_asset}};return this._promoVideoChapter(e)}}_setupTranslationRecord(){if(!this.translationRecord){this.addNewLocale(this.currentLocaleId).then((()=>{this._setContentAsLoaded()}))}else{this._setContentAsLoaded()}}_createCurriculumItems(e){let[,t]=e;this._setupPromoCaptions();const r=this._groupByChapter(t);const n=this._createPromoLecture();if(n){r.unshift(n)}return r}loadLecturesAndCaptions(){return Promise.all([this.fetchCourse(),this.fetchLocales()]).then(this._setupLocale).then(this.loadCaptionsAndCurriculumItems).then(this._createCurriculumItems).then(Object(he["e"])((e=>this.curriculumList=e))).then(this._setupTranslationRecord)}toggleAvailability(){this.togglingAvailability=true;const e=this.translationRecord.availability===T.PUBLIC?T.RESTRICTED:T.PUBLIC;this.dismissSystemMessageAlertNotifyingServer(h["a"].ids.courseTranslationLowConfidence,this.translationRecord.id,U);return Qe["f"].patch(`courses/${this.courseId}/translations/${this.translationRecord.locale.locale}/`,{availability:e}).then(Object(he["e"])((e=>{const t=e.data.locale.locale;this.translationRecords[t].availability=e.data.availability;this.togglingAvailability=false})))}hasSeenAlert(e){if(!this.translationRecord){return false}if(!this.seenSystemMessages[e]){return false}return this.seenSystemMessages[e].includes(this.translationRecord.locale.locale)}dismissSystemMessageAlert(e){if(!this.hasSeenAlert(e)){this.seenSystemMessages[e].push(this.currentLocaleId)}}dismissSystemMessageAlertNotifyingServer(e,t,r){this.dismissSystemMessageAlert(e);h["a"].seen(e,{obj_id:t,obj_type:r})}deleteCaption(e){const t=this.currentLocaleId;const r=this.getCaptionsFor(e);const n=r.id;r.status=me["f"].DELETING;this._cleanError(e,this.currentLocaleId);return new Promise(((r,i)=>{Qe["f"].delete(ct(this.courseId,e.asset.id,n,me["g"].PUBLISHED)).then((()=>Qe["f"].get(ct(this.courseId,e.asset.id,undefined,me["g"].PUBLISHED),{params:{...R,locale:t}}).then(Object(he["e"])((t=>{const i=t.data.results.shift();if(i){const t=new wt["b"](i);this._addCaptionToLecture(e,t)}this._removeCaption(n);r()}))).catch(i))).catch(i)}))}get canUserEditCourse(){return this.course&&this.course.can_edit}openBulkDownloadModal(){this.isBulkDownloadModalVisible=true}closeBulkDownloadModal(){this.isBulkDownloadModalVisible=false}triggerBulkDownload(){return Qe["f"].get(ui(this.courseId,this.currentLocaleId)).then(this.closeBulkDownloadModal)}_createDelayCompleteFn(e,t){return Object(he["e"])((()=>{const r=e.uploadStatus.get(t);r.onProcess=false}))}_addCaptionToLecture(e,t){let r=t;if(r){if(!(r instanceof wt["b"])){r=new wt["b"]({asset_id:e.asset_id,...r})}else{r.assetId=e.asset_id}this.captions.set(r.id,r)}}_removeCaption(e){this.captions.delete(e)}_createUploadCompleteFn(e,t){return Object(he["e"])((r=>{const n=new wt["b"]({...r,source:"manual",filteringTags:this.getFilteringTags(this.getCaptionsFor(e)),locale:{locale:t}});this._addCaptionToLecture(e,n);setTimeout(this._createDelayCompleteFn(e,t),q)}))}getFilteringTags(e){if(e===undefined)return["un-captioned"];const t=[e.source];if(!e.confidenceThreshold)t.push("low-quality");return t}_createProcessCompleteFn(e){return Object(he["e"])(((t,r)=>{const n=this.getCaptionsFor(e);const i=n.id;n.id=r;n.status=t;n.filteringTags=null;this._removeCaption(i);this._addCaptionToLecture(e,n)}))}_createOnErrorFn(e,t){return Object(he["e"])((r=>{const n=e.uploadStatus.get(t);n.onProcess=false;n.error=r}))}_createOnProgressFn(e,t){return Object(he["e"])((r=>{const n=e.uploadStatus.get(t);n.progress=r}))}startUpload(e,t){return Object(he["e"])((()=>{this.fileUploader.upload(t,e.asset,this.currentLocaleId,{onUploadComplete:this._createUploadCompleteFn(e,this.currentLocaleId),onError:this._createOnErrorFn(e,this.currentLocaleId),onProgress:this._createOnProgressFn(e,this.currentLocaleId),onProcessComplete:this._createProcessCompleteFn(e,this.currentLocaleId)})}))}replaceCaption(e,t){e.uploadStatus.set(this.currentLocaleId,{onProcess:true,progress:0,fileName:t.name});setTimeout(this.startUpload(e,t))}refreshCaption(e,t){const r=this.curriculumList.reduce(((e,t)=>e.concat([...t.items])),[]).find((e=>e.id==t));this._addCaptionToLecture(r,e)}uncaptionedVideoFilter(e){const t=this.getCaptionsFor(e);const r=(t===null||t===void 0?void 0:t.filteringTags)||[];return!t||r.includes("un-captioned")}autocaptionedFilter(e){const t=this.getCaptionsFor(e);const r=(t===null||t===void 0?void 0:t.filteringTags)||[];return t&&(t.source==="auto"||r.includes("auto"))}lowQualityFilter(e){const t=this.getCaptionsFor(e);const r=(t===null||t===void 0?void 0:t.filteringTags)||[];return t&&(t.status===1&&!t.confidenceThreshold||r.includes("low-quality"))}addControlledEditorCloseFn(e){this.exitEditorFn=e}openSurvey(e){this.isPreExit=e;this.showEditorFeedbackSurvey()}showEditorFeedbackSurvey(){this.isEditorFeedbackSurveyVisible=true;h["a"].seen(h["a"].ids.captionEditorSurveyPopup);this.seenSystemMessages[h["a"].ids.captionEditorSurveyPopup]=true}hideEditorFeedbackSurvey(){this.isEditorFeedbackSurveyVisible=false;if(this.isPreExit){this.exitEditorFn&&this.exitEditorFn()}}onEditorFeedbackSurveySubmit(){h["a"].seen(h["a"].ids.captionEditorSurvey);this.seenSystemMessages[h["a"].ids.captionEditorSurvey]=true;if(this.isPreExit){this.exitEditorFn&&this.exitEditorFn()}}get publishedLectureCount(){return this.curriculumList.reduce(((e,t)=>e+t.items.filter((e=>e.is_published&&!e.isPromoVideo)).length),0)}get lectureCount(){return this.curriculumList.reduce(((e,t)=>e+t.items.length),0)}get uncaptionedVideosCount(){return this.curriculumList.reduce(((e,t)=>e+t.items.filter(this.uncaptionedVideoFilter).length),0)}get lowQualityCount(){return this.curriculumList.reduce(((e,t)=>e+t.items.filter(this.lowQualityFilter).length),0)}get autocaptionedCount(){return this.curriculumList.reduce(((e,t)=>e+t.items.filter(this.autocaptionedFilter).length),0)}get uncaptionedPublishedLectureCount(){return this.curriculumList.reduce(((e,t)=>e+t.items.filter((e=>e.is_published&&!e.isPromoVideo&&!(this.getCaptionsFor(e)&&this.getCaptionsFor(e).status===me["f"].SUCCESS))).length),0)}get uncaptionedPublishedLectureProgress(){return`${this.completedLecturesCount}/${this.publishedLectureCount}`}get localeTitles(){return this.localeList.reduce(((e,t)=>{e[t.locale]=gettext(t.english_title);return e}),{})}get captionedLocaleList(){return Object.keys(this.translationRecords).reduce(((e,t)=>{e.push(t);return e}),[]).sort(((e,t)=>{const r=this.localeTitles[e];const n=this.localeTitles[t];return r<n?-1:r>n?1:0}))}get isDefaultLocale(){return this.currentLocaleId===this.defaultLocaleId}get translationRecord(){return this.translationRecords&&this.translationRecords[this.currentLocaleId]}get translatedRecordAlertCode(){if(!this.translationRecord){return}if(this.translationRecord.availability===T.RESTRICTED){if(this.isLanguageCourse){if(!this.hasSeenAlert(h["a"].ids.courseTranslationDisabledLanguageCat)){return D.DISABLED_LANGUAGE_CATEGORY}}else if(!this.translationRecord.caption_confidence_above_threshold){if(!this.hasSeenAlert(h["a"].ids.courseTranslationLowConfidence)){return D.LOW_QUALITY}}return D.DISABLED}if(this.translationRecord.availability===T.PUBLIC){if(this.translationRecord.manual_caption_coverage===1){if(!this.hasSeenAlert(h["a"].ids.courseTranslationManualCoverage)){return D.MANUAL_COVERAGE}}else if(this.translationRecord.auto_caption_coverage===1){if(!this.hasSeenAlert(h["a"].ids.courseTranslationAutoCoverage)){return D.AUTO_COVERAGE}}}}get translationStatus(){return this.translationRecords[this.currentLocaleId]||{}}get autoTranslatedCaptionMessage(){if(this.translationStatus.has_autogenerated_captions&&!this.isDefaultLocale){return D.AUTO_TRANSLATED_CAPTIONS}}get autoTranslatedCaptionFailedMessage(){if(!this.isDefaultLocale&&this.isAutoTranslateLocale&&this.translationStatus.has_autogenerated_captions&&this.translationStatus.auto_caption_coverage<1){return D.INCOMPLETE_AUTO_TRANSLATED_CAPTIONS}}get autoGeneratedCaptionInstructions(){if(this.course&&!this.course.is_published&&!this.isUfbCourse&&this.isDefaultLocale&&this.isAutoTranscriptLocale&&this.completedLecturesCount<this.publishedLectureCount){return D.AUTO_GENERATED_CAPTION_INSTRUCTIONS}return null}get nonAutoCaptionedInstructions(){if(this.course&&this.isDefaultLocale&&(!this.isAutoTranscriptLocale||this.isUfbCourse)){return D.REACH_MORE_STUDENT_WITH_CAPTIONS}return null}get newlyAddedLanguageMessage(){if(this.course&&!this.isDefaultLocale&&this.completedLecturesCount===0&&!this.isAutoTranscriptLocale){return D.REACH_MORE_STUDENT_WITH_TRANSLATED_CAPTIONS}}get alertCodes(){return[this.autoGeneratedCaptionInstructions,this.nonAutoCaptionedInstructions,this.autoTranslatedCaptionMessage,this.autoTranslatedCaptionFailedMessage,this.translatedRecordAlertCode,this.newlyAddedLanguageMessage].filter((e=>e))}get filteredLocaleList(){return this.localeList.filter((e=>!this.captionedLocaleList.find((t=>t===e.locale))))}get filteredCounts(){return{[j.UNCAPTIONED]:this.uncaptionedVideosCount,[j.LOW_QUALITY]:this.lowQualityCount,[j.AUTOCAPTIONED]:this.autocaptionedCount}}get isLoaded(){return this.currentLanguageLoaded&&this.lecturesLoaded}get lecturesById(){return this.curriculumList.reduce(((e,t)=>{t.items.forEach((t=>{e[t.id]=t}));return e}),{})}get completedLecturesCount(){return this.publishedLectureCount-this.uncaptionedPublishedLectureCount}get currentCountryCode(){return this.currentLocaleId.split("_")[0]}get isAutoTranscriptLocale(){return _.includes(this.currentCountryCode)}get isAutoTranslateLocale(){return x.includes(this.currentCountryCode)}get currentLocaleTitle(){return this.localeTitles[this.currentLocaleId]}get isUfbCourse(){return this.course&&this.course.organization_id}},Qn=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"activeTab",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return j.ALL}}),Jn=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"currentLanguageLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Zn=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"lecturesLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ei=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isLanguageCourse",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ti=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"curriculumList",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),ri=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"localeList",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),ni=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"defaultLocaleId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),ii=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"currentLocaleId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),oi=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"translationRecords",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),ai=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"togglingAvailability",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),si=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isBulkDownloadModalVisible",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),li=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"seenSystemMessages",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),ci=babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isEditorFeedbackSurveyVisible",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_setupUploadStatus",[he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_setupUploadStatus"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"setEditorUrlFormat",[he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"setEditorUrlFormat"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"setActiveTab",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"setActiveTab"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_setContentAsLoaded",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_setContentAsLoaded"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"setLocale",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"setLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"addNewLocale",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"addNewLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"removeLocale",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"removeLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"setInitialLocaleId",[he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"setInitialLocaleId"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchCaptions",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchCaptions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchDraftCaptions",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchDraftCaptions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"refreshCaptions",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"refreshCaptions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"updateCaptionStatusByDraftCaptions",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"updateCaptionStatusByDraftCaptions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"prepareCaptionFromDraftCaption",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"prepareCaptionFromDraftCaption"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"removeCaptionsForLocale",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"removeCaptionsForLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"groupCaptionsById",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"groupCaptionsById"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchCourse",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchCourse"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchSeenMessages",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchSeenMessages"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchTranslations",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchTranslations"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchCurriculumItems",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchCurriculumItems"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"loadCaptionsAndCurriculumItems",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"loadCaptionsAndCurriculumItems"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"fetchLocales",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"fetchLocales"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_setupLocale",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_setupLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_setupPromoCaptions",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_setupPromoCaptions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createPromoLecture",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createPromoLecture"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_setupTranslationRecord",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_setupTranslationRecord"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createCurriculumItems",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createCurriculumItems"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"loadLecturesAndCaptions",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"loadLecturesAndCaptions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"toggleAvailability",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"toggleAvailability"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"dismissSystemMessageAlert",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"dismissSystemMessageAlert"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"deleteCaption",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"deleteCaption"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"openBulkDownloadModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"openBulkDownloadModal"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"closeBulkDownloadModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"closeBulkDownloadModal"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"triggerBulkDownload",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"triggerBulkDownload"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createDelayCompleteFn",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createDelayCompleteFn"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createUploadCompleteFn",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createUploadCompleteFn"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createProcessCompleteFn",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createProcessCompleteFn"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createOnErrorFn",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createOnErrorFn"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"_createOnProgressFn",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"_createOnProgressFn"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"startUpload",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"startUpload"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"replaceCaption",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"replaceCaption"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"refreshCaption",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"refreshCaption"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"uncaptionedVideoFilter",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"uncaptionedVideoFilter"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"autocaptionedFilter",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"autocaptionedFilter"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"lowQualityFilter",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"lowQualityFilter"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"addControlledEditorCloseFn",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"addControlledEditorCloseFn"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"openSurvey",[f["a"]],Object.getOwnPropertyDescriptor(Yn.prototype,"openSurvey"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"showEditorFeedbackSurvey",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"showEditorFeedbackSurvey"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"hideEditorFeedbackSurvey",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"hideEditorFeedbackSurvey"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"onEditorFeedbackSurveySubmit",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Yn.prototype,"onEditorFeedbackSurveySubmit"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"publishedLectureCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"publishedLectureCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"lectureCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"lectureCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"uncaptionedVideosCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"uncaptionedVideosCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"lowQualityCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"lowQualityCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"autocaptionedCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"autocaptionedCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"uncaptionedPublishedLectureCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"uncaptionedPublishedLectureCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"uncaptionedPublishedLectureProgress",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"uncaptionedPublishedLectureProgress"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"localeTitles",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"localeTitles"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"captionedLocaleList",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"captionedLocaleList"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isDefaultLocale",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"isDefaultLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"translationRecord",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"translationRecord"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"translatedRecordAlertCode",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"translatedRecordAlertCode"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"autoTranslatedCaptionMessage",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"autoTranslatedCaptionMessage"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"autoTranslatedCaptionFailedMessage",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"autoTranslatedCaptionFailedMessage"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"autoGeneratedCaptionInstructions",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"autoGeneratedCaptionInstructions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"nonAutoCaptionedInstructions",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"nonAutoCaptionedInstructions"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"filteredLocaleList",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"filteredLocaleList"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"filteredCounts",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"filteredCounts"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isLoaded",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"isLoaded"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"lecturesById",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"lecturesById"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"completedLecturesCount",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"completedLecturesCount"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"currentCountryCode",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"currentCountryCode"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isAutoTranscriptLocale",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"isAutoTranscriptLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isAutoTranslateLocale",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"isAutoTranslateLocale"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"currentLocaleTitle",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"currentLocaleTitle"),Yn.prototype),babelHelpers.applyDecoratedDescriptor(Yn.prototype,"isUfbCourse",[he["g"]],Object.getOwnPropertyDescriptor(Yn.prototype,"isUfbCourse"),Yn.prototype),Yn);class di extends s["Component"]{constructor(e){super(e);this.relativePath="/captions";this.store=new pi(e.courseId,e.awsAccessKey,e.bucketUrl,this.relativePath)}componentDidMount(){this.store.loadLecturesAndCaptions();h["a"].seen(h["a"].ids.captionManagePage)}render(){return l.a.createElement(i["c"],{store:this.store},l.a.createElement("div",null,l.a.createElement(Xn,null),l.a.createElement(d["a"],null,l.a.createElement(c["c"],{path:`${this.relativePath}/:localeId?/`,component:yn}))))}}di.propTypes={courseId:a.a.number.isRequired,awsAccessKey:a.a.string.isRequired,bucketUrl:a.a.string.isRequired};var hi=r("./src/udemy/js/utils/ud-render-react-components.js");var mi=r("./src/udemy/js/utils/mobx.js");const fi=Object.freeze({ordering:"-created",page:1,page_size:10,search:"",show_inactive:false});const gi=Object.freeze({"fields[course]":xi().join(","),"fields[course_feature]":"promotions_create"});const yi=xi();const bi=Object.freeze({"fields[course]":Di().join(",")});const vi="usd";const wi="";const Ei=Object.freeze({initial:"initial",loading:"loading",loaded:"loaded"});const Si=gettext("No coupon found");const _i={CODE:{name:"code",label:gettext("Code")},DISCOUNT:{name:"discount_value",label:gettext("Discount")},USES:{name:"number_of_uses",mobile:{label:gettext("Remaining redemptions")},desktop:{label:gettext("Redemptions")}},CREATED:{name:"created",label:gettext("Start date")},ENDTIME:{name:"end_time",mobile:{label:gettext("End date")},desktop:{valid:{label:gettext("Time remaining")},invalid:{label:gettext("End date")}}},LINK:{name:"link",mobile:{label:null},desktop:{label:gettext("Link")}},STATUS:{name:"is_disabled",label:gettext("Status")}};function xi(){return Di().concat(["_class","features","id","is_published","published_time","is_practice_test_course","num_published_practice_tests","is_owner","owner_is_premium_instructor","url"])}function Di(){return["base_price_detail","is_paid","min_price","num_paid_switches","price_updated_date"]}const Ci=Object.freeze({loading:"loading",coupon_type:"coupon_type",coupon_details:"coupon_details",review_coupon:"review_coupon",creation_success:"creation_success"});const Ti=Object.freeze({urgency_discount:{name:"urgency_discount",label:gettext("Current best price"),redemption_info:gettext("Unlimited redemptions"),tooltip:gettext("This coupon matches the lowest price Udemy would offer any student for this course at the time you create the coupon."),type:"paid",version:"urgency"},long_discount:{name:"long_discount",label:gettext("Custom price"),redemption_info:gettext("Unlimited redemptions"),tooltip:gettext("The lower bound of this range represents a typical promotional price Udemy might offer. It maybe higher or lower than the Udemy sale price on a given day."),type:"paid",version:"long"},urgency_free:{name:"urgency_free",label:gettext("Free: Open"),type:"free",version:"urgency"},scarcity_free:{name:"scarcity_free",label:gettext("Free: Targeted"),type:"free",version:"scarcity"}});const Oi=Object.freeze({0:gettext("Invalid parameters."),1:gettext("You don't have permission to validate coupons for this course."),2:gettext("Incorrect course id."),3:gettext('Your coupon code must be between 6 and 20 characters, and contain only CAPITAL letters (A-Z), numbers (0-9), periods ("."), dashes ("-") and underscores ("_")'),4:gettext("That coupon code has already been used."),5:gettext("Incorrect price format of coupon."),6:gettext("Incorrect type of coupon."),7:gettext("This coupon has an invalid price."),8:gettext("This coupon code is reserved. Please try a different code."),9:gettext("Date format is invalid."),10:gettext("Start date cannot be in the past."),11:gettext("Start date cannot be beyond the current month.")});var ki,Pi;let Ai=(ki=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"loadingState",Pi,this);Object(mi["b"])(this,{id:e},yi)}get basePriceAmount(){if(this.base_price_detail){return parseFloat(this.base_price_detail.amount)}return 0}get basePriceCurrencyCode(){if(this.base_price_detail){return this.base_price_detail.currency.toLowerCase()}return vi}load(){if(this.loadingState!==Ei.initial){return this._loadCoursePromise}this.loadingState=Ei.loading;this._loadCoursePromise=Qe["f"].get(`/courses/${this.id}/`,{params:gi}).then(Object(he["e"])((e=>{Object(mi["b"])(this,e.data,yi);this.loadingState=Ei.loaded}))).catch(Object(he["e"])((()=>{this.loadingState=Ei.initial})));return this._loadCoursePromise}updatePrice(e){let{amount:t,currency:r}=e;return Qe["f"].request(`/courses/${this.id}/`,{method:"patch",params:bi,data:{price_money:{amount:t,currency:r}}}).then(Object(he["e"])((e=>{Object(mi["b"])(this,e.data,yi)})))}},Pi=babelHelpers.applyDecoratedDescriptor(ki.prototype,"loadingState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return Ei.initial}}),babelHelpers.applyDecoratedDescriptor(ki.prototype,"basePriceAmount",[he["g"]],Object.getOwnPropertyDescriptor(ki.prototype,"basePriceAmount"),ki.prototype),babelHelpers.applyDecoratedDescriptor(ki.prototype,"load",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ki.prototype,"load"),ki.prototype),babelHelpers.applyDecoratedDescriptor(ki.prototype,"updatePrice",[f["a"]],Object.getOwnPropertyDescriptor(ki.prototype,"updatePrice"),ki.prototype),ki);var Ii=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var ji=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var Ri=r("./src/udemy/js/base-components/responsive/match-media.react-component.tsx");var Ni=r("./src/udemy/js/base-components/ungraduated/form/text-input/text-input-with-addons.react-component.js");var Li=r("./src/udemy/js/instructor/variables.js");var Mi=r("./node_modules/clipboard/dist/clipboard.js");var qi=r.n(Mi);var Ui=r("./src/udemy/js/instructor/toasts.js");const Hi=()=>Object(Ui["c"])(gettext("Copied to clipboard"));const Fi=()=>Object(Ui["a"])(gettext("Unable to copy to clipboard"));class Bi extends s["Component"]{constructor(e){super(e);this.id=Object(Ee["a"])("copy-button");this.clipboard=new qi.a(`#${this.id}`);this.clipboard.on("success",this.props.onSuccess);this.clipboard.on("error",this.props.onError)}componentWillUnmount(){this.clipboard.destroy()}render(){const{onSuccess:e,onError:t,...r}=this.props;return l.a.createElement(le["a"],Object.assign({},r,{id:this.id}))}}Bi.propTypes={onSuccess:a.a.func,onError:a.a.func};Bi.defaultProps={onSuccess:Hi,onError:Fi};var zi=r("./node_modules/@udemy/react-form-components/dist/esm/form-group-variants/toggle-input-block-form-group.react-component.js");var Vi=r("./node_modules/@udemy/react-form-components/dist/esm/radio/radio-block.react-component.js");var Wi=r("./node_modules/@udemy/react-form-components/dist/esm/date-picker/date-picker.react-component.js");var Gi=r("./node_modules/@udemy/react-form-components/dist/esm/time-picker/time-picker.react-component.js");var Ki=r("./node_modules/@udemy/react-popup-components/dist/esm/tooltip/tooltip.react-component.js");var $i=r("./src/udemy/js/base-components/price-text/formatted-currency.react-component.tsx");var Xi=r("./src/udemy/js/utils/get-request-data.js");const Yi=()=>Object(Xi["a"])().locale.replace("_","-")||"en-US";function Qi(e){const t=e instanceof Date?e:new Date(e);return t.toLocaleDateString(Yi(),{month:"long"})}function Ji(e){const t=e instanceof Date?e:new Date(e);const r={year:"numeric",month:"2-digit",day:"2-digit"};return t.toLocaleDateString(Yi(),r)}function Zi(e,t){const r={tzOffset:true,year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",...t};const{tzOffset:n,year:i,month:o,day:a,hour:s,minute:l}=r;const c=e.toLocaleDateString(Yi(),{year:i,month:o,day:a});const u=e.toLocaleTimeString(Yi(),{hour:s,minute:l});const p=e.pacificTimezoneOffset/60;const d=p===7?"PDT":"PST";const h=n?`(GMT -${p})`:"";return`${c} ${u} ${d} ${h}`.trim()}function eo(e){return Zi(e,{month:"long",day:"numeric",tzOffset:false})}var to=r("./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupon-creation-modal.less");var ro,no,io,oo;let ao=(ro=Object(i["e"])("couponsStore"),ro(no=Object(i["f"])(no=(io=(oo=class e extends s["Component"]{constructor(e){super(e);this.couponCodeInputId=Object(Ee["a"])("coupon-code-input");this.couponLinkInputId=Object(Ee["a"])("coupon-link-input")}updateCouponCreationInfo(e){let{currentTarget:t}=e;this.props.couponsStore.initializeCouponInfo(t.value)}updateCouponCode(e){let{target:t}=e;this.props.couponsStore.setCouponCode(t.value.toUpperCase());this.props.couponsStore.checkInvalidChars()}updateCouponPrice(e){let{target:t}=e;this.props.couponsStore.setCouponPrice(parseFloat(t.value))}updateCouponStartDate(e){this.props.couponsStore.setCouponStartDate(e)}updateCouponStartTime(e){let{target:t}=e;this.props.couponsStore.setCouponStartTime(t.value)}renderTooltipIcon(e){const t=l.a.createElement(ye.a,{label:gettext("Get info")});return l.a.createElement(Ki["a"],{placement:"bottom",trigger:t,className:"coupon-creation-modal--tooltip-icon--2HiiL"},e)}renderCouponDetailBody(){const e=Ti.urgency_discount;const t=Ti.long_discount;const r=Ti.urgency_free;const n=Ti.scarcity_free;const i=this.props.couponsStore;const o=i.couponCreationModalCurrentState;const a=this.props.couponsStore.currencyFormat;return l.a.createElement(l.a.Fragment,null,l.a.createElement(zi["a"],{label:gettext("Pick a coupon type")},i.disablePaidCoupons&&l.a.createElement(b["a"],{showCta:false,className:"coupon-creation-modal--alert-banner--2o1Ts",title:gettext("Coupon prices can't be higher than list price")}),l.a.createElement("div",{className:"coupon-creation-modal--coupon-options--Lq6kf"},l.a.createElement("div",{className:"coupon-creation-modal--coupon-option--1Bnje"},l.a.createElement(Vi["a"],{name:"coupon-type",value:e.name,checked:i.couponTypeSelection===e.name,onChange:this.updateCouponCreationInfo,disabled:i.disablePaidCoupons},l.a.createElement("span",{className:"coupon-creation-modal--block--1TDNp coupon-creation-modal--text-with-tooltip-icon--20Ba2"},l.a.createElement("span",null,e.label),this.renderTooltipIcon(e.tooltip)),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp coupon-creation-modal--mt-xxs--2p0Mm"},l.a.createElement($i["a"],Object.assign({value:i.couponDiscountUrgencyMinPrice},a))),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp"},e.redemption_info),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp"},ninterpolate("Expires in %s day","Expires in %s days",i.couponDiscountUrgencyDuration)))),l.a.createElement("div",{className:"coupon-creation-modal--coupon-option--1Bnje"},l.a.createElement(Vi["a"],{name:"coupon-type",value:t.name,checked:i.couponTypeSelection===t.name,onChange:this.updateCouponCreationInfo,disabled:i.disablePaidCoupons},l.a.createElement("span",{className:"coupon-creation-modal--block--1TDNp coupon-creation-modal--text-with-tooltip-icon--20Ba2"},l.a.createElement("span",null,t.label),this.renderTooltipIcon(t.tooltip)),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp coupon-creation-modal--mt-xxs--2p0Mm"},interpolate(gettext("Between %s and %s"),[i.formattedCouponDiscountLongPlaceholderPrice,i.formattedCouponDiscountLongMaxPrice])),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp"},t.redemption_info),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp"},ninterpolate("Expires in %s day","Expires in %s days",i.couponDiscountLongDuration)))),l.a.createElement("div",{className:"coupon-creation-modal--coupon-option--1Bnje"},l.a.createElement(Vi["a"],{name:"coupon-type",value:r.name,checked:i.couponTypeSelection===r.name,onChange:this.updateCouponCreationInfo},l.a.createElement("span",{className:"coupon-creation-modal--block--1TDNp"},interpolate(r.label,[i.couponFreeUrgencyDuration])),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp coupon-creation-modal--mt-sm--1IUWc"},ninterpolate("%s redemption","%s redemptions",i.couponFreeUrgencyMaximumUses)),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp"},ninterpolate("Expires in %s day","Expires in %s days",i.couponFreeUrgencyDuration)))),l.a.createElement("div",{className:"coupon-creation-modal--coupon-option--1Bnje"},l.a.createElement(Vi["a"],{name:"coupon-type",value:n.name,checked:i.couponTypeSelection===n.name,onChange:this.updateCouponCreationInfo},l.a.createElement("span",{className:"coupon-creation-modal--block--1TDNp"},interpolate(n.label,[i.couponFreeScarcityDuration])),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp coupon-creation-modal--mt-sm--1IUWc"},ninterpolate("%s redemption","%s redemptions",i.couponFreeScarcityMaximumUses)),l.a.createElement("span",{className:"ud-text-sm coupon-creation-modal--block--1TDNp"},ninterpolate("Expires in %s day","Expires in %s days",i.couponFreeScarcityDuration)))))),o===Ci.coupon_details&&l.a.createElement(l.a.Fragment,null,e.name===i.couponTypeSelection&&l.a.createElement(l.a.Fragment,{key:e.name},l.a.createElement("div",{className:"ud-heading-lg coupon-creation-modal--mt-sm--1IUWc"},gettext("Price")),l.a.createElement("div",{className:"ud-heading-lg coupon-creation-modal--mt-xs--2wKK3"},l.a.createElement($i["a"],Object.assign({value:i.couponPrice},a)))),t.name===i.couponTypeSelection&&l.a.createElement(l.a.Fragment,{key:t.name},l.a.createElement(ji["b"],{className:"coupon-creation-modal--mt-sm--1IUWc",label:gettext("Set your price"),labelProps:{typography:"ud-heading-lg"},validationState:i.couponPriceValidationState,note:i.couponPriceErrorMessage||interpolate(gettext("Set a price between %s and %s"),[i.formattedCouponDiscountLongPlaceholderPrice,i.formattedCouponDiscountLongMaxPrice])},l.a.createElement(Ii["b"],{type:"number",placeholder:i.couponDiscountLongPlaceholderPrice,onChange:this.updateCouponPrice}))),l.a.createElement(ji["b"],{className:"coupon-creation-modal--mt-sm--1IUWc",udStyle:"fieldset",label:l.a.createElement("span",{className:"coupon-creation-modal--text-with-tooltip-icon--20Ba2"},l.a.createElement("span",null,gettext("Start date")),this.renderTooltipIcon(gettext("Time and hour is in Pacific Standard Time (PST). Start date can be selected only within the current month."))),labelProps:{typography:"ud-heading-md"},validationState:i.couponStartDateValidationState,note:i.couponStartDateErrorMessage},l.a.createElement("div",{className:"coupon-creation-modal--datetime-inputs--NF567"},l.a.createElement(ji["b"],{label:gettext("Date"),labelProps:{className:"ud-sr-only"}},l.a.createElement(Wi["a"],{min:i.today,max:i.currentMonthEndDate,value:i.couponStartDate,onChange:this.updateCouponStartDate,size:"medium",popoverPlacement:"top-start","data-purpose":"coupon-start-date"})),l.a.createElement(ji["b"],{label:gettext("Time"),labelProps:{className:"ud-sr-only"}},l.a.createElement(Gi["a"],{value:i.couponStartTime,onChange:this.updateCouponStartTime,size:"medium","data-purpose":"coupon-start-time"})))),l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("End date")),l.a.createElement("div",{className:"coupon-creation-modal--mt-xs--2wKK3"},eo(i.couponEndDate)),l.a.createElement(ji["b"],{className:"coupon-creation-modal--mt-sm--1IUWc",label:gettext("Edit your coupon code"),labelProps:{tag:gettext("Optional"),typography:"ud-heading-md"},validationState:i.couponCodeValidationState,note:i.couponCodeErrorMessage||gettext('Your coupon code must be between 6 and 20 characters. It can only contain alphanumeric characters (A-Z, 0-9), periods ("."), dashes ("-") or underscores ("_")')},l.a.createElement(Ii["b"],{value:i.couponCode,onChange:this.updateCouponCode})),l.a.createElement(ze["a"],null,l.a.createElement(le["a"],{disabled:o===Ci.coupon_type,onClick:i.submitCouponForReview},gettext("Review coupon")))))}renderCouponReviewBody(){const e=Ti.urgency_discount;const t=Ti.long_discount;const r=Ti.urgency_free;const n=Ti.scarcity_free;const i=this.props.couponsStore;const o=this.props.couponsStore.paidCouponTypes;const a=this.props.couponsStore.freeCouponTypes;const s=this.props.couponsStore.currencyFormat;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"ud-heading-md"},gettext("Coupon code")),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xs--2wKK3"},i.couponCode),e.name===i.couponTypeSelection&&l.a.createElement(l.a.Fragment,{key:e.name},l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("Details")),l.a.createElement("div",{className:"ud-text-sm ud-text-bold coupon-creation-modal--mt-xs--2wKK3"},`${e.label}: `,l.a.createElement($i["a"],Object.assign({value:i.couponPrice},s))),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},e.redemption_info),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},ninterpolate("Expires in %s day","Expires in %s days",o[e.version].duration))),t.name===i.couponTypeSelection&&l.a.createElement(l.a.Fragment,{key:t.name},l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("Details")),l.a.createElement("div",{className:"ud-text-sm ud-text-bold coupon-creation-modal--mt-xs--2wKK3"},`${t.label}: `,l.a.createElement($i["a"],Object.assign({value:i.couponPrice},s))),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},t.redemption_info),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},ninterpolate("Expires in %s day","Expires in %s days",o[t.version].duration))),r.name===i.couponTypeSelection&&l.a.createElement(l.a.Fragment,{key:r.name},l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("Details")),l.a.createElement("div",{className:"ud-text-sm ud-text-bold coupon-creation-modal--mt-xs--2wKK3"},r.label),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},ninterpolate("%s redemption","%s redemptions",i.couponFreeUrgencyMaximumUses)),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},ninterpolate("Expires in %s day","Expires in %s days",a[r.version].duration))),n.name===i.couponTypeSelection&&l.a.createElement(l.a.Fragment,{key:n.name},l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("Details")),l.a.createElement("div",{className:"ud-text-sm ud-text-bold coupon-creation-modal--mt-xs--2wKK3"},n.label),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},ninterpolate("%s redemption","%s redemptions",i.couponFreeScarcityMaximumUses)),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xxs--2p0Mm"},ninterpolate("Expires in %s day","Expires in %s days",a[n.version].duration))),l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("Start date")),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xs--2wKK3"},eo(i.couponStartDate)),l.a.createElement("div",{className:"ud-heading-md coupon-creation-modal--mt-sm--1IUWc"},gettext("End date")),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xs--2wKK3"},eo(i.couponEndDate)),l.a.createElement(ze["a"],null,l.a.createElement("div",{className:"coupon-creation-modal--left-right-buttons--gX9Ij"},l.a.createElement(le["a"],{onClick:i.editCoupon,udStyle:"secondary"},gettext("Edit coupon")),l.a.createElement(le["a"],{onClick:i.createCoupon},gettext("Create coupon")))))}renderCouponSuccessBody(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"ud-heading-lg coupon-creation-modal--text-center--Qco18"},gettext("Your coupon is now scheduled")),l.a.createElement("div",{className:"ud-text-sm coupon-creation-modal--mt-xs--2wKK3 coupon-creation-modal--text-center--Qco18"},gettext("Share your coupons with the following links")),l.a.createElement(ji["b"],{className:"coupon-creation-modal--mt-sm--1IUWc",label:gettext("Code"),formControlId:this.couponCodeInputId},l.a.createElement(Ni["a"],null,l.a.createElement(Ii["b"],{readOnly:true,value:this.props.couponsStore.finalCoupon,"data-purpose":"coupon-code-input"}),l.a.createElement(Ni["a"].Addon,{componentClass:Bi,udStyle:"secondary","data-clipboard-target":`#${this.couponCodeInputId}`},gettext("Copy")))),l.a.createElement(ji["b"],{className:"coupon-creation-modal--mt-sm--1IUWc",label:gettext("Link"),formControlId:this.couponLinkInputId},l.a.createElement(Ni["a"],null,l.a.createElement(Ii["b"],{readOnly:true,value:this.props.couponsStore.couponUrl,"data-purpose":"coupon-link-input"}),l.a.createElement(Ni["a"].Addon,{componentClass:Bi,"data-clipboard-target":`#${this.couponLinkInputId}`,udStyle:"secondary"},gettext("Copy")))))}render(){const e=this.props.couponsStore.couponCreationModalCurrentState;const t=this.props.couponsStore.couponMetadata.remaining_coupon_count;let r,n;if(e===Ci.loading){r=l.a.createElement("span",{className:"ud-sr-only"},gettext("Loading"));n=l.a.createElement(v["b"],{className:"coupon-creation-modal--loader--icSpJ"})}else if(e===Ci.coupon_type||e===Ci.coupon_details){r=l.a.createElement(l.a.Fragment,null,gettext("Create a new coupon"),l.a.createElement("span",{className:"ud-text-md coupon-creation-modal--block--1TDNp coupon-creation-modal--mt-xs--2wKK3"},ninterpolate("You can create %(couponCount)s new coupon until the end of %(month)s","You can create %(couponCount)s more coupons until the end of %(month)s",t,{couponCount:t,month:this.props.couponsStore.currentMonth})));n=this.renderCouponDetailBody()}else if(e===Ci.review_coupon){r=l.a.createElement(l.a.Fragment,null,gettext("Review your coupon details"),l.a.createElement("span",{className:"ud-text-md coupon-creation-modal--block--1TDNp coupon-creation-modal--mt-xs--2wKK3"},gettext("You won't be able to make changes once you create the coupon")));n=this.renderCouponReviewBody()}else if(e===Ci.creation_success){r=gettext("Congratulations!");n=this.renderCouponSuccessBody()}return l.a.createElement(Fe["a"],{isOpen:this.props.couponsStore.isCouponCreationModalOpen,onClose:this.props.couponsStore.closeCouponCreationModal,title:r},n)}},oo.propTypes={couponsStore:a.a.object.isRequired},oo),babelHelpers.applyDecoratedDescriptor(io.prototype,"updateCouponCreationInfo",[f["a"]],Object.getOwnPropertyDescriptor(io.prototype,"updateCouponCreationInfo"),io.prototype),babelHelpers.applyDecoratedDescriptor(io.prototype,"updateCouponCode",[f["a"]],Object.getOwnPropertyDescriptor(io.prototype,"updateCouponCode"),io.prototype),babelHelpers.applyDecoratedDescriptor(io.prototype,"updateCouponPrice",[f["a"]],Object.getOwnPropertyDescriptor(io.prototype,"updateCouponPrice"),io.prototype),babelHelpers.applyDecoratedDescriptor(io.prototype,"updateCouponStartDate",[f["a"]],Object.getOwnPropertyDescriptor(io.prototype,"updateCouponStartDate"),io.prototype),babelHelpers.applyDecoratedDescriptor(io.prototype,"updateCouponStartTime",[f["a"]],Object.getOwnPropertyDescriptor(io.prototype,"updateCouponStartTime"),io.prototype),io))||no)||no);var so=r("./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupon-creation.less");var lo,co,uo,po;let ho=(lo=Object(i["e"])("couponsStore"),lo(co=Object(i["f"])(co=(uo=(po=class e extends s["Component"]{openCouponCreationModal(){this.props.couponsStore.openCouponCreationModal()}render(){if(this.props.couponsStore.isLoading){return null}const e=this.props.couponsStore.couponMetadata.remaining_coupon_count;const t=this.props.couponsStore.disableCouponCreation;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"coupon-creation--create-coupon-container--kKUuq"},l.a.createElement("p",{className:"ud-heading-md"},interpolate(gettext("%s coupons"),[this.props.couponsStore.currentMonth])),l.a.createElement("div",{className:"coupon-creation--coupons-remaining--2uFXB"},l.a.createElement("p",{className:"ud-text-lg","data-purpose":"coupons-creation-remaining"},t?gettext("You cannot create coupons for a free course"):e===0?gettext("You created all your coupons this month. "+"To promote your course, use the referral link "+"or any active coupon."):ninterpolate("You can create %s more coupon this month.","You can create %s more coupons this month.",e)),e>0&&t===false&&l.a.createElement(le["a"],{className:"coupon-creation--create-coupon-button--2WUcw",onClick:this.openCouponCreationModal},gettext("Create new coupon")))),l.a.createElement(ao,null))}},po.propTypes={couponsStore:a.a.object.isRequired},po),babelHelpers.applyDecoratedDescriptor(uo.prototype,"openCouponCreationModal",[f["a"]],Object.getOwnPropertyDescriptor(uo.prototype,"openCouponCreationModal"),uo.prototype),uo))||co)||co);var mo=r("./node_modules/@udemy/react-navigation-components/dist/esm/pagination/pagination.react-component.js");var fo=r("./node_modules/@udemy/react-structure-components/dist/esm/table/table.react-component.js");var go=r("./src/udemy/js/utils/currency-formatter.js");var yo=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal-trigger/modal-trigger.react-component.js");var bo=r("./src/udemy/js/utils/pacific-timezone.ts");var vo,wo;const Eo=4e4;let So=(vo=class e{constructor(e,t){babelHelpers.initializerDefineProperty(this,"isUpdating",wo,this);this.courseId=e;Object(he["l"])(this,t)}get canBeEnabled(){return this.is_active&&this.can_enable_coupon}get isEnabled(){return this.canBeEnabled&&!this.is_disabled}get remainingRedemptionsText(){const e=this.maximum_uses&&this.maximum_uses!==Eo?this.maximum_uses:gettext("Unlimited");return`${this.number_of_uses} / ${e}`}get discountPercentageText(){return this.discount_percentage!==100?`${this.discount_percentage}%`:gettext("Free")}get createdText(){return Ji(this.created)}get endTimeText(){if(!this.end_time){return gettext("Indefinite")}return Ji(this.end_time)}get remainingDaysText(){if(!this.end_time){return""}const e=new Date;let t=this.start_time?new Date(this.start_time):e;if(e>t){t=e}const r=new Date(this.end_time);const n=Object(bo["d"])(r)-Object(bo["d"])(t);const i=n*60*1e3;const o=(r-t-i)/(24*3600*1e3);const a=Math.floor(Math.abs(o));const s=o<0?-1:1;return interpolate(ngettext("%s day","%s days",a),[s*a])}createdTextInPst(e){return Zi(Object(bo["a"])(this.created),e)}startTimeTextInPst(e){if(!this.start_time){return this.createdTextInPst(e)}return Zi(Object(bo["a"])(this.start_time),e)}endTimeTextInPst(e){if(!this.end_time){return gettext("Indefinite")}return Zi(Object(bo["a"])(this.end_time),e)}static exists(e){const t=`/courses/${e}/coupons-v2/`;return Qe["f"].get(t,{params:{"fields[coupon]":"id",page_size:1,show_inactive:true}}).then((e=>e.data.count>0))}static list(t,r){const n=`/courses/${t}/coupons-v2/`;return Qe["f"].get(n,r).then((r=>{r.data.results=r.data.results.map((r=>new e(t,r)));return r}))}static create(e,t){const r=`/courses/${e}/coupons-v2/`;return Qe["f"].post(r,t)}updateIsEnabledByInstructor(e){if(this.isUpdating){return Promise.resolve(this)}const t=this.is_disabled;this.is_disabled=!e;this.isUpdating=true;const r=`/courses/${this.courseId}/coupons-v2/`;return Qe["f"].request(`${r}${this.id}/`,{data:{is_disabled:this.is_disabled},method:"PATCH",params:{show_inactive:true}}).then(Object(he["e"])((()=>{this.isUpdating=false;return this}))).catch(Object(he["e"])((e=>{this.is_disabled=t;this.isUpdating=false;if(e.response&&e.response.data.detail){Object(Ui["a"])(e.response.data.detail)}else if(e.message){Object(Ui["b"])(e.message)}return this})))}},wo=babelHelpers.applyDecoratedDescriptor(vo.prototype,"isUpdating",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(vo.prototype,"canBeEnabled",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"canBeEnabled"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"isEnabled",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"isEnabled"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"remainingRedemptionsText",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"remainingRedemptionsText"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"discountPercentageText",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"discountPercentageText"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"createdText",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"createdText"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"endTimeText",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"endTimeText"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"remainingDaysText",[he["g"]],Object.getOwnPropertyDescriptor(vo.prototype,"remainingDaysText"),vo.prototype),babelHelpers.applyDecoratedDescriptor(vo.prototype,"updateIsEnabledByInstructor",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(vo.prototype,"updateIsEnabledByInstructor"),vo.prototype),vo);var _o=r("./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupons-table/coupon-code-link.less");var xo,Do,Co,To;let Oo=Object(i["f"])(xo=(Do=(To=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"isCouponCodeCopied",Co,this)}onCopySuccess(){this.isCouponCodeCopied=true}onCopyError(){this.isCouponCodeCopied=false}renderSuccessMessage(){if(this.isCouponCodeCopied){return l.a.createElement("p",{className:"coupon-code-link--success-text--18th-","data-purpose":"coupon-code-link-success-text"},l.a.createElement(oe.a,{color:"inherit",label:false,className:"coupon-code-link--success-icon--26K8w"}),gettext("Link copied to clipboard"))}}render(){const{coupon:e,courseUrl:t,label:r,...n}=this.props;let i=new URL(g["a"].to(t));i.searchParams.set("couponCode",e.code);i=i.toString();return l.a.createElement(yo["a"],{trigger:l.a.createElement(Bi,Object.assign({"data-clipboard-text":i,"data-purpose":"coupon-code-link",onClick:this.showModal,onSuccess:this.onCopySuccess,onError:this.onCopyError,title:gettext("Get a shareable link to your course with this coupon code applied to it")},n),r),renderModal:e=>l.a.createElement(Fe["a"],Object.assign({},e,{title:gettext("Link for Coupon")}),l.a.createElement(ji["b"],{label:gettext("Link for Coupon"),labelProps:{className:"ud-sr-only"}},l.a.createElement(Ii["b"],{readOnly:true,value:i})),this.renderSuccessMessage())})}},To.propTypes={coupon:a.a.instanceOf(So).isRequired,courseUrl:a.a.string.isRequired,label:a.a.string},To.defaultProps={className:"",label:gettext("Share coupon")},To),Co=babelHelpers.applyDecoratedDescriptor(Do.prototype,"isCouponCodeCopied",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Do.prototype,"onCopySuccess",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Do.prototype,"onCopySuccess"),Do.prototype),babelHelpers.applyDecoratedDescriptor(Do.prototype,"onCopyError",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Do.prototype,"onCopyError"),Do.prototype),Do))||xo;var ko=r("./node_modules/@udemy/react-form-components/dist/esm/switch/switch.react-component.js");var Po,Ao,Io;let jo=Object(i["f"])(Po=(Ao=(Io=class e extends s["Component"]{onChange(e){this.props.coupon.updateIsEnabledByInstructor(e.target.checked)}render(){const e=this.props.course.features.promotions_create;const t=this.props.course.is_paid;const r=this.props.coupon.canBeEnabled&&t&&e;const n=this.props.coupon.isEnabled&&t&&e;let i;if(n){i=gettext("Enabled")}else{i=gettext("Disabled")}return l.a.createElement(ko["a"],{checked:n,className:this.props.className,"data-purpose":"enable-coupon-toggler",disabled:!r||this.props.coupon.isUpdating,onChange:this.onChange,size:"large"},l.a.createElement("span",{className:"ud-sr-only"},i))}},Io.propTypes={className:a.a.string,coupon:a.a.instanceOf(So).isRequired,course:a.a.object.isRequired},Io.defaultProps={className:""},Io),babelHelpers.applyDecoratedDescriptor(Ao.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(Ao.prototype,"onChange"),Ao.prototype),Ao))||Po;var Ro=r("./node_modules/@udemy/icons/dist/search.ud-icon");var No=r.n(Ro);var Lo=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-form.react-component.js");var Mo,qo,Uo,Ho;let Fo=(Mo=Object(i["e"])("couponsStore"),Mo(qo=Object(i["f"])(qo=(Uo=(Ho=class e extends s["Component"]{onChange(e){this.props.couponsStore.setSearch(e.target.value)}render(){return l.a.createElement(ji["b"],{label:gettext("Search coupon code"),labelProps:{className:"ud-sr-only"}},l.a.createElement(Lo["a"],{onSubmit:this.props.couponsStore.searchCoupons,"data-purpose":"search-form-control",onChange:this.onChange,placeholder:gettext("Search coupon code"),value:this.props.couponsStore.searchQuery,submitButtonProps:{disabled:this.props.couponsStore.isLoading},submitButtonContent:l.a.createElement(No.a,{label:gettext("Search")})}))}},Ho.propTypes={couponsStore:a.a.object.isRequired},Ho),babelHelpers.applyDecoratedDescriptor(Uo.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(Uo.prototype,"onChange"),Uo.prototype),Uo))||qo)||qo);var Bo=r("./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupons-table/desktop/coupons-desktop.less");var zo,Vo,Wo,Go;const Ko={"./coupons-desktop.less":{"title-container":"coupons-desktop--title-container--3-n3p","search-coupons":"coupons-desktop--search-coupons--1ah4z","no-results":"coupons-desktop--no-results--3F3mH","enable-coupon-toggler":"coupons-desktop--enable-coupon-toggler--2iuyo",pagination:"coupons-desktop--pagination--1F-YL",loading:"coupons-desktop--loading--3UIAg",pulse:"coupons-desktop--pulse--2vjXr"}};let $o=(zo=Object(i["e"])("couponsStore"),zo(Vo=Object(i["f"])(Vo=(Wo=(Go=class e extends s["Component"]{get items(){if(this.props.valid){return this.props.couponsStore.validCoupons}return this.props.couponsStore.filteredInvalidCoupons}get columns(){return[{fieldName:_i.CODE.name,headerName:_i.CODE.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnCode},{fieldName:_i.DISCOUNT.name,headerName:_i.DISCOUNT.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnDiscount},...this.props.valid?this.validColumns:this.invalidColumns]}get validColumns(){return[{fieldName:_i.ENDTIME.name,headerName:_i.ENDTIME.desktop.valid.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnTimeRemaining},{fieldName:_i.USES.name,headerName:_i.USES.desktop.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnRedemptions},{fieldName:_i.LINK.name,headerName:_i.LINK.desktop.label,renderMethod:this.renderCellInColumnLink},{fieldName:_i.STATUS.name,headerName:_i.STATUS.label,renderMethod:this.renderCellInColumnStatus,width:"1%"}]}get invalidColumns(){return[{fieldName:_i.CREATED.name,headerName:_i.CREATED.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnStartDate},{fieldName:_i.ENDTIME.name,headerName:_i.ENDTIME.desktop.invalid.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnEndDate},{fieldName:_i.USES.name,headerName:_i.USES.desktop.label,initialSortOrder:"ascending",renderMethod:this.renderCellInColumnRedemptions}]}get onSort(){const e=this.props.couponsStore;return this.props.valid?e.setValidOrdering:e.setInvalidOrdering}get sortBy(){const e=this.props.couponsStore;return this.props.valid?e.validSortBy:e.invalidSortBy}renderCellInColumnCode(e){return e.code}renderCellInColumnTimeRemaining(e){if(!e.end_time){return gettext("Unlimited")}return l.a.createElement("div",null,l.a.createElement("div",null,e.remainingDaysText),l.a.createElement("div",{className:"ud-text-sm"},`${gettext("Starts")} ${e.startTimeTextInPst()}`),l.a.createElement("div",{className:"ud-text-sm"},`${gettext("Expires")} ${e.endTimeTextInPst()}`))}renderCellInColumnStartDate(e){return e.createdText}renderCellInColumnEndDate(e){return e.endTimeText}renderCellInColumnLink(e){return l.a.createElement(Oo,{coupon:e,courseUrl:this.props.couponsStore.course.url,typography:"ud-text-md ud-link-underline",udStyle:"link",size:"small"})}renderCellInColumnDiscount(e){return Object(go["a"])(e.discount_value,e.discount_currency_format)}renderCellInColumnRedemptions(e){return e.remainingRedemptionsText}renderCellInColumnStatus(e){return l.a.createElement(jo,{coupon:e,course:this.props.couponsStore.course,className:"coupons-desktop--enable-coupon-toggler--2iuyo"})}renderTable(){if(this.items.length===0){return l.a.createElement("div",{className:"coupons-desktop--no-results--3F3mH"},l.a.createElement("p",null,Si))}return l.a.createElement("div",{className:er()(fr()({loading:this.props.isLoading}),Ko)},l.a.createElement(fo["a"],{noBackgroundColor:true,caption:this.props.title,columns:this.columns,rows:this.items,onSort:this.onSort,sortBy:this.sortBy}))}render(){const{valid:e,couponsStore:t,title:r}=this.props;return l.a.createElement("div",null,l.a.createElement("div",{className:"coupons-desktop--title-container--3-n3p"},l.a.createElement("h3",{className:"ud-heading-md"},r),e?l.a.createElement(le["a"],{udStyle:"link",typography:"ud-text-md ud-link-underline",componentClass:"a",href:"/instructor/multiple-coupons-creation/"},gettext("Create multiple coupons")):l.a.createElement("div",{className:"coupons-desktop--search-coupons--1ah4z","data-purpose":"coupons-search"},l.a.createElement(Fo,null))),this.renderTable(),!e&&l.a.createElement(mo["a"],{"data-purpose":"coupons-table-pagination",className:"coupons-desktop--pagination--1F-YL",onPageChange:t.setPage,activePage:t.page,pageCount:t.numPages}))}},Go.propTypes={couponsStore:a.a.object.isRequired,title:a.a.string.isRequired,valid:a.a.bool.isRequired,isLoading:a.a.bool},Go.defaultProps={isLoading:false},Go),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"items",[he["g"]],Object.getOwnPropertyDescriptor(Wo.prototype,"items"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"columns",[he["g"]],Object.getOwnPropertyDescriptor(Wo.prototype,"columns"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"validColumns",[he["g"]],Object.getOwnPropertyDescriptor(Wo.prototype,"validColumns"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"invalidColumns",[he["g"]],Object.getOwnPropertyDescriptor(Wo.prototype,"invalidColumns"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"onSort",[he["g"]],Object.getOwnPropertyDescriptor(Wo.prototype,"onSort"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"sortBy",[he["g"]],Object.getOwnPropertyDescriptor(Wo.prototype,"sortBy"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnCode",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnCode"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnTimeRemaining",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnTimeRemaining"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnStartDate",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnStartDate"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnEndDate",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnEndDate"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnLink",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnLink"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnDiscount",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnDiscount"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnRedemptions",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnRedemptions"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderCellInColumnStatus",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderCellInColumnStatus"),Wo.prototype),babelHelpers.applyDecoratedDescriptor(Wo.prototype,"renderTable",[f["a"]],Object.getOwnPropertyDescriptor(Wo.prototype,"renderTable"),Wo.prototype),Wo))||Vo)||Vo);var Xo=r("./node_modules/@udemy/react-reveal-components/dist/esm/accordion/accordion.react-component.js");var Yo=r("./src/udemy/js/course-manage-price-and-coupons/coupons/v2/components/coupons-table/mobile/coupons-mobile.less");var Qo,Jo,Zo,ea;const ta={"./coupons-mobile.less":{container:"coupons-mobile--container--3IeO4","accordion-panel":"coupons-mobile--accordion-panel--V-5wC",title:"coupons-mobile--title--3hTak","create-multiple-coupons":"coupons-mobile--create-multiple-coupons--Q5j3B","search-coupons":"coupons-mobile--search-coupons--3Vo31","coupon-link":"coupons-mobile--coupon-link--3vaxq","no-results":"coupons-mobile--no-results--1P_9K",coupon:"coupons-mobile--coupon--2s0O6",pagination:"coupons-mobile--pagination--1Ja_c",loading:"coupons-mobile--loading--1pef_",pulse:"coupons-mobile--pulse--3OpLy"}};let ra=(Qo=Object(i["e"])("couponsStore"),Qo(Jo=Object(i["f"])(Jo=(Zo=(ea=class e extends s["Component"]{get items(){if(this.props.valid){return this.props.couponsStore.validCoupons}return this.props.couponsStore.filteredInvalidCoupons}get fields(){return[{name:_i.CODE.name,label:_i.CODE.label,value:e=>e.code},{name:_i.DISCOUNT.name,label:_i.DISCOUNT.label,value:e=>Object(go["a"])(e.discount_value,e.discount_currency_format)},{name:_i.USES.name,label:_i.USES.mobile.label,value:e=>e.remainingRedemptionsText},{name:_i.CREATED.name,label:_i.CREATED.label,value:e=>e.startTimeTextInPst({tzOffset:false})},{name:_i.ENDTIME.name,label:_i.ENDTIME.mobile.label,value:e=>e.endTimeTextInPst({tzOffset:false})},...this.props.valid?this.validFields:[]]}get validFields(){return[{name:_i.LINK.name,label:_i.LINK.mobile.label,value:this.renderLinkButton}]}renderLinkButton(e){return l.a.createElement(Oo,{coupon:e,courseUrl:this.props.couponsStore.course.url,className:"coupons-mobile--coupon-link--3vaxq",udStyle:"secondary",size:"medium",label:gettext("Copy link to coupon")})}renderCoupons(){if(this.items.length===0){return l.a.createElement("p",{className:"coupons-mobile--no-results--1P_9K"},Si)}return l.a.createElement("div",{className:er()(fr()({loading:this.props.isLoading}),ta)},this.items.map(((e,t)=>l.a.createElement("div",{key:t,className:"coupons-mobile--coupon--2s0O6","data-purpose":"coupon"},this.fields.map(((t,r)=>l.a.createElement("div",{key:r,"data-purpose":"coupon-field"},t.label&&l.a.createElement("span",{className:"ud-text-bold"},`${t.label}: `),t.value(e))))))))}render(){const{valid:e,collapsible:t,couponsStore:r,title:n,toggleOpen:i,expanded:o}=this.props;const a=l.a.createElement("div",null,e?l.a.createElement(le["a"],{udStyle:"link",className:"coupons-mobile--create-multiple-coupons--Q5j3B",typography:"ud-text-md ud-link-underline",componentClass:"a",href:"/instructor/multiple-coupons-creation/"},gettext("Create multiple coupons")):l.a.createElement("div",{className:"coupons-mobile--search-coupons--3Vo31","data-purpose":"coupons-search"},l.a.createElement(Fo,null)),this.renderCoupons(),!e&&l.a.createElement(mo["a"],{"data-purpose":"coupons-table-pagination",className:"coupons-mobile--pagination--1Ja_c",onPageChange:r.setPage,activePage:r.page,pageCount:r.numPages}));if(t){return l.a.createElement(Xo["a"],{className:"coupons-mobile--container--3IeO4"},l.a.createElement(Xo["a"].Panel,{className:"coupons-mobile--accordion-panel--V-5wC",title:n,expanded:o,onToggle:i},a))}return l.a.createElement("div",{className:"coupons-mobile--container--3IeO4"},l.a.createElement("div",{className:"coupons-mobile--title--3hTak"},l.a.createElement("h3",{className:"ud-heading-lg"},n)),a)}},ea.propTypes={couponsStore:a.a.object.isRequired,title:a.a.string.isRequired,valid:a.a.bool.isRequired,collapsible:a.a.bool,expanded:a.a.bool,toggleOpen:a.a.func,isLoading:a.a.bool},ea.defaultProps={collapsible:false,expanded:false,toggleOpen:Xe["a"],isLoading:false},ea),babelHelpers.applyDecoratedDescriptor(Zo.prototype,"items",[he["g"]],Object.getOwnPropertyDescriptor(Zo.prototype,"items"),Zo.prototype),babelHelpers.applyDecoratedDescriptor(Zo.prototype,"fields",[he["g"]],Object.getOwnPropertyDescriptor(Zo.prototype,"fields"),Zo.prototype),babelHelpers.applyDecoratedDescriptor(Zo.prototype,"validFields",[he["g"]],Object.getOwnPropertyDescriptor(Zo.prototype,"validFields"),Zo.prototype),babelHelpers.applyDecoratedDescriptor(Zo.prototype,"renderLinkButton",[f["a"]],Object.getOwnPropertyDescriptor(Zo.prototype,"renderLinkButton"),Zo.prototype),babelHelpers.applyDecoratedDescriptor(Zo.prototype,"renderCoupons",[f["a"]],Object.getOwnPropertyDescriptor(Zo.prototype,"renderCoupons"),Zo.prototype),Zo))||Jo)||Jo);var na,ia,oa;let aa=(na=Object(i["e"])("couponsStore"),na(ia=Object(i["f"])(ia=(oa=class e extends s["Component"]{render(){const e=this.props.isMobileMax?ra:$o;const{couponsStore:t}=this.props;return l.a.createElement(l.a.Fragment,null,l.a.createElement(e,{valid:true,title:gettext("Active/Scheduled coupons"),isLoading:t.validCouponsLoading}),l.a.createElement(e,{valid:false,title:gettext("Expired coupons"),collapsible:true,expanded:t.invalidCouponsExpanded,toggleOpen:t.toggleOpenForInvalidCoupons,isLoading:t.invalidCouponsLoading}))}},oa.propTypes={couponsStore:a.a.object.isRequired,isMobileMax:a.a.bool.isRequired},oa))||ia)||ia);var sa=r("./src/udemy/js/course-manage-price-and-coupons/coupons/v2/percent-coupons-route.less");var la,ca,ua,pa;let da=(la=Object(Ri["d"])({isMobileMax:`(max-width: ${Li["a"]["breakpoint-instructor-mobile-max"]})`}),ca=Object(i["e"])("couponsStore"),la(ua=ca(ua=Object(i["f"])(ua=(pa=class e extends s["Component"]{componentDidMount(){this.props.couponsStore.course.load().then((()=>{this.props.couponsStore.initialize()}))}renderReferralLink(){const{couponsStore:e,isMobileMax:t}=this.props;const r=l.a.createElement(Ii["b"],{readOnly:true,value:e.referralUrl});const n={udStyle:"secondary","data-clipboard-text":e.referralUrl,children:t?gettext("Copy link"):gettext("Copy")};return l.a.createElement("div",{className:"percent-coupons-route--referral-link-panel--2dSvY"},l.a.createElement("h2",{className:"ud-heading-lg percent-coupons-route--heading--3g1u8"},gettext("Refer students")),l.a.createElement("p",null,gettext("Any time a student uses this link, we will credit you with the sale.")," ",l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"/support/229603968/"},gettext("Learn more"))),l.a.createElement(ji["b"],{label:gettext("Referral Link"),labelProps:{className:"ud-sr-only"},className:"percent-coupons-route--referral-link--3vSmv"},t&&r,!t&&l.a.createElement(Ni["a"],null,r,l.a.createElement(Ni["a"].Addon,Object.assign({componentClass:Bi},n)))),t&&l.a.createElement(Bi,Object.assign({},n,{className:"percent-coupons-route--mobile-copy-button--1KrJN"})))}renderCouponsHeader(){return l.a.createElement("h2",{className:"ud-heading-lg percent-coupons-route--heading--3g1u8","data-purpose":"coupons-header"},gettext("Coupons"))}renderCouponsPriceAlert(){return l.a.createElement(b["a"],{"data-purpose":"coupons-price-alert",showCta:false,className:"percent-coupons-route--alert-banner--1SG9a",title:l.a.createElement(l.a.Fragment,null,gettext("We have updated the coupon system, and there is more to come. "+"Announcing new free coupon limits and bulk coupon creation.")," ",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://teach.udemy.com/october-2021-coupon-updates",className:"ud-link-underline"},gettext("Learn more")))})}render(){if(this.props.couponsStore.isLoading){return l.a.createElement(S,null)}return l.a.createElement("div",{"data-purpose":"coupons-route"},this.renderCouponsPriceAlert(),this.renderReferralLink(),this.renderCouponsHeader(),l.a.createElement(ho,null),l.a.createElement(aa,{isMobileMax:this.props.isMobileMax}))}},pa.propTypes={couponsStore:a.a.object.isRequired,history:a.a.object.isRequired,location:a.a.object.isRequired,isMobileMax:a.a.oneOfType([a.a.bool,a.a.instanceOf(null)])},pa.defaultProps={isMobileMax:null},pa))||ua)||ua)||ua);var ha,ma,fa,ga,ya,ba,va,wa,Ea,Sa,_a,xa,Da,Ca,Ta,Oa,ka,Pa,Aa,Ia,ja,Ra,Na,La,Ma,qa,Ua,Ha,Fa,Ba,za,Va,Wa,Ga,Ka,$a,Xa,Ya,Qa,Ja,Za,es,ts,rs,ns,is,os,as,ss,ls,cs;let us=(ha=he["t"].ref,ma=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"validCouponsLoading",fa,this);babelHelpers.initializerDefineProperty(this,"invalidCouponsLoading",ga,this);babelHelpers.initializerDefineProperty(this,"metadataCouponsLoading",ya,this);babelHelpers.initializerDefineProperty(this,"validOrdering",ba,this);babelHelpers.initializerDefineProperty(this,"invalidOrdering",va,this);babelHelpers.initializerDefineProperty(this,"page",wa,this);this.pageSize=fi.page_size;babelHelpers.initializerDefineProperty(this,"searchQuery",Ea,this);babelHelpers.initializerDefineProperty(this,"numTotalFilteredInvalidCoupons",Sa,this);babelHelpers.initializerDefineProperty(this,"filteredInvalidCoupons",_a,this);babelHelpers.initializerDefineProperty(this,"validCoupons",xa,this);babelHelpers.initializerDefineProperty(this,"couponMetadata",Da,this);babelHelpers.initializerDefineProperty(this,"invalidCouponsExpanded",Ca,this);babelHelpers.initializerDefineProperty(this,"isCouponCreationModalOpen",Ta,this);babelHelpers.initializerDefineProperty(this,"disableCouponCreation",Oa,this);babelHelpers.initializerDefineProperty(this,"disablePaidCoupons",ka,this);babelHelpers.initializerDefineProperty(this,"couponCreationModalCurrentState",Pa,this);babelHelpers.initializerDefineProperty(this,"couponTypeSelection",Aa,this);babelHelpers.initializerDefineProperty(this,"remainingCouponCount",Ia,this);babelHelpers.initializerDefineProperty(this,"courseCurrency",ja,this);babelHelpers.initializerDefineProperty(this,"courseCurrencySymbol",Ra,this);babelHelpers.initializerDefineProperty(this,"couponCode",Na,this);babelHelpers.initializerDefineProperty(this,"couponPrice",La,this);babelHelpers.initializerDefineProperty(this,"couponDiscountLongPlaceholderPrice",Ma,this);babelHelpers.initializerDefineProperty(this,"couponDiscountLongMaxPrice",qa,this);babelHelpers.initializerDefineProperty(this,"couponDiscountLongDuration",Ua,this);babelHelpers.initializerDefineProperty(this,"couponDiscountLongMaximumUses",Ha,this);babelHelpers.initializerDefineProperty(this,"formattedCouponDiscountLongPlaceholderPrice",Fa,this);babelHelpers.initializerDefineProperty(this,"formattedCouponDiscountLongMaxPrice",Ba,this);babelHelpers.initializerDefineProperty(this,"couponDiscountUrgencyMinPrice",za,this);babelHelpers.initializerDefineProperty(this,"couponDiscountUrgencyDuration",Va,this);babelHelpers.initializerDefineProperty(this,"couponDiscountUrgencyMaximumUses",Wa,this);babelHelpers.initializerDefineProperty(this,"couponFreeUrgencyMinPrice",Ga,this);babelHelpers.initializerDefineProperty(this,"couponFreeUrgencyDuration",Ka,this);babelHelpers.initializerDefineProperty(this,"couponFreeUrgencyMaximumUses",$a,this);babelHelpers.initializerDefineProperty(this,"couponFreeScarcityMinPrice",Xa,this);babelHelpers.initializerDefineProperty(this,"couponFreeScarcityDuration",Ya,this);babelHelpers.initializerDefineProperty(this,"couponFreeScarcityMaximumUses",Qa,this);babelHelpers.initializerDefineProperty(this,"couponStartDate",Ja,this);babelHelpers.initializerDefineProperty(this,"couponDuration",Za,this);babelHelpers.initializerDefineProperty(this,"invalidPrice",es,this);babelHelpers.initializerDefineProperty(this,"invalidCode",ts,this);babelHelpers.initializerDefineProperty(this,"finalCoupon",rs,this);babelHelpers.initializerDefineProperty(this,"errorStatusCode",ns,this);babelHelpers.initializerDefineProperty(this,"paidCouponTypes",is,this);babelHelpers.initializerDefineProperty(this,"freeCouponTypes",os,this);babelHelpers.initializerDefineProperty(this,"currencyFormat",as,this);babelHelpers.initializerDefineProperty(this,"hasInvalidChars",ss,this);babelHelpers.initializerDefineProperty(this,"invalidCouponStartDate",ls,this);babelHelpers.initializerDefineProperty(this,"urlQueryParams",cs,this);this.course=e.course;this.couponStartDate=this.now}get numPages(){return Math.ceil(this.numTotalFilteredInvalidCoupons/this.pageSize)}get validSortBy(){return this._sortBy(true)}get invalidSortBy(){return this._sortBy(false)}_sortBy(e){const t=e?this.validOrdering:this.invalidOrdering;if(t.startsWith("-")){return{fieldName:t.substring(1),ascending:false}}return{fieldName:t,ascending:true}}get isLoading(){return this.validCouponsLoading&&this.invalidCouponsLoading&&this.metadataCouponsLoading}get couponUrl(){const e=new URL(g["a"].to(this.course.url));e.searchParams.set("couponCode",this.finalCoupon||"");return e.toString()}get now(){let e=new Date;e=new Date(e.getTime()-e.getSeconds()*1e3-e.getMilliseconds());return Object(bo["a"])(e)}get today(){const e=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate());return Object(bo["b"])(e,this.now)}get currentMonthEndDate(){const e=new Date(this.now.getFullYear(),this.now.getMonth()+1,0);return Object(bo["b"])(e,this.now)}get currentMonth(){return Qi(this.now)}get couponStartTime(){const e=`${this.couponStartDate.getHours()}`.padStart(2,"0");const t=`${this.couponStartDate.getMinutes()}`.padStart(2,"0");return`${e}:${t}`}get couponEndDate(){const e=new Date(this.couponStartDate);e.setDate(e.getDate()+this.couponDuration);return Object(bo["b"])(e,this.couponStartDate)}get couponCodeValidationState(){return this.couponCodeErrorMessage===undefined?undefined:"error"}get couponCodeErrorMessage(){if(this.hasInvalidChars){return Oi[3]}if(this.invalidCode!==null&&this.invalidCode===this.couponCode){if(!this.errorStatusCode){return gettext("Please enter valid characters")}return Oi[this.errorStatusCode]||""}return undefined}get couponPriceValidationState(){return this.couponPriceErrorMessage===undefined?undefined:"error"}get couponPriceErrorMessage(){if(this.invalidPrice!==-1&&this.invalidPrice===this.couponPrice){return gettext("Please enter a valid price")}if(this.couponPrice>this.couponDiscountLongMaxPrice){return interpolate(gettext("Please enter a price below %s"),[this.couponDiscountLongMaxPrice])}if(this.couponPrice<this.couponDiscountLongPlaceholderPrice){return interpolate(gettext("Please enter a price above %s"),[this.couponDiscountLongPlaceholderPrice])}return undefined}get couponStartDateValidationState(){return this.couponStartDateErrorMessage===undefined?undefined:"error"}get couponStartDateErrorMessage(){if(this.invalidCouponStartDate){return Oi[this.errorStatusCode]||""}return undefined}initialize(){this._getValidCoupons();this._getInvalidCoupons();this._getCouponMetadata()}checkInvalidChars(){this.hasInvalidChars=this.couponCode&&!this.couponCode.match("^[A-Z0-9-_.]+$")}toggleOpenForInvalidCoupons(e){this.invalidCouponsExpanded=e}openCouponCreationModal(){this.couponTypeSelection=null;this.couponCode=this.couponMetadata.random_coupon_code;this.couponCreationModalCurrentState=Ci.coupon_type;this.isCouponCreationModalOpen=true}closeCouponCreationModal(){this.isCouponCreationModalOpen=false}setCouponCode(e){this.couponCode=e}setCouponPrice(e){this.couponPrice=e}setCouponStartDate(e){if(e){this.couponStartDate=Object(bo["b"])(new Date(e.getFullYear(),e.getMonth(),e.getDate(),this.couponStartDate.getHours(),this.couponStartDate.getMinutes()),this.couponStartDate);this.invalidCouponStartDate=false}}setCouponStartTime(e){let[t,r]=e.split(":");t=parseInt(t,10);r=parseInt(r,10);if(isNaN(t)||isNaN(r)){return}if(t===2){const e=Object(bo["e"])(this.couponStartDate).slice(0,10);const r=Object(bo["c"])(this.couponStartDate.getFullYear())[0];const n=r.toISOString().slice(0,10);if(e===n){t=this.couponStartDate.getHours()<t?3:1}}this.couponStartDate=Object(bo["b"])(new Date(this.couponStartDate.getFullYear(),this.couponStartDate.getMonth(),this.couponStartDate.getDate(),t,r),this.couponStartDate);this.invalidCouponStartDate=false}setCouponDuration(e){this.couponDuration=e}initializeCouponInfo(e){this.couponTypeSelection=e;this.couponCreationModalCurrentState=Ci.coupon_details;const t=Ti[e];if(Ti[e].type==="paid"){this.setCouponPrice(this.paidCouponTypes[t.version].min_value);this.setCouponDuration(this.paidCouponTypes[t.version].duration)}else{this.setCouponPrice(0);this.setCouponDuration(this.freeCouponTypes[t.version].duration)}this.couponStartDate=this.now;this.invalidCouponStartDate=false}submitCouponForReview(){if(this.couponTypeSelection==="long_discount"&&this.couponPriceValidationState||this.couponCodeValidationState){return}this._validateCoupon()}editCoupon(){this.couponCreationModalCurrentState=Ci.coupon_details}createCoupon(){this.couponCreationModalCurrentState=Ci.loading;this._createNewCoupon()}searchCoupons(){this.page=fi.page;this.invalidCouponsExpanded=true;this._getInvalidCoupons()}setSearch(e){this.searchQuery=e}setValidOrdering(e){this._setOrdering(true,this.validSortBy,e);this._getValidCoupons()}setInvalidOrdering(e){this._setOrdering(false,this.invalidSortBy,e);this.invalidCouponsExpanded=true;this._getInvalidCoupons()}_setOrdering(e,t,r){const n=r.fieldName===t.fieldName;const i=n?!t.ascending:r.initialSortOrder==="ascending";if(e){this.validOrdering=`${i?"":"-"}${r.fieldName}`}else{this.invalidOrdering=`${i?"":"-"}${r.fieldName}`}}setPage(e){this.page=e;this.invalidCouponsExpanded=true;this._getInvalidCoupons()}get referralUrl(){const e=new URL(g["a"].to(this.course.url));e.searchParams.set("referralCode",this.couponMetadata.referral_code||"");return e.toString()}_updateCouponTypeInfo(){if(this.couponMetadata.coupon_types.discount){this.couponDiscountLongMaximumUses=this.couponMetadata.coupon_types.discount.long.maximum_uses;this.couponDiscountLongDuration=this.couponMetadata.coupon_types.discount.long.duration;this.couponDiscountLongPlaceholderPrice=this.couponMetadata.coupon_types.discount.long.min_value;this.couponDiscountLongMaxPrice=this.couponMetadata.coupon_types.discount.long.max_value;this.formattedCouponDiscountLongPlaceholderPrice=Object(go["a"])(this.couponMetadata.coupon_types.discount.long.min_value,this.currencyFormat);this.formattedCouponDiscountLongMaxPrice=Object(go["a"])(this.couponMetadata.coupon_types.discount.long.max_value,this.currencyFormat);this.couponDiscountUrgencyMinPrice=this.couponMetadata.coupon_types.discount.urgency.min_value;this.couponDiscountUrgencyMaximumUses=this.couponMetadata.coupon_types.discount.urgency.maximum_uses;this.couponDiscountUrgencyDuration=this.couponMetadata.coupon_types.discount.urgency.duration}if(this.couponMetadata.coupon_types.free){this.couponFreeScarcityMinPrice=this.couponMetadata.coupon_types.free.scarcity.min_value;this.couponFreeScarcityMaximumUses=this.couponMetadata.coupon_types.free.scarcity.maximum_uses;this.couponFreeScarcityDuration=this.couponMetadata.coupon_types.free.scarcity.duration;this.couponFreeUrgencyMinPrice=this.couponMetadata.coupon_types.free.urgency.min_value;this.couponFreeUrgencyMaximumUses=this.couponMetadata.coupon_types.free.urgency.maximum_uses;this.couponFreeUrgencyDuration=this.couponMetadata.coupon_types.free.urgency.duration}}_checkListPrice(){if(this.course.base_price_detail.amount<this.couponDiscountUrgencyMinPrice){this.disablePaidCoupons=true}}_getCoupons(e,t){const r=e?this.validOrdering:this.invalidOrdering;const n={page_size:this.pageSize};if(this._sortBy(e).fieldName==="end_time"){n.ordering=`${r},-created`}this.urlQueryParams=t;return So.list(this.course.id,{params:Object.assign({},t,n)})}_getValidCoupons(){this.validCouponsLoading=true;const e=true;const t={ordering:this.validOrdering,page:1,invalid:!e};return this._getCoupons(e,t).then(Object(he["e"])((e=>{this.validCoupons=e.data.results;this.validCouponsLoading=false}))).catch(Object(he["e"])((()=>{this.validCoupons=[];this.validCouponsLoading=false})))}_getInvalidCoupons(){this.invalidCouponsLoading=true;const e=false;const t={ordering:this.invalidOrdering,page:this.page,search:this.searchQuery,invalid:!e};return this._getCoupons(e,t).then(Object(he["e"])((e=>{this.filteredInvalidCoupons=e.data.results;this.numTotalFilteredInvalidCoupons=e.data.count;this.invalidCouponsLoading=false}))).catch(Object(he["e"])((()=>{this.filteredInvalidCoupons=[];this.numTotalFilteredInvalidCoupons=0;this.invalidCouponsLoading=false})))}_getCouponMetadata(){this.metadataCouponsLoading=true;Qe["f"].get(`/courses/${this.course.id}/coupons-v2/meta/`).then(Object(he["e"])((e=>{this.metadataCouponsLoading=false;this.couponMetadata=e.data;this.couponCode=this.couponMetadata.random_coupon_code;this.remainingCouponCount=this.couponMetadata.remaining_coupon_count;if(!this.course.is_paid){this.disableCouponCreation=true;return}this.paidCouponTypes=this.couponMetadata.coupon_types.discount;this.freeCouponTypes=this.couponMetadata.coupon_types.free;this.currencyFormat=this.couponMetadata.currency_format;this._updateCouponTypeInfo();this._checkListPrice()})))}_createNewCoupon(){this.couponCreationModalCurrentState=Ci.loading;Qe["f"].post(`/courses/${this.course.id}/coupons-v2/`,{code:this.couponCode,discount_value:this.couponPrice,discount_strategy:this.couponTypeSelection,start_time:Object(bo["e"])(this.couponStartDate)}).then(Object(he["e"])((e=>{this.initialize();this.finalCoupon=e.data.code;this.couponCreationModalCurrentState=Ci.creation_success}))).catch(Object(he["e"])((e=>{if(e.response.data.code){this.invalidCode=this.couponCode}if(e.response.data.discount_value){this.invalidPrice=this.couponPrice}this.couponCreationModalCurrentState=Ci.coupon_details})))}_validateCoupon(){this.couponCreationModalCurrentState=Ci.loading;Qe["f"].post("/discounts/validate-coupon/",{course_id:this.course.id,coupon_code:this.couponCode,value:this.couponPrice,discount_strategy:this.couponTypeSelection,start_time:Object(bo["e"])(this.couponStartDate)}).then(Object(he["e"])((()=>{this.couponCreationModalCurrentState=Ci.review_coupon}))).catch(Object(he["e"])((e=>{this.errorStatusCode=e.response.data.status_code;if(this.errorStatusCode===3||this.errorStatusCode===4||this.errorStatusCode===8){this.invalidCode=this.couponCode}if(this.errorStatusCode===5||this.errorStatusCode===7){this.invalidPrice=this.couponPrice}if(this.errorStatusCode===9||this.errorStatusCode===10||this.errorStatusCode===11){this.invalidCouponStartDate=true}this.couponCreationModalCurrentState=Ci.coupon_details})))}},fa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"validCouponsLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),ga=babelHelpers.applyDecoratedDescriptor(ma.prototype,"invalidCouponsLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),ya=babelHelpers.applyDecoratedDescriptor(ma.prototype,"metadataCouponsLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),ba=babelHelpers.applyDecoratedDescriptor(ma.prototype,"validOrdering",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return"end_time"}}),va=babelHelpers.applyDecoratedDescriptor(ma.prototype,"invalidOrdering",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return fi.ordering}}),wa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"page",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return fi.page}}),Ea=babelHelpers.applyDecoratedDescriptor(ma.prototype,"searchQuery",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return fi.search}}),Sa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"numTotalFilteredInvalidCoupons",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),_a=babelHelpers.applyDecoratedDescriptor(ma.prototype,"filteredInvalidCoupons",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),xa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"validCoupons",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),Da=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponMetadata",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),Ca=babelHelpers.applyDecoratedDescriptor(ma.prototype,"invalidCouponsExpanded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Ta=babelHelpers.applyDecoratedDescriptor(ma.prototype,"isCouponCreationModalOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Oa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"disableCouponCreation",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ka=babelHelpers.applyDecoratedDescriptor(ma.prototype,"disablePaidCoupons",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Pa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponCreationModalCurrentState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return Ci.coupon_type}}),Aa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponTypeSelection",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Ia=babelHelpers.applyDecoratedDescriptor(ma.prototype,"remainingCouponCount",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),ja=babelHelpers.applyDecoratedDescriptor(ma.prototype,"courseCurrency",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return"USD"}}),Ra=babelHelpers.applyDecoratedDescriptor(ma.prototype,"courseCurrencySymbol",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return"$"}}),Na=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponCode",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),La=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Ma=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountLongPlaceholderPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),qa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountLongMaxPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Ua=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountLongDuration",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Ha=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountLongMaximumUses",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Fa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"formattedCouponDiscountLongPlaceholderPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),Ba=babelHelpers.applyDecoratedDescriptor(ma.prototype,"formattedCouponDiscountLongMaxPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),za=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountUrgencyMinPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Va=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountUrgencyDuration",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Wa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDiscountUrgencyMaximumUses",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Ga=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponFreeUrgencyMinPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Ka=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponFreeUrgencyDuration",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),$a=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponFreeUrgencyMaximumUses",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Xa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponFreeScarcityMinPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Ya=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponFreeScarcityDuration",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Qa=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponFreeScarcityMaximumUses",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Ja=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponStartDate",[ha],{configurable:true,enumerable:true,writable:true,initializer:null}),Za=babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponDuration",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),es=babelHelpers.applyDecoratedDescriptor(ma.prototype,"invalidPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return-1}}),ts=babelHelpers.applyDecoratedDescriptor(ma.prototype,"invalidCode",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),rs=babelHelpers.applyDecoratedDescriptor(ma.prototype,"finalCoupon",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),ns=babelHelpers.applyDecoratedDescriptor(ma.prototype,"errorStatusCode",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),is=babelHelpers.applyDecoratedDescriptor(ma.prototype,"paidCouponTypes",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),os=babelHelpers.applyDecoratedDescriptor(ma.prototype,"freeCouponTypes",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),as=babelHelpers.applyDecoratedDescriptor(ma.prototype,"currencyFormat",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),ss=babelHelpers.applyDecoratedDescriptor(ma.prototype,"hasInvalidChars",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ls=babelHelpers.applyDecoratedDescriptor(ma.prototype,"invalidCouponStartDate",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(ma.prototype,"numPages",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"numPages"),ma.prototype),cs=babelHelpers.applyDecoratedDescriptor(ma.prototype,"urlQueryParams",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),babelHelpers.applyDecoratedDescriptor(ma.prototype,"isLoading",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"isLoading"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponUrl",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponUrl"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"now",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"now"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"today",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"today"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"currentMonthEndDate",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"currentMonthEndDate"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"currentMonth",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"currentMonth"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponStartTime",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponStartTime"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponEndDate",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponEndDate"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponCodeValidationState",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponCodeValidationState"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponCodeErrorMessage",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponCodeErrorMessage"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponPriceValidationState",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponPriceValidationState"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponPriceErrorMessage",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponPriceErrorMessage"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponStartDateValidationState",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponStartDateValidationState"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"couponStartDateErrorMessage",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"couponStartDateErrorMessage"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"checkInvalidChars",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"checkInvalidChars"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"toggleOpenForInvalidCoupons",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"toggleOpenForInvalidCoupons"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"openCouponCreationModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"openCouponCreationModal"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"closeCouponCreationModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"closeCouponCreationModal"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setCouponCode",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setCouponCode"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setCouponPrice",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setCouponPrice"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setCouponStartDate",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setCouponStartDate"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setCouponStartTime",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setCouponStartTime"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setCouponDuration",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setCouponDuration"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"initializeCouponInfo",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"initializeCouponInfo"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"submitCouponForReview",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"submitCouponForReview"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"editCoupon",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"editCoupon"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"createCoupon",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"createCoupon"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"searchCoupons",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"searchCoupons"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setSearch",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setSearch"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setValidOrdering",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setValidOrdering"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setInvalidOrdering",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setInvalidOrdering"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"setPage",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"setPage"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"referralUrl",[he["g"]],Object.getOwnPropertyDescriptor(ma.prototype,"referralUrl"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"_updateCouponTypeInfo",[he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"_updateCouponTypeInfo"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"_checkListPrice",[he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"_checkListPrice"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"_getCoupons",[he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"_getCoupons"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"_getValidCoupons",[he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"_getValidCoupons"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"_getInvalidCoupons",[he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"_getInvalidCoupons"),ma.prototype),babelHelpers.applyDecoratedDescriptor(ma.prototype,"_getCouponMetadata",[he["e"]],Object.getOwnPropertyDescriptor(ma.prototype,"_getCouponMetadata"),ma.prototype),ma);var ps,ds;let hs=Object(c["m"])(ps=(ds=class e extends s["Component"]{constructor(e){super(e);e={course:new Ai(e.courseId),...e};this.couponsStore=new us(e)}render(){const{courseId:e,...t}=this.props;return l.a.createElement(i["c"],{couponsStore:this.couponsStore},l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Promotions")}),l.a.createElement(d["a"],null,l.a.createElement(da,t))))}},ds.propTypes={courseId:a.a.number.isRequired,history:a.a.object.isRequired,location:a.a.object.isRequired,onSaveComplete:a.a.func},ds.defaultProps={onSaveComplete:()=>true},ds))||ps;var ms=r("./node_modules/@udemy/react-messaging-components/dist/esm/badge/badge.react-component.js");var fs=r("./src/udemy/js/course-manage-price-and-coupons/price/price.less");const gs=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{priceStore:t}=e;if(!t.showFreePaidWarning){return null}return l.a.createElement(b["a"],{udStyle:"warning",className:"price--alert-banner--2eKBX","data-purpose":"free-paid-warning",onAction:t.markFreePaidWarningSeen,ctaText:gettext("Dismiss"),dismissButtonProps:false,title:gettext("Before updating the price of your course, please be aware that switching the "+"price of your course between free and paid more than once will result in "+"restrictions to your promotional announcements.")})})));var ys=gs;var bs=r("./src/udemy/js/course-manage-v2/constants.js");var vs,ws;let Es=Object(i["f"])(vs=(ws=class e extends s["Component"]{localizedMatrixUrl(){return g["a"].toStorageStaticAsset("support/Udemy+Price+Tier+Matrix-V3.pdf")}getPracticeCourseMessage(){let e="";if(this.props.isPracticeTestCourse){e=gettext("Practice test only courses can not be free.")}else if(this.props.publishedPracticeTestCount>0){e=gettext("Courses with practice tests can not be free.")}return e&&l.a.createElement("div",{"data-purpose":"practice-course-message"},e)}getOwnerMarketingText(){if(this.props.isOwnerOptedIntoDeals){return gettext("Please select the price tier for your course below and click 'Save'. In markets where"+" Udemy is not optimizing your list price, the list price that students will see in other currencies"+' is determined using the <a href="%(url)s" target="_blank" rel="no opener no referrer">price tier matrix</a>.')}return gettext("Please select the price tier for your course below and click 'Save'. The list price that students "+"will see in other currencies is determined using the"+' <a href="%(url)s" target="_blank" rel="no opener no referrer">price tier matrix</a>.')}render(){return l.a.createElement(l.a.Fragment,null,this.props.isOwnerOptedIntoDeals&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"ud-heading-md price--opt-in-section-title--3EOsp"},gettext("Udemy Deals and List Price")),l.a.createElement("p",null,gettext("You are opted into the Udemy Deals program.")),l.a.createElement("p",null,gettext("Since you participate in the Udemy Deals program, Udemy optimizes your list "+"price in most currencies and offers your course at a compelling discount"+" via targeted promotions.")),l.a.createElement("p",null,gettext("In markets where Udemy doesn't currently display an optimized list price,"+" we show a list price chosen by the instructor."))),l.a.createElement("h3",{className:"ud-heading-md price--opt-in-section-title--3EOsp"},gettext("Course Price Tier")),l.a.createElement("p",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"price-form:link-to-price-tier-matrix",domPurifyConfig:{ADD_ATTR:["target"]},html:interpolate(this.getOwnerMarketingText(),{url:this.localizedMatrixUrl()},true)}))),l.a.createElement("p",null,ninterpolate("If you intend to offer your course for free, "+"the total length of video content must be less than %(hours)s hour.","If you intend to offer your course for free, "+"the total length of video content must be less than %(hours)s hours.",bs["b"],{hours:bs["b"]})),this.getPracticeCourseMessage())}},ws.propTypes={isOwnerOptedIntoDeals:a.a.bool.isRequired,isPracticeTestCourse:a.a.bool.isRequired,publishedPracticeTestCount:a.a.number.isRequired},ws))||vs;const Ss=Object(i["e"])("priceStore")((e=>{let{priceStore:t}=e;if(t.course.owner_is_premium_instructor){return null}let r,n;if(t.course.is_owner){r=l.a.createElement(m["b"],{className:"ud-text-with-links",html:gettext("Please complete the premium instructor application "+'<a class="link">here</a> in order to set a price for your course.'),interpolate:{link:l.a.createElement("a",{href:"/instructor/user/edit-instructor-info/"})}});n=gettext("You can set your course price as soon as your linked payment method is approved.")}else{r=gettext("The course owner needs to complete our premium instructor "+"application in order to update your course price.")}return l.a.createElement(b["a"],{udStyle:"warning",className:"price--alert-banner--2eKBX","data-purpose":"premium-instructor-warning",showCta:false,title:r,body:n})}));var _s=Ss;var xs=r("./src/udemy/js/course-manage-price-and-coupons/price/price-form/price-select.less");const Ds=e=>{let{children:t,disabled:r,onChange:n,renderTitle:i,value:o}=e;t=l.a.Children.toArray(t);let a=t.find((e=>e.props.value===o));if(!a){a={props:{children:[]}}}return l.a.createElement(de["a"],{placement:"bottom-start",menuWidth:"fullWidth",menuMaxHeight:`${Object(Rn["c"])(194)}rem`,trigger:l.a.createElement(de["a"].Button,{disabled:r,className:"price-select--btn--3_dyL"},i(a.props.children))},l.a.createElement(de["a"].Menu,null,t.map((e=>l.a.createElement(de["a"].MenuItem,{key:e.key,onClick:()=>n(e)},e.props.children)))))};Ds.propTypes={children:a.a.node,disabled:a.a.bool,onChange:a.a.func.isRequired,renderTitle:a.a.func,value:a.a.any.isRequired};Ds.defaultProps={children:null,disabled:false,renderTitle:e=>e};var Cs=Ds;var Ts=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{priceStore:t}=e;return l.a.createElement(le["a"],{"data-purpose":"price-form-submit-button",disabled:!t.form.canSubmit||t.form.isSubmitting,type:"submit"},gettext("Save"))})));const Os=e=>{let{selectedOptionText:t,lastOptionText:r}=e;return l.a.createElement("span",{className:"price-select--title-container--3nGzv"},l.a.createElement("span",{"aria-hidden":true,className:"price-select--title-spacer--3up0m"},r),t)};const ks=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{onChange:t,priceStore:r}=e;const n=r.getPriceTiersForCurrency(r.form.data.currency);let i=null;if(!r.course.price_updated_date){i=l.a.createElement("option",{key:"empty",value:wi},gettext("Select"))}let o=null;if(!r.course.is_practice_test_course&&r.course.num_published_practice_tests===0){o=l.a.createElement("option",{key:"free",value:0},gettext("Free"))}const a=e=>{let t;if(n.length===0){t=e}else{const e=n[n.length-1];t=l.a.createElement("span",null,e.price_money," ",interpolate(gettext("(tier %s)"),[e.price_tier_level],false))}return l.a.createElement(Os,{selectedOptionText:e,lastOptionText:t})};return l.a.createElement(Cs,{disabled:n.length===0,onChange:t,renderTitle:a,value:r.form.data.amount},i,o,n.map((e=>l.a.createElement("option",{key:e.id,value:e.amount},e.price_money," ",interpolate(gettext("(tier %s)"),[e.price_tier_level],false)))))})));const Ps=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{onChange:t,priceStore:r}=e;return l.a.createElement(Cs,{disabled:r.currencies.length===0,onChange:t,value:r.form.data.currency},r.currencies.map((e=>l.a.createElement("option",{key:e,value:e},e.toUpperCase()))))})));const As=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{onAmountChange:t,onCurrencyChange:r,priceStore:n}=e;const i=e=>{if(!n.form.errors||!n.form.errors[e]){return null}return n.form.errors[e].join(" ")};const o=n.form.errors?"error":"neutral";return l.a.createElement(ji["b"],{"data-purpose":"price-select",label:gettext("Price"),labelProps:{className:"ud-sr-only"},validationState:o,note:i("non_field_errors"),udStyle:"fieldset",className:"price-select--price-select--3gmzG"},l.a.createElement("div",{className:"price-select--btn-group--EPlhv"},l.a.createElement("div",{className:"price-select--btn-group--EPlhv"},l.a.createElement(ji["b"],{label:gettext("Currency"),labelProps:{className:"ud-sr-only"},validationState:o,note:i("currency")},l.a.createElement(Ps,{onChange:r})),l.a.createElement(ji["b"],{label:gettext("Amount"),labelProps:{className:"ud-sr-only"},validationState:o,note:i("amount")},l.a.createElement(ks,{onChange:t}))),l.a.createElement(Ts,null)))})));var Is=As;var js,Rs,Ns,Ls;let Ms=(js=Object(i["e"])("priceStore"),js(Rs=Object(i["f"])(Rs=(Ns=(Ls=class e extends s["Component"]{onAmountChange(e){this.props.priceStore.form.setData({amount:e.props.value})}onCurrencyChange(e){const t=e.props.value;const r=this.props.priceStore.form;this.props.priceStore.loadPriceTiers().then((()=>{const e=this.props.priceStore.exchangePriceTierAmount(r.data.amount,r.data.currency,t);r.setData({amount:e,currency:t})}))}onSubmit(e){e.preventDefault();this.props.priceStore.form.submit().then((()=>{this.props.onSaveComplete();Object(Ui["c"])(gettext("Your changes have been successfully saved."))})).catch(Xe["a"])}render(){return l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement(_s,null),l.a.createElement(ys,null),l.a.createElement(Es,{isOwnerOptedIntoDeals:this.props.priceStore.isOwnerOptedIntoDeals,isPracticeTestCourse:this.props.priceStore.course.is_practice_test_course,publishedPracticeTestCount:this.props.priceStore.course.num_published_practice_tests}),l.a.createElement(Is,{onAmountChange:this.onAmountChange,onCurrencyChange:this.onCurrencyChange}))}},Ls.propTypes={priceStore:a.a.object.isRequired,onSaveComplete:a.a.func},Ls.defaultProps={onSaveComplete:()=>true},Ls),babelHelpers.applyDecoratedDescriptor(Ns.prototype,"onAmountChange",[f["a"]],Object.getOwnPropertyDescriptor(Ns.prototype,"onAmountChange"),Ns.prototype),babelHelpers.applyDecoratedDescriptor(Ns.prototype,"onCurrencyChange",[f["a"]],Object.getOwnPropertyDescriptor(Ns.prototype,"onCurrencyChange"),Ns.prototype),babelHelpers.applyDecoratedDescriptor(Ns.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(Ns.prototype,"onSubmit"),Ns.prototype),Ns))||Rs)||Rs);var qs,Us,Hs;let Fs=(qs=Object(i["e"])("priceStore"),qs(Us=Object(i["f"])(Us=(Hs=class e extends s["Component"]{componentDidMount(){this.props.priceStore.course.load().then((()=>{this.props.priceStore.form.reset()}));this.props.priceStore.loadPriceTiers()}render(){if(this.props.priceStore.course.loadingState!==Ei.loaded){return l.a.createElement(S,null)}return l.a.createElement("div",{"data-purpose":"price-route"},l.a.createElement(Ms,{onSaveComplete:this.props.onSaveComplete}))}},Hs.propTypes={priceStore:a.a.object.isRequired,history:a.a.object.isRequired,location:a.a.object.isRequired,onSaveComplete:a.a.func},Hs.defaultProps={onSaveComplete:()=>true},Hs))||Us)||Us);var Bs=r("./src/udemy/js/organization-common/constants.js");var zs,Vs,Ws,Gs,Ks,$s,Xs,Ys,Qs,Js;let Zs=(zs=class e{constructor(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;babelHelpers.initializerDefineProperty(this,"isPriceRangeCallSuccess",Vs,this);babelHelpers.initializerDefineProperty(this,"minListPrice",Ws,this);babelHelpers.initializerDefineProperty(this,"maxListPrice",Gs,this);this.isPriceRangeCallSuccess=e;this.minListPrice=t;this.maxListPrice=r}},Vs=babelHelpers.applyDecoratedDescriptor(zs.prototype,"isPriceRangeCallSuccess",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Ws=babelHelpers.applyDecoratedDescriptor(zs.prototype,"minListPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Gs=babelHelpers.applyDecoratedDescriptor(zs.prototype,"maxListPrice",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),zs);let el=(Ks=class e{constructor(e,t){babelHelpers.initializerDefineProperty(this,"data",$s,this);babelHelpers.initializerDefineProperty(this,"initial",Xs,this);babelHelpers.initializerDefineProperty(this,"errors",Ys,this);babelHelpers.initializerDefineProperty(this,"isSubmitting",Qs,this);babelHelpers.initializerDefineProperty(this,"priceRange",Js,this);this.course=e;this.pageStore=t;this.priceRange=new Zs(false);this.reset()}reset(){const e={amount:this.course.basePriceAmount,currency:this.course.basePriceCurrencyCode};if(!this.course.price_updated_date){e.amount=wi}Object(he["y"])(this,{data:{...e},initial:e,errors:null,isSubmitting:false})}get canSubmit(){let e=typeof this.data.amount==="number"&&!!this.data.currency;if(!this.course.owner_is_premium_instructor){e=e&&this.data.amount===0}return e}hasFieldChanged(e){return this.data[e]!==this.initial[e]}get hasSomeFieldChanged(){return Object.keys(this.data).some(this.hasFieldChanged)}setData(e){this.errors=null;Object.assign(this.data,e);Object.entries(this.data).forEach((e=>{let[t,r]=e;if(r===undefined||r===null){this.data[t]=wi}}))}get isFreePriceTierHidden(){return this.pageStore.course.contentLengthVideo>bs["a"]}submit(){this.isSubmitting=true;this.errors=null;if(this.data.amount===0&&this.isFreePriceTierHidden){return Promise.reject({response:{data:{price_money:{non_field_errors:[interpolate(gettext("Free courses cannot exceed %s hours of video content"),[bs["b"]])]}}}}).catch(this._handleSubmitError)}if(!this.hasSomeFieldChanged){return Promise.reject({response:{data:{price_money:{non_field_errors:[gettext("You have not changed your price")]}}}}).catch(this._handleSubmitError)}return this.course.updatePrice(this.data).then(Object(he["e"])((()=>{this.reset();this.isSubmitting=false}))).catch(this._handleSubmitError)}_handleSubmitError(e){this.isSubmitting=false;if(e.response&&e.response.data.price_money){this.errors=e.response.data.price_money}if(e.response&&e.response.status===Bs["b"]){this.errors={non_field_errors:[gettext("You are not allowed to do this action twice in 1 sec.")]}}throw e}},$s=babelHelpers.applyDecoratedDescriptor(Ks.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Xs=babelHelpers.applyDecoratedDescriptor(Ks.prototype,"initial",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Ys=babelHelpers.applyDecoratedDescriptor(Ks.prototype,"errors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Qs=babelHelpers.applyDecoratedDescriptor(Ks.prototype,"isSubmitting",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Js=babelHelpers.applyDecoratedDescriptor(Ks.prototype,"priceRange",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"reset",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ks.prototype,"reset"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"canSubmit",[he["g"]],Object.getOwnPropertyDescriptor(Ks.prototype,"canSubmit"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"hasFieldChanged",[f["a"]],Object.getOwnPropertyDescriptor(Ks.prototype,"hasFieldChanged"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"hasSomeFieldChanged",[he["g"]],Object.getOwnPropertyDescriptor(Ks.prototype,"hasSomeFieldChanged"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"setData",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ks.prototype,"setData"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"isFreePriceTierHidden",[he["g"]],Object.getOwnPropertyDescriptor(Ks.prototype,"isFreePriceTierHidden"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"submit",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ks.prototype,"submit"),Ks.prototype),babelHelpers.applyDecoratedDescriptor(Ks.prototype,"_handleSubmitError",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ks.prototype,"_handleSubmitError"),Ks.prototype),Ks);var tl,rl,nl,il,ol,al,sl,ll;class cl{constructor(e,t,r,n,i,o){this.amount=e;this.currency=t;this.id=r;this.price_money=n;this.price_tier_level=i;this._class=o}}let ul=(tl=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"priceTiersLoadingState",rl,this);babelHelpers.initializerDefineProperty(this,"priceRangeLoadingState",nl,this);babelHelpers.initializerDefineProperty(this,"pricePageVersionLoadingState",il,this);babelHelpers.initializerDefineProperty(this,"priceTiers",ol,this);babelHelpers.initializerDefineProperty(this,"hasSeenFreePaidWarning",al,this);babelHelpers.initializerDefineProperty(this,"form",sl,this);babelHelpers.initializerDefineProperty(this,"instructorPageVersion",ll,this);this.course=e.course;h["a"].hasSeen(h["a"].ids.courseFreePaid,this.systemMessageData).then(Object(he["e"])((e=>{this.hasSeenFreePaidWarning=e.data})));this.isOwnerOptedIntoDeals=e.pageStore.course.isOwnerOptedIntoDeals;this.form=new el(this.course,e.pageStore)}get systemMessageData(){return{obj_id:this.course.id,obj_type:"course"}}get currencies(){return Object.keys(this.priceTiers).sort()}get showFreePaidWarning(){return!!(this.course.published_time&&(!this.course.is_paid||this.course.num_paid_switches)&&!this.hasSeenFreePaidWarning)}loadPriceTiers(){if(this.priceTiersLoadingState!==Ei.initial){return this._loadPriceTiersPromise}this.priceTiersLoadingState=Ei.loading;this._loadPriceTiersPromise=Qe["f"].get("/price-tiers/").then(Object(he["e"])((e=>{const t={};e.data.results.forEach((e=>{t[e.currency]=t[e.currency]||[];t[e.currency].push(e)}));this.priceTiers=t;this.priceTiersLoadingState=Ei.loaded}))).catch(Object(he["e"])((()=>{this.priceTiersLoadingState=Ei.initial})));return this._loadPriceTiersPromise}loadPriceRange(){if(this.isOwnerOptedIntoDeals){if(this.priceRangeLoadingState!==Ei.initial){return this._loadPriceRangePromise}this.priceRangeLoadingState=Ei.loading;this._loadPriceRangePromise=Qe["f"].get(`/pricing/${this.course.id}/course-price-range/get/`).then(Object(he["e"])((e=>{this.form.priceRange.isPriceRangeCallSuccess=true;this.form.priceRange.minListPrice=e.data.min_list_price;this.form.priceRange.maxListPrice=e.data.max_list_price;this.priceRangeLoadingState=Ei.loaded}))).catch(Object(he["e"])((()=>{this.form.priceRange.isPriceRangeCallSuccess=false;this.form.priceRange.minListPrice=undefined;this.form.priceRange.maxListPrice=undefined;this.priceRangeLoadingState=Ei.loaded})))}else{this.priceRangeLoadingState=Ei.loaded}return this._loadPriceRangePromise}loadPricePageVersion(){if(this.pricePageVersionLoadingState!==Ei.initial){return this._loadPricePageVersionPromise}this.pricePageVersionLoadingState=Ei.loading;this._loadPricePageVersionPromise=Qe["f"].get(`/pricing/experiment-info/`).then(Object(he["e"])((e=>{this.instructorPageVersion=e.data.version;this.pricePageVersionLoadingState=Ei.loaded}))).catch(Object(he["e"])((()=>{this.instructorPageVersion="v1";this.pricePageVersionLoadingState=Ei.loaded})));return this._loadPricePageVersionPromise}markFreePaidWarningSeen(){h["a"].seen(h["a"].ids.courseFreePaid,this.systemMessageData);this.hasSeenFreePaidWarning=true}getPriceTiersForCurrency(e){this.loadPriceTiers();if(Object.prototype.hasOwnProperty.call(this.priceTiers,e)){return this.priceTiers[e]}return[]}exchangePriceTierAmount(e,t,r){if(e===0){return 0}const n=this.getPriceTiersForCurrency(t).findIndex((t=>t.amount===e));const i=this.getPriceTiersForCurrency(r)[n];return i?i.amount:null}},rl=babelHelpers.applyDecoratedDescriptor(tl.prototype,"priceTiersLoadingState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return Ei.initial}}),nl=babelHelpers.applyDecoratedDescriptor(tl.prototype,"priceRangeLoadingState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return Ei.initial}}),il=babelHelpers.applyDecoratedDescriptor(tl.prototype,"pricePageVersionLoadingState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return Ei.initial}}),ol=babelHelpers.applyDecoratedDescriptor(tl.prototype,"priceTiers",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),al=babelHelpers.applyDecoratedDescriptor(tl.prototype,"hasSeenFreePaidWarning",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),sl=babelHelpers.applyDecoratedDescriptor(tl.prototype,"form",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),ll=babelHelpers.applyDecoratedDescriptor(tl.prototype,"instructorPageVersion",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return"v1"}}),babelHelpers.applyDecoratedDescriptor(tl.prototype,"currencies",[he["g"]],Object.getOwnPropertyDescriptor(tl.prototype,"currencies"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"showFreePaidWarning",[he["g"]],Object.getOwnPropertyDescriptor(tl.prototype,"showFreePaidWarning"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"loadPriceTiers",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tl.prototype,"loadPriceTiers"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"loadPriceRange",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tl.prototype,"loadPriceRange"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"loadPricePageVersion",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tl.prototype,"loadPricePageVersion"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"markFreePaidWarningSeen",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tl.prototype,"markFreePaidWarningSeen"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"getPriceTiersForCurrency",[f["a"]],Object.getOwnPropertyDescriptor(tl.prototype,"getPriceTiersForCurrency"),tl.prototype),babelHelpers.applyDecoratedDescriptor(tl.prototype,"exchangePriceTierAmount",[f["a"]],Object.getOwnPropertyDescriptor(tl.prototype,"exchangePriceTierAmount"),tl.prototype),tl);const pl=gettext("Set a price for your course");const dl=interpolate(gettext("Please select the currency and the price tier for your course. "+"If you’d like to offer your course for free, it must have a total video length of less than %s hours. "+"Also, courses with practice tests can not be free."),[bs["b"]]);const hl=gettext("When will this price be shown?");const ml=gettext("Set a backup price for your course");const fl=gettext("Learners will see this backup price in case your Deals price cannot be shown.");const gl=pl;const yl=gettext("Please select the currency and the price tier for your course.");const bl=interpolate(gettext("If you’d like to offer your course for free, "+"it must have a total video length of less than %s hours and can not have practice tests. "+"If you switch your course between free and paid more than once, your promotional announcements will be limited."),[bs["b"]]);const vl=gettext("The backup price may be shown in certain situations, such as:");const wl=gettext("In regions where we don't use the Deals program.");const El=gettext("In case of a temporary problem affecting the program");const Sl=gettext("Find out more");const _l=gettext("A note when switching between free and paid");const xl=gettext("If you switch your course between free and paid more than once, "+"your promotional announcements will be limited.");const Dl=gettext("You've opted into the Deals Program");const Cl=gettext("Learn more");const Tl=gettext("Through this program we optimize your list price for most currencies. "+"We will also offer your course at a discount during occasional promotions.");const Ol=gettext("Please finish your premium application");const kl=gettext("You'll be able to set your price once your payout method is approved.");const Pl=gettext("The owner of the course must complete the premium instructor application "+"in order to update the course price.");const Al=gettext("Complete the premium application");const Il=gettext("Purchase price range");const jl=gettext("You will be able to see your course's price range (lowest discount price to list price) 14 days after you publish.");const Rl=gettext("We're unable to display the course price range at this time. Please check back later.");const Nl=gettext("%s - %s");const Ll=gettext("This price range includes both discount and list prices for your course. "+"As part of the Deals Program, you can't set or edit this price range.");const Ml=gettext("The price Udemy sets is based on factors such as your course's content, "+"similar course prices, and learner response.");const ql=gettext("Select");const Ul=gettext("Free");const Hl=gettext("Backup Price Tier");const Fl=gettext("Price Tier");const Bl=gettext("(tier %s)");const zl=gettext("Currency");const Vl=gettext("Your changes have been successfully saved.");const Wl=gettext("Save");const Gl=gettext("Price");const Kl=gettext("Want us to handle pricing and promotions?");const $l=gettext("Enroll in the Deals Program to let Udemy dynamically set the price for your course based on demand, "+"learner ratings, and other competing courses.");const Xl=gettext("While we can't make guarantees, there are plenty of reasons to join our Deals Program:");const Yl=gettext("Nearly 95% of top-earning instructors are opted-in to the Deals Program.");const Ql=gettext("Courses opted-in to the Deals Program have an average of 5x more learners.");const Jl=gettext("Courses opted-in to the Deals Program have learners in nearly 3x more countries on average.");const Zl=gettext("Opt into Deals Program");const ec=gettext("Students will see your course's backup price in their local currency, "+'based on the corresponding tier in the <a class="priceTierMatrixUrl">price matrix</a>.');const tc=gettext("Your course price is based on the corresponding "+'tier in the <a class="priceTierMatrixUrl">price matrix</a>. '+"Learners will see it in their local currency.");var rc=r("./node_modules/@udemy/react-form-components/dist/esm/select/select.react-component.js");var nc=r("./node_modules/@udemy/icons/dist/info-outline.ud-icon");var ic=r.n(nc);const oc="https://support.udemy.com/hc/en-us/articles/229232827-Instructor-Promotional-Agreements-and-Udemy-Deals";const ac="https://support.udemy.com/hc/en-us/articles/229605668-Instructors-How-to-Set-The-Price-of-Your-Course";const sc="/instructor/user/edit-instructor-info/";const lc="support/Udemy+Price+Tier+Matrix-V3.pdf";var cc=r("./src/udemy/js/course-manage-price-and-coupons/price/v2/price.less");var uc=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let pc=class e extends s["Component"]{constructor(){super(...arguments);this.popoverText=this.props.instructorIsOptedIntoDeals?ec:tc}localizedMatrixUrl(){return g["a"].toStorageStaticAsset(lc)}render(){return l.a.createElement(be["a"],{a11yRole:"description",canToggleOnHover:true,detachFromTarget:true,withPadding:true,withArrow:false,placement:"right-end",className:"price--info-price-popover--3ju7r",trigger:l.a.createElement(ic.a,{label:false,size:"small"})},l.a.createElement(m["b"],{className:"ud-text-with-links",html:this.popoverText,interpolate:{priceTierMatrixUrl:l.a.createElement("a",{href:this.localizedMatrixUrl(),target:"_blank",rel:"noopener noreferrer"})}}))}};pc=uc([i["f"]],pc);var dc=r("./src/udemy/js/course-manage-price-and-coupons/price/v2/price-select.less");const hc=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{onChange:t,priceStore:r,instructorIsOptedIntoDeals:n}=e;const i=r.getPriceTiersForCurrency(r.form.data.currency);let o=null;if(!r.course.price_updated_date){o=l.a.createElement("option",{key:"empty",value:wi},ql)}let a=null;if(!r.course.is_practice_test_course&&r.course.num_published_practice_tests===0){a=l.a.createElement("option",{key:"free",value:0},Ul)}const s=n?Hl:Fl;return l.a.createElement("label",{className:"price-select--font-weight-bold--2CEJ2"},s,l.a.createElement(pc,{instructorIsOptedIntoDeals:n}),l.a.createElement(rc["a"],{disabled:i.length===0,onChange:t,value:r.form.data.amount},o,a,i.map((e=>l.a.createElement("option",{key:e.id,value:e.amount},e.price_money," ",interpolate(Bl,[e.price_tier_level],false))))))})));const mc=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{onChange:t,priceStore:r}=e;return l.a.createElement("label",{className:"price-select--font-weight-bold--2CEJ2"},zl,l.a.createElement(rc["a"],{disabled:r.currencies.length===0,onChange:t,value:r.form.data.currency},r.currencies.map((e=>l.a.createElement("option",{key:e,value:e},e.toUpperCase())))))})));const fc=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{priceStore:t,instructorIsOptedIntoDeals:r}=e;const n=e=>{if(!t.form.errors||!t.form.errors[e]){return null}return t.form.errors[e].join(" ")};const i=t.form.errors?"error":"neutral";const o=e=>{const r=Number(e.target.value);t.form.setData({amount:r})};const a=e=>{const r=e.target.value;const n=t.form;t.loadPriceTiers().then((()=>{const e=t.exchangePriceTierAmount(n.data.amount,n.data.currency,r);n.setData({amount:e,currency:r})}))};const s=e=>{e.preventDefault();t.form.submit().then((()=>{Object(Ui["c"])(Vl)})).catch(Xe["a"])};return l.a.createElement("form",{onSubmit:s},l.a.createElement(ji["b"],{"data-purpose":"price-select",label:Gl,labelProps:{className:"ud-sr-only"},validationState:i,note:n("non_field_errors"),udStyle:"fieldset",className:"price-select--price-select--LvR_3"},l.a.createElement("div",{className:"price-select--btn-group--3FVz4"},l.a.createElement(mc,{onChange:a,priceStore:t}),l.a.createElement(hc,{onChange:o,priceStore:t,instructorIsOptedIntoDeals:r})),l.a.createElement(le["a"],{"data-purpose":"price-form-submit-button",disabled:!t.form.canSubmit||t.form.isSubmitting,className:"price-select--save-price-button--HoGXL",type:"submit"},Wl)))})));var gc=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let yc=class e extends s["Component"]{render(){return l.a.createElement("div",{className:"price--course-pricing-selection--1sTb4","data-purpose":"course-pricing-selection"},l.a.createElement("div",{className:"ud-heading-md"},pl),l.a.createElement("p",null,dl),l.a.createElement(fc,{priceStore:this.props.priceStore,instructorIsOptedIntoDeals:false}))}};yc=gc([i["f"]],yc);var bc=r("./node_modules/@udemy/icons/dist/deal.ud-icon");var vc=r.n(bc);const wc=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{priceStore:t}=e;if(!t.course.is_published){return l.a.createElement(l.a.Fragment,null)}if(t.form.priceRange.isPriceRangeCallSuccess){const e=t.form.priceRange.minListPrice;const r=t.form.priceRange.maxListPrice;if(e==undefined&&r==undefined){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-deals-panel-bottom--3aelS"},l.a.createElement("div",null,Il),l.a.createElement("p",{className:"price--price-range-to-be-computed--33Jvn"},jl)))}else if(e.price_string.toLowerCase()!="free"&&r.price_string.toLowerCase()!="free"){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-deals-panel-bottom--3aelS"},l.a.createElement("div",null,Il),l.a.createElement("div",{className:"price--price-range--3HSBo"},interpolate(Nl,[e.price_string,r.price_string])),l.a.createElement("p",{className:"price--price-range-non-free--25ML7"},Ll),l.a.createElement("p",{className:"price--price-range-non-free--25ML7"},Ml)))}return l.a.createElement(l.a.Fragment,null)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-deals-panel-bottom--3aelS"},l.a.createElement("div",null,Il),l.a.createElement("p",{className:"price--price-range-error--p9thw"},Rl)))})));var Ec=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Sc=class e extends s["Component"]{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-deals--3jukF","data-purpose":"course-pricing-deals"},l.a.createElement("div",null,l.a.createElement("div",{className:"price--course-pricing-deals-panel-top--3s6b5"},l.a.createElement("div",{className:"price--heading--3v5ct"},l.a.createElement(vc.a,{size:"xlarge",label:false}),Dl),l.a.createElement("p",null,Tl),l.a.createElement(le["a"],{"data-purpose":"deals-learn-more",udStyle:"link-underline",componentClass:"a",size:"medium",href:oc},Cl)),l.a.createElement(wc,{priceStore:this.props.priceStore}))))}};Sc=Ec([i["f"]],Sc);const _c=Object(i["e"])("priceStore")(Object(i["f"])((e=>{let{priceStore:t}=e;return l.a.createElement("div",{className:"price--course-pricing-selection--1sTb4","data-purpose":"course-pricing-selection"},l.a.createElement("div",{className:"ud-heading-md"},ml),l.a.createElement("p",null,fl),l.a.createElement("p",null,bl),l.a.createElement(be["a"],{a11yRole:"description",canToggleOnHover:true,detachFromTarget:true,withPadding:true,withArrow:false,placement:"right-end",className:"price--where-price-shown--2aZwp",trigger:l.a.createElement(le["a"],{udStyle:"link-underline",className:"price--font-weight-normal--38Sa2"},hl)},l.a.createElement("div",null,l.a.createElement("div",null,vl),l.a.createElement("ul",null,l.a.createElement("li",null,wl),l.a.createElement("li",null,El)))),l.a.createElement(fc,{priceStore:t,instructorIsOptedIntoDeals:true}))})));var xc=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Dc=class e extends s["Component"]{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-deals--3jukF","data-purpose":"course-pricing-deals"},l.a.createElement("div",{className:"price--course-pricing-deals-panel--2L2oW"},l.a.createElement("div",{className:"price--heading--3v5ct"},l.a.createElement(vc.a,{size:"xlarge",label:false}),l.a.createElement("h2",{"data-purpose":"deals-title",className:"ud-heading-lg"},Kl)),l.a.createElement("div",{className:"price--content-opted-out--3UMRg"},l.a.createElement("div",null,$l),l.a.createElement("div",{className:"ud-heading-md"},Xl),l.a.createElement("ul",null,l.a.createElement("li",null,Yl),l.a.createElement("li",null,Ql),l.a.createElement("li",null,Jl)),l.a.createElement("div",{className:"price--learn-more--2CiXl"},l.a.createElement(le["a"],{"data-purpose":"deals-learn-more",udStyle:"link-underline",componentClass:"a",size:"medium",href:oc},Cl)),l.a.createElement("div",null,l.a.createElement(le["a"],{"data-purpose":"opt-into-deals",udStyle:"secondary",size:"medium",componentClass:"a",href:sc},Zl))))))}};Dc=xc([i["f"]],Dc);var Cc=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Tc=class e extends s["Component"]{render(){return l.a.createElement("div",{className:"price--course-pricing-selection--1sTb4","data-purpose":"course-pricing-selection"},l.a.createElement("div",{className:"ud-heading-md"},gl),l.a.createElement("p",null,yl),l.a.createElement("p",null,bl),l.a.createElement(fc,{priceStore:this.props.priceStore,instructorIsOptedIntoDeals:false}))}};Tc=Cc([i["f"]],Tc);var Oc=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let kc=class e extends s["Component"]{render(){let e,t,r;if(this.props.isOwner){e=Ol;t=kl;r=true}else{e=Pl;r=false}return l.a.createElement(b["b"],{udStyle:"warning",className:"price--alert-banner--2auwF","data-purpose":"premium-application-warning",ctaText:Al,showCta:r,actionButtonProps:{componentClass:"a",href:sc},dismissButtonProps:false,title:e,body:t})}};kc=Oc([i["f"]],kc);var Pc=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Ac=class e extends s["Component"]{renderFreePricesOnlyContainer(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-free-prices-only-container--2yMfu"},l.a.createElement(kc,{isOwner:this.props.isOwner}),l.a.createElement(yc,{priceStore:this.props.priceStore})))}renderOptedInContainer(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-opted-in-container--Jh44w"},l.a.createElement(_c,{priceStore:this.props.priceStore}),l.a.createElement(Sc,{priceStore:this.props.priceStore})))}renderOptedOutContainer(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"price--course-pricing-opted-out-container--3pTqk"},l.a.createElement(Tc,{priceStore:this.props.priceStore}),l.a.createElement(Dc,null)))}render(){return l.a.createElement(l.a.Fragment,null,!this.props.isOwnerPremiumInstructor&&this.renderFreePricesOnlyContainer()||this.props.isOwnerPremiumInstructor&&this.props.isOwnerOptedIntoDeals&&this.renderOptedInContainer()||this.renderOptedOutContainer())}};Ac=Pc([i["f"]],Ac);var Ic=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let jc=class e extends s["Component"]{componentDidMount(){this.props.course.load();this.props.priceStore.course.load().then((()=>{this.props.priceStore.loadPriceRange();this.props.priceStore.form.reset()}));this.props.priceStore.loadPriceTiers()}render(){if(this.props.course.loadingState!==Ei.loaded||this.props.priceStore.priceTiersLoadingState!==Ei.loaded||this.props.priceStore.priceRangeLoadingState!==Ei.loaded){return l.a.createElement(S,null)}const e="is_owner";const t=Boolean(this.props.course[e]);const r="owner_is_premium_instructor";const n=Boolean(this.props.course[r]);return l.a.createElement("div",{"data-purpose":"price-route-v2"},l.a.createElement(Ac,{isOwnerOptedIntoDeals:this.props.isOwnerOptedIntoDeals,isOwner:t,isOwnerPremiumInstructor:n,priceStore:this.props.priceStore}))}};jc=Ic([Object(i["e"])("priceStore"),i["f"]],jc);var Rc=r("./src/udemy/js/course-manage-price-and-coupons/price/beta-badge.less");var Nc,Lc;let Mc=Object(c["m"])(Nc=Object(i["f"])(Nc=(Lc=class e extends s["Component"]{constructor(e){super(e);e={course:new Ai(e.courseId),...e};this.priceStore=new ul(e);this.priceStore.loadPricePageVersion()}componentDidMount(){const{pageStore:e}=this.props;e.getContentLengthVideo()}render(){if(this.priceStore.pricePageVersionLoadingState!==Ei.loaded){return l.a.createElement(l.a.Fragment,null)}const{courseId:e,...t}=this.props;if(this.priceStore.instructorPageVersion=="v2"){return l.a.createElement(i["c"],{priceStore:this.priceStore},l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Pricing")},l.a.createElement(ms["a"],{className:"beta-badge--beta-badge--2rZHv"},gettext("Beta"))),l.a.createElement(d["a"],null,l.a.createElement(jc,{isOwnerOptedIntoDeals:this.priceStore.isOwnerOptedIntoDeals,course:this.priceStore.course}))))}return l.a.createElement(i["c"],{priceStore:this.priceStore},l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Pricing")}),l.a.createElement(d["a"],null,l.a.createElement(Fs,t))))}},Lc.propTypes={courseId:a.a.number.isRequired,history:a.a.object.isRequired,location:a.a.object.isRequired,pageStore:a.a.object.isRequired,onSaveComplete:a.a.func},Lc.defaultProps={onSaveComplete:()=>true},Lc))||Nc)||Nc;var qc=r("./src/udemy/js/course-manage-v2/accessibility/accessibility.less");var Uc,Hc,Fc;let Bc=Object(i["f"])(Uc=(Hc=(Fc=class e extends s["Component"]{onChange(e){this.props.accessibilityStore.setSetting(this.props.itemData.setting,e.target.checked)}render(){const{setting:e,title:t,tips:r,checkboxTitle:n,learnMoreText:i,learnMoreLink:o}=this.props.itemData;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Xo["a"],{className:"accessibility--accordion--c00vK"},l.a.createElement(Xo["a"].Panel,{title:t},l.a.createElement("ul",null,r.map(((e,t)=>l.a.createElement("li",{key:t},e)))),l.a.createElement("div",{className:"accessibility--item-learn-more--3Fmv1"},l.a.createElement(m["b"],{html:i,interpolate:{learnMoreLink:o}})))),l.a.createElement(Mr["a"],{size:"small",onChange:this.onChange,checked:!!this.props.accessibilityStore.settings.get(e),className:"accessibility--checkbox--3ydSt"},n))}},Fc.propTypes={itemData:a.a.object.isRequired,accessibilityStore:a.a.object.isRequired},Fc),babelHelpers.applyDecoratedDescriptor(Hc.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(Hc.prototype,"onChange"),Hc.prototype),Hc))||Uc;var zc,Vc,Wc;let Gc=(zc=class e{constructor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;babelHelpers.initializerDefineProperty(this,"isLoaded",Vc,this);babelHelpers.initializerDefineProperty(this,"settings",Wc,this);this.courseId=e}setSetting(e,t){Qe["f"].post(`/courses/${this.courseId}/settings/`,{setting:e,value:t?"on":"off"});Object(he["x"])((()=>{this.settings.set(e,t)}))}async loadAccessibilitySettings(){const e=await Qe["f"].get(`/courses/${this.courseId}/settings/`);Object(he["x"])((()=>{e.data.results.forEach((e=>{this.settings.set(e.setting,e.value==="on")}));this.isLoaded=true}))}},Vc=babelHelpers.applyDecoratedDescriptor(zc.prototype,"isLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Wc=babelHelpers.applyDecoratedDescriptor(zc.prototype,"settings",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return new Map}}),zc);const Kc=[{setting:"are_captions_provided",title:gettext("Closed captions accessibility checklist"),tips:[gettext("All auto-generated captions should be reviewed to check for accuracy. Captions must meet a 99% rate of accuracy."),gettext("Any relevant sound effects pertinent to the course must be noted in the captions, example: (Beeps)."),gettext("Any non-speech elements such as music are captured in the captions, example: (Jazzy music)."),gettext("Verbal delivery style indicators are captured in the captions, example: (Exclaims)."),gettext("Captions identify speakers on and off camera.")],learnMoreText:gettext('Learn more about providing <a className="teachLink">accessible closed captions</a> in the Udemy Teaching Center.'),learnMoreLink:"https://teach.udemy.com/accessible-video-content-considerations/",checkboxTitle:gettext("Captions in this course meet these guidelines")},{setting:"is_audio_description_included",title:gettext("Audio content accessibility checklist"),tips:[gettext("Audio can stand on its own, like an audiobook."),gettext("Visual content (when not just for decoration) is explained."),gettext("Interactions shown on screen are fully explained, without skipping steps."),gettext("Spoken content uses plain language, at a measured (not too quick) pace."),gettext("Figures of speech, idioms, jargon, or slang are avoided, and unfamiliar terms or acronyms are defined."),gettext("Captions for all spoken content have been reviewed for accuracy - especially proper names, acronyms, abbreviations, and technical terms.")],learnMoreText:gettext('Learn more about <a className="teachLink">accessible audio content</a> in the Udemy Teaching Center.'),learnMoreLink:"https://teach.udemy.com/accessible-video-content-considerations/#Audio-content",checkboxTitle:gettext("Audio content in this course meets these guidelines")},{setting:"is_course_content_accessible",title:gettext("Course materials accessibility checklist"),tips:[gettext("A table of contents for long documents and a glossary of terms are provided."),gettext("Semantic markup for headings, bulleted lists, or numbered lists has been applied to all documents."),gettext("Content is organized in short paragraphs and/or simple tables."),gettext("Links to external resources use descriptive language."),gettext("Alternative text is provided for all images in documents or slide presentations."),gettext("Strong color contrast has been used for text and images.")],learnMoreText:gettext('Learn more about <a className="teachLink">accessible course materials</a> in the Udemy Teaching Center.'),learnMoreLink:"https://teach.udemy.com/resources-on-accessibility-inclusivity/",checkboxTitle:gettext("Materials attached to this course meet these guidelines")}];var $c,Xc;let Yc=Object(i["f"])($c=(Xc=class e extends s["Component"]{constructor(e){super(e);this.accessibilityStore=new Gc(e.courseId)}componentDidMount(){this.accessibilityStore.loadAccessibilitySettings()}renderAlert(){return l.a.createElement(b["a"],{showCta:false,udStyle:"information",title:gettext("Create accessible learning content"),body:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,gettext("Accessibility provides a person with a disability access to — and benefits of — the same information, "+"interactions, and services as a person without a disability in a way that’s sensible, meaningful, and usable. "+"In short, it’s the inclusive practice of ensuring there are no barriers to learning for as many people as possible.")),l.a.createElement("p",null,gettext("Some may think that accessibility is primarily aimed at helping people with physical disabilities, "+"such as those with hearing or vision loss. However, making content accessible to everyone isn’t just the equitable "+"thing to do, it also helps to broaden your reach so that more learners can benefit from your courses.")),l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext('Learn more about <a className="teachLink">creating accessible content</a> in Udemy’s Teaching Center.'),interpolate:{teachLink:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"https://teach.udemy.com/course-creation/accessible-content/"})}})))})}renderChecklists(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"ud-heading-xl accessibility--subheading--2HJSe"},gettext("Accessibility checklists")),l.a.createElement("p",null,gettext("To help you create accessible course content, we’ve provided Instructors with recommendations "+"and best practices to consider while creating new courses or updating existing content. "+"Please review these accessibility recommendations and checklists to indicate whether your course meets the guidelines.")),l.a.createElement("p",null,gettext("Note: while these accessibility guidelines are strongly recommended, they are not a requirement prior "+"to publishing your course. Though content that does meet these accessibility guidelines may benefit from "+"a greater number of learners who could take your course.")),Kc.map(((e,t)=>l.a.createElement(Bc,{key:t,itemData:e,accessibilityStore:this.accessibilityStore}))))}renderResources(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"ud-heading-xl accessibility--subheading--2HJSe"},gettext("Accessibility resources")),l.a.createElement("p",null,l.a.createElement("a",{href:"https://teach.udemy.com/course-creation/accessible-content/",target:"_blank",rel:"noopener noreferrer"},gettext("Creating accessible learning content"))),l.a.createElement("p",null,l.a.createElement("a",{href:"https://teach.udemy.com/accessible-video-content-considerations/#Audio-content",target:"_blank",rel:"noopener noreferrer"},gettext("Audio content for accessible learning"))),l.a.createElement("p",null,l.a.createElement("a",{href:"https://teach.udemy.com/accessible-video-content-considerations/#Visual-content",target:"_blank",rel:"noopener noreferrer"},gettext("Visual content for accessible learning"))),l.a.createElement("p",null,l.a.createElement("a",{href:"https://teach.udemy.com/inclusive-content-considerations/",target:"_blank",rel:"noopener noreferrer"},gettext("Planning your course accessibility considerations"))),l.a.createElement("p",null,l.a.createElement("a",{href:"https://teach.udemy.com/resources-on-accessibility-inclusivity/",target:"_blank",rel:"noopener noreferrer"},gettext("Creating accessible resource documents"))),l.a.createElement("p",null,l.a.createElement("a",{href:"https://support.udemy.com/hc/articles/9834096080663",target:"_blank",rel:"noopener noreferrer"},gettext("Marking your course as accessible"))))}renderAccessibility(){return l.a.createElement(l.a.Fragment,null,this.renderAlert(),this.renderChecklists(),this.renderResources())}render(){return l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Accessibility")}),l.a.createElement(d["a"],null,!this.accessibilityStore.isLoaded?l.a.createElement(S,null):this.renderAccessibility()))}},Xc.propTypes={courseId:a.a.number.isRequired},Xc))||$c;var Qc=r("./node_modules/@udemy/react-form-components/dist/esm/radio/radio.react-component.js");var Jc=r("./src/udemy/js/course-manage-v2/availability/constants.js");var Zc,eu,tu,ru,nu,iu,ou,au;let su=(Zc=class e{constructor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;babelHelpers.initializerDefineProperty(this,"availableDate",eu,this);babelHelpers.initializerDefineProperty(this,"availableDatePickerValue",tu,this);babelHelpers.initializerDefineProperty(this,"statusLoaded",ru,this);babelHelpers.initializerDefineProperty(this,"applyToAllCourses",nu,this);babelHelpers.initializerDefineProperty(this,"optionSelected",iu,this);babelHelpers.initializerDefineProperty(this,"respondTimeFrame",ou,this);babelHelpers.initializerDefineProperty(this,"currStatusId",au,this);this.statusUpdateMessage=gettext("Your changes have been successfully saved");this.courseId=e;this.setAvailableDate(new Date)}get saveEnabled(){return this.optionSelected===Jc["a"][Jc["b"]]&&Boolean(this.respondTimeFrame)||this.optionSelected===Jc["a"][Jc["c"]]||this.optionSelected===Jc["a"][Jc["e"]]}setAvailableDate(e){this.availableDatePickerValue=e;if(e){this.availableDate=e}}onDateChange(e){this.optionSelected=2;this.setAvailableDate(e)}onRespondSelect(e){this.optionSelected=Jc["a"][e]}onDropdownSelect(e){this.optionSelected=1;this.respondTimeFrame=e}onApplyToAllChange(e){this.applyToAllCourses=e}submitStatusForm(){if(this.currStatusId&&!this.applyToAllCourses){return this.updateStatus()}return this.createStatus()}createStatus(){const{data:e,params:t,url:r}=this.getRequestValues();return Qe["f"].post(r,e,t).then(Object(he["e"])((e=>{this.currStatusId=e.data.id;Object(Ui["c"])(this.statusUpdateMessage)}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}updateStatus(){const{data:e,params:t,url:r}=this.getRequestValues("PUT");return Qe["f"].put(r,e,t).then(Object(he["e"])((e=>{this.currStatusId=e.data.id;Object(Ui["c"])(this.statusUpdateMessage)}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}fetchCourseStatus(){const e={"fields[instructor_course_status]":"status,respond_time_frame,available_date"};const t=`users/me/courses/${this.courseId}/instructor-course-statuses/`;return Qe["f"].get(t,e).then(Object(he["e"])((e=>{const t=e.data.results[0];if(t){this.currStatusId=t.id;this.optionSelected=t.status;this.respondTimeFrame=t.respond_time_frame;if(t.available_date){this.setAvailableDate(lu(t.available_date))}}this.statusLoaded=true}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}getRequestValues(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"POST";const t={status:this.optionSelected};const r=`users/me/courses/${this.courseId}/instructor-course-statuses/`;const n={"fields[instructor_course_status]":"status,respond_time_frame,available_date"};if(this.applyToAllCourses){t.apply_to_all_courses=true}if(this.optionSelected===Jc["a"][Jc["b"]]){t.respond_time_frame=this.respondTimeFrame;t.available_date=null}if(this.optionSelected===Jc["a"][Jc["c"]]){t.available_date=cu(this.availableDate).toISOString();t.respond_time_frame=null}if(this.optionSelected===Jc["a"][Jc["e"]]){t.available_date=null;t.respond_time_frame=null}const i=e==="PUT"?r.concat(`${this.currStatusId}/`):r;return{data:t,params:n,url:i}}},eu=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"availableDate",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),tu=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"availableDatePickerValue",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),ru=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"statusLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),nu=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"applyToAllCourses",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),iu=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"optionSelected",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 3}}),ou=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"respondTimeFrame",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),au=babelHelpers.applyDecoratedDescriptor(Zc.prototype,"currStatusId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"saveEnabled",[he["g"]],Object.getOwnPropertyDescriptor(Zc.prototype,"saveEnabled"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"setAvailableDate",[he["e"]],Object.getOwnPropertyDescriptor(Zc.prototype,"setAvailableDate"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"onDateChange",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Zc.prototype,"onDateChange"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"onRespondSelect",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Zc.prototype,"onRespondSelect"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"onDropdownSelect",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Zc.prototype,"onDropdownSelect"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"onApplyToAllChange",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Zc.prototype,"onApplyToAllChange"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"fetchCourseStatus",[f["a"]],Object.getOwnPropertyDescriptor(Zc.prototype,"fetchCourseStatus"),Zc.prototype),babelHelpers.applyDecoratedDescriptor(Zc.prototype,"getRequestValues",[f["a"]],Object.getOwnPropertyDescriptor(Zc.prototype,"getRequestValues"),Zc.prototype),Zc);function lu(e){const[t,r,n]=e.slice(0,10).split("-");return new Date(parseInt(t,10),parseInt(r,10)-1,parseInt(n,10))}function cu(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))}var uu=r("./src/udemy/js/course-manage-v2/availability/availability.less");var pu,du,hu;const mu=e=>{let{isSaveEnabled:t,onSaveForm:r}=e;return l.a.createElement(le["a"],{udStyle:"white-solid",size:"small",disabled:!t,onClick:r},gettext("Save"))};mu.propTypes={isSaveEnabled:a.a.bool.isRequired,onSaveForm:a.a.func.isRequired};const fu=Object(i["f"])((e=>{let{availabilityStore:t}=e;return l.a.createElement("div",{className:"availability--inline--UN-p3"},l.a.createElement(ji["b"],{label:gettext("Choose availability"),labelProps:{className:"ud-sr-only"}},l.a.createElement(rc["a"],{size:"small",value:t.respondTimeFrame||"",onChange:e=>t.onDropdownSelect(e.target.value)},l.a.createElement(rc["a"].Placeholder,null,gettext("Choose")),Jc["d"].map(((e,t)=>l.a.createElement("option",{key:t,value:e},e))))))}));fu.propTypes={availabilityStore:a.a.object.isRequired};const gu=e=>{let{children:t,...r}=e;return l.a.createElement("div",{className:"availability--inline--UN-p3"},l.a.createElement(ji["b"],{label:gettext("Choose date"),labelProps:{className:"ud-sr-only"},validationState:!r.value?"error":"neutral",note:!r.value?gettext("Invalid date"):null},l.a.createElement(Wi["a"],r)))};gu.propTypes={value:a.a.instanceOf(Date)};gu.defaultProps={value:null};let yu=Object(i["f"])(pu=(du=(hu=class e extends s["Component"]{constructor(e){super(e);this.availabilityStore=new su(e.pageStore.courseId);e.pageStore.setHeaderActions(this.renderHeaderButtons)}componentDidMount(){this.availabilityStore.fetchCourseStatus()}onApplyToAllChange(e){let{target:t}=e;this.availabilityStore.onApplyToAllChange(t.checked)}saveForm(){return this.availabilityStore.submitStatusForm().then((()=>{this.props.pageStore.updateMenuCheckbox()}))}renderHeaderButtons(){return l.a.createElement(mu,{isSaveEnabled:this.availabilityStore.saveEnabled,onSaveForm:this.saveForm})}renderAvailableLabel(e){const t=this.renderRadioLabelText(undefined,e);let r;if(e){r=this.availabilityStore.respondTimeFrame||gettext("Choose availability")}else{r=l.a.createElement(fu,{availabilityStore:this.availabilityStore})}return l.a.createElement(m["b"],{className:e?"ud-sr-only":null,html:gettext('<span class="text">Questions are usually answered within </span>'+'<span class="options">%(respondTime)s</span>'),interpolate:{options:r,text:t}})}renderNotAvailableLabel(e){const t=this.renderRadioLabelText(undefined,e);let r;const{availableDatePickerValue:n}=this.availabilityStore;if(e){const e=Object(Xi["a"])().locale.replace("_","-")||"en-US";r=n?n.toLocaleDateString(e):gettext("Invalid date")}else{r=l.a.createElement(gu,{value:n,onChange:this.availabilityStore.onDateChange,min:"TODAY",popoverComponentClass:be["a"],size:"small"})}return l.a.createElement(m["b"],{className:e?"ud-sr-only":null,html:gettext('<span class="text">My team is out of office, returning </span>'+'<span class="datetime">%(date)s</span>'+'<span class="text"> and will be able to respond to Q&A when we return.</span>'),interpolate:{datetime:r,text:t}})}renderUnspecifiedLabel(e){return this.renderRadioLabelText(gettext("No status"),e)}renderRadioLabelText(e,t){return l.a.createElement("span",{className:((t?"ud-sr-only":null)?(t?"ud-sr-only":null)+" ":"")+"availability--radio-label-text--3VvQj","aria-hidden":t?null:true},e)}renderRadio(e,t){const r=Jc["a"][e]===this.availabilityStore.optionSelected;const n=()=>this.availabilityStore.onRespondSelect(e);return l.a.createElement("div",null,l.a.createElement("div",{className:"availability--inline--UN-p3 availability--radio--3EwpE",onClick:n},l.a.createElement(Qc["b"],{size:"large",name:"availability",value:e,onChange:n,onClick:e=>e.stopPropagation(),checked:r},t(true)),t(false)))}renderAvailability(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{"data-purpose":"section-description"},gettext("Communicate your Q&A availability to your students. This will be "+"displayed to students when they ask a question.")),l.a.createElement("form",{className:"availability--form--2sDJi"},l.a.createElement(ji["b"],{udStyle:"fieldset",label:gettext("Availability"),labelProps:{className:"ud-sr-only"}},this.renderRadio(Jc["b"],this.renderAvailableLabel),this.renderRadio(Jc["c"],this.renderNotAvailableLabel),this.renderRadio(Jc["e"],this.renderUnspecifiedLabel)),l.a.createElement("div",{className:"availability--inline--UN-p3 availability--checkbox-row--33cpT"},l.a.createElement(Mr["a"],{size:"large",onChange:this.onApplyToAllChange},gettext("Apply this status to all courses that I own")))))}render(){const e=!this.props.pageStore.courseLoaded||!this.availabilityStore.statusLoaded;return l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Availability")}),l.a.createElement(d["a"],null,e?l.a.createElement(S,null):this.renderAvailability()))}},hu.propTypes={pageStore:a.a.object.isRequired},hu),babelHelpers.applyDecoratedDescriptor(du.prototype,"onApplyToAllChange",[f["a"]],Object.getOwnPropertyDescriptor(du.prototype,"onApplyToAllChange"),du.prototype),babelHelpers.applyDecoratedDescriptor(du.prototype,"saveForm",[f["a"]],Object.getOwnPropertyDescriptor(du.prototype,"saveForm"),du.prototype),babelHelpers.applyDecoratedDescriptor(du.prototype,"renderHeaderButtons",[f["a"]],Object.getOwnPropertyDescriptor(du.prototype,"renderHeaderButtons"),du.prototype),babelHelpers.applyDecoratedDescriptor(du.prototype,"renderAvailableLabel",[f["a"]],Object.getOwnPropertyDescriptor(du.prototype,"renderAvailableLabel"),du.prototype),babelHelpers.applyDecoratedDescriptor(du.prototype,"renderNotAvailableLabel",[f["a"]],Object.getOwnPropertyDescriptor(du.prototype,"renderNotAvailableLabel"),du.prototype),babelHelpers.applyDecoratedDescriptor(du.prototype,"renderUnspecifiedLabel",[f["a"]],Object.getOwnPropertyDescriptor(du.prototype,"renderUnspecifiedLabel"),du.prototype),du))||pu;var bu=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");var vu=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var wu=r("./src/udemy/js/course-manage-v2/events.js");var Eu;let Su=(Eu=class e{constructor(e,t){this.wasMarkAsSeen=false;this.courseId=e;this.courseManageInfoSeenLabel=t.courseManageInfoSeenLabel;this.content=t.content}setPageAsSeen(){if(this.wasMarkAsSeen){return Promise.resolve(false)}return Qe["f"].patch(`/courses/${this.courseId}/info/${this.courseManageInfoSeenLabel}/`).then((()=>{this.wasMarkAsSeen=true;return true}))}},babelHelpers.applyDecoratedDescriptor(Eu.prototype,"setPageAsSeen",[f["a"]],Object.getOwnPropertyDescriptor(Eu.prototype,"setPageAsSeen"),Eu.prototype),Eu);class _u{constructor(){this.courseManageInfoSeenLabel="seen_course_structure";this.content={title:gettext("Course structure"),headerData:{name:"courseStructure",title:gettext("There's a course in you.  Plan it out."),text:gettext("Planning your course carefully will create a clear learning path for students and help "+"you once you film. Think down to the details of each lecture including the skill you’ll teach, estimated "+"video length, practical activities to include, and how you’ll create introductions and summaries."),ctaImage:g["a"].toStorageStaticAsset("instructor/manage/library-help.jpg"),ctaImage2x:g["a"].toStorageStaticAsset("instructor/manage/library-help-2x.jpg"),ctaHeader:gettext("Our library of resources"),ctaSentence:gettext("Tips and guides to structuring a course students love"),ctaButtonText:gettext("Teaching Center"),ctaUrl:"/udemy-teach-hub"},tipsData:{name:"tips",title:gettext("Tips"),tips:[{title:gettext("Start with your goals."),text:interpolate(gettext("Setting goals for what learners will accomplish in your course (also known as"+' <a target="_blank" href="%(objectives_url)s">learning objectives</a>)'+" at the beginning will help you determine what content to include in "+"your course and how you will teach the content to help your learners achieve the goals."),{objectives_url:"/udemy-teach-hub/course_creation_learning_objectives/"},true)},{title:gettext("Create an outline."),text:interpolate(gettext("Decide what skills you’ll teach and how you’ll teach them. Group related "+"lectures into sections. Each section should have at least 3 lectures, "+"and include at least one assignment or practical activity. "+'<a target="_blank" href="%(outline_url)s">Learn more</a>.'),{outline_url:"/udemy-teach-hub/course_creation_outline_course/"},true)},{title:gettext("Introduce yourself and create momentum."),text:gettext("People online want to start learning quickly. Make an introduction "+"section that gives learners something to be excited about in the first 10 minutes.")},{title:gettext("Sections have a clear learning objective."),text:interpolate(gettext("Introduce each section by describing the section's "+'<a target="_blank" href="%(objectives_url)s">goal and why it’s important</a>.'+" Give lectures and sections titles that reflect their content and have a logical flow."),{objectives_url:"/udemy-teach-hub/course_creation_learning_objectives/"},true)},{title:gettext("Lectures cover one concept."),text:gettext("A good lecture length is 2-7 minutes to keep students interested and help "+"them study in short bursts. Cover a single topic in each lecture so "+"learners can easily find and re-watch them later.")},{title:gettext("Mix and match your lecture types."),text:gettext("Alternate between filming yourself, your screen, and slides or "+"other visuals. Showing yourself can help learners feel connected.")},{title:gettext("Practice activities create hands-on learning."),text:interpolate(gettext('Help learners <a target="_blank" href="%(practice_activities_url)s">apply your lessons</a>'+" to their real world with projects, assignments, coding exercises, or worksheets."),{practice_activities_url:"/udemy-teach-hub/course_creation_practice_activities/"},true)}]},requirementsData:{name:"requirements",title:gettext("Requirements"),requirements:[{text:interpolate(gettext('See the <a target="_blank" href="%(checklist_url)s">complete list</a>'+" of course quality requirements"),{checklist_url:g["a"].toSupportLink("course_quality_checklist")},true)},{text:gettext("Your course must have at least five lectures")},{text:gettext("All lectures must add up to at least 30+ minutes of total video")},{text:gettext("Your course is composed of valuable educational content and free of"+" promotional or distracting materials")}]},resourcesData:{name:"resources",title:gettext("Resources"),resources:[{title:gettext("Udemy Trust & Safety"),text:gettext("Our policies for instructors and students"),link:"/udemy-teach-hub/trust_safety/"},{title:gettext("Join the instructor community"),text:gettext("A place to connect with other instructors"),link:g["a"].toInstructorCommunity()},{title:gettext("Official Udemy Course: How to Create an Online Course"),text:gettext("Learn about course creation from the Udemy Instructor Team and experienced instructors"),link:"/course/official-udemy-create-course/"}]}}}}class xu{constructor(){this.courseManageInfoSeenLabel="seen_film_and_edit";this.content={title:gettext("Film & edit"),headerData:{name:"filmAndEdit",title:gettext("You’re ready to share your knowledge."),text:gettext("This is your moment! If you’ve structured your course and used our guides, "+"you're well prepared for the actual shoot. Pace yourself, take time to make it just right, and fine-tune when you edit. "),ctaImage:g["a"].toStorageStaticAsset("instructor/manage/video-help.jpg"),ctaImage2x:g["a"].toStorageStaticAsset("instructor/manage/video-help-2x.jpg"),ctaHeader:gettext("You’re in good company"),ctaSentence:gettext("Chat and get production help with other Udemy instructors"),ctaButtonText:gettext(" Join the community"),ctaUrl:g["a"].toInstructorCommunity()},tipsData:{name:"tips",title:gettext("Tips"),tips:[{title:gettext("Take breaks and review frequently."),text:gettext("Check often for any changes such as new noises. Be aware of your"+" own energy levels--filming can tire you out and that translates "+"to the screen.")},{title:gettext("Build rapport."),text:gettext("Students want to know who’s teaching them. Even for a course that"+" is mostly screencasts, film yourself for your introduction. Or go the extra mile "+"and film yourself introducing each section!")},{title:gettext("Being on camera takes practice."),text:gettext("Make eye contact with the camera and speak clearly. Do as many retakes as you need to get it right. ")},{title:gettext("Set yourself up for editing success."),text:gettext("You can edit out long pauses, mistakes, and ums or ahs. Film a few "+"extra activities or images that you can add in later to cover those cuts.")},{title:gettext("Create audio marks."),text:gettext("Clap when you start each take to easily locate the audio spike during "+"editing. Use our guides to manage your recording day efficiently. ")},{title:gettext("For screencasts, clean up."),text:gettext("Move unrelated files and folders off your desktop and open any tabs "+"in advance. Make on-screen text at least 24pt and use zooming to highlight.")}]},requirementsData:{name:"requirements",title:gettext("Requirements"),requirements:[{text:gettext("Film and export in HD to create videos of at least 720p, or 1080p if possible")},{text:gettext("Audio should come out of both the left and right channels and be synced to your video")},{text:gettext("Audio should be free of echo and background noise so as not to be distracting to students")}]},resourcesData:{name:"resources",title:gettext("Resources"),resources:[{title:gettext("Create a test video"),text:gettext("Get feedback before filming your whole course"),link:"/home/teaching/test-video/?ref=film_and_edit"},{title:gettext("Teaching Center: Guide to quality A/V"),text:gettext("Film and edit with confidence"),link:"/udemy-teach-hub/audio_video_quality/"},{title:gettext("Udemy trust & safety"),text:gettext("Our policies for instructors and students"),link:"/udemy-teach-hub/trust_safety/"}]}}}}class Du{constructor(){this.courseManageInfoSeenLabel="seen_setup";this.content={title:gettext("Setup & test video"),headerData:{name:"setUp",title:gettext("Arrange your ideal studio and get early feedback"),text:gettext("It's important to get your audio and video set up correctly now, because "+"it's much more difficult to fix your videos after you’ve recorded. There are many creative"+" ways to use what you have to create professional looking video. "),ctaImage:g["a"].toStorageStaticAsset("instructor/manage/video-help.jpg"),ctaImage2x:g["a"].toStorageStaticAsset("instructor/manage/video-help-2x.jpg"),ctaHeader:gettext("Free expert video help"),ctaSentence:gettext("Get personalized advice on your audio and video"),ctaButtonText:gettext("Create a test video"),ctaUrl:"/home/teaching/test-video?ref=setup_and_tv"},tipsData:{name:"tips",title:gettext("Tips"),tips:[{title:gettext("Equipment can be easy."),text:gettext("You don’t need to buy fancy equipment. Most smartphone cameras can capture "+"video in HD, and you can record audio on another phone or external microphone.")},{title:gettext("Students need to hear you."),text:gettext("A good microphone is the most important piece of equipment you will choose. "+"There are lot of affordable options.. Make sure it’s correctly plugged in and 6-12 inches (15-30 cm) from you.")},{title:gettext("Make a studio."),text:gettext("Clean up your background and arrange props. Almost any small space "+"can be transformed with a backdrop made of colored paper or an ironed bed sheet.")},{title:gettext("Light the scene and your face."),text:gettext("Turn off overhead lights. Experiment with three point lighting by "+"placing two lamps in front of you and one behind aimed on the background.")},{title:gettext("Reduce noise and echo."),text:gettext("Turn off fans or air vents, and record at a time when it’s quiet. Place "+"acoustic foam or blankets on the walls, and bring in rugs or furniture to dampen echo.")},{title:gettext("Be creative."),text:gettext("Students won’t see behind the scenes. No one will know if you’re "+"surrounded by pillows for soundproofing...unless you tell other instructors in the community!")}]},requirementsData:{name:"requirements",title:gettext("Requirements"),requirements:[{text:gettext("Film and export in HD to create videos of at least 720p, or 1080p if possible")},{text:gettext("Audio should come out of both the left and right channels and be synced to your video")},{text:gettext("Audio should be free of echo and background noise so as not to be distracting to students")}]},resourcesData:{name:"resources",title:gettext("Resources"),resources:[{title:gettext("Teaching Center: Guide to equipment"),text:gettext("Make a home studio on a budget"),link:"/udemy-teach-hub/course_creation_filming/"},{title:gettext("Udemy Trust & Safety"),text:gettext("Our policies for instructors and students"),link:"/udemy-teach-hub/trust_safety/"},{title:gettext("Join the community"),text:gettext("A place to talk with other instructors"),link:g["a"].toInstructorCommunity()}]}}}}var Cu=r("./src/udemy/js/course-manage-v2/content-only/content-only.less");var Tu,Ou;const ku=(e,t)=>()=>{bu["a"].publishEvent(new wu["b"]({courseId:t,category:"course-structure",action:"click",objectType:"course",objectId:t}))};const Pu=e=>{let{data:t,courseId:r}=e;return l.a.createElement("div",{"data-purpose":"header-panel",className:"content-only--header-panel--32p3M"},l.a.createElement("div",{className:"content-only--header-panel-left--2cslp"},l.a.createElement("h2",{"data-purpose":"header-title",className:"ud-heading-xl"},t.title),l.a.createElement("p",{"data-purpose":"header-text",className:"ud-text-lg content-only--header-text--oy4O2"},t.text)),l.a.createElement("div",{className:"content-only--header-panel-right--23he0"},l.a.createElement(vu["a"],{className:"content-only--cta-image--21c9z","data-purpose":"cta-image",src:t.ctaImage,srcSet:t.ctaImage2x&&`${t.ctaImage} 1x, ${t.ctaImage2x} 2x`,alt:"",width:120,height:90}),l.a.createElement("div",null,l.a.createElement("h2",{className:"ud-heading-lg","data-purpose":"cta-header"},t.ctaHeader),l.a.createElement("p",{className:"content-only--cta-text--1UKIU","data-purpose":"cta-text"},t.ctaSentence)),l.a.createElement("div",{className:"content-only--cta-button--lZfxK"},l.a.createElement(le["a"],{"data-purpose":"cta-button",udStyle:"secondary",onClick:ku(t.ctaUrl,r),componentClass:"a",href:t.ctaUrl,target:"_blank",rel:"noopener noreferrer"},t.ctaButtonText))))};Pu.propTypes={data:a.a.object,courseId:a.a.number};Pu.defaultProps={data:undefined,courseId:undefined};const Au=e=>{let{tipsData:t,requirementsData:r,resourcesData:n,courseId:i}=e;const o=t.tips.map(((e,t)=>l.a.createElement(l.a.Fragment,{key:t},l.a.createElement("h3",{"data-purpose":"tip-title",className:"ud-heading-md content-only--bottom-panel-title--3r5rz"},e.title),l.a.createElement("p",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"content-only-page:tip-text",domPurifyConfig:{ADD_ATTR:["target"]},html:e.text,dataPurpose:'tip-text"'}))))));const a=r.requirements.map(((e,t)=>l.a.createElement("li",{key:t},l.a.createElement("p",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"content-only-page:requirements-text",domPurifyConfig:{ADD_ATTR:["target"]},html:e.text,dataPurpose:"requirements-text"}))))));const s=n.resources.map(((e,t)=>l.a.createElement(l.a.Fragment,{key:t},l.a.createElement("h3",{className:"content-only--bottom-panel-title--3r5rz"},l.a.createElement("a",{className:"ud-heading-md ud-link-underline",onClick:ku(e.link,i),href:e.link,target:"_blank",rel:"noopener noreferrer"},e.title)),l.a.createElement("p",null,e.text))));return l.a.createElement("div",{"data-purpose":"bottom-panel",className:"content-only--bottom-panel--MqfCu"},l.a.createElement("h2",{"data-purpose":"tips-data-title",className:"ud-heading-xl content-only--bottom-panel-section-title--3yOKJ"},t.title),l.a.createElement("div",{"data-purpose":"tips-data-text"},o),l.a.createElement("h2",{"data-purpose":"requirements-data-title",className:"ud-heading-xl content-only--bottom-panel-section-title--3yOKJ"},r.title),l.a.createElement("ul",{"data-purpose":"requirements-data-text",className:"content-only--requirements--CpH1r"},a),l.a.createElement("h2",{"data-purpose":"resource-data-title",className:"ud-heading-xl content-only--bottom-panel-section-title--3yOKJ"},n.title),l.a.createElement("div",{"data-purpose":"resource-data-text"},s))};Au.propTypes={tipsData:a.a.object,requirementsData:a.a.object,resourcesData:a.a.object,courseId:a.a.number};Au.defaultProps={tipsData:undefined,requirementsData:undefined,resourcesData:undefined,pageName:undefined,courseId:undefined};let Iu=Object(i["f"])(Tu=(Ou=class e extends s["Component"]{constructor(e){super(e);this.store={};this.mainStore=undefined;this.setupPage(e)}componentDidMount(){this.pageWillLoad()}UNSAFE_componentWillReceiveProps(e){this.setupPage(e);this.pageWillLoad()}pageWillLoad(){if(!this.mainStore){return}const{onPageOpen:e}=this.props;const{setPageAsSeen:t}=this.mainStore;t().then((t=>{if(t){e()}}))}setupPage(e){const{pageType:t,courseId:r}=e;if(!(t in this.store)){let e;switch(t){case"course-structure":e=new _u;break;case"setup":e=new Du;break;case"film":e=new xu;break}if(e){this.store[t]=new Su(r,e)}}this.mainStore=t in this.store?this.store[t]:undefined}render(){if(!this.mainStore){return null}const{content:e}=this.mainStore;return l.a.createElement("div",null,l.a.createElement(bn["a"],{title:e.title}),l.a.createElement(Pu,{data:e.headerData,courseId:this.props.courseId}),l.a.createElement(Au,{tipsData:e.tipsData,requirementsData:e.requirementsData,resourcesData:e.resourcesData,courseId:this.props.courseId}))}},Ou.propTypes={courseId:a.a.number.isRequired,pageType:a.a.string.isRequired,onPageOpen:a.a.func},Ou.defaultProps={onPageOpen:()=>true},Ou))||Tu;class ju extends s["Component"]{render(){const{courseId:e,pageType:t,onPageOpen:r}=this.props;return l.a.createElement(d["a"],{wideContent:true},l.a.createElement(Iu,{courseId:e,pageType:t,onPageOpen:r}))}}ju.propTypes={courseId:a.a.number.isRequired,pageType:a.a.string.isRequired,onPageOpen:a.a.func.isRequired};var Ru=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-with-counter.react-component.js");var Nu=r("./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/image-upload-preview-with-crop.react-component.js");var Lu=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/rich-text-editor.react-component.js");var Mu,qu,Uu;let Hu=Object(i["f"])(Mu=(qu=(Uu=class e extends s["Component"]{constructor(){super(...arguments);this.message=gettext("Changes you made may not be saved.")}componentDidMount(){window.addEventListener("beforeunload",this.onloadHandler)}componentWillUnmount(){window.removeEventListener("beforeunload",this.onloadHandler)}onloadHandler(e){const{when:t}=this.props;if(t){e.returnValue=this.message;return this.message}}render(){const{when:e}=this.props;return l.a.createElement(c["a"],{when:e,message:this.message})}},Uu.propTypes={when:a.a.bool.isRequired},Uu),babelHelpers.applyDecoratedDescriptor(qu.prototype,"onloadHandler",[f["a"]],Object.getOwnPropertyDescriptor(qu.prototype,"onloadHandler"),qu.prototype),qu))||Mu;var Fu=r("./src/udemy/js/course-labels/constants.js");var Bu=r("./src/udemy/js/course-labels/course-has-labels.mobx-store.js");var zu,Vu,Wu;let Gu=(zu=class e{constructor(e,t,r){babelHelpers.initializerDefineProperty(this,"locked",Vu,this);babelHelpers.initializerDefineProperty(this,"_originalLabelsJSON",Wu,this);this.courseHasLabelsStore=new Bu["a"](e,t,false);if(this.courseHasLabelsStore.visibleCourseHasLabels.length===1){this.courseHasLabelsStore.visibleCourseHasLabels[0].setPrimary(false)}this.setLocked(r);this.captureOriginalLabelsJSON()}get dirty(){return this._originalLabelsJSON!==this.labelsJSON}get labelsJSON(){const e={ids:[],primary:null};const t={ids:[],primary:null};for(const r of this.courseHasLabelsStore.visibleCourseHasLabels){const n=r.label;if(n._class===Fu["b"]){e.ids.push(n.id)}else{t.ids.push(n.id)}}e.primary=this.getPrimaryLabelId(Fu["b"]);t.primary=this.getPrimaryLabelId(Fu["e"]);return JSON.stringify({approved_labels:e,proposed_labels:t})}getPrimaryLabelId(e){const t=this.courseHasLabelsStore.primaryCourseHasLabels.filter((t=>t.label._class===e));if(t.length){return t[0].label.id}const r=this.courseHasLabelsStore.visibleCourseHasLabels.filter((t=>t.label._class===e));if(r.length===1&&this.courseHasLabelsStore.visibleCourseHasLabels.length===1&&this.courseHasLabelsStore.primaryCourseHasLabels.length===0){return r[0].label.id}return null}setPrimary(e,t){if(e!==null){e.setPrimary(false)}if(t!==null){t.setPrimary(true)}}setLocked(e){this.locked=e}captureOriginalLabelsJSON(){this._originalLabelsJSON=this.labelsJSON}getCourseHasLabels(){return this.courseHasLabelsStore.visibleCourseHasLabels}},Vu=babelHelpers.applyDecoratedDescriptor(zu.prototype,"locked",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Wu=babelHelpers.applyDecoratedDescriptor(zu.prototype,"_originalLabelsJSON",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(zu.prototype,"dirty",[he["g"]],Object.getOwnPropertyDescriptor(zu.prototype,"dirty"),zu.prototype),babelHelpers.applyDecoratedDescriptor(zu.prototype,"labelsJSON",[he["g"]],Object.getOwnPropertyDescriptor(zu.prototype,"labelsJSON"),zu.prototype),babelHelpers.applyDecoratedDescriptor(zu.prototype,"getPrimaryLabelId",[f["a"]],Object.getOwnPropertyDescriptor(zu.prototype,"getPrimaryLabelId"),zu.prototype),babelHelpers.applyDecoratedDescriptor(zu.prototype,"setPrimary",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zu.prototype,"setPrimary"),zu.prototype),babelHelpers.applyDecoratedDescriptor(zu.prototype,"setLocked",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zu.prototype,"setLocked"),zu.prototype),babelHelpers.applyDecoratedDescriptor(zu.prototype,"captureOriginalLabelsJSON",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zu.prototype,"captureOriginalLabelsJSON"),zu.prototype),babelHelpers.applyDecoratedDescriptor(zu.prototype,"getCourseHasLabels",[f["a"]],Object.getOwnPropertyDescriptor(zu.prototype,"getCourseHasLabels"),zu.prototype),zu);var Ku,$u,Xu,Yu,Qu,Ju,Zu,ep,tp,rp,np,ip,op,ap,sp,lp,cp,up,pp,dp,hp,mp;let fp=(Ku=(mp=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"_dirty",$u,this);babelHelpers.initializerDefineProperty(this,"title",Xu,this);babelHelpers.initializerDefineProperty(this,"headline",Yu,this);babelHelpers.initializerDefineProperty(this,"description",Qu,this);babelHelpers.initializerDefineProperty(this,"localeList",Ju,this);babelHelpers.initializerDefineProperty(this,"locale",Zu,this);babelHelpers.initializerDefineProperty(this,"instructionalLevel",ep,this);babelHelpers.initializerDefineProperty(this,"categoryList",tp,this);babelHelpers.initializerDefineProperty(this,"category",rp,this);babelHelpers.initializerDefineProperty(this,"subcategoryList",np,this);babelHelpers.initializerDefineProperty(this,"subcategory",ip,this);babelHelpers.initializerDefineProperty(this,"anySubcategoryAvailable",op,this);babelHelpers.initializerDefineProperty(this,"instructorBios",ap,this);babelHelpers.initializerDefineProperty(this,"errors",sp,this);babelHelpers.initializerDefineProperty(this,"courseImage",lp,this);babelHelpers.initializerDefineProperty(this,"promoAsset",cp,this);babelHelpers.initializerDefineProperty(this,"organizationId",up,this);babelHelpers.initializerDefineProperty(this,"courseLoaded",pp,this);babelHelpers.initializerDefineProperty(this,"courseImageS3Data",dp,this);babelHelpers.initializerDefineProperty(this,"uploadedCourseImageKey",hp,this);this.courseId=e}initializeForm(){this._loadLocaleList();this._loadCategoryList();this._loadCourse();this._loadInstructors()}_loadCourse(){return Qe["f"].get(`/courses/${this.courseId}/`,{params:{"fields[course]":"title,headline,description,locale,instructional_level_id,"+"primary_category,primary_subcategory,all_course_has_labels,image_750x422,promo_asset,"+"intended_category,category_locked,label_locked,category_applicable,"+"label_applicable,min_summary_words,landing_preview_as_guest_url,organization_id,","fields[course_label]":"@min"}}).then(Object(he["e"])((t=>{this.title=t.data.title||"";this.headline=t.data.headline||"";this.description=t.data.description||"";this.locale=t.data.locale.locale;this.courseImage=t.data.image_750x422||g["a"].toStorageStaticAsset("course/480x270/placeholder.jpg");this.promoAsset=t.data.promo_asset;const r=e.instructionalLevelList.find((e=>e.id===t.data.instructional_level_id));if(r){this.instructionalLevel=r.id}else{this.instructionalLevel=-1}if(t.data.primary_category){this.category=t.data.primary_category.id}else if(t.data.intended_category){this.category=t.data.intended_category.id}else{this.category=-1}if(this.category!==-1){this._loadSubcategoryList(this.category);this.subcategory=t.data.primary_subcategory?t.data.primary_subcategory.id:-1}this.courseHasLabels=t.data.all_course_has_labels||[];this.categoryApplicable=t.data.category_applicable||false;this.categoryLocked=t.data.category_locked||false;this.labelApplicable=t.data.label_applicable||false;this.labelLocked=t.data.label_locked||false;this.minSummaryWords=t.data.min_summary_words;this.labelManagerStore=new Gu(this.courseId,this.courseHasLabels,this.labelLocked);this.previewUrl=t.data.landing_preview_as_guest_url;this.organizationId=t.data.organization_id;this.courseLoaded=true}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}_loadInstructors(){return Qe["f"].get(`/courses/${this.courseId}/course-has-instructors/`,{params:{"fields[course_has_instructor]":"user,visible,has_valid_description","fields[user]":"@min,has_valid_description,image_50x50,url",visible:"True",page_size:200}}).then(Object(he["e"])((e=>{let{data:t}=e;this.instructorBios=t.results;this.instructorBios.forEach((e=>{e.hasImage=!e.user.image_50x50.includes("anonymous");e.isComplete=e.hasImage&&e.has_valid_description}))}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}_loadLocaleList(){return Qe["f"].get("/locales/",{params:M}).then(Object(he["e"])((e=>{this.localeList=e.data.results;return e.data.results}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}_loadCategoryList(){return Qe["f"].get("/course-categories/").then(Object(he["e"])((t=>{this.categoryList=t.data.results;this.categoryList.unshift({id:-1,title:e.CATEGORY_DEFAULT_VALUE});return t.data.results}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}_loadSubcategoryList(t){if(t>0){return Qe["f"].get(`/course-categories/${t}/subcategories/`).then(Object(he["e"])((t=>{this.subcategoryList=t.data.results;this.subcategoryList.unshift({id:-1,title:e.SUBCATEGORY_DEFAULT_VALUE});this.anySubcategoryAvailable=true;return this.subcategoryList}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}this.subcategoryList=[];this.anySubcategoryAvailable=false}setTitle(e){this.title=e;this._dirty=true}setHeadline(e){this.headline=e;this._dirty=true}setDescription(e){this.description=e;this._dirty=true}setLocale(e){this.locale=e;this._dirty=true}setInstructionalLevel(e){this.instructionalLevel=e;this._dirty=true}setCategory(e){this.category=e;this.subcategory=-1;this._loadSubcategoryList(e);this._dirty=true}setSubcategory(e){this.subcategory=e;this._dirty=true}setDirty(e){this._dirty=e}savePromoAsset(e){return Qe["f"].post("users/me/video-assets/",{captions:[],...e}).then((e=>{this.setPromoAsset(e.data)})).catch((()=>{Object(Ui["b"])(Qe["g"])}))}setPromoAsset(e){this.promoAsset=e;this._dirty=true}setCourseImage(e){this.courseImageS3Data=e;this.courseImage=e.url;this._dirty=true}setUploadedImageKey(e){this.uploadedCourseImageKey=e.key}get imageCropRequiredBeforeSubmit(){if(!this.uploadedCourseImageKey){return false}if(!this.courseImageS3Data){return true}return this.uploadedCourseImageKey!==this.courseImageS3Data.key}get dirty(){return Boolean(this._dirty||this.labelManagerStore&&this.labelManagerStore.dirty)}get canSave(){return this.dirty&&!this.imageCropRequiredBeforeSubmit}saveForm(){if(this.dirty){const e={title:this.title||"",headline:this.headline||"",description:this.description||"",locale:this.locale,instructional_level_id:this.instructionalLevel===-1?null:this.instructionalLevel,category_id:this.category===-1?null:this.category,subcategory_id:this.subcategory===-1?null:this.subcategory,labels_json:this.labelManagerStore.labelsJSON,promo_asset:this.promoAsset?this.promoAsset.id:undefined,image_file:this.courseImageS3Data?this.courseImageS3Data:undefined};this.errors={};return Qe["f"].patch(`/courses/${this.courseId}/?category=course-basics`,e).then(Object(he["e"])((()=>{Object(Ui["c"])(gettext("Your changes have been successfully saved."));this._dirty=false;this.labelManagerStore.captureOriginalLabelsJSON();this._loadCourse()}))).catch(Object(he["e"])((e=>{this.errors=Object(Qe["j"])(e);if(e.response&&e.response.data&&Object.keys(e.response.data).length>0){Object(Ui["a"])(gettext("Your changes have not been saved. Please address the issues."))}else{Object(Ui["b"])(Qe["g"])}})))}Object(Ui["c"])(gettext("There are no changes to save."))}},mp.CATEGORY_DEFAULT_VALUE=gettext("-- Select Category --"),mp.SUBCATEGORY_DEFAULT_VALUE=gettext("-- Select Subcategory --"),mp.instructionalLevelList=[{id:-1,title:gettext("-- Select Level --")},{id:1,title:gettext("Beginner Level")},{id:2,title:gettext("Intermediate Level")},{id:3,title:gettext("Expert Level")},{id:0,title:gettext("All Levels")}],mp),$u=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"_dirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Xu=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"title",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),Yu=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"headline",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),Qu=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"description",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),Ju=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"localeList",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),Zu=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"locale",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return"en_US"}}),ep=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"instructionalLevel",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return-1}}),tp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"categoryList",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),rp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"category",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return-1}}),np=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"subcategoryList",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),ip=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"subcategory",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return-1}}),op=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"anySubcategoryAvailable",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ap=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"instructorBios",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),sp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"errors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),lp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"courseImage",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),cp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"promoAsset",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),up=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"organizationId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),pp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"courseLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),dp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"courseImageS3Data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),hp=babelHelpers.applyDecoratedDescriptor(Ku.prototype,"uploadedCourseImageKey",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"_loadCourse",[he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"_loadCourse"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"_loadInstructors",[he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"_loadInstructors"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"_loadLocaleList",[he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"_loadLocaleList"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"_loadCategoryList",[he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"_loadCategoryList"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"_loadSubcategoryList",[he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"_loadSubcategoryList"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setTitle",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setTitle"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setHeadline",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setHeadline"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setDescription",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setDescription"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setLocale",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setLocale"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setInstructionalLevel",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setInstructionalLevel"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setCategory",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setCategory"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setSubcategory",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setSubcategory"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setDirty",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setDirty"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"savePromoAsset",[f["a"]],Object.getOwnPropertyDescriptor(Ku.prototype,"savePromoAsset"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setPromoAsset",[he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setPromoAsset"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setCourseImage",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setCourseImage"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"setUploadedImageKey",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"setUploadedImageKey"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"imageCropRequiredBeforeSubmit",[he["g"]],Object.getOwnPropertyDescriptor(Ku.prototype,"imageCropRequiredBeforeSubmit"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"dirty",[he["g"]],Object.getOwnPropertyDescriptor(Ku.prototype,"dirty"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"canSave",[he["g"]],Object.getOwnPropertyDescriptor(Ku.prototype,"canSave"),Ku.prototype),babelHelpers.applyDecoratedDescriptor(Ku.prototype,"saveForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ku.prototype,"saveForm"),Ku.prototype),Ku);var gp=r("./node_modules/@udemy/react-core-components/dist/esm/avatar/avatar.react-component.js");var yp=r("./src/udemy/js/utils/ud-me.js");var bp=r("./src/udemy/js/course-manage-v2/course-basics/instructor.less");class vp extends s["Component"]{renderSelfCompleteStatus(){return l.a.createElement("div",{className:"instructor--instructor-status--2F6BH"},l.a.createElement("a",{className:"ud-link-underline",href:"/user/edit-profile/"},gettext("View your instructor profile")))}renderIncompleteStatus(e){return l.a.createElement(b["a"],{showIcon:false,showCta:false,udStyle:"error",className:"instructor--instructor-status--2F6BH",title:gettext("Incomplete"),body:e})}renderSelfIncompleteStatus(){return this.renderIncompleteStatus(l.a.createElement("ul",{className:"ud-unstyled-list"},!this.props.instructorBio.has_valid_description&&l.a.createElement("li",null,interpolate(gettext("Your instructor biography must have at least %(minSummaryWords)s words."),{minSummaryWords:this.props.minSummaryWords},true)),!this.props.instructorBio.hasImage&&l.a.createElement("li",null,gettext("Your instructor image is required.")),l.a.createElement("li",null,l.a.createElement("a",{className:"ud-link-underline",href:"/user/edit-profile/",target:"_blank"},gettext("Update your profile.")))))}renderPeerIncompleteStatus(){return this.renderIncompleteStatus(l.a.createElement("ul",{className:"ud-unstyled-list"},l.a.createElement("li",null,interpolate(gettext("Your co-instructor %(instructorName)s has not completed the "+"instructor profile. Ask %(instructorName)s to update."),{instructorName:this.props.instructorBio.user.display_name},true))))}render(){const{instructorBio:e}=this.props;let t,r;const n=yp["a"].id===e.user.id;if(e.isComplete){t=l.a.createElement(oe.a,{label:gettext("Completed"),color:"positive"});r=n?this.renderSelfCompleteStatus():null}else{t=l.a.createElement(se.a,{label:gettext("Incomplete"),color:"negative"});r=n?this.renderSelfIncompleteStatus():this.renderPeerIncompleteStatus()}return l.a.createElement("div",{className:"instructor--instructor--1mDcX"},l.a.createElement("a",{href:e.user.url,className:"instructor--instructor-profile--3qtPb"},t,l.a.createElement(gp["a"],{user:e.user,alt:"NONE",size:"medium",srcKey:"image_50x50"}),e.user.display_name),r)}}vp.propTypes={instructorBio:a.a.shape({isComplete:a.a.bool.isRequired,has_valid_description:a.a.bool.isRequired,hasImage:a.a.bool.isRequired,user:a.a.shape({url:a.a.string.isRequired,display_name:a.a.string.isRequired})}).isRequired,minSummaryWords:a.a.number.isRequired};class wp extends s["Component"]{renderAllCompleteStatus(){return l.a.createElement(b["a"],{showCta:false,udStyle:"success",className:"instructor--instructors-status--1Tk1q",title:gettext("All instructor bios are complete!")})}renderSomeIncompleteStatus(){return l.a.createElement(b["a"],{showCta:false,udStyle:"error",className:"instructor--instructors-status--1Tk1q",title:gettext("All visible instructors of this course must complete their profile before the course can be published."),body:interpolate(gettext("This includes name, image, and a short summary of your background %(minSummaryWords)s words minimum."),{minSummaryWords:this.props.minSummaryWords},true)})}render(){return l.a.createElement(l.a.Fragment,null,this.props.instructorBios.some((e=>!e.isComplete))?this.renderSomeIncompleteStatus():this.renderAllCompleteStatus(),this.props.instructorBios.map((e=>l.a.createElement(vp,{key:e.user.id,instructorBio:e,minSummaryWords:this.props.minSummaryWords}))))}}wp.propTypes={instructorBios:i["b"].arrayOrObservableArray.isRequired,minSummaryWords:a.a.number.isRequired};var Ep=r("./node_modules/@udemy/icons/dist/lock.ud-icon");var Sp=r.n(Ep);var _p=r("./src/udemy/js/course-labels/course-labels.react-component.js");var xp=r("./src/udemy/js/course-labels/primary-label-select.react-component.js");var Dp=r("./src/udemy/js/course-manage-v2/course-basics/course-basics-form.less");var Cp,Tp;const Op={"./course-basics-form.less":{hidden:"course-basics-form--hidden---Qypj",form:"course-basics-form--form--F7iPX","primary-label-select":"course-basics-form--primary-label-select--MIJH5","inline-fields":"course-basics-form--inline-fields--3ZuU2","category-fields":"course-basics-form--category-fields--1M1_V","label-with-icon":"course-basics-form--label-with-icon--1eGQu","icon-container":"course-basics-form--icon-container--T4IAI","image-upload":"course-basics-form--image-upload--1BfBH",tip:"course-basics-form--tip--1PHmc","header-tip":"course-basics-form--header-tip--2mbHJ",spacer:"course-basics-form--spacer--1d9kw"}};let kp=Object(i["f"])(Cp=(Tp=class e extends s["Component"]{renderTooltip(e){return l.a.createElement(be["a"],{a11yRole:"description",canToggleOnHover:true,placement:"right",trigger:l.a.createElement(ye.a,{label:gettext("Get info")})},l.a.createElement("div",{className:"ud-text-sm ud-text-with-links"},e))}renderLabel(e,t,r){return l.a.createElement("span",{className:er()(fr()({"label-with-icon":!!r}),Op)},l.a.createElement("span",Object(fe["a"])({descriptionOfCaller:e,html:t})),r&&l.a.createElement("span",{className:"course-basics-form--icon-container--T4IAI"},r))}render(){const e=this.props.store.courseHasLabelsStore.visibleCourseHasLabels;const t=this.props.store.courseHasLabelsStore.primaryCourseHasLabels;let r,n,i,o,a,s;if(this.props.store.locked){n=l.a.createElement(Sp.a,{label:false})}if(e.length>1){if(!this.props.store.locked){s=this.renderTooltip(l.a.createElement(l.a.Fragment,null,gettext("Which topic do you spend the most time covering in your course? If you believe two topics are equally "+"representative of your entire course, select either one. All of the topics listed will still count as being taught in "+"your course.")," ",l.a.createElement("a",{href:"https://support.udemy.com/hc/en-us/articles/115000371028",target:"_blank",rel:"noopener noreferrer"},gettext("Learn more."))))}a=this.renderLabel("label-manager:most-representative-topic",gettext("From the topics you have selected, which is the <strong>most representative</strong> topic?"),n||s);if(t.length>1){o=[];t.forEach(((e,t)=>{o.push(l.a.createElement(xp["a"],{key:t,primaryLabel:e,labels:[e],locked:true}))}))}else{o=l.a.createElement(xp["a"],{primaryLabel:e.length>1?t[0]||null:e[0],labels:e.slice(),onPrimaryLabelChange:this.props.store.setPrimary,locked:this.props.store.locked||e.length===1})}i=l.a.createElement(ji["b"],{udStyle:"fieldset",className:"course-basics-form--primary-label-select--MIJH5",label:a,labelProps:{typography:"ud-heading-md"}},o)}if(!this.props.store.locked){r=this.renderTooltip(l.a.createElement(l.a.Fragment,null,gettext("Each individual topic chosen should comprehensively describe your course's content without being too broad. E.g. "+'"The Complete Tennis Course" should have "Tennis" – not "Tennis Serve" (specific, but not comprehensive) and not "Sports" '+"(comprehensive, but not specific).")," ",l.a.createElement("a",{href:"https://support.udemy.com/hc/en-us/articles/115000371028",target:"_blank",rel:"noopener noreferrer"},gettext("Learn more."))))}return l.a.createElement(ji["b"],Object.assign({udStyle:"fieldset",label:this.renderLabel("label-manager:what-is-taught",gettext("What is <strong>primarily</strong> taught in your course?"),n||r),labelProps:{typography:"ud-heading-md"}},this.props.validationProps),l.a.createElement("div",{className:"course-basics-form--inline-fields--3ZuU2"},l.a.createElement(_p["a"],{courseHasLabelsStore:this.props.store.courseHasLabelsStore,locked:this.props.store.locked}),l.a.createElement("div",{className:"course-basics-form--spacer--1d9kw"})),i)}},Tp.propTypes={store:a.a.object.isRequired,validationProps:a.a.object},Tp.defaultProps={validationProps:{}},Tp))||Cp;var Pp=r("./src/udemy/js/asset/video/video-asset.react-component.js");var Ap=r("./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.mobx-model.js");var Ip=r("./src/udemy/js/base-components/ungraduated/form/file-uploader/file-uploader-s3.react-component.js");var jp=r("./src/udemy/js/base-components/ungraduated/form/image-upload-preview-with-crop/uploading-backdrop.react-component.js");var Rp=r("./src/udemy/js/utils/get-config-data.js");var Np=r("./src/udemy/js/course-manage-v2/course-basics/video-upload-with-preview.less");var Lp,Mp,qp,Up;const Hp=Object(Rp["a"])();let Fp=Object(i["f"])(Lp=(Mp=(Up=class e extends s["Component"]{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"newAssetUploaded",qp,this);this.uploader=new Ap["a"]({key:Hp.third_party.s3.asset.key,allowedExtensionsDotted:this.props.allowedVideoExtensions,onUploadCompleted:this.onUploadCompleted,uploadLabel:gettext("Upload video"),sizeLimit:this.props.sizeLimit,...e})}get isUploading(){return!!this.uploader.file&&this.uploader.file.progressPercentage<100}onUploadCompleted(e,t,r){const n=JSON.parse(r);this.props.store.savePromoAsset(n);this.newAssetUploaded=true}renderAssetChangeInfo(){return l.a.createElement("div",{className:"video-upload-with-preview--asset-uploaded--32wuC"},l.a.createElement("p",null,gettext("Save the changes in order to complete the upload of your file. Once you save it, we will process it to ensure it works smoothly on Udemy.")))}renderPreview(e){if(e){const t={playerId:`playerId__${e.id}`,assetId:e.id,courseId:this.props.store.courseId};return l.a.createElement(Pp["b"],{id:e.id,assetData:e,playerOptions:t})}return l.a.createElement("div",{className:"video-upload-with-preview--image-wrapper--yHDpJ"},l.a.createElement(vu["a"],{"data-purpose":"image-preview",src:g["a"].toStorageStaticAsset("course/480x270/placeholder.jpg"),alt:gettext("placeholder"),width:480,height:270}))}render(){const{store:e,tips:t}=this.props;const r=e.dirty&&this.newAssetUploaded;return l.a.createElement("div",{className:"video-upload-with-preview--wrapper--1Gozg"},l.a.createElement("div",{className:"video-upload-with-preview--preview-wrapper--18TJX"},l.a.createElement("div",{className:"video-upload-with-preview--aspect--3UFqF"}),l.a.createElement("div",{className:"video-upload-with-preview--overlay--3venS"},!r&&this.renderPreview(e.promoAsset),r&&this.renderAssetChangeInfo(),this.isUploading&&l.a.createElement(jp["a"],null))),l.a.createElement("div",{className:"video-upload-with-preview--form-wrapper--3pOXd"},l.a.createElement("div",{className:"video-upload-with-preview--tips--31TuE"},t),l.a.createElement(ji["b"],Object.assign({label:gettext("Upload File"),labelProps:{className:"ud-sr-only"}},this.uploader.getValidationProps()),l.a.createElement(Ip["a"],{uploader:this.uploader}))))}},Up.propTypes={tips:a.a.object.isRequired,store:a.a.object.isRequired,allowedVideoExtensions:a.a.array,sizeLimit:a.a.number},Up.defaultProps={allowedVideoExtensions:undefined,sizeLimit:Ye["g"]},Up),qp=babelHelpers.applyDecoratedDescriptor(Mp.prototype,"newAssetUploaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Mp.prototype,"onUploadCompleted",[f["a"]],Object.getOwnPropertyDescriptor(Mp.prototype,"onUploadCompleted"),Mp.prototype),Mp))||Lp;var Bp,zp,Vp,Wp;const Gp={"./course-basics-form.less":{hidden:"course-basics-form--hidden---Qypj",form:"course-basics-form--form--F7iPX","primary-label-select":"course-basics-form--primary-label-select--MIJH5","inline-fields":"course-basics-form--inline-fields--3ZuU2","category-fields":"course-basics-form--category-fields--1M1_V","label-with-icon":"course-basics-form--label-with-icon--1eGQu","icon-container":"course-basics-form--icon-container--T4IAI","image-upload":"course-basics-form--image-upload--1BfBH",tip:"course-basics-form--tip--1PHmc","header-tip":"course-basics-form--header-tip--2mbHJ",spacer:"course-basics-form--spacer--1d9kw"}};let Kp=(Bp=Object(i["e"])("store"),Bp(zp=Object(i["f"])(zp=(Vp=(Wp=class e extends s["Component"]{getValidationProps(e){if(e&&e.length){const t=l.a.createElement("div",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"course-basics-form:error",domPurifyConfig:{ADD_ATTR:["target"]},html:e.join("<br />")})));return{validationState:"error",note:t}}return{}}onTitleChange(e){this.props.store.setTitle(e.target.value)}onHeadlineChange(e){this.props.store.setHeadline(e.target.value)}onDescriptionChange(e){this.props.store.setDescription(e)}onLocaleChange(e){const{store:t}=this.props;const r=e.target.value;this.setValueFromKey(t.setLocale,t.localeList,"locale",r)}onInstructionalLevelChange(e){const{store:t}=this.props;const r=e.target.value&&parseInt(e.target.value,10);this.setValueFromKey(t.setInstructionalLevel,fp.instructionalLevelList,"id",r)}onCategoryChange(e){const{store:t}=this.props;const r=e.target.value&&parseInt(e.target.value,10);this.setValueFromKey(t.setCategory,t.categoryList,"id",r)}onSubcategoryChange(e){const{store:t}=this.props;const r=e.target.value&&parseInt(e.target.value,10);this.setValueFromKey(t.setSubcategory,t.subcategoryList,"id",r)}setValueFromKey(e,t,r,n){if(n===null){return}const i=t.find((e=>e[r]===n));if(i){e(i[r])}}onSubmit(e){e.preventDefault();this.props.store.saveForm()}render(){const{store:e}=this.props;if(!e.courseLoaded){return l.a.createElement(S,null)}const t=e.dirty;const r=e.errors||{};const n=l.a.createElement("p",{className:"ud-text-with-links course-basics-form--tip--1PHmc"},l.a.createElement(m["b"],{html:gettext("Upload your course image here. It must meet our "+'<a class="courseImageLink">course image quality standards</a> '+"to be accepted. Important guidelines: 750x422 pixels; "+".jpg, .jpeg,. gif, or .png. no text on the image."),interpolate:{courseImageLink:l.a.createElement("a",{href:g["a"].toSupportLink("course_image_quality"),target:"_blank",rel:"noopener noreferrer"})}}));const i=l.a.createElement("p",Object.assign({className:"ud-text-with-links course-basics-form--tip--1PHmc"},Object(fe["a"])({descriptionOfCaller:"course-basics-form:promo-video-content-link",domPurifyConfig:{ADD_ATTR:["target"]},html:interpolate(gettext("Your promo video is a quick and compelling way for students "+"to preview what they’ll learn in your course."+" Students considering your course are more likely to enroll if your promo video is well-made. "+'<a class="ext" target="_blank" rel="noopener noreferrer" href="%(url)s">'+"Learn how to make your promo video awesome!</a>"),{url:g["a"].toHardLink("promo_video_content")},true)})));return l.a.createElement("form",{className:"full-width-lines course-basics-form--form--F7iPX",onSubmit:this.onSubmit},l.a.createElement("p",{className:"ud-text-with-links course-basics-form--header-tip--2mbHJ"},l.a.createElement(m["b"],{html:gettext("Your course landing page is crucial to your success on Udemy. "+"If it’s done right, it can also help you gain visibility in search engines like Google. "+"As you complete this section, think about creating a compelling Course Landing Page "+"that demonstrates why someone would want to enroll in your course. "+'Learn more about <a class="creating">creating your course landing page</a> and '+'<a class="title">course title standards.</a>'),interpolate:{creating:l.a.createElement("a",{href:"/udemy-teach-hub/create_your_course_landing_page/",target:"_blank",rel:"noopener noreferrer"}),title:l.a.createElement("a",{href:g["a"].toSupportLink("course_title_quality_standards"),target:"_blank",rel:"noopener noreferrer"})}}))," ",l.a.createElement(ji["b"],Object.assign({label:gettext("Course title"),labelProps:{typography:"ud-heading-md"},note:gettext("Your title should be a mix of attention-grabbing, informative, and optimized for search")},this.getValidationProps(r.title)),l.a.createElement(Ru["a"],{placeholder:gettext("Insert your course title."),name:"title",value:e.title,onChange:this.onTitleChange,"data-purpose":"edit-course-title",maxLength:60,perfMetricName:"CourseManage.basics-title-input-rendered"})),l.a.createElement(ji["b"],Object.assign({label:gettext("Course subtitle"),labelProps:{typography:"ud-heading-md"},note:gettext("Use 1 or 2 related keywords, and mention 3-4 of the most important areas that you've covered during your course.")},this.getValidationProps(r.headline)),l.a.createElement(Ru["a"],{placeholder:gettext("Insert your course subtitle."),name:"headline",value:e.headline,onChange:this.onHeadlineChange,"data-purpose":"course-headline",maxLength:120})),l.a.createElement(ji["b"],Object.assign({label:gettext("Course description"),labelProps:{typography:"ud-heading-md"},note:gettext("Description should have minimum 200 words.")},this.getValidationProps(r.description)),l.a.createElement(Lu["a"],{placeholder:gettext("Insert your course description."),name:"description",value:e.description,onValueChange:this.onDescriptionChange,"data-purpose":"course-description",theme:Lu["a"].THEMES.COURSE_DESCRIPTION})),l.a.createElement(ji["b"],{udStyle:"fieldset",label:gettext("Basic info"),labelProps:{typography:"ud-heading-md"}},l.a.createElement("div",{className:"course-basics-form--inline-fields--3ZuU2"},l.a.createElement(ji["b"],Object.assign({label:gettext("Course locale"),labelProps:{className:"ud-sr-only"}},this.getValidationProps(r.locale)),l.a.createElement(rc["a"],{title:gettext("Locale"),name:"locale",value:e.locale,onChange:this.onLocaleChange},e.localeList.map((e=>l.a.createElement("option",{key:e.locale,value:e.locale},e.title))))),l.a.createElement(ji["b"],Object.assign({label:gettext("Course instructional level"),labelProps:{className:"ud-sr-only"}},this.getValidationProps(r.instructional_level_id)),l.a.createElement(rc["a"],{title:gettext("Instructional level"),name:"instructional_level",value:e.instructionalLevel,onChange:this.onInstructionalLevelChange},fp.instructionalLevelList.map((e=>l.a.createElement("option",{key:e.id,value:e.id},e.title))))),e.categoryApplicable&&l.a.createElement("div",{className:"course-basics-form--category-fields--1M1_V"},l.a.createElement(ji["b"],Object.assign({label:gettext("Course category"),labelProps:{className:"ud-sr-only"}},this.getValidationProps(r.category_id)),l.a.createElement(rc["a"],{title:gettext("Category"),name:"category",value:e.category,onChange:this.onCategoryChange,disabled:!!e.categoryLocked},e.categoryList.map((e=>l.a.createElement("option",{key:e.id,value:e.id},e.title))))),l.a.createElement(ji["b"],Object.assign({label:gettext("Course subcategory"),labelProps:{className:"ud-sr-only"}},this.getValidationProps(r.subcategory_id),{className:er()(e.anySubcategoryAvailable?"":"hidden",Gp)}),l.a.createElement(rc["a"],{title:gettext("Subcategory"),name:"subcategory",value:e.subcategory,onChange:this.onSubcategoryChange,disabled:!!e.categoryLocked},e.subcategoryList.map((e=>l.a.createElement("option",{key:e.id,value:e.id},e.title)))))))),e.labelApplicable&&e.labelManagerStore&&l.a.createElement(kp,{store:e.labelManagerStore,validationProps:this.getValidationProps(r.labels)}),l.a.createElement(ji["b"],Object.assign({label:gettext("Course image"),labelProps:{typography:"ud-heading-md"}},this.getValidationProps(r.image_file)),l.a.createElement(Nu["a"],{imageUrl:e.courseImage,adjacentTips:n,minHeight:422,minWidth:750,aspect:16/9,allowedExtensions:Ye["b"],onUploadCompleted:e.setUploadedImageKey,onCrop:e.setCourseImage,className:"course-basics-form--image-upload--1BfBH"})),l.a.createElement(ji["b"],Object.assign({label:gettext("Promotional video"),labelProps:{typography:"ud-heading-md"}},this.getValidationProps(r.promoAsset)),l.a.createElement(Fp,{allowedVideoExtensions:Ye["e"],store:e,tips:i})),e.instructorBios.length>0&&!e.organizationId&&l.a.createElement(ji["b"],{label:gettext("Instructor profile(s)"),labelProps:{typography:"ud-heading-md"}},l.a.createElement(wp,{instructorBios:e.instructorBios,minSummaryWords:e.minSummaryWords})),l.a.createElement(Hu,{when:t}))}},Wp.propTypes={store:a.a.object.isRequired},Wp),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onTitleChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onHeadlineChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onHeadlineChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onDescriptionChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onDescriptionChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onLocaleChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onLocaleChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onInstructionalLevelChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onInstructionalLevelChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onCategoryChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onCategoryChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onSubcategoryChange",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onSubcategoryChange"),Vp.prototype),babelHelpers.applyDecoratedDescriptor(Vp.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(Vp.prototype,"onSubmit"),Vp.prototype),Vp))||zp)||zp);var $p,Xp,Yp;let Qp=Object(i["f"])($p=(Xp=(Yp=class e extends s["Component"]{onSave(){this.props.saveForm().then(this.props.onSaveComplete)}render(){const{isSaveEnabled:e,previewUrl:t}=this.props;return l.a.createElement(l.a.Fragment,null,t?l.a.createElement(le["a"],{componentClass:"a",udStyle:"white-outline",size:"small",href:this.props.previewUrl,target:"_blank",rel:"noopener noreferrer"},gettext("Preview")):null,l.a.createElement(le["a"],{udStyle:"white-solid",size:"small",disabled:!e,onClick:this.onSave},gettext("Save")))}},Yp.propTypes={previewUrl:a.a.string,isSaveEnabled:a.a.bool.isRequired,saveForm:a.a.func.isRequired,onSaveComplete:a.a.func},Yp.defaultProps={previewUrl:null,onSaveComplete:Xe["a"]},Yp),babelHelpers.applyDecoratedDescriptor(Xp.prototype,"onSave",[f["a"]],Object.getOwnPropertyDescriptor(Xp.prototype,"onSave"),Xp.prototype),Xp))||$p;var Jp,Zp;let ed=(Jp=(Zp=class e extends s["Component"]{constructor(e){super(e);this.basicsStore=e.basicsStore||new fp(this.props.courseId);this.props.pageStore.setHeaderActions(this.renderHeaderButtons);Je["b"].increment("course_manage.edit",{action:"basics"})}componentDidMount(){this.basicsStore.initializeForm()}componentWillUnmount(){this.props.pageStore.cleanHeaderActions(this.renderHeaderButtons)}renderHeaderButtons(){if(!this.basicsStore.courseLoaded){return null}const{canSave:e,saveForm:t,previewUrl:r}=this.basicsStore;const{refreshPublishCourseStatus:n}=this.props.pageStore;return l.a.createElement(Qp,{isSaveEnabled:e,saveForm:t,onSaveComplete:n,previewUrl:r})}render(){const{basicsStore:e,...t}=this.props;return l.a.createElement(i["c"],{store:this.basicsStore},l.a.createElement(bn["a"],{title:gettext("Course landing page")}),l.a.createElement(d["a"],null,l.a.createElement(Kp,t)))}},Zp.propTypes={courseId:a.a.number.isRequired,pageStore:a.a.object.isRequired,basicsStore:a.a.object,...Kp.props},Zp.defaultProps={basicsStore:null},Zp),babelHelpers.applyDecoratedDescriptor(Jp.prototype,"renderHeaderButtons",[f["a"]],Object.getOwnPropertyDescriptor(Jp.prototype,"renderHeaderButtons"),Jp.prototype),Jp);const td=Object.freeze({REQUIREMENTS:gettext("What are the requirements or prerequisites for taking your course?"),WHO_SHOULD_ATTEND:gettext("Who is this course for?"),WHAT_YOU_WILL_LEARN:gettext("What will students learn in your course?")});const rd=4;const nd=160;var id=r("./src/udemy/js/course-manage-v2/course-goals/question.mobx-model.js");var od,ad,sd,ld,cd,ud;let pd=(od=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"dirty",ad,this);babelHelpers.initializerDefineProperty(this,"requirements",sd,this);babelHelpers.initializerDefineProperty(this,"whoShouldAttend",ld,this);babelHelpers.initializerDefineProperty(this,"whatYouWillLearn",cd,this);babelHelpers.initializerDefineProperty(this,"errors",ud,this);this.courseId=e}initializeLists(){return Qe["f"].get(`/courses/${this.courseId}/`,{params:{"fields[course]":"requirements_data,what_you_will_learn_data,who_should_attend_data"},timeout:Qe["c"]}).then(Object(he["e"])((e=>{this.whatYouWillLearn.setMaxCharCount(nd);this.requirements.initializeAllAnswers(e.data.requirements_data?e.data.requirements_data.items:[]);this.whatYouWillLearn.initializeAllAnswers(e.data.what_you_will_learn_data?e.data.what_you_will_learn_data.items:[]);this.whoShouldAttend.initializeAllAnswers(e.data.who_should_attend_data?e.data.who_should_attend_data.items:[]);this.requirements.pushEmptyAnswer();this.whoShouldAttend.pushEmptyAnswer();this.whatYouWillLearn.pushEmptyAnswer();this.whatYouWillLearn.ensureMinAnswerCount(rd)})))}saveLists(){this.dirty=false;if(!this.isValid){Object(Ui["a"])(gettext("Your changes have not been saved. Please address the issues."));return}const e=[];this.requirements.answerList.forEach((t=>String(t.value).trim()?e.push(String(t.value).trim()):null));const t=[];this.whoShouldAttend.answerList.forEach((e=>String(e.value).trim()?t.push(String(e.value).trim()):null));const r=[];this.whatYouWillLearn.answerList.forEach((e=>String(e.value).trim()?r.push(String(e.value).trim()):null));const n={requirements_data:{items:e},what_you_will_learn_data:{items:r},who_should_attend_data:{items:t}};return Qe["f"].patch(`/courses/${this.courseId}/?category=course-goals`,n).then(Object(he["e"])((()=>{this.errors={};Object(Ui["c"])(gettext("Your changes have been successfully saved."))}))).catch(Object(he["e"])((e=>{this.errors=Object(Qe["j"])(e);if(e.response&&e.response.data&&Object.keys(e.response.data).length>0){Object(Ui["a"])(gettext("Your changes have not been saved. Please address the issues."))}else{Object(Ui["b"])(Qe["g"])}})))}setDirty(){this.dirty=true}get isValid(){return!this.requirements.hasValidationErrors&&!this.whoShouldAttend.hasValidationErrors&&!this.whatYouWillLearn.hasValidationErrors}},ad=babelHelpers.applyDecoratedDescriptor(od.prototype,"dirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),sd=babelHelpers.applyDecoratedDescriptor(od.prototype,"requirements",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return new id["a"]}}),ld=babelHelpers.applyDecoratedDescriptor(od.prototype,"whoShouldAttend",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return new id["a"]}}),cd=babelHelpers.applyDecoratedDescriptor(od.prototype,"whatYouWillLearn",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return new id["a"]}}),ud=babelHelpers.applyDecoratedDescriptor(od.prototype,"errors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),babelHelpers.applyDecoratedDescriptor(od.prototype,"initializeLists",[he["e"]],Object.getOwnPropertyDescriptor(od.prototype,"initializeLists"),od.prototype),babelHelpers.applyDecoratedDescriptor(od.prototype,"saveLists",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(od.prototype,"saveLists"),od.prototype),babelHelpers.applyDecoratedDescriptor(od.prototype,"setDirty",[he["e"]],Object.getOwnPropertyDescriptor(od.prototype,"setDirty"),od.prototype),babelHelpers.applyDecoratedDescriptor(od.prototype,"isValid",[he["g"]],Object.getOwnPropertyDescriptor(od.prototype,"isValid"),od.prototype),od);var dd=r("./src/udemy/js/course-manage-v2/course-goals/goals-form.less");var hd=r("./src/udemy/js/course-manage-v2/course-goals/goals-form-question.react-component.js");var md,fd,gd,yd;const bd=Object(Rp["a"])();const vd=bd.brand.has_organization;let wd=(md=Object(i["e"])("store"),md(fd=Object(i["f"])(fd=(gd=(yd=class e extends s["Component"]{getRequirementsExplanation(){return l.a.createElement("p",null,gettext("List the required skills, experience, tools or equipment learners should have prior to taking your course."),l.a.createElement("br",null),gettext("If there are no requirements, use this space as an opportunity to lower the barrier for beginners."))}getWhatYouWillLearnExplanation(){return l.a.createElement("p",null,l.a.createElement(m["b"],{html:vd?gettext('You should enter <a class="link" '+">learning objectives or outcomes</a> that learners can expect to achieve after completing your course."):gettext('You must enter at least 4 <a class="link" '+">learning objectives or outcomes</a> that learners can expect to achieve after completing your course."),interpolate:{link:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"/udemy-teach-hub/learning_objectives/"})}}))}getWhoShouldAttendExplanation(){return l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext('Write a clear description of the <a class="link"'+">intended learners</a> for your course who will find your course content valuable. <br />"+"This will help you attract the right learners to your course."),interpolate:{link:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"/udemy-teach-hub/define_your_audience_and_objectives/"})}}))}_renderRequirements(){const e=td.REQUIREMENTS;const t=[gettext("Example: No programming experience needed. You will learn everything you need to know")];return l.a.createElement(hd["a"],{questionId:"requirements",label:e,explanation:this.getRequirementsExplanation(),placeholders:t,shouldSendPerfMetric:true,question:this.props.store.requirements,store:this.props.store,errors:this.props.store.errors.requirements_data})}_renderWhoShouldAttend(){const e=td.WHO_SHOULD_ATTEND;const t=[gettext("Example: Beginner Python developers curious about data science")];return l.a.createElement(hd["a"],{questionId:"target-student",label:e,explanation:this.getWhoShouldAttendExplanation(),placeholders:t,question:this.props.store.whoShouldAttend,store:this.props.store,errors:this.props.store.errors.who_should_attend_data})}_renderWhatYouWillLearn(){const e=td.WHAT_YOU_WILL_LEARN;const t=[gettext("Example: Define the roles and responsibilities of a project manager"),gettext("Example: Estimate project timelines and budgets"),gettext("Example: Identify and manage project risks"),gettext("Example: Complete a case study to manage a project from conception to completion")];return l.a.createElement(hd["a"],{questionId:"learn-goal",label:e,explanation:this.getWhatYouWillLearnExplanation(),placeholders:t,question:this.props.store.whatYouWillLearn,store:this.props.store,errors:this.props.store.errors.what_you_will_learn_data,deleteButtonDisabled:!vd&&this.props.store.whatYouWillLearn.answerCount<=rd,maxLength:nd,withCounter:true})}_renderSubtitle(){return l.a.createElement("p",{className:"goals-form--subtitle--3R5d-"},l.a.createElement(m["b"],{html:gettext('The following descriptions will be publicly visible on your <a class="link" '+">Course Landing Page</a> and will have a direct impact on your course performance. "+"These descriptions will help learners decide if your course is right for them."),interpolate:{link:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"/udemy-teach-hub/create_your_course_landing_page/"})}}))}onSubmit(e){e.preventDefault();this.props.store.saveLists()}render(){return l.a.createElement(l.a.Fragment,null,this._renderSubtitle(),l.a.createElement("form",{onSubmit:this.onSubmit},this._renderWhatYouWillLearn(),this._renderRequirements(),this._renderWhoShouldAttend()))}},yd.propTypes={store:a.a.object.isRequired},yd),babelHelpers.applyDecoratedDescriptor(gd.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(gd.prototype,"onSubmit"),gd.prototype),gd))||fd)||fd);var Ed,Sd,_d;let xd=Object(i["f"])(Ed=(Sd=(_d=class e extends s["Component"]{onSave(){this.props.store.saveLists().then(this.props.onSaveComplete)}render(){const{dirty:e}=this.props.store;const t=!e;return l.a.createElement(le["a"],{udStyle:"white-solid",size:"small",disabled:t,onClick:this.onSave},gettext("Save"))}},_d.propTypes={store:a.a.shape({dirty:a.a.bool.isRequired,isValid:a.a.bool.isRequired,saveLists:a.a.func.isRequired}).isRequired,onSaveComplete:a.a.func},_d.defaultProps={onSaveComplete:()=>true},_d),babelHelpers.applyDecoratedDescriptor(Sd.prototype,"onSave",[f["a"]],Object.getOwnPropertyDescriptor(Sd.prototype,"onSave"),Sd.prototype),Sd))||Ed;var Dd,Cd,Td;let Od=Object(i["f"])(Dd=(Cd=(Td=class e extends s["Component"]{constructor(e){super(e);const{pageStore:t,courseId:r}=e;this.goalsStore=e.goalsStore||new pd(r);t.setHeaderActions(this.renderHeaderButtons)}componentDidMount(){this.goalsStore.initializeLists()}componentWillUnmount(){this.props.pageStore.cleanHeaderActions(this.renderHeaderButtons)}renderHeaderButtons(){return l.a.createElement(xd,{store:this.goalsStore,onSaveComplete:this.props.pageStore.updateMenuCheckbox})}render(){const e=this.goalsStore&&this.goalsStore.dirty;return l.a.createElement(i["c"],{store:this.goalsStore},l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Intended learners")}),l.a.createElement(d["a"],null,l.a.createElement(wd,null)),l.a.createElement(Hu,{when:e})))}},Td.propTypes={courseId:a.a.number.isRequired,pageStore:a.a.object.isRequired,goalsStore:a.a.object},Td.defaultProps={goalsStore:null},Td),babelHelpers.applyDecoratedDescriptor(Cd.prototype,"renderHeaderButtons",[f["a"]],Object.getOwnPropertyDescriptor(Cd.prototype,"renderHeaderButtons"),Cd.prototype),Cd))||Dd;var kd,Pd,Ad,Id,jd,Rd,Nd,Ld,Md,qd,Ud;let Hd=(kd=class e{constructor(e,t,r,n,i){babelHelpers.initializerDefineProperty(this,"courseId",Pd,this);babelHelpers.initializerDefineProperty(this,"course",Ad,this);babelHelpers.initializerDefineProperty(this,"courseLoaded",Id,this);babelHelpers.initializerDefineProperty(this,"menuLoaded",jd,this);babelHelpers.initializerDefineProperty(this,"menuData",Rd,this);babelHelpers.initializerDefineProperty(this,"isUfoContentSubscriptionAgreed",Nd,this);babelHelpers.initializerDefineProperty(this,"headerActions",Ld,this);babelHelpers.initializerDefineProperty(this,"isCourseVersionEnabled",Md,this);babelHelpers.initializerDefineProperty(this,"isNewCodingExerciseUIEnabled",qd,this);babelHelpers.initializerDefineProperty(this,"isCurriculumEditorSectionTopicsEnabled",Ud,this);Object(he["x"])((()=>{this.courseId=e;this.isUfoContentSubscriptionAgreed=t;this.isCourseVersionEnabled=r;this.isNewCodingExerciseUIEnabled=n;this.isCurriculumEditorSectionTopicsEnabled=i}));this.getMenu();this.getCommonCourseInfo()}setHeaderActions(e){this.headerActions=e}cleanHeaderActions(e){if(this.headerActions===e){this.headerActions=null}}getMenu(){return Qe["f"].get(`/courses/${this.courseId}/manage-menu/`).then(Object(he["e"])((e=>{this.menuData=JSON.parse(e.data.menuJson);this.menuLoaded=true}))).catch((e=>{if(e.response&&e.response.status===403){return}Object(Ui["b"])(Qe["g"])}))}updateMenuCheckbox(){if(this.menuData&&this.menuData.with_completion){this.getMenu()}}refreshPublishCourseStatus(){this.getCommonCourseInfo();this.getMenu()}getContentLengthVideo(){return Qe["f"].get(`/courses/${this.courseId}/`,{params:{"fields[course]":"content_length_video,is_paid,price_updated_date,can_toggle_curriculum_published_state"},timeout:Qe["c"]}).then(Object(he["e"])((e=>{Object(he["y"])(this.course,{contentLengthVideo:e.data.content_length_video,isPaid:e.data.is_paid,priceUpdatedDate:e.data.price_updated_date,canTogglePublishedState:e.data.can_toggle_curriculum_published_state});return e.data.content_length_video}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}getCommonCourseInfo(){return Qe["f"].get(`/courses/${this.courseId}/`,{params:{"fields[course]":"title,status_label,learn_url,"+"image_200_H,image_480x270,visible_instructors,can_edit,is_live,"+"is_paid,is_draft,published_time,num_invitation_requests,is_published,"+"organization_id,is_high_quality,content_length_video, price_updated_date,"+"can_toggle_curriculum_published_state,is_owner_opted_into_deals"},timeout:Qe["c"]}).then(Object(he["e"])((e=>{Object(he["y"])(this.course,{id:e.data.id,title:e.data.title,statusLabel:e.data.status_label,learnUrl:e.data.learn_url,image200H:e.data.image_200_H,image480x270:e.data.image_480x270,isPublished:e.data.is_published,visibleInstructors:e.data.visible_instructors,canEdit:e.data.can_edit,isLive:e.data.is_live,isPaid:e.data.is_paid,isDraft:e.data.is_draft,numInvitationRequests:e.data.num_invitation_requests,organizationId:e.data.organization_id,isHighQuality:e.data.is_high_quality,wasPublished:Boolean(e.data.published_time),contentLengthVideo:e.data.content_length_video,priceUpdatedDate:e.data.price_updated_date,canTogglePublishedState:e.data.can_toggle_curriculum_published_state,isOwnerOptedIntoDeals:e.data.is_owner_opted_into_deals});this.courseLoaded=true}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}async publishChanges(){return Qe["f"].patch(`/courses/${this.courseId}/publish-draft-version/`,{}).then((()=>{Object(Ui["c"])(gettext("Your changes have been successfully updated"))})).catch((()=>{Object(Ui["b"])(Qe["g"])}))}},Pd=babelHelpers.applyDecoratedDescriptor(kd.prototype,"courseId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Ad=babelHelpers.applyDecoratedDescriptor(kd.prototype,"course",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),Id=babelHelpers.applyDecoratedDescriptor(kd.prototype,"courseLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),jd=babelHelpers.applyDecoratedDescriptor(kd.prototype,"menuLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Rd=babelHelpers.applyDecoratedDescriptor(kd.prototype,"menuData",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Nd=babelHelpers.applyDecoratedDescriptor(kd.prototype,"isUfoContentSubscriptionAgreed",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Ld=babelHelpers.applyDecoratedDescriptor(kd.prototype,"headerActions",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Md=babelHelpers.applyDecoratedDescriptor(kd.prototype,"isCourseVersionEnabled",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),qd=babelHelpers.applyDecoratedDescriptor(kd.prototype,"isNewCodingExerciseUIEnabled",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Ud=babelHelpers.applyDecoratedDescriptor(kd.prototype,"isCurriculumEditorSectionTopicsEnabled",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(kd.prototype,"setHeaderActions",[he["e"]],Object.getOwnPropertyDescriptor(kd.prototype,"setHeaderActions"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"cleanHeaderActions",[he["e"]],Object.getOwnPropertyDescriptor(kd.prototype,"cleanHeaderActions"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"getMenu",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(kd.prototype,"getMenu"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"updateMenuCheckbox",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(kd.prototype,"updateMenuCheckbox"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"refreshPublishCourseStatus",[f["a"]],Object.getOwnPropertyDescriptor(kd.prototype,"refreshPublishCourseStatus"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"getContentLengthVideo",[f["a"]],Object.getOwnPropertyDescriptor(kd.prototype,"getContentLengthVideo"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"getCommonCourseInfo",[he["e"]],Object.getOwnPropertyDescriptor(kd.prototype,"getCommonCourseInfo"),kd.prototype),babelHelpers.applyDecoratedDescriptor(kd.prototype,"publishChanges",[f["a"]],Object.getOwnPropertyDescriptor(kd.prototype,"publishChanges"),kd.prototype),kd);function Fd(e){e.detail&&Object(Ui["b"])(e.detail);if(e.JSError){throw e.JSError}}var Bd=r("./src/udemy/js/utils/query-params.js");var zd=r("./src/udemy/js/utils/get-experiment-data.js");function Vd(e){return Object(zd["d"])(e,"is_active",false)}var Wd=r("./node_modules/@udemy/icons/dist/expand-plus.ud-icon");var Gd=r.n(Wd);var Kd=r("./src/udemy/js/labs/constants.js");var $d=r("./src/udemy/js/labs/utils.js");var Xd=r("./src/udemy/js/utils/array-move.js");var Yd=r("./src/udemy/js/utils/ud-expiring-local-storage.js");var Qd=r("./src/udemy/js/instructor/common/constants.js");var Jd=r("./src/udemy/js/course-taking/constants.js");var Zd;let eh=(Zd=class e{constructor(e){Object(he["l"])(this,e)}get hasSufficientPreviewLength(){return!!this.has_sufficient_preview_length}get isOrganizationOnly(){return!!this.organization_id}get isPaid(){return!!this.is_paid}get wasPublished(){return!!this.published_time}get isPracticeTestCourse(){return!!this.is_practice_test_course}get isDevelopmentCourse(){return this.primary_category&&[288,306,326].includes(this.primary_category.id)}get hasWorkspaceAssociated(){return!!(this.available_features&&this.available_features.includes(Jd["m"].HAS_WORKSPACE_ASSOCIATED))}},babelHelpers.applyDecoratedDescriptor(Zd.prototype,"hasSufficientPreviewLength",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"hasSufficientPreviewLength"),Zd.prototype),babelHelpers.applyDecoratedDescriptor(Zd.prototype,"isOrganizationOnly",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"isOrganizationOnly"),Zd.prototype),babelHelpers.applyDecoratedDescriptor(Zd.prototype,"isPaid",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"isPaid"),Zd.prototype),babelHelpers.applyDecoratedDescriptor(Zd.prototype,"wasPublished",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"wasPublished"),Zd.prototype),babelHelpers.applyDecoratedDescriptor(Zd.prototype,"isPracticeTestCourse",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"isPracticeTestCourse"),Zd.prototype),babelHelpers.applyDecoratedDescriptor(Zd.prototype,"isDevelopmentCourse",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"isDevelopmentCourse"),Zd.prototype),babelHelpers.applyDecoratedDescriptor(Zd.prototype,"hasWorkspaceAssociated",[he["g"]],Object.getOwnPropertyDescriptor(Zd.prototype,"hasWorkspaceAssociated"),Zd.prototype),Zd);var th,rh,nh,ih;let oh=(th=class e{constructor(){babelHelpers.initializerDefineProperty(this,"data",rh,this);babelHelpers.initializerDefineProperty(this,"error",nh,this);babelHelpers.initializerDefineProperty(this,"isSaving",ih,this);this.reset()}_getInitialData(){throw new Error("_getInitialData(curriculumItem) must be implemented by CurriculumItemFormModel subclasses")}reset(e){Object(he["y"])(this,{data:this._getInitialData(e),error:{},isSaving:false})}setField(e,t){this.data[e]=t}startSaving(){this.isSaving=true;this.error={}}finishSaving(e){this.isSaving=false;this.error=e||{}}},rh=babelHelpers.applyDecoratedDescriptor(th.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),nh=babelHelpers.applyDecoratedDescriptor(th.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),ih=babelHelpers.applyDecoratedDescriptor(th.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(th.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(th.prototype,"reset"),th.prototype),babelHelpers.applyDecoratedDescriptor(th.prototype,"setField",[he["e"]],Object.getOwnPropertyDescriptor(th.prototype,"setField"),th.prototype),babelHelpers.applyDecoratedDescriptor(th.prototype,"startSaving",[he["e"]],Object.getOwnPropertyDescriptor(th.prototype,"startSaving"),th.prototype),babelHelpers.applyDecoratedDescriptor(th.prototype,"finishSaving",[he["e"]],Object.getOwnPropertyDescriptor(th.prototype,"finishSaving"),th.prototype),th);class ah extends oh{_getInitialData(e){if(e){return{title:e.title}}return{title:""}}}var sh=r("./src/udemy/js/course-manage-v2/events-v2.ts");var lh=r("./src/udemy/js/course-manage-v2/curriculum/item/constants.js");var ch,uh,ph,dh,hh,mh,fh,gh,yh;let bh=(ch=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isAddContentOpen",uh,this);babelHelpers.initializerDefineProperty(this,"isEditContentOpen",ph,this);babelHelpers.initializerDefineProperty(this,"isEditFormOpen",dh,this);babelHelpers.initializerDefineProperty(this,"canOpenEditFormSection",hh,this);babelHelpers.initializerDefineProperty(this,"selectedContentType",mh,this);babelHelpers.initializerDefineProperty(this,"error",fh,this);babelHelpers.initializerDefineProperty(this,"isSaving",gh,this);babelHelpers.initializerDefineProperty(this,"isDeleting",yh,this);Object(he["l"])(this,e)}get key(){return`${this.keyClass}${this.id}`}get keyClass(){return this._class}get successDeleteMessage(){if(this._class in lh["l"]){return lh["l"][this._class]}return null}static create(){throw new Error("static create(course, data) must be implemented by CurriculumItemModel subclasses")}partialUpdate(){throw new Error("partialUpdate(data) must be implemented by CurriculumItemModel subclasses")}_partialUpdate(e,t,r){this.isSaving=true;return Qe["f"].patch(e,t,{params:{[`fields[${this._class}]`]:r.join(",")}}).then(Object(he["e"])((e=>{r.forEach((t=>{this[t]=e.data[t]}));this.isSaving=false;return this}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error})))}delete(){throw new Error("delete() must be implemented by CurriculumItemModel subclasses")}_delete(e){this.isSaving=true;this.isDeleting=true;return Qe["f"].delete(e).then(Object(he["e"])((()=>{this.isSaving=false;this.isDeleting=false}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;this.isDeleting=false;throw this.error})))}setObjectIndex(e){this.object_index=e}openEditForm(){this.closeAddContent();this.closeEditContent();this.isEditFormOpen=true}closeEditForm(){this.closeAddContent();this.closeEditContent();this.isEditFormOpen=false}openEditContent(){if(this.canOpenEditFormSection){this.isAddContentOpen=false;this.isEditContentOpen=true;this.selectedContentType=null}}closeEditContent(){this.isAddContentOpen=false;this.isEditContentOpen=false;this.selectedContentType=null}toggleEditContent(){if(this.isEditContentOpen){this.closeEditContent()}else{this.openEditContent()}}openAddContent(){this.isAddContentOpen=true}closeAddContent(){this.isAddContentOpen=false;this.selectedContentType=null}setSelectedContentType(e){this.selectedContentType=e}},uh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"isAddContentOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ph=babelHelpers.applyDecoratedDescriptor(ch.prototype,"isEditContentOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),dh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"isEditFormOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),hh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"canOpenEditFormSection",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),mh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"selectedContentType",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),fh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),gh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),yh=babelHelpers.applyDecoratedDescriptor(ch.prototype,"isDeleting",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(ch.prototype,"key",[he["g"]],Object.getOwnPropertyDescriptor(ch.prototype,"key"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"keyClass",[he["g"]],Object.getOwnPropertyDescriptor(ch.prototype,"keyClass"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"successDeleteMessage",[he["g"]],Object.getOwnPropertyDescriptor(ch.prototype,"successDeleteMessage"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"_partialUpdate",[he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"_partialUpdate"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"_delete",[he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"_delete"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"setObjectIndex",[he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"setObjectIndex"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"openEditForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"openEditForm"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"closeEditForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"closeEditForm"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"openEditContent",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"openEditContent"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"closeEditContent",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"closeEditContent"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"toggleEditContent",[f["a"]],Object.getOwnPropertyDescriptor(ch.prototype,"toggleEditContent"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"openAddContent",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"openAddContent"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"closeAddContent",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"closeAddContent"),ch.prototype),babelHelpers.applyDecoratedDescriptor(ch.prototype,"setSelectedContentType",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(ch.prototype,"setSelectedContentType"),ch.prototype),ch);var vh,wh;let Eh=(vh=class e extends bh{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"canOpenEditFormSection",wh,this)}get editUrl(){return`/course/${this.course.id}/manage/practice/basic-info/?practice_id=${this.id}`}delete(){return this._delete(`/practices/${this.id}/`)}static create(t,r){const n={course:t.id,...r};return Qe["f"].post("/practices/",n).then((r=>{bu["a"].publishEvent(new wu["b"]({courseId:t.id,category:"create_assignment",action:"create",objectType:"assignment",objectId:r.data.id}));const n=new sh["a"](r.data.id,r.data.title);const i=new sh["d"](t.id);bu["a"].publishEvent(new sh["b"]({assignment:n,course:i}));return new e({...r.data,course:t})})).catch((e=>{throw Object(Qe["j"])(e)}))}},wh=babelHelpers.applyDecoratedDescriptor(vh.prototype,"canOpenEditFormSection",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(vh.prototype,"editUrl",[he["g"]],Object.getOwnPropertyDescriptor(vh.prototype,"editUrl"),vh.prototype),vh);class Sh extends oh{_getInitialData(e){if(e){return{title:e.title}}return{title:""}}}var _h,xh,Dh,Ch;let Th=(_h=class e{constructor(){babelHelpers.initializerDefineProperty(this,"data",xh,this);babelHelpers.initializerDefineProperty(this,"error",Dh,this);babelHelpers.initializerDefineProperty(this,"isSaving",Ch,this);this.reset()}reset(e){Object(he["y"])(this,{data:{body:e&&e.body||"",ignore_warnings:false},error:{},isSaving:false})}get bodyError(){if(!this.error.body){return null}const e=this.error.body[0];if(typeof e==="string"){return{messages:[e],type:"error"}}return{messages:e.messages||[],type:e.type||"error"}}setBody(e){if(this.data.body!==e){this.data.ignore_warnings=false}this.data.body=e}save(e,t){this.isSaving=true;return Qe["f"].post("/users/me/article-assets/",this.data).then(Object(he["e"])((t=>{this.isSaving=false;return e?e(t.data):t.data}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);if(this.bodyError.type==="warning"){this.data.ignore_warnings=true}this.isSaving=false;return t?t(this.error):this.error})))}},xh=babelHelpers.applyDecoratedDescriptor(_h.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Dh=babelHelpers.applyDecoratedDescriptor(_h.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Ch=babelHelpers.applyDecoratedDescriptor(_h.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(_h.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(_h.prototype,"reset"),_h.prototype),babelHelpers.applyDecoratedDescriptor(_h.prototype,"bodyError",[he["g"]],Object.getOwnPropertyDescriptor(_h.prototype,"bodyError"),_h.prototype),babelHelpers.applyDecoratedDescriptor(_h.prototype,"setBody",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(_h.prototype,"setBody"),_h.prototype),babelHelpers.applyDecoratedDescriptor(_h.prototype,"save",[he["e"]],Object.getOwnPropertyDescriptor(_h.prototype,"save"),_h.prototype),_h);var Oh=r("./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.mobx-store.js");var kh,Ph,Ah,Ih;let jh=(kh=class e{constructor(){babelHelpers.initializerDefineProperty(this,"data",Ph,this);babelHelpers.initializerDefineProperty(this,"error",Ah,this);babelHelpers.initializerDefineProperty(this,"isSaving",Ih,this);this.reset()}reset(){Object(he["y"])(this,{data:{title:"",url:""},error:{},isSaving:false})}setField(e,t){this.data[e]=t}save(e,t){this.isSaving=true;return Qe["f"].post("/users/me/external-link-assets/",this.data).then(Object(he["e"])((t=>{this.isSaving=false;return e?e(t.data):t.data}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;return t?t(this.error):this.error})))}},Ph=babelHelpers.applyDecoratedDescriptor(kh.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Ah=babelHelpers.applyDecoratedDescriptor(kh.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Ih=babelHelpers.applyDecoratedDescriptor(kh.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(kh.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(kh.prototype,"reset"),kh.prototype),babelHelpers.applyDecoratedDescriptor(kh.prototype,"setField",[he["e"]],Object.getOwnPropertyDescriptor(kh.prototype,"setField"),kh.prototype),babelHelpers.applyDecoratedDescriptor(kh.prototype,"save",[he["e"]],Object.getOwnPropertyDescriptor(kh.prototype,"save"),kh.prototype),kh);var Rh,Nh,Lh,Mh;let qh=(Rh=class e{constructor(){babelHelpers.initializerDefineProperty(this,"data",Nh,this);babelHelpers.initializerDefineProperty(this,"error",Lh,this);babelHelpers.initializerDefineProperty(this,"isSaving",Mh,this);this.reset()}reset(e){Object(he["y"])(this,{data:{source_url:e&&e.source_url||""},error:{},isSaving:false})}setField(e,t){this.data[e]=t}save(e,t){this.isSaving=true;return Qe["f"].post("/users/me/iframe-assets/",this.data).then(Object(he["e"])((t=>{this.isSaving=false;return e?e(t.data):t.data}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;return t?t(this.error):this.error})))}},Nh=babelHelpers.applyDecoratedDescriptor(Rh.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Lh=babelHelpers.applyDecoratedDescriptor(Rh.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Mh=babelHelpers.applyDecoratedDescriptor(Rh.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Rh.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(Rh.prototype,"reset"),Rh.prototype),babelHelpers.applyDecoratedDescriptor(Rh.prototype,"setField",[he["e"]],Object.getOwnPropertyDescriptor(Rh.prototype,"setField"),Rh.prototype),babelHelpers.applyDecoratedDescriptor(Rh.prototype,"save",[he["e"]],Object.getOwnPropertyDescriptor(Rh.prototype,"save"),Rh.prototype),Rh);var Uh=r("./src/udemy/js/course-manage-v2/asset-library/constants.js");var Hh,Fh,Bh,zh,Vh,Wh,Gh,Kh,$h,Xh,Yh,Qh;let Jh=(Hh=class e{constructor(){babelHelpers.initializerDefineProperty(this,"asset",Fh,this);babelHelpers.initializerDefineProperty(this,"isConfirmed",Bh,this)}confirm(){this.isConfirmed=true}cancel(){this.asset=null;this.isConfirmed=false}setAsset(e){this.asset=e}},Fh=babelHelpers.applyDecoratedDescriptor(Hh.prototype,"asset",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Bh=babelHelpers.applyDecoratedDescriptor(Hh.prototype,"isConfirmed",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Hh.prototype,"confirm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Hh.prototype,"confirm"),Hh.prototype),babelHelpers.applyDecoratedDescriptor(Hh.prototype,"cancel",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Hh.prototype,"cancel"),Hh.prototype),babelHelpers.applyDecoratedDescriptor(Hh.prototype,"setAsset",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Hh.prototype,"setAsset"),Hh.prototype),Hh);let Zh=(zh=class e{constructor(){babelHelpers.initializerDefineProperty(this,"videoChild",Vh,this);babelHelpers.initializerDefineProperty(this,"presentationChild",Wh,this);babelHelpers.initializerDefineProperty(this,"showPreviewConfirmation",Gh,this);babelHelpers.initializerDefineProperty(this,"previewAsset",Kh,this);babelHelpers.initializerDefineProperty(this,"slideTimestamps",$h,this);babelHelpers.initializerDefineProperty(this,"error",Xh,this);babelHelpers.initializerDefineProperty(this,"isLoadingPreview",Yh,this);babelHelpers.initializerDefineProperty(this,"isSaving",Qh,this);this.reset()}reset(){Object(he["y"])(this,{videoChild:new Jh,presentationChild:new Jh,showPreviewConfirmation:false,previewAsset:null,slideTimestamps:"1, 0",error:{},isLoadingPreview:false,isSaving:false})}_parsedSeconds(e){let t=0;e.split(":").reverse().forEach(((e,r)=>{t+=parseInt(e,10)*Math.pow(60,r)}));return t}get parsedSlideTimestamps(){const e=this.slideTimestamps.split("\n");const t=[];e.forEach((e=>{e=e.trim();const r=e.match(/(\d+)[\s,]+([\d:]+)/i);if(r){t.push({slide:r[1]-1,time:this._parsedSeconds(r[2])})}}));return t}get data(){if(this.videoChild.asset&&this.presentationChild.asset){return{video_asset_id:this.videoChild.asset.id,presentation_asset_id:this.presentationChild.asset.id,syndication:this.parsedSlideTimestamps,title:`${this.videoChild.asset.title} / ${this.presentationChild.asset.title}`}}return{video_asset_id:null,presentation_asset_id:null,syndication:[],title:null}}get isPreviewable(){return!!(this.videoChild.asset&&this.videoChild.isConfirmed&&this.videoChild.asset.status===Uh["b"].success&&this.presentationChild.asset&&this.presentationChild.isConfirmed&&this.presentationChild.asset.status===Uh["b"].success)}get isProcessing(){const e=!!(this.videoChild.asset&&this.videoChild.asset.status===Uh["b"].processing);const t=!!(this.presentationChild.asset&&this.presentationChild.asset.status===Uh["b"].processing);return e||t}get numSlides(){return this.presentationChild.asset&&this.presentationChild.asset.length||0}setSlideTimestamps(e){this.slideTimestamps=e}setShowPreviewConfirmation(e){this.showPreviewConfirmation=e}cancelPreview(){this.previewAsset=null}preview(){const e=this.data;this.isLoadingPreview=true;return Qe["f"].post("/users/me/preview-mashup-assets/",{title:gettext("Preview Mashup"),user:yp["a"].id,status:Uh["b"].success,data:{videoAssetId:e.video_asset_id,presentationAssetId:e.presentation_asset_id,syndication:e.syndication}},{params:{"fields[asset]":lh["z"].join(","),tracking_tag:"mashup_preview"}}).then(Object(he["e"])((e=>{this.isLoadingPreview=false;this.previewAsset=e.data;return e.data}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isLoadingPreview=false;throw this.error})))}save(e,t){this.isSaving=true;return Qe["f"].post("/users/me/mashup-assets/",this.data).then(Object(he["e"])((t=>{this.isSaving=false;return e?e(t.data):t.data}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;return t?t(this.error):this.error})))}},Vh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"videoChild",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Wh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"presentationChild",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Gh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"showPreviewConfirmation",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Kh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"previewAsset",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),$h=babelHelpers.applyDecoratedDescriptor(zh.prototype,"slideTimestamps",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Xh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Yh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"isLoadingPreview",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Qh=babelHelpers.applyDecoratedDescriptor(zh.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(zh.prototype,"reset",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zh.prototype,"reset"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"parsedSlideTimestamps",[he["g"]],Object.getOwnPropertyDescriptor(zh.prototype,"parsedSlideTimestamps"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"data",[he["g"]],Object.getOwnPropertyDescriptor(zh.prototype,"data"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"isPreviewable",[he["g"]],Object.getOwnPropertyDescriptor(zh.prototype,"isPreviewable"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"isProcessing",[he["g"]],Object.getOwnPropertyDescriptor(zh.prototype,"isProcessing"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"numSlides",[he["g"]],Object.getOwnPropertyDescriptor(zh.prototype,"numSlides"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"setSlideTimestamps",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zh.prototype,"setSlideTimestamps"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"setShowPreviewConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zh.prototype,"setShowPreviewConfirmation"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"cancelPreview",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zh.prototype,"cancelPreview"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"preview",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zh.prototype,"preview"),zh.prototype),babelHelpers.applyDecoratedDescriptor(zh.prototype,"save",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zh.prototype,"save"),zh.prototype),zh);var em=r("./src/udemy/js/course-manage-v2/asset-library/asset-library.mobx-store.js");var tm,rm,nm,im;const om=1e4;let am=(tm=class e extends bh{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"isDescriptionFormOpen",rm,this);babelHelpers.initializerDefineProperty(this,"toBeDeletedSupplementaryAssetId",nm,this);babelHelpers.initializerDefineProperty(this,"showReplaceWithVideoConfirmation",im,this);this.assetForms={[Uh["c"].article]:new Th,[Uh["c"].externalLink]:new jh,[Uh["c"].iFrame]:new qh};this.assetUploaderStores={[Uh["c"].audio]:new Oh["a"](Uh["c"].audio),[Uh["c"].ebook]:new Oh["a"](Uh["c"].ebook),[Uh["c"].misc]:new Oh["a"](Uh["c"].misc),[Uh["c"].presentation]:new Oh["a"](Uh["c"].presentation),[Uh["c"].sourceCode]:new Oh["a"](Uh["c"].sourceCode),[Uh["c"].video]:new Oh["a"](Uh["c"].video)};this.assetLibraryStores={[Uh["c"].audio]:new em["a"](Uh["c"].audio),[Uh["c"].ebook]:new em["a"](Uh["c"].ebook),[Uh["c"].misc]:new em["a"](Uh["c"].misc),[Uh["c"].presentation]:new em["a"](Uh["c"].presentation),[Uh["c"].video]:new em["a"](Uh["c"].video)};this.videoMashupAssetCreator=new Zh;Object(he["o"])(this,"selectedContentType",this._clearPreviouslyUploadedAsset)}get hasCompletedAssetContent(){return!!this.asset&&this.asset.status===Uh["b"].success}get hasTextBasedAssetContent(){return!!this.asset&&Uh["e"].has(this.asset.asset_type)}get hasVideoBasedAssetContent(){return!!this.asset&&Uh["f"].has(this.asset.asset_type)}get previewAsInstructorUrl(){return g["a"].toCourseTaking(this.course.url,`lecture/${this.id}`,{instructorPreviewMode:"instructor_v4"})}get previewAsStudentUrl(){return g["a"].toCourseTaking(this.course.url,`lecture/${this.id}`,{instructorPreviewMode:"student_v4"})}get classifiedSupplementaryAssets(){const e={interactive:[],downloadable:[],external:[]};this.supplementary_assets.forEach((t=>{switch(t.asset_type){case Uh["c"].sourceCode:e.interactive.push(t);break;case Uh["c"].externalLink:e.external.push(t);break;default:e.downloadable.push(t);break}}));return e}_clearPreviouslyUploadedAsset(e){if(this.selectedContentType!==e.newValue){if(e.newValue===Uh["c"].videoMashup){this.assetUploaderStores[Uh["c"].video].deleteAsset();this.assetUploaderStores[Uh["c"].presentation].deleteAsset()}if(e.newValue===Uh["c"].file){this.assetUploaderStores[Uh["c"].misc].deleteAsset();this.assetUploaderStores[Uh["c"].sourceCode].deleteAsset()}if(this.assetUploaderStores[e.newValue]){this.assetUploaderStores[e.newValue].deleteAsset()}if(e.newValue===null&&this.asset&&this.assetUploaderStores[this.asset.asset_type]){this.assetUploaderStores[this.asset.asset_type].initializeAsset(this.asset)}}return e}openDescriptionForm(){this.isDescriptionFormOpen=true}closeDescriptionForm(){this.isDescriptionFormOpen=false}setDescription(e){this.description=e}openDeleteSupplementaryAssetConfirmation(e){this.toBeDeletedSupplementaryAssetId=e}closeDeleteSupplementaryAssetConfirmation(){this.toBeDeletedSupplementaryAssetId=null}deleteSupplementaryAsset(){const e=this.toBeDeletedSupplementaryAssetId;if(e===null){return Promise.resolve()}this.closeDeleteSupplementaryAssetConfirmation();this.isSaving=true;return Qe["f"].delete(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/assets/${e}/`).then(Object(he["e"])((()=>{for(let t=0;t<this.supplementary_assets.length;t++){if(this.supplementary_assets[t].id===e){this.supplementary_assets.splice(t,1);break}}this.isSaving=false}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error})))}retrieve(e){return Qe["f"].get(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/`,{params:e}).then((e=>e.data)).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);throw this.error})))}static create(t,r){return Qe["f"].post(`/users/me/taught-courses/${t.id}/lectures/`,r,{params:{"fields[lecture]":lh["n"].join(","),"fields[asset]":lh["f"].join(",")}}).then((r=>{bu["a"].publishEvent(new wu["b"]({courseId:t.id,category:"create_lecture",action:"create",objectType:"lecture",objectId:r.data.id}));return new e({...r.data,course:t})})).catch((e=>{throw Object(Qe["j"])(e)}))}partialUpdate(e){return this._partialUpdate(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/`,e,Object.keys(e))}delete(){return this._delete(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/`)}readUnattachedAsset(e,t){return Qe["f"].get(`/users/me/assets/${e}/`,{params:t}).then((e=>e.data)).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);throw this.error})))}onRefreshError(e,t){this.error=e;if(t){t(e)}}refreshUnattachedAsset(e,t,r,n,i,o){let a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:om;return Object(Qe["l"])(`/users/me/assets/${e}/`,t,r,(e=>this.onRefreshError(e,n)),i,o,a)}refreshMainAsset(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:om;return Object(Qe["l"])(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/`,{"fields[lecture]":lh["o"].join(","),"fields[asset]":lh["f"].join(",")},this._setMainAsset,(t=>this.onRefreshError(t,e)),(()=>!!this.asset&&this.asset.status===Uh["b"].processing),(e=>!this.asset||this.asset.id!==e.asset.id),t)}refreshSupplementaryAssets(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:om;return Object(Qe["l"])(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/`,{"fields[lecture]":"supplementary_assets","fields[asset]":lh["f"].join(",")},Object(he["e"])((e=>{const t={};e.supplementary_assets.forEach((e=>{t[e.id]=e}));this.supplementary_assets.forEach((e=>{const r=t[e.id];if(r){Object.assign(e,r)}}))})),(t=>this.onRefreshError(t,e)),(()=>this.supplementary_assets.some((e=>e.status===Uh["b"].processing))),undefined,t)}attachMainAsset(e){this.isSaving=true;return Qe["f"].post(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/assets/`,{asset_id:e,type:Uh["d"].main}).then((()=>{bu["a"].publishEvent(new wu["b"]({courseId:this.course.id,category:"create_lecture_asset",action:"create",objectType:"asset",objectId:e}));return this.retrieve({"fields[lecture]":lh["o"].join(","),"fields[asset]":lh["f"].join(",")})})).then(Object(he["e"])((e=>{this._setMainAsset(e);this.isSaving=false;return this.asset}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error})))}attachSupplementaryAsset(e){this.isSaving=true;return Qe["f"].post(`/users/me/taught-courses/${this.course.id}/lectures/${this.id}/assets/`,{asset_id:e,type:Uh["d"].supplementary}).then((()=>this.retrieve({"fields[lecture]":"supplementary_assets","fields[asset]":lh["f"].join(",")}))).then(Object(he["e"])((e=>{this.supplementary_assets=e.supplementary_assets;this.isSaving=false;return this}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error})))}openReplaceWithVideoConfirmation(){this.showReplaceWithVideoConfirmation=true}closeReplaceWithVideoConfirmation(){this.showReplaceWithVideoConfirmation=false}replaceWithVideo(){this.showReplaceWithVideoConfirmation=false;this.isSaving=true;const t=this;return e.create(this.course,{title:this.title,description:this.description,object_index:this.object_index,sort_order:this.sort_order}).then((e=>Qe["f"].delete(`/users/me/taught-courses/${t.course.id}/lectures/${t.id}/assets/${t.asset.id}/`).then((()=>e)))).then((e=>Qe["f"].delete(`/users/me/taught-courses/${t.course.id}/lectures/${t.id}/`).then((()=>e)))).then((e=>{let r=[];if(t.asset&&!t.hasTextBasedAssetContent){r.push(t.asset)}r=r.concat(t.supplementary_assets.slice());return Promise.all(r.map((t=>e.attachSupplementaryAsset(t.id)))).then((()=>e))})).then((e=>e.retrieve({"fields[lecture]":lh["n"].join(","),"fields[asset]":lh["f"].join(",")}))).then(Object(he["e"])((e=>{Object.assign(this,e);this.closeEditContent();this.setSelectedContentType(Uh["c"].video);this.openAddContent();this.isSaving=false;return this}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error})))}_setMainAsset(e){this.asset=e.asset;this.is_downloadable=e.is_downloadable;const t=this.assetUploaderStores[this.asset.asset_type];if(t){t.updateAssetStatus(this.asset)}}},rm=babelHelpers.applyDecoratedDescriptor(tm.prototype,"isDescriptionFormOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),nm=babelHelpers.applyDecoratedDescriptor(tm.prototype,"toBeDeletedSupplementaryAssetId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),im=babelHelpers.applyDecoratedDescriptor(tm.prototype,"showReplaceWithVideoConfirmation",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(tm.prototype,"hasCompletedAssetContent",[he["g"]],Object.getOwnPropertyDescriptor(tm.prototype,"hasCompletedAssetContent"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"hasTextBasedAssetContent",[he["g"]],Object.getOwnPropertyDescriptor(tm.prototype,"hasTextBasedAssetContent"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"hasVideoBasedAssetContent",[he["g"]],Object.getOwnPropertyDescriptor(tm.prototype,"hasVideoBasedAssetContent"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"previewAsInstructorUrl",[he["g"]],Object.getOwnPropertyDescriptor(tm.prototype,"previewAsInstructorUrl"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"previewAsStudentUrl",[he["g"]],Object.getOwnPropertyDescriptor(tm.prototype,"previewAsStudentUrl"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"classifiedSupplementaryAssets",[he["g"]],Object.getOwnPropertyDescriptor(tm.prototype,"classifiedSupplementaryAssets"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"_clearPreviouslyUploadedAsset",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"_clearPreviouslyUploadedAsset"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"openDescriptionForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"openDescriptionForm"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"closeDescriptionForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"closeDescriptionForm"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"setDescription",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"setDescription"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"openDeleteSupplementaryAssetConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"openDeleteSupplementaryAssetConfirmation"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"closeDeleteSupplementaryAssetConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"closeDeleteSupplementaryAssetConfirmation"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"deleteSupplementaryAsset",[he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"deleteSupplementaryAsset"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"partialUpdate",[he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"partialUpdate"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"onRefreshError",[he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"onRefreshError"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"attachMainAsset",[he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"attachMainAsset"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"attachSupplementaryAsset",[he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"attachSupplementaryAsset"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"openReplaceWithVideoConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"openReplaceWithVideoConfirmation"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"closeReplaceWithVideoConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"closeReplaceWithVideoConfirmation"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"replaceWithVideo",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"replaceWithVideo"),tm.prototype),babelHelpers.applyDecoratedDescriptor(tm.prototype,"_setMainAsset",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(tm.prototype,"_setMainAsset"),tm.prototype),tm);class sm extends oh{constructor(e){super();this.type=e}_getInitialData(e){const t={title:"",description:"",type:this.type};if(e){Object.assign(t,{title:e.title,description:e.description})}if(this.type===lh["y"].practiceTest){if(e){Object.assign(t,{duration:e.duration,pass_percent:e.pass_percent,is_randomized:e.is_randomized})}else{Object.assign(t,{duration:null,pass_percent:null,is_randomized:false})}}return t}}var lm,cm,um;let pm=(lm=class e{constructor(){babelHelpers.initializerDefineProperty(this,"data",cm,this);babelHelpers.initializerDefineProperty(this,"error",um,this);this.reset()}reset(){Object(he["y"])(this,{data:{description:"",sendAnnouncement:false},error:{}})}get isValid(){return this.data.description.trim().length>=lh["t"]}setField(e,t){this.data[e]=t}},cm=babelHelpers.applyDecoratedDescriptor(lm.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),um=babelHelpers.applyDecoratedDescriptor(lm.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(lm.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(lm.prototype,"reset"),lm.prototype),babelHelpers.applyDecoratedDescriptor(lm.prototype,"isValid",[he["g"]],Object.getOwnPropertyDescriptor(lm.prototype,"isValid"),lm.prototype),babelHelpers.applyDecoratedDescriptor(lm.prototype,"setField",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(lm.prototype,"setField"),lm.prototype),lm);var dm;let hm=(dm=class e{constructor(e){Object(he["l"])(this,e)}get question(){return this.prompt.question||""}get correctResponse(){return this.correct_response||[]}get relatedLectureId(){const e=this.prompt.relatedLectureIds||[];return e.length>0?e[0].toString():""}get knowledgeArea(){return this.section||""}get answers(){return this.prompt.answers||[]}get feedbacks(){return this.prompt.feedbacks||[]}get explanation(){return this.prompt.explanation||""}},babelHelpers.applyDecoratedDescriptor(dm.prototype,"question",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"question"),dm.prototype),babelHelpers.applyDecoratedDescriptor(dm.prototype,"correctResponse",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"correctResponse"),dm.prototype),babelHelpers.applyDecoratedDescriptor(dm.prototype,"relatedLectureId",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"relatedLectureId"),dm.prototype),babelHelpers.applyDecoratedDescriptor(dm.prototype,"knowledgeArea",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"knowledgeArea"),dm.prototype),babelHelpers.applyDecoratedDescriptor(dm.prototype,"answers",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"answers"),dm.prototype),babelHelpers.applyDecoratedDescriptor(dm.prototype,"feedbacks",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"feedbacks"),dm.prototype),babelHelpers.applyDecoratedDescriptor(dm.prototype,"explanation",[he["g"]],Object.getOwnPropertyDescriptor(dm.prototype,"explanation"),dm.prototype),dm);var mm=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/bulk-question-uploader.mobx-model.js");var fm=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");var gm=r("./src/udemy/js/course-manage-practice-test/events.ts");const ym=Object.freeze({CODING_EXERCISE_CREATE_SUCCESS_EVENT:"CodingExerciseCreateSuccessEvent",CODING_EXERCISE_CREATE_FAIL_EVENT:"CodingExerciseCreateFailEvent",SIMPLE_QUIZ_CREATE_SUCCESS_EVENT:"SimpleQuizCreateSuccessEvent",SIMPLE_QUIZ_CREATE_FAIL_EVENT:"SimpleQuizCreateFailEvent"});const bm=Object.freeze({CODING_EXERCISE:"coding-exercise",SIMPLE_QUIZ:"simple-quiz"});const vm=Object.freeze({REQUEST_FAILED:"request_failed",TIMEOUT:"timeout"});const wm=Object.freeze({SUCCESS:"success",FAIL:"fail"});class Em extends fm["a"]{constructor(e){let{id:t,title:r,courseId:n}=e;super(ym.CODING_EXERCISE_CREATE_SUCCESS_EVENT);this.id=t;this.title=r;this.courseId=n}}class Sm extends fm["a"]{constructor(e){let{message:t,courseId:r}=e;super(ym.CODING_EXERCISE_CREATE_FAIL_EVENT);this.message=t;this.courseId=r}}class _m{static create(e,t){if(e===wm.SUCCESS){return new Em({...t})}else if(e===wm.FAIL){return new Sm({...t})}return null}}class xm extends fm["a"]{constructor(e){let{id:t,title:r,description:n,courseId:i}=e;super(ym.SIMPLE_QUIZ_CREATE_SUCCESS_EVENT);this.id=t;this.title=r;this.description=n;this.courseId=i}}class Dm extends fm["a"]{constructor(e){let{message:t,courseId:r}=e;super(ym.SIMPLE_QUIZ_CREATE_FAIL_EVENT);this.message=t.toLowerCase().includes("request failed")?vm.REQUEST_FAILED:vm.TIMEOUT;this.courseId=r}}class Cm{static create(e,t){if(e===wm.SUCCESS){return new xm({...t})}else if(e===wm.FAIL){return new Dm({...t})}return null}}class Tm{static create(e,t,r){if(e===bm.CODING_EXERCISE){return _m.create(t,r)}else if(e===bm.SIMPLE_QUIZ){return Cm.create(t,r)}else if(e===bm.PRACTICE_TEST&&t===wm.SUCCESS){return new gm["f"]({course:{id:r.courseId},practiceTest:{id:r.id,isPublished:r.is_published,numberOfQuestions:0}})}return null}}var Om=Tm;var km,Pm,Am;let Im=(km=class e{constructor(){babelHelpers.initializerDefineProperty(this,"data",Pm,this);babelHelpers.initializerDefineProperty(this,"error",Am,this);this.reset()}get type(){throw new Error("Not implemented: AssessmentFormModel.type")}reset(e){Object(he["y"])(this,{data:{assessment_type:this.type,question:"",correct_response:[],related_lecture:""},error:{}});if(e){Object(he["y"])(this.data,{assessmentId:e.id,question:e.question,correct_response:e.correctResponse,related_lecture:e.relatedLectureId})}}setField(e,t){this.data[e]=t}},Pm=babelHelpers.applyDecoratedDescriptor(km.prototype,"data",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Am=babelHelpers.applyDecoratedDescriptor(km.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(km.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(km.prototype,"reset"),km.prototype),babelHelpers.applyDecoratedDescriptor(km.prototype,"setField",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(km.prototype,"setField"),km.prototype),km);var jm=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/parsers.js");var Rm;let Nm=(Rm=class e extends Im{get type(){return lh["e"].fitb}reset(e){super.reset(e);if(e){this.data.question=Object(jm["b"])(e.question,e.correctResponse)}}validate(e,t){this.error={};if(!e){this.error={detail:gettext("No question is provided")}}else if(!t||t.length===0){this.error={detail:gettext("No answers are provided")}}}},babelHelpers.applyDecoratedDescriptor(Rm.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(Rm.prototype,"reset"),Rm.prototype),babelHelpers.applyDecoratedDescriptor(Rm.prototype,"validate",[he["e"]],Object.getOwnPropertyDescriptor(Rm.prototype,"validate"),Rm.prototype),Rm);var Lm,Mm,qm,Um;let Hm=(Lm=class e{constructor(){babelHelpers.initializerDefineProperty(this,"_options",Mm,this);babelHelpers.initializerDefineProperty(this,"toBeAddedOptionValue",qm,this);babelHelpers.initializerDefineProperty(this,"toBeDeletedOptionIndex",Um,this);this.reset()}reset(){Object(he["y"])(this,{toBeAddedOptionValue:"",toBeDeletedOptionIndex:null})}get options(){return this._options?this._options.filter((e=>!e.isDeleted)):null}setOptions(e){this._options=e.map((e=>({value:e,initialValue:e,isDeleted:false})))}get nameMap(){const e={};this._options.forEach((t=>{if(t.isDeleted){e[t.initialValue]=""}else if(t.value&&t.initialValue!==t.value){e[t.initialValue]=t.value}}));return Object.entries(e)}setToBeAddedOptionValue(e){this.toBeAddedOptionValue=e}add(){var e;if(!((e=this.toBeAddedOptionValue)!==null&&e!==void 0&&e.trim())||this.options.some((e=>e.value.localeCompare(this.toBeAddedOptionValue,undefined,{sensitivity:"accent"})===0))){Object(Ui["a"])(gettext("Knowledge Area must not be blank or repeated."))}else{this._options.push({value:this.toBeAddedOptionValue,initialValue:this.toBeAddedOptionValue,isDeleted:false});this.toBeAddedOptionValue=""}}editAtIndex(e,t){this.options[e].value=t}markAsToBeDeleted(e){this.toBeDeletedOptionIndex=e}unmarkAsToBeDeleted(){this.toBeDeletedOptionIndex=null}delete(){this.options[this.toBeDeletedOptionIndex].isDeleted=true;this.unmarkAsToBeDeleted()}},Mm=babelHelpers.applyDecoratedDescriptor(Lm.prototype,"_options",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),qm=babelHelpers.applyDecoratedDescriptor(Lm.prototype,"toBeAddedOptionValue",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Um=babelHelpers.applyDecoratedDescriptor(Lm.prototype,"toBeDeletedOptionIndex",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"reset"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"options",[he["g"]],Object.getOwnPropertyDescriptor(Lm.prototype,"options"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"setOptions",[he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"setOptions"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"nameMap",[he["g"]],Object.getOwnPropertyDescriptor(Lm.prototype,"nameMap"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"setToBeAddedOptionValue",[he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"setToBeAddedOptionValue"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"add",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"add"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"editAtIndex",[he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"editAtIndex"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"markAsToBeDeleted",[he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"markAsToBeDeleted"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"unmarkAsToBeDeleted",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"unmarkAsToBeDeleted"),Lm.prototype),babelHelpers.applyDecoratedDescriptor(Lm.prototype,"delete",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Lm.prototype,"delete"),Lm.prototype),Lm);var Fm=r("./src/udemy/js/base-components/ungraduated/form/rich-text-editor/helpers.js");var Bm,zm;const Vm=3;const Wm=600;const Gm=600;const Km=60;const $m=15;let Xm=(Bm=class e extends Im{constructor(e){super();babelHelpers.initializerDefineProperty(this,"focusedAnswerOptionIndex",zm,this);if(e!==lh["e"].multipleChoice&&e!==lh["e"].multipleSelect){throw new Error(`Invalid type ${e} for MultipleChoiceAssessmentFormModel`)}this._type=e}get type(){return this._type}reset(e,t){super.reset(e);Object(he["y"])(this,{focusedAnswerOptionIndex:null});Object(he["y"])(this.data,{answerOptions:[],explanation:"",selectedKnowledgeAreaIndex:-1});if(e){if(!t){throw new Error("Knowledge areas must be set when editing an assessment. "+"Otherwise `selectedKnowledgeAreaIndex` field will not reset correctly.")}Object(he["y"])(this.data,{answerOptions:Object(jm["d"])(e.answers,e.feedbacks,e.correctResponse),explanation:e.explanation,selectedKnowledgeAreaIndex:t.indexOf(e.knowledgeArea)});if(this.data.answerOptions.length<$m){this.addAnswerOption("","",false)}}for(let e=this.data.answerOptions.length;e<Vm;e++){this.addAnswerOption("","",false)}}addAnswerOption(e,t,r){this.data.answerOptions.push(Object(jm["c"])(e,t,r))}deleteAnswerOptionAtIndex(e){if(e===this.focusedAnswerOptionIndex){this.focusedAnswerOptionIndex=null}this.data.answerOptions.splice(e,1)}setAnswerOptionChecked(e,t){if(this.type===lh["e"].multipleChoice){if(e.checked&&!t){return}this.data.answerOptions.forEach((e=>{e.checked=false}))}e.checked=t}setAnswerOptionFeedback(e,t){e.feedback=t}setAnswerOptionValue(e,t){e.value=t}focusOnAnswerOption(e){this.focusedAnswerOptionIndex=e}decodeAndTrim(e){return e.replaceAll("<p>","").replaceAll("</p>","").replaceAll("&nbsp;","").trim()}validate(e,t,r){this.error={};if(!this.decodeAndTrim(e)){this.error={detail:gettext("Please write a question")}}else if(!t||t.length===0){this.error={detail:gettext("Please add answers.")}}else if(!this._isAnswerCountWithinLimits(t)){this.error={detail:interpolate(gettext("Keep the total count of answers under %(limit)s"),{limit:$m},true)}}else if(!this._areAnswerOptionsWithinTextLengthLimits(t)){this.error={detail:interpolate(gettext("Enter fewer than %(limit)s characters for each answer and explanation"),{limit:Wm},true)}}else if(this._hasNoCorrectAnswer(t)){this.error={detail:gettext("Please choose the best answer.")}}else if(r.length>Km){this.error={detail:interpolate(gettext("Please keep lengths of knowledge areas within %(limit)s characters"),{limit:Km},true)}}}_isAnswerCountWithinLimits(e){if(e.length>$m){return false}return true}_areAnswerOptionsWithinTextLengthLimits(e){for(let t=0;t<e.length;t++){const r=e[t];if(Object(Fm["e"])(r.value).length>Wm){return false}if(r.feedback.length>Gm){return false}}return true}_hasNoCorrectAnswer(e){return e.filter((e=>e.checked)).length===0}},zm=babelHelpers.applyDecoratedDescriptor(Bm.prototype,"focusedAnswerOptionIndex",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"reset",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"reset"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"addAnswerOption",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"addAnswerOption"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"deleteAnswerOptionAtIndex",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"deleteAnswerOptionAtIndex"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"setAnswerOptionChecked",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"setAnswerOptionChecked"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"setAnswerOptionFeedback",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"setAnswerOptionFeedback"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"setAnswerOptionValue",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"setAnswerOptionValue"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"focusOnAnswerOption",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"focusOnAnswerOption"),Bm.prototype),babelHelpers.applyDecoratedDescriptor(Bm.prototype,"validate",[he["e"]],Object.getOwnPropertyDescriptor(Bm.prototype,"validate"),Bm.prototype),Bm);var Ym,Qm,Jm,Zm,ef,tf,rf,nf,of,af,sf;let lf=(Ym=class e extends bh{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"relatedLectureOptions",Qm,this);babelHelpers.initializerDefineProperty(this,"assessments",Jm,this);babelHelpers.initializerDefineProperty(this,"showBatchAssessmentCreationConfirmation",Zm,this);babelHelpers.initializerDefineProperty(this,"showDiscardDraftConfirmation",ef,this);babelHelpers.initializerDefineProperty(this,"toBeDeletedAssessmentId",tf,this);babelHelpers.initializerDefineProperty(this,"showApplyDraftModal",rf,this);babelHelpers.initializerDefineProperty(this,"addContentAssessment",nf,this);babelHelpers.initializerDefineProperty(this,"justUpdatedOrCreatedAssessmentId",of,this);babelHelpers.initializerDefineProperty(this,"announcementRateLimit",af,this);babelHelpers.initializerDefineProperty(this,"reorderingUi",sf,this);this.applyDraftForm=new pm;this.assessmentForms={[lh["e"].fitb]:new Nm,[lh["e"].multipleChoice]:new Xm(lh["e"].multipleChoice),[lh["e"].multipleSelect]:new Xm(lh["e"].multipleSelect)};this.bulkQuestionUploader=new mm["a"];this.knowledgeAreaFormField=new Hm;Object(he["v"])(this._getNumAssessments,this._setNumAssessments);Object(he["o"])(this,"selectedContentType",this._clearPreviouslySelectedContent)}get keyClass(){return this.type}get successDeleteMessage(){if(this.type in lh["u"]){return lh["u"][this.type]}return null}get hasAssessmentContent(){return this.type!==lh["y"].codingExercise&&this.num_assessments>0}_getNumAssessments(){return this.assessments?this.assessments.length:this.num_assessments}_setNumAssessments(e){this.num_assessments=e;if(this.num_assessments===0){this.closeEditContent()}}get editCodingExerciseUrl(){return`/course/${this.course.id}/manage/coding-exercise/?quizId=${this.id}`}get editPracticeTestUrl(){return`/course/${this.course.id}/manage/practice-test/?quizId=${this.id}`}get previewAsInstructorUrl(){const e=this.type===lh["y"].practiceTest?"start":"";return g["a"].toCourseTaking(this.course.url,`quiz/${this.id}/${e}`,{instructorPreviewMode:"instructor_v4"})}get announcementTitle(){const e=gettext('New update to "%(title)s"');const t=interpolate(e,{title:this.title},true);const r=t.length-lh["q"];if(r>0){const t="...";return interpolate(e,{title:`${this.title.slice(0,this.title.length-r-t.length)}${t}`},true)}return t}get isPublishedAndCourseWasPublished(){return this.is_published&&!!this.course.published_title}_ensureEditable(){if(this.isEditable){return Promise.resolve()}return Qe["f"].post(`/courses/${this.course.id}/quizzes/`,{quiz_id:this.id,draft_action:"create"},{params:{"fields[quiz]":lh["w"].join(",")}}).then((e=>this.refresh(e.data)))}get isEditable(){return this.type!==lh["y"].practiceTest||this.is_draft||!(this.requires_draft||this.isPublishedAndCourseWasPublished)}get _currentToOriginalAssessmentId(){const e={};(this.assessments||[]).forEach((t=>{const r=t.original_assessment_id||t.id;e[t.id]=r}));return e}get _originalToCurrentAssessmentId(){const e={};Object.entries(this._currentToOriginalAssessmentId).forEach((t=>{let[r,n]=t;e[n]=parseInt(r,10)}));return e}_clearPreviouslySelectedContent(e){if(this.selectedContentType!==e.newValue){this.addContentAssessment=null;this.bulkQuestionUploader.clearFile()}return e}openAddContentForAssessment(e){return Qe["f"].get(`/quizzes/${this.id}/assessments/${e.id}/`,{params:{draft:true,"fields[assessment]":lh["b"].join(",")}}).then(Object(he["e"])((t=>{Object(he["y"])(e,t.data);this.setSelectedContentType(e.assessment_type);this.addContentAssessment=e;this.openAddContent()}))).catch(this._standardErrorHandler)}openBatchAssessmentCreationConfirmation(){this.showBatchAssessmentCreationConfirmation=true}closeBatchAssessmentCreationConfirmation(){this.showBatchAssessmentCreationConfirmation=false}confirmBatchAssessmentCreationConfirmation(){this.closeBatchAssessmentCreationConfirmation();this.setSelectedContentType(lh["a"].batch)}openDeleteAssessmentConfirmation(e){this.toBeDeletedAssessmentId=e}closeDeleteAssessmentConfirmation(){this.toBeDeletedAssessmentId=null}deleteAssessment(){const e=this.toBeDeletedAssessmentId;if(e===null){return Promise.resolve()}this.closeDeleteAssessmentConfirmation();this.isSaving=true;const t=this._currentToOriginalAssessmentId[e];return this._ensureEditable().then((()=>{const e=this._originalToCurrentAssessmentId[t];return Qe["f"].delete(`/quizzes/${this.id}/assessments/${e}/`).then(Object(he["e"])((()=>{Object(Ui["c"])(lh["d"]);this.assessments=this.assessments.filter((t=>t.id!==e));this.isSaving=false;return this._updateAssessmentSortOrders()})))})).catch(this._standardFinalEditErrorHandler)}clearJustUpdatedOrCreatedAssessmentId(){this.justUpdatedOrCreatedAssessmentId=null}openDiscardDraftConfirmation(){this.showDiscardDraftConfirmation=true}closeDiscardDraftConfirmation(){this.showDiscardDraftConfirmation=false}confirmDiscardDraftConfirmation(){this.closeDiscardDraftConfirmation();this.isSaving=true;return Qe["f"].post(`/courses/${this.course.id}/quizzes/`,{quiz_id:this.id,draft_action:"discard"},{params:{"fields[quiz]":lh["w"].join(",")}}).then((e=>this.refresh(e.data))).then(Object(he["e"])((()=>{this.isSaving=false}))).catch(this._standardFinalEditErrorHandler)}openApplyDraftModal(){this.showApplyDraftModal=true}closeApplyDraftModal(){this.showApplyDraftModal=false}applyDraft(){this.isSaving=true;const e=this.applyDraftForm.data;return Qe["f"].post(`/courses/${this.course.id}/quizzes/`,{quiz_id:this.id,draft_action:"apply",version_description:e.description},{params:{"fields[quiz]":lh["w"].join(",")}}).then((t=>{const r=t.data;if(!e.sendAnnouncement){return r}return Qe["f"].post("/announcement-groups/",{title:this.announcementTitle,content:e.description,data:{includes:[this.course.id]}}).then((()=>r)).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.error.isAnnouncementError=true;throw this.error})))})).catch(this._standardErrorHandler).then(this.refresh).then(Object(he["e"])((()=>{this.isSaving=false}))).catch(this._standardFinalEditErrorHandler)}static create(t,r){return Qe["f"].post(`/courses/${t.id}/quizzes/`,r,{params:{"fields[quiz]":lh["x"].join(",")}}).then((n=>{const i=Om.create(r.type,wm.SUCCESS,{...n.data,...{courseId:t.id}});i&&bu["a"].publishEvent(i);return new e({...n.data,course:t})})).catch((e=>{const n=Om.create(r.type,wm.FAIL,{message:e.message,courseId:t.id});n&&bu["a"].publishEvent(n);throw Object(Qe["j"])(e)}))}partialUpdate(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:lh["v"];let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.isSaving=true;const n=r?this._ensureEditable():Promise.resolve();return n.then((()=>this._partialUpdate(`/courses/${this.course.id}/quizzes/${this.id}/`,e,Object.keys(e).concat(t)))).catch(this._standardFinalEditErrorHandler)}delete(){return this._delete(`/courses/${this.course.id}/quizzes/${this.id}/`)}_createAssessment(e){return this._ensureEditable().then((()=>Qe["f"].post(`/quizzes/${this.id}/assessments/`,e,{params:{draft:this.is_draft,"fields[assessment]":lh["b"].join(",")}}))).then(Object(he["e"])((e=>{const t=new hm(e.data);this.justUpdatedOrCreatedAssessmentId=t.id;this.assessments.push(t);return t})))}_editAssessment(e){const t=this._currentToOriginalAssessmentId[this.addContentAssessment.id];return this._ensureEditable().then((()=>{const r=this._originalToCurrentAssessmentId[t];return Qe["f"].put(`/quizzes/${this.id}/assessments/${r}/`,e,{params:{draft:this.is_draft,"fields[assessment]":lh["b"].join(",")}}).then(Object(he["e"])((e=>{const t=this.assessments.find((e=>e.id===r));Object(he["y"])(t,e.data);this.justUpdatedOrCreatedAssessmentId=t.id;return t})))}))}updateOrCreateAssessment(e){this.isSaving=true;let t;if(this.addContentAssessment){t=this._editAssessment(e)}else{t=this._createAssessment(e)}return t.then(Object(he["e"])((e=>{this.isSaving=false;return e}))).catch(this._standardFinalEditErrorHandler)}bulkCreateAssessments(e){this.isSaving=true;return this._ensureEditable().then((()=>Qe["f"].patch(`/courses/${this.course.id}/quizzes/${this.id}/`,{bulk_question_file:JSON.stringify(e)},{params:{"fields[quiz]":lh["w"].concat("num_assessments").join(",")}}))).then((e=>this.refresh(e.data))).then(Object(he["e"])((()=>{this.isSaving=false}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error})))}setReorderingUi(e){Object.keys(this.reorderingUi).forEach((t=>{if(t in e){this.reorderingUi[t]=e[t]}}))}reorderAssessment(e,t){if(e===t){return Promise.resolve()}if(!this.isEditable){this.isSaving=true}return this._ensureEditable().then(Object(he["e"])((()=>{this.assessments=Object(Xd["a"])(this.assessments,e,t);this.isSaving=false;return this._updateAssessmentSortOrders().catch(Object(he["e"])((r=>{this.assessments=Object(Xd["a"])(this.assessments,t,e);this._standardErrorHandler(r)})))}))).catch(this._standardFinalEditErrorHandler)}_updateAssessmentSortOrders(){if(this.assessments.length===0){return Promise.resolve()}return Qe["f"].patch(`/courses/${this.course.id}/quizzes/${this.id}/`,{assessment_ids:JSON.stringify(this.assessments.map((e=>e.id)))},{params:{"fields[quiz]":"@min"}})}refresh(e){if(e){Object(he["y"])(this,e)}if(this.num_assessments>0){return this._refreshAssessments()}this.assessments=[];this.knowledgeAreaFormField.setOptions([]);return Promise.resolve()}_refreshAssessments(){return Qe["f"].get(`/quizzes/${this.id}/assessments/`,{params:{page_size:lh["r"],"fields[assessment]":lh["b"].concat("original_assessment_id").join(","),draft:true}}).then(Object(he["e"])((e=>{this.assessments=e.data.results.map((e=>new hm(e)));const t=new Set;this.assessments.forEach((e=>{if(e.knowledgeArea){t.add(e.knowledgeArea)}}));this.knowledgeAreaFormField.setOptions(Array.from(t))}))).catch(this._standardErrorHandler)}getRelatedLectureOptions(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.relatedLectureOptions=null;const t={params:{"fields[lecture]":"id,title",page_size:9999,is_published:"true"}};if(e){t.params.asset_type=[Uh["c"].video,Uh["c"].videoMashup];t.paramsSerializer=e=>Object(Qe["m"])(e,{arrayBrackets:false})}return Qe["f"].get(`/users/me/subscribed-courses/${this.course.id}/lectures/`,t).then(Object(he["e"])((e=>{this.relatedLectureOptions=e.data.results;return this.relatedLectureOptions}))).catch(this._standardErrorHandler)}getNumAllowedAnnouncements(){return Qe["f"].get(`/courses/${this.course.id}/allowed-announcements/`).then(Object(he["e"])((e=>{this.announcementRateLimit={numRemaining:e.data.count,maxAllowed:e.data.max_count}}))).catch(this._standardErrorHandler)}resetNumAllowedAnnouncements(){this.announcementRateLimit=null}_standardErrorHandler(e){this.error=Object(Qe["j"])(e);throw this.error}_standardFinalEditErrorHandler(e){this.error=Object(Qe["j"])(e);this.isSaving=false;throw this.error}},Qm=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"relatedLectureOptions",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Jm=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"assessments",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Zm=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"showBatchAssessmentCreationConfirmation",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ef=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"showDiscardDraftConfirmation",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),tf=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"toBeDeletedAssessmentId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),rf=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"showApplyDraftModal",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),nf=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"addContentAssessment",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),of=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"justUpdatedOrCreatedAssessmentId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),af=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"announcementRateLimit",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),sf=babelHelpers.applyDecoratedDescriptor(Ym.prototype,"reorderingUi",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{isDragging:false}}}),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"keyClass",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"keyClass"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"successDeleteMessage",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"successDeleteMessage"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"hasAssessmentContent",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"hasAssessmentContent"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_getNumAssessments",[f["a"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_getNumAssessments"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_setNumAssessments",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_setNumAssessments"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"editCodingExerciseUrl",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"editCodingExerciseUrl"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"editPracticeTestUrl",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"editPracticeTestUrl"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"previewAsInstructorUrl",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"previewAsInstructorUrl"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"announcementTitle",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"announcementTitle"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"isPublishedAndCourseWasPublished",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"isPublishedAndCourseWasPublished"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"isEditable",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"isEditable"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_currentToOriginalAssessmentId",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_currentToOriginalAssessmentId"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_originalToCurrentAssessmentId",[he["g"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_originalToCurrentAssessmentId"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_clearPreviouslySelectedContent",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_clearPreviouslySelectedContent"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"openAddContentForAssessment",[f["a"]],Object.getOwnPropertyDescriptor(Ym.prototype,"openAddContentForAssessment"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"openBatchAssessmentCreationConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"openBatchAssessmentCreationConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"closeBatchAssessmentCreationConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"closeBatchAssessmentCreationConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"confirmBatchAssessmentCreationConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"confirmBatchAssessmentCreationConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"openDeleteAssessmentConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"openDeleteAssessmentConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"closeDeleteAssessmentConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"closeDeleteAssessmentConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"deleteAssessment",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"deleteAssessment"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"clearJustUpdatedOrCreatedAssessmentId",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"clearJustUpdatedOrCreatedAssessmentId"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"openDiscardDraftConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"openDiscardDraftConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"closeDiscardDraftConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"closeDiscardDraftConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"confirmDiscardDraftConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"confirmDiscardDraftConfirmation"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"openApplyDraftModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"openApplyDraftModal"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"closeApplyDraftModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"closeApplyDraftModal"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"applyDraft",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"applyDraft"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"partialUpdate",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"partialUpdate"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"updateOrCreateAssessment",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"updateOrCreateAssessment"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"bulkCreateAssessments",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"bulkCreateAssessments"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"setReorderingUi",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"setReorderingUi"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"reorderAssessment",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"reorderAssessment"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"refresh",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"refresh"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"getRelatedLectureOptions",[he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"getRelatedLectureOptions"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"getNumAllowedAnnouncements",[f["a"]],Object.getOwnPropertyDescriptor(Ym.prototype,"getNumAllowedAnnouncements"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"resetNumAllowedAnnouncements",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"resetNumAllowedAnnouncements"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_standardErrorHandler",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_standardErrorHandler"),Ym.prototype),babelHelpers.applyDecoratedDescriptor(Ym.prototype,"_standardFinalEditErrorHandler",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Ym.prototype,"_standardFinalEditErrorHandler"),Ym.prototype),Ym);class cf extends oh{_getInitialData(e){if(e){return{title:e.title,description:e.description}}return{title:"",description:""}}}var uf,pf,df;let hf=(uf=class e extends bh{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"items",pf,this);babelHelpers.initializerDefineProperty(this,"gtAssignmentsV2",df,this)}static create(t,r){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;const i=n?lh["i"]:lh["h"];return Qe["f"].post(`/users/me/taught-courses/${t.id}/chapters/`,r,{params:{"fields[chapter]":i.join(",")}}).then((r=>new e({...r.data,course:t}))).catch((e=>{throw Object(Qe["j"])(e)}))}static createFake(){return new e({_class:lh["m"].section,id:0,title:""})}get isFake(){return this.id===0}get is_published(){return this.items.some((e=>e.is_published))}partialUpdate(e){return this._partialUpdate(`/users/me/taught-courses/${this.course.id}/chapters/${this.id}/`,e,Object.keys(e))}async fetchTopicAssignments(){return Qe["f"].get(`/users/me/taught-courses/${this.course.id}/chapters/${this.id}/`,{params:{"fields[chapter]":"gt_assignments_v2"}})}removeGtAssignmentsV2(e){this.gtAssignmentsV2=this.gtAssignmentsV2.filter((t=>t.gt_instance.id!==e))}addGtAssignmentsV2(e,t){this.gtAssignmentsV2.push({gt_instance:{id:e,default_name:t}})}delete(){return this._delete(`/users/me/taught-courses/${this.course.id}/chapters/${this.id}/`)}},pf=babelHelpers.applyDecoratedDescriptor(uf.prototype,"items",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),df=babelHelpers.applyDecoratedDescriptor(uf.prototype,"gtAssignmentsV2",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),babelHelpers.applyDecoratedDescriptor(uf.prototype,"is_published",[he["g"]],Object.getOwnPropertyDescriptor(uf.prototype,"is_published"),uf.prototype),babelHelpers.applyDecoratedDescriptor(uf.prototype,"fetchTopicAssignments",[he["e"]],Object.getOwnPropertyDescriptor(uf.prototype,"fetchTopicAssignments"),uf.prototype),babelHelpers.applyDecoratedDescriptor(uf.prototype,"removeGtAssignmentsV2",[he["e"]],Object.getOwnPropertyDescriptor(uf.prototype,"removeGtAssignmentsV2"),uf.prototype),babelHelpers.applyDecoratedDescriptor(uf.prototype,"addGtAssignmentsV2",[he["e"]],Object.getOwnPropertyDescriptor(uf.prototype,"addGtAssignmentsV2"),uf.prototype),uf);const mf="/structured-data/generic-tag/action/";const ff={ASSIGN_TOPIC:"assign_topic_to_chapter",UNASSIGN_TOPIC:"unassign_topic_from_chapter",PROPOSE_TOPIC:"create_proposed_section_topic"};const gf=2;const yf="gtinstance";const bf={model:"chapter",app:"curriculum"};const vf="section-topic-testing";const wf=2;const Ef=gettext('Something went wrong when adding the topic "%(topic)s". Please try again.');const Sf=gettext('Something went wrong when removing the topic "%(topic)s". Please try again');const _f=gettext("Something went wrong fetching topics for section. Please try again");const xf=gettext('Something went wrong when proposing new topic "%(topic)s". Please try again.');const Df=[653820,3533646];const Cf=[198371844,195994762,190557120,190695250,190695320,188757700,178302914,5487312,9685726,8280056,27592028,16122994,16122994,16122994,58935,14088122,23565832,8280056,13363166];var Tf,Of,kf,Pf,Af,If,jf,Rf,Nf,Lf,Mf,qf;const Uf=Object(Rp["a"])();const Hf=Object(Xi["a"])();let Ff=(Tf=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"sections",Of,this);babelHelpers.initializerDefineProperty(this,"loadingState",kf,this);babelHelpers.initializerDefineProperty(this,"reorderingUi",Pf,this);babelHelpers.initializerDefineProperty(this,"renderItemsUpToIndex",Af,this);this._renderItemsBatchSize=50;babelHelpers.initializerDefineProperty(this,"error",If,this);babelHelpers.initializerDefineProperty(this,"isUpdateOrderErrorShown",jf,this);babelHelpers.initializerDefineProperty(this,"addItemButtonsUi",Rf,this);babelHelpers.initializerDefineProperty(this,"curriculumItemWithInitialFocus",Nf,this);babelHelpers.initializerDefineProperty(this,"toBeDeletedCurriculumItem",Lf,this);babelHelpers.initializerDefineProperty(this,"inlineItemEditorActiveKey",Mf,this);babelHelpers.initializerDefineProperty(this,"isSectionModeInlineItemEditor",qf,this);this.curriculumItems=[];Object(he["l"])(this,{course:new eh({id:e.courseId})});this.addForms={[lh["k"].lecture]:new Sh,[lh["k"].simpleQuiz]:new sm(lh["k"].simpleQuiz),[lh["k"].practiceTest]:new sm(lh["k"].practiceTest),[lh["k"].codingExercise]:new sm(lh["k"].codingExercise),[lh["k"].section]:new cf,[lh["k"].assignment]:new ah};this.editForms={[lh["k"].lecture]:new Sh,[lh["k"].simpleQuiz]:new sm(lh["k"].simpleQuiz),[lh["k"].practiceTest]:new sm(lh["k"].practiceTest),[lh["k"].section]:new cf};this.freePreviewInfo=g["a"].toSupportLink("free_preview");this.pageStore=e.pageStore;const t=new Date(Date.now()+365*24*3600*1e3);this.freeCourseAlertStorage=Object(Yd["a"])("freeCourseAlertStorage",this.course.id,t);this.filePickerParams={policy:e.filestackPolicy,signature:e.filestackSignature}}isFreeContentExceedTimeLimit(){return this.pageStore.course.contentLengthVideo>bs["a"]}dismissAlertFreeCourseContentLength(){this.freeCourseAlertStorage.set("courseId",this.course.id)}get showAlertFreeCourseContentLength(){if(this.course.isPaid){return false}if(this.freeCourseAlertStorage.get("courseId")===this.course.id){return false}return this.isFreeContentExceedTimeLimit()}get canShowCurriculum(){if(!this.inlineInsertEnabled){return true}if(this.course.isOrganizationOnly){return true}if(!this.course.isPracticeTestCourse){return true}if(this.course.isPaid){return true}return false}get showAlertPracticeTest(){if(!this.inlineInsertEnabled){return false}if(!this.course.isPracticeTestCourse){return false}if(Uf.brand.has_organization){return false}if(this.numOfPracticeTests>0&&this.numOfPracticeTests<this.course.max_num_of_practice_tests){return false}return true}createFirstSection(){this.setInlineItemEditorActiveKey(this.flatList[0].key,true)}get isFirstElementSection(){if(this.loadingState!==lh["p"].loaded){return true}return this.flatListWithoutFakeSection.length>0&&this.flatListWithoutFakeSection[0].keyClass===lh["k"].section}get showAlertFirstSectionCreation(){if(!this.inlineInsertEnabled){return false}if(this.course.isPracticeTestCourse){return false}if(this.loadingState!==lh["p"].loaded){return false}if(this.flatListWithoutFakeSection.length===0){return false}if(this.isFirstElementSection){return false}if(this.isSectionModeInlineItemEditor&this.inlineItemEditorActiveKey===this.flatList[0].key){return false}return true}get inlineInsertEnabled(){return!Hf.isMobile}get flatList(){const e=[];this.sections.forEach((t=>{e.push(t);t.items.forEach((t=>{e.push(t)}))}));return e}get flatListWithoutFakeSection(){return this.flatList.slice(1)}get numOfNonSectionItems(){return this.flatList.filter((e=>e.keyClass!==lh["k"].section)).length}get numOfPracticeTests(){return this.flatList.filter((e=>e.keyClass===lh["k"].practiceTest)).length}_getObjectIndices(){const e={};const t={[lh["k"].section]:1,[lh["k"].lecture]:1,[lh["k"].simpleQuiz]:1,[lh["k"].codingExercise]:1,[lh["k"].practiceTest]:1,[lh["k"].assignment]:1};this.flatListWithoutFakeSection.forEach((r=>{if(r.is_published){e[r.key]=t[r.keyClass]++}else{e[r.key]=0}}));return e}_onOrderingChange(e){const t=[];this.flatListWithoutFakeSection.forEach((r=>{r.setObjectIndex(e[r.key]);t.push({id:r.id,class:r._class,type:r._class===lh["m"].quiz?r.type:undefined,is_published:r.is_published})}));this.isUpdateOrderErrorShown=false;Qe["f"].put(`/courses/${this.course.id}/instructor-curriculum-items/`,{items:JSON.stringify(t)}).catch(Object(he["e"])((()=>{this.isUpdateOrderErrorShown=true})))}get firstPublishedVideoLecture(){return this.flatList.find((e=>e.keyClass===lh["k"].lecture&&e.is_published&&e.hasCompletedAssetContent&&e.hasVideoBasedAssetContent))}get showLinkToLab(){return this.isWorkspacesEnabled&&this.course.hasWorkspaceAssociated}get isWorkspacesEnabled(){return Object($d["g"])(Kd["p"])}isLastItemInSection(e){let t=false;const r=e.keyClass===lh["k"].section;if(r&&(!e.items||e.items.length===0))return true;this.sections.filter(Boolean).forEach((r=>{r.items.filter(Boolean).forEach(((n,i)=>{if(n.key===e.key&&i===r.items.filter(Boolean).length-1)t=true}))}));return t}get isSectionTaggingEnabled(){return Df.includes(this.course.id)||Cf.includes(yp["a"].id)||this.pageStore.isCurriculumEditorSectionTopicsEnabled}async fetchCurriculum(){this.loadingState=lh["p"].loading;const e=[];e.push("primary_category");if(this.isWorkspacesEnabled){e.push("available_features")}const t=Qe["f"].get(`/courses/${this.course.id}/instructor-curriculum-items/`,{params:{page_size:Qd["a"],"fields[chapter]":lh["h"].join(","),"fields[lecture]":lh["n"].join(","),"fields[quiz]":lh["x"].join(","),"fields[practice]":lh["g"].join(","),"fields[asset]":lh["f"].join(",")}});return Promise.all([Qe["f"].get(`/courses/${this.course.id}/`,{params:{"fields[course]":lh["j"].concat(e).join(","),"fields[course_category]":"id"}}),h["a"].hasSeen(h["a"].ids.captionManagePage),this._fetchCurriculumItems(t)]).then(Object(he["e"])((e=>{let[t,r]=e;this._initialize(t.data,r);this.loadingState=lh["p"].loaded;this._renderItemsInBatches(this._renderItemsBatchSize)}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);this.loadingState=lh["p"].initial;throw this.error})))}async _fetchCurriculumItems(e){const t=await e;Object(he["x"])((()=>{this.curriculumItems.push(...t.data.results)}));if("next"in t.data&&t.data.next!==null){await this._fetchCurriculumItems(Qe["f"].get(t.data.next))}}_initialize(e,t){this.course=new eh(e);Object(he["l"])(this,{seenCaptionManage:t.data});let r=hf.createFake();this.sections=[r];this.curriculumItems.forEach((e=>{e.course=this.course;if(e._class===lh["m"].section){r=new hf(e);this.sections.push(r)}else{r.items.push(this._createSectionItem(e))}}));Object(he["v"])(this._getObjectIndices,this._onOrderingChange);const n=this._getObjectIndices();const i=this.flatListWithoutFakeSection.some((e=>e.object_index!==n[e.key]));if(i){this._onOrderingChange(n)}}_createSectionItem(e){switch(e._class){case lh["m"].lecture:return new am(e);case lh["m"].quiz:return new lf(e);case lh["m"].assignment:return new Eh(e);default:throw new Error(`Unknown curriculum item type: ${e._class}`)}}_createCurriculumItemFromPostData(e,t){switch(e){case lh["k"].assignment:return Eh.create(this.course,t);case lh["k"].lecture:return am.create(this.course,t);case lh["k"].codingExercise:case lh["k"].simpleQuiz:case lh["k"].practiceTest:return lf.create(this.course,t);case lh["k"].section:return hf.create(this.course,t,this.pageStore.isCurriculumEditorSectionTopicsEnabled);default:throw new Error(`Curriculum type ${e} cannot be created from post data`)}}_renderItemsInBatches(e){const t=this.flatListWithoutFakeSection.length;this.renderItemsUpToIndex=e;if(t>this.renderItemsUpToIndex){setTimeout((()=>{this._renderItemsInBatches(e+this._renderItemsBatchSize)}),0)}else{this.renderItemsUpToIndex=Infinity}}openAddFormForItem(e){if(e===lh["k"].section){this.addItemButtonsUi.isSectionFormOpen=true}else{this.addItemButtonsUi.selectedNonSectionType=e}}closeAddFormForItem(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!e){this.addItemButtonsUi.isSectionFormOpen=false;this.addItemButtonsUi.selectedNonSectionType=null}else if(e===lh["k"].section){this.addItemButtonsUi.isSectionFormOpen=false;if(this.inlineInsertEnabled){this.setInlineItemEditorActiveKey(null)}}else if(e===this.addItemButtonsUi.selectedNonSectionType){this.addItemButtonsUi.selectedNonSectionType=null}}openEditFormForItem(e){this.flatList.forEach((t=>{if(t.key!==e.key&&t.isEditFormOpen){t.closeEditForm()}}));e.openEditForm();this.closeAddFormForItem(null)}addItem(e,t){const r=this.addForms[e];r.startSaving();return this._createCurriculumItemFromPostData(e,t).then(Object(he["e"])((t=>{if(e===lh["k"].section){this.sections.push(t)}else{this.sections[this.sections.length-1].items.push(t)}if(this.inlineItemEditorActiveKey!==null&&this.inlineItemEditorActiveKey!==-1){const r=this.inlineItemEditorActiveKey===this.flatList[0].key;const n=e===lh["k"].section?0:1;const i=r?1:this.flatList.map((e=>e.key)).indexOf(this.inlineItemEditorActiveKey)+n;this.moveItem({item:{id:`${e}${t.id}`}},this.flatList.length-1,i)}this.inlineItemEditorActiveKey=null;this.closeAddFormForItem(e);r.finishSaving()}))).then((()=>{if(e===lh["k"].lecture){this.openAddFormForItem(e)}})).catch(Object(he["e"])((e=>{r.finishSaving(e);this.error=Object(Qe["j"])(e);throw this.error})))}editItem(e,t){const r=this.editForms[e.keyClass];r.startSaving();return e.partialUpdate(t).then(Object(he["e"])((()=>{e.closeEditForm();r.finishSaving()}))).catch(Object(he["e"])((e=>{r.finishSaving(e);this.error=Object(Qe["j"])(e);throw this.error})))}setReorderingUi(e){Object.assign(this.reorderingUi,e)}moveItem(e,t,r){if(t===r){return}let n=1;let i,o;const a=e.item;const s=this.isSectionItem(a);if(s){if(t>r){if(this.isFlatListItemDifferentFromSection(r)){r=this.findPreviousSectionFrom(r)}}else if(this.isNextFlatListItemDifferentFromSection(r)){r=this.findNextSectionFrom(r)}else{const r=e.from.childNodes;e.from.insertBefore(a,r[t-1])}i=a.id.split(lh["k"].section)[1];o=this.sections.filter((e=>e.id===parseInt(i,10)))[0];n=i===0?1:o.items.length+1}let l=Object(Xd["a"])(this.flatList,t,r);for(let e=1;e<n;e++){if(t>r){t=t+1;r=r+1}l=Object(Xd["a"])(l,t,r)}this.sections=[];let c=null;l.forEach((e=>{if(e.keyClass===lh["k"].section){c=e;c.items=[];this.sections.push(c)}else{c.items.push(e)}}))}onMove(e,t){if(e.id.includes(lh["k"].section)){return t.id.includes(lh["k"].section)}return true}isFlatListItemDifferentFromSection(e){return this.flatList[e].keyClass!==lh["k"].section}isNextFlatListItemDifferentFromSection(e){return this.flatList[e+1]&&this.isFlatListItemDifferentFromSection(e+1)}isNextFlatListItemBelongsToCurrentSection(e,t){let r=null;for(let t=e+1;t>1;t--){if(this.flatList[t].keyClass===lh["k"].section){r=t;break}}return r===t}isSectionItem(e){return e.id.includes(lh["k"].section)}findPreviousSectionFrom(e){let t=null;for(let r=e-1;r>1;r--){if(this.flatList[r].keyClass===lh["k"].section){t=r;break}}return t||1}findNextSectionFrom(e){let t=null;for(let r=e+1;r<this.flatList.length;r++){if(this.flatList[r].keyClass===lh["k"].section){t=r-1;break}}return t||this.flatList.length-1}setInitialFocusOn(e){if(e){this.curriculumItemWithInitialFocus=this._createSectionItem(e)}else{this.curriculumItemWithInitialFocus=null}}openDeleteCurriculumItemConfirmation(e){this.toBeDeletedCurriculumItem=e}closeDeleteCurriculumItemConfirmation(){this.toBeDeletedCurriculumItem=null}deleteCurriculumItem(){const e=this.toBeDeletedCurriculumItem;if(e===null){return Promise.resolve()}this.closeDeleteCurriculumItemConfirmation();e.closeAddContent();e.closeEditContent();return e.delete().then(Object(he["e"])((()=>{if(e.successDeleteMessage){Object(Ui["c"])(e.successDeleteMessage)}if(e.keyClass===lh["k"].section){const t=this.sections.findIndex((t=>t.key===e.key));const r=this.sections[t-1];r.items=r.items.concat(e.items);this.sections.splice(t,1)}else{this.sections.forEach((t=>{const r=t.items.findIndex((t=>t.key===e.key));if(r>=0){t.items.splice(r,1)}}))}this.pageStore.getContentLengthVideo()}))).catch(Object(he["e"])((e=>{this.error=Object(Qe["j"])(e);throw this.error})))}setInlineItemEditorActiveKey(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.isSectionModeInlineItemEditor=t;this.inlineItemEditorActiveKey=e;this.closeAddFormForItem()}},Of=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"sections",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),kf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"loadingState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return lh["p"].initial}}),Pf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"reorderingUi",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{isDragging:false,isFirstChildClone:false}}}),Af=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"renderItemsUpToIndex",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),If=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),jf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isUpdateOrderErrorShown",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Rf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"addItemButtonsUi",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{isSectionFormOpen:false,selectedNonSectionType:null}}}),Nf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"curriculumItemWithInitialFocus",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Lf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"toBeDeletedCurriculumItem",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),Mf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"inlineItemEditorActiveKey",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),qf=babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isSectionModeInlineItemEditor",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isFreeContentExceedTimeLimit",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isFreeContentExceedTimeLimit"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"dismissAlertFreeCourseContentLength",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"dismissAlertFreeCourseContentLength"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"showAlertFreeCourseContentLength",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"showAlertFreeCourseContentLength"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"canShowCurriculum",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"canShowCurriculum"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"showAlertPracticeTest",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"showAlertPracticeTest"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"createFirstSection",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"createFirstSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isFirstElementSection",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isFirstElementSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"showAlertFirstSectionCreation",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"showAlertFirstSectionCreation"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"inlineInsertEnabled",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"inlineInsertEnabled"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"flatList",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"flatList"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"flatListWithoutFakeSection",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"flatListWithoutFakeSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"numOfNonSectionItems",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"numOfNonSectionItems"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"numOfPracticeTests",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"numOfPracticeTests"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"_getObjectIndices",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"_getObjectIndices"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"_onOrderingChange",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"_onOrderingChange"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"firstPublishedVideoLecture",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"firstPublishedVideoLecture"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"showLinkToLab",[he["g"]],Object.getOwnPropertyDescriptor(Tf.prototype,"showLinkToLab"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isLastItemInSection",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isLastItemInSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"fetchCurriculum",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"fetchCurriculum"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"_fetchCurriculumItems",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"_fetchCurriculumItems"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"_renderItemsInBatches",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"_renderItemsInBatches"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"openAddFormForItem",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"openAddFormForItem"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"closeAddFormForItem",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"closeAddFormForItem"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"openEditFormForItem",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"openEditFormForItem"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"setReorderingUi",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"setReorderingUi"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"moveItem",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"moveItem"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"onMove",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"onMove"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isFlatListItemDifferentFromSection",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isFlatListItemDifferentFromSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isNextFlatListItemDifferentFromSection",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isNextFlatListItemDifferentFromSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isNextFlatListItemBelongsToCurrentSection",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isNextFlatListItemBelongsToCurrentSection"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"isSectionItem",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"isSectionItem"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"findPreviousSectionFrom",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"findPreviousSectionFrom"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"findNextSectionFrom",[f["a"]],Object.getOwnPropertyDescriptor(Tf.prototype,"findNextSectionFrom"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"setInitialFocusOn",[he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"setInitialFocusOn"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"openDeleteCurriculumItemConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"openDeleteCurriculumItemConfirmation"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"closeDeleteCurriculumItemConfirmation",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"closeDeleteCurriculumItemConfirmation"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"deleteCurriculumItem",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"deleteCurriculumItem"),Tf.prototype),babelHelpers.applyDecoratedDescriptor(Tf.prototype,"setInlineItemEditorActiveKey",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Tf.prototype,"setInlineItemEditorActiveKey"),Tf.prototype),Tf);var Bf=r("./src/udemy/js/course-manage-v2/curriculum/add-item-forms.less");var zf,Vf,Wf,Gf;const Kf=Object(Rp["a"])();let $f=(zf=Object(i["e"])("store"),zf(Vf=(Wf=(Gf=class e extends s["Component"]{defaultOnClick(){if(this.props.itemKeyClass){this.props.store.openAddFormForItem(this.props.itemKeyClass)}}render(){const{children:e,itemKeyClass:t,store:r,...n}=this.props;const i={udStyle:"secondary",onClick:this.defaultOnClick};if(r.inlineInsertEnabled){i.udStyle="ghost";i.size="xsmall";i.typography="ud-heading-md"}return l.a.createElement(le["a"],Object.assign({},i,n),l.a.createElement(Gd.a,{label:false,size:"small"}),l.a.createElement("span",{className:"add-item-forms--ellipsis--CWuck"},e))}},Gf.propTypes={itemKeyClass:a.a.oneOf([lh["k"].lecture,lh["k"].simpleQuiz,lh["k"].practiceTest,lh["k"].section,lh["k"].assignment,lh["k"].codingExercise]),store:a.a.instanceOf(Ff).isRequired},Gf.defaultProps={itemKeyClass:null},Gf),babelHelpers.applyDecoratedDescriptor(Wf.prototype,"defaultOnClick",[f["a"]],Object.getOwnPropertyDescriptor(Wf.prototype,"defaultOnClick"),Wf.prototype),Wf))||Vf);const Xf=e=>l.a.createElement($f,Object.assign({},e,{"data-purpose":"add-lecture-btn",itemKeyClass:lh["k"].lecture,"aria-label":gettext("Add Lecture")}),gettext("Lecture"));const Yf=e=>l.a.createElement($f,Object.assign({},e,{"data-purpose":"add-quiz-btn",itemKeyClass:lh["k"].simpleQuiz,"aria-label":gettext("Add Quiz")}),gettext("Quiz"));const Qf=e=>l.a.createElement($f,Object.assign({},e,{"data-purpose":"add-coding-exercise-btn",itemKeyClass:lh["k"].codingExercise,"aria-label":gettext("Add Coding Exercise")}),gettext("Coding Exercise"));const Jf=Object(i["e"])("store")(Object(i["f"])((e=>{let{store:t,...r}=e;let n;if(!Kf.brand.has_organization){if(!t.course.isPaid){n=gettext("Please set a price on your course to create a practice test.")}else if(t.numOfPracticeTests>=t.course.max_num_of_practice_tests){const e=[t.course.max_num_of_practice_tests];n=t.course.isPracticeTestCourse?interpolate(gettext("You are allowed to include a maximum of %s practice tests in a practice test-only course."),e):interpolate(gettext("You are allowed to include a maximum of %s practice tests in a regular Udemy course."),e)}}if(n){r["aria-disabled"]=true;r.onClick=undefined}const i=l.a.createElement($f,Object.assign({},r,{"data-purpose":"add-practice-test-btn",itemKeyClass:lh["k"].practiceTest,"aria-label":gettext("Add Practice Test")}),gettext("Practice Test"));if(!n){return i}return l.a.createElement(be["a"],{placement:"top",canToggleOnHover:true,a11yRole:"description",trigger:i},n)})));const Zf=e=>l.a.createElement($f,Object.assign({},e,{"data-purpose":"add-assignment-btn",itemKeyClass:lh["k"].assignment,"aria-label":gettext("Add Assignment")}),gettext("Assignment"));const eg=e=>l.a.createElement($f,Object.assign({},e,{"data-purpose":"add-section-btn",itemKeyClass:lh["k"].section,"aria-label":gettext("Add Section")}),gettext("Section"));var tg=r("./src/udemy/js/course-manage-v2/curriculum/item/item-form.less");var rg,ng,ig;let og=Object(i["f"])(rg=(ng=(ig=class e extends s["Component"]{UNSAFE_componentWillMount(){this.props.form.reset(this.props.curriculumItem)}onTitleChange(e){this.props.form.setField("title",e.target.value)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{form:e,onCancel:t}=this.props;return l.a.createElement("form",{"data-purpose":"assignment-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),labelProps:{className:"ud-sr-only"},"data-purpose":"assignment-form-group-title",note:e.error.title?e.error.title.join(" "):null,validationState:e.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:80,placeholder:gettext("Enter a Title"),"data-purpose":"assignment-title",value:e.data.title,onChange:this.onTitleChange,size:"small"})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:t,"data-purpose":"cancel-assignment-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-assignment-form",disabled:e.isSaving},gettext("Add Assignment")))))}},ig.propTypes={curriculumItem:a.a.instanceOf(Eh),form:a.a.instanceOf(ah).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired},ig.defaultProps={curriculumItem:null},ig),babelHelpers.applyDecoratedDescriptor(ng.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(ng.prototype,"onTitleChange"),ng.prototype),babelHelpers.applyDecoratedDescriptor(ng.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(ng.prototype,"onSubmit"),ng.prototype),ng))||rg;var ag=r("./node_modules/@udemy/icons/dist/article.ud-icon");var sg=r.n(ag);var lg=r("./node_modules/@udemy/icons/dist/audio.ud-icon");var cg=r.n(lg);var ug=r("./node_modules/@udemy/icons/dist/code.ud-icon");var pg=r.n(ug);var dg=r("./node_modules/@udemy/icons/dist/downloadable-resource.ud-icon");var hg=r.n(dg);var mg=r("./node_modules/@udemy/icons/dist/error.ud-icon");var fg=r.n(mg);var gg=r("./node_modules/@udemy/icons/dist/open-in-new.ud-icon");var yg=r.n(gg);var bg=r("./node_modules/@udemy/icons/dist/play.ud-icon");var vg=r.n(bg);var wg=r("./node_modules/@udemy/icons/dist/presentation.ud-icon");var Eg=r.n(wg);var Sg=r("./node_modules/@udemy/icons/dist/quiz.ud-icon");var _g=r.n(Sg);var xg=r("./node_modules/@udemy/icons/dist/tool.ud-icon");var Dg=r.n(xg);var Cg=r("./node_modules/@udemy/icons/dist/video-mashup.ud-icon");var Tg=r.n(Cg);const Og={curriculumItem:a.a.instanceOf(bh).isRequired};const kg={label:false,size:"xsmall"};const Pg=Object(i["f"])((e=>{let{curriculumItem:t,...r}=e;if(t.keyClass===lh["k"].section){return null}if(t.is_published){return l.a.createElement(oe.a,Object.assign({"data-purpose":"published-icon"},r))}return l.a.createElement(se.a,Object.assign({color:"warning","data-purpose":"unpublished-icon"},r))}));Pg.propTypes=Og;Pg.defaultProps=kg;const Ag=Object(i["f"])((e=>{let{curriculumItem:t,...r}=e;if(t._class===lh["m"].section){return l.a.createElement(sg.a,Object.assign({},r,{"data-purpose":"section-icon"}))}else if(t._class===lh["m"].lecture){if(!t.asset){return l.a.createElement(sg.a,Object.assign({},r,{"data-purpose":"misc-icon"}))}else if(t.asset.status===Uh["b"].processing){return l.a.createElement(Dg.a,Object.assign({},r,{"data-purpose":"processing-icon"}))}else if(t.asset.status===Uh["b"].failed){return l.a.createElement(fg.a,Object.assign({color:"negative"},r,{"data-purpose":"failed-icon"}))}else if(t.asset.asset_type===Uh["c"].video){return l.a.createElement(vg.a,Object.assign({},r,{"data-purpose":"video-icon"}))}else if(t.asset.asset_type===Uh["c"].videoMashup){return l.a.createElement(Tg.a,Object.assign({},r,{"data-purpose":"video-mashup-icon"}))}else if(t.asset.asset_type===Uh["c"].audio){return l.a.createElement(cg.a,Object.assign({},r,{"data-purpose":"audio-icon"}))}else if(t.asset.asset_type===Uh["c"].article){return l.a.createElement(sg.a,Object.assign({},r,{"data-purpose":"article-icon"}))}else if(t.asset.asset_type===Uh["c"].presentation){return l.a.createElement(Eg.a,Object.assign({},r,{"data-purpose":"presentation-icon"}))}else if(t.asset.asset_type===Uh["c"].ebook){return l.a.createElement(hg.a,Object.assign({},r,{"data-purpose":"ebook-icon"}))}else if(t.asset.asset_type===Uh["c"].file){return l.a.createElement(hg.a,Object.assign({},r,{"data-purpose":"file-icon"}))}else if(t.asset.asset_type===Uh["c"].iFrame){return l.a.createElement(yg.a,Object.assign({},r,{"data-purpose":"i-frame-icon"}))}else if(t.asset.asset_type===Uh["c"].importContent){return l.a.createElement(yg.a,Object.assign({},r,{"data-purpose":"import-content-icon"}))}}else if(t._class===lh["m"].quiz){if(t.type===lh["y"].codingExercise){return l.a.createElement(pg.a,Object.assign({},r,{"data-purpose":"quiz-icon"}))}return l.a.createElement(_g.a,Object.assign({},r,{"data-purpose":"quiz-icon"}))}else if(t._class===lh["m"].assignment){return l.a.createElement(sg.a,Object.assign({},r,{"data-purpose":"assignment-icon"}))}return null}));Ag.propTypes=Og;Ag.defaultProps=kg;var Ig,jg,Rg;let Ng=Object(i["f"])(Ig=(jg=(Rg=class e extends s["Component"]{UNSAFE_componentWillMount(){this.props.form.reset(this.props.curriculumItem)}get isEditing(){return!!this.props.curriculumItem}onTitleChange(e){this.props.form.setField("title",e.target.value)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{curriculumItem:e,form:t,onCancel:r}=this.props;return l.a.createElement("form",{"data-purpose":"lecture-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"item-form--title--2iqUM"},this.isEditing?l.a.createElement(l.a.Fragment,null,l.a.createElement(Pg,{curriculumItem:e}),e.is_published?`${gettext("Lecture")} ${e.object_index}:`:`${gettext("Lecture")}:`):gettext("New Lecture:")),l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),labelProps:{className:"ud-sr-only"},"data-purpose":"lecture-form-group-title",note:t.error.title?t.error.title.join(" "):null,validationState:t.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:80,placeholder:gettext("Enter a Title"),"data-purpose":"lecture-title",value:t.data.title,onChange:this.onTitleChange,size:"small"})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:r,"data-purpose":"cancel-lecture-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-lecture-form",disabled:t.isSaving},this.isEditing?gettext("Save Lecture"):gettext("Add Lecture")))))}},Rg.propTypes={curriculumItem:a.a.instanceOf(am),form:a.a.instanceOf(Sh).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired},Rg.defaultProps={curriculumItem:null},Rg),babelHelpers.applyDecoratedDescriptor(jg.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(jg.prototype,"onTitleChange"),jg.prototype),babelHelpers.applyDecoratedDescriptor(jg.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(jg.prototype,"onSubmit"),jg.prototype),jg))||Ig;var Lg,Mg,qg;let Ug=Object(i["f"])(Lg=(Mg=(qg=class e extends s["Component"]{UNSAFE_componentWillMount(){this.props.form.reset(this.props.curriculumItem)}onTitleChange(e){this.props.form.setField("title",e.target.value)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{form:e,onCancel:t}=this.props;return l.a.createElement("form",{"data-purpose":"coding-exercise-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),labelProps:{className:"ud-sr-only"},"data-purpose":"coding-exercise-form-group-title",note:e.error.title?e.error.title.join(" "):null,validationState:e.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:100,placeholder:gettext("Enter a Title"),"data-purpose":"coding-exercise-title",value:e.data.title,onChange:this.onTitleChange,size:"small"})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:t,"data-purpose":"cancel-coding-exercise-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-coding-exercise-form",disabled:e.isSaving},gettext("Add Coding Exercise")))))}},qg.propTypes={curriculumItem:a.a.instanceOf(lf),form:a.a.instanceOf(sm).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired},qg.defaultProps={curriculumItem:null},qg),babelHelpers.applyDecoratedDescriptor(Mg.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(Mg.prototype,"onTitleChange"),Mg.prototype),babelHelpers.applyDecoratedDescriptor(Mg.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(Mg.prototype,"onSubmit"),Mg.prototype),Mg))||Lg;var Hg=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Fg=class e extends s["Component"]{UNSAFE_componentWillMount(){this.props.form.reset(Object.assign(Object.assign({},this.props.curriculumItem),{duration:50,pass_percent:50}))}onTitleChange(e){this.props.form.setField("title",e.target.value)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{form:e,onCancel:t}=this.props;return l.a.createElement("form",{"data-purpose":"practice-test-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),labelProps:{className:"ud-sr-only"},"data-purpose":"practice-test-form-group-title",note:e.error.title?e.error.title.join(" "):null,validationState:e.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:100,placeholder:gettext("Enter a Title"),"data-purpose":"practice-test-title",value:e.data.title,onChange:this.onTitleChange,size:"small"})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:t,"data-purpose":"cancel-practice-test-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-practice-test-form",disabled:e.isSaving},gettext("Add Practice Test")))))}};Fg.propTypes={curriculumItem:a.a.instanceOf(lf),form:a.a.instanceOf(sm).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired};Fg.defaultProps={curriculumItem:null};Hg([f["a"]],Fg.prototype,"onTitleChange",null);Hg([f["a"]],Fg.prototype,"onSubmit",null);Fg=Hg([i["f"]],Fg);var Bg=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/quiz-is-saving-backdrop.less");const zg=e=>{let{className:t}=e;return l.a.createElement("div",{className:(t?t+" ":"")+"quiz-is-saving-backdrop--quiz-is-saving-backdrop--1FsgR"})};zg.propTypes={className:a.a.string};zg.defaultProps={className:""};var Vg=zg;var Wg,Gg,Kg;let $g=Object(i["f"])(Wg=(Gg=(Kg=class e extends s["Component"]{UNSAFE_componentWillMount(){this.props.form.reset(this.props.curriculumItem)}get isEditing(){return!!this.props.curriculumItem}get isValid(){const e=this.props.form.data;return e.title.trim().length>0&&e.duration!==null&&e.duration>0&&e.pass_percent!==null&&e.pass_percent>=1&&e.pass_percent<=100}onTitleChange(e){this.props.form.setField("title",e.target.value)}onDescriptionChange(e){this.props.form.setField("description",e)}onDurationChange(e){let t=e.target.value;if(t===""){t=null}else{t=parseInt(t,10)*60}this.props.form.setField("duration",t)}onPassPercentChange(e){let t=e.target.value;if(t===""){t=null}else{t=Math.min(100,Math.max(0,parseInt(t,10)))}this.props.form.setField("pass_percent",t)}onIsRandomizedChange(e){this.props.form.setField("is_randomized",e.target.checked)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{curriculumItem:e,form:t,onCancel:r}=this.props;return l.a.createElement("form",{"data-purpose":"practice-test-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"item-form--title--2iqUM"},this.isEditing?l.a.createElement(l.a.Fragment,null,l.a.createElement(Pg,{curriculumItem:e}),e.is_published?`${gettext("Practice Test")} ${e.object_index}:`:`${gettext("Practice Test")}:`):gettext("New Practice Test:")),l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),"data-purpose":"practice-test-form-group-title",note:t.error.title?t.error.title.join(" "):null,validationState:t.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:80,"data-purpose":"practice-test-title",value:t.data.title,onChange:this.onTitleChange,size:"small"})),l.a.createElement(ji["b"],{label:gettext("Description"),"data-purpose":"practice-test-form-group-description",note:t.error.description?t.error.description.join(" "):null,validationState:t.error.description?"error":"neutral"},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.PRACTICE_TEST_DESCRIPTION,value:t.data.description,onValueChange:this.onDescriptionChange})),l.a.createElement(ji["b"],{label:gettext("Duration (minutes)"),"data-purpose":"practice-test-form-group-duration",note:t.error.duration?t.error.duration.join(" "):null,validationState:t.error.duration?"error":"neutral"},l.a.createElement(Ii["b"],{type:"number",required:true,"data-purpose":"practice-test-duration",value:t.data.duration===null?"":parseInt(t.data.duration/60,10),onChange:this.onDurationChange,size:"small"})),l.a.createElement(ji["b"],{label:gettext("Minimum score to pass (percentage)"),"data-purpose":"practice-test-form-group-pass-percent",note:t.error.pass_percent?t.error.pass_percent.join(" "):null,validationState:t.error.pass_percent?"error":null},l.a.createElement(Ii["b"],{type:"number",required:true,"data-purpose":"practice-test-pass-percent",value:t.data.pass_percent===null?"":t.data.pass_percent,onChange:this.onPassPercentChange,size:"small"})),l.a.createElement(ji["b"],{udStyle:"fieldset",label:gettext("Randomize Question and Answer Order"),"data-purpose":"practice-test-form-group-is-randomized",note:t.error.is_randomized?t.error.is_randomized.join(" "):null,validationState:t.error.is_randomized?"error":"neutral"},l.a.createElement(ko["a"],{"data-purpose":"practice-test-is-randomized",checked:t.data.is_randomized,onChange:this.onIsRandomizedChange,size:"large",className:"item-form--switch--eMAwU"},l.a.createElement("span",{className:"ud-sr-only"},gettext("Randomize Question and Answer Order")))),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:r,"data-purpose":"cancel-practice-test-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-practice-test-form",disabled:t.isSaving||!this.isValid},this.isEditing?gettext("Save Practice Test"):gettext("Add Practice Test")))),t.isSaving&&l.a.createElement(Vg,null))}},Kg.propTypes={curriculumItem:a.a.instanceOf(lf),form:a.a.instanceOf(sm).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired},Kg.defaultProps={curriculumItem:null},Kg),babelHelpers.applyDecoratedDescriptor(Gg.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(Gg.prototype,"onTitleChange"),Gg.prototype),babelHelpers.applyDecoratedDescriptor(Gg.prototype,"onDescriptionChange",[f["a"]],Object.getOwnPropertyDescriptor(Gg.prototype,"onDescriptionChange"),Gg.prototype),babelHelpers.applyDecoratedDescriptor(Gg.prototype,"onDurationChange",[f["a"]],Object.getOwnPropertyDescriptor(Gg.prototype,"onDurationChange"),Gg.prototype),babelHelpers.applyDecoratedDescriptor(Gg.prototype,"onPassPercentChange",[f["a"]],Object.getOwnPropertyDescriptor(Gg.prototype,"onPassPercentChange"),Gg.prototype),babelHelpers.applyDecoratedDescriptor(Gg.prototype,"onIsRandomizedChange",[f["a"]],Object.getOwnPropertyDescriptor(Gg.prototype,"onIsRandomizedChange"),Gg.prototype),babelHelpers.applyDecoratedDescriptor(Gg.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(Gg.prototype,"onSubmit"),Gg.prototype),Gg))||Wg;var Xg,Yg,Qg;let Jg=Object(i["f"])(Xg=(Yg=(Qg=class e extends s["Component"]{UNSAFE_componentWillMount(){this.props.form.reset(this.props.curriculumItem)}get isEditing(){return!!this.props.curriculumItem}onTitleChange(e){this.props.form.setField("title",e.target.value)}onDescriptionChange(e){this.props.form.setField("description",e)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{curriculumItem:e,form:t,onCancel:r}=this.props;return l.a.createElement("form",{"data-purpose":"quiz-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"item-form--title--2iqUM"},this.isEditing?l.a.createElement(l.a.Fragment,null,l.a.createElement(Pg,{curriculumItem:e}),e.is_published?`${gettext("Quiz")} ${e.object_index}:`:`${gettext("Quiz")}:`):gettext("New Quiz:")),l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),labelProps:{className:"ud-sr-only"},"data-purpose":"quiz-form-group-title",note:t.error.title?t.error.title.join(" "):null,validationState:t.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:80,placeholder:gettext("Enter a Title"),"data-purpose":"quiz-title",value:t.data.title,onChange:this.onTitleChange,size:"small"})),l.a.createElement(ji["b"],{label:gettext("Quiz Description"),labelProps:{className:"ud-sr-only"},"data-purpose":"quiz-form-group-description",note:t.error.description?t.error.description.join(" "):null,validationState:t.error.description?"error":"neutral"},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.QUIZ_DESCRIPTION,placeholder:gettext("Quiz Description"),value:t.data.description,onValueChange:this.onDescriptionChange})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:r,"data-purpose":"cancel-quiz-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-quiz-form",disabled:t.isSaving},this.isEditing?gettext("Save Quiz"):gettext("Add Quiz")))))}},Qg.propTypes={curriculumItem:a.a.instanceOf(lf),form:a.a.instanceOf(sm).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired},Qg.defaultProps={curriculumItem:null},Qg),babelHelpers.applyDecoratedDescriptor(Yg.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(Yg.prototype,"onTitleChange"),Yg.prototype),babelHelpers.applyDecoratedDescriptor(Yg.prototype,"onDescriptionChange",[f["a"]],Object.getOwnPropertyDescriptor(Yg.prototype,"onDescriptionChange"),Yg.prototype),babelHelpers.applyDecoratedDescriptor(Yg.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(Yg.prototype,"onSubmit"),Yg.prototype),Yg))||Xg;var Zg=r("./src/udemy/js/utils/ud-raven.js");var ey=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class ty extends mi["a"]{get apiDataMap(){return{id:"id",defaultName:{source:"default_name"},isProposedTopic:{source:"is_proposed_topic",defaultValue:false}}}}ey([he["t"]],ty.prototype,"id",void 0);ey([he["t"]],ty.prototype,"defaultName",void 0);ey([he["t"]],ty.prototype,"isProposedTopic",void 0);var ry=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var ny=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};class iy{constructor(e){this.sectionHasTopics=[];this.isLoadingTopics=false;this.section=e}get canAddTopic(){return this.sectionHasTopics.length<wf}addSectionHasTopic(e){return this.sectionHasTopics.push(e)}removeSectionHasTopic(e){this.sectionHasTopics=this.sectionHasTopics.filter((t=>t.id!==e))}addTopic(e){return ny(this,void 0,void 0,(function*(){const t=this.sectionHasTopics.find((t=>t.id===e.id));if(!t){yield this.addAssignment(e)}}))}addAssignment(e){return ny(this,void 0,void 0,(function*(){const t=e.id;const r=e.defaultName;const n=[{action:ff.ASSIGN_TOPIC,options:{gt_instance:{type_name:yf,id:t},gt_assignment_type:{id:gf},entity:Object.assign({id:this.section.id},bf),location:"chapter-testing"}}];try{const t=yield Qe["f"].post(mf,{actions:n});if(t.data.results[0].status==="success"){Object(Ui["c"])(interpolate(gettext('The topic "%(defaultName)s" has been assigned.'),{defaultName:r},true));this.section.addGtAssignmentsV2(e.id,e.defaultName);this.addSectionHasTopic(e)}else{Zg["a"].captureException(t.data.results[0].message);yield Promise.reject(new Error(t.data.results[0].message))}}catch(t){Zg["a"].captureException(t);this.setErrorToast(e.defaultName)}}))}removeAssignment(e){return ny(this,void 0,void 0,(function*(){const t=e.id;const r=e.defaultName;const n=[{action:ff.UNASSIGN_TOPIC,options:{gt_instance:{type_name:yf,id:t},gt_assignment_type:{id:gf},entity:Object.assign({id:this.section.id},bf)}}];try{const i=yield Qe["f"].post(mf,{actions:n});if(i.data.results[0].status==="success"){Object(Ui["c"])(interpolate(gettext('The topic "%(defaultName)s" has been removed.'),{defaultName:r},true));this.section.removeGtAssignmentsV2(t);this.removeSectionHasTopic(e.id)}else{Zg["a"].captureException(i.data.results[0].message);yield Promise.reject(new Error(i.data.results[0].message))}}catch(t){Zg["a"].captureException(t);this.setErrorToast(e.defaultName,Sf)}}))}fetchSectionHasTopics(){this.isLoadingTopics=true;try{this.section.fetchTopicAssignments().then((e=>{e.data.gt_assignments_v2.forEach((e=>{const t=e.gt_instance.id;const r=e.gt_instance.default_name;this.section.addGtAssignmentsV2(t,r);this.addSectionHasTopic(new ty({id:t,default_name:r,is_proposed_topic:true}))}))})).finally(Object(he["e"])((()=>{this.isLoadingTopics=false})))}catch(e){Zg["a"].captureException(e);this.isLoadingTopics=false;Object(Ui["a"])(gettext(_f))}}setErrorToast(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Ef;Object(Ui["a"])(interpolate(t,{topic:e},true))}}ry([he["t"]],iy.prototype,"section",void 0);ry([he["t"]],iy.prototype,"sectionHasTopics",void 0);ry([he["t"]],iy.prototype,"isLoadingTopics",void 0);ry([he["g"]],iy.prototype,"canAddTopic",null);ry([he["e"]],iy.prototype,"addSectionHasTopic",null);ry([he["e"]],iy.prototype,"removeSectionHasTopic",null);ry([f["a"]],iy.prototype,"addTopic",null);ry([f["a"]],iy.prototype,"addAssignment",null);ry([f["a"]],iy.prototype,"removeAssignment",null);ry([he["e"]],iy.prototype,"fetchSectionHasTopics",null);var oy=r("./src/udemy/js/course-manage-v2/curriculum/item/section/topic/section-topics.less");var ay=r("./src/udemy/js/course-manage-v2/curriculum/item/section/topic/section-topic.less");var sy=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class ly extends l.a.Component{addTopic(e){e.preventDefault();this.props.onAdd(this.props.topic)}deleteTopic(e){e.preventDefault();this.props.onDelete(this.props.topic)}render(){let e,t;const r=l.a.createElement("span",{className:"section-topic--ellipsis--17RLN"},this.props.topic.defaultName);if(!this.props.locked){t=l.a.createElement(An.a,{label:gettext("Deselect")});e=this.deleteTopic}return l.a.createElement(le["a"],{componentClass:e?"button":"div",round:true,size:"small",className:"section-topic--section-topic--3zVoJ","data-purpose":`topic-id-${this.props.topic.id}`,onClick:e},r,t)}}sy([f["a"]],ly.prototype,"addTopic",null);sy([f["a"]],ly.prototype,"deleteTopic",null);var cy=r("./src/udemy/js/base-components/form/autosuggest/autosuggest.mobx-store.tsx");var uy=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var py=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const dy={include_usage:"section"};const hy=6;const my={id:-1};class fy extends cy["a"]{constructor(e){super();this.addNewTopic=false;this.canPropose=false;this.canPropose=e}create(e){const t=[{action:ff.PROPOSE_TOPIC,options:{topic_name:e,location:vf}}];return Qe["f"].post(mf,{actions:t})}loadSuggestions(e){return py(this,void 0,void 0,(function*(){const t=Object.assign(Object.assign({},dy),{search:e.q});const r=yield Qe["f"].get("structured-data/generic-tag/topic/",{params:t});const n=(r.data.results||[]).slice(0,hy).map((e=>new ty(e)));if(this.canPropose){n.push(my)}this.setSuggestions(n)}))}handleNewTopicClick(){this.addNewTopic=true}reset(){this.clearInputValue();this.addNewTopic=false}}uy([he["t"]],fy.prototype,"addNewTopic",void 0);uy([he["e"]],fy.prototype,"loadSuggestions",null);uy([f["a"],he["e"]],fy.prototype,"handleNewTopicClick",null);uy([f["a"],he["e"]],fy.prototype,"reset",null);var gy=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var yy=r("./node_modules/@udemy/react-autosuggest-components/dist/esm/autosuggest/autosuggest.react-component.js");var by=r("./src/udemy/js/course-manage-v2/curriculum/item/section/topic/topic-autosuggestion.less");var vy=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let wy=class e extends l.a.Component{constructor(){super(...arguments);this.shouldBlurAutosuggest=true}setShouldBlurAutosuggest(e){this.shouldBlurAutosuggest=e}onSuggestionsMouseDown(){this.setShouldBlurAutosuggest(false)}onInputBlur(){this.autosuggestBlurTimeoutId&&clearTimeout(this.autosuggestBlurTimeoutId);this.autosuggestBlurTimeoutId=setTimeout((()=>{this.shouldBlurAutosuggest&&this.props.sectionTopicsStore.reset();this.setShouldBlurAutosuggest(true)}),0)}onInputKeyDown(e){var t,r;if(e.keyCode===gy["b"].RETURN&&!this.props.sectionTopicsStore.selectedSuggestion){e.preventDefault();(r=(t=this.props).addProposedTopic)===null||r===void 0?void 0:r.call(t)}}renderSuggestions(e,t){return l.a.createElement("ul",{className:"ud-unstyled-list topic-autosuggestion--suggestions--1hnGF",onMouseDown:this.onSuggestionsMouseDown},e.map(((e,r)=>{if(e===my){return l.a.createElement("li",{key:r,className:"topic-autosuggestion--propose-topic--1wfwb"},t(r,interpolate(gettext('Propose new topic "%s"'),[this.props.sectionTopicsStore.inputValue]),{"data-purpose":"propose-topic"}))}return l.a.createElement("li",{key:r,className:"topic-autosuggestion--suggested-topic--3di9P"},t(r,l.a.createElement("span",{className:"topic-autosuggestion--ellipsis--qxo9K"},e.defaultName),{round:true,udStyle:"secondary",size:"small",typography:"ud-heading-sm"}))})))}render(){return l.a.createElement(yy["a"],{autosuggestStore:this.props.sectionTopicsStore,renderSuggestions:this.renderSuggestions,noResultsContent:null,onSuggestionSelected:this.props.onSuggestionSelected,"data-purpose":"autosuggest-input",placeholder:this.props.autosuggestPlaceholder,autoFocus:this.props.autofocus,onBlur:this.onInputBlur,onKeyDown:this.onInputKeyDown})}};vy([he["t"]],wy.prototype,"shouldBlurAutosuggest",void 0);vy([he["e"]],wy.prototype,"setShouldBlurAutosuggest",null);vy([f["a"]],wy.prototype,"onSuggestionsMouseDown",null);vy([f["a"]],wy.prototype,"onInputBlur",null);vy([f["a"]],wy.prototype,"onInputKeyDown",null);vy([f["a"]],wy.prototype,"renderSuggestions",null);wy=vy([i["f"]],wy);var Ey=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Sy=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};let _y=class e extends l.a.Component{constructor(e){super(e);this.sectionTopicsStore=new fy(true)}componentDidMount(){this.props.sectionHasTopicStore.fetchSectionHasTopics()}get searchBoxVisible(){return this.sectionTopicsStore.addNewTopic&&this.props.sectionHasTopicStore.canAddTopic||!this.props.sectionHasTopicStore.sectionHasTopics.length}onSuggestionSelected(e){return Sy(this,void 0,void 0,(function*(){if(e.id===my.id){return this.addProposedLabel()}this.sectionTopicsStore.reset();yield this.props.sectionHasTopicStore.addTopic(e)}))}handleNewTopic(){this.sectionTopicsStore.handleNewTopicClick()}addProposedLabel(){if(!this.sectionTopicsStore.canPropose){return}const e=this.sectionTopicsStore.inputValue;this.sectionTopicsStore.create(e).then((t=>Sy(this,void 0,void 0,(function*(){const r=t.data.results[0].status;if(r==="success"){const r=new ty({id:t.data.results[0].data.id,default_name:e,is_proposed_topic:true});yield this.props.sectionHasTopicStore.addTopic(r);Object(Ui["c"])(interpolate(gettext('The topic "%(topic)s" has been proposed.'),{topic:e},true))}else{Object(Ui["a"])(interpolate(gettext('Something went wrong proposing topic "%(topic)s" to section. Please refresh page and try again.'),{topic:e},true))}this.sectionTopicsStore.reset()})))).catch((()=>{this.sectionTopicsStore.reset();Object(Ui["a"])(interpolate(gettext('Something went wrong proposing topic "%(topic)s" to section. Please refresh page and try again.'),{topic:e},true))}))}renderAutosuggestComponent(){return l.a.createElement("div",{className:"section-topics--autosuggest-display-container--20_Ao"},l.a.createElement(wy,{autosuggestPlaceholder:gettext("e.g. AWS S3"),onSuggestionSelected:this.onSuggestionSelected,sectionTopicsStore:this.sectionTopicsStore,autofocus:this.props.sectionHasTopicStore.sectionHasTopics.length>0,addProposedTopic:this.addProposedLabel}))}renderTopics(e){const t=[];e.forEach((e=>t.push(l.a.createElement(ly,{key:e.id,topic:e,locked:false,onAdd:this.props.sectionHasTopicStore.addTopic,onDelete:this.props.sectionHasTopicStore.removeAssignment}))));return!t.length?null:l.a.createElement("span",{className:"section-topics--section-topics--3TuEk"},t)}render(){let e,t;const{isLoadingTopics:r}=this.props.sectionHasTopicStore;if(this.searchBoxVisible){e=this.renderAutosuggestComponent()}else if(this.props.sectionHasTopicStore.canAddTopic){t=l.a.createElement(le["a"],{udStyle:"link","data-purpose":"display-autosuggest-box",onClick:this.handleNewTopic,className:"ud-link-neutral ud-link-underline",typography:"ud-text-xs"},gettext("Propose another topic..."))}else{t=gettext("A maximum of 2 topics are allowed. To replace a topic, first remove one.")}return l.a.createElement(l.a.Fragment,null,r?l.a.createElement(v["a"],{block:true,size:"medium"}):l.a.createElement(ji["b"],{label:gettext("Topic"),labelProps:{className:"ud-sr-only"},note:t},this.renderTopics(this.props.sectionHasTopicStore.sectionHasTopics),e))}};Ey([he["g"]],_y.prototype,"searchBoxVisible",null);Ey([f["a"]],_y.prototype,"onSuggestionSelected",null);Ey([f["a"]],_y.prototype,"handleNewTopic",null);Ey([f["a"]],_y.prototype,"addProposedLabel",null);_y=Ey([i["f"]],_y);var xy=r("./src/udemy/js/course-manage-v2/curriculum/item/section/topic/section-topic-form-input.less");const Dy={"./section-topic-form-input.less":{"section-topic-form-container":"section-topic-form-input--section-topic-form-container--2ExtX","icon-container":"section-topic-form-input--icon-container--1mBPt","topic-with-icon":"section-topic-form-input--topic-with-icon--kjAxF"}};var Cy=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Ty=class e extends l.a.Component{renderTopic(e,t,r){return l.a.createElement("span",{className:er()(fr()({"topic-with-icon":!!r}),Dy)},l.a.createElement("span",Object(fe["a"])({descriptionOfCaller:e,html:t})),r&&l.a.createElement("span",{className:"section-topic-form-input--icon-container--1mBPt"},r))}renderTooltip(){return l.a.createElement(be["a"],{a11yRole:"description",canToggleOnHover:true,placement:"right",trigger:l.a.createElement(ye.a,{label:gettext("Get info")})},l.a.createElement("div",{className:"ud-text-sm ud-text-with-links"},gettext("The section topic should communicate the main concept the section is about.\n"+"Do not select a section topic for sections that do not result in a learning objective such as ones covering  course outline, prerequisites, set-up, and closing remarks.\n"+'e.g. In a "Python Bootcamp" course, a section on using Python libraries to scrape web content should have "Web Scraping" as its section topic.')))}render(){return l.a.createElement(ji["b"],{className:"section-topic-form-input--section-topic-form-container--2ExtX",udStyle:"fieldset",label:this.renderTopic("topic-input:what-is-taught",gettext("What topics are taught in this section?"),this.renderTooltip())},l.a.createElement(_y,{sectionHasTopicStore:this.props.sectionHasTopicStore}))}};Ty=Cy([i["f"]],Ty);var Oy,ky,Py;let Ay=Object(i["f"])(Oy=(ky=(Py=class e extends s["Component"]{constructor(e){super(e);if(e.curriculumItem){this.sectionHasTopicStore=new iy(e.curriculumItem)}}UNSAFE_componentWillMount(){this.props.form.reset(this.props.curriculumItem)}get isEditing(){return!!this.props.curriculumItem}onTitleChange(e){this.props.form.setField("title",e.target.value)}onDescriptionChange(e){this.props.form.setField("description",e.target.value)}onSubmit(e){e.preventDefault();this.props.onSubmit(this.props.form.data)}render(){const{curriculumItem:e,form:t,onCancel:r}=this.props;return l.a.createElement("form",{"data-purpose":"section-form",className:"item-form--item-form--2egBT",onSubmit:this.onSubmit},l.a.createElement("div",{className:"ud-text-bold item-form--title--2iqUM"},this.isEditing?l.a.createElement(l.a.Fragment,null,e.is_published?`${gettext("Section")} ${e.object_index}:`:`${gettext("Section")}:`):gettext("New Section:")),l.a.createElement("div",{className:"item-form--flex--v1fQR"},l.a.createElement(ji["b"],{label:gettext("Title"),labelProps:{className:"ud-sr-only"},"data-purpose":"section-form-group-title",note:t.error.title?t.error.title.join(" "):null,validationState:t.error.title?"error":"neutral"},l.a.createElement(Ru["a"],{autoFocus:true,maxLength:80,placeholder:gettext("Enter a Title"),"data-purpose":"section-title",value:t.data.title,onChange:this.onTitleChange,size:"small"})),this.props.hasSectionTopicsEnabled&&l.a.createElement("div",{className:"item-form--form-section--xWe0J"},l.a.createElement(Ty,{sectionHasTopicStore:this.sectionHasTopicStore})),l.a.createElement(ji["b"],{label:gettext("What will students be able to do at the end of this section?"),"data-purpose":"section-form-group-description",note:t.error.description?t.error.description.join(" "):null,validationState:t.error.description?"error":"neutral"},l.a.createElement(Ru["a"],{maxLength:200,placeholder:gettext("Enter a Learning Objective"),"data-purpose":"section-objective",value:t.data.description,onChange:this.onDescriptionChange,size:"small"})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:r,"data-purpose":"cancel-section-form"},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small","data-purpose":"submit-section-form",disabled:t.isSaving},this.isEditing?gettext("Save Section"):gettext("Add Section")))))}},Py.propTypes={curriculumItem:a.a.instanceOf(hf),form:a.a.instanceOf(cf).isRequired,onCancel:a.a.func.isRequired,onSubmit:a.a.func.isRequired,hasSectionTopicsEnabled:a.a.bool},Py.defaultProps={curriculumItem:null,hasSectionTopicsEnabled:false},Py),babelHelpers.applyDecoratedDescriptor(ky.prototype,"onTitleChange",[f["a"]],Object.getOwnPropertyDescriptor(ky.prototype,"onTitleChange"),ky.prototype),babelHelpers.applyDecoratedDescriptor(ky.prototype,"onDescriptionChange",[f["a"]],Object.getOwnPropertyDescriptor(ky.prototype,"onDescriptionChange"),ky.prototype),babelHelpers.applyDecoratedDescriptor(ky.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(ky.prototype,"onSubmit"),ky.prototype),ky))||Oy;var Iy,jy,Ry,Ny;let Ly=(Iy=Object(i["e"])("store"),Iy(jy=Object(i["f"])(jy=(Ry=(Ny=class e extends s["Component"]{constructor(e,t){super(e,t);this.cancelHandlers={};this.submitHandlers={};Object.keys(this.props.store.addForms).forEach((e=>{this.cancelHandlers[e]=()=>{this.onCancel(e)};this.submitHandlers[e]=t=>{this.onSubmit(e,t)}}))}onCancel(e){this.props.store.closeAddFormForItem(e)}onSubmit(e,t){this.props.store.addItem(e,t).catch(Fd)}renderForTestOnlyCourse(){const{store:e}=this.props;switch(e.addItemButtonsUi.selectedNonSectionType){case lh["k"].practiceTest:if(Vd("is_new_practice_test_creation_ui_enabled")){return l.a.createElement(Fg,{key:"practice-test-quiz-form",form:e.addForms[lh["k"].practiceTest],onCancel:this.cancelHandlers[lh["k"].practiceTest],onSubmit:this.submitHandlers[lh["k"].practiceTest]})}return l.a.createElement($g,{key:"practice-test-quiz-form",form:e.addForms[lh["k"].practiceTest],onCancel:this.cancelHandlers[lh["k"].practiceTest],onSubmit:this.submitHandlers[lh["k"].practiceTest]});default:if(!e.inlineInsertEnabled){return l.a.createElement("div",{className:"add-item-forms--block-btns-row--1XyfH"},l.a.createElement(Jf,null))}return l.a.createElement("div",{className:"add-item-forms--inline-btns-row--3fZ9n"},l.a.createElement(Jf,null))}}renderForStandardCourse(){const{store:e}=this.props;if(e.numOfNonSectionItems>=e.course.max_num_of_non_section_items){return l.a.createElement(b["a"],{udStyle:"warning",showCta:false,title:gettext("The maximum number of curriculum items has been reached."),"data-purpose":"max-curriculum-items-alert"})}const t=[];switch(e.addItemButtonsUi.selectedNonSectionType){case lh["k"].lecture:t.push(l.a.createElement(Ng,{key:"lecture-form",form:e.addForms[lh["k"].lecture],onCancel:this.cancelHandlers[lh["k"].lecture],onSubmit:this.submitHandlers[lh["k"].lecture]}));break;case lh["k"].simpleQuiz:t.push(l.a.createElement(Jg,{key:"simple-quiz-form",form:e.addForms[lh["k"].simpleQuiz],onCancel:this.cancelHandlers[lh["k"].simpleQuiz],onSubmit:this.submitHandlers[lh["k"].simpleQuiz]}));break;case lh["k"].practiceTest:if(Vd("is_new_practice_test_creation_ui_enabled")){t.push(l.a.createElement(Fg,{key:"practice-test-quiz-form",form:e.addForms[lh["k"].practiceTest],onCancel:this.cancelHandlers[lh["k"].practiceTest],onSubmit:this.submitHandlers[lh["k"].practiceTest]}));break}t.push(l.a.createElement($g,{key:"practice-test-quiz-form",form:e.addForms[lh["k"].practiceTest],onCancel:this.cancelHandlers[lh["k"].practiceTest],onSubmit:this.submitHandlers[lh["k"].practiceTest]}));break;case lh["k"].codingExercise:t.push(l.a.createElement(Ug,{key:"coding-exercise-quiz-form",form:e.addForms[lh["k"].codingExercise],onCancel:this.cancelHandlers[lh["k"].codingExercise],onSubmit:this.submitHandlers[lh["k"].codingExercise]}));break;case lh["k"].assignment:t.push(l.a.createElement(og,{key:"assignment-form",form:e.addForms[lh["k"].assignment],onCancel:this.cancelHandlers[lh["k"].assignment],onSubmit:this.submitHandlers[lh["k"].assignment]}));break;default:if(!e.inlineInsertEnabled){t.push(l.a.createElement("div",{key:"non-section-row-1",className:"add-item-forms--block-btns-row--1XyfH"},l.a.createElement(Xf,null),l.a.createElement(Yf,null)));t.push(l.a.createElement("div",{key:"non-section-row-2",className:"add-item-forms--block-btns-row--1XyfH"},l.a.createElement(Qf,null),l.a.createElement(Jf,null),l.a.createElement(Zf,null)))}else{t.push(l.a.createElement("div",{className:"add-item-forms--inline-btns-row--3fZ9n",key:"inline-sections"},l.a.createElement(Xf,null),l.a.createElement(Yf,null),l.a.createElement(Qf,null),l.a.createElement(Jf,null),l.a.createElement(Zf,null)))}break}if(!e.inlineInsertEnabled){t.push(l.a.createElement("div",{key:"section-row",className:"add-item-forms--section-row--2npGN"},e.addItemButtonsUi.isSectionFormOpen?l.a.createElement(Ay,{form:e.addForms[lh["k"].section],onCancel:this.cancelHandlers[lh["k"].section],onSubmit:this.submitHandlers[lh["k"].section]}):l.a.createElement("div",{className:"add-item-forms--block-btns-row--1XyfH"},l.a.createElement(eg,null))))}return t}renderSectionForm(){const{store:e}=this.props;return l.a.createElement(Ay,{form:e.addForms[lh["k"].section],onCancel:this.cancelHandlers[lh["k"].section],onSubmit:this.submitHandlers[lh["k"].section]})}render(){const{store:e,onlySectionForm:t}=this.props;if(t){return this.renderSectionForm()}else if(e.course.isPracticeTestCourse){return this.renderForTestOnlyCourse()}return this.renderForStandardCourse()}},Ny.propTypes={store:a.a.instanceOf(Ff).isRequired,onlySectionForm:a.a.bool},Ny.defaultProps={onlySectionForm:false},Ny),babelHelpers.applyDecoratedDescriptor(Ry.prototype,"onCancel",[f["a"]],Object.getOwnPropertyDescriptor(Ry.prototype,"onCancel"),Ry.prototype),babelHelpers.applyDecoratedDescriptor(Ry.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(Ry.prototype,"onSubmit"),Ry.prototype),Ry))||jy)||jy);const My={store:a.a.object.isRequired};const qy=e=>{let{store:t,...r}=e;if(!t.showAlertFirstSectionCreation){return null}return l.a.createElement(b["a"],Object.assign({},r,{showCta:false,title:gettext("Your first lecture is outside of a section."),body:l.a.createElement(m["b"],{html:gettext('<button class="createSection">Create a section</button> to hold this lecture.'),interpolate:{createSection:l.a.createElement(le["a"],{className:"ud-link-underline",udStyle:"link",typography:"ud-text-bold",onClick:t.createFirstSection})}})}))};qy.propTypes=My;var Uy=Object(i["e"])("store")(Object(i["f"])(qy));var Hy,Fy,By;let zy=(Hy=Object(i["e"])("store"),Hy(Fy=Object(i["f"])(Fy=(By=class e extends l.a.Component{constructor(e){super(e);const t=yp["a"].language;this.freeCourseFAQLink=g["a"].toFreeCourseFAQLink(t)}render(){const{store:e,...t}=this.props;if(!e.showAlertFreeCourseContentLength){return null}return l.a.createElement(b["a"],Object.assign({},t,{udStyle:"warning",ctaText:gettext("Dismiss"),onAction:e.dismissAlertFreeCourseContentLength,dismissButtonProps:false,"data-purpose":"alert-free-course-content",title:ninterpolate("Free courses published or updated after %(date)s must have less than %(hours)s hour of video.","Free courses published or updated after %(date)s must have less than %(hours)s hours of video.",bs["b"],{date:bs["c"],hours:bs["b"]}),body:l.a.createElement(m["b"],{className:"ud-text-with-links",html:gettext("If you add or change any video content you will be required "+'to <a class="priceCenter">select a new price</a> for your course. '+"To learn more about the new free course experience and policy read our "+'<a class="freeCourseFAQLink">FAQ on the teaching center</a>.'),interpolate:{priceCenter:l.a.createElement(y["a"],{to:"/pricing"}),freeCourseFAQLink:l.a.createElement("a",{href:this.freeCourseFAQLink,target:"_blank",rel:"noopener noreferrer"})}})}))}},By.propTypes={store:a.a.object.isRequired},By))||Fy)||Fy);var Vy,Wy,Gy,Ky,$y;let Xy=(Vy=Object(i["e"])("store"),Vy(Wy=Object(i["f"])(Wy=(Gy=($y=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"isShown",Ky,this)}componentDidMount(){if(this.props.store.inlineInsertEnabled){h["a"].hasSeen(h["a"].ids.modalInlineFirstTime).then(Object(he["e"])((e=>{this.isShown=!e.data})))}}handleAlertDismiss(){h["a"].seen(h["a"].ids.modalInlineFirstTime);this.isShown=false}render(){if(!this.isShown){return null}const{store:e,...t}=this.props;return l.a.createElement(b["a"],Object.assign({},t,{ctaText:gettext("Dismiss"),onAction:this.handleAlertDismiss,dismissButtonProps:false,title:gettext("Here’s where you add course content—like lectures, course sections, assignments, and more. "+"Click a + icon on the left to get started.")}))}},$y.propTypes={store:a.a.object.isRequired},$y),Ky=babelHelpers.applyDecoratedDescriptor(Gy.prototype,"isShown",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Gy.prototype,"handleAlertDismiss",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Gy.prototype,"handleAlertDismiss"),Gy.prototype),Gy))||Wy)||Wy);const Yy={store:a.a.instanceOf(Ff).isRequired};const Qy=e=>{let{store:t,...r}=e;if(!t.showAlertPracticeTest){return null}let n="";if(!t.course.isPaid){n=gettext("Please set a price on your course to create a practice test.")}else if(t.numOfPracticeTests>=t.course.max_num_of_practice_tests){const e=[t.course.max_num_of_practice_tests];n=interpolate(gettext("You are allowed to include a maximum of %s practice tests in a practice test-only course."),e)}if(!n){return null}return l.a.createElement(b["a"],Object.assign({},r,{udStyle:"error",showCta:false,title:n}))};Qy.propTypes=Yy;var Jy=Object(i["e"])("store")(Object(i["f"])(Qy));const Zy={store:a.a.instanceOf(Ff).isRequired};const eb=e=>{let{store:t,...r}=e;if(t.course.hasSufficientPreviewLength){return null}return l.a.createElement(b["a"],Object.assign({},r,{udStyle:"error",showCta:false,title:gettext("You no longer have 10 minutes of video content available for free preview which "+"may impact enrollment rate for your course."),body:l.a.createElement(m["b"],{className:"ud-text-with-links",html:gettext("Please enable free preview for another video lecture so that you meet this minimum requirement "+'or we will enable one for you automatically. <a class="freePreviewInfo">Learn More</a>.'),interpolate:{freePreviewInfo:l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:t.freePreviewInfo})}})}))};eb.propTypes=Zy;var tb=Object(i["e"])("store")(Object(i["f"])(eb));var rb=r("./src/udemy/js/instructor/hooks/use-system-message.ts");var nb=r("./src/udemy/js/course-manage-v2/curriculum/curriculum-editor.less");var ib=r.n(nb);const ob=()=>{const e=Object(m["j"])();const[t,r]=Object(rb["a"])("ceBetaBannerOnCurriculumSeen");if(!t)return l.a.createElement(l.a.Fragment,null);return l.a.createElement("div",{className:ib.a["beta-badge"]},l.a.createElement("div",null,l.a.createElement(ms["a"],{className:ib.a.yellow},e.gettext("Beta"))),l.a.createElement("div",{className:ib.a.content},l.a.createElement("div",{className:"ud-heading-md"},e.gettext("Enhance your course by adding coding exercises with our new features."))),l.a.createElement("div",null),l.a.createElement("div",{className:ib.a["button-wrapper"]},l.a.createElement(le["a"],{componentClass:"a",href:"/udemy-teach-hub/whats_new_with_coding_exercises/",target:"_blank",rel:"noopener noreferrer"},e.gettext("Learn more")),l.a.createElement(le["a"],{udStyle:"ghost",className:"ud-link-neutral",onClick:r},e.gettext("Dismiss"))))};var ab=r("./src/udemy/js/base-components/ungraduated/sortable/sortable.react-component.js");var sb=r("./src/udemy/js/course-manage-v2/curriculum/add-item.less");var lb,cb,ub,pb;const db={"./add-item.less":{"add-item-toggler":"add-item--add-item-toggler--1k-rh","icon-wrapper":"add-item--icon-wrapper--GRi6k",icon:"add-item--icon--2FsmW",open:"add-item--open--2FcI6",lecture:"add-item--lecture--2ZWW9",section:"add-item--section--1_IVB","add-item-toggler-last-item":"add-item--add-item-toggler-last-item--13s0A","expand-icon":"add-item--expand-icon--28mRO"}};let hb=(lb=Object(i["e"])("store"),lb(cb=(ub=(pb=class e extends s["Component"]{shouldComponentUpdate(e){return this.props.isOpen!==e.isOpen||this.props.isLastItem!==e.isLastItem}handleClick(){this.props.onClick(this.props.relatedItemKey)}render(){const{className:e,store:t,isOpen:r,type:n,isLastItem:i}=this.props;if(!t.inlineInsertEnabled){return null}const o=n==="lecture";const a=r?gettext("Close"):gettext("New curriculum item");return l.a.createElement(l.a.Fragment,null,i?l.a.createElement(le["a"],{size:"small",udStyle:r?"ghost":"secondary",onClick:this.handleClick,"data-purpose":"add-item-inline-last",className:er()(fr()("add-item-toggler-last-item",{open:r,section:!o}),db)},l.a.createElement(An.a,{label:a,size:"small",className:er()(fr()("add-item-toggler-last-item",{"expand-icon":true,section:!o,open:r}),db)}),!r&&(o?gettext("Curriculum item"):gettext("Section"))):l.a.createElement(le["a"],{udStyle:"link",size:"xsmall","data-purpose":"add-item-inline",onClick:this.handleClick,className:(fr()(e,"ud-custom-focus-visible")?fr()(e,"ud-custom-focus-visible")+" ":"")+er()(fr()("add-item-toggler",{open:r,lecture:o,section:!o}),db)},l.a.createElement("span",{className:"ud-focus-visible-target add-item--icon-wrapper--GRi6k"},l.a.createElement(An.a,{label:a,size:"small",className:"add-item--icon--2FsmW"}))))}},pb.propTypes={store:a.a.instanceOf(Ff).isRequired,className:a.a.string,relatedItemKey:a.a.oneOfType([a.a.string,a.a.number]).isRequired,onClick:a.a.func.isRequired,isOpen:a.a.bool.isRequired,isLastItem:a.a.bool,type:a.a.oneOf(["section","lecture"])},pb.defaultProps={className:"",type:"lecture",isLastItem:false},pb),babelHelpers.applyDecoratedDescriptor(ub.prototype,"handleClick",[f["a"]],Object.getOwnPropertyDescriptor(ub.prototype,"handleClick"),ub.prototype),ub))||cb);var mb=r("./src/udemy/js/course-manage-v2/curriculum/item/default-item-editor.less");var fb,gb,yb,bb;const vb={"./default-item-editor.less":{"item-editor":"default-item-editor--item-editor--3GhNq","edit-content":"default-item-editor--edit-content--HLXOq","add-content":"default-item-editor--add-content--1wZ-X",hidden:"default-item-editor--hidden--ta67x","intial-focus":"default-item-editor--intial-focus--1UztC",flash:"default-item-editor--flash--28TK6"}};let wb=Object(i["f"])(fb=(gb=(bb=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"showInitialFocus",yb,this)}UNSAFE_componentWillMount(){if(this.props.shouldOpenEditContentInitially||this.props.hasInitialFocus){this.props.curriculumItem.openEditContent()}}componentDidMount(){if(this.props.hasInitialFocus){setTimeout(this.setScrollInitialFocus)}}setScrollInitialFocus(){const e=this.element.getBoundingClientRect().top;const t=parseInt(window.innerHeight/2,10);window.scrollTo({top:e-t,left:0});this.showInitialFocus=true}setRef(e){this.element=e;this.props.onSetRef(e)}render(){const{curriculumItem:e,className:t,children:r,dataPurpose:n,addContent:i,editContent:o,editForm:a}=this.props;const{isEditFormOpen:s,isAddContentOpen:c,isEditContentOpen:u}=e;return l.a.createElement("div",{ref:this.setRef,"data-purpose":n,className:(t?t+" ":"")+er()(fr()("item-editor",{"intial-focus":this.showInitialFocus}),vb)},a&&s?a:null,l.a.createElement("div",{className:er()(fr()({hidden:s}),vb)},r),l.a.createElement("div",{"data-purpose":"add-content-wrapper",className:er()(fr()("add-content",{hidden:!c}),vb)},i),l.a.createElement("div",{"data-purpose":"edit-content-wrapper",className:er()(fr()("edit-content",{hidden:c||!u}),vb)},o))}},bb.propTypes={addContent:a.a.node,className:a.a.string,curriculumItem:a.a.instanceOf(bh).isRequired,dataPurpose:a.a.string,editContent:a.a.node,editForm:a.a.node,hasInitialFocus:a.a.bool,onSetRef:a.a.func,shouldOpenEditContentInitially:a.a.bool},bb.defaultProps={addContent:null,className:"",dataPurpose:"item-editor",editContent:null,editForm:null,hasInitialFocus:false,onSetRef:Xe["a"],shouldOpenEditContentInitially:false},bb),yb=babelHelpers.applyDecoratedDescriptor(gb.prototype,"showInitialFocus",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(gb.prototype,"setScrollInitialFocus",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(gb.prototype,"setScrollInitialFocus"),gb.prototype),babelHelpers.applyDecoratedDescriptor(gb.prototype,"setRef",[f["a"]],Object.getOwnPropertyDescriptor(gb.prototype,"setRef"),gb.prototype),gb))||fb;var Eb=r("./src/udemy/js/utils/user-agent/get-is-mobile-browser.js");const Sb="js-curriculum-item-draggable";const _b="js-curriculum-item-handle";const xb=150;const Db="js-assessment-draggable";const Cb="js-assessment-handle";const Tb=150;function Ob(e){return{chosenClass:"curriculum-item-chosen",delay:Eb["b"]?200:0,dragClass:"curriculum-item-drag",fallbackClass:"curriculum-item-fallback",draggable:`.${Sb}`,filter:"button,a",preventOnFilter:false,forceFallback:true,ghostClass:"curriculum-item-ghost",group:"curriculum-section",handle:`.${_b}`,scrollSpeed:25,...e}}function kb(e){return{draggable:`.${Db}`,forceFallback:true,handle:`.${Cb}`,scrollSpeed:20,...e}}var Pb=r("./node_modules/@udemy/icons/dist/collapse.ud-icon");var Ab=r.n(Pb);var Ib=r("./node_modules/@udemy/icons/dist/delete.ud-icon");var jb=r.n(Ib);var Rb=r("./node_modules/@udemy/icons/dist/edit.ud-icon");var Nb=r.n(Rb);var Lb=r("./node_modules/@udemy/icons/dist/expand.ud-icon");var Mb=r.n(Lb);var qb=r("./node_modules/@udemy/icons/dist/menu.ud-icon");var Ub=r.n(qb);var Hb=r("./src/udemy/js/course-manage-v2/curriculum/item/item-icon-button.less");var Fb,Bb;const zb={"./item-icon-button.less":{"icon-button":"item-icon-button--icon-button--1IKG6","icon-button-always-show":"item-icon-button--icon-button-always-show--2-12f","icon-button-mobile":"item-icon-button--icon-button-mobile--24Rqg"}};const Vb={collapse:{icon:Ab.a,label:gettext("Collapse"),size:"medium"},expand:{icon:Mb.a,label:gettext("Expand"),size:"medium"},edit:{icon:Nb.a,label:gettext("Edit")},delete:{icon:jb.a,label:gettext("Delete")},move:{icon:Ub.a,label:gettext("Move"),size:"small"}};let Wb=(Fb=(Bb=class e extends s["Component"]{onClick(e){if(this.props.onClick){this.props.onClick(this.props.item||e)}}render(){const{iconType:e,iconProps:t,alwaysShow:r,item:n,...i}=this.props;const{icon:o,...a}=Vb[e];return l.a.createElement(ce["a"],Object.assign({componentClass:i.href?"a":"button",size:"xsmall",udStyle:"ghost"},i,{onClick:this.onClick,className:(fr()(i.className,"ud-link-neutral")?fr()(i.className,"ud-link-neutral")+" ":"")+er()(fr()("icon-button",{"icon-button-mobile":Eb["b"],"icon-button-always-show":r}),zb)}),l.a.createElement(o,Object.assign({},a,t)))}},Bb.propTypes={iconType:a.a.oneOf(Object.keys(Vb)).isRequired,iconProps:a.a.object,alwaysShow:a.a.bool,onClick:a.a.func,item:a.a.any},Bb.defaultProps={iconProps:{},alwaysShow:false,onClick:null,item:null},Bb),babelHelpers.applyDecoratedDescriptor(Fb.prototype,"onClick",[f["a"]],Object.getOwnPropertyDescriptor(Fb.prototype,"onClick"),Fb.prototype),Fb);const Gb=e=>{let{isOpen:t,...r}=e;return l.a.createElement(Wb,Object.assign({},r,{iconType:t?"collapse":"expand",alwaysShow:true}))};Gb.propTypes={isOpen:a.a.bool.isRequired};var Kb=r("./src/udemy/js/course-manage-v2/curriculum/item/item-bar.less");var $b,Xb,Yb,Qb,Jb;const Zb={"./item-bar.less":{ellipsis:"item-bar--ellipsis--Lbep0","ud-ellipsis-1-line":"item-bar--ud-ellipsis-1-line--HNvR7",flex:"item-bar--flex--AcNdN",row:"item-bar--row--3ZgKF","item-bar":"item-bar--item-bar--1qWKU","item-bar-deleting":"item-bar--item-bar-deleting--1dqDy","item-bar-section":"item-bar--item-bar-section--178i3",main:"item-bar--main--3LgFa",left:"item-bar--left--6blR1",right:"item-bar--right--4qb_w","left-content":"item-bar--left-content--af69I","title-desktop":"item-bar--title-desktop--305o_","title-mobile":"item-bar--title-mobile--2qLqw",icon:"item-bar--icon--1R2Ix","drag-handle":"item-bar--drag-handle--2q7kQ","button-container":"item-bar--button-container--11FBT",label:"item-bar--label--1yiC3"}};let ev=Object(i["f"])($b=(Xb=(Jb=class e extends s["Component"]{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"isOpen",Yb,this);babelHelpers.initializerDefineProperty(this,"onToggleTooltip",Qb,this);this.tittleDesktopElementRef=l.a.createRef()}render(){const{className:e,curriculumItem:t,deleteButton:r,editButton:n,collapseButton:i,publishedLabel:o,unpublishedLabel:a,children:s}=this.props;const c=t.keyClass===lh["k"].section;return l.a.createElement(Ki["a"],{trigger:l.a.createElement("div",{className:(fr()("item-icon-button-trigger",_b,e)?fr()("item-icon-button-trigger",_b,e)+" ":"")+er()(fr()("item-bar row",{"item-bar-section":c,"item-bar-deleting":t.isDeleting}),Zb)},l.a.createElement("div",{className:"item-bar--flex--AcNdN item-bar--main--3LgFa item-bar--row--3ZgKF"},l.a.createElement("div",{className:"item-bar--flex--AcNdN item-bar--left--6blR1"},l.a.createElement("div",{className:"item-bar--left-content--af69I item-bar--row--3ZgKF","data-purpose":"item-full-title"},l.a.createElement(Pg,{curriculumItem:t,className:"item-bar--icon--1R2Ix"}),l.a.createElement("span",{className:(fr()({"ud-text-bold":c})?fr()({"ud-text-bold":c})+" ":"")+"item-bar--label--1yiC3","data-purpose":"item-object-index"},t.is_published?`${o} ${t.object_index}:`:`${a}:`),l.a.createElement("span",{className:"item-bar--title-desktop--305o_ item-bar--row--3ZgKF"},l.a.createElement(Ag,{curriculumItem:t,className:"item-bar--icon--1R2Ix"}),l.a.createElement("span",{className:"item-bar--ellipsis--Lbep0",ref:this.tittleDesktopElementRef},t.title)),n,r),l.a.createElement("div",{className:"item-bar--title-mobile--2qLqw item-bar--left-content--af69I item-bar--row--3ZgKF"},l.a.createElement(Ag,{curriculumItem:t,className:"item-bar--icon--1R2Ix"}),l.a.createElement("span",{className:"item-bar--ellipsis--Lbep0"},t.title))),s),l.a.createElement("div",{className:"item-bar--right--4qb_w item-bar--row--3ZgKF"},i,l.a.createElement(Wb,{iconType:"move",componentClass:"div",className:"item-bar--drag-handle--2q7kQ"}))),placement:"bottom-end",isOpen:this.isOpen,onToggle:this.onToggleTooltip,canOnlyToggleOnHover:true,shouldCloseOtherPoppers:false,detachFromTarget:true},t.title)}},Jb.propTypes={children:a.a.node,className:a.a.string,collapseButton:a.a.node,curriculumItem:a.a.instanceOf(bh).isRequired,deleteButton:a.a.node.isRequired,editButton:a.a.node.isRequired,publishedLabel:a.a.node.isRequired,unpublishedLabel:a.a.node.isRequired},Jb.defaultProps={children:null,className:"",collapseButton:null},Jb),Yb=babelHelpers.applyDecoratedDescriptor(Xb.prototype,"isOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Qb=babelHelpers.applyDecoratedDescriptor(Xb.prototype,"onToggleTooltip",[he["e"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return e=>{if(e){const e=this.tittleDesktopElementRef.current.offsetWidth<this.tittleDesktopElementRef.current.scrollWidth;this.isOpen=e}else{this.isOpen=false}}}}),Xb))||$b;ev.ButtonContainer=e=>{let{children:t}=e;return l.a.createElement("div",{className:"item-bar--button-container--11FBT"},t)};var tv,rv;let nv=Object(i["f"])(tv=(rv=class e extends s["Component"]{render(){const{curriculumItem:e,onClickDeleteButton:t,hasInitialFocus:r}=this.props;return l.a.createElement(wb,{curriculumItem:e,"data-purpose":"assignment-editor",hasInitialFocus:r},l.a.createElement(ev,{curriculumItem:e,publishedLabel:gettext("Assignment"),unpublishedLabel:gettext("Unpublished Assignment"),deleteButton:l.a.createElement(Wb,{iconType:"delete",item:e,onClick:t,disabled:e.isSaving,"data-purpose":"assignment-delete-btn"}),editButton:l.a.createElement(Wb,{iconType:"edit",item:e,href:e.editUrl,"data-purpose":"assignment-edit-btn"})}))}},rv.propTypes={curriculumItem:a.a.instanceOf(Eh).isRequired,onClickDeleteButton:a.a.func.isRequired,hasInitialFocus:a.a.bool},rv.defaultProps={hasInitialFocus:false},rv))||tv;var iv=r("./src/udemy/js/course-manage-v2/asset-creator/form-asset-creator.less");var ov,av,sv;let lv=Object(i["f"])(ov=(av=(sv=class e extends s["Component"]{constructor(e,t){super(e,t);this.form.reset(this.props.curriculumItem.asset)}get form(){return this.props.curriculumItem.assetForms[Uh["c"].article]}onSubmit(e){e.preventDefault();this.form.save((e=>this.props.onSave(e.id)),Fd)}get submitLabel(){const e=this.form.bodyError;if(e&&e.type==="warning"){return gettext("Proceed")}return gettext("Save")}renderErrorAlert(){const e=this.form.bodyError;if(!e){return null}return l.a.createElement(b["a"],{showCta:false,udStyle:"error",className:"form-asset-creator--alert-banner--xBKkT","data-purpose":"error-alert",title:l.a.createElement("div",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"article-asset-creator:body-errors",domPurifyConfig:{ADD_ATTR:["target"]},html:e.messages.join(" ")})))})}render(){const e=this.form;return l.a.createElement("form",{className:"form-asset-creator--form--13c9P",onSubmit:this.onSubmit},this.renderErrorAlert(),l.a.createElement(ji["b"],{label:gettext("Text")},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.ARTICLE_LECTURE,value:e.data.body,onValueChange:e.setBody,autoFocus:true})),l.a.createElement("div",{className:"form-asset-creator--submit-row--2LcIb"},l.a.createElement(le["a"],{type:"submit",size:"small",disabled:e.isSaving||this.props.curriculumItem.isSaving},this.submitLabel)))}},sv.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,onSave:a.a.func.isRequired},sv),babelHelpers.applyDecoratedDescriptor(av.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(av.prototype,"onSubmit"),av.prototype),av))||ov;var cv,uv,pv;let dv=Object(i["f"])(cv=(uv=(pv=class e extends s["Component"]{constructor(e,t){super(e,t);this.form.reset(this.props.curriculumItem.asset)}get form(){return this.props.curriculumItem.assetForms[Uh["c"].iFrame]}onChange(e){this.form.setField(e.target.name,e.target.value)}onSubmit(e){e.preventDefault();this.form.save((e=>this.props.onSave(e.id)),Fd)}render(){const e=this.form;return l.a.createElement("form",{className:"form-asset-creator--form--13c9P",onSubmit:this.onSubmit},l.a.createElement(ji["b"],{label:gettext("URL"),note:e.error.source_url||null,validationState:e.error.source_url?"error":"neutral"},l.a.createElement(Ii["b"],{name:"source_url",placeholder:"https://example.com",type:"url",required:true,value:e.data.source_url,onChange:this.onChange,"data-purpose":"url-field"})),l.a.createElement("div",{className:"form-asset-creator--submit-row--2LcIb"},l.a.createElement(le["a"],{type:"submit",size:"small",disabled:e.isSaving||this.props.curriculumItem.isSaving},gettext("Embed iframe"))))}},pv.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,onSave:a.a.func.isRequired},pv),babelHelpers.applyDecoratedDescriptor(uv.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(uv.prototype,"onChange"),uv.prototype),babelHelpers.applyDecoratedDescriptor(uv.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(uv.prototype,"onSubmit"),uv.prototype),uv))||cv;var hv=r("./src/udemy/js/course-manage-v2/asset-creator/media-asset-creator.react-component.js");var mv=r("./src/udemy/js/base-components/tabs/tabs.react-component.tsx");var fv=r("./src/udemy/js/course-manage-v2/asset-library/asset-library.react-component.js");var gv=r("./src/udemy/js/course-manage-v2/asset-creator/asset-uploader.react-component.js");var yv,bv,vv;let wv=Object(i["f"])(yv=(bv=(vv=class e extends s["Component"]{constructor(e,t){super(e,t);this.form.reset()}get form(){return this.props.curriculumItem.assetForms[Uh["c"].externalLink]}onChange(e){this.form.setField(e.target.name,e.target.value)}onSubmit(e){e.preventDefault();this.form.save((e=>this.props.onSave(e.id)),Fd)}render(){const e=this.form;return l.a.createElement("form",{className:"form-asset-creator--form--13c9P",onSubmit:this.onSubmit},l.a.createElement(ji["b"],{label:gettext("Title"),note:e.error.title||null,validationState:e.error.title?"error":"neutral"},l.a.createElement(Ii["b"],{name:"title",placeholder:gettext("A descriptive title"),required:true,value:e.data.title,onChange:this.onChange,"data-purpose":"title-field"})),l.a.createElement(ji["b"],{label:gettext("URL"),note:e.error.url||null,validationState:e.error.url?"error":"neutral"},l.a.createElement(Ii["b"],{name:"url",placeholder:"https://example.com",type:"url",required:true,value:e.data.url,onChange:this.onChange,"data-purpose":"url-field"})),l.a.createElement("div",{className:"form-asset-creator--submit-row--2LcIb"},l.a.createElement(le["a"],{type:"submit",size:"small",disabled:e.isSaving||this.props.curriculumItem.isSaving},gettext("Add link"))))}},vv.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,onSave:a.a.func.isRequired},vv),babelHelpers.applyDecoratedDescriptor(bv.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(bv.prototype,"onChange"),bv.prototype),babelHelpers.applyDecoratedDescriptor(bv.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(bv.prototype,"onSubmit"),bv.prototype),bv))||yv;var Ev,Sv;let _v=Object(i["f"])(Ev=(Sv=class e extends s["Component"]{render(){const e=this.props.curriculumItem;return l.a.createElement(mv["b"],null,l.a.createElement(mv["b"].Tab,{title:gettext("Downloadable File")},l.a.createElement(gv["a"],{store:e.assetUploaderStores[Uh["c"].misc],onUpload:this.props.onAssetSelected})),l.a.createElement(mv["b"].Tab,{title:gettext("Add from library")},l.a.createElement(fv["a"],{store:e.assetLibraryStores[Uh["c"].misc],onSelect:this.props.onAssetSelected})),l.a.createElement(mv["b"].Tab,{title:gettext("External Resource")},l.a.createElement(wv,{curriculumItem:e,onSave:this.props.onAssetSelected})),l.a.createElement(mv["b"].Tab,{title:gettext("Source Code")},l.a.createElement(gv["a"],{store:e.assetUploaderStores[Uh["c"].sourceCode],onUpload:this.props.onAssetSelected})))}},Sv.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,onAssetSelected:a.a.func.isRequired},Sv))||Ev;var xv=r("./src/udemy/js/course-manage-v2/asset-creator/selected-asset-cards.less");const Dv={asset:a.a.shape({thumbnail_url:a.a.string,title:a.a.string,content_summary:a.a.string}).isRequired,onEdit:a.a.func.isRequired};const Cv=Object(i["f"])((e=>{let{asset:t,onEdit:r,onReplaceWithVideo:n}=e;const i=Uh["f"].has(t.asset_type);const o=Uh["e"].has(t.asset_type);return l.a.createElement("div",{className:"selected-asset-cards--asset-card--3tf0k","data-purpose":"selected-asset"},t.thumbnail_url?l.a.createElement("div",{className:"selected-asset-cards--thumbnail-container--jymMF",style:{backgroundImage:`url(${t.thumbnail_url})`}}):null,l.a.createElement("div",{className:"selected-asset-cards--flex--1_LSs"},l.a.createElement("div",{className:"ud-heading-md selected-asset-cards--ellipsis--2ass-"},t.title),l.a.createElement("time",{className:"selected-asset-cards--content-summary--3QJ65"},t.content_summary),l.a.createElement("div",null,l.a.createElement(le["a"],{typography:"ud-text-md",udStyle:"link","data-purpose":"edit-content-link",onClick:r},l.a.createElement("span",null,l.a.createElement(Nb.a,{label:false,color:"inherit",className:"selected-asset-cards--btn-icon--2Qolz"}),gettext("Edit Content")))),!i?l.a.createElement("div",null,l.a.createElement(le["a"],{typography:"ud-text-md",udStyle:"link","data-purpose":"replace-with-video",onClick:n},l.a.createElement("span",null,l.a.createElement(vg.a,{label:false,color:"inherit",className:"selected-asset-cards--btn-icon--2Qolz"}),o?gettext("Replace With Video"):gettext("Convert To Video")))):null))}));Cv.propTypes=Object.assign({},Dv,{onReplaceWithVideo:a.a.func.isRequired});const Tv=Object(i["f"])((e=>{let{asset:t,onEdit:r}=e;return l.a.createElement("div",{className:"selected-asset-cards--asset-card--3tf0k","data-purpose":"child-asset-card"},t.thumbnail_url?l.a.createElement("div",{className:"selected-asset-cards--thumbnail-container--jymMF",style:{backgroundImage:`url(${t.thumbnail_url})`}}):null,l.a.createElement("div",{className:"selected-asset-cards--flex--1_LSs selected-asset-cards--child-asset-details--3L-sy"},l.a.createElement("div",{className:"selected-asset-cards--flex--1_LSs"},l.a.createElement("div",{className:"ud-heading-md selected-asset-cards--ellipsis--2ass-"},t.title),l.a.createElement("time",{className:"selected-asset-cards--content-summary--3QJ65"},t.content_summary)),l.a.createElement("div",{className:"selected-asset-cards--actions--15cOx"},l.a.createElement(le["a"],{udStyle:"secondary",size:"small","data-purpose":"edit-content",onClick:r},gettext("Change")))))}));Tv.propTypes=Dv;var Ov=r("./src/udemy/js/course-manage-v2/asset-library/asset-table.react-component.js");var kv=r("./src/udemy/js/course-manage-v2/asset-creator/single-asset-table.less");var Pv,Av,Iv;let jv=Object(i["f"])(Pv=(Av=(Iv=class e extends s["Component"]{renderAction(){const{store:e,onReplace:t}=this.props;const r=[l.a.createElement(le["a"],{udStyle:"ghost",size:"xsmall","data-purpose":"replace-btn",key:`single-asset-${e.asset.id}-replace-button`,onClick:t},gettext("Replace"))];if(e.asset.status===Uh["b"].failed){const t=e.asset.openExtraInfo?Ab.a:Mb.a;const n=e.asset.openExtraInfo?gettext("Collapse"):gettext("Expand");r.push(l.a.createElement(ce["a"],{udStyle:"ghost",size:"xsmall",key:`single-asset-${e.asset.id}-show-extra`,onClick:e.toggleAssetInfo,"data-purpose":"extra-toggle"},l.a.createElement(t,{label:n})))}return r}render(){const e=this.props.store.notes;return l.a.createElement("div",{"data-purpose":"single-asset-table"},l.a.createElement(Ov["a"],{store:this.props.store,renderAction:this.renderAction}),e&&l.a.createElement("div",{className:"single-asset-table--notes--V9vfL"},e))}},Iv.propTypes={...Ov["a"].propTypes,onReplace:a.a.func},Iv.defaultProps={...Ov["a"].defaultProps,onReplace:Xe["a"]},Iv),babelHelpers.applyDecoratedDescriptor(Av.prototype,"renderAction",[f["a"]],Object.getOwnPropertyDescriptor(Av.prototype,"renderAction"),Av.prototype),Av))||Pv;var Rv=r("./src/udemy/js/asset/presentation/presentation-asset.react-component.js");var Nv=r("./src/udemy/js/course-manage-v2/asset-creator/video-mashup-asset-creator/video-mashup-asset-creator.less");class Lv extends s["Component"]{render(){return l.a.createElement("div",{className:"video-mashup-asset-creator--asset-preview-container--1z4Kn"},l.a.createElement(Rv["a"],{id:this.props.asset.id,assetData:this.props.asset}))}}Lv.propTypes={asset:a.a.shape({id:a.a.number.isRequired,slide_urls:i["b"].arrayOrObservableArray.isRequired}).isRequired};var Mv=r("./src/udemy/js/asset/constants.js");var qv=r("./src/udemy/js/asset/video/mashup/video-mashup-asset.react-component.js");class Uv extends s["Component"]{get playerConfig(){const e={playerId:Object(Ee["a"])("video-previewer"),mediaLicenseToken:this.props.asset.media_license_token,mediaSources:(this.props.asset.media_sources||[]).slice(),assetId:this.props.asset.id,duration:this.props.asset.time_estimation,captions:(this.props.asset.captions||[]).slice(),thumbnailSprite:this.props.asset.thumbnail_sprite};return e}render(){const e=this.props.asset.asset_type===Mv["c"].VIDEO_MASHUP?qv["default"]:ir["default"];const t=this.props.asset.asset_type===Mv["c"].VIDEO_MASHUP?{playerOptions:this.playerConfig,id:this.props.asset.id,assetData:this.props.asset}:{...this.playerConfig};return l.a.createElement("div",{className:"video-mashup-asset-creator--asset-preview-container--1z4Kn"},l.a.createElement(e,t))}}Uv.propTypes={asset:a.a.shape({asset_type:a.a.oneOf(Array.from(Uh["f"])).isRequired,media_license_token:a.a.object,media_sources:i["b"].arrayOrObservableArray.isRequired,length:a.a.number,time_estimation:a.a.number,id:a.a.number,captions:i["b"].arrayOrObservableArray,slides:i["b"].arrayOrObservableArray,thumbnail_sprite:a.a.object}).isRequired};var Hv,Fv,Bv;let zv=Object(i["f"])(Hv=(Fv=(Bv=class e extends s["Component"]{componentWillUnmount(){this.cancelRefresh&&this.cancelRefresh()}get assetUploaderStore(){return this.props.curriculumItem.assetUploaderStores[this.props.assetType]}onUpload(e){const t={"fields[asset]":lh["z"].join(",")};this.props.curriculumItem.readUnattachedAsset(e,t).then((e=>{this.onAssetRefresh(e);this.cancelRefresh=this.props.curriculumItem.refreshUnattachedAsset(e.id,t,this.onAssetRefresh,undefined,this.shouldContinueAssetRefresh,this.shouldStopAssetRefresh)})).catch(Fd)}onCancel(){this.props.child.cancel();this.assetUploaderStore.deleteAsset();this.props.curriculumItem.videoMashupAssetCreator.cancelPreview()}onAssetRefresh(e){this.props.child.setAsset(e);this.assetUploaderStore.updateAssetStatus(e)}shouldStopAssetRefresh(e){return!this.props.child.asset||this.props.child.asset.id!==e.id}shouldContinueAssetRefresh(){return!!this.props.child.asset&&this.props.child.asset.status===Uh["b"].processing}renderPreviewer(){const e=this.props.child.asset;switch(e.asset_type){case Uh["c"].video:return l.a.createElement(Uv,{asset:e});case Uh["c"].presentation:return l.a.createElement(Lv,{asset:e});default:throw new Error(`Previewer not available for mashup child asset type ${e.asset_type}`)}}render(){const e=this.props.child.asset;if(!e){return l.a.createElement(gv["a"],{store:this.assetUploaderStore,onUpload:this.onUpload})}if(e.status!==Uh["b"].success){return l.a.createElement(jv,{store:this.assetUploaderStore,onReplace:this.onCancel})}if(this.props.child.isConfirmed){return l.a.createElement(Tv,{asset:e,onEdit:this.onCancel})}return l.a.createElement("div",{"data-purpose":"preview-box"},this.renderPreviewer(),l.a.createElement("div",{className:"video-mashup-asset-creator--action-buttons--lP2G6"},l.a.createElement(le["a"],{size:"small","data-purpose":"confirm-preview",onClick:this.props.child.confirm},this.props.saveLabel),l.a.createElement(le["a"],{className:"ud-link-neutral",udStyle:"ghost",size:"small","data-purpose":"cancel-preview",onClick:this.onCancel},gettext("Cancel"))))}},Bv.propTypes={assetType:a.a.oneOf([Uh["c"].video,Uh["c"].presentation]).isRequired,child:a.a.instanceOf(Jh).isRequired,curriculumItem:a.a.instanceOf(am).isRequired,saveLabel:a.a.string.isRequired},Bv),babelHelpers.applyDecoratedDescriptor(Fv.prototype,"onUpload",[f["a"]],Object.getOwnPropertyDescriptor(Fv.prototype,"onUpload"),Fv.prototype),babelHelpers.applyDecoratedDescriptor(Fv.prototype,"onCancel",[f["a"]],Object.getOwnPropertyDescriptor(Fv.prototype,"onCancel"),Fv.prototype),babelHelpers.applyDecoratedDescriptor(Fv.prototype,"onAssetRefresh",[f["a"]],Object.getOwnPropertyDescriptor(Fv.prototype,"onAssetRefresh"),Fv.prototype),babelHelpers.applyDecoratedDescriptor(Fv.prototype,"shouldStopAssetRefresh",[f["a"]],Object.getOwnPropertyDescriptor(Fv.prototype,"shouldStopAssetRefresh"),Fv.prototype),babelHelpers.applyDecoratedDescriptor(Fv.prototype,"shouldContinueAssetRefresh",[f["a"]],Object.getOwnPropertyDescriptor(Fv.prototype,"shouldContinueAssetRefresh"),Fv.prototype),Fv))||Hv;var Vv=r("./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.react-component.js");var Wv,Gv,Kv;let $v=Object(i["f"])(Wv=(Gv=(Kv=class e extends s["Component"]{onEdit(e){this.props.creator.setSlideTimestamps(e.target.value)}onConfirmAndPreview(){const{parsedSlideTimestamps:e,numSlides:t}=this.props.creator;if(e.length===0){Object(Ui["a"])(gettext("Incorrect syndication data!"))}else if(e.length<t){this.props.creator.setShowPreviewConfirmation(true)}else{this.onPreviewConfirm()}}onPreviewConfirm(){this.props.creator.setShowPreviewConfirmation(false);this.props.creator.preview().catch(Fd)}onPreviewCancel(){this.props.creator.setShowPreviewConfirmation(false)}onSave(){this.props.creator.save((e=>this.props.onSave(e.id)),Fd)}render(){if(!this.props.creator.isPreviewable){return l.a.createElement("div",{"data-purpose":"synchronizer-placeholder",className:"video-mashup-asset-creator--synchronizer-placeholder--1tkzM"},l.a.createElement("span",{className:"video-mashup-asset-creator--ellipsis--3TNCW"},gettext("Please pick a video & presentation first")))}if(this.props.creator.previewAsset){return l.a.createElement("div",{"data-purpose":"preview-box"},l.a.createElement(Uv,{asset:this.props.creator.previewAsset}),l.a.createElement("div",{className:"video-mashup-asset-creator--action-buttons--lP2G6"},l.a.createElement(le["a"],{size:"small","data-purpose":"confirm-preview",disabled:this.props.creator.isSaving||this.props.isSaving,onClick:this.onSave},gettext("Save")),l.a.createElement(le["a"],{className:"ud-link-neutral",udStyle:"ghost",size:"small","data-purpose":"cancel-preview",onClick:this.props.creator.cancelPreview},gettext("Change"))))}return l.a.createElement("div",{className:"video-mashup-asset-creator--synchronizer--1t-9K","data-purpose":"synchronizer"},l.a.createElement("h4",{className:"ud-text-bold"},gettext("Please write what time each slide is supposed to appear")),l.a.createElement("p",null,gettext("You can separate columns by comma, tab or space. Time in seconds can be "+"input both as an absolute number (125) or hh:mm:ss format (2:05)")),l.a.createElement("pre",null,gettext("Slide, Time (sec)")),l.a.createElement(ji["b"],{label:gettext("Slide, Time (sec)"),labelProps:{className:"ud-sr-only"}},l.a.createElement(Vv["a"],{rows:"10","data-purpose":"synchronizer-textarea",value:this.props.creator.slideTimestamps,onChange:this.onEdit})),l.a.createElement("h4",{className:"ud-text-bold"},gettext("Sample:")),l.a.createElement("pre",null,`1, 0\n2, 65\n3, 213\n4, 274\n5, 302\n6, 420\n7, 507\n8, 545\n9, 705\n10, 848`),l.a.createElement("div",{className:"video-mashup-asset-creator--center-action-button--39jA9"},l.a.createElement(le["a"],{disabled:this.props.creator.isLoadingPreview,"data-purpose":"confirm-preview",onClick:this.onConfirmAndPreview},gettext("Continue & Preview"))),l.a.createElement(pe["a"],{onCancel:this.onPreviewCancel,onConfirm:this.onPreviewConfirm,isOpen:this.props.creator.showPreviewConfirmation},ninterpolate("Only %(current)s slide of %(total)s slides in the presentation have been used in the mashup.","Only %(current)s slides of %(total)s slides in the presentation have been used in the mashup.",this.props.creator.parsedSlideTimestamps.length,{current:this.props.creator.parsedSlideTimestamps.length,total:this.props.creator.numSlides})))}},Kv.propTypes={creator:a.a.instanceOf(Zh).isRequired,isSaving:a.a.bool.isRequired,onSave:a.a.func.isRequired},Kv),babelHelpers.applyDecoratedDescriptor(Gv.prototype,"onEdit",[f["a"]],Object.getOwnPropertyDescriptor(Gv.prototype,"onEdit"),Gv.prototype),babelHelpers.applyDecoratedDescriptor(Gv.prototype,"onConfirmAndPreview",[f["a"]],Object.getOwnPropertyDescriptor(Gv.prototype,"onConfirmAndPreview"),Gv.prototype),babelHelpers.applyDecoratedDescriptor(Gv.prototype,"onPreviewConfirm",[f["a"]],Object.getOwnPropertyDescriptor(Gv.prototype,"onPreviewConfirm"),Gv.prototype),babelHelpers.applyDecoratedDescriptor(Gv.prototype,"onPreviewCancel",[f["a"]],Object.getOwnPropertyDescriptor(Gv.prototype,"onPreviewCancel"),Gv.prototype),babelHelpers.applyDecoratedDescriptor(Gv.prototype,"onSave",[f["a"]],Object.getOwnPropertyDescriptor(Gv.prototype,"onSave"),Gv.prototype),Gv))||Wv;var Xv,Yv,Qv;const Jv={"./video-mashup-asset-creator.less":{ellipsis:"video-mashup-asset-creator--ellipsis--3TNCW","ud-ellipsis-1-line":"video-mashup-asset-creator--ud-ellipsis-1-line--1DeeH",step:"video-mashup-asset-creator--step--viFow","step-header":"video-mashup-asset-creator--step-header--4cT1E","step-title":"video-mashup-asset-creator--step-title--2fgup","step-num":"video-mashup-asset-creator--step-num--3BoSm","step-completed":"video-mashup-asset-creator--step-completed--9mcUA","step-draft":"video-mashup-asset-creator--step-draft--3M0HA",synchronizer:"video-mashup-asset-creator--synchronizer--1t-9K","synchronizer-placeholder":"video-mashup-asset-creator--synchronizer-placeholder--1tkzM","asset-preview-container":"video-mashup-asset-creator--asset-preview-container--1z4Kn","action-buttons":"video-mashup-asset-creator--action-buttons--lP2G6","center-action-button":"video-mashup-asset-creator--center-action-button--39jA9"}};const Zv=e=>{let{className:t,stepNum:r,stepLabel:n,children:i}=e;return l.a.createElement("div",{className:(t?t+" ":"")+"video-mashup-asset-creator--step--viFow"},l.a.createElement("div",{className:"video-mashup-asset-creator--step-header--4cT1E"},l.a.createElement("div",{className:"video-mashup-asset-creator--step-num--3BoSm"},r),l.a.createElement("div",{className:"ud-text-lg video-mashup-asset-creator--step-title--2fgup"},n)),l.a.createElement("div",{"data-purpose":`mashup-step-${r}`},i))};let ew=Object(i["f"])(Xv=(Yv=(Qv=class e extends s["Component"]{constructor(e,t){super(e,t);this.creator.reset()}componentDidMount(){window.addEventListener("beforeunload",this.onBeforeUnload)}componentWillUnmount(){window.removeEventListener("beforeunload",this.onBeforeUnload)}onBeforeUnload(e){if(this.creator.isProcessing){const t=gettext("You are creating a video mashup. You're going to lose your data.");e.returnValue=t;return t}}get creator(){return this.props.curriculumItem.videoMashupAssetCreator}getStepClassName(e){return fr()({"step-draft":!!e.asset&&!e.isConfirmed,"step-completed":!!e.asset&&e.isConfirmed})}render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(Zv,{stepNum:1,stepLabel:gettext("Pick a Video"),className:er()(this.getStepClassName(this.creator.videoChild),Jv)},l.a.createElement(zv,{assetType:Uh["c"].video,child:this.creator.videoChild,curriculumItem:this.props.curriculumItem,saveLabel:gettext("Use this video")})),l.a.createElement(Zv,{stepNum:2,stepLabel:gettext("Pick a Presentation"),className:er()(this.getStepClassName(this.creator.presentationChild),Jv)},l.a.createElement(zv,{assetType:Uh["c"].presentation,child:this.creator.presentationChild,curriculumItem:this.props.curriculumItem,saveLabel:gettext("Use this presentation")})),l.a.createElement(Zv,{stepNum:3,stepLabel:gettext("Synchronize Video & Presentation")},l.a.createElement($v,{creator:this.creator,isSaving:this.props.curriculumItem.isSaving,onSave:this.props.onAssetSelected})))}},Qv.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,onAssetSelected:a.a.func.isRequired},Qv),babelHelpers.applyDecoratedDescriptor(Yv.prototype,"onBeforeUnload",[f["a"]],Object.getOwnPropertyDescriptor(Yv.prototype,"onBeforeUnload"),Yv.prototype),Yv))||Xv;var tw=r("./src/udemy/js/course-manage-v2/curriculum/item/content-tab.less");class rw extends s["Component"]{render(){return l.a.createElement("div",{className:"content-tab--tab-container--1KRkM","data-purpose":this.props.purpose},l.a.createElement("div",{className:"ud-heading-sm content-tab--tab--1KHTI"},l.a.createElement("div",{className:"content-tab--title--1WltY"},this.props.title,l.a.createElement(ce["a"],{udStyle:"ghost",size:"xsmall","data-purpose":"content-tab-close",onClick:this.props.onClose,className:"ud-link-neutral content-tab--close--3QxOF"},l.a.createElement(An.a,{label:gettext("Close"),size:"small"})))),l.a.createElement("div",{className:"content-tab--tab-content--3l4Vv"},this.props.children))}}rw.propTypes={title:a.a.node.isRequired,onClose:a.a.func.isRequired,children:a.a.node,purpose:a.a.string};rw.defaultProps={children:null,purpose:""};var nw=r("./src/udemy/js/course-manage-v2/curriculum/item/content-type-selector.less");const iw={"./content-type-selector.less":{list:"content-type-selector--list--jesAx",box:"content-type-selector--box--pBX2a",icon:"content-type-selector--icon--1rX_x","icon-after":"content-type-selector--icon-after--1XF38",label:"content-type-selector--label--3y8d3",asset:"content-type-selector--asset--P8aIn",assessment:"content-type-selector--assessment--20S44","assessment-creation":"content-type-selector--assessment-creation--ie7c_","icon-before":"content-type-selector--icon-before--3zk7s"}};const ow=Object.freeze({assetType:"asset",assessmentType:"assessment",assessmentCreationType:"assessment-creation"});class aw extends s["Component"]{renderIcon(e,t){return l.a.createElement("div",{className:er()(t,iw)},l.a.createElement(e,{label:false,color:"inherit",size:"large"}))}render(){return l.a.createElement("ul",{className:"ud-unstyled-list content-type-selector--list--jesAx"},this.props.options.map((e=>l.a.createElement("li",{key:e.type},l.a.createElement(le["a"],{"data-purpose":`select-${e.type.toLowerCase()}`,onClick:()=>this.props.onSelect(e.type),udStyle:"link",className:er()(this.props.optionStyle,iw)},l.a.createElement("span",{className:"content-type-selector--box--pBX2a"},e.icon&&this.renderIcon(e.icon,"icon icon-before"),e.icon&&this.renderIcon(e.icon,"icon icon-after"),l.a.createElement("span",{className:"ud-text-xs content-type-selector--label--3y8d3"},e.label)))))))}}aw.propTypes={options:a.a.arrayOf(a.a.shape({label:a.a.string.isRequired,icon:a.a.elementType,type:a.a.string.isRequired})).isRequired,optionStyle:a.a.oneOf(Object.values(ow)).isRequired,onSelect:a.a.func.isRequired};var sw=r("./src/udemy/js/course-manage-v2/curriculum/item/lecture/lecture-editor.less");var lw,cw,uw,pw;const dw=Object(Rp["a"])();const hw=dw.brand.has_organization?g["a"].to("support","115005527628"):g["a"].to("support","229606188");let mw=(lw=Object(i["e"])("store"),lw(cw=Object(i["f"])(cw=(uw=(pw=class e extends s["Component"]{componentWillUnmount(){this.cancelMainRefresh&&this.cancelMainRefresh();this.cancelSupplementaryRefresh&&this.cancelSupplementaryRefresh()}get availableContentTypes(){const{video:e,videoMashup:t,article:r,presentation:n}=Uh["c"];const i=[{label:Uh["a"][e],type:e,icon:vg.a},{label:Uh["a"][t],type:t,icon:Tg.a},{label:Uh["a"][r],type:r,icon:sg.a}];if(this.props.curriculumItem.course.isOrganizationOnly){return i.concat({label:Uh["a"][n],type:n,icon:Eg.a})}return i}get tabTitle(){const e=this.props.curriculumItem.selectedContentType;if(!e){return gettext("Select content type")}if(e===Uh["c"].file){return gettext("Add Resources")}return interpolate(gettext("Add %(type)s"),{type:Uh["a"][e]},true)}onToggleIsPublished(){this.props.curriculumItem.partialUpdate({is_published:!this.props.curriculumItem.is_published}).then((()=>{this.props.store.pageStore.getContentLengthVideo()})).catch((e=>{if(e.non_field_errors&&e.non_field_errors[0]){e.detail=e.non_field_errors[0]}Fd(e)}))}onSaveMainAsset(e){const{curriculumItem:t,store:r}=this.props;t.attachMainAsset(e).then((()=>{this.cancelMainRefresh=this.props.curriculumItem.refreshMainAsset();this.props.curriculumItem.openEditContent()})).then((()=>{r.pageStore.getContentLengthVideo().then((e=>{if(!r.course.organization_id&&t.is_published&&!r.pageStore.course.isPaid&&e>bs["a"]){this.onToggleIsPublished();return e}}))})).catch(Fd)}onSaveSupplementaryAsset(e){this.props.curriculumItem.attachSupplementaryAsset(e).then((()=>{this.cancelSupplementaryRefresh=this.props.curriculumItem.refreshSupplementaryAssets();this.props.curriculumItem.openEditContent()})).catch(Fd)}renderContent(){const{curriculumItem:e}=this.props;const{assetLibraryStores:t,assetUploaderStores:r,selectedContentType:n}=e;switch(n){case Uh["c"].audio:case Uh["c"].ebook:case Uh["c"].presentation:case Uh["c"].video:return l.a.createElement("div",{className:"lecture-editor--tabs-container--3vU8k"},l.a.createElement(hv["a"],{type:n,onAssetSelected:this.onSaveMainAsset,libraryStore:t[n],uploaderStore:r[n]}));case Uh["c"].videoMashup:return l.a.createElement(ew,{curriculumItem:e,onAssetSelected:this.onSaveMainAsset});case Uh["c"].article:return l.a.createElement(lv,{curriculumItem:e,onSave:this.onSaveMainAsset});case Uh["c"].iFrame:return l.a.createElement(dv,{curriculumItem:e,onSave:this.onSaveMainAsset});case Uh["c"].externalLink:case Uh["c"].file:return l.a.createElement("div",{className:"lecture-editor--tabs-container--3vU8k"},l.a.createElement(_v,{curriculumItem:e,onAssetSelected:this.onSaveSupplementaryAsset}));case null:return l.a.createElement("div",null,l.a.createElement("p",{className:"ud-text-sm lecture-editor--select-content-type--1BK9j"},gettext("Select the main type of content.")," ",gettext("Files and links can be added as resources.")," ",l.a.createElement("a",{className:"ud-link-underline",href:hw,target:"_blank",rel:"noreferrer noopener"},gettext("Learn about content types."))),l.a.createElement(aw,{onSelect:e.setSelectedContentType,optionStyle:ow.assetType,options:this.availableContentTypes}));default:throw new Error(`Unknown content type: ${e.selectedContentType}`)}}render(){return l.a.createElement(rw,{purpose:"add-content",title:this.tabTitle,onClose:this.props.curriculumItem.closeAddContent},this.renderContent())}},pw.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,store:a.a.instanceOf(Ff).isRequired},pw),babelHelpers.applyDecoratedDescriptor(uw.prototype,"onToggleIsPublished",[f["a"]],Object.getOwnPropertyDescriptor(uw.prototype,"onToggleIsPublished"),uw.prototype),babelHelpers.applyDecoratedDescriptor(uw.prototype,"onSaveMainAsset",[f["a"]],Object.getOwnPropertyDescriptor(uw.prototype,"onSaveMainAsset"),uw.prototype),babelHelpers.applyDecoratedDescriptor(uw.prototype,"onSaveSupplementaryAsset",[f["a"]],Object.getOwnPropertyDescriptor(uw.prototype,"onSaveSupplementaryAsset"),uw.prototype),uw))||cw)||cw);var fw=r("./node_modules/@udemy/react-date-time-components/dist/esm/duration/duration.react-component.js");var gw,yw,bw;let vw=Object(i["f"])(gw=(yw=(bw=class e extends s["Component"]{onSubmit(e){e.preventDefault();this.props.curriculumItem.partialUpdate({description:this.props.curriculumItem.description}).then(this.props.curriculumItem.closeDescriptionForm).catch(Fd)}render(){const e=this.props.curriculumItem;return l.a.createElement("form",{"data-purpose":"description-form",onSubmit:this.onSubmit},l.a.createElement(ji["b"],{label:gettext("Lecture Description")},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.LECTURE_DESCRIPTION,autoFocus:true,placeholder:gettext("Add a description. Include what students will be able to do after completing the lecture."),value:e.description,onValueChange:e.setDescription})),l.a.createElement("div",{className:"item-form--submit-row--20Iiu"},l.a.createElement(le["a"],{size:"small",className:"ud-link-neutral",udStyle:"ghost",onClick:e.closeDescriptionForm},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",size:"small",disabled:e.isSaving},gettext("Save"))))}},bw.propTypes={curriculumItem:a.a.instanceOf(am).isRequired},bw),babelHelpers.applyDecoratedDescriptor(yw.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(yw.prototype,"onSubmit"),yw.prototype),yw))||gw;var ww,Ew;const Sw=Object(i["f"])((e=>{let{curriculumItem:t}=e;const r=gettext("As Student");if(t.is_published){return l.a.createElement(de["a"].MenuItem,{"data-purpose":"preview-as-student",href:t.previewAsStudentUrl,target:"_blank",rel:"noopener noreferrer"},r)}return l.a.createElement(be["a"],{placement:"left",canToggleOnHover:true,a11yRole:"description",detachFromTarget:true,shouldCloseOtherPoppers:false,trigger:l.a.createElement(de["a"].MenuItem,{"data-purpose":"preview-as-student","aria-disabled":true,onClick:()=>false},r)},gettext("Only instructors can see unpublished lectures."))}));const _w=Object(i["f"])((e=>{let{curriculumItem:t,onToggle:r,canToggle:n,disablePublishButton:i}=e;if(!n){return null}const o={udStyle:"secondary",size:"small","data-purpose":"is-published-toggle",disabled:t.isSaving||i,onClick:r};if(t.is_published){return l.a.createElement(le["a"],o,gettext("Unpublish"))}return l.a.createElement(le["a"],Object.assign({},o,{udStyle:"brand"}),gettext("Publish"))}));const xw=Object(i["f"])((e=>{let{curriculumItem:t,onToggle:r,canToggle:n}=e;if(!t.course.is_paid||!t.is_published){return null}return l.a.createElement(ko["a"],{"data-purpose":"is-free-toggle",checked:t.is_free,onChange:r,disabled:t.isSaving||!n,size:"large"},gettext("Free Preview:"))}));const Dw=Object(i["f"])((e=>{let{curriculumItem:t,onToggle:r}=e;if(!t.asset||!t.is_published){return null}switch(t.asset.asset_type){case Uh["c"].article:case Uh["c"].importContent:return null;case Uh["c"].ebook:return l.a.createElement("div",null,gettext("Ebooks are always downloadable"));default:return l.a.createElement(ko["a"],{"data-purpose":"is-downloadable-toggle",checked:t.is_downloadable,onChange:r,disabled:t.isSaving,size:"large"},gettext("Downloadable:"))}}));let Cw=Object(i["f"])(ww=(Ew=class e extends s["Component"]{render(){const{curriculumItem:e,canTogglePublishedState:t,onToggleIsPublished:r,canToggleIsFree:n,disablePublishButton:i,onToggleIsFree:o,onToggleIsDownloadable:a}=this.props;return l.a.createElement("div",{className:"lecture-editor--lecture-settings--7Lmmh","data-purpose":"lecture-settings"},l.a.createElement("div",{className:"lecture-editor--lecture-settings-btns--minew"},l.a.createElement(de["a"],{placement:"bottom-start",trigger:l.a.createElement(de["a"].Button,{udStyle:"primary",size:"small"},gettext("Preview"))},l.a.createElement(de["a"].Menu,null,l.a.createElement(de["a"].MenuItem,{componentClass:"div","data-purpose":"preview-as-instructor",href:e.previewAsInstructorUrl,target:"_blank",rel:"noopener noreferrer"},gettext("As Instructor")),l.a.createElement(Sw,{curriculumItem:e}))),l.a.createElement(_w,{curriculumItem:e,canToggle:t,onToggle:r,disablePublishButton:i})),l.a.createElement(xw,{curriculumItem:e,canToggle:n,onToggle:o}),l.a.createElement(Dw,{curriculumItem:e,onToggle:a}))}},Ew.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,canToggleIsFree:a.a.bool.isRequired,canTogglePublishedState:a.a.bool.isRequired,onToggleIsDownloadable:a.a.func.isRequired,onToggleIsFree:a.a.func.isRequired,onToggleIsPublished:a.a.func.isRequired,disablePublishButton:a.a.bool},Ew.defaultProps={disablePublishButton:false},Ew))||ww;var Tw=r("./node_modules/@researchgate/react-intersection-observer/lib/es/index.js");const Ow=gettext("Unknown error.");const kw="labs/linkable/";var Pw,Aw,Iw,jw,Rw;let Nw=(Pw=class e{constructor(e,t,r){babelHelpers.initializerDefineProperty(this,"activeLab",Aw,this);babelHelpers.initializerDefineProperty(this,"labLink",Iw,this);babelHelpers.initializerDefineProperty(this,"isLoading",jw,this);babelHelpers.initializerDefineProperty(this,"error",Rw,this);this.curriculumItemType=e;this.curriculumItemId=t;this.courseId=r}async loadActiveLab(){this._clearError();this._setIsLoading(true);try{var e,t;const r=await Qe["f"].get(kw,{params:{curriculum_item_type:this.curriculumItemType,curriculum_item_id:this.curriculumItemId,"fields[lab]":"id,title",active:true,course_id:this.courseId}});this._setActiveLab((e=r.data)===null||e===void 0?void 0:(t=e.results)===null||t===void 0?void 0:t[0])}catch(e){this._setError(e)}finally{this._setIsLoading(false)}}async loadLabLink(){this._clearError();this._setIsLoading(true);try{const e={curriculum_item_type:this.curriculumItemType,curriculum_item_id:this.curriculumItemId};const t=await Qe["f"].get(`labs/${this.activeLab.id}/links/`,{params:e});this._setLabLink(t.data.results[0])}catch(e){this._setError(e)}finally{this._setIsLoading(false)}}async loadLabInfo(){await this.loadActiveLab();await this.loadLabLink()}get isLinked(){return!!this.labLink}async linkToLab(e){this._clearError();this._setIsLoading(true);try{const t=await Qe["f"].post(`labs/${this.activeLab.id}/links/`,{title:e,curriculum_item_type:this.curriculumItemType,curriculum_item_id:this.curriculumItemId,course_id:this.courseId});this._setLabLink(t.data)}catch(e){this._setError(e)}finally{this._setIsLoading(false)}}async unlinkLab(){this._clearError();this._setIsLoading(true);try{await Qe["f"].delete(`labs/${this.activeLab.id}/links/${this.labLink.id}`);this._setLabLink(null)}catch(e){this._setError(e)}finally{this._setIsLoading(false)}}get errorMsg(){var e,t,r;return((e=this.error)===null||e===void 0?void 0:e.detail)||((t=this.error)===null||t===void 0?void 0:(r=t.response)===null||r===void 0?void 0:r.data)||Ow}_setIsLoading(e){this.isLoading=e}_setActiveLab(e){this.activeLab=e}_setLabLink(e){this.labLink=e}_setError(e){this.error=e}_clearError(){this.error=null}},Aw=babelHelpers.applyDecoratedDescriptor(Pw.prototype,"activeLab",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Iw=babelHelpers.applyDecoratedDescriptor(Pw.prototype,"labLink",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),jw=babelHelpers.applyDecoratedDescriptor(Pw.prototype,"isLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Rw=babelHelpers.applyDecoratedDescriptor(Pw.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"isLinked",[he["g"]],Object.getOwnPropertyDescriptor(Pw.prototype,"isLinked"),Pw.prototype),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"errorMsg",[he["g"]],Object.getOwnPropertyDescriptor(Pw.prototype,"errorMsg"),Pw.prototype),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"_setIsLoading",[he["e"]],Object.getOwnPropertyDescriptor(Pw.prototype,"_setIsLoading"),Pw.prototype),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"_setActiveLab",[he["e"]],Object.getOwnPropertyDescriptor(Pw.prototype,"_setActiveLab"),Pw.prototype),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"_setLabLink",[he["e"]],Object.getOwnPropertyDescriptor(Pw.prototype,"_setLabLink"),Pw.prototype),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"_setError",[he["e"]],Object.getOwnPropertyDescriptor(Pw.prototype,"_setError"),Pw.prototype),babelHelpers.applyDecoratedDescriptor(Pw.prototype,"_clearError",[he["e"]],Object.getOwnPropertyDescriptor(Pw.prototype,"_clearError"),Pw.prototype),Pw);var Lw=r("./src/udemy/js/course-manage-v2/curriculum/item/lecture/link-to-lab.less");var Mw,qw,Uw,Hw;let Fw=Object(i["f"])(Mw=(qw=(Hw=class e extends s["Component"]{constructor(){super(...arguments);this.loadCalled=false;babelHelpers.initializerDefineProperty(this,"linkToLabStore",Uw,this);this.loadDataIfInView=e=>{let{isIntersecting:t}=e;if(t&&!this.loadCalled){this.linkToLabStore.loadLabInfo();this.loadCalled=true}}}onToggle(e){const{curriculumItem:t}=this.props;if(e.target.checked){this.linkToLabStore.linkToLab(t.title)}else{this.linkToLabStore.unlinkLab(t.title)}}render(){return l.a.createElement(Tw["a"],{onChange:this.loadDataIfInView},l.a.createElement("div",{className:"link-to-lab--link-to-lab--1tzUA","data-purpose":"link-to-lab"},this.linkToLabStore.error?l.a.createElement(b["a"],{showCta:false,udStyle:"error",className:"link-to-lab--error--dlbLZ",title:gettext("Error fetching Workspace information")}):null,l.a.createElement(Mr["a"],{onChange:this.onToggle,disabled:this.linkToLabStore.isLoading,checked:this.linkToLabStore.isLinked},l.a.createElement("span",{className:"link-to-lab--title--3Z7Ki"},l.a.createElement("strong",null,gettext("Lecture content is compatible with Workspaces")),l.a.createElement(be["a"],{a11yRole:"description",canToggleOnHover:true,placement:"bottom",className:"link-to-lab--info-tooltip--QUfyg",trigger:l.a.createElement(ic.a,{label:gettext("Get info")})},gettext("This lecture will be highlighted for Udemy Business Pro learners to signal an active learning moment that is compatible with Udemy Workspaces in your course."))))))}},Hw.propTypes={curriculumItem:a.a.instanceOf(am).isRequired},Hw),Uw=babelHelpers.applyDecoratedDescriptor(qw.prototype,"linkToLabStore",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return new Nw(this.props.curriculumItem._class,this.props.curriculumItem.id,this.props.curriculumItem.course.id)}}),babelHelpers.applyDecoratedDescriptor(qw.prototype,"onToggle",[f["a"]],Object.getOwnPropertyDescriptor(qw.prototype,"onToggle"),qw.prototype),qw))||Mw;var Bw=r("./src/udemy/js/course-manage-v2/curriculum/item/lecture/supplementary-asset.less");var zw,Vw,Ww;let Gw=Object(i["f"])(zw=(Vw=(Ww=class e extends s["Component"]{onConfirmAndDelete(){this.props.curriculumItem.openDeleteSupplementaryAssetConfirmation(this.props.asset.id)}render(){const{curriculumItem:e,asset:t,icon:r,hideContentSummary:n}=this.props;return l.a.createElement("div",{className:"ud-text-sm supplementary-asset--supplementary-asset--3IH13"},r,l.a.createElement("div",{className:"supplementary-asset--flex--2ujDz"},l.a.createElement("div",{className:"supplementary-asset--ellipsis--3RKkW"},t.title,t.status!==Uh["b"].processing&&!n&&` (${t.content_summary})`,t.status===Uh["b"].processing&&` (${gettext("Processing")})`,t.status===Uh["b"].failed&&` (${gettext("Broken")})`)),l.a.createElement(Wb,{iconType:"delete",alwaysShow:true,"data-purpose":"delete-supplementary-asset-btn",disabled:e.isSaving,onClick:this.onConfirmAndDelete}))}},Ww.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,asset:a.a.object.isRequired,icon:a.a.node.isRequired,hideContentSummary:a.a.bool},Ww.defaultProps={hideContentSummary:false},Ww),babelHelpers.applyDecoratedDescriptor(Vw.prototype,"onConfirmAndDelete",[f["a"]],Object.getOwnPropertyDescriptor(Vw.prototype,"onConfirmAndDelete"),Vw.prototype),Vw))||zw;var Kw,$w,Xw;const Yw=Object(i["f"])((e=>{let{curriculumItem:t,assets:r,title:n,icon:i,purpose:o,hideContentSummary:a}=e;if(r.length===0){return null}return l.a.createElement("div",{className:"lecture-editor--edit-content-row--2w0QH lecture-editor--supplementary-asset-row--3vH0i","data-purpose":o},l.a.createElement("h4",{className:"ud-heading-sm"},n),r.map((e=>l.a.createElement(Gw,{key:e.id,curriculumItem:t,asset:e,icon:i,hideContentSummary:a}))))}));let Qw=Object(i["f"])(Kw=($w=(Xw=class e extends s["Component"]{onDeleteSupplementaryAssetConfirm(){this.props.curriculumItem.deleteSupplementaryAsset().catch(Fd)}render(){if(this.props.curriculumItem.supplementary_assets.length===0){return null}const e=this.props.curriculumItem.classifiedSupplementaryAssets;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Yw,{curriculumItem:this.props.curriculumItem,assets:e.interactive,purpose:"source-code-section",title:gettext("Source Code"),icon:l.a.createElement(hg.a,{label:false,size:"xsmall"})}),l.a.createElement(Yw,{curriculumItem:this.props.curriculumItem,assets:e.downloadable,purpose:"downloadable-files-section",title:gettext("Downloadable materials"),icon:l.a.createElement(hg.a,{label:false,size:"xsmall"})}),l.a.createElement(Yw,{curriculumItem:this.props.curriculumItem,assets:e.external,purpose:"external-links-section",hideContentSummary:true,title:gettext("External Resources"),icon:l.a.createElement(yg.a,{label:false,size:"xsmall"})}),l.a.createElement(pe["a"],{onCancel:this.props.curriculumItem.closeDeleteSupplementaryAssetConfirmation,onConfirm:this.onDeleteSupplementaryAssetConfirm,isOpen:this.props.curriculumItem.toBeDeletedSupplementaryAssetId!==null},gettext("You are about to remove a resource. Are you sure you want to continue?")))}},Xw.propTypes={curriculumItem:a.a.instanceOf(am).isRequired},Xw),babelHelpers.applyDecoratedDescriptor($w.prototype,"onDeleteSupplementaryAssetConfirm",[f["a"]],Object.getOwnPropertyDescriptor($w.prototype,"onDeleteSupplementaryAssetConfirm"),$w.prototype),$w))||Kw;var Jw,Zw,eE,tE;const rE=e=>{let{courseVideoLength:t,onClickDeleteButton:r}=e;return l.a.createElement(b["b"],{udStyle:"error",className:"lecture-editor--alert--2pXuV","data-purpose":"free-course-content-length-alert",title:ninterpolate("Free courses must have less than %s hour of video content","Free courses must have less than %s hours of video content",bs["b"]),body:l.a.createElement(m["b"],{html:gettext('Adding this video will put the course at <strong><span class="duration">%(duration)s</span></strong> of video content. '+"This exceeds the maximum video duration allowed under our free course policy."),interpolate:{duration:l.a.createElement(fw["a"],{numSeconds:t,precision:fw["a"].PRECISION.MINUTES})}}),ctaText:gettext("Select new price"),actionButtonProps:{componentClass:y["a"],to:"/pricing"},dismissButtonText:gettext("Delete lecture"),onDismiss:r})};rE.propTypes={courseVideoLength:a.a.number.isRequired,onClickDeleteButton:a.a.func.isRequired};const nE=Object(i["f"])((e=>{let{curriculumItem:t,onEdit:r,onReplaceWithVideo:n}=e;if(!t.asset){return null}const i=t.assetUploaderStores[t.asset.asset_type];if(i&&t.asset.status!==Uh["b"].success){return l.a.createElement("div",{className:"lecture-editor--table-container--1OMb2"},l.a.createElement(jv,{store:i,onReplace:r}))}return l.a.createElement(Cv,{asset:t.asset,onEdit:r,onReplaceWithVideo:n})}));let iE=(Jw=Object(i["e"])("store"),Jw(Zw=Object(i["f"])(Zw=(eE=(tE=class e extends s["Component"]{constructor(e,t){super(e,t);this.openDescriptionFormA11y=Object(Ee["d"])(this.props.curriculumItem.openDescriptionForm);this.validAssetTypes=[Mv["c"].VIDEO,Mv["c"].VIDEO_MASHUP]}onEditMainAsset(){const e=this.props.curriculumItem;let t=e.asset.asset_type;if(e.asset.asset_type===Uh["c"].importContent){t=null}e.setSelectedContentType(t);e.openAddContent()}onReplaceWithVideoConfirm(){const{curriculumItem:e}=this.props;e.replaceWithVideo().catch(Fd)}onAddSupplementaryAsset(){this.props.curriculumItem.setSelectedContentType(Uh["c"].file);this.props.curriculumItem.openAddContent()}onToggleIsFree(){this.props.curriculumItem.partialUpdate({is_free:!this.props.curriculumItem.is_free}).catch(Fd)}onToggleIsDownloadable(){this.props.curriculumItem.partialUpdate({is_downloadable:!this.props.curriculumItem.is_downloadable}).catch(Fd)}onToggleIsPublished(){this.props.curriculumItem.partialUpdate({is_published:!this.props.curriculumItem.is_published}).then((()=>{this.props.store.pageStore.getContentLengthVideo()})).catch((e=>{if(e.non_field_errors&&e.non_field_errors[0]){e.detail=e.non_field_errors[0]}Fd(e)}))}get totalCourseVideoLengthEstimation(){const{curriculumItem:e,store:t}=this.props;const r=e.asset&&this.validAssetTypes.includes(e.asset.asset_type)?e.asset.time_estimation:0;return t.pageStore.course.contentLengthVideo+r}get isFreeContentExceedTimeLimit(){const{curriculumItem:e,store:t}=this.props;return!t.course.organization_id&&!e.is_published&&!t.pageStore.course.isPaid&&e.asset&&e.asset.status===Mv["b"].SUCCESS&&this.validAssetTypes.includes(e.asset.asset_type)&&this.totalCourseVideoLengthEstimation>bs["a"]}render(){const{curriculumItem:e,canToggleIsFree:t,canTogglePublishedState:r,className:n,seenCaptionManage:i,onClickDeleteButton:o,store:a}=this.props;const s=!!e.asset;const c=!e.description&&!e.isDescriptionFormOpen;const u=e.is_published||e.asset;return l.a.createElement("div",{className:n,"data-purpose":"edit-content"},s||e.hasCompletedAssetContent?l.a.createElement("div",{className:"lecture-editor--edit-content-header--11ZDs lecture-editor--edit-content-row--2w0QH"},l.a.createElement("div",{className:"lecture-editor--edit-content-header-left--xCpw5"},s?l.a.createElement("div",{"data-purpose":"asset-info"},l.a.createElement(nE,{curriculumItem:e,onEdit:this.onEditMainAsset,onReplaceWithVideo:e.openReplaceWithVideoConfirmation})):null),e.hasCompletedAssetContent?l.a.createElement(Cw,{curriculumItem:e,canToggleIsFree:t,canTogglePublishedState:r,onToggleIsDownloadable:this.onToggleIsDownloadable,onToggleIsFree:this.onToggleIsFree,onToggleIsPublished:this.onToggleIsPublished,disablePublishButton:this.isFreeContentExceedTimeLimit}):null):null,e.isDescriptionFormOpen?l.a.createElement("div",{className:"lecture-editor--edit-content-row--2w0QH"},l.a.createElement(vw,{curriculumItem:e})):null,e.description&&!e.isDescriptionFormOpen?l.a.createElement("div",{className:"lecture-editor--edit-content-row--2w0QH"},l.a.createElement("div",Object.assign({className:"lecture-editor--description-box--2RUMn",onClick:e.openDescriptionForm,onKeyDown:this.openDescriptionFormA11y,role:"button",tabIndex:"0"},Object(fe["a"])({descriptionOfCaller:"edit-content:curriculum-item-description",html:e.description,dataPurpose:"desc-box"})))):null,l.a.createElement(Qw,{curriculumItem:e}),a.showLinkToLab&&l.a.createElement("div",{className:"lecture-editor--edit-content-row--2w0QH"},l.a.createElement(Fw,{curriculumItem:e})),c||u?l.a.createElement("div",{className:"lecture-editor--edit-content-row--2w0QH"},c?l.a.createElement("div",{className:"lecture-editor--edit-content-button-row--33Lxr"},l.a.createElement(le["a"],{size:"small",udStyle:"secondary","data-purpose":"add-desc-btn",onClick:e.openDescriptionForm,"aria-label":gettext("Add Description")},l.a.createElement(Gd.a,{label:false,size:"small"}),gettext("Description"))):null,u?l.a.createElement("div",{className:"lecture-editor--edit-content-button-row--33Lxr"},l.a.createElement(le["a"],{size:"small",udStyle:"secondary","data-purpose":"add-resources-btn",onClick:this.onAddSupplementaryAsset,"aria-label":gettext("Add Resources")},l.a.createElement(Gd.a,{label:false,size:"small"}),gettext("Resources"))):null):null,this.isFreeContentExceedTimeLimit&&l.a.createElement(rE,{courseVideoLength:this.totalCourseVideoLengthEstimation,onClickDeleteButton:o}),e.course.wasPublished&&!i?l.a.createElement(b["a"],{showCta:false,className:"lecture-editor--alert--2pXuV",title:gettext("Captions are now managed via the Captions page."),body:l.a.createElement(m["b"],{className:"ud-text-with-links",html:gettext('You can find a link in the menu on the left or <a class="captionLink">from here</a>.'),interpolate:{captionLink:l.a.createElement(y["a"],{to:"/captions"})}})}):null,l.a.createElement(pe["a"],{title:gettext("Update this lecture to video"),onClose:e.closeReplaceWithVideoConfirmation,isOpen:e.showReplaceWithVideoConfirmation,onCancel:e.closeReplaceWithVideoConfirmation,onConfirm:this.onReplaceWithVideoConfirm,confirmText:e.hasTextBasedAssetContent?gettext("Replace with video"):gettext("Convert to video")},e.hasTextBasedAssetContent?gettext("The content of this lecture will be deleted, but the description and any downloadable resources will remain. "+"You will be prompted to add a video file and re-publish as a video lecture."):gettext("The content of this lecture will be added as a downloadable resource, which you may choose to remove. "+"You will be prompted to add a video file and re-publish as a video lecture.")))}},tE.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,canToggleIsFree:a.a.bool.isRequired,canTogglePublishedState:a.a.bool.isRequired,className:a.a.string,onClickDeleteButton:a.a.func.isRequired,seenCaptionManage:a.a.bool.isRequired,store:a.a.instanceOf(Ff).isRequired},tE.defaultProps={className:undefined},tE),babelHelpers.applyDecoratedDescriptor(eE.prototype,"onEditMainAsset",[f["a"]],Object.getOwnPropertyDescriptor(eE.prototype,"onEditMainAsset"),eE.prototype),babelHelpers.applyDecoratedDescriptor(eE.prototype,"onReplaceWithVideoConfirm",[f["a"]],Object.getOwnPropertyDescriptor(eE.prototype,"onReplaceWithVideoConfirm"),eE.prototype),babelHelpers.applyDecoratedDescriptor(eE.prototype,"onAddSupplementaryAsset",[f["a"]],Object.getOwnPropertyDescriptor(eE.prototype,"onAddSupplementaryAsset"),eE.prototype),babelHelpers.applyDecoratedDescriptor(eE.prototype,"onToggleIsFree",[f["a"]],Object.getOwnPropertyDescriptor(eE.prototype,"onToggleIsFree"),eE.prototype),babelHelpers.applyDecoratedDescriptor(eE.prototype,"onToggleIsDownloadable",[f["a"]],Object.getOwnPropertyDescriptor(eE.prototype,"onToggleIsDownloadable"),eE.prototype),babelHelpers.applyDecoratedDescriptor(eE.prototype,"onToggleIsPublished",[f["a"]],Object.getOwnPropertyDescriptor(eE.prototype,"onToggleIsPublished"),eE.prototype),eE))||Zw)||Zw);var oE,aE;let sE=Object(i["f"])(oE=(aE=class e extends s["Component"]{componentDidMount(){const{curriculumItem:e,isFirstPublishedVideoLecture:t}=this.props;const r=e.asset;if(r&&e.assetUploaderStores[r.asset_type]){e.assetUploaderStores[r.asset_type].initializeAsset(r);this.cancelMainRefresh=e.refreshMainAsset()}this.cancelSupplementaryRefresh=e.refreshSupplementaryAssets();this.forceFirstPublishedVideoLectureToBeFree(e,t)}UNSAFE_componentWillReceiveProps(e){let{curriculumItem:t,isFirstPublishedVideoLecture:r}=e;this.forceFirstPublishedVideoLectureToBeFree(t,r)}componentWillUnmount(){this.cancelMainRefresh&&this.cancelMainRefresh();this.cancelSupplementaryRefresh&&this.cancelSupplementaryRefresh()}get shouldOpenEditContentInitially(){const{curriculumItem:e,avoidOpenEditContentInitially:t}=this.props;if(t){return false}if(e.isAddContentOpen){return false}if(e.asset){return e.asset.status!==Uh["b"].success||!e.is_published}return!e.is_published&&!e.description}forceFirstPublishedVideoLectureToBeFree(e,t){if(t&&!e.is_free){e.partialUpdate({is_free:true}).catch(Fd)}}render(){const{curriculumItem:e,canTogglePublishedState:t,editForm:r,hasInitialFocus:n,isFirstPublishedVideoLecture:i,isPreview:o,onClickDeleteButton:a,onClickEditButton:s,seenCaptionManage:c}=this.props;const u=!e.is_published&&!e.course.published_time&&e.course.is_paid;return l.a.createElement(wb,{curriculumItem:e,dataPurpose:"lecture-editor",addContent:l.a.createElement(mw,{curriculumItem:e}),editContent:l.a.createElement(iE,{curriculumItem:e,canToggleIsFree:!i,canTogglePublishedState:t||u,onClickDeleteButton:a,seenCaptionManage:c}),editForm:r,shouldOpenEditContentInitially:this.shouldOpenEditContentInitially,hasInitialFocus:n},l.a.createElement(ev,{curriculumItem:e,publishedLabel:gettext("Lecture"),unpublishedLabel:gettext("Unpublished lecture"),collapseButton:l.a.createElement(Gb,{isOpen:e.isEditContentOpen,onClick:e.toggleEditContent,"data-purpose":"lecture-collapse-btn"}),deleteButton:l.a.createElement(Wb,{iconType:"delete",item:e,onClick:a,disabled:e.isSaving,"data-purpose":"lecture-delete-btn"}),editButton:l.a.createElement(Wb,{iconType:"edit",item:e,onClick:s,"data-purpose":"lecture-edit-btn"})},o?l.a.createElement("span",{"data-purpose":"lecture-preview-enabled-label"},`(${gettext("Preview enabled")})`):null,!e.isAddContentOpen&&!e.asset?l.a.createElement(ev.ButtonContainer,null,l.a.createElement(le["a"],{udStyle:"secondary",size:"small","data-purpose":"lecture-add-content-btn",onClick:e.openAddContent,"aria-label":gettext("Add Content")},l.a.createElement(Gd.a,{label:false,size:"small"}),gettext("Content"))):null))}},aE.propTypes={curriculumItem:a.a.instanceOf(am).isRequired,canTogglePublishedState:a.a.bool.isRequired,editForm:a.a.node.isRequired,hasInitialFocus:a.a.bool,avoidOpenEditContentInitially:a.a.bool,isFirstPublishedVideoLecture:a.a.bool,onClickDeleteButton:a.a.func.isRequired,onClickEditButton:a.a.func.isRequired,seenCaptionManage:a.a.bool.isRequired,isPreview:a.a.bool.isRequired},aE.defaultProps={hasInitialFocus:false,avoidOpenEditContentInitially:false,isFirstPublishedVideoLecture:false},aE))||oE;var lE,cE;let uE=Object(i["f"])(lE=(cE=class e extends s["Component"]{render(){const{curriculumItem:e,onClickDeleteButton:t,hasInitialFocus:r}=this.props;return l.a.createElement(wb,{curriculumItem:e,dataPurpose:"coding-exercise-quiz-editor",hasInitialFocus:r},l.a.createElement(ev,{curriculumItem:e,publishedLabel:gettext("Coding Exercise"),unpublishedLabel:gettext("Unpublished Coding Exercise"),deleteButton:l.a.createElement(Wb,{iconType:"delete",item:e,onClick:t,disabled:e.isSaving,"data-purpose":"quiz-delete-btn"}),editButton:l.a.createElement(Wb,{iconType:"edit",item:e,href:e.editCodingExerciseUrl,"data-purpose":"quiz-edit-btn"})}))}},cE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,onClickDeleteButton:a.a.func.isRequired,hasInitialFocus:a.a.bool},cE.defaultProps={hasInitialFocus:false},cE))||lE;var pE=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/apply-draft-form.less");var dE,hE,mE;let fE=Object(i["f"])(dE=(hE=(mE=class e extends s["Component"]{constructor(e,t){super(e,t);this.props.curriculumItem.resetNumAllowedAnnouncements()}componentDidMount(){this.props.curriculumItem.getNumAllowedAnnouncements().catch(Fd)}get form(){return this.props.curriculumItem.applyDraftForm}onFormControlInputChange(e){this.form.setField(e.target.name,e.target.value)}onToggleInputChange(e){this.form.setField(e.target.name,e.target.checked)}onSubmit(e){e.preventDefault();const t=this.form.data.sendAnnouncement;this.props.curriculumItem.applyDraft().then((()=>{if(t){Object(Ui["c"])(gettext("Changes published and educational announcement sent successfully."))}else{Object(Ui["c"])(gettext("Changes published successfully."))}this.form.reset()})).catch((e=>{if(e.isAnnouncementError){Object(Ui["a"])(gettext("Changes published successfully, but there was an error sending your educational announcement."))}else{Fd(e)}}));this.props.curriculumItem.closeApplyDraftModal()}render(){const{curriculumItem:e}=this.props;const t=this.form;return l.a.createElement("form",{"data-purpose":"apply-draft-form",onSubmit:this.onSubmit},l.a.createElement(ji["b"],{label:gettext("Description"),labelProps:{className:"ud-sr-only"},note:gettext("Note - existing students will see this message on their practice test results page")},l.a.createElement(Vv["a"],{"data-purpose":"description",minLength:lh["t"],name:"description",value:t.data.description,onChange:this.onFormControlInputChange,rows:"4"})),l.a.createElement("div",{className:"apply-draft-form--send-announcement-row--1fhoj"},l.a.createElement(Mr["a"],{name:"sendAnnouncement",size:"large",checked:t.data.sendAnnouncement,"data-purpose":"send-announcement",disabled:!e.announcementRateLimit||e.announcementRateLimit.numRemaining===0,onChange:this.onToggleInputChange},l.a.createElement("span",null,gettext("Send as Educational Announcement"),e.announcementRateLimit?l.a.createElement("span",Object(fe["a"])({descriptionOfCaller:"apply-draft-form:count-out-of-left",html:`&nbsp;${interpolate(gettext("<b>(%(count)s</b> out of <b>%(max_count)s</b> left this month)"),{count:e.announcementRateLimit.numRemaining,max_count:e.announcementRateLimit.maxAllowed},true)}`})):null)),l.a.createElement(be["a"],{placement:"bottom",className:"apply-draft-form--send-announcement-popover--2P9oG",trigger:l.a.createElement(ce["a"],{udStyle:"ghost",size:"small"},l.a.createElement(ye.a,{color:"neutral",label:gettext("Get info")}))},gettext("Use when you want students to get notified of changes by email and in the notification bell on Udemy."))),l.a.createElement(ze["a"],null,l.a.createElement(le["a"],{udStyle:"ghost",onClick:e.closeApplyDraftModal},gettext("Cancel")),l.a.createElement(le["a"],{type:"submit",disabled:!t.isValid},gettext("Publish Changes"))))}},mE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired},mE),babelHelpers.applyDecoratedDescriptor(hE.prototype,"onFormControlInputChange",[f["a"]],Object.getOwnPropertyDescriptor(hE.prototype,"onFormControlInputChange"),hE.prototype),babelHelpers.applyDecoratedDescriptor(hE.prototype,"onToggleInputChange",[f["a"]],Object.getOwnPropertyDescriptor(hE.prototype,"onToggleInputChange"),hE.prototype),babelHelpers.applyDecoratedDescriptor(hE.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(hE.prototype,"onSubmit"),hE.prototype),hE))||dE;var gE=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/draft-alert.less");var yE,bE,vE,wE,EE;let SE=Object(i["f"])(yE=(bE=(EE=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"isAffixed",vE,this);babelHelpers.initializerDefineProperty(this,"affixSize",wE,this);this.affixTop=0;this.affixSpacerRef=l.a.createRef();this.affixRef=l.a.createRef();this.margin=16;this.padding=8}componentDidMount(){window.addEventListener("resize",this.onResize,{passive:true});window.addEventListener("scroll",this.onScroll,{passive:true})}componentWillUnmount(){window.removeEventListener("resize",this.onResize);window.removeEventListener("scroll",this.onScroll)}onDiscardDraftConfirm(){this.props.curriculumItem.confirmDiscardDraftConfirmation().then(this.props.curriculumItem.closeAddContent).catch(Fd)}get canAffix(){const{isAddContentOpen:e,isEditContentOpen:t}=this.props.curriculumItem;return e||t}setAffixSize(){const e=this.affixRef.current;const t=this.affixSpacerRef.current;this.affixSize.width=t?t.offsetWidth:0;this.affixSize.height=e?e.offsetHeight:0}onResize(){this.isAffixed&&this.setAffixSize()}onScroll(){const e=this.affixRef.current;const t=this.props.getContainer();if(!e||!t||!this.canAffix){return}const r=document.querySelector(".cm-full-page-takeover-header");this.affixTop=(r?r.getBoundingClientRect().bottom:0)+this.margin;let n=false;const i=t.getBoundingClientRect();if(i.top+this.padding<=this.affixTop){const t=e.getBoundingClientRect();if(i.bottom-t.height-this.padding>this.affixTop){n=true}}if(n!==this.isAffixed){this.isAffixed=n;n&&this.setAffixSize()}}render(){const{curriculumItem:e,getContainer:t,...r}=this.props;let n,i;if(this.isAffixed){n={position:"fixed",top:`${this.affixTop}px`,width:`${this.affixSize.width}px`};i={height:`${this.affixSize.height}px`}}return l.a.createElement("div",Object.assign({"data-purpose":"draft-alert"},r),l.a.createElement("div",{ref:this.affixSpacerRef,style:i}),l.a.createElement("div",{ref:this.affixRef,style:n,className:"draft-alert--draft-alert--39we7"},l.a.createElement(fg.a,{label:false,size:"large",className:"draft-alert--draft-alert-icon--3HCoE"}),l.a.createElement("div",{className:"draft-alert--draft-alert-content--3XZwH"},l.a.createElement("h2",{className:"ud-heading-md draft-alert--draft-alert-title--7kPfx"},!e.hasAssessmentContent?gettext("Practice tests must contain at least 1 question."):gettext("Changes to this test are not yet live.")),l.a.createElement("div",{className:"draft-alert--draft-alert-cta-container---8cXs"},l.a.createElement(le["a"],{udStyle:"ghost",size:"small",className:"ud-link-neutral","data-purpose":"cancel-draft-btn",onClick:e.openDiscardDraftConfirmation},gettext("Clear Changes")),l.a.createElement(le["a"],{disabled:!e.hasAssessmentContent,size:"small","data-purpose":"apply-draft-btn",onClick:e.openApplyDraftModal},gettext("Publish Changes"))))),l.a.createElement(Fe["a"],{isOpen:e.showApplyDraftModal,onClose:e.closeApplyDraftModal,title:gettext("Please describe the changes in this update:")},l.a.createElement(fE,{curriculumItem:e})),l.a.createElement(pe["a"],{onCancel:e.closeDiscardDraftConfirmation,onConfirm:this.onDiscardDraftConfirm,isOpen:e.showDiscardDraftConfirmation},gettext("This will lose all your changes to this practice test.  Do you want to continue?")))}},EE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,getContainer:a.a.func.isRequired},EE),vE=babelHelpers.applyDecoratedDescriptor(bE.prototype,"isAffixed",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),wE=babelHelpers.applyDecoratedDescriptor(bE.prototype,"affixSize",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{width:0,height:0}}}),babelHelpers.applyDecoratedDescriptor(bE.prototype,"onDiscardDraftConfirm",[f["a"]],Object.getOwnPropertyDescriptor(bE.prototype,"onDiscardDraftConfirm"),bE.prototype),babelHelpers.applyDecoratedDescriptor(bE.prototype,"setAffixSize",[he["e"]],Object.getOwnPropertyDescriptor(bE.prototype,"setAffixSize"),bE.prototype),babelHelpers.applyDecoratedDescriptor(bE.prototype,"onResize",[f["a"]],Object.getOwnPropertyDescriptor(bE.prototype,"onResize"),bE.prototype),babelHelpers.applyDecoratedDescriptor(bE.prototype,"onScroll",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(bE.prototype,"onScroll"),bE.prototype),bE))||yE;var _E=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/quiz-editor.less");var xE=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let DE=class e extends s["Component"]{setRef(e){this.element=e}getContainer(){return this.element}render(){const{curriculumItem:e,onClickDeleteButton:t,hasInitialFocus:r}=this.props;return l.a.createElement(wb,{curriculumItem:e,dataPurpose:"practice-test-quiz-editor",hasInitialFocus:r,onSetRef:this.setRef,className:"quiz-editor--quiz-editor--2RKDC"},e.type===lh["y"].practiceTest&&e.is_draft&&l.a.createElement(SE,{curriculumItem:e,getContainer:this.getContainer,className:"quiz-editor--draft-alert-editor-wrapper--29Fnd"}),l.a.createElement(ev,{curriculumItem:e,publishedLabel:gettext("Practice Test"),unpublishedLabel:gettext("Unpublished Practice Test"),deleteButton:l.a.createElement(Wb,{iconType:"delete",item:e,onClick:t,disabled:e.isSaving,"data-purpose":"quiz-delete-btn"}),editButton:l.a.createElement(Wb,{iconType:"edit",item:e,href:e.editPracticeTestUrl,"data-purpose":"quiz-edit-btn"})}),e.isSaving&&l.a.createElement(Vg,null))}};DE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,onClickDeleteButton:a.a.func.isRequired,hasInitialFocus:a.a.bool};DE.defaultProps={hasInitialFocus:false};xE([f["a"]],DE.prototype,"setRef",null);xE([f["a"]],DE.prototype,"getContainer",null);DE=xE([i["f"]],DE);var CE=r("./node_modules/@udemy/react-form-components/dist/esm/file-uploader/file-uploader.react-component.js");var TE=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/bulk-question-uploader.less");var OE,kE,PE;let AE=Object(i["f"])(OE=(kE=(PE=class e extends s["Component"]{constructor(e,t){super(e,t);this.uploader.registerUploadCompleteHandler(this.props.onUploadComplete);this.uploader.registerUploadErrorHandler(this.onUploadError)}get uploader(){return this.props.curriculumItem.bulkQuestionUploader}onUploadError(e,t,r){if(t){this.uploader.setError(r)}}onFileSelected(e){const t=e.target.files[0];this.uploader.setFile(t.name);this.uploader.upload(t)}render(){return l.a.createElement("div",{className:"bulk-question-uploader--container--c1Dp2","data-purpose":"bulk-question-uploader"},l.a.createElement("div",{className:"ud-heading-md"},gettext("Bulk Question Uploader")),l.a.createElement("div",Object.assign({className:"ud-text-with-links bulk-question-uploader--description--1paR_"},Object(fe["a"])({descriptionOfCaller:"bulk-question-uploader:link-to-practice-test-template",html:interpolate(gettext("The Bulk Question Uploader allows you to upload an existing set of questions "+"into a Udemy Practice Test. To use the uploader, first download "+'<a href="%(url)s" download>Udemy\'s Practice Test Question Template</a>, and '+"format your questions according to the document. Once finished, return to "+"this page and upload your file."),{url:g["a"].toStorageStaticAsset("instructor/manage/PracticeTestBulkQuestionUploadTemplate.csv")},true)}))),l.a.createElement("div",{className:"ud-text-bold bulk-question-uploader--disclaimer--2EYVC"},gettext("The Bulk Question Uploader does NOT support image uploads - to add images "+"into questions, first upload them using the uploader, then edit the "+"questions inside of the Curriculum Editor.")),l.a.createElement(ji["b"],{label:gettext("Upload CSV File"),labelProps:{className:"ud-sr-only"},validationState:this.uploader.error?"error":"neutral",note:this.uploader.error||null},l.a.createElement(CE["a"],{allowedExtensionsDotted:this.uploader.allowedExtensionsDotted,disabled:this.props.curriculumItem.isSaving,onChange:this.onFileSelected,onChangeSelectedFile:this.uploader.clearFile,progressPercentage:this.uploader.file?this.uploader.file.progressPercentage:null,purpose:"bulk-question-uploader-input",uploadLabel:gettext("Upload CSV File")})))}},PE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,onUploadComplete:a.a.func.isRequired},PE),babelHelpers.applyDecoratedDescriptor(kE.prototype,"onUploadError",[f["a"]],Object.getOwnPropertyDescriptor(kE.prototype,"onUploadError"),kE.prototype),babelHelpers.applyDecoratedDescriptor(kE.prototype,"onFileSelected",[f["a"]],Object.getOwnPropertyDescriptor(kE.prototype,"onFileSelected"),kE.prototype),kE))||OE;var IE,jE,RE;let NE=Object(i["f"])(IE=(jE=(RE=class e extends s["Component"]{componentDidMount(){this.props.curriculumItem.getRelatedLectureOptions(!this.props.curriculumItem.course.isOrganizationOnly).catch(Fd)}setRelatedLecture(e){this.props.form.setField("related_lecture",e.target.value)}render(){const{curriculumItem:e,form:t}=this.props;return l.a.createElement(ji["b"],{label:gettext("Related Lecture"),note:gettext("Select a related video lecture to help students answer this question.")},l.a.createElement(rc["a"],{"data-purpose":"related-lecture-select",value:t.data.related_lecture,onChange:this.setRelatedLecture,required:false},l.a.createElement("option",{value:""},`-- ${gettext("Select One")} --`),(e.relatedLectureOptions||[]).map((e=>l.a.createElement("option",{key:e.id,value:`${e.id}`},e.title)))))}},RE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,form:a.a.instanceOf(Im).isRequired},RE),babelHelpers.applyDecoratedDescriptor(jE.prototype,"setRelatedLecture",[f["a"]],Object.getOwnPropertyDescriptor(jE.prototype,"setRelatedLecture"),jE.prototype),jE))||IE;var LE=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/assessment-editor.less");var ME,qE,UE;let HE=Object(i["f"])(ME=(qE=(UE=class e extends s["Component"]{constructor(e,t){super(e,t);this.form.reset(this.props.assessment)}get form(){return this.props.curriculumItem.assessmentForms[lh["e"].fitb]}onQuestionChange(e){this.form.setField("question",e)}onSubmit(e){e.preventDefault();const{question:t,correctResponse:r}=Object(jm["a"])(this.form.data.question);this.form.validate(t,r);if(this.form.error.detail){return}const n=Object.assign({},this.form.data,{question:t,correct_response:JSON.stringify(r)});this.props.onSubmit(n)}render(){const e=this.form;return l.a.createElement("form",{"data-purpose":"fitb-assessment-editor",onSubmit:this.onSubmit,className:"assessment-editor--editor--UXV9S"},l.a.createElement("div",Object(fe["a"])({descriptionOfCaller:"fitb-assessment-editor:statement-help",html:gettext("Type in your statement. To enter a blank field, simply add two (2) underscore "+"symbols (__) before and after your selected word.<br/><br/>"+"<b>For example:</b> The planet Jupiter's four largest moons are called "+"__Io__, __Europa__, __Ganymede__, and __Callisto__.")})),l.a.createElement(ji["b"],{label:gettext("Statement"),"data-purpose":"question-form-group",className:"assessment-editor--fitb-question-form-group--20Tyz",note:e.error.detail||null,validationState:e.error.detail?"error":"neutral"},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.QUIZ_QUESTION,autoFocus:true,value:e.data.question,onValueChange:this.onQuestionChange})),l.a.createElement(NE,{curriculumItem:this.props.curriculumItem,form:e}),l.a.createElement("div",{className:"assessment-editor--submit-row--2420s"},l.a.createElement(le["a"],{type:"submit",size:"small",disabled:this.props.curriculumItem.isSaving},gettext("Save"))))}},UE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,assessment:a.a.instanceOf(hm),onSubmit:a.a.func.isRequired},UE.defaultProps={assessment:null},UE),babelHelpers.applyDecoratedDescriptor(qE.prototype,"onQuestionChange",[f["a"]],Object.getOwnPropertyDescriptor(qE.prototype,"onQuestionChange"),qE.prototype),babelHelpers.applyDecoratedDescriptor(qE.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(qE.prototype,"onSubmit"),qE.prototype),qE))||ME;var FE,BE,zE;let VE=Object(i["f"])(FE=(BE=(zE=class e extends s["Component"]{onChange(e){this.props.formField.setToBeAddedOptionValue(e.target.value)}onKeyDown(e){if(e.key==="Enter"){e.preventDefault();this.props.formField.add()}}render(){return l.a.createElement(ji["b"],{className:"assessment-editor--new-knowledge-area--1WLtz",label:gettext("New Knowledge Area name"),labelProps:{className:"ud-sr-only"},"data-purpose":"add-knowledge-area"},l.a.createElement(Ni["a"],null,l.a.createElement(Ii["b"],{value:this.props.formField.toBeAddedOptionValue,onChange:this.onChange,maxLength:Km,placeholder:gettext("New Knowledge Area name"),onKeyDown:this.onKeyDown}),l.a.createElement(Ni["a"].Addon,{componentClass:le["a"],udStyle:"secondary",onClick:this.props.formField.add},gettext("Add"))))}},zE.propTypes={formField:a.a.instanceOf(Hm).isRequired},zE),babelHelpers.applyDecoratedDescriptor(BE.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(BE.prototype,"onChange"),BE.prototype),babelHelpers.applyDecoratedDescriptor(BE.prototype,"onKeyDown",[f["a"]],Object.getOwnPropertyDescriptor(BE.prototype,"onKeyDown"),BE.prototype),BE))||FE;var WE=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input-container.react-component.js");var GE,KE,$E;let XE=Object(i["f"])(GE=(KE=($E=class e extends s["Component"]{onChange(e){this.props.formField.editAtIndex(this.props.index,e.target.value)}onCheckedChange(e){if(e.target.checked){this.props.form.setField("selectedKnowledgeAreaIndex",this.props.index)}}onConfirmAndDelete(){this.props.formField.markAsToBeDeleted(this.props.index)}render(){const e=!this.props.value&&this.props.index===-1;return l.a.createElement("div",{className:"item-icon-button-trigger assessment-editor--knowledge-area--11Kiw"},l.a.createElement(Qc["b"],{size:"large",checked:this.props.index===this.props.form.data.selectedKnowledgeAreaIndex,"data-purpose":"knowledge-area-option-toggle",onChange:this.onCheckedChange},l.a.createElement("span",{className:"ud-sr-only"},gettext("Knowledge Area name"))),l.a.createElement("div",{className:"assessment-editor--flex--DZXNO"},l.a.createElement(ji["b"],{label:gettext("Knowledge Area name"),labelProps:{className:"ud-sr-only"}},l.a.createElement(WE["a"],null,l.a.createElement(Ii["b"],{value:this.props.value||"",onChange:!e?this.onChange:null,"data-purpose":"knowledge-area-option-input",maxLength:Km,placeholder:this.props.value?"":gettext("No Knowledge Area"),readOnly:e}),this.props.value?l.a.createElement(Wb,{iconType:"delete",iconProps:{size:"small"},"data-purpose":"knowledge-area-option-delete",onClick:this.onConfirmAndDelete,className:"assessment-editor--knowledge-area-delete--pGvpB"}):null))))}},$E.propTypes={form:a.a.instanceOf(Xm).isRequired,formField:a.a.instanceOf(Hm).isRequired,index:a.a.number.isRequired,value:a.a.string.isRequired},$E),babelHelpers.applyDecoratedDescriptor(KE.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(KE.prototype,"onChange"),KE.prototype),babelHelpers.applyDecoratedDescriptor(KE.prototype,"onCheckedChange",[f["a"]],Object.getOwnPropertyDescriptor(KE.prototype,"onCheckedChange"),KE.prototype),babelHelpers.applyDecoratedDescriptor(KE.prototype,"onConfirmAndDelete",[f["a"]],Object.getOwnPropertyDescriptor(KE.prototype,"onConfirmAndDelete"),KE.prototype),KE))||GE;var YE,QE,JE;let ZE=Object(i["f"])(YE=(QE=(JE=class e extends s["Component"]{onDeleteKnowledgeAreaConfirm(){const{curriculumItem:e,form:t}=this.props;const r=t.data.selectedKnowledgeAreaIndex;const n=e.knowledgeAreaFormField.toBeDeletedOptionIndex;if(n<r){t.setField("selectedKnowledgeAreaIndex",r-1)}else if(n===r){t.setField("selectedKnowledgeAreaIndex",-1)}e.knowledgeAreaFormField.delete()}render(){const e=this.props.curriculumItem.knowledgeAreaFormField;return l.a.createElement(ji["b"],{udStyle:"fieldset",label:gettext("Knowledge Area (Optional)"),"data-purpose":"knowledge-area-form-group"},l.a.createElement(XE,{form:this.props.form,formField:e,value:"",index:-1}),(e.options||[]).map(((t,r)=>l.a.createElement(XE,{key:r,form:this.props.form,formField:e,value:t.value,index:r}))),l.a.createElement(VE,{formField:e}),l.a.createElement(pe["a"],{onCancel:e.unmarkAsToBeDeleted,onConfirm:this.onDeleteKnowledgeAreaConfirm,isOpen:e.toBeDeletedOptionIndex!==null},gettext("This will permanently delete this knowledge area. Are you sure you want to continue?")))}},JE.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,form:a.a.instanceOf(Xm).isRequired},JE),babelHelpers.applyDecoratedDescriptor(QE.prototype,"onDeleteKnowledgeAreaConfirm",[f["a"]],Object.getOwnPropertyDescriptor(QE.prototype,"onDeleteKnowledgeAreaConfirm"),QE.prototype),QE))||YE;var eS,tS,rS;const nS={"./assessment-editor.less":{flex:"assessment-editor--flex--DZXNO",editor:"assessment-editor--editor--UXV9S","answer-option":"assessment-editor--answer-option--1OCgu","fitb-question-form-group":"assessment-editor--fitb-question-form-group--20Tyz","knowledge-area":"assessment-editor--knowledge-area--11Kiw","answer-option-inactive":"assessment-editor--answer-option-inactive--1hIbU","answer-option-toggle-wrapper":"assessment-editor--answer-option-toggle-wrapper--1jKtC","answer-option-delete":"assessment-editor--answer-option-delete--rHhxt","answer-option-feedback":"assessment-editor--answer-option-feedback--J3h3o","new-knowledge-area":"assessment-editor--new-knowledge-area--1WLtz","knowledge-area-delete":"assessment-editor--knowledge-area-delete--pGvpB","submit-row":"assessment-editor--submit-row--2420s"}};let iS=Object(i["f"])(eS=(tS=(rS=class e extends s["Component"]{onFocus(){this.props.form.focusOnAnswerOption(this.props.index);const e=this.props.form.data.answerOptions.length;if(this.props.index===e-1&&e<$m){this.props.form.addAnswerOption("","",false)}}onChange(e){this.props.form.setAnswerOptionValue(this.props.option,e)}onCheckedChange(){this.props.form.setAnswerOptionChecked(this.props.option,!this.props.option.checked)}onFeedbackChange(e){this.props.form.setAnswerOptionFeedback(this.props.option,e.target.value)}onDelete(){this.props.form.deleteAnswerOptionAtIndex(this.props.index)}render(){const{form:e,index:t,option:r,showFeedback:n}=this.props;const i=e.type===lh["e"].multipleChoice?Qc["b"]:Mr["a"];const o=Object(Fm["e"])(r.value).length>Wm;const a=interpolate(gettext("Answer %(answerNumber)s"),{answerNumber:t+1},true);return l.a.createElement("div",{className:"item-icon-button-trigger assessment-editor--answer-option--1OCgu"},l.a.createElement("div",{className:"assessment-editor--answer-option-toggle-wrapper--1jKtC"},l.a.createElement(i,{size:"large",checked:r.checked,onChange:this.onCheckedChange,"data-purpose":"answer-option-toggle"},l.a.createElement("span",{className:"ud-sr-only"},a))),l.a.createElement("div",{className:"assessment-editor--flex--DZXNO"},l.a.createElement(ji["b"],{label:a,labelProps:{className:"ud-sr-only"},note:o?gettext("This answer is too long"):null,validationState:o?"error":"neutral",className:er()(fr()({"answer-option-inactive":e.focusedAnswerOptionIndex!==t}),nS)},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.QUIZ_ANSWER,placeholder:gettext("Add an answer."),value:r.value,onValueChange:this.onChange,onFocus:this.onFocus,maxLength:Wm,withCounter:true})),n?l.a.createElement(ji["b"],{label:gettext("Explanation"),labelProps:{className:"ud-sr-only"},className:"assessment-editor--answer-option-feedback--J3h3o"},l.a.createElement(Ru["a"],{"data-purpose":"answer-option-feedback",maxLength:Gm,value:r.feedback,onChange:this.onFeedbackChange,placeholder:gettext("Explain why this is or isn't the best answer.")})):null),l.a.createElement("div",{className:"assessment-editor--answer-option-delete--rHhxt"},l.a.createElement(Wb,{iconType:"delete",iconProps:{size:"small"},"data-purpose":"answer-option-delete",onClick:this.onDelete,disabled:e.data.answerOptions.length<=1})))}},rS.propTypes={form:a.a.instanceOf(Xm).isRequired,index:a.a.number.isRequired,option:a.a.object.isRequired,showFeedback:a.a.bool.isRequired},rS),babelHelpers.applyDecoratedDescriptor(tS.prototype,"onFocus",[f["a"]],Object.getOwnPropertyDescriptor(tS.prototype,"onFocus"),tS.prototype),babelHelpers.applyDecoratedDescriptor(tS.prototype,"onChange",[f["a"]],Object.getOwnPropertyDescriptor(tS.prototype,"onChange"),tS.prototype),babelHelpers.applyDecoratedDescriptor(tS.prototype,"onCheckedChange",[f["a"]],Object.getOwnPropertyDescriptor(tS.prototype,"onCheckedChange"),tS.prototype),babelHelpers.applyDecoratedDescriptor(tS.prototype,"onFeedbackChange",[f["a"]],Object.getOwnPropertyDescriptor(tS.prototype,"onFeedbackChange"),tS.prototype),babelHelpers.applyDecoratedDescriptor(tS.prototype,"onDelete",[f["a"]],Object.getOwnPropertyDescriptor(tS.prototype,"onDelete"),tS.prototype),tS))||eS;var oS,aS;let sS=Object(i["f"])(oS=(aS=class e extends s["Component"]{render(){const e=this.props.curriculumItem.type===lh["y"].simpleQuiz;return l.a.createElement(ji["b"],{udStyle:"fieldset",label:gettext("Answers"),"data-purpose":"answers-form-group",note:interpolate(gettext("Write up to %(maxNumber)s possible answers and indicate which one is the best."),{maxNumber:$m},true)},this.props.form.data.answerOptions.map(((t,r)=>l.a.createElement(iS,{key:r,form:this.props.form,index:r,option:t,showFeedback:e}))))}},aS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,form:a.a.instanceOf(Xm).isRequired},aS))||oS;var lS,cS,uS;let pS=Object(i["f"])(lS=(cS=(uS=class e extends s["Component"]{constructor(e,t){super(e,t);const r=this.props.curriculumItem.knowledgeAreaFormField;r.reset();const n=r.options?r.options.map((e=>e.value)):null;this.form.reset(this.props.assessment,n)}get form(){return this.props.curriculumItem.assessmentForms[this.props.assessmentType]}onQuestionChange(e){this.form.setField("question",e)}onExplanationChange(e){this.form.setField("explanation",e)}onSubmit(e){e.preventDefault();const{question:t,selectedKnowledgeAreaIndex:r}=this.form.data;const n=this.form.data.answerOptions.filter((e=>!!this.form.decodeAndTrim(e.value)));const i=this.props.curriculumItem.knowledgeAreaFormField;const o=(i.options||[]).map((e=>e.value));const a=o[r]||"";this.form.validate(t,n,a);if(this.form.error.detail){Object(Ui["a"])(this.form.error.detail);return}const{answers:s,feedbacks:l,correctResponse:c}=Object(jm["e"])(n);const u=Object.assign({},this.form.data,{answerOptions:undefined,answers:JSON.stringify(s),feedbacks:JSON.stringify(l),correct_response:JSON.stringify(c),selectedKnowledgeAreaIndex:undefined,section:a,section_name_map:JSON.stringify(i.nameMap)});this.props.onSubmit(u)}render(){const e=this.form;const t=this.props.curriculumItem.type===lh["y"].simpleQuiz;const r=this.props.curriculumItem.type===lh["y"].practiceTest;const n=this.props.curriculumItem.course.is_practice_test_course;return l.a.createElement("form",{"data-purpose":"multiple-choice-assessment-editor",onSubmit:this.onSubmit,className:"assessment-editor--editor--UXV9S"},l.a.createElement(ji["b"],{label:gettext("Question"),"data-purpose":"question-form-group"},l.a.createElement(Lu["a"],{theme:r?Lu["a"].THEMES.PRACTICE_TEST_QUESTION:Lu["a"].THEMES.QUIZ_QUESTION,autoFocus:true,value:e.data.question,onValueChange:this.onQuestionChange})),l.a.createElement(sS,{curriculumItem:this.props.curriculumItem,form:e}),r?l.a.createElement(ji["b"],{label:gettext("Explanation"),"data-purpose":"explanation-form-group",note:gettext("Explain why the correct answer is the best choice.")},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.PRACTICE_TEST_QUESTION_EXPLANATION,value:e.data.explanation,onValueChange:this.onExplanationChange})):null,t||r&&!n?l.a.createElement(NE,{curriculumItem:this.props.curriculumItem,form:e}):null,r?l.a.createElement(ZE,{curriculumItem:this.props.curriculumItem,form:e}):null,l.a.createElement("div",{className:"assessment-editor--submit-row--2420s"},l.a.createElement(le["a"],{type:"submit",size:"small",disabled:this.props.curriculumItem.isSaving},gettext("Save"))))}},uS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,assessment:a.a.instanceOf(hm),assessmentType:a.a.oneOf([lh["e"].multipleChoice,lh["e"].multipleSelect]).isRequired,onSubmit:a.a.func.isRequired},uS.defaultProps={assessment:null},uS),babelHelpers.applyDecoratedDescriptor(cS.prototype,"onQuestionChange",[f["a"]],Object.getOwnPropertyDescriptor(cS.prototype,"onQuestionChange"),cS.prototype),babelHelpers.applyDecoratedDescriptor(cS.prototype,"onExplanationChange",[f["a"]],Object.getOwnPropertyDescriptor(cS.prototype,"onExplanationChange"),cS.prototype),babelHelpers.applyDecoratedDescriptor(cS.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(cS.prototype,"onSubmit"),cS.prototype),cS))||lS;var dS,hS,mS;let fS=Object(i["f"])(dS=(hS=(mS=class e extends s["Component"]{getTabTitleForAssessmentType(e){return interpolate(gettext("Add %(type)s"),{type:lh["c"][e]},true)}get tabConfigForSelectingAssessmentCreationType(){const e=[{label:gettext("Add Single Question"),type:lh["a"].single},{label:gettext("Batch Question Uploader"),type:lh["a"].batch}];return{title:gettext("Add Question(s)"),content:l.a.createElement(aw,{onSelect:this.onSelectAssessmentCreationType,optionStyle:ow.assessmentCreationType,options:e})}}get tabConfigForSelectingAssessmentType(){const{multipleChoice:e,multipleSelect:t,fitb:r}=lh["e"];const n=[{label:lh["c"][e],type:e,icon:_g.a}];if(this.props.curriculumItem.type===lh["y"].practiceTest){n.push({label:lh["c"][t],type:t,icon:_g.a})}else if(this.props.curriculumItem.course.isOrganizationOnly){n.push({label:lh["c"][r],type:r,icon:_g.a})}return{title:gettext("Select question type"),content:l.a.createElement(aw,{onSelect:this.props.curriculumItem.setSelectedContentType,optionStyle:ow.assessmentType,options:n})}}get tabConfig(){const{curriculumItem:e}=this.props;switch(e.selectedContentType){case null:if(e.type===lh["y"].practiceTest){return this.tabConfigForSelectingAssessmentCreationType}return this.tabConfigForSelectingAssessmentType;case lh["a"].single:return this.tabConfigForSelectingAssessmentType;case lh["a"].batch:return{title:gettext("Add Question(s)"),content:l.a.createElement(AE,{curriculumItem:e,onUploadComplete:this.onBulkSubmit})};case lh["e"].multipleChoice:case lh["e"].multipleSelect:return{title:this.getTabTitleForAssessmentType(e.selectedContentType),content:this.getEditorWithLoader(l.a.createElement(pS,{curriculumItem:e,assessment:e.addContentAssessment,assessmentType:e.selectedContentType,onSubmit:this.onSubmit}))};case lh["e"].fitb:return{title:this.getTabTitleForAssessmentType(lh["e"].fitb),content:this.getEditorWithLoader(l.a.createElement(HE,{curriculumItem:e,assessment:e.addContentAssessment,onSubmit:this.onSubmit}))};default:throw new Error(`Unknown content type: ${e.selectedContentType}`)}}getEditorWithLoader(e){const t=this.props.curriculumItem.assessments===null;return t?l.a.createElement(S,{size:"xlarge"}):e}onSelectAssessmentCreationType(e){if(e===lh["a"].batch&&this.props.curriculumItem.hasAssessmentContent&&!this.props.curriculumItem.isPublishedAndCourseWasPublished){this.props.curriculumItem.openBatchAssessmentCreationConfirmation()}else{this.props.curriculumItem.setSelectedContentType(e)}}onSubmit(e){this.props.curriculumItem.updateOrCreateAssessment(e).then((()=>{this.props.curriculumItem.openEditContent()})).catch((e=>{if(e.prompt&&e.prompt.length>0){Object(Ui["a"])(e.prompt[0])}else{Fd(e)}}))}onBulkSubmit(e){this.props.curriculumItem.bulkCreateAssessments(e).then((()=>{this.props.curriculumItem.openEditContent()})).catch((e=>{Fd(e)}))}render(){const e=this.tabConfig;const{curriculumItem:t}=this.props;return l.a.createElement(rw,{purpose:"add-content",title:e.title,onClose:t.closeAddContent},e.content,l.a.createElement(pe["a"],{onCancel:t.closeBatchAssessmentCreationConfirmation,onConfirm:t.confirmBatchAssessmentCreationConfirmation,isOpen:t.showBatchAssessmentCreationConfirmation},gettext("Questions attached to this practice test will be deleted. Do you want to continue?")))}},mS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired},mS),babelHelpers.applyDecoratedDescriptor(hS.prototype,"onSelectAssessmentCreationType",[f["a"]],Object.getOwnPropertyDescriptor(hS.prototype,"onSelectAssessmentCreationType"),hS.prototype),babelHelpers.applyDecoratedDescriptor(hS.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(hS.prototype,"onSubmit"),hS.prototype),babelHelpers.applyDecoratedDescriptor(hS.prototype,"onBulkSubmit",[f["a"]],Object.getOwnPropertyDescriptor(hS.prototype,"onBulkSubmit"),hS.prototype),hS))||dS;var gS=r("./src/udemy/js/course-manage-v2/curriculum/item/quiz/assessment-list.less");var yS=r.n(gS);var bS,vS,wS;const ES=yS.a.highlight;let SS=Object(i["f"])(bS=(vS=(wS=class e extends s["Component"]{componentDidMount(){this.applyHighlightAnimationIfUpdatedOrCreated();this.highlightAnimationDisposer=Object(he["u"])(this.props.curriculumItem,"justUpdatedOrCreatedAssessmentId",this.applyHighlightAnimationIfUpdatedOrCreated)}componentWillUnmount(){this.highlightAnimationDisposer()}applyHighlightAnimationIfUpdatedOrCreated(){const{curriculumItem:e,assessment:t}=this.props;if(e.justUpdatedOrCreatedAssessmentId===t.id){setTimeout(this.applyHighlightAnimation,0);e.clearJustUpdatedOrCreatedAssessmentId()}}applyHighlightAnimation(){if(this.element){this.element.classList.add(ES);this.element.focus();setTimeout(this.unapplyHighlightAnimation,1e3)}}unapplyHighlightAnimation(){if(this.element){this.element.classList.remove(ES)}}setRef(e){this.element=e}onEdit(){this.props.curriculumItem.openAddContentForAssessment(this.props.assessment)}onConfirmAndDelete(){this.props.curriculumItem.openDeleteAssessmentConfirmation(this.props.assessment.id)}renderQuestion(){let e=this.props.assessment.question;if(this.props.assessment.assessment_type===lh["e"].fitb){e=Object(jm["b"])(e,this.props.assessment.correctResponse)}return e.replace(/<[^>]+(>|$)/g," ").trim()}render(){const{curriculumItem:e,assessment:t,itemNumber:r}=this.props;return l.a.createElement("li",{className:`item-icon-button-trigger ${Db}`,"data-purpose":"assessment-list-item"},l.a.createElement("div",{className:"ud-text-sm assessment-list--assessment-list-item-content--1rnzJ",ref:this.setRef,tabIndex:"-1"},l.a.createElement("div",{className:"ud-text-bold"},`${r}.`),l.a.createElement("div",Object.assign({className:"assessment-list--ellipsis--2023T"},Object(fe["a"])({descriptionOfCaller:"assessment-list-item:render-question",html:this.renderQuestion()}))),l.a.createElement("div",{className:"assessment-list--assessment-type--34uX-"},lh["c"][t.assessment_type]),l.a.createElement("div",{className:"assessment-list--flex--1U_Ei"}),l.a.createElement(Wb,{iconType:"edit","data-purpose":"edit-assessment",onClick:this.onEdit}),l.a.createElement(Wb,{iconType:"delete","data-purpose":"delete-assessment",onClick:this.onConfirmAndDelete,disabled:e.isSaving}),l.a.createElement(Wb,{iconType:"move",componentClass:"div",className:(Cb?Cb+" ":"")+"assessment-list--sort-handle--1OSub"})))}},wS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,assessment:a.a.instanceOf(hm).isRequired,itemNumber:a.a.number.isRequired},wS),babelHelpers.applyDecoratedDescriptor(vS.prototype,"applyHighlightAnimationIfUpdatedOrCreated",[f["a"]],Object.getOwnPropertyDescriptor(vS.prototype,"applyHighlightAnimationIfUpdatedOrCreated"),vS.prototype),babelHelpers.applyDecoratedDescriptor(vS.prototype,"applyHighlightAnimation",[f["a"]],Object.getOwnPropertyDescriptor(vS.prototype,"applyHighlightAnimation"),vS.prototype),babelHelpers.applyDecoratedDescriptor(vS.prototype,"unapplyHighlightAnimation",[f["a"]],Object.getOwnPropertyDescriptor(vS.prototype,"unapplyHighlightAnimation"),vS.prototype),babelHelpers.applyDecoratedDescriptor(vS.prototype,"setRef",[f["a"]],Object.getOwnPropertyDescriptor(vS.prototype,"setRef"),vS.prototype),babelHelpers.applyDecoratedDescriptor(vS.prototype,"onEdit",[f["a"]],Object.getOwnPropertyDescriptor(vS.prototype,"onEdit"),vS.prototype),babelHelpers.applyDecoratedDescriptor(vS.prototype,"onConfirmAndDelete",[f["a"]],Object.getOwnPropertyDescriptor(vS.prototype,"onConfirmAndDelete"),vS.prototype),vS))||bS;var _S,xS,DS;const CS={"./assessment-list.less":{dragging:"assessment-list--dragging--IGKBx",flex:"assessment-list--flex--1U_Ei",ellipsis:"assessment-list--ellipsis--2023T","ud-ellipsis-1-line":"assessment-list--ud-ellipsis-1-line--16f7l","assessment-list":"assessment-list--assessment-list--1sF23","assessment-list-item-content":"assessment-list--assessment-list-item-content--1rnzJ",highlight:"assessment-list--highlight--DDLEW","sort-handle":"assessment-list--sort-handle--1OSub","assessment-type":"assessment-list--assessment-type--34uX-"}};const TS={curriculumItem:a.a.instanceOf(lf).isRequired};const OS=e=>{const{isDragging:t}=e.curriculumItem.reorderingUi;return l.a.createElement("div",{className:er()(fr()("assessment-list",{dragging:t}),CS)},l.a.createElement(PS,e))};OS.propTypes=TS;var kS=Object(i["f"])(OS);let PS=Object(i["f"])(_S=(xS=(DS=class e extends s["Component"]{constructor(e,t){super(e,t);this.optionsForSortable=kb({onStart:this.onSortAssessmentStart,onEnd:this.onSortAssessmentEnd,scrollFn:this.onSortAssessmentScroll})}setSortableRef(e){this.sortable=e?e.sortable:null}onSortAssessmentScroll(e,t,r){Object(ab["b"])(e,t,r,this.sortable,Tb)}onSortAssessmentStart(){this.props.curriculumItem.setReorderingUi({isDragging:true})}onSortAssessmentEnd(e){this.props.curriculumItem.setReorderingUi({isDragging:false});this.props.curriculumItem.reorderAssessment(e.oldIndex,e.newIndex).catch(Fd)}render(){const{curriculumItem:e}=this.props;const t=e.assessments||[];if(t.length===0){return null}return l.a.createElement(ab["a"],{tag:"ul",className:"ud-unstyled-list","data-purpose":"assessment-list",ref:this.setSortableRef,options:this.optionsForSortable},t.map(((t,r)=>l.a.createElement(SS,{key:t.id,itemNumber:r+1,curriculumItem:e,assessment:t}))))}},DS.propTypes=TS,DS),babelHelpers.applyDecoratedDescriptor(xS.prototype,"setSortableRef",[f["a"]],Object.getOwnPropertyDescriptor(xS.prototype,"setSortableRef"),xS.prototype),babelHelpers.applyDecoratedDescriptor(xS.prototype,"onSortAssessmentScroll",[f["a"]],Object.getOwnPropertyDescriptor(xS.prototype,"onSortAssessmentScroll"),xS.prototype),babelHelpers.applyDecoratedDescriptor(xS.prototype,"onSortAssessmentStart",[f["a"]],Object.getOwnPropertyDescriptor(xS.prototype,"onSortAssessmentStart"),xS.prototype),babelHelpers.applyDecoratedDescriptor(xS.prototype,"onSortAssessmentEnd",[f["a"]],Object.getOwnPropertyDescriptor(xS.prototype,"onSortAssessmentEnd"),xS.prototype),xS))||_S;var AS,IS;const jS=Object(i["f"])((e=>{let{curriculumItem:t,onToggle:r,canToggle:n}=e;if(!n){return null}const i={udStyle:"secondary",size:"small","data-purpose":"is-published-toggle",disabled:t.isSaving,onClick:r};if(t.is_published&&t.is_draft){return l.a.createElement(be["a"],{placement:"top",canToggleOnHover:true,a11yRole:"description",trigger:l.a.createElement(le["a"],Object.assign({},i,{"aria-disabled":true,onClick:undefined}),gettext("Unpublish"))},gettext("You cannot unpublish with edits that are not live"))}if(t.is_published){return l.a.createElement(le["a"],i,gettext("Unpublish"))}return l.a.createElement(le["a"],Object.assign({},i,{udStyle:"brand"}),gettext("Publish"))}));let RS=Object(i["f"])(AS=(IS=class e extends s["Component"]{render(){const{curriculumItem:e,canTogglePublishedState:t,onToggleIsPublished:r}=this.props;return l.a.createElement("div",{className:"quiz-editor--quiz-settings-btns--2bGw_","data-purpose":"quiz-settings"},l.a.createElement(le["a"],{size:"small",componentClass:"a",href:e.previewAsInstructorUrl,target:"_blank",rel:"noopener noreferrer"},gettext("Preview")),l.a.createElement(jS,{curriculumItem:e,canToggle:t,onToggle:r}))}},IS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,canTogglePublishedState:a.a.bool.isRequired,onToggleIsPublished:a.a.func.isRequired},IS))||AS;var NS,LS,MS;let qS=Object(i["f"])(NS=(LS=(MS=class e extends s["Component"]{onToggleIsPublished(){const{curriculumItem:e}=this.props;if(e.is_published&&e.is_draft){Object(Ui["a"])(gettext("You cannot unpublish with edits that are not live"));return}e.partialUpdate({is_published:!e.is_published},lh["v"],false).catch(Fd)}onDeleteAssessmentConfirm(){this.props.curriculumItem.deleteAssessment().catch(Fd)}render(){const{canTogglePublishedState:e,className:t,curriculumItem:r,maxNumOfAssessments:n,maxWarningNumOfAssessments:i}=this.props;const o=r.type===lh["y"].practiceTest;const a=r.assessments||[];const s=a.length>=n;const c=a.length>=i;return l.a.createElement("div",{className:t,"data-purpose":"edit-content"},l.a.createElement("div",{className:"quiz-editor--edit-questions-header--2jn2R"},l.a.createElement("div",{className:"quiz-editor--edit-questions-header-left--i9aVs"},l.a.createElement("div",{className:"ud-text-bold"},gettext("Questions")),!s&&l.a.createElement(le["a"],{udStyle:"secondary",size:"small","data-purpose":"new-question-btn",onClick:r.openAddContent},o?gettext("New Question(s)"):gettext("New Question"))),l.a.createElement(RS,{curriculumItem:r,canTogglePublishedState:e,onToggleIsPublished:this.onToggleIsPublished})),s?l.a.createElement(b["a"],{udStyle:"error",showCta:false,"data-purpose":"assessment-danger-alert",title:gettext("The maximum number of questions has been reached.")}):null,!s&&c?l.a.createElement(b["a"],{udStyle:"warning",showCta:false,"data-purpose":"assessment-warning-alert",title:interpolate(gettext("Note: You can add up to %(limit)s quiz questions."),{limit:n},true)}):null,l.a.createElement(kS,{curriculumItem:r}),l.a.createElement(pe["a"],{onCancel:r.closeDeleteAssessmentConfirmation,onConfirm:this.onDeleteAssessmentConfirm,isOpen:!!r.toBeDeletedAssessmentId},gettext("You are about to remove a question. Are you sure you want to continue?")))}},MS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,canTogglePublishedState:a.a.bool.isRequired,className:a.a.string,maxNumOfAssessments:a.a.number,maxWarningNumOfAssessments:a.a.number},MS.defaultProps={className:"",maxNumOfAssessments:lh["r"],maxWarningNumOfAssessments:lh["s"]},MS),babelHelpers.applyDecoratedDescriptor(LS.prototype,"onToggleIsPublished",[f["a"]],Object.getOwnPropertyDescriptor(LS.prototype,"onToggleIsPublished"),LS.prototype),babelHelpers.applyDecoratedDescriptor(LS.prototype,"onDeleteAssessmentConfirm",[f["a"]],Object.getOwnPropertyDescriptor(LS.prototype,"onDeleteAssessmentConfirm"),LS.prototype),LS))||NS;const US=e=>{let{curriculumItem:t,onClick:r}=e;const n=t.type===lh["y"].practiceTest;const i=n&&t.isPublishedAndCourseWasPublished;const o=l.a.createElement(Wb,{iconType:"delete",item:t,onClick:i?undefined:r,disabled:t.isSaving,"aria-disabled":i,"data-purpose":"quiz-delete-btn"});if(!i){return o}return l.a.createElement(be["a"],{placement:"top",canToggleOnHover:true,a11yRole:"description",detachFromTarget:true,trigger:o},gettext("This practice test can only be unpublished. This allows students"+" to continue to review their scores. Unpublishing the practice test will prevent"+" any new students from accessing it."))};US.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,onClick:a.a.func.isRequired};var HS=Object(i["f"])(US);var FS,BS,zS;let VS=Object(i["f"])(FS=(BS=(zS=class e extends s["Component"]{constructor(e,t){super(e,t);if(this.props.curriculumItem.type===lh["y"].codingExercise){throw new Error("<QuizEditor /> cannot edit coding exercises. Use <CodingExerciseQuizEditor /> instead.")}}componentDidMount(){this.props.curriculumItem.refresh().catch(Fd)}get shouldOpenEditContentInitially(){const{curriculumItem:e,avoidOpenEditContentInitially:t}=this.props;if(t){return false}if(e.isAddContentOpen){return false}return e.hasAssessmentContent&&!e.is_published}get dataPurpose(){return{[lh["y"].simpleQuiz]:"quiz-editor",[lh["y"].practiceTest]:"practice-test-quiz-editor"}[this.props.curriculumItem.type]}get labels(){let e=gettext("Quiz");let t=gettext("Unpublished Quiz");if(this.props.curriculumItem.type===lh["y"].practiceTest){e=gettext("Practice Test");t=gettext("Unpublished Practice Test")}return{publishedLabel:e,unpublishedLabel:t}}setRef(e){this.element=e}getContainer(){return this.element}render(){const{curriculumItem:e,canTogglePublishedState:t,editForm:r,hasInitialFocus:n,onClickDeleteButton:i,onClickEditButton:o}=this.props;const{publishedLabel:a,unpublishedLabel:s}=this.labels;return l.a.createElement(wb,{className:"quiz-editor--quiz-editor--2RKDC",curriculumItem:e,dataPurpose:this.dataPurpose,addContent:l.a.createElement(fS,{curriculumItem:e}),editContent:l.a.createElement(qS,{curriculumItem:e,canTogglePublishedState:t}),editForm:r,onSetRef:this.setRef,shouldOpenEditContentInitially:this.shouldOpenEditContentInitially,hasInitialFocus:n},e.type===lh["y"].practiceTest&&e.is_draft&&l.a.createElement(SE,{curriculumItem:e,getContainer:this.getContainer,className:"quiz-editor--draft-alert-editor-wrapper--29Fnd"}),l.a.createElement(ev,{curriculumItem:e,className:"quiz-editor--item-bar--bbsyc",publishedLabel:a,unpublishedLabel:s,collapseButton:e.hasAssessmentContent?l.a.createElement(Gb,{isOpen:e.isEditContentOpen,onClick:e.toggleEditContent,"data-purpose":"quiz-collapse-btn"}):null,deleteButton:l.a.createElement(HS,{curriculumItem:e,onClick:i}),editButton:l.a.createElement(Wb,{iconType:"edit",item:e,onClick:o,"data-purpose":"quiz-edit-btn"})},!e.isAddContentOpen&&!e.hasAssessmentContent?l.a.createElement(ev.ButtonContainer,null,l.a.createElement(le["a"],{udStyle:"secondary",size:"small","data-purpose":"quiz-add-content-btn",onClick:e.openAddContent,"aria-label":gettext("Add Questions")},l.a.createElement(Gd.a,{label:false,size:"small"}),gettext("Questions"))):null),e.isSaving&&l.a.createElement(Vg,null))}},zS.propTypes={curriculumItem:a.a.instanceOf(lf).isRequired,canTogglePublishedState:a.a.bool.isRequired,editForm:a.a.node.isRequired,hasInitialFocus:a.a.bool,avoidOpenEditContentInitially:a.a.bool,onClickDeleteButton:a.a.func.isRequired,onClickEditButton:a.a.func.isRequired},zS.defaultProps={hasInitialFocus:false,avoidOpenEditContentInitially:false},zS),babelHelpers.applyDecoratedDescriptor(BS.prototype,"setRef",[f["a"]],Object.getOwnPropertyDescriptor(BS.prototype,"setRef"),BS.prototype),babelHelpers.applyDecoratedDescriptor(BS.prototype,"getContainer",[f["a"]],Object.getOwnPropertyDescriptor(BS.prototype,"getContainer"),BS.prototype),BS))||FS;var WS=r("./src/udemy/js/course-manage-v2/curriculum/item/section/section-editor.less");var GS,KS;const $S={"./section-editor.less":{"section-edit-form":"section-editor--section-edit-form--3omY0",hidden:"section-editor--hidden--3E3tT"}};let XS=Object(i["f"])(GS=(KS=class e extends s["Component"]{render(){const{className:e,curriculumItem:t,editForm:r,onClickDeleteButton:n,onClickEditButton:i}=this.props;return l.a.createElement("div",{"data-purpose":"section-editor"},r&&t.isEditFormOpen?l.a.createElement("div",{className:"section-editor--section-edit-form--3omY0"},r):null,l.a.createElement(ev,{curriculumItem:t,deleteButton:l.a.createElement(Wb,{iconType:"delete",item:t,onClick:n,disabled:t.isSaving,"data-purpose":"section-delete-btn"}),editButton:l.a.createElement(Wb,{iconType:"edit",item:t,onClick:i,"data-purpose":"section-edit-btn"}),publishedLabel:gettext("Section"),unpublishedLabel:gettext("Unpublished Section"),className:(e?e+" ":"")+er()(fr()({hidden:t.isEditFormOpen}),$S)}))}},KS.propTypes={className:a.a.string,curriculumItem:a.a.instanceOf(hf).isRequired,editForm:a.a.node.isRequired,onClickDeleteButton:a.a.func.isRequired,onClickEditButton:a.a.func.isRequired},KS.defaultProps={className:""},KS))||GS;var YS,QS,JS,ZS;let e_=(YS=Object(i["e"])("store"),YS(QS=Object(i["f"])(QS=(JS=(ZS=class e extends s["Component"]{onClickDeleteButton(){this.props.store.openDeleteCurriculumItemConfirmation(this.props.curriculumItem)}onClickEditButton(){this.props.store.openEditFormForItem(this.props.curriculumItem)}onSubmitEditForm(e){this.props.store.editItem(this.props.curriculumItem,e).catch(Fd)}get hasInitialFocus(){const e=this.props.store.curriculumItemWithInitialFocus;return!!e&&e.key===this.props.curriculumItem.key}get avoidOpenEditContentInitially(){return!!this.props.store.curriculumItemWithInitialFocus}get isFirstPublishedVideoLecture(){const e=this.props.store.firstPublishedVideoLecture;return!!e&&e.key===this.props.curriculumItem.key}get isPreview(){const{curriculumItem:e,store:t}=this.props;return t.course.isPaid&&!e.isAddContentOpen&&e.is_free}render(){const{curriculumItem:e,store:t}=this.props;switch(e.keyClass){case lh["k"].section:return l.a.createElement(XS,{curriculumItem:e,editForm:l.a.createElement(Ay,{curriculumItem:e,form:t.editForms[lh["k"].section],onCancel:e.closeEditForm,onSubmit:this.onSubmitEditForm,hasSectionTopicsEnabled:t.isSectionTaggingEnabled}),onClickDeleteButton:this.onClickDeleteButton,onClickEditButton:this.onClickEditButton,onSubmitEditForm:this.onSubmitEditForm});case lh["k"].lecture:return l.a.createElement(sE,{curriculumItem:e,canTogglePublishedState:t.course.can_toggle_curriculum_published_state,editForm:l.a.createElement(Ng,{curriculumItem:e,form:t.editForms[lh["k"].lecture],onCancel:e.closeEditForm,onSubmit:this.onSubmitEditForm}),hasInitialFocus:this.hasInitialFocus,avoidOpenEditContentInitially:this.avoidOpenEditContentInitially,isFirstPublishedVideoLecture:this.isFirstPublishedVideoLecture,onClickDeleteButton:this.onClickDeleteButton,onClickEditButton:this.onClickEditButton,seenCaptionManage:t.seenCaptionManage,isPreview:this.isPreview});case lh["k"].simpleQuiz:return l.a.createElement(VS,{curriculumItem:e,canTogglePublishedState:t.course.can_toggle_curriculum_published_state,editForm:l.a.createElement(Jg,{curriculumItem:e,form:t.editForms[lh["k"].simpleQuiz],onCancel:e.closeEditForm,onSubmit:this.onSubmitEditForm}),hasInitialFocus:this.hasInitialFocus,avoidOpenEditContentInitially:this.avoidOpenEditContentInitially,onClickDeleteButton:this.onClickDeleteButton,onClickEditButton:this.onClickEditButton});case lh["k"].practiceTest:return Vd("is_new_practice_test_creation_ui_enabled")?l.a.createElement(DE,{hasInitialFocus:this.hasInitialFocus,curriculumItem:e,onClickDeleteButton:this.onClickDeleteButton}):l.a.createElement(VS,{curriculumItem:e,canTogglePublishedState:t.course.can_toggle_curriculum_published_state,editForm:l.a.createElement($g,{curriculumItem:e,form:t.editForms[lh["k"].practiceTest],onCancel:e.closeEditForm,onSubmit:this.onSubmitEditForm}),hasInitialFocus:this.hasInitialFocus,avoidOpenEditContentInitially:this.avoidOpenEditContentInitially,onClickDeleteButton:this.onClickDeleteButton,onClickEditButton:this.onClickEditButton});case lh["k"].codingExercise:return l.a.createElement(uE,{hasInitialFocus:this.hasInitialFocus,curriculumItem:e,onClickDeleteButton:this.onClickDeleteButton});case lh["k"].assignment:return l.a.createElement(nv,{hasInitialFocus:this.hasInitialFocus,curriculumItem:e,onClickDeleteButton:this.onClickDeleteButton});default:throw new Error(`Editor for type ${e.keyClass} is not implemented`)}}},ZS.propTypes={curriculumItem:a.a.instanceOf(bh).isRequired,store:a.a.instanceOf(Ff).isRequired},ZS),babelHelpers.applyDecoratedDescriptor(JS.prototype,"onClickDeleteButton",[f["a"]],Object.getOwnPropertyDescriptor(JS.prototype,"onClickDeleteButton"),JS.prototype),babelHelpers.applyDecoratedDescriptor(JS.prototype,"onClickEditButton",[f["a"]],Object.getOwnPropertyDescriptor(JS.prototype,"onClickEditButton"),JS.prototype),babelHelpers.applyDecoratedDescriptor(JS.prototype,"onSubmitEditForm",[f["a"]],Object.getOwnPropertyDescriptor(JS.prototype,"onSubmitEditForm"),JS.prototype),JS))||QS)||QS);var t_=r("./src/udemy/js/course-manage-v2/curriculum/curriculum-list.less");var r_,n_,i_,o_;const a_={"./curriculum-list.less":{dragging:"curriculum-list--dragging--6J7YC","curriculum-list":"curriculum-list--curriculum-list--3rkPc",section:"curriculum-list--section--3L2Cm","first-child-is-clone":"curriculum-list--first-child-is-clone--1cN-A","non-section-item":"curriculum-list--non-section-item--2ilUv","inline-insert-enabled":"curriculum-list--inline-insert-enabled--e7uT6","fake-section":"curriculum-list--fake-section--1GsTK","inline-insert":"curriculum-list--inline-insert--vjbTx","inline-insert-non-section-item":"curriculum-list--inline-insert-non-section-item--2bEtY","inline-insert-button-row":"curriculum-list--inline-insert-button-row--1WWhb","last-item":"curriculum-list--last-item--1_8lY","inline-insert-last-item":"curriculum-list--inline-insert-last-item--tJQRA","inline-insert-section":"curriculum-list--inline-insert-section--2yFJE","list-item":"curriculum-list--list-item--MB8ip",open:"curriculum-list--open--VjfTb","inline-insert-button":"curriculum-list--inline-insert-button--1_HAG","fake-section-empty":"curriculum-list--fake-section-empty--3I_9L","inline-insert-form":"curriculum-list--inline-insert-form--33LaF"}};const s_=Object(i["e"])("store")(Object(i["f"])((e=>{const{disabled:t,store:r,isLastItem:n,...i}=e;if(t){return null}const{relatedItemKey:o}=i;const a=o===r.inlineItemEditorActiveKey&&!r.isSectionModeInlineItemEditor;return l.a.createElement("div",{className:er()(fr()("inline-insert",{"inline-insert-non-section-item":true,"last-item":n}),a_)},l.a.createElement("div",{className:er()(fr()("inline-insert-button-row",{open:a,"inline-insert-last-item":n&&!a}),a_)},l.a.createElement(hb,Object.assign({key:`${n}`,className:"curriculum-list--inline-insert-button--1_HAG",isOpen:a,isLastItem:n},i))),a&&l.a.createElement("div",{className:"curriculum-list--inline-insert-form--33LaF"},l.a.createElement(Ly,null)))})));s_.propTypes={...hb.propTypes,disabled:a.a.bool};s_.defaultProps={...hb.defaultProps,disabled:false};const l_=Object(i["e"])("store")(Object(i["f"])((e=>{const{disabled:t,isLastItem:r,store:n,...i}=e;if(t){return null}const{relatedItemKey:o}=i;const a=o===n.inlineItemEditorActiveKey&&n.isSectionModeInlineItemEditor;return l.a.createElement("div",{className:"curriculum-list--inline-insert--vjbTx curriculum-list--inline-insert-section--2yFJE"},l.a.createElement("div",{className:er()(fr()("inline-insert-button-row",{open:a}),a_)},l.a.createElement(hb,Object.assign({className:"curriculum-list--inline-insert-button--1_HAG",isOpen:a,type:"section",isLastItem:r},i))),a&&l.a.createElement("div",{className:"curriculum-list--inline-insert-form--33LaF"},l.a.createElement(Ly,{onlySectionForm:true})))})));l_.propTypes={...hb.propTypes,disabled:a.a.bool,isLastItem:a.a.bool};l_.defaultProps={...hb.defaultProps,disabled:false,isLastItem:false};let c_=(r_=Object(i["e"])("store"),r_(n_=Object(i["f"])(n_=(i_=(o_=class e extends s["Component"]{handleAddItemClick(e){const{setInlineItemEditorActiveKey:t,inlineItemEditorActiveKey:r,isSectionModeInlineItemEditor:n}=this.props.store;const i=n||r!==e;const o=i?e:null;t(o,false)}handleAddItemSectionClick(e){const{setInlineItemEditorActiveKey:t,inlineItemEditorActiveKey:r,isSectionModeInlineItemEditor:n}=this.props.store;const i=!n||r!==e;const o=i?e:null;t(o,true)}render(){const{curriculumItem:e,isTheLastElement:t,isTheLastElementInSection:r,store:n}=this.props;const i=e.keyClass===lh["k"].section;if(!n.inlineInsertEnabled){return l.a.createElement("div",{id:e.key,className:(Sb?Sb+" ":"")+er()(i?"list-item section":"list-item non-section-item",a_)},l.a.createElement(e_,{curriculumItem:e}))}if(i){if(e.isFake){const t=e.items.length===0;return l.a.createElement("div",{id:e.key,className:er()(fr()("list-item section fake-section",{"fake-section-empty":t}),a_)},l.a.createElement(l_,{disabled:n.course.isPracticeTestCourse,onClick:this.handleAddItemSectionClick,relatedItemKey:e.key,isLastItem:t}),l.a.createElement(s_,{disabled:!n.course.isPracticeTestCourse,onClick:this.handleAddItemClick,relatedItemKey:e.key}))}return l.a.createElement("div",{id:e.key,className:(Sb?Sb+" ":"")+"curriculum-list--list-item--MB8ip curriculum-list--section--3L2Cm"},l.a.createElement(l_,{onClick:this.handleAddItemSectionClick,relatedItemKey:e.key}),l.a.createElement(e_,{curriculumItem:e}),l.a.createElement(s_,{onClick:this.handleAddItemClick,relatedItemKey:e.key,isLastItem:r}),l.a.createElement(l_,{disabled:!t,onClick:this.handleAddItemSectionClick,relatedItemKey:-1,isLastItem:true}))}return l.a.createElement("div",{id:e.key,className:(Sb?Sb+" ":"")+"curriculum-list--list-item--MB8ip curriculum-list--non-section-item--2ilUv"},l.a.createElement(e_,{curriculumItem:e}),l.a.createElement(s_,{onClick:this.handleAddItemClick,relatedItemKey:e.key,isLastItem:r}),l.a.createElement(l_,{disabled:!t||n.course.isPracticeTestCourse,onClick:this.handleAddItemSectionClick,relatedItemKey:-1,isLastItem:true}))}},o_.propTypes={curriculumItem:a.a.instanceOf(bh).isRequired,index:a.a.number.isRequired,isTheLastElement:a.a.bool,isTheLastElementInSection:a.a.bool,store:a.a.instanceOf(Ff).isRequired},o_.defaultProps={isTheLastElement:false,isTheLastElementInSection:false},o_),babelHelpers.applyDecoratedDescriptor(i_.prototype,"handleAddItemClick",[f["a"]],Object.getOwnPropertyDescriptor(i_.prototype,"handleAddItemClick"),i_.prototype),babelHelpers.applyDecoratedDescriptor(i_.prototype,"handleAddItemSectionClick",[f["a"]],Object.getOwnPropertyDescriptor(i_.prototype,"handleAddItemSectionClick"),i_.prototype),i_))||n_)||n_);var u_,p_,d_,h_;const m_={"./curriculum-list.less":{dragging:"curriculum-list--dragging--6J7YC","curriculum-list":"curriculum-list--curriculum-list--3rkPc",section:"curriculum-list--section--3L2Cm","first-child-is-clone":"curriculum-list--first-child-is-clone--1cN-A","non-section-item":"curriculum-list--non-section-item--2ilUv","inline-insert-enabled":"curriculum-list--inline-insert-enabled--e7uT6","fake-section":"curriculum-list--fake-section--1GsTK","inline-insert":"curriculum-list--inline-insert--vjbTx","inline-insert-non-section-item":"curriculum-list--inline-insert-non-section-item--2bEtY","inline-insert-button-row":"curriculum-list--inline-insert-button-row--1WWhb","last-item":"curriculum-list--last-item--1_8lY","inline-insert-last-item":"curriculum-list--inline-insert-last-item--tJQRA","inline-insert-section":"curriculum-list--inline-insert-section--2yFJE","list-item":"curriculum-list--list-item--MB8ip",open:"curriculum-list--open--VjfTb","inline-insert-button":"curriculum-list--inline-insert-button--1_HAG","fake-section-empty":"curriculum-list--fake-section-empty--3I_9L","inline-insert-form":"curriculum-list--inline-insert-form--33LaF"}};const f_={store:a.a.instanceOf(Ff).isRequired};const g_=e=>{let{store:t,...r}=e;return l.a.createElement("div",{className:er()(fr()({dragging:t.reorderingUi.isDragging,"first-child-is-clone":t.reorderingUi.isFirstChildClone,"inline-insert-enabled":t.inlineInsertEnabled}),m_)},l.a.createElement(b_,r))};g_.propTypes=f_;var y_=Object(i["e"])("store")(Object(i["f"])(g_));let b_=(u_=Object(i["e"])("store"),u_(p_=Object(i["f"])(p_=(d_=(h_=class e extends s["Component"]{constructor(e,t){super(e,t);this.optionsForSortable=Ob({onChoose:this.onSortItemChoose,onUnchoose:this.onSortItemUnchoose,onStart:this.onSortItemStart,onEnd:this.onSortItemEnd,onMove:this.onMove,scrollFn:this.onSortItemScroll})}onMove(e){return this.props.store.onMove(e.dragged,e.related)}onSortItemChoose(e){this.props.store.setReorderingUi({isFirstChildClone:e.oldIndex===0})}onSortItemUnchoose(){this.props.store.setReorderingUi({isFirstChildClone:false})}onSortItemStart(){document.body.classList.add("course-manage-on-drag");this.props.store.setReorderingUi({isDragging:true})}onSortItemEnd(e){document.body.classList.remove("course-manage-on-drag");this.props.store.setReorderingUi({isDragging:false,isFirstChildClone:false});const t=this.props.store.isFirstElementSection?1:0;this.props.store.moveItem(e,e.oldIndex+t,e.newIndex+t)}onSortItemScroll(e,t,r){Object(ab["b"])(e,t,r,this.sortable,xb)}setSortableRef(e){this.sortable=e?e.sortable:null}render(){const{store:e}=this.props;if(!e.canShowCurriculum){return null}let t;if(e.inlineInsertEnabled&&!e.isFirstElementSection){t=e.flatList}else{t=e.flatListWithoutFakeSection}return l.a.createElement(ab["a"],{className:"curriculum-list--curriculum-list--3rkPc","data-purpose":"curriculum-list",ref:this.setSortableRef,options:this.optionsForSortable},t.slice(0,e.renderItemsUpToIndex).map(((r,n)=>l.a.createElement(c_,{key:r.key,index:n,isTheLastElement:n===t.length-1,isTheLastElementInSection:e.isLastItemInSection(r),curriculumItem:r}))))}},h_.propTypes=f_,h_),babelHelpers.applyDecoratedDescriptor(d_.prototype,"onMove",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"onMove"),d_.prototype),babelHelpers.applyDecoratedDescriptor(d_.prototype,"onSortItemChoose",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"onSortItemChoose"),d_.prototype),babelHelpers.applyDecoratedDescriptor(d_.prototype,"onSortItemUnchoose",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"onSortItemUnchoose"),d_.prototype),babelHelpers.applyDecoratedDescriptor(d_.prototype,"onSortItemStart",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"onSortItemStart"),d_.prototype),babelHelpers.applyDecoratedDescriptor(d_.prototype,"onSortItemEnd",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"onSortItemEnd"),d_.prototype),babelHelpers.applyDecoratedDescriptor(d_.prototype,"onSortItemScroll",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"onSortItemScroll"),d_.prototype),babelHelpers.applyDecoratedDescriptor(d_.prototype,"setSortableRef",[f["a"]],Object.getOwnPropertyDescriptor(d_.prototype,"setSortableRef"),d_.prototype),d_))||p_)||p_);const v_={store:a.a.instanceOf(Ff).isRequired};const w_=e=>{let{store:t,...r}=e;if(t.numOfNonSectionItems>1){return null}if(t.showAlertPracticeTest){return null}const n=t.course.isPracticeTestCourse?interpolate(gettext("Start putting together your course by creating practice tests below. "+"You must have a minimum of %(numPracticeTests)s practice tests to publish this course."),{numPracticeTests:t.course.practice_test_only_min_num_of_practice_tests},true):gettext("Start putting together your course by creating sections, lectures and practice "+"(quizzes, coding exercises and assignments).");return l.a.createElement("p",r,n)};w_.propTypes=v_;var E_=Object(i["e"])("store")(Object(i["f"])(w_));var S_=r("./node_modules/filepicker-js/index.js");var __=r.n(S_);const x_=Object(Rp["a"])();__.a.setKey(x_.third_party.filestack.key);class D_{constructor(e){this.policy=e.policy;this.signature=e.signature;this.validExtensions=[];this.validServices=[];this._allowedTypes={}}isAllowedType(e){return!!this._allowedTypes[e]}allowMultiple(){this.multiple=true}allowVideo(){this._allowedTypes.VIDEO=true;this.validExtensions=this.validExtensions.concat(Ye["e"]);this.validServices=this.validServices.concat(["COMPUTER","DROPBOX","GOOGLE_DRIVE","BOX","SKYDRIVE","URL"])}allowAudio(){this._allowedTypes.AUDIO=true;this.validExtensions=this.validExtensions.concat(Ye["a"]);this.validServices=this.validServices.concat(["COMPUTER","DROPBOX","GOOGLE_DRIVE","BOX","SKYDRIVE","URL"])}allowPresentation(){this._allowedTypes.PRESENTATION=true;this.validExtensions=this.validExtensions.concat(Ye["c"]);this.validServices=this.validServices.concat(["COMPUTER","DROPBOX","GOOGLE_DRIVE","BOX","SKYDRIVE","URL"])}allowSupplementaryFiles(){this._allowedTypes.MISC=true;this.validServices=this.validServices.concat(["COMPUTER","DROPBOX","GOOGLE_DRIVE","FACEBOOK","BOX","SKYDRIVE","URL"])}pickAndStore(){return new Promise(((e,t)=>{__.a.pickAndStore({extensions:this.isAllowedType("MISC")?undefined:this.validExtensions,multiple:this.multiple,policy:this.policy,services:this.validServices,signature:this.signature,language:yp["a"].language},{path:`/${yp["a"].id}/`},(r=>this._handlePickAndStoreSuccess(r,e,t)),(e=>this._handleError(e)))}))}_handlePickAndStoreSuccess(e,t,r){e.forEach((e=>{const n={key:e.key,uuid:e.key,name:e.filename};if(!n.key){Je["b"].increment("file_picker.asset.s3_failure");r(new Error("Issue with asset transfer."));return}const i=e.filename.split(".").pop().toLowerCase();const o=`.${i}`;let a=null;if(this.isAllowedType("VIDEO")&&Ye["e"].indexOf(o)>-1){a="users/me/video-assets/"}else if(this.isAllowedType("AUDIO")&&Ye["a"].indexOf(o)>-1){a="users/me/audio-assets/"}else if(this.isAllowedType("PRESENTATION")&&Ye["c"].indexOf(o)>-1){a="users/me/presentation-assets/"}else if(Ye["d"].indexOf(o)>-1){a="users/me/source-code-assets/"}else if(this.isAllowedType("MISC")){a="users/me/file-assets/"}if(!a){r(new Error("File extension is not supported!"));return}Je["b"].increment("file_picker.asset.uploaded");Qe["f"].post(a,n).then((e=>{t(e.data)})).catch((e=>{r(e)}))}))}_handleError(e){const t=101;if(e.code!==t){Je["b"].increment("file_picker.asset.failed_upload",{code:e.code})}}}var C_,T_,O_,k_;let P_=(C_=Object(i["e"])("store"),C_(T_=(O_=(k_=class e extends s["Component"]{constructor(e){super(e);this.filePicker=new D_(this.props.store.filePickerParams);this.filePicker.allowMultiple();this.filePicker.allowVideo();if(e.acceptAudio){this.filePicker.allowAudio()}if(e.acceptPresentation){this.filePicker.allowPresentation()}this.filePicker.allowSupplementaryFiles()}handleClick(){this.filePicker.pickAndStore()}render(){const e=this.props.store.pageStore.isCourseVersionEnabled;return l.a.createElement(l.a.Fragment,null,!e&&l.a.createElement(le["a"],{udStyle:"secondary",onClick:this.handleClick},gettext("Bulk Uploader")),e&&l.a.createElement(le["a"],{className:"ud-link-neutral ud-link-underline",udStyle:"ghost",onClick:this.handleClick},gettext("Bulk Uploader")))}},k_.propTypes={acceptAudio:a.a.bool,acceptPresentation:a.a.bool,store:a.a.object.isRequired},k_.defaultProps={acceptAudio:false,acceptPresentation:false},k_),babelHelpers.applyDecoratedDescriptor(O_.prototype,"handleClick",[f["a"]],Object.getOwnPropertyDescriptor(O_.prototype,"handleClick"),O_.prototype),O_))||T_);var A_,I_,j_,R_;const N_=Object(Rp["a"])();let L_=(A_=Object(i["e"])("store"),A_(I_=Object(i["f"])(I_=(j_=(R_=class e extends s["Component"]{constructor(e,t){const r=e.store;super(e,t);r.setInitialFocusOn(this.getCurriculumItemFromQuery());Object(he["u"])(r,"isUpdateOrderErrorShown",this.showUpdateOrderError)}componentDidMount(){this.props.store.fetchCurriculum().catch(Fd)}getCurriculumItemFromQuery(){const e=Object(Bd["d"])(window.location);const t=Number(e.lectureId);if(t){return{_class:lh["m"].lecture,id:t}}const r=Number(e.quizId);if(r){return{_class:lh["m"].quiz,type:lh["y"].simpleQuiz,id:r}}const n=Number(e.practiceTestId);if(n){return{_class:lh["m"].quiz,type:lh["y"].practiceTest,id:n}}const i=Number(e.codingExerciseId);if(i){return{_class:lh["m"].quiz,type:lh["y"].codingExercise,id:i}}const o=Number(e.assignmentId);if(o){return{_class:lh["m"].assignment,id:o}}return null}showUpdateOrderError(){const e=this.props.store;if(e.isUpdateOrderErrorShown){Object(Ui["b"])(gettext("There was an error saving the numbering of the curriculum. "+"Please reload the page at your earliest convenience."))}}onDeleteCurriculumItemConfirm(){this.props.store.deleteCurriculumItem().catch(Fd)}render(){const e=this.props.store;if(e.loadingState!==lh["p"].loaded){return l.a.createElement(S,null)}const t=this.props.store.course.organization_id;const r=N_.brand.has_organization;const n=this.props.store.pageStore.isCourseVersionEnabled;return l.a.createElement(i["c"],{store:e},l.a.createElement("div",null,l.a.createElement("div",{className:"curriculum-editor--alert-container--zgMwN"},!t&&l.a.createElement(zy,{className:"curriculum-editor--alert--3Ed1K"}),l.a.createElement(tb,{className:"curriculum-editor--alert--3Ed1K"}),l.a.createElement(Xy,{className:"curriculum-editor--alert--3Ed1K"}),l.a.createElement(Jy,{className:"curriculum-editor--alert--3Ed1K"}),l.a.createElement(Uy,{className:"curriculum-editor--alert--3Ed1K"}),l.a.createElement(E_,{className:"curriculum-editor--info--31DNc"}),!t&&l.a.createElement("p",{className:"curriculum-editor--info--31DNc","data-purpose":"free-course-message"},l.a.createElement(m["b"],{html:gettext("Start putting together your course by creating sections, lectures "+'and practice activities (<a class="practice">quizzes, coding exercises and assignments</a>). '+'Use your <a class="outline">course outline</a> to structure your content '+"and label your sections and lectures clearly."),interpolate:{practice:l.a.createElement("a",{className:"ud-link-underline",href:"/udemy-teach-hub/course_creation_practice_activities/",target:"_blank",rel:"noopener noreferrer"}),outline:l.a.createElement("a",{className:"ud-link-underline",href:"/udemy-teach-hub/course_creation_outline_course/",target:"_blank",rel:"noopener noreferrer"})}})," ",ninterpolate("If you’re intending to offer your course for free, the total length of video content must be less than %(hours)s hour.","If you’re intending to offer your course for free, the total length of video content must be less than %(hours)s hours.",bs["b"],{hours:bs["b"]})),e.course.isDevelopmentCourse&&l.a.createElement(ob,null)),n&&l.a.createElement("div",{className:"curriculum-editor--bulk-container--2cGXT"},l.a.createElement(P_,{acceptAudio:r,acceptPresentation:r})),l.a.createElement(y_,null),!e.inlineInsertEnabled&&l.a.createElement("div",{className:"curriculum-editor--add-item-forms--1H8nN"},l.a.createElement(Ly,null)),l.a.createElement(pe["a"],{onCancel:e.closeDeleteCurriculumItemConfirmation,onConfirm:this.onDeleteCurriculumItemConfirm,isOpen:!!e.toBeDeletedCurriculumItem},gettext("You are about to remove a curriculum item. Are you sure you want to continue?"))))}},R_.propTypes={store:a.a.object.isRequired},R_),babelHelpers.applyDecoratedDescriptor(j_.prototype,"showUpdateOrderError",[f["a"]],Object.getOwnPropertyDescriptor(j_.prototype,"showUpdateOrderError"),j_.prototype),babelHelpers.applyDecoratedDescriptor(j_.prototype,"onDeleteCurriculumItemConfirm",[f["a"]],Object.getOwnPropertyDescriptor(j_.prototype,"onDeleteCurriculumItemConfirm"),j_.prototype),j_))||I_)||I_);var M_=r("./src/udemy/js/base-components/dialog/ajax-modal.react-component.js");class q_ extends s["Component"]{render(){return l.a.createElement(yo["a"],{trigger:l.a.createElement(le["a"],{name:"export",udStyle:"secondary"},gettext("Export lectures")),renderModal:e=>l.a.createElement(M_["a"],Object.assign({},e,{labelledById:"export-lectures-title",url:this.props.popupUrl}))})}}q_.propTypes={popupUrl:a.a.string.isRequired};var U_,H_,F_;const B_=Object(Rp["a"])();let z_=Object(i["f"])(U_=(H_=(F_=class e extends s["Component"]{async onClickPublish(){await this.props.pageStore.publishChanges()}renderActionButtons(){const e=B_.brand.has_organization;const t=this.props.exportLecturesUrl;const r=this.props.pageStore.isCourseVersionEnabled;return l.a.createElement(l.a.Fragment,null,t?l.a.createElement(q_,{popupUrl:t}):null,!r&&l.a.createElement(P_,{acceptAudio:e,acceptPresentation:e}),r&&l.a.createElement(l.a.Fragment,null,l.a.createElement(le["a"],{className:"ud-link-neutral ud-link-underline",udStyle:"ghost"},gettext("Preview changes")),l.a.createElement(le["a"],{onClick:this.onClickPublish},gettext("Publish changes"))))}render(){return l.a.createElement(bn["a"],{title:gettext("Curriculum"),actionButtons:this.renderActionButtons()})}},F_.propTypes={exportLecturesUrl:a.a.string,pageStore:a.a.object.isRequired},F_.defaultProps={exportLecturesUrl:undefined},F_),babelHelpers.applyDecoratedDescriptor(H_.prototype,"onClickPublish",[f["a"]],Object.getOwnPropertyDescriptor(H_.prototype,"onClickPublish"),H_.prototype),H_))||U_;var V_,W_;const G_=e=>{let{url:t}=e;return l.a.createElement(le["a"],{componentClass:"a",udStyle:"white-outline",size:"small",href:t,target:"_blank",rel:"noopener noreferrer"},gettext("Preview"))};G_.propTypes={url:a.a.string.isRequired};const K_=e=>{let{studentUrl:t,instructorUrl:r}=e;return l.a.createElement(de["a"],{placement:"bottom-end",trigger:l.a.createElement(de["a"].Button,{udStyle:"white-outline",size:"small"},gettext("Preview"))},l.a.createElement(de["a"].Menu,null,l.a.createElement(de["a"].MenuItem,{componentClass:"div",href:r,target:"_blank",rel:"noopener noreferrer"},gettext("As Instructor")),l.a.createElement(de["a"].MenuItem,{componentClass:"div",href:t,target:"_blank",rel:"noopener noreferrer"},gettext("As Student"))))};K_.propTypes={instructorUrl:a.a.string.isRequired,studentUrl:a.a.string.isRequired};let $_=Object(i["f"])(V_=(W_=class e extends s["Component"]{render(){const{wasPublished:e,learnUrl:t}=this.props;const r=`${t}?instructorPreviewMode=instructor_v4`;const n=`${t}?instructorPreviewMode=student_v4`;return e?l.a.createElement(G_,{url:r}):l.a.createElement(K_,{studentUrl:n,instructorUrl:r})}},W_.propTypes={wasPublished:a.a.bool.isRequired,learnUrl:a.a.string.isRequired},W_))||V_;var X_,Y_;let Q_=(X_=(Y_=class e extends s["Component"]{constructor(e){super(e);this.props.pageStore.setHeaderActions(this.renderHeaderButtons);this.curriculumStore=e.curriculumStore||new Ff(this.props)}componentDidMount(){this.props.pageStore.getContentLengthVideo()}componentWillUnmount(){this.props.pageStore.cleanHeaderActions(this.renderHeaderButtons);this.props.pageStore.updateMenuCheckbox()}renderHeaderButtons(){if(this.curriculumStore.loadingState!==lh["p"].loaded){return null}return l.a.createElement($_,{learnUrl:this.props.pageStore.course.learnUrl,wasPublished:this.curriculumStore.course.wasPublished})}render(){const e=this.props.exportLecturesUrl;return l.a.createElement(i["c"],{store:this.curriculumStore},l.a.createElement("div",{className:"full-width-lines"},l.a.createElement(z_,{pageStore:this.props.pageStore,exportLecturesUrl:e}),l.a.createElement(d["a"],null,l.a.createElement(L_,null))))}},Y_.propTypes={pageStore:a.a.object.isRequired,courseId:a.a.number.isRequired,exportLecturesUrl:a.a.string,curriculumStore:a.a.object},Y_.defaultProps={curriculumStore:null},Y_.defaultProps={exportLecturesUrl:undefined},Y_),babelHelpers.applyDecoratedDescriptor(X_.prototype,"renderHeaderButtons",[f["a"]],Object.getOwnPropertyDescriptor(X_.prototype,"renderHeaderButtons"),X_.prototype),X_);var J_=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var Z_=r.n(J_);var ex=r("./node_modules/@udemy/icons/dist/settings.ud-icon");var tx=r.n(ex);var rx=r("./src/udemy/js/course-manage-v2/full-page-takeover-header.less");var nx,ix;let ox=Object(i["f"])(nx=(ix=class e extends s["Component"]{render(){if(!this.props.pageStore.courseLoaded){return null}const{course:e,headerActions:t}=this.props.pageStore;return l.a.createElement("div",{className:"cm-full-page-takeover-header full-page-takeover-header--row--22wJg full-page-takeover-header--header--yZv70"},l.a.createElement("div",null,l.a.createElement(le["a"],{udStyle:"ghost",size:"small",typography:"ud-text-md",componentClass:"a",href:"/instructor/courses",className:"full-page-takeover-header--back-btn--1vdpz","aria-label":gettext("Back to courses")},l.a.createElement(Z_.a,{label:false,size:"medium"}),l.a.createElement("span",{"aria-hidden":true,className:"full-page-takeover-header--back-to-courses--nsJ3P"},gettext("Back to courses")))),l.a.createElement("div",{className:"full-page-takeover-header--flex--2wYRF full-page-takeover-header--row--22wJg full-page-takeover-header--content--3dgJE"},l.a.createElement("div",{className:"full-page-takeover-header--flex--2wYRF full-page-takeover-header--row--22wJg full-page-takeover-header--left--2LtYt"},l.a.createElement("h1",{className:"ud-heading-lg full-page-takeover-header--title--x4F1h","data-purpose":"course-title"},e.title),l.a.createElement(ms["a"],{className:"full-page-takeover-header--status--2cjmy"},e.statusLabel),l.a.createElement(m["b"],{html:interpolate(e.canTogglePublishedState?gettext('<span class="duration">%(duration)s</span> of video content published'):gettext('<span class="duration">%(duration)s</span> of video content uploaded'),true),interpolate:{duration:l.a.createElement(fw["a"],{numSeconds:e.contentLengthVideo,precision:fw["a"].PRECISION.MINUTES})}})),t&&t(),e.canEdit&&l.a.createElement(ce["a"],{udStyle:"ghost",size:"small",componentClass:y["a"],to:"/settings",className:"full-page-takeover-header--settings-btn--2HIwO"},l.a.createElement(tx.a,{size:"medium",label:gettext("Course Settings")}))))}},ix.propTypes={pageStore:a.a.shape({action:a.a.string,subaction:a.a.string,headerActions:a.a.func,courseLoaded:a.a.bool,course:a.a.shape({title:a.a.string,qualityStatus:a.a.string,statusLabel:a.a.string,learnUrl:a.a.string,visibleInstructors:i["b"].arrayOrObservableArray,canEdit:a.a.bool,isLive:a.a.bool,contentLengthVideo:a.a.number})})},ix.defaultProps={pageStore:{action:"",subaction:"",headerActions:Xe["a"],course:{title:"",qualityStatus:"",statusLabel:"",learnUrl:"",visibleInstructors:[],canEdit:false,isLive:false,contentLengthVideo:0}}},ix))||nx;var ax=r("./src/udemy/js/course-manage-v2/live-chat/live-chat.react-component.js");var sx,lx,cx,ux,px,dx,hx,mx;const fx=["welcomeMessage","completionMessage"];let gx=(sx=he["t"].ref,lx=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"text",cx,this);babelHelpers.initializerDefineProperty(this,"date",ux,this);babelHelpers.initializerDefineProperty(this,"isDirty",px,this);babelHelpers.initializerDefineProperty(this,"isWarning",dx,this);babelHelpers.initializerDefineProperty(this,"errors",hx,this);this.type=e}},cx=babelHelpers.applyDecoratedDescriptor(lx.prototype,"text",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),ux=babelHelpers.applyDecoratedDescriptor(lx.prototype,"date",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),px=babelHelpers.applyDecoratedDescriptor(lx.prototype,"isDirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),dx=babelHelpers.applyDecoratedDescriptor(lx.prototype,"isWarning",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),hx=babelHelpers.applyDecoratedDescriptor(lx.prototype,"errors",[sx],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),lx);let yx=(mx=class e{constructor(e){this.welcomeMessage=new gx("welcome");this.completionMessage=new gx("complete");this.courseId=e}get saveEnabled(){return this.welcomeMessage.isDirty||this.completionMessage.isDirty}get isWarning(){return this.welcomeMessage.isWarning||this.completionMessage.isWarning}updateMessageContent(e,t){if(e===this.welcomeMessage.type){this.welcomeMessage.text=t;this.welcomeMessage.isDirty=true}else if(e===this.completionMessage.type){this.completionMessage.text=t;this.completionMessage.isDirty=true}}getMessages(){return Qe["f"].get(`/courses/${this.courseId}/course-messages/`).then(Object(he["e"])((e=>{fx.forEach((t=>{this.updateMessageFromResponse(e.data.results,this[t])}))}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}updateMessageFromResponse(e,t){const r=e.filter((e=>e.message_type===t.type));if(r.length){t.text=r[0].content;t.date=new Date(r[0].modified).toLocaleDateString(Object(Xi["a"])().locale.replace("_","-")||"en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}}saveMessages(){const e=[];fx.forEach((t=>{if(this[t].isDirty){const r={message_type:this[t].type,content:this[t].text};if(this[t].isWarning){r.errors_only=true}this[t].errors=[];this[t].date="";this[t].isWarning=false;e.push(r)}}));return Qe["f"].post(`/courses/${this.courseId}/course-messages/`,e).then(Object(he["e"])((()=>{fx.forEach((e=>{this[e].isDirty=false}));Object(Ui["c"])(gettext("Your changes have been successfully saved."))}))).catch((e=>{this.handleErrors(e.response)}))}handleErrors(e){if(e.status!=400){Object(Ui["b"])(Qe["g"]);return}fx.forEach((t=>{const r=e.data[this[t].type];this[t].isDirty=false;if(r&&r.errors){this[t].errors=r.errors.content;this[t].isWarning=!!r.isWarning;if(r.isWarning){this[t].isDirty=true}}}))}},babelHelpers.applyDecoratedDescriptor(mx.prototype,"saveEnabled",[he["g"]],Object.getOwnPropertyDescriptor(mx.prototype,"saveEnabled"),mx.prototype),babelHelpers.applyDecoratedDescriptor(mx.prototype,"isWarning",[he["g"]],Object.getOwnPropertyDescriptor(mx.prototype,"isWarning"),mx.prototype),babelHelpers.applyDecoratedDescriptor(mx.prototype,"updateMessageContent",[he["e"]],Object.getOwnPropertyDescriptor(mx.prototype,"updateMessageContent"),mx.prototype),babelHelpers.applyDecoratedDescriptor(mx.prototype,"updateMessageFromResponse",[he["e"]],Object.getOwnPropertyDescriptor(mx.prototype,"updateMessageFromResponse"),mx.prototype),babelHelpers.applyDecoratedDescriptor(mx.prototype,"saveMessages",[he["e"]],Object.getOwnPropertyDescriptor(mx.prototype,"saveMessages"),mx.prototype),babelHelpers.applyDecoratedDescriptor(mx.prototype,"handleErrors",[he["e"]],Object.getOwnPropertyDescriptor(mx.prototype,"handleErrors"),mx.prototype),mx);var bx=r("./src/udemy/js/course-manage-v2/messages/messages.less");var vx,wx,Ex;const Sx=e=>{let{isWarning:t,isSaveEnabled:r,onSaveForm:n}=e;return l.a.createElement(le["a"],{udStyle:"white-solid",size:"small",disabled:!r,onClick:n},t?gettext("Proceed"):gettext("Save"))};Sx.propTypes={isWarning:a.a.bool.isRequired,isSaveEnabled:a.a.bool.isRequired,onSaveForm:a.a.func.isRequired};const _x=Object(i["f"])((e=>{let{message:t,onChangeText:r}=e;const n={welcome:gettext("Welcome Message"),complete:gettext("Congratulations Message")};let i=null;let o="neutral";if(t.date){i=interpolate(gettext("Last edited on %(date)s"),{date:t.date},true)}const a=Array.isArray(t.errors)?t.errors.join(" "):t.errors;if(a){i=l.a.createElement("div",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"course-message:error",domPurifyConfig:{ADD_ATTR:["target"]},html:a})));o="error"}return l.a.createElement(ji["b"],{label:n[t.type],note:i,validationState:o},l.a.createElement(Lu["a"],{theme:Lu["a"].THEMES.COURSE_MESSAGE,autoFocus:true,value:t.text,onValueChange:r,withCounter:true,maxLength:1e3}))}));_x.propTypes={message:a.a.object.isRequired,onChangeText:a.a.func.isRequired};let xx=Object(i["f"])(vx=(wx=(Ex=class e extends s["Component"]{constructor(e){super(e);this.messagesStore=e.messagesStore||new yx(e.pageStore.course.id);e.pageStore.setHeaderActions(this.renderHeaderButtons)}componentDidMount(){this.messagesStore.getMessages()}componentWillUnmount(){this.props.pageStore.cleanHeaderActions(this.renderHeaderButtons)}onChangeWelcomeMessage(e){return this.messagesStore.updateMessageContent(this.messagesStore.welcomeMessage.type,e)}onChangeCompletionMessage(e){return this.messagesStore.updateMessageContent(this.messagesStore.completionMessage.type,e)}saveForm(){return this.messagesStore.saveMessages().then((()=>{this.props.pageStore.updateMenuCheckbox()}))}renderHeaderButtons(){return l.a.createElement(Sx,{isWarning:this.messagesStore.isWarning,isSaveEnabled:this.messagesStore.saveEnabled,onSaveForm:this.saveForm})}renderMessages(){const{completionMessage:e,welcomeMessage:t,saveEnabled:r}=this.messagesStore;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{"data-purpose":"section-description"},gettext("Write messages to your students (optional) that will be sent "+"automatically when they join or complete your course to encourage students "+"to engage with course content. If you do not wish to send a welcome or "+"congratulations message, leave the text box blank.")),l.a.createElement("form",{className:"messages--form--Iu05m"},l.a.createElement(_x,{message:t,onChangeText:this.onChangeWelcomeMessage}),l.a.createElement(_x,{message:e,onChangeText:this.onChangeCompletionMessage})),l.a.createElement(Hu,{when:r}))}render(){return l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Course messages")}),l.a.createElement(d["a"],null,this.renderMessages()))}},Ex.propTypes={pageStore:a.a.object.isRequired,messagesStore:a.a.object},Ex.defaultProps={messagesStore:null},Ex),babelHelpers.applyDecoratedDescriptor(wx.prototype,"onChangeWelcomeMessage",[f["a"]],Object.getOwnPropertyDescriptor(wx.prototype,"onChangeWelcomeMessage"),wx.prototype),babelHelpers.applyDecoratedDescriptor(wx.prototype,"onChangeCompletionMessage",[f["a"]],Object.getOwnPropertyDescriptor(wx.prototype,"onChangeCompletionMessage"),wx.prototype),babelHelpers.applyDecoratedDescriptor(wx.prototype,"saveForm",[f["a"]],Object.getOwnPropertyDescriptor(wx.prototype,"saveForm"),wx.prototype),babelHelpers.applyDecoratedDescriptor(wx.prototype,"renderHeaderButtons",[f["a"]],Object.getOwnPropertyDescriptor(wx.prototype,"renderHeaderButtons"),wx.prototype),wx))||vx;var Dx=r("./src/udemy/js/base-components/ungraduated/comments/comment-thread.react-component.js");var Cx=r("./src/udemy/js/course-manage-v2/quality-feedback/criteria-comment-text-to-html.js");var Tx=r("./src/udemy/js/course-manage-v2/quality-feedback/qrp-feedback-panel-group.less");var Ox,kx,Px;const Ax={"./qrp-feedback-panel-group.less":{"panel-group-title":"qrp-feedback-panel-group--panel-group-title--puIln","panel-group-subtitle":"qrp-feedback-panel-group--panel-group-subtitle--2u-Mc","panel-group":"qrp-feedback-panel-group--panel-group--baql7",panel:"qrp-feedback-panel-group--panel--3lPlJ","panel-header":"qrp-feedback-panel-group--panel-header--3KN2k","panel-title":"qrp-feedback-panel-group--panel-title--3uM0v","toggle-fixed-btn-container":"qrp-feedback-panel-group--toggle-fixed-btn-container--3m2pl","solution-text":"qrp-feedback-panel-group--solution-text--3uZJg",exceptional:"qrp-feedback-panel-group--exceptional--1Zs9k","needs-fix":"qrp-feedback-panel-group--needs-fix--6Qi2F",acceptable:"qrp-feedback-panel-group--acceptable--21o88","marked-as-fixed":"qrp-feedback-panel-group--marked-as-fixed--oWrPy"}};let Ix=Object(i["f"])(Ox=(kx=(Px=class e extends l.a.Component{onTogglePanel(e){this.props.qualityFeedbackStore.setIsFeedbackOpen(this.props.feedback,e)}onToggleIsMarkedAsFixed(e){e.stopPropagation();this.props.qualityFeedbackStore.toggleIsFeedbackMarkedAsFixed(this.props.feedback)}onCreateComment(){const{feedback:e,qualityFeedbackStore:t}=this.props;if(!e.is_marked_as_fixed&&(e.rating==="needs_fix"||e.rating==="acceptable")){t.toggleIsFeedbackMarkedAsFixed(e)}}renderTitle(e){let{children:t,...r}=e;const{feedback:n,qualityFeedbackStore:i}=this.props;const{review:o}=i;return l.a.createElement("div",{className:"qrp-feedback-panel-group--panel-header--3KN2k"},l.a.createElement("div",null,l.a.createElement("h3",r,t)),n.rating!=="exceptional"&&(o.status==="approved"||o.status==="needs_fixes")&&l.a.createElement("div",{className:"qrp-feedback-panel-group--toggle-fixed-btn-container--3m2pl"},l.a.createElement(le["a"],{udStyle:"ghost",size:"medium",typography:"ud-text-sm",onClick:this.onToggleIsMarkedAsFixed,disabled:n.isMarkingAsFixed},n.is_marked_as_fixed?gettext("Unmark as fixed"):gettext("Mark as fixed"))))}render(){const{feedback:e,qualityFeedbackStore:t}=this.props;const{review:r}=t;const{solution_text:n,solution_url:i}=e.quality_criteria;const o=e.rating!=="exceptional"&&e.is_marked_as_fixed;return l.a.createElement(Xo["a"].Panel,{expanded:e.isOpen,onToggle:this.onTogglePanel,title:l.a.createElement("span",{className:"ud-text-sm qrp-feedback-panel-group--panel-title--3uM0v"},l.a.createElement("span",null,gettext(e.quality_criteria.title)),o&&l.a.createElement("span",null,gettext("Addressed"))),renderTitle:this.renderTitle,className:er()(fr()("panel",{"marked-as-fixed":o}),Ax)},l.a.createElement("div",null,l.a.createElement(Dx["a"],{resourceUrl:`/quality-review-processes/${r.id}/quality-criteria-feedbacks/${e.id}/comments/`,commentThread:e.comment_thread,canReply:r.status==="needs_fixes"&&e.rating!=="exceptional",createCommentCallback:this.onCreateComment,textToHTML:Cx["a"]}),(n||i)&&l.a.createElement("p",{className:"ud-text-with-links qrp-feedback-panel-group--solution-text--3uZJg"},n,i&&" ",i&&l.a.createElement("a",{href:i},i))))}},Px.propTypes={qualityFeedbackStore:a.a.object.isRequired,feedback:a.a.object.isRequired},Px),babelHelpers.applyDecoratedDescriptor(kx.prototype,"onTogglePanel",[f["a"]],Object.getOwnPropertyDescriptor(kx.prototype,"onTogglePanel"),kx.prototype),babelHelpers.applyDecoratedDescriptor(kx.prototype,"onToggleIsMarkedAsFixed",[f["a"]],Object.getOwnPropertyDescriptor(kx.prototype,"onToggleIsMarkedAsFixed"),kx.prototype),babelHelpers.applyDecoratedDescriptor(kx.prototype,"onCreateComment",[f["a"]],Object.getOwnPropertyDescriptor(kx.prototype,"onCreateComment"),kx.prototype),babelHelpers.applyDecoratedDescriptor(kx.prototype,"renderTitle",[f["a"]],Object.getOwnPropertyDescriptor(kx.prototype,"renderTitle"),kx.prototype),kx))||Ox;var jx,Rx;const Nx={"./qrp-feedback-panel-group.less":{"panel-group-title":"qrp-feedback-panel-group--panel-group-title--puIln","panel-group-subtitle":"qrp-feedback-panel-group--panel-group-subtitle--2u-Mc","panel-group":"qrp-feedback-panel-group--panel-group--baql7",panel:"qrp-feedback-panel-group--panel--3lPlJ","panel-header":"qrp-feedback-panel-group--panel-header--3KN2k","panel-title":"qrp-feedback-panel-group--panel-title--3uM0v","toggle-fixed-btn-container":"qrp-feedback-panel-group--toggle-fixed-btn-container--3m2pl","solution-text":"qrp-feedback-panel-group--solution-text--3uZJg",exceptional:"qrp-feedback-panel-group--exceptional--1Zs9k","needs-fix":"qrp-feedback-panel-group--needs-fix--6Qi2F",acceptable:"qrp-feedback-panel-group--acceptable--21o88","marked-as-fixed":"qrp-feedback-panel-group--marked-as-fixed--oWrPy"}};let Lx=Object(i["f"])(jx=(Rx=class e extends l.a.Component{renderNeedsFixHeading(){const e=this.props.qualityFeedbackStore.unresolvedNeedsFixFeedbacksCount;let t;if(e>0){t=ninterpolate("You have %(count)s item to be addressed afterwhich you can resubmit your course for review.","You have %(count)s items to be addressed afterwhich you can resubmit your course for review.",e,{count:e})}else if(this.props.qualityFeedbackStore.review.status==="needs_fixes"){t=gettext("You have addressed all items. You can resubmit your course for review at the bottom of this page.")}else{t=gettext("You have addressed all items. Nicely done.")}return l.a.createElement("div",null,l.a.createElement("h3",{className:"ud-heading-md qrp-feedback-panel-group--panel-group-title--puIln"},gettext("Required fixes:")),t&&l.a.createElement("p",{className:"qrp-feedback-panel-group--panel-group-subtitle--2u-Mc"},t))}renderAcceptableHeading(){const e=this.props.qualityFeedbackStore.unresolvedAcceptableFeedbacksCount;let t;if(e>0){t=ninterpolate("You have %(count)s item that could be improved to increase your students’ engagement and conversion rates.","You have %(count)s items that could be improved to increase your students’ engagement and conversion rates.",e,{count:e})}else if(this.props.feedbacks.length>0){t=gettext("You have addressed all items. Nicely done.")}else{t=gettext("We don’t have any recommended improvements at this time. Nicely done.")}return l.a.createElement("div",null,l.a.createElement("h3",{className:"ud-heading-md qrp-feedback-panel-group--panel-group-title--puIln"},gettext("Recommended improvements:")),t&&l.a.createElement("p",{className:"qrp-feedback-panel-group--panel-group-subtitle--2u-Mc"},t))}renderExceptionalHeading(){return l.a.createElement("div",null,l.a.createElement("h3",{className:"ud-heading-md qrp-feedback-panel-group--panel-group-title--puIln"},gettext("Completed items:")))}render(){const{rating:e,feedbacks:t,qualityFeedbackStore:r}=this.props;return l.a.createElement("div",{className:er()(fr()("panel-group",{"needs-fix":e==="needs_fix",acceptable:e==="acceptable",exceptional:e==="exceptional"}),Nx)},e==="needs_fix"&&t.length>0&&this.renderNeedsFixHeading(),e==="acceptable"&&r.review.status!=="submitted_for_review"&&r.review.status!=="draft"&&this.renderAcceptableHeading(),e==="exceptional"&&t.length>0&&this.renderExceptionalHeading(),l.a.createElement(Xo["a"],null,t.map((e=>l.a.createElement(Ix,{key:e.id,feedback:e,qualityFeedbackStore:r})))))}},Rx.propTypes={qualityFeedbackStore:a.a.object.isRequired,feedbacks:a.a.array.isRequired,rating:a.a.oneOf(["needs_fix","acceptable","exceptional"]).isRequired},Rx))||jx;var Mx=r("./src/udemy/js/utils/server-or-client.ts");var qx,Ux,Hx,Fx,Bx,zx,Vx,Wx;let Gx=(qx=he["t"].ref,Ux=he["t"].ref,Hx=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"review",Fx,this);babelHelpers.initializerDefineProperty(this,"isReviewLoaded",Bx,this);babelHelpers.initializerDefineProperty(this,"feedbacks",zx,this);babelHelpers.initializerDefineProperty(this,"areFeedbacksLoaded",Vx,this);babelHelpers.initializerDefineProperty(this,"isResubmittingForReview",Wx,this);this.courseId=e}get needsFixFeedbacks(){return this.feedbacks.filter((e=>e.rating==="needs_fix"))}get acceptableFeedbacks(){return this.feedbacks.filter((e=>e.rating==="acceptable"))}get exceptionalFeedbacks(){return this.feedbacks.filter((e=>{const t=e.comment_thread.comments;return e.rating==="exceptional"&&!!(t&&t.length)}))}get unresolvedNeedsFixFeedbacksCount(){return this.needsFixFeedbacks.filter((e=>!e.is_marked_as_fixed)).length}get unresolvedAcceptableFeedbacksCount(){return this.acceptableFeedbacks.filter((e=>!e.is_marked_as_fixed)).length}async loadQRPFeedbacks(){try{const e=await Qe["f"].get(`/courses/${this.courseId}/`,{params:{"fields[course]":"quality_status,quality_review_process","fields[quality_review_process]":"last_submitted_date"},timeout:Qe["c"]});this._setQRPApiData(e.data);if(this.review.id){const e=await Qe["f"].get(`/quality-review-processes/${this.review.id}/quality-criteria-feedbacks/`,{params:{"fields[quality_criteria_feedback]":"comment_thread,is_marked_as_fixed,quality_criteria,rating","fields[quality_criteria]":"solution_url,solution_text,title"}});this._setFeedbacksApiData(e.data.results||[])}else{this._setFeedbacksApiData([])}}catch(e){Object(Ui["b"])(Qe["g"])}}_setQRPApiData(e){const t=e.quality_review_process;this.review={id:t&&t.id,lastSubmittedDate:t&&t.last_submitted_date,status:e.quality_status};this.isReviewLoaded=true}_setFeedbacksApiData(e){this.feedbacks=e.map((e=>{const t={...e,isMarkingAsFixed:false,isOpen:this._isFeedbackDefaultOpen(e)};Object(he["j"])(t,{is_marked_as_fixed:he["t"],isMarkingAsFixed:he["t"],isOpen:he["t"]});return t}));this.areFeedbacksLoaded=true}_isFeedbackDefaultOpen(e){if(e.rating==="needs_fix"&&!e.is_marked_as_fixed){return true}const t=e.comment_thread.comments||[];return t.length>0&&t[0].user.id!==yp["a"].id&&t.some((e=>e.user.id===yp["a"].id))}setIsFeedbackOpen(e,t){e.isOpen=t}async toggleIsFeedbackMarkedAsFixed(e){e.isMarkingAsFixed=true;try{await Qe["f"].patch(`/quality-review-processes/${this.review.id}/quality-criteria-feedbacks/${e.id}/`,{is_marked_as_fixed:!e.is_marked_as_fixed});Object(he["x"])((()=>{e.is_marked_as_fixed=!e.is_marked_as_fixed;e.isOpen=!e.is_marked_as_fixed;e.isMarkingAsFixed=false}))}catch(t){Object(he["x"])((()=>{e.isMarkingAsFixed=false}))}}get canResubmitForReview(){return this.unresolvedNeedsFixFeedbacksCount===0&&!this.isResubmittingForReview}async resubmitForReview(){if(this.canResubmitForReview){this.isResubmittingForReview=true;try{if(this.review.id){await Qe["f"].patch(`/quality-review-processes/${this.review.id}/`,{status:"resubmitted"})}else{await Qe["f"].post("/quality-review-processes/",{course:this.courseId})}Mx["a"].global.location.reload()}catch(e){Object(he["x"])((()=>{this.isResubmittingForReview=false}))}}}},Fx=babelHelpers.applyDecoratedDescriptor(Hx.prototype,"review",[qx],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),Bx=babelHelpers.applyDecoratedDescriptor(Hx.prototype,"isReviewLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),zx=babelHelpers.applyDecoratedDescriptor(Hx.prototype,"feedbacks",[Ux],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),Vx=babelHelpers.applyDecoratedDescriptor(Hx.prototype,"areFeedbacksLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Wx=babelHelpers.applyDecoratedDescriptor(Hx.prototype,"isResubmittingForReview",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"needsFixFeedbacks",[he["g"]],Object.getOwnPropertyDescriptor(Hx.prototype,"needsFixFeedbacks"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"acceptableFeedbacks",[he["g"]],Object.getOwnPropertyDescriptor(Hx.prototype,"acceptableFeedbacks"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"exceptionalFeedbacks",[he["g"]],Object.getOwnPropertyDescriptor(Hx.prototype,"exceptionalFeedbacks"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"unresolvedNeedsFixFeedbacksCount",[he["g"]],Object.getOwnPropertyDescriptor(Hx.prototype,"unresolvedNeedsFixFeedbacksCount"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"unresolvedAcceptableFeedbacksCount",[he["g"]],Object.getOwnPropertyDescriptor(Hx.prototype,"unresolvedAcceptableFeedbacksCount"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"_setQRPApiData",[he["e"]],Object.getOwnPropertyDescriptor(Hx.prototype,"_setQRPApiData"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"_setFeedbacksApiData",[he["e"]],Object.getOwnPropertyDescriptor(Hx.prototype,"_setFeedbacksApiData"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"setIsFeedbackOpen",[he["e"]],Object.getOwnPropertyDescriptor(Hx.prototype,"setIsFeedbackOpen"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"toggleIsFeedbackMarkedAsFixed",[he["e"]],Object.getOwnPropertyDescriptor(Hx.prototype,"toggleIsFeedbackMarkedAsFixed"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"canResubmitForReview",[he["g"]],Object.getOwnPropertyDescriptor(Hx.prototype,"canResubmitForReview"),Hx.prototype),babelHelpers.applyDecoratedDescriptor(Hx.prototype,"resubmitForReview",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(Hx.prototype,"resubmitForReview"),Hx.prototype),Hx);var Kx=r("./src/udemy/js/course-manage-v2/quality-feedback/quality-feedback.less");var $x,Xx;const Yx={year:"numeric",month:"long",day:"numeric"};const Qx={...Yx,hour:"2-digit",minute:"2-digit",second:"2-digit"};const Jx="/support/229604988/";let Zx=Object(i["f"])($x=(Xx=class e extends s["Component"]{constructor(e){super(e);this.store=new Gx(e.courseId)}componentDidMount(){this.store.loadQRPFeedbacks()}renderSubmittedDate(e,t,r){const n=Object(Xi["a"])().locale.replace("_","-")||"en-US";const i=new Date(t).toLocaleDateString(n,r);return l.a.createElement("p",null,interpolate(e,{date:i},true))}renderSubmitRow(e){if(e.status==="approved"&&this.store.unresolvedAcceptableFeedbacksCount>0){return l.a.createElement("div",Object.assign({className:"ud-text-with-links quality-feedback--resubmit-row--1xbY2"},Object(fe["a"])({descriptionOfCaller:"qrp-feedback:approved-cta",html:interpolate(gettext("Your course is live so it will not be re-reviewed "+"but feel free to <a %(attributes)s> email Instructor Support</a> "+"with any questions."),{attributes:'href="mailto:instructorsupport@udemy.com"'},true)})))}if(e.status==="needs_fixes"){let e=null;if(this.store.unresolvedNeedsFixFeedbacksCount>0){e=gettext("Please address all required fixes by replying or marking them "+"as fixed before resubmitting your course.")}else if(this.store.unresolvedAcceptableFeedbacksCount>0){e=gettext("Please address all recommended improvements you would like reviewed "+"prior to resubmitting your course.")}return l.a.createElement("div",{className:"quality-feedback--resubmit-row--1xbY2"},e,l.a.createElement("div",{className:"quality-feedback--resubmit-btn-row--3IO4l"},l.a.createElement(le["a"],{udStyle:"brand",onClick:this.store.resubmitForReview,disabled:!this.store.canResubmitForReview},gettext("Resubmit for review"))))}return null}renderFeedbacks(){const{review:e,areFeedbacksLoaded:t}=this.store;if(!t){return l.a.createElement(S,null)}return l.a.createElement("div",null,e.status==="approved"&&l.a.createElement("p",null,gettext("Congratulations, your course is now live in the marketplace!")),e.status==="needs_fixes"&&l.a.createElement("p",null,gettext("Almost there, there are a few required fixes we need you to "+"address before your course is published in the marketplace.")),(e.status==="in_review"||e.status==="submitted_for_final_review")&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"qrp-feedback:in-review-status",html:interpolate(gettext("Your course is currently being reviewed against our "+"<a %(attributes)s>quality standards</a>; we will notify "+"you once it has been completed. We will also provide "+"feedback to increase student engagement and conversion rates."),{attributes:`href="${Jx}"`},true)}))),e.lastSubmittedDate&&this.renderSubmittedDate(gettext("Your course was last submitted for review at: %(date)s."),e.lastSubmittedDate,Qx)),(e.status==="submitted_for_review"||e.status==="resubmitted")&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,gettext("Congratulations on finishing your course!")),l.a.createElement("p",{className:"quality-feedback--mt-lg--2xhvO"},gettext("You are just one step away from having your course published on "+"Udemy. You have successfully submitted your course for review. "+"Our team will review your course in the next 2 business days, "+"and get back to you.")),e.lastSubmittedDate&&this.renderSubmittedDate(gettext("You submitted your course for review on %(date)s."),e.lastSubmittedDate,Yx)),e.status==="draft"&&l.a.createElement("p",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"qrp-feedback:draft-status",html:interpolate(gettext("After submitting your course our team will review it against "+"our <a %(attributes)s>quality standards</a> and provide "+"feedback to increase student engagement and conversion rates."),{attributes:`href="${Jx}"`},true)}))),e.status!=="in_review"&&e.status!=="submitted_for_final_review"&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Lx,{rating:"needs_fix",feedbacks:this.store.needsFixFeedbacks,qualityFeedbackStore:this.store}),l.a.createElement(Lx,{rating:"acceptable",feedbacks:this.store.acceptableFeedbacks,qualityFeedbackStore:this.store}),l.a.createElement(Lx,{rating:"exceptional",feedbacks:this.store.exceptionalFeedbacks,qualityFeedbackStore:this.store}),this.renderSubmitRow(e)))}render(){const e=!this.store.isReviewLoaded;return l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Udemy feedback")}),l.a.createElement(d["a"],null,e?l.a.createElement(S,null):this.renderFeedbacks()))}},Xx.propTypes={courseId:a.a.number.isRequired},Xx))||$x;class eD extends s["Component"]{componentDidUpdate(e){const{location:t,history:r}=this.props;const n=["PUSH","REPLACE"].includes(r.action);const i=t.pathname!==e.location.pathname;if(n&&i){this.scrollTo()}}scrollTo(){if(window.pageYOffset){window.scrollTo(0,0)}}render(){return l.a.createElement("div",null,this.props.children)}}eD.propTypes={history:a.a.object.isRequired,location:a.a.object.isRequired};const tD=eD;var rD=Object(c["m"])(tD);var nD=r("./src/udemy/js/course-manage-v2/settings/course-settings.less");var iD,oD,aD,sD;let lD=(iD=Object(i["e"])("store"),iD(oD=Object(i["f"])(oD=(aD=(sD=class e extends s["Component"]{updateValue(e){this.props.store.certificateStore.updateCertificateEnabled(e.target.checked)}onSubmit(e){e.preventDefault();return this.props.store.certificateStore.saveCertificateEnabledStatus()}render(){if(!this.props.store.certificateStore){return null}if(!this.props.store.certificateStore.course.organizationId){return null}return l.a.createElement(d["a"],null,l.a.createElement("form",{className:"course-settings--line-length-md--TAr8U",onSubmit:this.onSubmit},l.a.createElement("h3",{className:"ud-heading-md"},gettext("Certificates")),l.a.createElement(Mr["a"],{name:"certificate",size:"large",checked:this.props.store.certificateStore.course.certificateEnabled,onChange:this.updateValue},gettext("Enable certificate")),l.a.createElement("p",{className:"course-settings--mt-sm--sJeTv"},gettext("When students finish your course, you have the option of providing "+"them with a digital certificate of completion containing your company logo.")),l.a.createElement("div",{className:"course-settings--mt-sm--sJeTv"},l.a.createElement(le["a"],{type:"submit",disabled:this.props.store.certificateStore.isSaving,"data-purpose":"save-certificate"},gettext("Save")))))}},sD.propTypes={store:a.a.object.isRequired},sD),babelHelpers.applyDecoratedDescriptor(aD.prototype,"updateValue",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(aD.prototype,"updateValue"),aD.prototype),babelHelpers.applyDecoratedDescriptor(aD.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(aD.prototype,"onSubmit"),aD.prototype),aD))||oD)||oD);var cD=r("./src/udemy/js/course-manage-v2/settings/course-eligibility-modal-form.react-component.js");var uD=r("./src/udemy/js/course-manage-v2/settings/course-instructors.react-component.js");var pD=r("./src/udemy/js/user-notification-preferences/notification-preferences.ts");var dD,hD,mD;let fD=(dD=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isSaving",hD,this);babelHelpers.initializerDefineProperty(this,"isDirty",mD,this);this.course=null;this.course=e}updateCertificateEnabled(e){this.course.certificateEnabled=e;this.isDirty=true}saveCertificateEnabledStatus(){this.isSaving=true;return Qe["f"].patch(`courses/${this.course.id}/`,{has_certificate:this.course.certificateEnabled}).then(Object(he["e"])((()=>{this.isSaving=false;this.isDirty=false;Object(Ui["c"])(gettext("Your changes have been successfully saved."))}))).catch(Object(he["e"])((()=>{this.isSaving=false;Object(Ui["b"])(Qe["g"])})))}},hD=babelHelpers.applyDecoratedDescriptor(dD.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),mD=babelHelpers.applyDecoratedDescriptor(dD.prototype,"isDirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(dD.prototype,"updateCertificateEnabled",[he["e"]],Object.getOwnPropertyDescriptor(dD.prototype,"updateCertificateEnabled"),dD.prototype),babelHelpers.applyDecoratedDescriptor(dD.prototype,"saveCertificateEnabledStatus",[he["e"]],Object.getOwnPropertyDescriptor(dD.prototype,"saveCertificateEnabledStatus"),dD.prototype),dD);var gD=r("./node_modules/@udemy/react-messaging-components/dist/esm/toaster/toaster.mobx-store.js");var yD,bD,vD,wD,ED,SD,_D,xD,DD,CD;let TD=(yD=class e{get isValidRevenue(){const e=0;return!this.course.isPaid||this.instructors.reduce(((e,t)=>e+t.revenue_share_percentage),e)===100}constructor(e){babelHelpers.initializerDefineProperty(this,"isLoading",bD,this);babelHelpers.initializerDefineProperty(this,"isSaving",vD,this);babelHelpers.initializerDefineProperty(this,"isDirty",wD,this);babelHelpers.initializerDefineProperty(this,"errors",ED,this);babelHelpers.initializerDefineProperty(this,"instructors",SD,this);babelHelpers.initializerDefineProperty(this,"pendingInstructors",_D,this);babelHelpers.initializerDefineProperty(this,"performanceAccessChanged",xD,this);babelHelpers.initializerDefineProperty(this,"instructorRemovedSelfManagePermission",DD,this);babelHelpers.initializerDefineProperty(this,"revokingInvitations",CD,this);this.course=null;this.defaultPermissionCodes=["instructor:edit_course","instructor:manage_captions","instructor:manage_course_qa","instructor:manage_course_assignments","instructor:view_course_revenue_report","instructor:manage_course_reviews","instructor:manage_course_performance"];this.defaultPermissions=this.defaultPermissionCodes.reduce(((e,t)=>{e[t]=false;return e}),{});this.course=e;this.fetchInstructors()}fetchInstructors(){this.errors.clear();this.isLoading=true;return Qe["f"].get(`/courses/${this.course.id}/course-has-instructors/`,{params:{"fields[course_has_instructor]":"@min,visible,is_owner,revenue_share_percentage","fields[user]":"@min,permissions",page_size:200}}).then(Object(he["e"])((e=>{let{data:t}=e;this.instructors=t.results.map((e=>{e.revenue_share_percentage=Math.round(e.revenue_share_percentage*this.course.instructorShareRatio);Object.assign(e,this.defaultPermissions);for(const t of e.user.permissions){e[t.permission]=true}return e}))}))).then(this.fetchPendingInstructors()).finally(Object(he["e"])((()=>{this.isLoading=false})))}fetchPendingInstructors(){return Qe["f"].get(`/users/me/taught-courses/${this.course.id}/co-instructor-invitations/`).then(Object(he["e"])((e=>{let{data:t}=e;this.pendingInstructors=t.results.map((e=>{e.revenue_share_percentage=0;Object.assign(e,this.defaultPermissions);for(const t of e.permissions){e[t]=true}return e}))})))}revokeInvitation(e){this.revokingInvitations.push(e);this.isDirty=true}addError(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.errors.push({message:e,isHTML:t})}deleteInstructor(e){this.instructors=this.instructors.filter((t=>t.user.id!==e));this.isDirty=true}save(){this.errors.clear();this.isSaving=true;const e=this.instructors.every((e=>!e.visible));if(e){this.isSaving=false;return this.addError(gettext("At least one instructor must be visible."))}const t=this._normaliseInstructors();const r=this._didInstructorRemoveTheirOwnManagePermission();return Qe["f"].post(`/courses/${this.course.id}/course-has-instructors/`,{course_has_instructors:t}).then((()=>Promise.all(this.revokingInvitations.map((e=>Qe["f"].patch(`/users/me/taught-courses/${this.course.id}/co-instructor-invitations/${e}/revoke/`)))))).then(Object(he["e"])((()=>{const e=this.performanceAccessChanged?gettext("Your changes have been successfully saved. It may take up to one day for Performance access to take effect."):gettext("Your changes have been successfully saved.");Object(Ui["c"])(e);this.setPerformanceAccessChanged(false);if(r){this.instructorRemovedSelfManagePermission=true}}))).catch(Object(he["e"])((e=>{var t,r;const n={udStyle:"error",title:gettext("Error"),body:gettext("An unknown error has occurred."),showCta:false};if((t=e.response)!==null&&t!==void 0&&(r=t.headers)!==null&&r!==void 0&&r["x-ui-message"]){n.body=e.response.headers["x-ui-message"]}gD["a"].addAlertBannerToast(n,{autoDismiss:true})}))).finally((async()=>{await this.fetchInstructors();Object(he["x"])((()=>{this.revokingInvitations.clear();this.isDirty=false;this.isSaving=false}))}))}_setValue(e,t,r){const n=this.instructors.find((e=>e.user.id==t));n[e]=r;this.isDirty=true}setVisible(e,t){this._setValue("visible",e,t)}setPermission(e,t,r){this._setValue(t,e,r);if(t==="instructor:manage_course_performance"){this.setPerformanceAccessChanged(true)}}setRevenuePercentage(e,t){this._setValue("revenue_share_percentage",e,t)}setPerformanceAccessChanged(e){this.performanceAccessChanged=e}_normaliseInstructors(){const e=this.instructors.map((e=>{const t=Math.round(e.revenue_share_percentage/this.course.instructorShareRatio*100)/100;const r={};for(const t of this.defaultPermissionCodes){r[t]=e[t]}return{instructor_id:e.user.id,visible:e.visible,revenue_share_percentage:t,permissions:r}}));return JSON.stringify(e)}_didInstructorRemoveTheirOwnManagePermission(){const e=this.instructors.find((e=>e.user.id===yp["a"].id));return!e["instructor:edit_course"]}},bD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"isLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),vD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"isSaving",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),wD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"isDirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),ED=babelHelpers.applyDecoratedDescriptor(yD.prototype,"errors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),SD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"instructors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),_D=babelHelpers.applyDecoratedDescriptor(yD.prototype,"pendingInstructors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),xD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"performanceAccessChanged",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),DD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"instructorRemovedSelfManagePermission",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),CD=babelHelpers.applyDecoratedDescriptor(yD.prototype,"revokingInvitations",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),babelHelpers.applyDecoratedDescriptor(yD.prototype,"isValidRevenue",[he["g"]],Object.getOwnPropertyDescriptor(yD.prototype,"isValidRevenue"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"fetchInstructors",[he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"fetchInstructors"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"fetchPendingInstructors",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"fetchPendingInstructors"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"revokeInvitation",[he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"revokeInvitation"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"addError",[he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"addError"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"deleteInstructor",[he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"deleteInstructor"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"save",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"save"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"_setValue",[he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"_setValue"),yD.prototype),babelHelpers.applyDecoratedDescriptor(yD.prototype,"setPerformanceAccessChanged",[he["e"]],Object.getOwnPropertyDescriptor(yD.prototype,"setPerformanceAccessChanged"),yD.prototype),yD);var OD,kD,PD,AD,ID;const jD="OPTION_PUBLIC";const RD="OPTION_PRIVATE_INVITE";const ND="OPTION_PRIVATE_PASSWORD";let LD=(OD=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isDirty",kD,this);babelHelpers.initializerDefineProperty(this,"optionState",PD,this);babelHelpers.initializerDefineProperty(this,"org",AD,this);babelHelpers.initializerDefineProperty(this,"saveInProgress",ID,this);this.course=null;this.course=e;this.updateOptionState()}updatePrivacySetting(e){this.isDirty=true;this.optionState=e;if(e!==ND){this.course.coursePassword=""}}updatePassword(e){this.isDirty=true;this.course.coursePassword=e}updateOptionState(){if(!this.course.isPrivate){this.optionState=jD}else if(this.course.coursePassword){this.optionState=ND}else{this.optionState=RD}}get private(){return this.optionState!==jD}get dropDownHelpText(){if(this.optionState===ND){return interpolate(gettext("If a course's enrollment page is password protected, the course "+"won't show up in search results on %(orgTitle)s. Instead, share "+"the course URL and password directly with students you want to "+"enroll. Keep in mind this provides only a low level of security. "+"Students could share your course URL with an embedded password."),{orgTitle:this.orgTitle},true)}if(this.optionState===RD){return interpolate(gettext("If a course's enrollment page is invitation only, the course won't "+"show up in search results on %(orgTitle)s. Accept new student "+'requests and send invitations from the "Students" page found '+'under "Course Management" in the left navigation.'),{orgTitle:this.orgTitle},true)}if(this.hasOrg){return interpolate(gettext("Public courses are public to all users within %(orgTitle)s. "+"They show up in search results and are available for "+"anyone to take inside %(orgTitle)s."),{orgTitle:this.orgTitle},true)}return gettext("Public courses show up in search results and are "+"available for anyone to take on Udemy.")}get showPassword(){return this.optionState===ND}get validationState(){if(this.course.coursePassword){return"neutral"}return"error"}get orgTitle(){if(this.course.organizationTitle){return`${this.course.organizationTitle} Portal`}return"Udemy"}get hasOrg(){return!!this.course.organizationTitle}get saveDisabled(){return this.optionState===ND&&!this.course.coursePassword||this.saveInProgress}savePrivacySettings(){if(this.isDirty){this.saveInProgress=true;const e={is_private:this.private};if(this.course.coursePassword){e.password=this.course.coursePassword}return Qe["f"].patch(`/courses/${this.course.id}/`,e).then(Object(he["e"])((()=>{Object(Ui["c"])(gettext("Your changes have been successfully saved."));this.isDirty=false;this.saveInProgress=false}))).catch(Object(he["e"])((e=>{let t;if(e.response){t=e.response.data.is_private}else{t=e.message}t&&Object(Ui["a"])(t);this.saveInProgress=false})))}Object(Ui["c"])(gettext("There are no changes to save."))}},kD=babelHelpers.applyDecoratedDescriptor(OD.prototype,"isDirty",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),PD=babelHelpers.applyDecoratedDescriptor(OD.prototype,"optionState",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return jD}}),AD=babelHelpers.applyDecoratedDescriptor(OD.prototype,"org",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),ID=babelHelpers.applyDecoratedDescriptor(OD.prototype,"saveInProgress",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(OD.prototype,"updatePrivacySetting",[he["e"]],Object.getOwnPropertyDescriptor(OD.prototype,"updatePrivacySetting"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"updatePassword",[he["e"]],Object.getOwnPropertyDescriptor(OD.prototype,"updatePassword"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"updateOptionState",[he["e"]],Object.getOwnPropertyDescriptor(OD.prototype,"updateOptionState"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"private",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"private"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"dropDownHelpText",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"dropDownHelpText"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"showPassword",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"showPassword"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"validationState",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"validationState"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"orgTitle",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"orgTitle"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"hasOrg",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"hasOrg"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"saveDisabled",[he["g"]],Object.getOwnPropertyDescriptor(OD.prototype,"saveDisabled"),OD.prototype),babelHelpers.applyDecoratedDescriptor(OD.prototype,"savePrivacySettings",[he["e"]],Object.getOwnPropertyDescriptor(OD.prototype,"savePrivacySettings"),OD.prototype),OD);var MD,qD,UD,HD,FD,BD,zD,VD;const WD="OPTION_PUBLIC";const GD="OPTION_PRIVATE_INVITE";const KD="OPTION_PRIVATE_PASSWORD";let $D=(MD=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"course",qD,this);babelHelpers.initializerDefineProperty(this,"courseLoaded",UD,this);babelHelpers.initializerDefineProperty(this,"instructorStore",HD,this);babelHelpers.initializerDefineProperty(this,"integrationStore",FD,this);babelHelpers.initializerDefineProperty(this,"privacyStore",BD,this);babelHelpers.initializerDefineProperty(this,"certificateStore",zD,this);babelHelpers.initializerDefineProperty(this,"showOrganizationEligibleForm",VD,this);this.pageStore=e}isDirty(){return this.instructorStore!==null&&this.instructorStore.isDirty||this.integrationStore!==null&&this.integrationStore.isDirty||this.privacyStore!==null&&this.privacyStore.isDirty||this.certificateStore!==null&&this.certificateStore.isDirty}setUnpublished(){this.pageStore.refreshPublishCourseStatus()}openShowOrganizationEligibleForm(){this.showOrganizationEligibleForm=true}closeShowOrganizationEligibleForm(){this.showOrganizationEligibleForm=false}async leaveCourse(){return Qe["f"].post(`/users/me/taught-courses/${this.course.id}/remove-from-instructors/`,{})}fetchFields(){return Qe["f"].get(`/courses/${this.pageStore.course.id}/`,{params:{"fields[course]":"is_paid,instructor_share_ratio,"+"is_in_any_ufb_content_collection,can_delete,organization_id,"+"organization_title,is_private,available_features,"+"has_org_only_setting,notification_settings,is_owner,"+"is_organization_eligible,title,can_not_delete_reason,course_password"},timeout:Qe["c"]})}getCourseSettings(){return Promise.all([this.fetchFields()]).then(Object(he["e"])((e=>{const t=e[0];Object(he["l"])(this.course,{id:t.data.id,isPaid:t.data.is_paid,title:t.data.title,isOwner:t.data.is_owner,instructorShareRatio:t.data.instructor_share_ratio,isInContentSubscription:t.data.is_in_any_ufb_content_collection,canDelete:t.data.can_delete,canNotDeleteReason:t.data.can_not_delete_reason,organizationId:t.data.organization_id,organizationTitle:t.data.organization_title,isPrivate:t.data.is_private,coursePassword:t.data.course_password||"",certificateEnabled:t.data.available_features.includes(Jd["m"].CERTIFICATE),hasOrgOnlySetting:t.data.has_org_only_setting,userNotifications:t.data.notification_settings,isOrganizationEligible:Boolean(t.data.is_organization_eligible)});this.courseLoaded=true;this.instructorStore=new TD(this.course);this.privacyStore=new LD(this.course);this.certificateStore=new fD(this.course)}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}get isCoursePublished(){return this.pageStore.course.isPublished}get isUfoContentSubscriptionAgreed(){return this.pageStore.isUfoContentSubscriptionAgreed}updateUserNotification(e,t){pD["c"].set(e,t,this.course.id).then(Object(he["e"])((()=>{this.course.userNotifications[e.typeCode]=t;Object(Ui["c"])(gettext("Your changes have been successfully saved."))}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}},qD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"course",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),UD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"courseLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),HD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"instructorStore",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),FD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"integrationStore",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),BD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"privacyStore",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),zD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"certificateStore",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),VD=babelHelpers.applyDecoratedDescriptor(MD.prototype,"showOrganizationEligibleForm",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(MD.prototype,"setUnpublished",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(MD.prototype,"setUnpublished"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"openShowOrganizationEligibleForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(MD.prototype,"openShowOrganizationEligibleForm"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"closeShowOrganizationEligibleForm",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(MD.prototype,"closeShowOrganizationEligibleForm"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"leaveCourse",[he["e"]],Object.getOwnPropertyDescriptor(MD.prototype,"leaveCourse"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"getCourseSettings",[he["e"]],Object.getOwnPropertyDescriptor(MD.prototype,"getCourseSettings"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"isCoursePublished",[he["g"]],Object.getOwnPropertyDescriptor(MD.prototype,"isCoursePublished"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"isUfoContentSubscriptionAgreed",[he["g"]],Object.getOwnPropertyDescriptor(MD.prototype,"isUfoContentSubscriptionAgreed"),MD.prototype),babelHelpers.applyDecoratedDescriptor(MD.prototype,"updateUserNotification",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(MD.prototype,"updateUserNotification"),MD.prototype),MD);var XD,YD,QD,JD;let ZD=(XD=Object(i["e"])("store"),XD(YD=Object(i["f"])(YD=(QD=(JD=class e extends s["Component"]{updateSettings(e){this.props.store.privacyStore.updatePrivacySetting(e.target.value)}updatePassword(e){this.props.store.privacyStore.updatePassword(e.target.value)}onSubmit(e){e.preventDefault();this.props.store.privacyStore.savePrivacySettings()}renderUFBText(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"ud-heading-md course-settings--mb-xs--12IKD"},gettext("Enrollment (Privacy)")),l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext("This course is part of the Udemy Business "+"Content Collection. If you wish to make this course "+"private please contact the Udemy Business team at: "+'<a class="emailLink">ufbcontent@udemy.com</a>.'),interpolate:{emailLink:l.a.createElement("a",{className:"ud-link-underline",href:"mailto:ufbcontent@udemy.com"})}})))}renderDropDownForm(){return l.a.createElement("form",{className:"course-settings--line-length-md--TAr8U course-settings--privacy-form--3HMRJ",onSubmit:this.onSubmit},l.a.createElement(ji["b"],{label:gettext("Enrollment (Privacy)"),labelProps:{typography:"ud-heading-md"}},l.a.createElement(rc["a"],{name:"privacy",onChange:this.updateSettings,value:this.props.store.privacyStore.optionState},l.a.createElement("option",{value:WD},gettext("Public")),l.a.createElement("option",{value:GD},gettext("Private (Invitation Only)")),l.a.createElement("option",{value:KD},gettext("Private (Password Protected)")))),this.props.store.privacyStore.showPassword&&l.a.createElement(ji["b"],{label:gettext("Password"),labelProps:{className:"ud-sr-only"},note:gettext("Password needs to be non-blank"),validationState:this.props.store.privacyStore.validationState},l.a.createElement(Ii["b"],{placeholder:gettext("Password"),onChange:this.updatePassword,value:this.props.store.privacyStore.course.coursePassword})),l.a.createElement("p",{className:"course-settings--mt-md--2jxjR"},this.props.store.privacyStore.dropDownHelpText),l.a.createElement("div",{className:"course-settings--mt-sm--sJeTv"},l.a.createElement(le["a"],{type:"submit",disabled:this.props.store.privacyStore.saveDisabled},gettext("Save"))))}render(){if(!this.props.store.privacyStore){return null}return l.a.createElement(d["a"],null,this.props.store.privacyStore.course.isInContentSubscription?this.renderUFBText():this.renderDropDownForm())}},JD.propTypes={store:a.a.object.isRequired},JD),babelHelpers.applyDecoratedDescriptor(QD.prototype,"updateSettings",[f["a"]],Object.getOwnPropertyDescriptor(QD.prototype,"updateSettings"),QD.prototype),babelHelpers.applyDecoratedDescriptor(QD.prototype,"updatePassword",[f["a"]],Object.getOwnPropertyDescriptor(QD.prototype,"updatePassword"),QD.prototype),babelHelpers.applyDecoratedDescriptor(QD.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(QD.prototype,"onSubmit"),QD.prototype),QD))||YD)||YD);const eC=Object.freeze({HAS_WORKSPACE_ASSOCIATED:"has_workspace_associated",HAS_ENROLLMENTS:"has_enrollments"});var tC,rC,nC;let iC=Object(i["f"])(tC=(rC=(nC=class e extends s["Component"]{deleteCourse(e){e();return Qe["f"].delete(`/courses/${this.props.courseId}/`).then((()=>{this.props.window.location.href="/instructor/courses/?flash=delete"})).catch((()=>{Object(Ui["b"])(Qe["g"])}))}renderDeleteReasonMessage(){const e=this.props.canNotDeleteReason;if(this.props.hasOrganization){return gettext("If you delete your course it will be removed permanently.")}if(e.includes(eC.HAS_WORKSPACE_ASSOCIATED)&&e.includes(eC.HAS_ENROLLMENTS)){return gettext("We promise students lifetime access, so courses cannot be deleted after students have enrolled. "+"Additionally, this course is linked to a workspace, and courses with a workspace enabled cannot be deleted.")}if(e.includes(eC.HAS_WORKSPACE_ASSOCIATED)){return gettext("This course is linked to a workspace, and courses with a workspace enabled cannot be deleted.")}return gettext("We promise students lifetime access, so courses cannot be deleted after students have enrolled.")}render(){return l.a.createElement("div",{className:"course-settings--mt-md--2jxjR course-settings--danger-row--1XwRT"},l.a.createElement(yo["a"],{trigger:l.a.createElement(le["a"],{udStyle:"secondary",className:"course-settings--danger-btn--3HaPI",size:"small",disabled:this.props.disabled},gettext("Delete")),renderModal:e=>{let{isOpen:t,onClose:r}=e;return l.a.createElement(pe["a"],{isOpen:t,title:gettext("Delete Your Course?"),onCancel:r,confirmText:gettext("Yes"),cancelText:gettext("No"),onConfirm:()=>this.deleteCourse(r)},gettext("Are you sure you want to delete this course? This is permanent and cannot be undone."))}}),l.a.createElement("p",{className:"course-settings--danger-info--1QX0i"},this.renderDeleteReasonMessage()))}},nC.propTypes={courseId:a.a.number.isRequired,disabled:a.a.bool,hasOrganization:a.a.bool,canNotDeleteReason:i["b"].arrayOrObservableArrayOf(a.a.string),window:a.a.object},nC.defaultProps={disabled:false,hasOrganization:false,canNotDeleteReason:[],window:window},nC),babelHelpers.applyDecoratedDescriptor(rC.prototype,"deleteCourse",[f["a"]],Object.getOwnPropertyDescriptor(rC.prototype,"deleteCourse"),rC.prototype),rC))||tC;var oC,aC;let sC=Object(i["f"])(oC=(aC=class e extends s["Component"]{onChange(e,t){return()=>this.props.store.updateUserNotification(pD["b"][e],t)}render(){if(!this.props.store.courseLoaded){return null}const e=this.props.store.course.userNotifications;return l.a.createElement(de["a"],{placement:"bottom-end",menuWidth:"fullWidth",trigger:l.a.createElement(de["a"].Button,null,gettext("Manage Email Notifications"))},l.a.createElement(de["a"].Menu,null,Object.keys(e).sort().filter((e=>e!=="disableAllEmails")).map((t=>l.a.createElement(de["a"].MenuItem,{key:t,componentClass:Mr["a"],checked:e[t],onChange:this.onChange(t,!e[t]),onClick:()=>false,disabled:e.disableAllEmails,"data-purpose":`user-notification-checkbox-${t}`},pD["b"][t].title)))))}},aC.propTypes={store:a.a.object.isRequired},aC))||oC;var lC,cC,uC,pC;let dC=Object(c["m"])(lC=Object(i["f"])(lC=(cC=(pC=class e extends s["Component"]{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"forceDisabled",uC,this)}UNSAFE_componentWillReceiveProps(e){if(this.forceDisabled&&e.disabled!==this.props.disabled){Object(he["x"])((()=>{this.forceDisabled=false}))}}unpublishCourse(e){this.forceDisabled=true;e();return Qe["f"].patch(`/courses/${this.props.courseId}/`,{is_published:false}).then((()=>{Object(Ui["c"])(gettext("Your course has been unpublished."));this.props.onUnpublish()})).catch(Object(he["e"])((()=>{Object(Ui["b"])(Qe["g"]);this.forceDisabled=false})))}render(){const{disabled:e,hasOrganization:t}=this.props;return l.a.createElement("div",{className:"course-settings--mt-md--2jxjR course-settings--danger-row--1XwRT"},l.a.createElement(yo["a"],{trigger:l.a.createElement(le["a"],{udStyle:"secondary",className:"course-settings--danger-btn--3HaPI",size:"small",disabled:this.forceDisabled||e},gettext("Unpublish")),renderModal:e=>{let{isOpen:t,onClose:r}=e;return l.a.createElement(pe["a"],{isOpen:t,title:gettext("Unpublish Your Course?"),onCancel:r,confirmText:gettext("Yes"),cancelText:gettext("No"),onConfirm:()=>this.unpublishCourse(r)},gettext("Are you sure you want to unpublish this course?"))}}),l.a.createElement("p",{className:"course-settings--danger-info--1QX0i"},t?gettext("Users cannot find your course via search, "+"but users that have already enrolled can still access content."):gettext("New students cannot find your course via search, but existing students can "+"still access content.")))}},pC.propTypes={courseId:a.a.number.isRequired,disabled:a.a.bool,hasOrganization:a.a.bool,onUnpublish:a.a.func.isRequired,window:a.a.object},pC.defaultProps={disabled:false,hasOrganization:false,window:window},pC),uC=babelHelpers.applyDecoratedDescriptor(cC.prototype,"forceDisabled",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(cC.prototype,"unpublishCourse",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(cC.prototype,"unpublishCourse"),cC.prototype),cC))||lC)||lC;var hC,mC;const fC=Object(Rp["a"])();function gC(e){const t={statusHeader:null,organizationSubHeader:null,organizationTerms:null};if(e.isCoursePublished){if(e.course.isInContentSubscription||e.course.hasOrgOnlySetting){t.statusHeader=l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext("This course is published on the Udemy marketplace and Udemy "+"Business. If you wish to delete or unpublish this course please "+"contact the Udemy Business team at: "+'<a class="ufbEmailLink">ufbcontent@udemy.com</a>'),interpolate:{ufbEmailLink:l.a.createElement("a",{className:"ud-link-underline",href:"mailto:ufbcontent@udemy.com"})}}));t.organizationSubHeader=l.a.createElement("p",null,gettext("You have opted in to the Udemy Business Program and have agreed to "+"make all of your courses eligible for inclusion in the Collection."))}else if(e.isUfoContentSubscriptionAgreed&&e.course.isOrganizationEligible){t.statusHeader=l.a.createElement("p",null,gettext("This course is published on the Udemy marketplace and is eligible for "+"Udemy Business."));t.organizationSubHeader=l.a.createElement("p",null,gettext("You have opted in to the Udemy Business Program and have agreed to "+"make all of your courses eligible for inclusion in the Collection. "+"(Note that opting in to these programs does not guarantee "+"participation.)"));t.organizationTerms=l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext('The <a class="termsLink">terms</a> for the Udemy Business '+"Program include certain exclusivity and termination "+"requirements. If you believe this course does not meet these "+'requirements, please <a class="eligibleForm">let us know</a>.'),interpolate:{termsLink:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"https://support.udemy.com/hc/en-us/articles/115013339928#ufb-en"}),eligibleForm:l.a.createElement(le["a"],{className:"ud-link-underline",udStyle:"link",typography:"ud-text-md",onClick:e.openShowOrganizationEligibleForm})}}))}else if(e.isUfoContentSubscriptionAgreed&&!e.course.isOrganizationEligible){t.statusHeader=l.a.createElement("p",null,gettext("This course is published on the Udemy marketplace."));t.organizationSubHeader=l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext("You have opted in to the Udemy Business Program but have "+"indicated to us that this course is not eligible for "+"inclusion in the Collection because it does not meet our "+'<a class="termsLink">terms</a>.'),interpolate:{termsLink:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"https://support.udemy.com/hc/en-us/articles/115013339928#ufb-en"})}}));t.organizationTerms=l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext("If you believe this is no longer the case, please "+'<a class="eligibleForm">let us know.</a>'),interpolate:{eligibleForm:l.a.createElement(le["a"],{className:"ud-link-underline",udStyle:"link",typography:"ud-text-md",onClick:e.openShowOrganizationEligibleForm})}}))}else if(!e.isUfoContentSubscriptionAgreed){t.statusHeader=l.a.createElement("p",null,gettext("This course is published on the Udemy marketplace."));t.organizationSubHeader=l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext("You have not opted in to the Udemy Business Program. If you "+"would like to opt in, please update your "+'<a class="promotionalLink">promotional agreements</a>.'),interpolate:{promotionalLink:l.a.createElement("a",{className:"ud-link-underline",target:"_blank",rel:"noopener noreferrer",href:"https://www.udemy.com/user/edit-promotional-agreements/"})}}))}}else if(e.course.isInContentSubscription){t.statusHeader=l.a.createElement("p",null,l.a.createElement(m["b"],{html:gettext("This course is not published on the Udemy marketplace but is still "+"published on Udemy Business. If you wish to delete or "+"unpublish this course from Udemy Business please contact us"+' at: <a class="ufbEmailLink">ufbcontent@udemy.com</a>.'),interpolate:{ufbEmailLink:l.a.createElement("a",{className:"ud-link-underline",href:"mailto:ufbcontent@udemy.com"})}}));t.organizationSubHeader=l.a.createElement("p",null,gettext("You have opted in to the Udemy Business Program and have agreed to make "+"all of your courses eligible for inclusion in the Collection."))}else{t.statusHeader=l.a.createElement("p",null,gettext("This course is not published on the Udemy marketplace."))}return t}const yC=Object(i["f"])((e=>{let{store:t}=e;if(!t.courseLoaded){return null}const r=t.course;const{statusHeader:n,organizationSubHeader:i,organizationTerms:o}=gC(t);const a=fC.brand.has_organization;const s=[!a&&l.a.createElement(l.a.Fragment,{key:"status-section"},l.a.createElement("h3",{className:"ud-heading-md course-settings--mb-xs--12IKD"},gettext("Course Status")),n),!r.isInContentSubscription&&!r.hasOrgOnlySetting&&l.a.createElement(l.a.Fragment,{key:"buttons-section"},l.a.createElement(dC,{courseId:r.id,disabled:!t.isCoursePublished,hasOrganization:Boolean(r.organizationId),onUnpublish:t.setUnpublished}),l.a.createElement(iC,{courseId:r.id,disabled:!r.canDelete,hasOrganization:Boolean(r.organizationId),canNotDeleteReason:r.canNotDeleteReason})),t.course.isOwner&&!a&&(i||o)&&l.a.createElement(l.a.Fragment,{key:"ub-section"},l.a.createElement("h3",{className:"ud-heading-md course-settings--mt-lg--pOlhd course-settings--mb-xs--12IKD"},gettext("Udemy Business Program")),i,o)].filter(Boolean);return!s.length?null:l.a.createElement(d["a"],null,l.a.createElement(cD["a"],{courses:[t.course],isOpen:t.showOrganizationEligibleForm,onClose:t.closeShowOrganizationEligibleForm}),l.a.createElement("div",{className:"course-settings--danger-zone--_lK8a"},s))}));yC.propTypes={store:a.a.object.isRequired};let bC=Object(i["f"])(hC=(mC=class e extends s["Component"]{constructor(e){super(e);this.store=e.store||new $D(e.pageStore)}componentDidMount(){this.store.getCourseSettings()}renderActionButtons(){return l.a.createElement(sC,{store:this.store})}render(){const e=this.store.courseLoaded&&this.store.isDirty();return l.a.createElement(i["c"],{store:this.store},l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Settings"),actionButtons:this.renderActionButtons()}),l.a.createElement(yC,{store:this.store}),l.a.createElement(ZD,null),l.a.createElement(uD["b"],null),l.a.createElement(lD,null),l.a.createElement(Hu,{when:e})))}},mC.propTypes={courseId:a.a.number.isRequired,pageStore:a.a.object.isRequired,store:a.a.object},mC.defaultProps={store:undefined},mC))||hC;var vC=r("./src/udemy/js/instructor-verification/events.js");var wC=r("./src/udemy/js/instructor-verification/instructor-verification-ajax-modal.react-component.js");var EC=r("./src/udemy/js/instructor-verification/verification-flow-store-context.js");const SC="https://";const _C="https://www.udemy.com";const xC=gettext("WARNING: Once you set your course URL it CANNOT BE CHANGED");const DC=gettext("NOTE: When you press the button below, the Udemy team will begin the "+"review process. Upon completion, students will be able to enroll in your course at your current price: %(price)s");const CC=gettext("NOTE: When you press the button below, your course "+"will be published. Students will be able to enroll in your course at your current price: %(price)s");const TC=gettext("Publish This Course");const OC=gettext("Why can't I submit for review?");const kC=gettext("Request Publishing Course");const PC=gettext("Submit for Review");const AC=gettext("Custom Category");const IC=gettext("You're ready to submit your course for review. Just hit 'Submit for review' below.");const jC=gettext("You're ready to publish your course. Just select a topic and hit 'Publish Course' below.");const RC=gettext("Once you complete these steps, you will be able to successfully submit your course for review.");const NC="https://www.udemy.com/support/229604268/";const LC=gettext("You're almost ready to submit your course. Here are a few more items you need.");const MC=gettext("Course URL should be between 8 and 70 characters and not a number.");const qC=gettext("No Category");const UC="some-url-for-your-course";const HC="───";const FC="coursePublish";var BC=r("./src/udemy/js/utils/escape/escape-html.js");var zC,VC;const WC=e=>{let{errorMessages:t}=e;return l.a.createElement("ul",{"data-purpose":"error-message"},t.map(((e,t)=>l.a.createElement("li",{key:t},e))))};WC.propTypes={errorMessages:i["b"].arrayOrObservableArray.isRequired};const GC=e=>{let{missingPublishRequirements:t}=e;return l.a.createElement("ul",{className:"ud-text-with-links"},Object.keys(t).filter((e=>!!t[e].error_messages)).map(((e,r)=>l.a.createElement("li",{key:r},l.a.createElement("p",null,l.a.createElement(m["b"],{html:interpolate(gettext('On the <a class="pageLink">%(pageName)s</a> page, you must'),{pageName:Object(BC["a"])(e)},true),interpolate:{pageLink:l.a.createElement("a",{href:t[e].url,target:"_blank",rel:"noopener noreferrer"})}})),l.a.createElement(WC,{"data-purpose":"error-list",errorMessages:t[e].error_messages})))))};GC.propTypes={missingPublishRequirements:a.a.object.isRequired};let KC=Object(i["f"])(zC=(VC=class e extends s["Component"]{render(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{"data-purpose":"publish-almost-ready"},LC),l.a.createElement(GC,{missingPublishRequirements:this.props.missingPublishRequirements}),l.a.createElement("p",null,RC),l.a.createElement("p",{className:"ud-text-with-links"},l.a.createElement(m["b"],{"data-purpose":"publish-support-link",html:gettext('Still having problems? <a class="pageLink">Check out this Support page</a>'),interpolate:{pageLink:l.a.createElement("a",{href:NC,target:"_blank",rel:"noopener noreferrer"})}})))}},VC.propTypes={missingPublishRequirements:a.a.object.isRequired},VC))||zC;var $C,XC,YC,QC,JC,ZC,eT,tT,rT,nT,iT,oT,aT,sT,lT,cT,uT;let pT=($C=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isModalOpen",XC,this);babelHelpers.initializerDefineProperty(this,"errors",YC,this);babelHelpers.initializerDefineProperty(this,"price",QC,this);babelHelpers.initializerDefineProperty(this,"domainURL",JC,this);babelHelpers.initializerDefineProperty(this,"isPracticeTestCourse",ZC,this);babelHelpers.initializerDefineProperty(this,"organizationId",eT,this);babelHelpers.initializerDefineProperty(this,"publishRequirementsComplete",tT,this);babelHelpers.initializerDefineProperty(this,"initialized",rT,this);babelHelpers.initializerDefineProperty(this,"orgCategories",nT,this);babelHelpers.initializerDefineProperty(this,"URIValue",iT,this);babelHelpers.initializerDefineProperty(this,"URIPlaceholder",oT,this);babelHelpers.initializerDefineProperty(this,"missingPublishRequirements",aT,this);babelHelpers.initializerDefineProperty(this,"selectedOrgCategory",sT,this);babelHelpers.initializerDefineProperty(this,"isOrgAdmin",lT,this);babelHelpers.initializerDefineProperty(this,"isSubmitting",cT,this);babelHelpers.initializerDefineProperty(this,"wasPublished",uT,this);this.pageStore=e.pageStore}getCourse(){return Qe["f"].get(`/courses/${this.pageStore.course.id}/`,{params:{"fields[course]":"organization_id,is_practice_test_course,organization_domain,"+"are_publish_requirements_completed,default_publish_title,published_time,"+"missing_publish_requirements,base_price_detail,published_title,is_organization_admin"}}).then(Object(he["e"])((e=>{this.initializeValues(e.data)}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}initializeValues(e){this.isPracticeTestCourse=e.is_practice_test_course;this.organizationId=e.organization_id;this.missingPublishRequirements=e.missing_publish_requirements;this.publishRequirementsComplete=e.are_publish_requirements_completed;this.publishedTitle=e.published_title;this.wasPublished=Boolean(e.published_time);if(e.base_price_detail){this.price=e.base_price_detail.price_string}else{this.price=gettext("Free")}if(this.organizationId){this.getUFBCategories();this.domainURL=`${SC}${e.organization_domain}`;this.URIValue="";this.URIPlaceholder=UC;this.isOrgAdmin=e.is_organization_admin}else{this.domainURL=_C;this.URIValue=e.default_publish_title;this.URIPlaceholder="";this.initialized=true}}getUFBCategories(){return Qe["f"].get(`/organizations/${this.organizationId}/categories/`,{params:{}}).then(Object(he["e"])((e=>{this.orgCategories=e.data.results.filter((e=>e.is_in_content_subscription===false));this.orgCategories=[{id:0,title:qC},{title:HC},...this.orgCategories];this.selectedOrgCategory=0;this.initialized=true}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}getUrlAfterPublishUFB(){if(!this.isOrgAdmin){return null}const e=this.publishedTitle||this.URIValue;return{url:g["a"].toCourseTaking(e),isInCourseManageApp:false}}getUrlAfterPublishNotUFB(){if(this.isPracticeTestCourse||this.wasPublished){return null}return{url:"/feedback/",isInCourseManageApp:true}}get urlAfterPublish(){return this.organizationId?this.getUrlAfterPublishUFB():this.getUrlAfterPublishNotUFB()}publishOrSubmitCourse(){this.isSubmitting=true;const e={};if(this.URIValue){e.published_title=this.URIValue}if(this.orgCategories&&this.selectedOrgCategory){e.org_custom_category_id=this.selectedOrgCategory}return Qe["f"].patch(`/courses/${this.pageStore.course.id}/publish/`,e).then(Object(he["e"])((()=>{Object(Ui["c"])(gettext("Your changes have been successfully saved."));bu["a"].publishEvent(new wu["b"]({courseId:this.pageStore.course.id,category:"publish",action:"click",objectType:null,objectId:null}));this.closeModal();this.pageStore.refreshPublishCourseStatus();return this.urlAfterPublish}))).catch(Object(he["e"])((e=>{this.isSubmitting=false;this.errors=Object(Qe["j"])(e);if(e.response&&e.response.data&&Object.keys(e.response.data).length>0){Object(Ui["a"])(gettext("Your changes have not been saved. Please address the issues."))}else{Object(Ui["b"])(Qe["g"])}})))}setURIValue(e){if(this.errors){this.errors={}}this.URIValue=e}openModal(){this.initialized=false;this.errors={};this.isSubmitting=false;this.isModalOpen=true}closeModal(){this.isModalOpen=false}setSelectedOrganizationCategory(e){this.selectedOrgCategory=e&&parseInt(e,10)}get modalTitle(){if(this.publishRequirementsComplete){if(this.isPracticeTestCourse||this.organizationId){return TC}return PC}return OC}get modalButtonText(){if(this.isPracticeTestCourse||this.organizationId&&this.isOrgAdmin){return TC}else if(this.organizationId){return kC}return PC}get noteText(){let e=DC;if(this.isPracticeTestCourse){e=CC}return interpolate(e,{price:this.price},true)}validate(){const e={};if(!this.publishedTitle){if(!isNaN(this.URIValue)||this.URIValue.length<8||this.URIValue.length>70){e.published_title=[MC]}}this.errors=e;return Object.keys(e).length===0}},XC=babelHelpers.applyDecoratedDescriptor($C.prototype,"isModalOpen",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),YC=babelHelpers.applyDecoratedDescriptor($C.prototype,"errors",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),QC=babelHelpers.applyDecoratedDescriptor($C.prototype,"price",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),JC=babelHelpers.applyDecoratedDescriptor($C.prototype,"domainURL",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),ZC=babelHelpers.applyDecoratedDescriptor($C.prototype,"isPracticeTestCourse",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),eT=babelHelpers.applyDecoratedDescriptor($C.prototype,"organizationId",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),tT=babelHelpers.applyDecoratedDescriptor($C.prototype,"publishRequirementsComplete",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),rT=babelHelpers.applyDecoratedDescriptor($C.prototype,"initialized",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),nT=babelHelpers.applyDecoratedDescriptor($C.prototype,"orgCategories",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),iT=babelHelpers.applyDecoratedDescriptor($C.prototype,"URIValue",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),oT=babelHelpers.applyDecoratedDescriptor($C.prototype,"URIPlaceholder",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),aT=babelHelpers.applyDecoratedDescriptor($C.prototype,"missingPublishRequirements",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),sT=babelHelpers.applyDecoratedDescriptor($C.prototype,"selectedOrgCategory",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),lT=babelHelpers.applyDecoratedDescriptor($C.prototype,"isOrgAdmin",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),cT=babelHelpers.applyDecoratedDescriptor($C.prototype,"isSubmitting",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),uT=babelHelpers.applyDecoratedDescriptor($C.prototype,"wasPublished",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor($C.prototype,"getCourse",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"getCourse"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"initializeValues",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"initializeValues"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"getUFBCategories",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"getUFBCategories"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"urlAfterPublish",[he["g"]],Object.getOwnPropertyDescriptor($C.prototype,"urlAfterPublish"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"publishOrSubmitCourse",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"publishOrSubmitCourse"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"setURIValue",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"setURIValue"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"openModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"openModal"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"closeModal",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"closeModal"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"setSelectedOrganizationCategory",[f["a"],he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"setSelectedOrganizationCategory"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"modalTitle",[he["g"]],Object.getOwnPropertyDescriptor($C.prototype,"modalTitle"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"modalButtonText",[he["g"]],Object.getOwnPropertyDescriptor($C.prototype,"modalButtonText"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"noteText",[he["g"]],Object.getOwnPropertyDescriptor($C.prototype,"noteText"),$C.prototype),babelHelpers.applyDecoratedDescriptor($C.prototype,"validate",[he["e"]],Object.getOwnPropertyDescriptor($C.prototype,"validate"),$C.prototype),$C);class dT extends fm["a"]{constructor(e){let{courseId:t,state:r,action:n}=e;super("CoursePublishUserActionEvent");this.courseId=t;this.state=r;this.action=n}}function hT(e){bu["a"].publishEvent(e)}var mT=r("./src/udemy/js/course-manage-v2/course-publish/course-publish-modal.less");var fT,gT,yT;const bT={"./course-publish-modal.less":{"mt-sm":"course-publish-modal--mt-sm--27p_Z","mt-lg":"course-publish-modal--mt-lg--E6MMI",form:"course-publish-modal--form--1QStl","url-prefix":"course-publish-modal--url-prefix--1EAqz"}};let vT=Object(c["m"])(fT=Object(i["f"])(fT=(gT=(yT=class e extends s["Component"]{closeModal(){hT(new dT({courseId:this.props.store.pageStore.courseId,state:"submitForReviewModal",action:"close"}));this.props.store.closeModal()}onURIChange(e){this.props.store.setURIValue(e.target.value)}onOrgCategorySelect(e){this.props.store.setSelectedOrganizationCategory(e.target.value)}getValidationProps(e){const t=(this.props.store.errors||{})[e];if(t&&t.length){const e=l.a.createElement("div",Object.assign({className:"ud-text-with-links"},Object(fe["a"])({descriptionOfCaller:"course-publish-modal:error",domPurifyConfig:{ADD_ATTR:["target"]},html:t.join("<br />")})));return{validationState:"error",note:e}}return{}}onSubmit(e){hT(new dT({courseId:this.props.store.pageStore.courseId,state:"submitForReviewModal",action:"next"}));const{store:t,history:r,window:n}=this.props;e.preventDefault();if(t.validate()){t.publishOrSubmitCourse().then((e=>{if(e){if(e.isInCourseManageApp){r.push(e.url)}else{n.location.href=e.url}}}))}}renderUFBCategories(e){const t=this.props.store;if(t.organizationId){return l.a.createElement(ji["b"],Object.assign({label:AC},this.getValidationProps("ufb_category"),{className:er()(e,bT)}),l.a.createElement(rc["a"],{"data-purpose":"org-category-select",title:gettext("Organization category"),value:t.selectedOrganizationCategory,onChange:this.onOrgCategorySelect},(t.orgCategories||[]).map(((e,t)=>l.a.createElement("option",{key:t,value:e.id!==undefined?e.id:"invalid",disabled:e.id===undefined},e.title)))))}return null}renderReadyToSubmit(){const e=this.props.store;if(e.organizationId){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{"data-purpose":"org-ready-to-submit"},jC),this.renderUFBCategories("mt-lg"))}return l.a.createElement("div",null,IC)}renderPublishBody(){const e=this.props.store;if(e.publishedTitle){return this.renderReadyToSubmit()}return l.a.createElement(l.a.Fragment,null,l.a.createElement(ji["b"],Object.assign({label:gettext("Course URL"),note:MC},this.getValidationProps("published_title")),l.a.createElement(Ni["a"],{"data-purpose":"url-input"},l.a.createElement(Ni["a"].Addon,{className:"course-publish-modal--url-prefix--1EAqz"},`${e.domainURL}/course/`),l.a.createElement(Ii["b"],{placeholder:e.URIPlaceholder,value:e.URIValue,onChange:this.onURIChange}))),l.a.createElement("div",{className:"ud-text-bold course-publish-modal--mt-sm--27p_Z"},xC),this.renderUFBCategories("mt-sm"),e.organizationId?null:l.a.createElement("div",{"data-purpose":"note-text",className:"course-publish-modal--mt-sm--27p_Z"},e.noteText))}renderMissingRequirementsBody(){const e=this.props.store;if(e.missingPublishRequirements){return l.a.createElement(KC,{missingPublishRequirements:e.missingPublishRequirements})}return null}renderSubmitButton(){if(this.props.store.publishRequirementsComplete){return l.a.createElement(ze["a"],null,l.a.createElement(le["a"],{udStyle:"brand",type:"submit",disabled:this.props.store.isSubmitting},this.props.store.modalButtonText))}return null}render(){return l.a.createElement(Fe["a"],{isOpen:this.props.store.isModalOpen,onClose:this.closeModal,title:this.props.store.modalTitle,loading:!this.props.store.initialized},this.props.store.initialized&&l.a.createElement("form",{onSubmit:this.onSubmit,className:"course-publish-modal--form--1QStl"},this.props.store.publishRequirementsComplete?this.renderPublishBody():this.renderMissingRequirementsBody(),this.renderSubmitButton()))}},yT.propTypes={store:a.a.instanceOf(pT).isRequired,history:a.a.object.isRequired,window:a.a.object},yT.defaultProps={window:window},yT),babelHelpers.applyDecoratedDescriptor(gT.prototype,"closeModal",[f["a"]],Object.getOwnPropertyDescriptor(gT.prototype,"closeModal"),gT.prototype),babelHelpers.applyDecoratedDescriptor(gT.prototype,"onURIChange",[f["a"]],Object.getOwnPropertyDescriptor(gT.prototype,"onURIChange"),gT.prototype),babelHelpers.applyDecoratedDescriptor(gT.prototype,"onOrgCategorySelect",[f["a"]],Object.getOwnPropertyDescriptor(gT.prototype,"onOrgCategorySelect"),gT.prototype),babelHelpers.applyDecoratedDescriptor(gT.prototype,"onSubmit",[f["a"]],Object.getOwnPropertyDescriptor(gT.prototype,"onSubmit"),gT.prototype),gT))||fT)||fT;var wT,ET,ST;let _T=Object(i["f"])(wT=(ET=(ST=class e extends s["Component"]{componentDidMount(){this.context.courseId=this.props.courseId;this.context.source=FC}openModal(){hT(new dT({courseId:this.props.courseId,state:this.props.publishAction,action:"click"}));this.props.store.openModal();this.props.store.getCourse()}publishButtonClick(){hT(new dT({courseId:this.props.courseId,state:this.props.publishAction,action:"click"}))}closeAjaxModal(){if(this.context&&this.context.store&&this.context.store.status){Object(vC["b"])(new vC["a"]({courseId:this.props.courseId,state:EC["a"][this.context.store.status],source:FC,action:"close",country:null,verificationType:null}))}this.props.store.pageStore.refreshPublishCourseStatus()}render(){if(!this.props.buttonUrl){return null}const{buttonUrl:e,className:t,store:r,publishTitle:n}=this.props;if(e.includes("verification")){return l.a.createElement("div",{key:"publish-button",className:t},l.a.createElement(EC["b"].Provider,{value:null},l.a.createElement(yo["a"],{onClose:this.closeAjaxModal,trigger:l.a.createElement(le["a"],{udStyle:"brand",onClick:this.publishButtonClick},n),renderModal:t=>l.a.createElement(wC["a"],Object.assign({},t,{url:e}))})))}return l.a.createElement("div",{className:t},l.a.createElement(le["a"],{udStyle:"brand",onClick:this.openModal,disabled:r.isModalOpen},n),l.a.createElement(vT,{store:r}))}},ST.propTypes={publishTitle:a.a.string.isRequired,publishAction:a.a.string.isRequired,buttonUrl:a.a.string.isRequired,courseId:a.a.number.isRequired,store:a.a.object.isRequired,className:a.a.string},ST.defaultProps={className:undefined},ST.contextType=EC["b"],ST),babelHelpers.applyDecoratedDescriptor(ET.prototype,"openModal",[f["a"]],Object.getOwnPropertyDescriptor(ET.prototype,"openModal"),ET.prototype),babelHelpers.applyDecoratedDescriptor(ET.prototype,"publishButtonClick",[f["a"]],Object.getOwnPropertyDescriptor(ET.prototype,"publishButtonClick"),ET.prototype),babelHelpers.applyDecoratedDescriptor(ET.prototype,"closeAjaxModal",[f["a"]],Object.getOwnPropertyDescriptor(ET.prototype,"closeAjaxModal"),ET.prototype),ET))||wT;var xT=r("./node_modules/@udemy/icons/dist/tick.ud-icon");var DT=r.n(xT);var CT=r("./node_modules/@udemy/react-messaging-components/dist/esm/notification-badge/notification-badge.react-component.js");var TT=r("./src/udemy/js/course-manage-v2/side-nav/side-nav.less");var OT,kT,PT;const AT={"./side-nav.less":{"side-nav":"side-nav--side-nav--h8FTL","nav-section":"side-nav--nav-section--2jHwe","nav-section-title":"side-nav--nav-section-title--Hq2Jb","nav-item-link":"side-nav--nav-item-link--2qfvl","nav-item":"side-nav--nav-item--3XyR4","publish-button":"side-nav--publish-button--yW0v1","nav-item-active":"side-nav--nav-item-active--10cLf",completion:"side-nav--completion--25WQ7","counter-container":"side-nav--counter-container--3ii4u",counter:"side-nav--counter--3ehTU","toggle-menu-btn":"side-nav--toggle-menu-btn--UZeDa",open:"side-nav--open--22jsc",nav:"side-nav--nav--6iscr","ud-ellipsis-1-line":"side-nav--ud-ellipsis-1-line--3iTD4","ud-btn-small":"side-nav--ud-btn-small--2TTCc","nav-sections":"side-nav--nav-sections--1OE5j"}};const IT=e=>{let{action:t,numInvitationRequests:r}=e;if(t==="students"&&r>0){return l.a.createElement("span",{className:"side-nav--counter-container--3ii4u"},l.a.createElement(CT["a"],{"data-purpose":"students-counter",className:"side-nav--counter--3ehTU",label:ninterpolate("%(count)s student invitation request","%(count)s student invitation requests",r,{count:r})},r))}return null};IT.propTypes={action:a.a.string.isRequired,numInvitationRequests:a.a.number};IT.defaultProps={numInvitationRequests:null};let jT=Object(c["m"])(OT=(kT=(PT=class e extends s["Component"]{isActive(e){return this.props.location.pathname.startsWith(e)}clickLink(){this.props.onNavClick();const{withCompletion:e,item:t,courseId:r}=this.props;if(!e||!t.action||t.completed===undefined){return}const n=t.subaction?`${t.action}-${t.subaction}`:t.action;bu["a"].publishEvent(new wu["b"]({courseId:r,category:n,action:"click",objectType:"course",objectId:r}))}render(){const{item:e,numInvitationRequests:t,withCompletion:r}=this.props;return l.a.createElement("li",{className:er()(fr()("nav-item",{"nav-item-active":this.isActive(e.url)}),AT)},l.a.createElement(y["a"],{className:"ud-link-neutral side-nav--nav-item-link--2qfvl","data-purpose":`react-nav-link-${e.action}`,to:e.url,onClick:this.clickLink},r&&l.a.createElement("span",{className:"side-nav--completion--25WQ7","aria-label":e.completed?gettext("Completed"):gettext("Incomplete")},e.completed&&l.a.createElement(DT.a,{label:false,size:"xsmall"})),l.a.createElement("span",null,e.title),l.a.createElement(IT,{action:e.action,numInvitationRequests:t})))}},PT.propTypes={item:a.a.object.isRequired,location:a.a.object.isRequired,onNavClick:a.a.func,numInvitationRequests:a.a.number,withCompletion:a.a.bool.isRequired,courseId:a.a.number.isRequired},PT.defaultProps={onNavClick:Xe["a"],numInvitationRequests:null},PT),babelHelpers.applyDecoratedDescriptor(kT.prototype,"clickLink",[f["a"]],Object.getOwnPropertyDescriptor(kT.prototype,"clickLink"),kT.prototype),kT))||OT;var RT,NT,LT,MT;const qT={"./side-nav.less":{"side-nav":"side-nav--side-nav--h8FTL","nav-section":"side-nav--nav-section--2jHwe","nav-section-title":"side-nav--nav-section-title--Hq2Jb","nav-item-link":"side-nav--nav-item-link--2qfvl","nav-item":"side-nav--nav-item--3XyR4","publish-button":"side-nav--publish-button--yW0v1","nav-item-active":"side-nav--nav-item-active--10cLf",completion:"side-nav--completion--25WQ7","counter-container":"side-nav--counter-container--3ii4u",counter:"side-nav--counter--3ehTU","toggle-menu-btn":"side-nav--toggle-menu-btn--UZeDa",open:"side-nav--open--22jsc",nav:"side-nav--nav--6iscr","ud-ellipsis-1-line":"side-nav--ud-ellipsis-1-line--3iTD4","ud-btn-small":"side-nav--ud-btn-small--2TTCc","nav-sections":"side-nav--nav-sections--1OE5j"}};const UT=e=>{let{menuList:t,menuItems:r,numInvitationRequests:n,courseId:i,onNavClick:o,withCompletion:a}=e;if(!a&&!t){return null}if(a&&!t){return l.a.createElement(FT,{menuItems:r,withCompletion:a,onNavClick:o,courseId:i})}const s=a?0:n;return l.a.createElement(HT,{menuList:t,numInvitationRequests:s,onNavClick:o,withCompletion:a,courseId:i})};UT.propTypes={menuList:a.a.object,menuItems:i["b"].arrayOrObservableArray,numInvitationRequests:a.a.number.isRequired,courseId:a.a.number.isRequired,onNavClick:a.a.func,withCompletion:a.a.bool};UT.defaultProps={menuList:null,menuItems:null,onNavClick:Xe["a"],withCompletion:false};const HT=e=>{let{menuList:t,numInvitationRequests:r,courseId:n,onNavClick:i,withCompletion:o}=e;return l.a.createElement("ul",{className:"ud-unstyled-list side-nav--nav--6iscr side-nav--nav-sections--1OE5j"},Object.values(t).map(((e,t)=>l.a.createElement("li",{key:`section-${t}`,className:"side-nav--nav-section--2jHwe"},e.title&&l.a.createElement("div",{className:"ud-heading-md side-nav--nav-section-title--Hq2Jb"},e.title),!e.items?null:l.a.createElement("ul",{className:"ud-unstyled-list"},e.items.map(((e,t)=>l.a.createElement(jT,{key:`item-${t}`,item:e,numInvitationRequests:r,withCompletion:o,courseId:n,onNavClick:i}))))))))};HT.propTypes={menuList:a.a.object.isRequired,numInvitationRequests:a.a.number.isRequired,onNavClick:a.a.func,withCompletion:a.a.bool.isRequired,courseId:a.a.number.isRequired};HT.defaultProps={onNavClick:Xe["a"]};const FT=e=>{let{menuItems:t,onNavClick:r,withCompletion:n,courseId:i}=e;return l.a.createElement("ul",{className:"ud-unstyled-list side-nav--nav--6iscr"},t.map(((e,t)=>l.a.createElement(jT,{key:`item-${t}`,item:e,withCompletion:n,courseId:i,onNavClick:r}))))};FT.propTypes={menuItems:i["b"].arrayOrObservableArray.isRequired,onNavClick:a.a.func,withCompletion:a.a.bool.isRequired,courseId:a.a.number.isRequired};FT.defaultProps={onNavClick:Xe["a"]};let BT=Object(c["m"])(RT=Object(i["f"])(RT=(NT=(MT=class e extends s["Component"]{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"menuExpanded",LT,this);this.coursePublishStore=new pT({pageStore:this.props.pageStore})}toggleMenuExpanded(){this.menuExpanded=!this.menuExpanded}resetMenu(){this.menuExpanded=false}render(){const{course:e,menuData:t,courseLoaded:r,menuLoaded:n}=this.props.pageStore;if(!e||!r||!n){return l.a.createElement("div",{className:"side-nav--side-nav--h8FTL"})}const{menu_list:i,menu_items:o,button_url:a,publish_title:s,publish_action:c,with_completion:u}=t;const p=e&&e.numInvitationRequests||0;return l.a.createElement("div",{"data-purpose":"side-menu",className:er()(fr()("side-nav",{open:this.menuExpanded}),qT)},l.a.createElement(ce["a"],{udStyle:"ghost",onClick:this.toggleMenuExpanded,className:"side-nav--toggle-menu-btn--UZeDa"},l.a.createElement(Ub.a,{label:gettext("Open menu"),size:"large"})),l.a.createElement(UT,{withCompletion:u,menuList:i,menuItems:o,numInvitationRequests:p,onNavClick:this.resetMenu,courseId:e.id}),a?l.a.createElement(_T,{publishTitle:s,publishAction:c,buttonUrl:a,courseId:e.id,className:"side-nav--publish-button--yW0v1",store:this.coursePublishStore}):null)}},MT.propTypes={pageStore:a.a.shape({course:a.a.shape({id:a.a.number}).isRequired,courseLoaded:a.a.bool.isRequired,menuData:a.a.object,menuLoaded:a.a.bool.isRequired}).isRequired},MT),LT=babelHelpers.applyDecoratedDescriptor(NT.prototype,"menuExpanded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(NT.prototype,"toggleMenuExpanded",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(NT.prototype,"toggleMenuExpanded"),NT.prototype),babelHelpers.applyDecoratedDescriptor(NT.prototype,"resetMenu",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(NT.prototype,"resetMenu"),NT.prototype),NT))||RT)||RT;var zT,VT,WT;let GT=(zT=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"invitations",VT,this);babelHelpers.initializerDefineProperty(this,"updateInProgress",WT,this);this.setCourseId(e)}loadInvitationRequests(){return Qe["f"].get(`/courses/${this.courseId}/invitation-requests/`).then(this._onLoadInvitationRequestsSuccess).catch((()=>{Object(Ui["b"])(Qe["g"])}))}_onLoadInvitationRequestsSuccess(e){this.totalInvitationRequestCount=e.data.count;this.invitations=e.data.results||[]}_onUpdateInvitationRequestSuccess(e){return Object(he["e"])((()=>{this.invitations.remove(e);this.updateInProgress=false}))}updateInvitationRequest(e,t){this.updateInProgress=e;const r={status:t};return Qe["f"].patch(`/courses/${this.courseId}/invitation-requests/${e.id}/`,r).then(this._onUpdateInvitationRequestSuccess(e)).catch((()=>{Object(Ui["b"])(Qe["g"])}))}setCourseId(e){this.courseId=e}},VT=babelHelpers.applyDecoratedDescriptor(zT.prototype,"invitations",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),WT=babelHelpers.applyDecoratedDescriptor(zT.prototype,"updateInProgress",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(zT.prototype,"loadInvitationRequests",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zT.prototype,"loadInvitationRequests"),zT.prototype),babelHelpers.applyDecoratedDescriptor(zT.prototype,"_onLoadInvitationRequestsSuccess",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zT.prototype,"_onLoadInvitationRequestsSuccess"),zT.prototype),babelHelpers.applyDecoratedDescriptor(zT.prototype,"_onUpdateInvitationRequestSuccess",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zT.prototype,"_onUpdateInvitationRequestSuccess"),zT.prototype),babelHelpers.applyDecoratedDescriptor(zT.prototype,"updateInvitationRequest",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(zT.prototype,"updateInvitationRequest"),zT.prototype),babelHelpers.applyDecoratedDescriptor(zT.prototype,"setCourseId",[he["e"]],Object.getOwnPropertyDescriptor(zT.prototype,"setCourseId"),zT.prototype),zT);function KT(e){const t=Object(Xi["a"])().locale.replace("_","-")||"en-US";const r={year:"numeric",month:"2-digit",day:"2-digit"};return lu(e).toLocaleDateString(t,r)}var $T=r("./src/udemy/js/course-manage-v2/students/invitation-request-table.less");var XT,YT,QT;let JT=Object(i["f"])(XT=(YT=(QT=class e extends s["Component"]{constructor(e){super(e);this.store=new GT(this.props.courseId)}componentDidMount(){this.store.loadInvitationRequests()}renderNameCell(e){return l.a.createElement("div",{className:"invitation-request-table--user-profile--3-Nw6"},l.a.createElement(gp["a"],{size:"medium",user:e.user,alt:"NONE",srcKey:"image_50x50"}),l.a.createElement("a",{href:e.user.url},e.user.title))}renderDateCell(e){return KT(e.created)}renderActionsCell(e){const t=this.store.updateInProgress===e;return l.a.createElement("div",{className:"invitation-request-table--actions--S_k4m"},l.a.createElement(le["a"],{udStyle:"ghost",onClick:()=>this.store.updateInvitationRequest(e,"rejected"),disabled:t},gettext("Ignore")),l.a.createElement(le["a"],{onClick:()=>this.store.updateInvitationRequest(e,"approved"),disabled:t},gettext("Approve")))}get columns(){return[{fieldName:"students",headerName:gettext("Students requesting to join"),renderMethod:this.renderNameCell},{fieldName:"date",headerName:gettext("Request Date"),renderMethod:this.renderDateCell},{fieldName:"actions",headerName:gettext("Actions"),isScreenReaderOnly:true,renderMethod:this.renderActionsCell}]}render(){if(this.store.invitations.length===0){return null}return l.a.createElement("div",{className:"invitation-request-table--invitation-request-table--2dLis"},l.a.createElement(fo["a"],{noBackgroundColor:true,noBorder:true,caption:gettext("Student invitation requests"),columns:this.columns,rows:this.store.invitations.slice()}))}},QT.propTypes={courseId:a.a.number.isRequired},QT),babelHelpers.applyDecoratedDescriptor(YT.prototype,"renderNameCell",[f["a"]],Object.getOwnPropertyDescriptor(YT.prototype,"renderNameCell"),YT.prototype),babelHelpers.applyDecoratedDescriptor(YT.prototype,"renderDateCell",[f["a"]],Object.getOwnPropertyDescriptor(YT.prototype,"renderDateCell"),YT.prototype),babelHelpers.applyDecoratedDescriptor(YT.prototype,"renderActionsCell",[f["a"]],Object.getOwnPropertyDescriptor(YT.prototype,"renderActionsCell"),YT.prototype),YT))||XT;var ZT=r("./src/udemy/js/course-manage-v2/students/invite-students-modal-body.less");var eO,tO,rO;let nO=Object(i["f"])(eO=(tO=(rO=class e extends s["Component"]{handleChange(e){this.props.store.setEmails(e.target.value)}render(){let e;if(this.props.store.error){e=l.a.createElement(b["a"],{showCta:false,udStyle:"error",className:"invite-students-modal-body--alert-banner--2-_n0",title:this.props.store.error})}return l.a.createElement(l.a.Fragment,null,e,l.a.createElement(ji["b"],{label:gettext("Invite students to the course by adding their email below:")},l.a.createElement(Vv["a"],{name:"emails",placeholder:gettext("Enter one email per line"),value:this.props.store.emails,onChange:this.handleChange})))}},rO.propTypes={store:a.a.object.isRequired},rO),babelHelpers.applyDecoratedDescriptor(tO.prototype,"handleChange",[f["a"]],Object.getOwnPropertyDescriptor(tO.prototype,"handleChange"),tO.prototype),tO))||eO;var iO,oO,aO,sO;let lO=(iO=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"emails",oO,this);babelHelpers.initializerDefineProperty(this,"isLoading",aO,this);babelHelpers.initializerDefineProperty(this,"error",sO,this);this.setCourseId(e)}reset(){this.emails="";this.error=""}setCourseId(e){this.courseId=e}setEmails(e){this.emails=e}sendInvites(e){this.isLoading=true;this.error="";return Qe["f"].post(`/courses/${this.courseId}/invitations/`,{emails:this.emails}).then(Object(he["e"])((()=>{Object(Ui["c"])(gettext("Invitations were successfully sent."));this.isLoading=false;e()}))).catch(Object(he["e"])((e=>{if(e.response){this.error=e.response.data.detail}else{this.error=e.message}this.isLoading=false})))}},oO=babelHelpers.applyDecoratedDescriptor(iO.prototype,"emails",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),aO=babelHelpers.applyDecoratedDescriptor(iO.prototype,"isLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),sO=babelHelpers.applyDecoratedDescriptor(iO.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),babelHelpers.applyDecoratedDescriptor(iO.prototype,"reset",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(iO.prototype,"reset"),iO.prototype),babelHelpers.applyDecoratedDescriptor(iO.prototype,"setCourseId",[he["e"]],Object.getOwnPropertyDescriptor(iO.prototype,"setCourseId"),iO.prototype),babelHelpers.applyDecoratedDescriptor(iO.prototype,"setEmails",[he["e"]],Object.getOwnPropertyDescriptor(iO.prototype,"setEmails"),iO.prototype),babelHelpers.applyDecoratedDescriptor(iO.prototype,"sendInvites",[he["e"]],Object.getOwnPropertyDescriptor(iO.prototype,"sendInvites"),iO.prototype),iO);var cO,uO;let pO=Object(i["f"])(cO=(uO=class e extends s["Component"]{constructor(e){super(e);this.store=new lO(e.courseId)}render(){return l.a.createElement(yo["a"],{trigger:l.a.createElement(le["a"],{name:"invite",onClick:this.store.reset},gettext("Invite students")),renderModal:e=>l.a.createElement(Fe["a"],Object.assign({},e,{title:gettext("Invite students")}),l.a.createElement(nO,{store:this.store}),l.a.createElement(ze["a"],null,l.a.createElement(le["a"],{name:"send",disabled:this.store.isLoading||this.store.emails==="",onClick:()=>this.store.sendInvites(e.onClose)},gettext("Send Invitation"))))})}},uO.propTypes={courseId:a.a.number.isRequired},uO))||cO;var dO,hO,mO,fO,gO,yO,bO,vO,wO;const EO=3;let SO=(dO=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isLoading",hO,this);babelHelpers.initializerDefineProperty(this,"isFirstLoadingComplete",mO,this);babelHelpers.initializerDefineProperty(this,"studentsList",fO,this);babelHelpers.initializerDefineProperty(this,"studentCount",gO,this);babelHelpers.initializerDefineProperty(this,"activePage",yO,this);babelHelpers.initializerDefineProperty(this,"sortBy",bO,this);babelHelpers.initializerDefineProperty(this,"searchInputValue",vO,this);babelHelpers.initializerDefineProperty(this,"error",wO,this);this.pageSize=10;this.courseId=void 0;this.setCourseId(e)}get searchQuery(){return this.searchInputValue.trim()}get pageCount(){return Math.ceil(this.studentCount/this.pageSize)}get ordering(){const{fieldName:e,ascending:t}=this.sortBy;return e?`${t?"":"-"}${e}`:""}setCourseId(e){this.courseId=e}fetchStudentsList(){const e=this.searchQuery&&this.isSearchQueryValid?this.searchQuery:"";this.isLoading=true;return Qe["f"].get(`/courses/${this.courseId}/students/`,{params:{ordering:this.ordering,q:e,page_size:this.pageSize,page:this.activePage,"fields[user]":["@default","completion_ratio","enrollment_date","is_organization_enrollment","last_accessed","question_count","question_answer_count"].join(",")}}).then(Object(he["e"])((e=>{let{data:t}=e;this.error=null;this.isLoading=false;this.isFirstLoadingComplete=true;this.studentsList=t.results||[];this.studentCount=t.count;return t}))).catch(Object(he["e"])((e=>{let{response:t}=e;this.isLoading=false;this.isFirstLoadingComplete=true;if(t.status===Bs["b"]){this.error={title:gettext("Request limit reached."),content:gettext("You have reached the request limit, please try again in an hour.")}}else{this.error={title:Qe["g"],content:""}}})))}sendCSV(e){return Qe["f"].post(`/courses/${this.courseId}/students/export/`).then((()=>e()))}setActivePage(e){this.activePage=e;return this.fetchStudentsList()}setSorting(e){const t=e.fieldName===this.sortBy.fieldName;this.sortBy={fieldName:e.fieldName,ascending:t?!this.sortBy.ascending:e.initialSortOrder==="ascending"};return this.fetchStudentsList()}setSearchInputValue(e){this.searchInputValue=e}clearSearchInputValue(){this.sortBy={fieldName:"enrollment_date",ascending:false};this.searchInputValue="";this.fetchStudentsListBySearch()}get isSearchQueryValid(){if(this.isCJKLanguage)return true;return this.searchQuery.length>=EO}get isCJKLanguage(){return["ja","ko","zh"].includes(yp["a"].language)}fetchStudentsListBySearch(){if(!this.searchQuery||this.isSearchQueryValid){this.activePage=1;this.fetchStudentsList()}}},hO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"isLoading",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),mO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"isFirstLoadingComplete",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),fO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"studentsList",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),gO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"studentCount",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),yO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"activePage",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 1}}),bO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"sortBy",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{fieldName:"enrollment_date",ascending:false}}}),vO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"searchInputValue",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),wO=babelHelpers.applyDecoratedDescriptor(dO.prototype,"error",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(dO.prototype,"searchQuery",[he["g"]],Object.getOwnPropertyDescriptor(dO.prototype,"searchQuery"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"pageCount",[he["g"]],Object.getOwnPropertyDescriptor(dO.prototype,"pageCount"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"ordering",[he["g"]],Object.getOwnPropertyDescriptor(dO.prototype,"ordering"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"setCourseId",[he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"setCourseId"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"fetchStudentsList",[he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"fetchStudentsList"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"sendCSV",[f["a"]],Object.getOwnPropertyDescriptor(dO.prototype,"sendCSV"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"setActivePage",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"setActivePage"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"setSorting",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"setSorting"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"setSearchInputValue",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"setSearchInputValue"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"clearSearchInputValue",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"clearSearchInputValue"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"isSearchQueryValid",[he["g"]],Object.getOwnPropertyDescriptor(dO.prototype,"isSearchQueryValid"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"isCJKLanguage",[he["g"]],Object.getOwnPropertyDescriptor(dO.prototype,"isCJKLanguage"),dO.prototype),babelHelpers.applyDecoratedDescriptor(dO.prototype,"fetchStudentsListBySearch",[f["a"],he["e"]],Object.getOwnPropertyDescriptor(dO.prototype,"fetchStudentsListBySearch"),dO.prototype),dO);var _O=r("./src/udemy/js/course-manage-v2/students/students-list.less");var xO,DO,CO;const TO=1e3;const OO=e=>l.a.createElement(pe["a"],Object.assign({},e,{title:gettext("Export students list to CSV"),confirmText:gettext("Export")}),l.a.createElement("p",null,gettext("A list of all students enrolled in this course will be generated in CSV "+"format and emailed to you. This may take a few minutes if your course has a lot "+"of students. Continue?")));const kO=e=>{let{children:t,...r}=e;return l.a.createElement(ce["a"],Object.assign({},r,{type:r["aria-disabled"]?"button":"submit"}),l.a.createElement(No.a,{label:gettext("Submit search")}))};const PO=e=>{let{children:t,...r}=e;return l.a.createElement(Ki["a"],{placement:"bottom-end",trigger:l.a.createElement(kO,r)},interpolate(gettext("Please enter at least %(min)s characters"),{min:EO},true))};let AO=Object(i["f"])(xO=(DO=(CO=class e extends s["Component"]{constructor(e){super(e);this.store=new SO(e.courseId)}componentDidMount(){this.store.fetchStudentsList()}onSearchChange(e){this.store.setSearchInputValue(e.target.value)}onSearchSubmit(){this.store.fetchStudentsListBySearch()}renderNameCell(e){return l.a.createElement("div",null,l.a.createElement("a",{href:e.url,rel:"noopener noreferrer",target:"_blank",className:"students-list--student-name--3zWCU"},e.display_name),e.is_organization_enrollment&&l.a.createElement(ms["a"],{className:"students-list--ub-badge--sPTo_"},"Udemy Business"))}renderJoinDateCell(e){return KT(e.enrollment_date)}renderLastAccessedCell(e){return e.last_accessed?KT(e.last_accessed):gettext("Never")}renderCompletionRateCell(e){return interpolate(gettext("%(percent)s%"),{percent:e.completion_ratio},true)}renderMessageCell(e){return l.a.createElement(le["a"],{componentClass:"a",href:`/instructor/communication/messages/compose/user/${e.id}/`,target:"_blank",rel:"noopener noreferrer",size:"small",udStyle:"secondary"},gettext("Message"))}getColumns(e){const t={fieldName:"title",headerName:gettext("Name"),initialSortOrder:e>TO?null:"ascending",renderMethod:this.renderNameCell,wrap:true};const r={fieldName:"enrollment_date",headerName:gettext("Enrolled"),initialSortOrder:"descending",renderMethod:this.renderJoinDateCell,wrap:true};const n={fieldName:"last_accessed",headerName:gettext("Last Visited"),initialSortOrder:e>TO?null:"descending",renderMethod:this.renderLastAccessedCell,wrap:true};const i={fieldName:"completion_ratio",headerName:gettext("Progress"),renderMethod:this.renderCompletionRateCell,wrap:true};const o={fieldName:"question_count",headerName:gettext("Questions Asked"),wrap:true};const a={fieldName:"question_answer_count",headerName:gettext("Questions Answered"),wrap:true};const s=[t,r,n,i,o,a];const l=Et["c"].get(Et["a"].directMessagingEnabled);if(l){const e={fieldName:"send_message",headerName:gettext("Send message"),isScreenReaderOnly:true,renderMethod:this.renderMessageCell};s.push(e)}return s}render(){const{sendCSV:e,error:t,setSorting:r,sortBy:n,studentsList:i,pageCount:o,activePage:a,setActivePage:s,isLoading:c,isFirstLoadingComplete:u,isCJKLanguage:p,isSearchQueryValid:d}=this.store;if(!u){return l.a.createElement(S,null)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"students-list--button-bar--2Anl-"},l.a.createElement(yo["a"],{trigger:l.a.createElement(le["a"],{udStyle:"secondary"},gettext("Export to CSV")),renderModal:t=>l.a.createElement(OO,Object.assign({},t,{onCancel:t.onClose,onConfirm:()=>e(t.onClose)}))}),l.a.createElement(ji["b"],{className:"students-list--search-field--3sYti",label:gettext("Student name"),labelProps:{className:"ud-sr-only"}},l.a.createElement(Lo["a"],{placeholder:gettext("Search by name"),value:this.store.searchInputValue,onChange:this.onSearchChange,onSubmit:this.onSearchSubmit,showClearInputButton:!!this.store.searchInputValue,onClearInput:this.store.clearSearchInputValue,submitButtonProps:{componentClass:p?kO:PO,"aria-disabled":!d}}))),c&&l.a.createElement(S,null),!c&&t&&l.a.createElement(b["a"],{showCta:false,udStyle:"error",title:t.title,body:t.content}),!c&&!t&&i.length===0&&l.a.createElement("div",{className:"students-list--no-students--gL9g6"},gettext("No students found")),!c&&!t&&i.length>0&&l.a.createElement("div",{className:"students-list--table-container--zRv60"},l.a.createElement(fo["a"],{padding:"xs",noBackgroundColor:true,noBorder:true,caption:gettext("Students"),columns:this.getColumns(o),onSort:r,sortBy:n,rows:i.slice()}),l.a.createElement(mo["a"],{pageCount:o,activePage:a,onPageChange:s,className:"students-list--pagination--lrds7"})))}},CO.propTypes={courseId:a.a.number.isRequired},CO),babelHelpers.applyDecoratedDescriptor(DO.prototype,"onSearchChange",[f["a"]],Object.getOwnPropertyDescriptor(DO.prototype,"onSearchChange"),DO.prototype),babelHelpers.applyDecoratedDescriptor(DO.prototype,"onSearchSubmit",[f["a"]],Object.getOwnPropertyDescriptor(DO.prototype,"onSearchSubmit"),DO.prototype),DO))||xO;var IO,jO,RO;let NO=(IO=class e{constructor(){babelHelpers.initializerDefineProperty(this,"course",jO,this);babelHelpers.initializerDefineProperty(this,"studentsCourseInfoLoaded",RO,this)}getStudentsCourseInfo(e){return Qe["f"].get(`/courses/${e}/`,{params:{"fields[course]":"has_students,can_invite"}}).then(Object(he["e"])((e=>{Object(he["l"])(this.course,{id:e.data.id,hasStudents:e.data.has_students,canInvite:e.data.can_invite});this.studentsCourseInfoLoaded=true}))).catch((()=>{Object(Ui["b"])(Qe["g"])}))}},jO=babelHelpers.applyDecoratedDescriptor(IO.prototype,"course",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),RO=babelHelpers.applyDecoratedDescriptor(IO.prototype,"studentsCourseInfoLoaded",[he["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(IO.prototype,"getStudentsCourseInfo",[he["e"]],Object.getOwnPropertyDescriptor(IO.prototype,"getStudentsCourseInfo"),IO.prototype),IO);var LO,MO;const qO=()=>l.a.createElement("p",{className:"students-list--no-students--gL9g6"},gettext("No students enrolled in this course"));let UO=Object(i["f"])(LO=(MO=class e extends s["Component"]{constructor(e){super(e);this.studentsStore=new NO}componentDidMount(){this.studentsStore.getStudentsCourseInfo(this.props.courseId)}renderActionButtons(){if(!this.studentsStore.course.canInvite){return null}return l.a.createElement(pO,{courseId:this.props.courseId})}renderStudents(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(JT,{courseId:this.props.courseId}),this.studentsStore.course.hasStudents?l.a.createElement(AO,{courseId:this.props.courseId}):l.a.createElement(qO,null))}render(){const e=!this.studentsStore.studentsCourseInfoLoaded;const t=e?null:this.renderActionButtons();return l.a.createElement("div",null,l.a.createElement(bn["a"],{title:gettext("Students"),actionButtons:t}),l.a.createElement(d["a"],null,e?l.a.createElement(S,null):this.renderStudents()))}},MO.propTypes={courseId:a.a.number.isRequired},MO))||LO;var HO=r("./src/udemy/js/course-manage-v2/app.global.less");var FO=r("./src/udemy/js/course-manage-v2/app.less");r.d(t,"CourseManageFrame",(function(){return GO}));r.d(t,"App",(function(){return KO}));r.d(t,"default",(function(){return $O}));var BO,zO;const VO={courseId:a.a.number.isRequired,isUfoContentSubscriptionAgreed:a.a.bool,pageStore:a.a.object,awsAccessKey:a.a.string.isRequired,bucketUrl:a.a.string.isRequired,performanceBaseUrl:a.a.string.isRequired,filestackPolicy:a.a.string,filestackSignature:a.a.string,isCourseVersionEnabled:a.a.bool,isNewCodingExerciseUIEnabled:a.a.bool,isCurriculumEditorSectionTopicsEnabled:a.a.bool};const WO={pageStore:null,isUfoContentSubscriptionAgreed:false,filestackPolicy:"",filestackSignature:"",isCourseVersionEnabled:false,isNewCodingExerciseUIEnabled:false,isCurriculumEditorSectionTopicsEnabled:false};const GO=Object(c["m"])(Object(i["f"])((e=>{if(!e.pageStore.courseLoaded){return null}const t=e.pageStore.course;const r=Boolean(t&&t.organizationId);let i="/404";const o=e.location.pathname;if(t&&(o==="/"||o==="/price-and-promotions/")){i="/promotions/";if(r){i="/curriculum/"}else if(!t.isHighQuality){if(t.qualityReviewProcess&&t.qualityReviewProcess.id){i="/feedback/"}else{i="/goals/"}}}return l.a.createElement(rD,null,l.a.createElement(c["f"],null,l.a.createElement(p["a"],{pageKey:"course_manage_goals",exact:true,path:"/goals/",render:()=>l.a.createElement(Od,{pageStore:e.pageStore,courseId:e.courseId})}),l.a.createElement(p["a"],{pageKey:"course_manage_curriculum",exact:true,path:"/(curriculum|practice-tests)/",render:()=>l.a.createElement(Q_,{pageStore:e.pageStore,courseId:e.courseId,exportLecturesUrl:e.exportLecturesUrl,filestackPolicy:e.filestack_policy,filestackSignature:e.filestack_signature})}),l.a.createElement(p["a"],{pageKey:"course_manage_captions",path:"/captions/",render:()=>l.a.createElement(di,{courseId:e.courseId,awsAccessKey:e.awsAccessKey,bucketUrl:e.bucketUrl})}),l.a.createElement(p["a"],{pageKey:"course_manage_accessibility",path:"/accessibility/",render:()=>l.a.createElement(Yc,{courseId:e.courseId})}),l.a.createElement(p["a"],{pageKey:"course_manage_basics",exact:true,path:"/basics/",render:()=>l.a.createElement(ed,{pageStore:e.pageStore,courseId:e.courseId})}),l.a.createElement(p["a"],{pageKey:"course_manage_pricing",exact:true,path:"/pricing/",render:t=>l.a.createElement(Mc,Object.assign({pageStore:e.pageStore,courseId:e.courseId,onSaveComplete:e.pageStore.getMenu},t))}),l.a.createElement(p["a"],{pageKey:"course_manage_promotions",exact:true,path:"/promotions/",render:t=>l.a.createElement(hs,Object.assign({courseId:e.courseId,onSaveComplete:e.pageStore.getMenu},t))}),l.a.createElement(p["a"],{pageKey:"course_manage_structure",exact:true,path:"/course-structure/",render:()=>l.a.createElement(ju,{pageType:"course-structure",courseId:e.courseId,onPageOpen:e.pageStore.getMenu})}),l.a.createElement(p["a"],{pageKey:"course_manage_film",exact:true,path:"/film/",render:()=>l.a.createElement(ju,{pageType:"film",courseId:e.courseId,onPageOpen:e.pageStore.getMenu})}),l.a.createElement(p["a"],{pageKey:"course_manage_setup",exact:true,path:"/setup/",render:()=>l.a.createElement(ju,{pageType:"setup",courseId:e.courseId,onPageOpen:e.pageStore.getMenu})}),l.a.createElement(p["a"],{pageKey:"course_manage_settings",exact:true,path:"/settings/",render:()=>l.a.createElement(bC,{courseId:e.courseId,pageStore:e.pageStore})}),l.a.createElement(p["a"],{pageKey:"course_manage_students",exact:true,path:"/students/",render:()=>l.a.createElement(UO,{courseId:e.courseId})}),l.a.createElement(p["a"],{pageKey:"course_manage_feedback",path:"/feedback/",render:()=>l.a.createElement(Zx,e)}),l.a.createElement(p["a"],{pageKey:"course_manage_communications",path:"/communications/",render:()=>l.a.createElement(xx,{pageStore:e.pageStore})}),l.a.createElement(p["a"],{pageKey:"course_manage_availability",path:"/availability/",render:()=>l.a.createElement(yu,{pageStore:e.pageStore})}),l.a.createElement(c["c"],{exact:true,path:"/404",render:()=>l.a.createElement(n["a"],null)}),l.a.createElement(c["b"],{to:i})))})));GO.propTypes=VO;GO.defaultProps=WO;let KO=Object(i["f"])(BO=(zO=class e extends s["Component"]{constructor(e){super(e);this.pageStore=e.pageStore||new Hd(e.courseId,e.isUfoContentSubscriptionAgreed,e.isCourseVersionEnabled,e.isNewCodingExerciseUIEnabled,e.isCurriculumEditorSectionTopicsEnabled)}render(){const{pageStore:e,performanceBaseUrl:t,isCourseVersionEnabled:r,...n}=this.props;return l.a.createElement(u["a"],null,l.a.createElement(l.a.Fragment,null,l.a.createElement(ox,{pageStore:this.pageStore}),l.a.createElement(ax["a"],null),l.a.createElement("div",{className:"ud-container app--container--7qJMh"},l.a.createElement(BT,{pageStore:this.pageStore}),l.a.createElement("div",{className:"app--content--3vcMt"},l.a.createElement(GO,Object.assign({pageStore:this.pageStore},n,{performanceBaseUrl:t}))))))}},zO.propTypes=VO,zO.defaultProps=WO,zO))||BO;function $O(e,t){Object(hi["a"])(e,".ud-component--course-manage-v2--app",KO,t)}},"./src/udemy/js/course-taking/constants.js":function(e,t,r){"use strict";r.d(t,"r",(function(){return n}));r.d(t,"b",(function(){return i}));r.d(t,"c",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"h",(function(){return s}));r.d(t,"j",(function(){return l}));r.d(t,"f",(function(){return d}));r.d(t,"d",(function(){return h}));r.d(t,"e",(function(){return m}));r.d(t,"i",(function(){return f}));r.d(t,"g",(function(){return y}));r.d(t,"y",(function(){return b}));r.d(t,"z",(function(){return v}));r.d(t,"o",(function(){return w}));r.d(t,"u",(function(){return E}));r.d(t,"C",(function(){return S}));r.d(t,"A",(function(){return _}));r.d(t,"l",(function(){return x}));r.d(t,"k",(function(){return D}));r.d(t,"s",(function(){return C}));r.d(t,"w",(function(){return T}));r.d(t,"B",(function(){return O}));r.d(t,"m",(function(){return k}));r.d(t,"q",(function(){return P}));r.d(t,"p",(function(){return A}));r.d(t,"n",(function(){return I}));r.d(t,"t",(function(){return j}));r.d(t,"x",(function(){return R}));r.d(t,"v",(function(){return N}));const n=5;const i=["title","headline","description","prerequisites","objectives","target_audiences","url","is_published","is_approved","is_practice_test_course","content_length_video","instructional_level","locale","content_length_practice_test_questions","content_info","num_subscribers","visible_instructors","is_paid","is_private","is_owner_terms_banned","is_owned_by_instructor_team","image_240x135","instructor_status","is_cpe_compliant","cpe_field_of_study","cpe_program_level","num_cpe_credits","is_in_user_subscription","course_has_labels","is_course_available_in_org","has_labs_in_course_prompt_setting"].join(",");const o=["available_features","features","gift_url","has_certificate","has_closed_caption","is_saved"].join(",");const a=[i,o].join(",");const s=["simple_english_title"].join(",");const l=["url","title","job_title","image_200_H","description","display_name","image_50x50","initials","url_twitter","url_facebook","url_linkedin","url_youtube","url_personal_website"].join(",");const c=["title","filename","asset_type","status","time_estimation"];const u=["title","filename","asset_type","status","time_estimation","is_external"];const p=["title","object_index","is_published","sort_order"];const d={"fields[lecture]":p.concat(["created","asset","supplementary_assets","is_free"]).join(","),"fields[quiz]":p.concat(["type"]).join(","),"fields[practice]":p.join(","),"fields[chapter]":p.join(","),"fields[asset]":c.join(",")};const h={...d,"fields[asset]":u.join(",")};const m={...d,"fields[asset]":u.join(","),"fields[chapter]":p.concat(["gt_assignments"]).join(",")};const f=["completed_lecture_ids","completed_quiz_ids","last_seen_page","completed_assignment_ids","first_completion_time"];const g=["archive_time","favorite_time","was_purchased_by_student","was_paid_by_student","is_in_refund_period","notification_settings","available_features","created"].join(",");const y={"fields[course_has_user]":g};const b=Object.freeze({PRACTICE_TEST_QUESTIONS:"practice_test_questions",TRANSCRIPT:"transcript",DEFAULT:"default",NONE:"none"});const v="ct-sidebar-scroll-container";const w=15*1e3;const E=200;const S=Object.freeze({INSTRUCTOR:"Instructor",STUDENT:"Student"});const _=Object.freeze({DASHBOARD:"dashboard",SEARCH:"search",SEARCH_VISIT:"search_visit",TRANSCRIPT:"transcript",BOOKMARK_FILTER:"bookmark_filter",BOOKMARK_SORT:"bookmark_sort",BOOKMARK_ACTION:"bookmark_action",ASSESSMENT_BANNER_VIEW:"assessment_banner_view",ASSESSMENT_BANNER_CLICK:"assessment_banner_click",ASSESSMENT_GUIDE:"assessment_guide",QUESTION:"question",LECTURE:"lecture",LECTURE_DOWNLOAD:"lecture-download",REPORT_VISIT:"report-visit",COURSE_CONTENT_DOWNLOAD:"course_content_download",COURSE_CONTENT_VIEW:"course_content_view",COURSE_CONTENT_LIST_OPEN:"course_content_list",INTERSTITIAL:"interstitial",PROGRESS:"progress",PLAYER_SETTINGS:"player_settings",NAVIGATION:"navigation",END_SCREEN:"end_screen",FIND_MORE_COURSES:"find_more_courses",DETAILED_PRACTICE_TEST_RESULTS:"detailed_practice_test_results"});const x=Object.freeze({CLICK_GUIDED_SECTION:"click_guided_section"});const D=Object.freeze({CLICK_ASSESSMENT_BANNER:"click_assessment_banner",DISPLAY_ASSESSMENT_BANNER:"display_assessment_banner"});const C=Object.freeze({CLICK_KNOWLEDGE_AREAS_FILTER:"click_knowledge_areas_filter",CLICK_QUESTION_TYPE_FILTER:"click_question_type_filter",SCROLL_PAGE:"scroll_page",VIEW_PAGE:"view_page"});const T=Object.freeze({MARK_COMPLETE:"mark_complete",MARK_RESET:"mark_reset"});const O={SIDEBAR_CONTENT:"sidebar_content",DASHBOARD_TAB:"dashboard_tab"};const k={CERTIFICATE:"certificate",Q_AND_A_ENABLED:"q_and_a_enabled",HAS_WORKSPACE_ASSOCIATED:"has_workspace_associated"};const P="udemy";const A="nasba";const I=[P,A];const j=[1025702,1298780,1360446,1456464,1546884,1602900,1754098,1755264,1879018,1921420,1927250,2015076,2051741,2059535,1535678,2193468,2196488,2253706,2327688,2359992,2360064,2394982,2533568,2542943,2543649,2645936,2782102,2813427,3251302,3827154,567828,625204,684824,705264,762616,773214,802574,802576,2301254,1988542,3336410,2462140,345340,2533568,1361790,1754098,3125272,4065250,4008228];const R=Object.freeze({SEARCH_QUESTION:"dashboard.tab.questions-view.search-questions",LOAD_SEARCH_RESPONSE:"dashboard.tab.questions-view.load-search-response",CLICK:"dashboard.tab.open-detail",BACK_TO_ALL_QUESTIONS:"dashboard.tab.detail-view.back-to-all-questions",IMPRESSION:"dashboard.tab.questions-view.impression"});const N=Object.freeze({CLICK:"dashboard.tab.questions-view.show-new-question-form",BACK_TO_ALL_QUESTIONS:"dashboard.tab.new-question.back-to-all-questions",CATEGORY_SELECT:"dashboard.tab.new-question-related-to-view.category_select",SUBMIT:"dashboard.tab.detail-view.add-question"})},"./src/udemy/js/course-taking/curriculum/controls/control-bar-dropdown.less":function(e,t,r){e.exports={trigger:"control-bar-dropdown--trigger--iFz7P","trigger-small":"control-bar-dropdown--trigger-small--1ZPqx","trigger-dark":"control-bar-dropdown--trigger-dark--1qTuU",menu:"control-bar-dropdown--menu--2bFbL","menu-dark":"control-bar-dropdown--menu-dark--3cSQg","checkbox-slider":"control-bar-dropdown--checkbox-slider--1LPlb"}},"./src/udemy/js/course-taking/curriculum/controls/control-bar-dropdown.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return F}));r.d(t,"b",(function(){return W}));var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var a=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var s=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/focus-cycle.react-component.js");var l=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var c=r("./node_modules/@udemy/react-core-components/dist/esm/block-list/block-list.react-component.js");var u=r("./node_modules/@udemy/react-popup-components/dist/esm/tooltip/tooltip.react-component.js");var p=r("./node_modules/@udemy/react-popup-components/dist/esm/basic-popper/basic-popper.react-component.js");var d=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var h=r("./node_modules/@udemy/styles/dist/esm/tokens/generated/index.js");var m=r("./node_modules/autobind-decorator/lib/esm/index.js");var f=r("./node_modules/classnames/index.js");var g=r.n(f);var y=r("./node_modules/mobx/lib/mobx.module.js");var b=r("./node_modules/mobx-react/dist/mobx-react.module.js");var v=r("./node_modules/prop-types/index.js");var w=r.n(v);var E=r("./node_modules/react/index.js");var S=r.n(E);var _=r("./src/udemy/js/course-taking/curriculum/controls/control-bar-dropdown.less");var x=r.n(_);var D,C,T,O,k,P,A,I,j,R,N,L,M,q;const U={"./control-bar-dropdown.less":{trigger:"control-bar-dropdown--trigger--iFz7P","trigger-small":"control-bar-dropdown--trigger-small--1ZPqx","trigger-dark":"control-bar-dropdown--trigger-dark--1qTuU",menu:"control-bar-dropdown--menu--2bFbL","menu-dark":"control-bar-dropdown--menu-dark--3cSQg","checkbox-slider":"control-bar-dropdown--checkbox-slider--1LPlb"}};const H={className:w.a.string,onClick:w.a.func,onKeyDown:w.a.func};const F=e=>{let{darkMode:t,tooltipProps:r,...n}=e;const o=S.a.createElement(l["a"],Object.assign({udStyle:"ghost"},n,{className:(n.className?n.className+" ":"")+i()(g()("trigger",{"trigger-dark":t,"trigger-small":n.size==="small"}),U)}));if(!r){return o}return S.a.createElement(u["a"],Object.assign({detachFromTarget:false,placement:"top",shouldCloseOtherPoppers:false,trigger:o},r))};F.propTypes={darkMode:w.a.bool,size:w.a.oneOf(["small","large"]),tooltipProps:w.a.object,...H};F.defaultProps={darkMode:false,size:"large",tooltipProps:null};let B=(D=Object(b["e"])((e=>{let{$$udControlBarDropdown:t}=e;return{$$udControlBarDropdown:t}})),D(C=Object(b["f"])(C=(T=(k=class e extends S.a.Component{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"isTooltipOpen",O,this)}onToggleTooltip(e){this.isTooltipOpen=!this.props.$$udControlBarDropdown.props.isOpen&&e}onKeyDown(e){const t=e.keyCode===o["b"].UP;const r=e.keyCode===o["b"].DOWN;if(t||r){e.preventDefault();const{$$udControlBarDropdown:n}=this.props;!n.props.isOpen&&n.props.onToggle(true);t&&setTimeout(n.focusOnLastMenuItem,0);r&&setTimeout(n.focusOnFirstMenuItem,0)}this.props.onKeyDown&&this.props.onKeyDown(e)}render(){const{$$udControlBarDropdown:e,...t}=this.props;if(t.tooltipProps){t.tooltipProps={...t.tooltipProps,isOpen:this.isTooltipOpen,onToggle:this.onToggleTooltip}}return S.a.createElement(F,Object.assign({"aria-haspopup":"menu"},t,{onKeyDown:this.onKeyDown}))}},k.propTypes={$$udControlBarDropdown:w.a.object.isRequired,...H},k),O=babelHelpers.applyDecoratedDescriptor(T.prototype,"isTooltipOpen",[y["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(T.prototype,"onToggleTooltip",[m["a"],y["e"]],Object.getOwnPropertyDescriptor(T.prototype,"onToggleTooltip"),T.prototype),babelHelpers.applyDecoratedDescriptor(T.prototype,"onKeyDown",[m["a"]],Object.getOwnPropertyDescriptor(T.prototype,"onKeyDown"),T.prototype),T))||C)||C);let z=(P=Object(b["e"])((e=>{let{$$udControlBarDropdown:t}=e;return{$$udControlBarDropdown:t}})),P(A=(I=class e extends S.a.Component{renderListItem(e){if(!e){return null}return e.type==="li"?e:S.a.createElement("li",{role:"none"},e)}render(){const{$$udControlBarDropdown:e,...t}=this.props;return S.a.createElement(c["a"],Object.assign({role:"menu","aria-labelledby":e.triggerId,size:"small",renderListItem:this.renderListItem},t))}},I.propTypes={$$udControlBarDropdown:w.a.object.isRequired},I))||A);let V=(j=Object(b["e"])((e=>{let{$$udControlBarDropdown:t}=e;return{$$udControlBarDropdown:t}})),j(R=(N=(L=class e extends S.a.Component{onClick(e){const t=this.props.onClick&&this.props.onClick(e);if(t===true){this.props.$$udControlBarDropdown.props.onToggle(false);setTimeout((()=>{const e=this.props.$$udControlBarDropdown.findTriggerNode();e&&e.focus()}),0)}}render(){const{$$udControlBarDropdown:e,children:t,...r}=this.props;return S.a.createElement(c["a"].Item,Object.assign({componentClass:"button",role:"menuitem",tabIndex:"-1"},r,{onClick:this.onClick}),t,r.role==="menuitemcheckbox"&&S.a.createElement("span",{className:"control-bar-dropdown--checkbox-slider--1LPlb"}))}},L.propTypes={$$udControlBarDropdown:w.a.object.isRequired,...H},L),babelHelpers.applyDecoratedDescriptor(N.prototype,"onClick",[m["a"]],Object.getOwnPropertyDescriptor(N.prototype,"onClick"),N.prototype),N))||R);let W=(M=(q=class e extends S.a.Component{constructor(e,t){super(e,t);this.triggerId=this.props.trigger.props.id||Object(a["a"])("control-bar-dropdown-trigger");this.menuId=Object(a["a"])("control-bar-dropdown-menu");this.focusTrappingDialogProps={findTriggerNode:this.findTriggerNode}}findTriggerNode(){return document.getElementById(this.triggerId)}findMenuItemNodes(){const e=document.getElementById(this.menuId);const t=e?e.querySelectorAll("button,a[href],[tabindex]"):[];return Array.from(t).filter((e=>!e.hasAttribute("disabled")&&e.getAttribute("aria-disabled")!=="true"))}focusOnFirstMenuItem(){const e=this.findMenuItemNodes();e[0]&&e[0].focus()}focusOnLastMenuItem(){const e=this.findMenuItemNodes();e[e.length-1]&&e[e.length-1].focus()}onToggle(e){this.props.onToggle(e);e&&setTimeout(this.focusOnFirstMenuItem,0)}renderContent(e){let{style:t,...r}=e;r.style={...t,marginBottom:this.props.menuOffset};for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++){i[o-1]=arguments[o]}return Object(p["e"])(r,...i)}render(){const{children:e,darkMode:t,menuMaxHeight:r,menuOffset:n,...o}=this.props;return S.a.createElement(b["c"],{$$udControlBarDropdown:this,focusTrappingDialogProps:this.focusTrappingDialogProps},S.a.createElement(p["a"],Object.assign({},o,{trigger:S.a.cloneElement(o.trigger,{id:this.triggerId}),renderContent:this.renderContent,onToggle:this.onToggle}),S.a.createElement(s["a"],{getCycle:this.findMenuItemNodes},S.a.createElement("div",{id:this.menuId,style:{maxHeight:r},className:i()(g()("menu",{"menu-dark":t}),U)},e))))}},q.propTypes={trigger:w.a.node.isRequired,isOpen:w.a.bool.isRequired,onToggle:w.a.func.isRequired,placement:w.a.oneOf(["top-start","top-end"]).isRequired,darkMode:w.a.bool,menuMaxHeight:w.a.string,menuOffset:w.a.string},q.defaultProps={darkMode:false,menuMaxHeight:`${Object(d["c"])(280)}rem`,menuOffset:h["a"]["space-xs"]},q),babelHelpers.applyDecoratedDescriptor(M.prototype,"findTriggerNode",[m["a"]],Object.getOwnPropertyDescriptor(M.prototype,"findTriggerNode"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"findMenuItemNodes",[m["a"]],Object.getOwnPropertyDescriptor(M.prototype,"findMenuItemNodes"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"focusOnFirstMenuItem",[m["a"]],Object.getOwnPropertyDescriptor(M.prototype,"focusOnFirstMenuItem"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"focusOnLastMenuItem",[m["a"]],Object.getOwnPropertyDescriptor(M.prototype,"focusOnLastMenuItem"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"onToggle",[m["a"]],Object.getOwnPropertyDescriptor(M.prototype,"onToggle"),M.prototype),babelHelpers.applyDecoratedDescriptor(M.prototype,"renderContent",[m["a"]],Object.getOwnPropertyDescriptor(M.prototype,"renderContent"),M.prototype),M);W.Button=B;W.Menu=z;W.MenuItem=V},"./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/hotkey-overlay.less":function(e,t,r){e.exports={title:"hotkey-overlay--title--2GYq5",shortcuts:"hotkey-overlay--shortcuts--2l1ad",shortcut:"hotkey-overlay--shortcut--2dAti",hotkey:"hotkey-overlay--hotkey--h8fzn",key:"hotkey-overlay--key--3SWrM",col:"hotkey-overlay--col--2vd8h","arrow-up":"hotkey-overlay--arrow-up--2x6Ly","arrow-down":"hotkey-overlay--arrow-down--2pBcm","arrow-right":"hotkey-overlay--arrow-right--2l1EU"}},"./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/hotkey-overlay.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r("./node_modules/@udemy/icons/dist/arrow-left.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/icons/dist/expand-plus.ud-icon");var a=r.n(o);var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/info-overlay.react-component.js");var d=r("./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/hotkey-overlay.less");var h=r.n(d);class m extends u.a.Component{constructor(){super(...arguments);this.keyToStringMap={shift:pgettext("Keyboard shift key","Shift"),space:pgettext("Keyboard spacebar","Space"),escape:pgettext("Keyboard escape key","ESC"),left:u.a.createElement(i.a,{label:false,color:"inherit"}),up:u.a.createElement(i.a,{label:false,color:"inherit",className:"hotkey-overlay--arrow-up--2x6Ly"}),right:u.a.createElement(i.a,{label:false,color:"inherit",className:"hotkey-overlay--arrow-right--2l1EU"}),down:u.a.createElement(i.a,{label:false,color:"inherit",className:"hotkey-overlay--arrow-down--2pBcm"}),slash:"/"}}renderHotkey(e){const t=e.split("+");return u.a.createElement("div",{className:"ud-text-md hotkey-overlay--hotkey--h8fzn","aria-label":e},t.map(((e,r)=>u.a.createElement(u.a.Fragment,{key:e},u.a.createElement("span",{className:"hotkey-overlay--key--3SWrM"},this.keyToStringMap[e]||e.toUpperCase()),r<t.length-1&&u.a.createElement(a.a,{label:false,color:"inherit"})))))}renderColumn(e){return u.a.createElement("div",{className:"hotkey-overlay--col--2vd8h"},e.map((e=>u.a.createElement("div",{key:e.name,className:"ud-text-lg hotkey-overlay--shortcut--2dAti"},e.name,e.key&&this.renderHotkey(e.key)))))}render(){const{keyMap:e,...t}=this.props;const r=e.find((e=>e.isShowShortcuts));const n=u.a.createElement("span",{className:"hotkey-overlay--title--2GYq5"},r?r.name:gettext("Keyboard shortcuts"),r&&r.key&&this.renderHotkey(r.key));const i=e.filter((e=>!e.isShowShortcuts));const o=Math.max(6,Math.ceil(i.length/2));const a=i.slice(0,o);const s=i.slice(o);return u.a.createElement(p["a"],Object.assign({title:n},t),u.a.createElement("div",{className:"hotkey-overlay--shortcuts--2l1ad"},a.length>0&&this.renderColumn(a),s.length>0&&this.renderColumn(s)))}}m.propTypes={keyMap:l.a.arrayOf(l.a.shape({name:l.a.string.isRequired,key:l.a.string.isRequired,isShowShortcuts:l.a.bool})).isRequired}},"./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/info-overlay.less":function(e,t,r){e.exports={"info-overlay":"info-overlay--info-overlay--3Ge_B","close-button":"info-overlay--close-button--1b_cG",title:"info-overlay--title--3m_oL"}},"./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/info-overlay.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/design-system-utils/dist/esm/keyboard/keys.js");var o=r("./node_modules/@udemy/icons/dist/close.ud-icon");var a=r.n(o);var s=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var l=r("./node_modules/autobind-decorator/lib/esm/index.js");var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/prop-types/index.js");var p=r.n(u);var d=r("./node_modules/react/index.js");var h=r.n(d);var m=r("./node_modules/react-dom/index.js");var f=r.n(m);var g=r("./src/udemy/js/course-taking/lecture-view/video-viewer/info-overlay/info-overlay.less");var y=r.n(g);var b,v,w,E;let S=(b=Object(c["e"])((e=>{let{focusTrappingDialogProps:t}=e;return{focusTrappingDialogProps:t}})),b(v=(w=(E=class e extends h.a.Component{constructor(e,t){super(e,t);this.dialogRef=h.a.createRef();this.labelledById=Object(n["a"])("info-overlay")}componentDidMount(){document.addEventListener("keydown",this.onKeyDown)}componentDidUpdate(e){e.isOpen!==this.props.isOpen&&this.toggleDialog()}componentWillUnmount(){document.removeEventListener("keydown",this.onKeyDown)}toggleDialog(){if(this.props.isOpen){const e=this.props.focusTrappingDialogProps.findTriggerNode;const t=document.activeElement;if(e&&t&&t.getAttribute("role")==="menuitem"){this.triggerNode=e()}else{this.triggerNode=t}this.dialogRef.current&&this.dialogRef.current.focus()}else{this.triggerNode&&this.triggerNode.focus()}}onKeyDown(e){const t=e.which||e.keyCode;t===i["b"].ESCAPE&&this.props.onClose(e)}render(){if(!this.props.isOpen||!this.props.container){return null}const e=h.a.createElement("div",{ref:this.dialogRef,role:"dialog",tabIndex:"-1","aria-labelledby":this.labelledById,className:"info-overlay--info-overlay--3Ge_B"},h.a.createElement("h2",{id:this.labelledById,className:"ud-heading-xxl info-overlay--title--3m_oL"},this.props.title),this.props.children,h.a.createElement(s["a"],{onClick:this.props.onClose,udStyle:"ghost",className:"info-overlay--close-button--1b_cG","data-purpose":"close-popup"},h.a.createElement(a.a,{size:"large",label:gettext("Close")})));return f.a.createPortal(e,this.props.container)}},E.propTypes={isOpen:p.a.bool.isRequired,title:p.a.node.isRequired,onClose:p.a.func.isRequired,container:p.a.object,focusTrappingDialogProps:p.a.shape({findTriggerNode:p.a.func})},E.defaultProps={container:null,focusTrappingDialogProps:{}},E),babelHelpers.applyDecoratedDescriptor(w.prototype,"toggleDialog",[l["a"]],Object.getOwnPropertyDescriptor(w.prototype,"toggleDialog"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"onKeyDown",[l["a"]],Object.getOwnPropertyDescriptor(w.prototype,"onKeyDown"),w.prototype),w))||v)},"./src/udemy/js/instructor-verification/events.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");var i=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");class o extends n["a"]{constructor(e){let{courseId:t,state:r,action:n,source:i,country:o=null,verificationType:a=null}=e;super("InstructorVerificationUserActionEvent");this.courseId=t;this.state=r;this.action=n;this.source=i;this.country=o;this.verificationType=a}}function a(e){i["a"].publishEvent(e)}},"./src/udemy/js/instructor-verification/instructor-verification-ajax-modal.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("./node_modules/react/index.js");var i=r.n(n);var o=r("./src/udemy/js/base-components/dialog/ajax-modal.react-component.js");const a=()=>r.e("instructor-verification-udlite-app").then(r.bind(null,"./src/udemy/js/instructor-verification/udlite-app.js"));function s(e){return i.a.createElement(o["a"],Object.assign({url:"/instructor/verification-popup/",labelledById:"instructor-verification-title",shouldInterceptContent:true,skipCache:true,preloader:a},e))}},"./src/udemy/js/instructor-verification/verification-flow-store-context.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("./node_modules/react/index.js");var i=r.n(n);const o=i.a.createContext({});t["b"]=o;const a={intro:"intro",coinstructor:"coinstructor",truliooError:"truliooError",instructorOrPublisher:"instructorOrPublisher",country:"country",address:"address",countryInvalid:"countryInvalid",success:"success",manual:"manual",failed:"failed"}},"./src/udemy/js/instructor/common/constants.js":function(e,t,r){"use strict";r.d(t,"d",(function(){return n}));r.d(t,"b",(function(){return i}));r.d(t,"f",(function(){return o}));r.d(t,"c",(function(){return a}));r.d(t,"a",(function(){return s}));r.d(t,"e",(function(){return c}));const n=Object.freeze({EDIT_COURSE:"instructor:edit_course",MANAGE_CAPTIONS:"instructor:manage_captions",MANAGE_COURSE_QA:"instructor:manage_course_qa",MANAGE_COURSE_ASSIGNMENTS:"instructor:manage_course_assignments",VIEW_COURSE_REVENUE_REPORT:"instructor:view_course_revenue_report",MANAGE_COURSE_REVIEWS:"instructor:manage_course_reviews",MANAGE_COURSE_PERFORMANCE:"instructor:manage_course_performance"});const i="onePaneMode",o="twoPaneMode";const a=Object.freeze({ONE:i,TWO:o});const s=1400;const l=800;const c="/detail/?$"},"./src/udemy/js/instructor/hooks/use-system-message.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("./node_modules/react/index.js");var i=r.n(n);var o=r("./src/udemy/js/utils/ud-system-message.js");function a(e){const t=o["a"].ids[e];return[()=>o["a"].hasSeen(t),()=>o["a"].seen(t)]}function s(e){const[t,r]=Object(n["useState"])(false);const[i,o]=a(e);Object(n["useEffect"])((()=>{i().then((e=>{if(!e.data)r(true)}))}),[]);return[t,()=>{o().then();r(false)}]}},"./src/udemy/js/instructor/toasts.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r.d(t,"b",(function(){return o}));r.d(t,"c",(function(){return a}));var n=r("./node_modules/@udemy/react-messaging-components/dist/esm/toaster/toaster.mobx-store.js");function i(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const r={udStyle:"error",title:e,...t,ctaText:gettext("Dismiss"),dismissButtonProps:false};n["a"].addAlertBannerToast(r,{autoDismiss:true})}function o(e){const t={udStyle:"error",title:e,ctaText:gettext("Reload page"),onAction:()=>window.location.reload()};n["a"].addAlertBannerToast(t,{autoDismiss:true})}function a(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const r={udStyle:"success",title:e,...t,ctaText:gettext("Dismiss"),dismissButtonProps:false};n["a"].addAlertBannerToast(r,{autoDismiss:true})}},"./src/udemy/js/instructor/variables.js":function(e,t,r){"use strict";var n=r("./webpack/loaders/ud-less-variables-loader.js!./src/udemy/js/instructor/variables.less");var i=r.n(n);r.d(t,"a",(function(){return i.a}))},"./src/udemy/js/lab-taking/tasks/structured/automated-lab-review/constants.ts":function(e,t,r){"use strict";r.d(t,"c",(function(){return n}));r.d(t,"a",(function(){return i}));r.d(t,"d",(function(){return o}));r.d(t,"b",(function(){return a}));const n={get text(){return gettext("Example approach")}};const i={GET_REVIEW:"get_review_click",NEW_REVIEW:"new_review_click",REVIEW_FEEDBACK_ACCORDION:"feedback_accordion_expand",EXAMPLE_APPROACH:"example_approach_click",REFERENCE_CODE:"reference_code_click",RESOURCE_ACCORDION:"resources_accordion_expand",DOCUMENTATION_ACCORDION:"documentation_accordion_expand"};const o={SUCCESS:"success",FAIL:"fail",SERVER_ERROR:"server_error",SYNTAX_ERROR:"syntax_error"};const a={[i.GET_REVIEW]:"AutomatedLabReviewGetReviewClickEvent",[i.NEW_REVIEW]:"AutomatedLabReviewNewReviewClickEvent",[i.REVIEW_FEEDBACK_ACCORDION]:"AutomatedLabReviewFeedbackAccordionExpandEvent",[i.EXAMPLE_APPROACH]:"AutomatedLabReviewExampleApproachClickEvent",[i.REFERENCE_CODE]:"AutomatedLabReviewReferenceCodeClickEvent",[i.RESOURCE_ACCORDION]:"AutomatedLabReviewResourceAccordionExpandEvent",[i.DOCUMENTATION_ACCORDION]:"AutomatedLabReviewDocumentationAccordionExpandEvent"}},"./src/udemy/js/labs/apis.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return n}));r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));r.d(t,"l",(function(){return s}));r.d(t,"v",(function(){return l}));r.d(t,"F",(function(){return c}));r.d(t,"A",(function(){return u}));r.d(t,"r",(function(){return p}));r.d(t,"p",(function(){return d}));r.d(t,"s",(function(){return h}));r.d(t,"t",(function(){return m}));r.d(t,"n",(function(){return f}));r.d(t,"m",(function(){return g}));r.d(t,"C",(function(){return y}));r.d(t,"E",(function(){return b}));r.d(t,"D",(function(){return v}));r.d(t,"B",(function(){return w}));r.d(t,"y",(function(){return E}));r.d(t,"k",(function(){return S}));r.d(t,"o",(function(){return _}));r.d(t,"x",(function(){return x}));r.d(t,"u",(function(){return D}));r.d(t,"G",(function(){return C}));r.d(t,"j",(function(){return T}));r.d(t,"w",(function(){return O}));r.d(t,"z",(function(){return k}));r.d(t,"q",(function(){return P}));r.d(t,"i",(function(){return A}));r.d(t,"d",(function(){return j}));r.d(t,"g",(function(){return R}));r.d(t,"e",(function(){return N}));r.d(t,"f",(function(){return L}));r.d(t,"h",(function(){return M}));const n="/labs/";const i=`${n}ai/`;const o=`${i}generate-alr-test/`;const a=`${i}generate-alr-test-result/`;const s=e=>`${n}${e}/`;const l=e=>`${s(e)}publish/`;const c=e=>`${s(e)}unpublish/`;const u=e=>`${s(e)}progress/`;const p=e=>`${s(e)}submit-for-review/`;const d=e=>`${s(e)}links/`;const h=e=>`${s(e)}tasks/`;const m=e=>`/courses/${e}/labs/`;const f=e=>`${s(e)}instance/`;const g=(e,t)=>`${f(e)}${t}/`;const y=(e,t)=>`${g(e,t)}stop/`;const b=(e,t)=>`${g(e,t)}terminate/`;const v=(e,t)=>`${g(e,t)}sync/`;const w=(e,t)=>`${g(e,t)}save-progress/`;const E=(e,t)=>`${g(e,t)}reset-session/`;const S=(e,t)=>`${g(e,t)}jwt/`;const _=(e,t)=>`${g(e,t)}request-logs/`;const x=(e,t)=>`${h(e)}${t}/automated-review-test-run/`;const D=(e,t,r)=>`${x(e,t)}${r}/results/`;const C=e=>`${s(e)}validate-lab-data/`;const T=e=>`${s(e)}instructors/`;const O=(e,t)=>`${s(e)}instructors/${t}/`;const k=e=>`${s(e)}instructors/save/`;const P=e=>`${s(e)}report-technical-issue/`;const A=`${n}time-until-run-limit-reset/`;const I=`${n}retrieve-active-lab/`;const j=["id","title","vertical","provider","lab_type","my_latest_instance","setup_start_lecture_id","post_setup_lecture_id","is_launch_disabled"].join(",");const R=["id","uuid","status","start_time","session_start_time","uuid","total_spend","allowed_spend","aws_access_key_id","aws_secret_access_key","aws_session_token","workspace_sso_url","workspace_login_url","workspace_username","workspace_password","workspace_resource","lab","expiration_time"].join(",");const N=["id","title","vertical","provider","status","lab_type","my_latest_instance","course","template","spec_name","has_sso","instructor_has_lab"].join(",");const L=["id","vertical","provider","title","description","template","course","initial_source_code","lab_type"].join(",");const M={page_size:200}},"./src/udemy/js/labs/constants.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/icons/dist/bar-chart.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/icons/dist/cloud.ud-icon");var a=r.n(o);var s=r("./node_modules/@udemy/icons/dist/code.ud-icon");var l=r.n(s);var c=r("./node_modules/@udemy/icons/dist/security.ud-icon");var u=r.n(c);var p=r("./node_modules/@udemy/icons/dist/server.ud-icon");var d=r.n(p);var h=r("./src/udemy/js/browse/components/my-learning-unit/constants.js");var m=r("./src/udemy/js/browse/ui-regions.ts");var f=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class g extends f["a"]{constructor(e){let{lab:t,mode:r,labTask:n,labTakingSession:i,isFirstReviewRequest:o}=e;super("LabTaskReviewRequested");this.lab=t;this.mode=r;this.labTask=n;this.labTakingSession=i;this.isFirstReviewRequest=o}}var y=r("./src/udemy/js/utils/get-config-data.js");var b=r("./src/udemy/js/utils/ud-link.js");class v extends f["a"]{constructor(e){super("LabActionEvent");this.labId=e.labId;this.labVertical=e.labVertical;this.labInstanceUuid=e.labInstanceUuid;this.labTaskId=e.labTaskId;this.labTaskResourceId=e.labTaskResourceId;this.labCompletionMode=e.labCompletionMode;this.inSessionTimeBetweenViewAndCtaClick=e.inSessionTimeBetweenViewAndCtaClick;this.action=e.action;this.uiRegion=e.uiRegion;this.hasAutomatedLabReview=e.hasAutomatedLabReview;this.labTaskNumber=e.labTaskNumber}}class w extends f["a"]{constructor(e){let{labId:t,page:r,index:n,uiRegion:i}=e;super("LabCardClickEvent");this.labId=t;this.page=r;this.index=n;this.uiRegion=i}}class E extends f["a"]{constructor(e){let{lab:t,mode:r,labTakingSession:n}=e;super("LabCompleted");this.lab=t;this.mode=r;this.labTakingSession=n}}class S extends f["a"]{constructor(e){let{lab:t,mode:r,uiRegion:n,isLabInstancePaused:i,labTakingSession:o}=e;super("LabExited");this.lab=t;this.mode=r;this.uiRegion=n;this.isLabInstancePaused=i;this.labTakingSession=o}}class _ extends f["a"]{constructor(e){super("LabHeartbeatEvent");this.labInstanceUuid=e.labInstanceUuid;this.startTime=e.startTime;this.durationMs=e.durationMs;this.hasFocus=e.hasFocus;this.hasKeyboardMouse=e.hasKeyboardMouse;this.labCompletionMode=e.labCompletionMode}}var x=r("./src/udemy/js/labs/events/lab-in-course-prompt-action-event.ts");class D extends f["a"]{constructor(e){super("LabOverviewVisitEvent");this.labId=e.labId;this.isUnstartedVisit=e.isUnstartedVisit}}class C extends f["a"]{constructor(e){let{lab:t,mode:r,uiRegion:n,isLabInstanceResumed:i,labTakingSession:o}=e;super("LabResumed");this.lab=t;this.mode=r;this.uiRegion=n;this.isLabInstanceResumed=i;this.labTakingSession=o}}class T extends f["a"]{constructor(e){let{lab:t,uiRegion:r,sourcePageType:n,sourcePageId:i,trackingId:o}=e;super("LabSelected");this.lab=t;this.uiRegion=r;this.trackingId=o;this.sourcePageType=n;this.sourcePageId=i}}class O extends f["a"]{constructor(e){let{lab:t,uiRegion:r,mode:n}=e;super("LabStarted");this.lab=t;this.uiRegion=r;this.mode=n}}class k extends f["a"]{constructor(e){let{lab:t,mode:r,labTask:n,labTakingSession:i}=e;super("LabTaskCompleted");this.lab=t;this.mode=r;this.labTask=n;this.labTakingSession=i}}class P extends f["a"]{constructor(e){let{lab:t,workspace:r,mode:n,uiRegion:i,labTakingSession:o}=e;super("LabWorkspaceLaunched");this.lab=t;this.workspace=r;this.mode=n;this.uiRegion=i;this.labTakingSession=o}}class A extends f["a"]{constructor(e){super("LabsHeaderClickEvent");this.sourceComponent=e}}class I extends f["a"]{constructor(e){let{labId:t,labInstanceUuid:r,labVertical:n,labCompletionMode:i}=e;super("LabsResumeBannerDismissClickEvent");this.labId=t;this.labInstanceUuid=r;this.labVertical=n;this.labCompletionMode=i}}class j extends f["a"]{constructor(e){let{labId:t,labInstanceUuid:r,labVertical:n,labCompletionMode:i}=e;super("LabsResumeBannerEndLabClickEvent");this.labId=t;this.labInstanceUuid=r;this.labVertical=n;this.labCompletionMode=i}}class R extends f["a"]{constructor(e){let{labId:t,labInstanceUuid:r,labVertical:n,labCompletionMode:i}=e;super("LabsResumeBannerViewEvent");this.labId=t;this.labInstanceUuid=r;this.labVertical=n;this.labCompletionMode=i}}class N extends f["a"]{constructor(e){let{sourceComponent:t,searchTerm:r,searchCategory:n,numResults:i,ordering:o,isPopularTopicPillSelected:a,features:s}=e;super("LabsSearchEvent");this.sourceComponent=t;this.searchTerm=r;this.searchCategory=n;this.numResults=i;this.ordering=o;this.isPopularTopicPillSelected=a;this.features=s}}r.d(t,"qc",(function(){return L}));r.d(t,"t",(function(){return me}));r.d(t,"y",(function(){return ke}));r.d(t,"kc",(function(){return Pe}));r.d(t,"s",(function(){return Ie}));r.d(t,"qb",(function(){return je}));r.d(t,"Hb",(function(){return Re}));r.d(t,"xc",(function(){return Ne}));r.d(t,"Jb",(function(){return Le}));r.d(t,"ic",(function(){return qe}));r.d(t,"jc",(function(){return Ue}));r.d(t,"wc",(function(){return He}));r.d(t,"rc",(function(){return Fe}));r.d(t,"fb",(function(){return Be}));r.d(t,"kb",(function(){return ze}));r.d(t,"q",(function(){return Ve}));r.d(t,"rb",(function(){return We}));r.d(t,"R",(function(){return Ge}));r.d(t,"a",(function(){return Ke}));r.d(t,"H",(function(){return $e}));r.d(t,"p",(function(){return Xe}));r.d(t,"uc",(function(){return Ye}));r.d(t,"vc",(function(){return Qe}));r.d(t,"b",(function(){return Je}));r.d(t,"mb",(function(){return Ze}));r.d(t,"Z",(function(){return et}));r.d(t,"nb",(function(){return tt}));r.d(t,"W",(function(){return rt}));r.d(t,"Y",(function(){return nt}));r.d(t,"ob",(function(){return it}));r.d(t,"pb",(function(){return ot}));r.d(t,"T",(function(){return at}));r.d(t,"U",(function(){return st}));r.d(t,"gb",(function(){return lt}));r.d(t,"ib",(function(){return ct}));r.d(t,"hb",(function(){return ut}));r.d(t,"jb",(function(){return pt}));r.d(t,"eb",(function(){return dt}));r.d(t,"Ec",(function(){return ht}));r.d(t,"P",(function(){return mt}));r.d(t,"d",(function(){return ft}));r.d(t,"g",(function(){return gt}));r.d(t,"I",(function(){return yt}));r.d(t,"vb",(function(){return bt}));r.d(t,"V",(function(){return vt}));r.d(t,"wb",(function(){return wt}));r.d(t,"Ab",(function(){return Et}));r.d(t,"xb",(function(){return St}));r.d(t,"yb",(function(){return _t}));r.d(t,"zb",(function(){return Dt}));r.d(t,"X",(function(){return Ct}));r.d(t,"S",(function(){return Tt}));r.d(t,"Zb",(function(){return Ot}));r.d(t,"Yb",(function(){return kt}));r.d(t,"Xb",(function(){return Pt}));r.d(t,"Mb",(function(){return At}));r.d(t,"Ac",(function(){return It}));r.d(t,"F",(function(){return jt}));r.d(t,"w",(function(){return Rt}));r.d(t,"x",(function(){return Nt}));r.d(t,"Lb",(function(){return Lt}));r.d(t,"Kb",(function(){return Mt}));r.d(t,"L",(function(){return qt}));r.d(t,"M",(function(){return Ut}));r.d(t,"j",(function(){return Ht}));r.d(t,"Wb",(function(){return Ft}));r.d(t,"C",(function(){return Bt}));r.d(t,"B",(function(){return zt}));r.d(t,"z",(function(){return Vt}));r.d(t,"A",(function(){return Wt}));r.d(t,"D",(function(){return Gt}));r.d(t,"Vb",(function(){return $t}));r.d(t,"r",(function(){return Xt}));r.d(t,"sc",(function(){return Yt}));r.d(t,"G",(function(){return Qt}));r.d(t,"E",(function(){return Jt}));r.d(t,"oc",(function(){return Zt}));r.d(t,"pc",(function(){return er}));r.d(t,"Bb",(function(){return tr}));r.d(t,"Qb",(function(){return rr}));r.d(t,"tb",(function(){return nr}));r.d(t,"ub",(function(){return ir}));r.d(t,"ab",(function(){return or}));r.d(t,"bb",(function(){return ar}));r.d(t,"cb",(function(){return sr}));r.d(t,"sb",(function(){return lr}));r.d(t,"Dc",(function(){return ur}));r.d(t,"Rb",(function(){return pr}));r.d(t,"Sb",(function(){return dr}));r.d(t,"Pb",(function(){return mr}));r.d(t,"Ob",(function(){return fr}));r.d(t,"Nb",(function(){return gr}));r.d(t,"Cc",(function(){return yr}));r.d(t,"lb",(function(){return br}));r.d(t,"Ub",(function(){return vr}));r.d(t,"fc",(function(){return Er}));r.d(t,"ec",(function(){return Sr}));r.d(t,"cc",(function(){return _r}));r.d(t,"dc",(function(){return xr}));r.d(t,"gc",(function(){return Dr}));r.d(t,"hc",(function(){return Cr}));r.d(t,"bc",(function(){return Tr}));r.d(t,"e",(function(){return Or}));r.d(t,"h",(function(){return kr}));r.d(t,"o",(function(){return Pr}));r.d(t,"J",(function(){return Ar}));r.d(t,"yc",(function(){return Ir}));r.d(t,"Q",(function(){return jr}));r.d(t,"f",(function(){return Rr}));r.d(t,"tc",(function(){return Nr}));r.d(t,"Tb",(function(){return Lr}));r.d(t,"K",(function(){return Mr}));r.d(t,"i",(function(){return qr}));r.d(t,"N",(function(){return Ur}));r.d(t,"ac",(function(){return Hr}));r.d(t,"O",(function(){return Fr}));r.d(t,"zc",(function(){return Br}));r.d(t,"u",(function(){return zr}));r.d(t,"v",(function(){return Vr}));r.d(t,"k",(function(){return Wr}));r.d(t,"l",(function(){return Gr}));r.d(t,"lc",(function(){return Kr}));r.d(t,"Bc",(function(){return $r}));r.d(t,"Cb",(function(){return Xr}));r.d(t,"n",(function(){return Yr}));r.d(t,"m",(function(){return Qr}));r.d(t,"mc",(function(){return Jr}));r.d(t,"nc",(function(){return Zr}));r.d(t,"db",(function(){return en}));r.d(t,"Db",(function(){return tn}));r.d(t,"Fb",(function(){return rn}));r.d(t,"Gb",(function(){return nn}));r.d(t,"Eb",(function(){return on}));r.d(t,"c",(function(){return an}));r.d(t,"Ib",(function(){return sn}));const L=2e3;const M="connect";const q="connect_error";const U="error";const H="disconnect";const F="reconnect";const B="reconnect_attempt";const z=" unauthorized";const V="read-source-dir";const W="read-source-code";const G=`${W}:error`;const K="write-source-code";const $=`${K}:success`;const X=`${K}:error`;const Y="delete-file";const Q="delete-folder";const J="rename";const Z=`${Y}:error`;const ee=`${Q}:error`;const te=`${Y}:success`;const re=`${Q}:success`;const ne=`${J}:error`;const ie=`${J}:success`;const oe="create-folder";const ae="create-file";const se=`${oe}:error`;const le=`${ae}:error`;const ce=`${ae}:success`;const ue=`${oe}:success`;const pe="upload-file";const de=`${pe}:success`;const he=`${pe}:error`;const me="export-source-code";const fe=`${me}:success`;const ge=`${me}:error`;const ye="terminal:input";const be="terminal:geometry";const ve="terminal:output";const we="terminal:set-options";const Ee="terminal:resize";const Se="terminal:error";const _e="ssherror";const xe="lab-ready";const De="log-tail";const Ce="log-tail:log-info";const Te="log-tail:is-paused";const Oe="supported-features";const ke="preview_window_loading";const Pe="search";const Ae=24*3600*1e3;const Ie=Object.freeze({SOCKET_CONNECT:M,SOCKET_CONNECT_ERROR:q,SOCKET_ERROR:U,SOCKET_DISCONNECT:H,SOCKET_RECONNECT:F,SOCKET_RECONNECT_ATTEMPT:B,SOCKET_UNAUTHORIZED:z,READ_DIR:V,READ_SOURCE_CODE:W,READ_SOURCE_CODE_ERROR:G,RENAME:J,RENAME_ERROR:ne,RENAME_SUCCESS:ie,DELETE_FILE:Y,DELETE_FOLDER:Q,DELETE_FILE_ERROR:Z,DELETE_FILE_SUCCESS:te,DELETE_FOLDER_ERROR:ee,DELETE_FOLDER_SUCCESS:re,CREATE_FILE:ae,CREATE_FOLDER:oe,CREATE_FILE_ERROR:le,CREATE_FOLDER_ERROR:se,CREATE_FILE_SUCCESS:ce,CREATE_FOLDER_SUCCESS:ue,WRITE_SOURCE_CODE:K,WRITE_SOURCE_CODE_ERROR:X,WRITE_SOURCE_CODE_SUCCESS:$,UPLOAD_FILE:pe,UPLOAD_FILE_SUCCESS:de,UPLOAD_FILE_ERROR:he,TERMINAL_INPUT:ye,TERMINAL_OUTPUT:ve,TERMINAL_SET_OPTIONS:we,TERMINAL_RESIZE:Ee,TERMINAL_ERROR:Se,TERMINAL_GEOMETRY:be,SSH_ERROR:_e,LAB_READY:xe,LOG_TAIL:De,LOG_TAIL_LOG_INFO:Ce,LOG_TAIL_IS_PAUSED:Te,SUPPORTED_FEATURES:Oe,EXPORT_SOURCE_CODE:me,EXPORT_SOURCE_CODE_SUCCESS:fe,EXPORT_SOURCE_CODE_ERROR:ge});const je=Object.freeze({vocareum:"vocareum",udemy:"udemy"});const Re=Object.freeze({aws:{key:"aws",get label(){return gettext("AWS")},glyph:"cloud",iconComponent:a.a},azure:{key:"azure",get label(){return gettext("Azure")},glyph:"cloud",iconComponent:a.a},gcp:{key:"gcp",get label(){return gettext("Google Cloud Provider")},glyph:"cloud",iconComponent:a.a},web:{key:"web",get label(){return gettext("Web")},glyph:"code",iconComponent:l.a},data_science:{key:"data_science",get label(){return gettext("Data Science")},glyph:"bar-chart",iconComponent:i.a},devops:{key:"devops",get label(){return gettext("DevOps")},glyph:"server",iconComponent:d.a},security:{key:"security",get label(){return gettext("Security")},glyph:"security",iconComponent:u.a}});const Ne=Object.freeze({4452:"aws",6716:"azure",8322:"web",5336:"data_science",5404:"devops",5988:"gcp",5316:"security"});const Le=Object.freeze({aws:{id:4452,get title(){return gettext("Amazon AWS")},is_vertical_topic:true},azure:{id:6716,get title(){return gettext("Microsoft Azure")},is_vertical_topic:true},gcp:{id:5988,get title(){return gettext("Google Cloud Platform")},is_vertical_topic:true},web:{id:8322,get title(){return gettext("Software Development")},is_vertical_topic:true},data_science:{id:5336,get title(){return gettext("Data Science")},is_vertical_topic:true},devops:{id:5404,get title(){return gettext("DevOps")},is_vertical_topic:true},security:{id:5316,get title(){return gettext("Security")},is_vertical_topic:true}});const Me=Object.freeze({gcp:{key:"gcp",get label(){return gettext("Google Cloud Platform")}},compute_engine:{key:"compute_engine",get label(){return gettext("Compute Engine")}},azure:{key:"azure",get label(){return gettext("Azure")},has_alr:true},virtual_machine:{key:"virtual-machine",get label(){return gettext("Virtual machine")}},storage:{key:"table-storage",get label(){return gettext("Table storage")}},aws:{key:"aws",get label(){return gettext("AWS")},has_alr:true},ec2:{key:"ec2",get label(){return gettext("EC2")}},load_balancer:{key:"load-balancer",get label(){return gettext("Load Balancer")}},vpc:{key:"vpc",get label(){return gettext("VPC")}},s3:{key:"s3",get label(){return gettext("S3")}},lambda:{key:"lambda",get label(){return gettext("Lambda")}},athena:{key:"athena",get label(){return gettext("Athena")}},cloud_formation:{key:"cloud-formation",get label(){return gettext("CloudFormation")}},glue:{key:"glue",get label(){return gettext("Glue")}},java:{key:"java",get label(){return gettext("Java")}},spring:{key:"spring",get label(){return gettext("Spring")}},html:{key:"html",get label(){return gettext("HTML")}},css:{key:"css",get label(){return gettext("CSS")}},react:{key:"react",get label(){return gettext("React")}},python:{key:"python",get label(){return gettext("Python")},has_alr:true},flask:{key:"flask",get label(){return gettext("Flask")}},mongodb:{key:"mongodb",get label(){return gettext("MongoDB")}},redux:{key:"redux",get label(){return gettext("Redux")}},mysql:{key:"mysql",get label(){return gettext("MySQL")},has_alr:true},typescript:{key:"typescript",get label(){return gettext("Typescript")}},express:{key:"express",get label(){return gettext("Express")}},data_science:{key:"data_science",get label(){return gettext("Data science")},has_alr:true},devops:{key:"devops",get label(){return gettext("DevOps")},has_alr:true},git:{key:"git",get label(){return gettext("Git")}},jenkins:{key:"jenkins",get label(){return gettext("Jenkins")}},ansible:{key:"ansible",get label(){return gettext("Ansible")}},docker:{key:"docker",get label(){return gettext("Docker")}},kubernetes:{key:"kubernetes",get label(){return gettext("Kubernetes")},has_alr:true},security:{key:"security",get label(){return gettext("Security")}},linux:{key:"linux",get label(){return gettext("Linux")}}});const qe=Object.freeze({all:Object.freeze({key:"all",get label(){return gettext("All")},verticals:[Re.aws.key,Re.azure.key,Re.gcp.key,Re.data_science.key,Re.devops.key,Re.security.key,Re.web.key]}),cloud:Object.freeze({key:"cloud",get label(){return gettext("Cloud computing")},verticals:[Re.aws.key,Re.azure.key,Re.gcp.key]}),dev:Object.freeze({key:"dev",get label(){return gettext("Development")},verticals:[Re.web.key,Re.devops.key]}),data_science:Object.freeze({key:"data_science",get label(){return gettext("Data science")},verticals:[Re.data_science.key]}),security:Object.freeze({key:"security",get label(){return gettext("IT Operations")},verticals:[Re.security.key]})});const Ue=Object.freeze({all:qe.all,dev:qe.dev,data_science:qe.data_science});const He=Object.freeze({[qe.all.key]:Object.keys(Me).map((e=>Me[e])),[qe.cloud.key]:[Me.gcp,Me.compute_engine,Me.azure,Me.storage,Me.virtual_machine,Me.aws,Me.athena,Me.cloud_formation,Me.glue,Me.ec2,Me.lambda,Me.load_balancer,Me.s3,Me.vpc],[Re.gcp.key]:[Me.gcp,Me.compute_engine],[Re.security.key]:[Me.security,Me.linux],[qe.dev.key]:[Me.css,Me.express,Me.flask,Me.html,Me.java,Me.mongodb,Me.mysql,Me.python,Me.react,Me.redux,Me.spring,Me.typescript,Me.devops,Me.git,Me.ansible,Me.jenkins,Me.docker,Me.kubernetes,Me.security],[qe.data_science.key]:[Me.data_science]});const Fe=Object.freeze({[Re.aws.key]:{MX:140,UB:390},[Re.azure.key]:{MX:140,UB:390},[Re.gcp.key]:{MX:140,UB:390},[Re.web.key]:{MX:8,UB:414},[Re.devops.key]:{MX:362,UB:406},[Re.data_science.key]:{MX:558,UB:504},[Re.security.key]:{MX:134,UB:442}});const Be={starting:"starting",running:"running",queued:"queued",stopping:"stopping",stopped:"stopped",killing:"killing",killed:"killed",admin_killing:"admin_killing",admin_killed:"admin_killed",deactivated:"deactivated",error:"error"};const ze="/labs/listing/";const Ve={get RENAME(){return gettext("Failed to change the name.")},get DELETE_FOLDER(){return gettext("Failed to delete the folder.")},get DELETE_FILE(){return gettext("Failed to delete the file.")},get CREATE_FILE(){return gettext("Failed to create a file")},get CREATE_FOLDER(){return gettext("Failed to create a folder")},get UPLOAD_FILE(){return gettext("Failed to upload a file")},get CONNECTION(){return gettext("Connection error")},get WRITE_FILE(){return gettext("Failed to save a file")}};const We={pending_create:"creating",draft:"draft",in_review:"in_review",pending_publish:"publishing",published:"published",unpublished:"unpublished",deleted:"deleted"};const Ge={base:"base",test_creator:"test-creator",edit:"edit",full:"full",admin:"admin",admin_eng:"admin-eng"};const Ke=[Ge.admin,Ge.admin_eng];const $e=Ke.concat([Ge.full]);const Xe=$e.concat([Ge.edit]);const Ye=Xe.concat([Ge.test_creator]);const Qe=$e.concat([Ge.test_creator]);const Je=Xe.concat([Ge.base]);const Ze={FOLLOW_ALONG:"follow_along",STRUCTURED:"structured",OPEN:"open"};const et={follow_along:"follow_along",structured:"guided",guided:"guided",open:"open"};const tt=[Ze.STRUCTURED];const rt=[Re.aws.key,Re.azure.key,Re.gcp.key];const nt=[Re.web.key,Re.devops.key,Re.data_science.key,Re.security.key];const it=[We.pending_create,We.pending_publish];const ot=[We.draft,We.published];const at=[We.draft,We.in_review,We.published];const st={[We.draft]:{get label(){return gettext("DRAFT")}},[We.in_review]:{get label(){return gettext("IN REVIEW")}},[We.published]:{get label(){return gettext("LIVE")}}};const lt={get starting(){return gettext("Provisioning resources")},get pending(){return gettext("Pending")},get running(){return gettext("In use")},get queued(){return gettext("Queued")},get stopping(){return gettext("Pausing...")},get stopped(){return gettext("Paused")},get killing(){return gettext("Ending...")},get killed(){return gettext("Not in use")},get deactivated(){return gettext("Out of resources")},get not_in_use(){return gettext("Not in use")}};const ct=[Be.starting,Be.queued,Be.stopping,Be.killing];const ut=[Be.stopping,Be.killing];const pt=[Be.killed,Be.killing,Be.admin_killing,Be.admin_killed,Be.deactivated];const dt={NOT_FOUND:"not_found",UNSTARTABLE:"unstartable",UNKNOWN:"unknown"};const ht=e=>`/labs/${e}/loading/`;const mt="/labs/";const ft="https://signin.aws.amazon.com/oauth?Action=logout&redirect_uri=aws.amazon.com";const gt="https://login.microsoftonline.com/common/oauth2/logout";const yt="https://accounts.google.com/Logout?service=cloudconsole&continue=https://console.cloud.google.com/&hl=en_US";const bt=Object.freeze({HEARTBEAT:_,LAB_CARD_CLICK:w,CLICK:v,OVERVIEW_PAGE_VISIT:D,SEARCH:N,HEADER_CLICK:A,LAB_IN_COURSE_PROMPT_ACTION:x["a"],RESUME_BANNER_DISMISS_CLICK:I,RESUME_BANNER_END_LAB_CLICK:j,RESUME_BANNER_VIEW:R,LAB_STARTED:O,LAB_COMPLETED:E,LAB_EXITED:S,LAB_RESUMED:C,LAB_TASK_COMPLETED:k,LAB_WORKSPACE_LAUNCHED:P,LAB_TASK_REVIEW_REQUESTED:g,LAB_SELECTED:T});const vt=Object.freeze({MODULAR_LAB_CARD_CLICK:"modular_lab_card_click",MODULAR_LAB_START_LAB_CLICK:"modular_lab_start_lab_click",MODULAR_LAB_SEE_YOUR_TASKS_CLICK:"modular_lab_see_your_tasks_click",MODULAR_LAB_SEE_PROJECT_RESOURCES_CLICK:"modular_lab_see_project_resources_click",MODULAR_LAB_NAV_INBOX_CLICK:"modular_lab_nav_inbox_click",MODULAR_LAB_NAV_TASKS_CLICK:"modular_lab_nav_tasks_click",MODULAR_LAB_WORKSPACE_LAUNCH:"modular_lab_workspace_launch",MODULAR_LAB_START_TASK_REVIEW:"modular_lab_start_task_review",MODULAR_LAB_COMPLETE_TASK_CLICK:"modular_lab_complete_task_click",MODULAR_LAB_COMPLETE_LAB_CLICK:"modular_lab_complete_lab_click",MODULAR_LAB_RESOURCES_FOLDER_CLICK:"modular_lab_resources_folder_click",MODULAR_LAB_RESOURCE_CLICK:"modular_lab_resource_click",MODULAR_LAB_RESOURCE_DOWNLOAD:"modular_lab_resource_download",MODULAR_LAB_RESTART_TASK_CLICK:"modular_lab_restart_task_click",MODULAR_LAB_RESTART_LAB_CLICK:"modular_lab_restart_lab_click",MODULAR_LAB_SHOW_API_KEYS_CLICK:"modular_lab_show_api_keys_click",MODULAR_LAB_CLOSE_API_KEYS_CLICK:"modular_lab_close_api_keys_click",MODULAR_LAB_CONTINUE_LAB_CLICK:"modular_lab_continue_lab_click",MODULAR_LAB_RETAKE_LAB_CLICK:"modular_lab_retake_lab_click",MODULAR_LAB_REPORT_TASK_ISSUE_CLICK:"modular_lab_report_task_issue_click",WORKSPACE_LOGIN_ACCORDION_EXPAND:"workspace_login_accordion_expand",WORKSPACE_LOGIN_ACCORDION_COLLAPSE:"workspace_login_accordion_collapse",WORKSPACE_LOGIN_ADVANCED_ACCORDION_EXPAND:"workspace_login_advanced_accordion_expand",WORKSPACE_LOGIN_ADVANCED_ACCORDION_COLLAPSE:"workspace_login_advanced_accordion_collapse",WORKSPACE_LOGIN_OPEN_WORKSPACE_CLICK:"workspace_login_open_workspace_click",WORKSPACE_COPY_USERNAME_CLICK:"workspace_copy_username_click",WORKSPACE_COPY_PASSWORD_CLICK:"workspace_copy_password_click",WORKSPACE_COPY_RESOURCE_GROUP_CLICK:"workspace_copy_resource_group_click",WORKSPACE_LOGIN_MODAL_CLOSE:"workspace_login_modal_close",LAB_TAB_VISIT:"lab_tab_visit",SKIP_LABS_SETUP_CONFIRM:"skip_labs_setup_confirm",SKIP_LABS_SETUP_DISMISS:"skip_labs_setup_dismiss",SW_LAB_FILE_CREATE:"sw_lab_file_create",SW_LAB_FOLDER_CREATE:"sw_lab_folder_create",SW_LAB_FILE_UPLOAD:"sw_lab_file_upload",SW_LAB_EXPORT_SOURCE_CODE:"sw_lab_export_source_code",SW_LAB_AUTOSAVE_TRIGGER:"sw_lab_autosave_trigger",SW_LAB_PANEL_PREVIEW_REFRESH_CLICK:"sw_lab_panel_preview_refresh_click",SW_LAB_PANEL_PREVIEW_NEW_WINDOW_CLICK:"sw_lab_panel_preview_new_window_click",SW_LAB_PANEL_PREVIEW_EXPAND_CLICK:"sw_lab_panel_preview_expand_click",LAUNCH:"launch",CONNECT:"connect",PAUSE:"pause",RESUME:"resume",END:"end",END_CONFIRM:"end_confirm",END_CANCEL:"end_cancel",EDIT:"edit",PUBLISH:"publish",UNPUBLISH:"unpublish",DELETE:"delete",LOGS_MODAL_OPEN:"logs_modal_open",LOGS_MODAL_CLOSE:"logs_modal_close"});const wt=Object.freeze({INBOX:"inbox",HEADER:"lab_header",REVIEW:"review_toaster"});const Et=Object.freeze({LAB_WORKSPACE_LAUNCHER:"lab_workspace_launcher",LAB_TAKING_PAGE:"lab_taking_page",REVIEW_PANEL:"review_panel"});const St=Object.freeze({LEAVE_LAB_MODAL:"leave_lab_modal",LAB_TAKING_PAGE:"lab_taking_page"});const _t=Object.freeze({WELCOME_BACK_MODAL:"welcome_back_modal",LAB_TAKING_PAGE:"lab_taking_page",LAB_WORKSPACE_LAUNCHER:"lab_workspace_launcher"});const xt=Object.freeze({MY_LEARNING_UNIT_LABS_TAB:"my_learning_unit_labs_tab",MY_LEARNING_PAGE_LABS_TAB:"my_learning_page_labs_tab",LABS_LANDING_PAGE_SEARCH_RESULTS:"labs_landing_page_search_results",LABS_IN_COURSE_PROMPT:"labs_in_course_prompt",LABS_IN_SEARCH:"labs_in_search",LABS_UNIT_LIHP:"labs_unit_lihp",LABS_UNIT_TOPIC:"labs_unit_topic",LABS_RELATED_UNIT:"labs_related_unit",LABS_IN_PROGRESS_UNIT:"labs_in_progress_unit",LAB_CARD_QUICK_PREVIEW:"quick_preview",LAB_RECOMMENDATION:"lab_recommendation"});const Dt=Object.freeze({[h["a"].MY_LEARNING_LABS_TAB]:xt.MY_LEARNING_UNIT_LABS_TAB,[h["a"].MY_LEARNING_LABS_PAGE]:xt.MY_LEARNING_PAGE_LABS_TAB,[h["a"].LABS_LANDING_PAGE]:xt.LABS_LANDING_PAGE_SEARCH_RESULTS,[h["a"].LABS_IN_COURSE_PROMPT]:xt.LABS_IN_COURSE_PROMPT,[h["a"].LABS_IN_SEARCH]:xt.LABS_IN_SEARCH,[h["a"].LABS_UNIT_LIHP]:xt.LABS_UNIT_LIHP,[h["a"].LABS_UNIT_TOPIC]:xt.LABS_UNIT_TOPIC,[h["a"].LAB_LISTING_PAGE]:xt.LABS_IN_PROGRESS_UNIT,[h["a"].LAB_OVERVIEW_PAGE]:xt.LABS_RELATED_UNIT,[m["a"].QUICK_PREVIEW]:xt.LAB_CARD_QUICK_PREVIEW,[m["a"].LAB_RECOMMENDATION]:xt.LAB_RECOMMENDATION});const Ct=Object.freeze({MODULAR_LAB_TAKING:"modular_lab_taking",MODULAR_LAB_WORKSPACE_LAUNCHER:"modular_lab_workspace_launcher"});const Tt=1e3;const Ot=250;const kt=15e3;const Pt=3e5;const At=10;const It=Object.freeze({INSTRUCTOR:"Instructor",STUDENT:"Student"});const jt=3e3;const Rt=Object.freeze({js:"jsx",jsx:"jsx",css:"css",py:"python",sql:"sql",sh:"sh",ejs:"html",html:"html",java:"java",json:"json",ts:"typescript",tsx:"typescript",xml:"xml",yaml:"yaml",yml:"yaml",r:"r",R:"r",ipynb:"json"});const Nt=["md","txt","properties"];const Lt="Makefile";const Mt=[Lt,"Dockerfile"];const qt=["png","jpg","jpeg","gif","bmp","ico"];const Ut={jpg:"jpeg",ico:"x-icon"};const Ht="text";const Ft="/";const Bt="rename";const zt="delete";const Vt="create_file";const Wt="create_folder";const Gt="upload_file";const Kt=5e3;const $t={autoDismiss:true,autoDismissTimeout:Kt};const Xt=Object.freeze({udStyle:"error",get ctaText(){return gettext("Close")},dismissButtonProps:false});const Yt=Object.freeze({udStyle:"success",showCta:false,dismissButtonProps:false});const Qt=5;const Jt={get FOLDER_DELETE_TEXT(){return gettext("Are you sure you want to delete the folder %(name)s")},get FILE_DELETE_TEXT(){return gettext("Are you sure you want to delete the file %(name)s")},get FILE_UPLOAD_SIZE_NOTIFICATION(){return interpolate(gettext("File size should be less or equal to %(size)s MB"),{size:Qt},true)}};const Zt=3;const er=500;const tr=Object.freeze({workspace:{key:"workspace",get label(){return gettext("Workspace")}},modular:{key:"modular",get label(){return gettext("Modular Lab")}},dev_workspace:{key:"dev_workspace",get label(){return gettext("Instructor Development Workspace")}}});const rr=3;const nr={[tr.workspace.key]:30,[tr.modular.key]:rr*60,[tr.dev_workspace.key]:30};const ir={[tr.workspace.key]:nr[tr.workspace.key]*60*1e3,[tr.modular.key]:nr[tr.modular.key]*60*1e3,[tr.dev_workspace.key]:nr[tr.dev_workspace.key]*60*1e3};const or=14;const ar=14*24*60;const sr=or*24*60*60*1e3;const lr=180;const cr=1;const ur=cr*60*1e3;const pr=30;const dr=pr*60*1e3;const hr=12;const mr=hr*60*60*1e3;const fr=15;const gr=120;const yr=3;const br=Object.freeze({get START_LAB_FEEDBACK(){return gettext("There was a problem starting your lab. Please refresh your browser and try again.")},get STOP_LAB_FEEDBACK(){return gettext("There was a problem stopping your lab. Please refresh your browser and try again.")},get SYNC_LAB_FEEDBACK(){return gettext("There was a problem syncing labs for this course. Please refresh your browser.")},get TERMINATE_LAB_FEEDBACK(){return gettext("There was a problem terminating your lab. Please refresh your browser and try again.")},get MODULAR_LABS_TIME_LIMIT_MESSAGE(){return interpolate(gettext("In order to conserve resources, your Workspace will be active for a maximum time of %(labTimeLimitHrs)s hours. We will let you know once you have %(warningTimeMin)s minutes left of work. If you manually end your Workspace or automatically reach the time limit, your work will no longer be available."),{labTimeLimitHrs:nr[tr.modular.key]/60,warningTimeMin:pr},true)}});const vr={RUNNING_INSTANCES:"running_instances",TERMINATING_EXISTING_INSTANCES:"terminating_existing_instances",TERMINATE_DONE:"terminate_done"};const wr="asset";const Er="how_to";const Sr="documentation";const _r="asset";const xr="azure_resource";const Dr="initial_source_code";const Cr="solution_source_code";const Tr={[Er]:{get label(){return gettext("How-to")}},[Sr]:{get label(){return gettext("Documentation")}},[_r]:{get label(){return gettext("Assets")}},[xr]:{get label(){return gettext("Azure resources")}},[Dr]:{get label(){return gettext("Initial source code")}},[Cr]:{get label(){return gettext("Peer solution")}}};const Or="https://aws.amazon.com/privacy/";const kr="https://privacy.microsoft.com/en-us/privacystatement";const Pr="https://www.vocareum.com/privacy-policy/";const Ar="https://cloud.google.com/terms/cloud-privacy-notice/";const Ir="/terms/upro-terms/";const jr={get AWS(){return b["a"].toSupportLink("labs_aws_support_article",true)},get AZURE(){return b["a"].toSupportLink("labs_azure_support_article",true)},get GCP(){return b["a"].toSupportLink("labs_azure_support_article",true)},get DATA_SCIENCE(){return b["a"].toSupportLink("labs_data_science_support_article",true)},get WEB_DEVELOPMENT(){const e=Object(y["a"])();return b["a"].toSupportLink("labs_web_development_support_article",e.brand.has_organization)},get DEVOPS(){return b["a"].toSupportLink("labs_devops_support_article",true)},get SECURITY(){return b["a"].toSupportLink("labs_devops_support_article",true)},get MODE_SELECT(){return b["a"].toSupportLink("labs_select_mode_support_article",true)},get AUTOMATED_LAB_REVIEWS(){const e=Object(y["a"])();return b["a"].toSupportLink("labs_alr_support_article",e.brand.has_organization)}};const Rr="https://docs.microsoft.com/en-us/cli/azure/get-started-with-azure-cli";const Nr=Object.freeze({get first(){return gettext("Thanks for making an effort on this first task! You can see my solution steps below to check your work under “How-to”. Once you've checked your work, I’ll share the next task. Glad to have you on this project!")},get second(){return gettext("Nice work tackling this task! As before, I’ve provided my solution below for you to check your work on this one. I’ll keep assigning you tasks and offering solutions this way going forward so that you can work at your own pace using the same process.")},get last(){return gettext("Congratulations on solving this complex problem! Make sure you check to see if your final task matches my intended outcome. Great work again! Looking forward to sharing your efforts with the broader team.")},get pool(){return[gettext("Another task down! You are making great progress. Keep at it! Don’t forget to compare your work to the solution below."),gettext("Ready to check your work? Take a look at my solution and carry on! Looking forward to seeing how you do with the next one."),gettext("Nice work tackling this task! I’ve provided my solution below for you to ensure you completed the steps correctly. Keep working at your own pace on these tasks! Looking forward to seeing what you can accomplish."),gettext("Great effort on completing this task. This project isn’t easy! You’re doing great work. Hope my solution can help you check your work on this one."),gettext("Loving the progress you’ve made here! Make sure you check your work against my solution. Let’s keep working together on these tasks to make this project a success!"),gettext("Looks like our collaborative process is working. Carry on with reviewing your work and I’ll check in after your next task!"),gettext("It’s great to see the progress on this project. Let’s stick to our system and check your work against my solution before moving on to the next task."),gettext("How did you feel about this one? Hope you were able to find a solution. Take a look at my steps to review. Really excited to see this project moving forward!"),gettext("Think you got this one? Check out my solution to see if you’re on the right track. Regardless, you’re doing a great job making an effort on this project. Keep going!"),gettext("Thanks for your work progressing through these tasks. Review my steps to ensure you’ve got it before moving on. Glad to see you’re making progress!")]}});const Lr=Object.freeze({get first(){return gettext("Thanks for making an effort on this first task! You can check your work using the reference materials provided. Once you've checked your work, I'll share the next task. Glad to have you on this project!")},get second(){return gettext("Nice work tackling this task! Please use the reference materials to check your work. I'll keep assigning you tasks this way, so that you can work at your own pace using the same process.")},get penultimate(){return gettext("You've come a long way on this project! Great to see you nearing the end. Looking forward to seeing the finished product.")},get last(){return gettext("Congratulations on solving this complex problem! Make sure you check to see if your final task matches my intended outcome. Great work again! Looking forward to sharing your efforts with the broader team.")},get pool(){return[gettext("Another task down! You are making great progress. Keep at it! Don't forget to compare your work to the reference material provided."),gettext("Ready to check your work? Take a look at the reference materials and carry on! Looking forward to seeing how you do with the next one."),gettext("Nice work tackling this task! I've provided reference materials to ensure you completed the steps correctly. Keep working at your own pace on these tasks! Looking forward to seeing what you can accomplish."),gettext("Great effort on completing this task. This project isn't easy! You're doing great work. Hope the reference material can help you check your work on this one."),gettext("Loving the progress you've made here! Make sure you check your work. Let's keep working together on these tasks to make this project a success!"),gettext("Looks like our collaborative process is working. Carry on with reviewing your work and I'll check in after your next task!"),gettext("It's great to see the progress on this project. Let's stick to our system and check your work against the reference material before moving on to the next task."),gettext("How did you feel about this one? Hope you were able to find a solution. Take a look at the reference material to review. Really excited to see this project moving forward!"),gettext("Think you got this one? Check out the reference materials to see if you're on the right track. Regardless, you're doing a great job making an effort on this project. Keep going!"),gettext("Thanks for your work progressing through these tasks. Review your work to ensure you've got it before moving on. Glad to see you're making progress!")]}});const Mr=["liveserver"];const qr=["java11-cli","java17-cli","python3-cli","python38-cli"];const Ur=["java11-cli","java17-cli"];const Hr=["python3-cli","python38-cli"];const Fr=500;const Br="user_checked_safari_settings";const zr="archive.zip";const Vr={type:"application/zip"};const Wr={"spring-mysql":{run:"make run",restart:"make restart"},"react-redux":{restart:"make webpack-restart"},"javascript-node16":{restart:"make webpack-restart"},"typescript-node16":{restart:"make webpack-restart"},ansible:{run:"make lab-run"}};const Gr={"jenkins-2-bare":{get title(){return"Jenkins"},get webPortal(){return true},get logWindowEnabled(){return true}},"jenkins-2-preloaded":{get title(){return"Jenkins"},get webPortal(){return true},get logWindowEnabled(){return true}},ubuntu:{get title(){return"Ubuntu"},get webPortal(){return false},get logWindowEnabled(){return true}},git:{get title(){return"Gitea"},get webPortal(){return true},get logWindowEnabled(){return true}},ansible:{get logWindowEnabled(){return false},get title(){return"Ansible"},get webPortal(){return true},get fullScreenTerminal(){return false}},jupyterlab:{get title(){return"Jupyterlab"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-r":{get title(){return"Jupyterlab (R)"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-julia":{get title(){return"Jupyterlab (Julia)"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-lightgbm":{get title(){return"Jupyterlab (LightGBM)"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-tensorflow":{get title(){return"Jupyterlab (Tensorflow)"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-prophet":{get title(){return"Jupyterlab (Prophet)"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-workspace":{get title(){return"Jupyterlab (Workspace)"},get webPortal(){return true},get codeEditor(){return true}},"jupyterlab-xgboost":{get title(){return"Jupyterlab (Xgboost)"},get webPortal(){return true},get codeEditor(){return true}},"tomcat-9":{get title(){return"Tomcat (9)"},get webPortal(){return true},get logWindowEnabled(){return true}},rstudio:{get title(){return"R Studio"},get codeEditor(){return true}},"rstudio-vocareum":{get title(){return"R Studio (Migrated)"},get codeEditor(){return true}},kubernetes:{get title(){return"Kubernetes"},get webPortal(){return true},get fullScreenTerminal(){return true},get logWindowEnabled(){return false}},docker:{get title(){return"Docker"},get webPortal(){return true},get fullScreenTerminal(){return true},get logWindowEnabled(){return false}},"phpmyadmin-mysql":{get title(){return"PhpMyAdmin / MySQL"},get webPortal(){return true},get logWindowEnabled(){return true}}};const Kr={vyos:{get title(){return"VyOS"},get webPortal(){return true},get fullScreenTerminal(){return true},get logWindowEnabled(){return false}},kali:{get title(){return"Kali Linux"},get webPortal(){return true},get fullScreenTerminal(){return true},get logWindowEnabled(){return false}}};const $r={"vscode-java17":{get title(){return"VSCode w/Java 17"},get webPortal(){return true}},"vscode-python38":{get title(){return"VSCode w/Python 3.8"},get webPortal(){return true}}};const Xr=[tr.workspace.key,tr.dev_workspace.key];const Yr=["ansible"];const Qr=["kubernetes","docker"];const Jr=["vyos","kali"];const Zr={"jenkins-2-preloaded":"jenkins","jenkins-2-bare":"jenkins","headless-spring":"spring","headless-tomcat":"tomcat"};const en=Object.freeze({ALR_FILTER:"alr_filter"});const tn=Object.freeze({LAUNCHER:"lab_launcher",MODE_SELECTOR:"lab_mode_selector"});const rn="lab_versioning";const nn="lab_versioning_enabled_in_lab_manage";const on=false;const an=1e3*60*10;const sn=[Re.azure.key,Re.aws.key,Re.gcp.key]},"./src/udemy/js/labs/events/lab-in-course-prompt-action-event.ts":function(e,t,r){"use strict";r.d(t,"b",(function(){return i}));r.d(t,"a",(function(){return o}));var n=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");const i={SHOW:"show",CLOSE:"close",DISMISS:"dismiss",NAVIGATE_AWAY:"navigate_away",EXPLORE_LABS:"explore_labs"};class o extends n["a"]{constructor(e){let{courseId:t,action:r}=e;super("LabInCoursePromptActionEvent");this.courseId=t;this.action=r}}},"./src/udemy/js/labs/lab-launcher/constants.js":function(e,t,r){"use strict";r.d(t,"f",(function(){return n}));r.d(t,"g",(function(){return i}));r.d(t,"e",(function(){return o}));r.d(t,"b",(function(){return a}));r.d(t,"d",(function(){return s}));r.d(t,"h",(function(){return l}));r.d(t,"c",(function(){return c}));r.d(t,"a",(function(){return u}));const n="default";const i="header";const o="course_taking";const a=50;const s=.5;const l=.8;const c=1e3;const u=Object.freeze({UNIX_CLIPBOARD:"#unix-keys",WIN_CLIPBOARD:"#win-keys",CREATE_STACK:"#create-stack",CHECK_STACK:"#check-stack",ADD_PARAMETERS:"#add-parameters"})},"./src/udemy/js/labs/utils.js":function(e,t,r){"use strict";var n=r("./src/udemy/js/utils/composed-path.js");var i=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./src/udemy/js/lab-taking/tasks/structured/automated-lab-review/constants.ts");var l=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class c extends l["a"]{constructor(e,t){super(e);this.automatedLabReview=t}}class u extends l["a"]{constructor(e){let{labId:t,labTaskId:r,labCompletionMode:n,testId:i,outputMessageType:o}=e;super("AutomatedLabReviewCheckOutputViewEvent");this.labId=t;this.labTaskId=r;this.labCompletionMode=n;this.testId=i;this.outputMessageType=o}}class p extends l["a"]{constructor(e,t,r){super(e);this.labId=t;this.labVertical=r}}class d extends l["a"]{constructor(e){let{labId:t,labVertical:r,estimatedLoadingTime:n,actualLoadingTime:i}=e;super("LabLoadingTimeAccuracyEvent");this.labId=t;this.labVertical=r;this.estimatedLoadingTimeInSeconds=n;this.actualLoadingTimeInSeconds=i}}class h extends l["a"]{constructor(e){let{labId:t,labVertical:r,labType:n,labMode:i,labTaskId:o,issueType:a,reportIssueId:s,withFile:l}=e;super("LabReportIssueEvent");this.labId=t;this.labVertical=r;this.labType=n;this.labMode=i;this.labTaskId=o;this.issueType=a;this.reportIssueId=s;this.withFile=l}}var m=r("./src/udemy/js/labs/workspace-notification/constants.ts");var f=r("./src/udemy/js/utils/get-experiment-data.js");var g=r("./src/udemy/js/utils/get-request-data.js");var y=r("./src/udemy/js/utils/ud-api.js");var b=r("./src/udemy/js/utils/ud-link.js");var v=r("./src/udemy/js/labs/apis.js");var w=r("./src/udemy/js/labs/constants.js");class E{constructor(e,t,r,n){let i=arguments.length>4&&arguments[4]!==undefined?arguments[4]:[];this.id=e;this.title=t;this.automatedReviewEnabled=r;this.primaryVertical=n;this.workspaces=i}}class S{constructor(e,t){this.sessionStartTime=e;this.sessionDurationSeconds=t}}class _{constructor(e,t,r,n){this.id=e;this.number=t;this.title=r;this.automatedReviewEnabled=n}}class x{constructor(e,t,r){this.id=e;this.vertical=t;this.instanceUuid=r}}var D=r("./src/udemy/js/labs/lab-launcher/constants.js");r.d(t,"f",(function(){return O}));r.d(t,"o",(function(){return k}));r.d(t,"q",(function(){return P}));r.d(t,"t",(function(){return A}));r.d(t,"r",(function(){return I}));r.d(t,"s",(function(){return j}));r.d(t,"m",(function(){return R}));r.d(t,"v",(function(){return N}));r.d(t,"n",(function(){return L}));r.d(t,"u",(function(){return M}));r.d(t,"G",(function(){return q}));r.d(t,"D",(function(){return U}));r.d(t,"N",(function(){return F}));r.d(t,"O",(function(){return B}));r.d(t,"F",(function(){return V}));r.d(t,"M",(function(){return W}));r.d(t,"P",(function(){return G}));r.d(t,"E",(function(){return K}));r.d(t,"R",(function(){return $}));r.d(t,"K",(function(){return X}));r.d(t,"T",(function(){return Y}));r.d(t,"S",(function(){return Q}));r.d(t,"H",(function(){return J}));r.d(t,"C",(function(){return Z}));r.d(t,"Q",(function(){return ne}));r.d(t,"B",(function(){return ie}));r.d(t,"A",(function(){return oe}));r.d(t,"a",(function(){return ae}));r.d(t,"b",(function(){return se}));r.d(t,"k",(function(){return le}));r.d(t,"g",(function(){return ce}));r.d(t,"h",(function(){return ue}));r.d(t,"c",(function(){return pe}));r.d(t,"e",(function(){return de}));r.d(t,"d",(function(){return he}));r.d(t,"y",(function(){return me}));r.d(t,"x",(function(){return fe}));r.d(t,"U",(function(){return ge}));r.d(t,"l",(function(){return ye}));r.d(t,"p",(function(){return be}));r.d(t,"I",(function(){return ve}));r.d(t,"J",(function(){return we}));r.d(t,"L",(function(){return Ee}));r.d(t,"z",(function(){return Se}));r.d(t,"i",(function(){return _e}));r.d(t,"j",(function(){return xe}));r.d(t,"w",(function(){return De}));const C=async(e,t)=>{const r=await y["f"].get(Object(v["m"])(e,t));return r.data.status};const T=async(e,t)=>{const r=await y["f"].get(Object(v["l"])(e),{params:{"fields[lab]":["title","lab_type","vertical","provider","spec","my_latest_instance"].join(","),...t===w["rb"].draft&&{version:"head"}}});return r.data};const O=async(e,t,r,n)=>{try{const i=await C(e,t);if(w["jb"].includes(i)){n(await T(e,r),w["eb"].UNSTARTABLE)}else if(i===w["fb"].running){n(await T(e,r))}else{setTimeout((()=>O(e,t,r,n)),w["qc"])}}catch(e){if(e.response.status===404){n(null,w["eb"].NOT_FOUND)}else{throw e}}};const k=async(e,t)=>{const r=await y["f"].post(Object(v["k"])(e,t));return r.data.token};const P=e=>{var t;return(t=Object.values(w["Bb"]).find((t=>t.key===e)))===null||t===void 0?void 0:t.label};const A=e=>{var t;return(t=Object.values(w["Hb"]).find((t=>t.key===e)))===null||t===void 0?void 0:t.label};const I=e=>{var t;return(t=Object.values(w["Hb"]).find((t=>t.key===e)))===null||t===void 0?void 0:t.glyph};const j=e=>{var t;return(t=Object.values(w["Hb"]).find((t=>t.key===e)))===null||t===void 0?void 0:t.iconComponent};const R=e=>{if(e===w["Hb"].aws.key){return gettext("Please note that while Workspaces allows you to interact with most AWS services, there are a few that are currently not supported, including IAM.")}else if(e===w["Hb"].azure.key){return gettext("Please note that while Workspaces allows you to interact with most Azure services, there are a few that are currently not supported.")}else if(e===w["Hb"].data_science.key){return gettext("Workspaces can take up anything from a few seconds to two minutes to load.")}return""};const N=e=>{if(e===w["Hb"].aws.key){return interpolate(gettext("Workspaces have a budget limit that provide sufficient opportunity to practice. "+"We will suspend access as soon as the limit is reached. "+"Please remember to stop resources in the AWS console when you're not practicing. "+'<a href="%(aws_support_article)s" rel="noopener,noreferrer">Learn more</a>.'),{aws_support_article:w["Q"].AWS},true)}else if(e===w["Hb"].azure.key){return interpolate(gettext("Workspaces have a budget limit that provide sufficient opportunity to practice. "+"We will suspend access as soon as the limit is reached. "+"Please remember to stop resources in the Azure console when you're not practicing. "+'<a href="%(azure_support_article)s" rel="noopener,noreferrer">Learn more</a>.'),{azure_support_article:w["Q"].AZURE},true)}else if(e===w["Hb"].data_science.key){return gettext("We want you to use the Workspaces to learn and have set the limits to provide sufficient opportunity to practice. "+"Remember to end the Workspace when done with an exercise and pause it when not in use. "+"Your Workspace will be automatically paused and ended after a period of inactivity.")}return""};const L=(e,t)=>{if(e===w["Hb"].aws.key){return interpolate(gettext("Launching the Workspace will require you to leave the Udemy platform and interact with Amazon Web Services (AWS)."+" Labs and workspaces are practice environments and data loss may occur if there are operational problems."+" Any personal data manually uploaded is subject to AWS privacy policy which can be accessed "+'<a href="%(privacy_policy_hyperlink)s" rel="noopener,noreferrer">here</a>.'),{privacy_policy_hyperlink:w["e"]},true)}else if(e===w["Hb"].azure.key){return interpolate(gettext("Launching the Workspace will require you to leave the Udemy platform and interact with Azure."+" Labs and workspaces are practice environments and data loss may occur if there are operational problems."+" Any personal data manually uploaded is subject to Azure privacy policy which can be accessed "+'<a href="%(privacy_policy_hyperlink)s" rel="noopener,noreferrer">here</a>.'),{privacy_policy_hyperlink:w["h"]},true)}else if(e===w["Hb"].data_science.key&&t!==w["qb"].udemy){return interpolate(gettext("Launching the Workspace will require you to leave the Udemy platform and interact with a third-party vendor."+" Labs and workspaces are practice environments and data loss may occur if there are operational problems."+" Any personal data manually uploaded is subject to the third-party’s privacy policy which can be accessed "+'<a href="%(privacy_policy_hyperlink)s" rel="noopener,noreferrer">here</a>.'),{privacy_policy_hyperlink:w["o"]},true)}else if(w["Y"].includes(e)||e===w["Hb"].data_science.key&&t===w["qb"].udemy){return interpolate(gettext("Labs and workspaces are practice environments and data loss may occur if there are operational problems."+" Any personal data manually uploaded is subject to Udemy Business privacy policy which can be accessed "+'<a href="%(privacy_policy_hyperlink)s" rel="noopener,noreferrer">here</a>.'),{privacy_policy_hyperlink:w["yc"]},true)}return""};const M=e=>{const t={[w["Hb"].aws.key]:w["Q"].AWS,[w["Hb"].azure.key]:w["Q"].AZURE,[w["Hb"].data_science.key]:w["Q"].DATA_SCIENCE,[w["Hb"].web.key]:w["Q"].WEB_DEVELOPMENT,[w["Hb"].devops.key]:w["Q"].DEVOPS,[w["Hb"].security.key]:w["Q"].SECURITY};const r=t[e]||w["Q"].WEB_DEVELOPMENT;return interpolate(gettext('Learn more about Workspaces <a href="%(support_article_hyperlink)s" rel="noopener,noreferrer">here</a>.'),{support_article_hyperlink:r},true)};const q=(e,t,r,n)=>{const o={labInstanceUuid:e,startTime:t,durationMs:r,labCompletionMode:n||null};const a=new w["vb"].HEARTBEAT(o);i["a"].publishEvent(a)};const U=function(e,t,r,n,o,a,s,l){var c;let u=arguments.length>8&&arguments[8]!==undefined?arguments[8]:false;const p={labId:e.id.toString(),labVertical:e.vertical,labInstanceUuid:((c=e.myLatestInstance)===null||c===void 0?void 0:c.uuid)||null,labTaskId:(r===null||r===void 0?void 0:r.toString())||null,labTaskResourceId:(n===null||n===void 0?void 0:n.toString())||null,inSessionTimeBetweenViewAndCtaClick:o||null,labCompletionMode:s||e.currentMode,action:t,uiRegion:a||null,hasAutomatedLabReview:u,labTaskNumber:l||null};const d=new w["vb"].CLICK(p);i["a"].publishEvent(d)};const H=e=>{const t=[];if(e!==null&&e!==void 0&&e.myLatestInstance){t.push(new x(e.myLatestInstance.id,e.vertical,e.myLatestInstance.uuid))}const r=new E(parseInt(e.id,10),e.title,!!e.hasAutomatedReviewTests,e.vertical,t);return r};const F=e=>{let{lab:t,uiRegion:r,trackingId:n,sourcePageId:o,sourcePageType:a}=e;const s=H(t);const l={lab:s,uiRegion:w["zb"][r],trackingId:n,sourcePageId:o,sourcePageType:a};const c=new w["vb"].LAB_SELECTED(l);i["a"].publishEvent(c)};const B=(e,t,r)=>{const n=H(e);const o={lab:n,uiRegion:t||null,mode:w["Z"][r]};const a=new w["vb"].LAB_STARTED(o);i["a"].publishEvent(a)};const z=(e,t)=>{if(!e){return null}let r=0;const n=t||e.startTime;if(n){const e=new Date(n);const t=new Date;r=Math.round((t.getTime()-e.getTime())/1e3)}return new S(n?`${n.split(".")[0].replace("Z","")}Z`:null,r)};const V=(e,t,r,n)=>{const o=H(e);const a=z(e===null||e===void 0?void 0:e.myLatestInstance,r);const s={lab:o,uiRegion:t,mode:w["Z"][e.currentMode],isLabInstancePaused:n,labTakingSession:a};const l=new w["vb"].LAB_EXITED(s);i["a"].publishEvent(l)};const W=(e,t,r,n)=>{const o=H(e);const a=z(e===null||e===void 0?void 0:e.myLatestInstance,r);const s={lab:o,mode:w["Z"][e.currentMode],uiRegion:t,isLabInstanceResumed:n,labTakingSession:a};const l=new w["vb"].LAB_RESUMED(s);i["a"].publishEvent(l)};const G=(e,t,r)=>{var n;const{id:o,title:a,hasAutomatedReviewTests:s}=t;const l=s&&w["nb"].includes(e.currentMode);const c=H(e);const u=z(e===null||e===void 0?void 0:e.myLatestInstance,e===null||e===void 0?void 0:(n=e.myLatestInstance)===null||n===void 0?void 0:n.sessionStartTime);const p=new _(o,r,a,l);const d={lab:c,labTask:p,mode:w["Z"][e.currentMode],labTakingSession:u};const h=new w["vb"].LAB_TASK_COMPLETED(d);i["a"].publishEvent(h)};const K=(e,t)=>{var r;const n=z(e===null||e===void 0?void 0:e.myLatestInstance,e===null||e===void 0?void 0:(r=e.myLatestInstance)===null||r===void 0?void 0:r.sessionStartTime);const o=H(e);const a={lab:o,mode:w["Z"][t],labTakingSession:n};const s=new w["vb"].LAB_COMPLETED(a);i["a"].publishEvent(s)};const $=(e,t,r,n)=>{const o=H(e);const a=new x(t.id,e.vertical,t.uuid);const s=z(t,n);const l={lab:o,workspace:a,uiRegion:r,mode:w["Z"][e.currentMode],labTakingSession:s};const c=new w["vb"].LAB_WORKSPACE_LAUNCHED(l);i["a"].publishEvent(c)};const X=e=>{const t={labId:e.id.toString(),isUnstartedVisit:!e.enrollment};const r=new w["vb"].OVERVIEW_PAGE_VISIT(t);i["a"].publishEvent(r)};const Y=(e,t,r,n,o,a,s)=>{const l={sourceComponent:e,searchTerm:t,searchCategory:r,numResults:n,ordering:o,isPopularTopicPillSelected:a,features:s};const c=new w["vb"].SEARCH(l);i["a"].publishEvent(c)};const Q=e=>{const t=new w["vb"].HEADER_CLICK(e);i["a"].publishEvent(t)};const J=e=>{let{courseId:t,action:r}=e;i["a"].publishEvent(new w["vb"].LAB_IN_COURSE_PROMPT_ACTION({courseId:t,action:r}))};const Z=(e,t,r,n)=>{const o={labId:e.toString(),page:t,index:r,uiRegion:n};const a=new w["vb"].LAB_CARD_CLICK(o);i["a"].publishEvent(a)};const ee=e=>{var t,r;const n={labId:e.id,labInstanceUuid:((t=e.myLatestInstance)===null||t===void 0?void 0:t.uuid)||null,labVertical:e.vertical,labCompletionMode:((r=e.enrollment)===null||r===void 0?void 0:r.lastAttemptedMode)||null};i["a"].publishEvent(new w["vb"].RESUME_BANNER_VIEW(n))};const te=e=>{var t,r;const n={labId:e.id,labInstanceUuid:((t=e.myLatestInstance)===null||t===void 0?void 0:t.uuid)||null,labVertical:e.vertical,labCompletionMode:((r=e.enrollment)===null||r===void 0?void 0:r.lastAttemptedMode)||null};i["a"].publishEvent(new w["vb"].RESUME_BANNER_DISMISS_CLICK(n))};const re=e=>{var t,r;const n={labId:e.id,labInstanceUuid:((t=e.myLatestInstance)===null||t===void 0?void 0:t.uuid)||null,labVertical:e.vertical,labCompletionMode:((r=e.enrollment)===null||r===void 0?void 0:r.lastAttemptedMode)||null};i["a"].publishEvent(new w["vb"].RESUME_BANNER_END_LAB_CLICK(n))};const ne=(e,t,r,n)=>{var o;const{id:a,title:s,hasAutomatedReviewTests:l}=t;const c=H(e);const u=z(e===null||e===void 0?void 0:e.myLatestInstance,e===null||e===void 0?void 0:(o=e.myLatestInstance)===null||o===void 0?void 0:o.sessionStartTime);const p=new _(a,r,s,l);const d={lab:c,labTask:p,mode:w["Z"][e.currentMode],labTakingSession:u,isFirstReviewRequest:n};i["a"].publishEvent(new w["vb"].LAB_TASK_REVIEW_REQUESTED(d))};const ie=(e,t)=>{var r;const n=e.tasks.some((e=>e.hasAutomatedReviewTests===true));const o={labId:e.id.toString(),labTaskId:e.activeTask.id.toString(),labTaskNumber:e.activeTaskNumber,labInstanceUuid:((r=e.myLatestInstance)===null||r===void 0?void 0:r.uuid)||null,labCompletionMode:e.currentMode,labLevel:n,taskLevel:e.activeTask.hasAutomatedReviewTests};i["a"].publishEvent(new c(s["b"][t],o))};const oe=(e,t,r)=>{const n={labId:e.id.toString(),labTaskId:e.activeTask.id.toString(),labTaskNumber:e.activeTaskNumber,labCompletionMode:e.currentMode,testId:(t===null||t===void 0?void 0:t.toString())||null,outputMessageType:r};i["a"].publishEvent(new u(n))};const ae=e=>{const t=e.myLatestInstance;if(e.vertical===w["Hb"].aws.key&&t){return t.totalSpend/t.allowedSpend>=D["h"]}return false};const se=e=>{const t=e.myLatestInstance;if(t&&t.totalSpend){const e=t.allowedSpend||D["b"];return t.totalSpend/e>=D["d"]}return false};const le=e=>{const t=document.createElement("a");t.style.display="none";t.href=e;document.body.appendChild(t);t.click();document.body.removeChild(t)};const ce=e=>e.includes(UD.me.settings["lab-access-level"]);const ue=(e,t,r,n,i)=>{const o=Object(f["d"])(t,r,n);return o===i&&ce(e)};const pe=()=>Object(f["d"])("lab_taking","lab_pause_resume_enabled",false);const de=()=>Object(f["d"])(w["Fb"],w["Gb"],w["Eb"]);const he=e=>e.labType===w["Bb"].modular.key&&!w["Ib"].includes(e.vertical)&&pe();const me=e=>{if(he(e)){return w["cb"]}return w["ub"][e.labType]};const fe=e=>{if(he(e)){return w["bb"]}return w["tb"][e.labType]};const ge=(e,t,r)=>b["a"].to(e,t?`lab-overview/tasks/${t}`:"lab-overview",r);const ye=()=>{const e=Object(g["a"])();const t=e?e.locale.replace("_","-"):"en-US";const r=new Date;const n=r.toLocaleDateString(t,{day:"numeric",month:"short"});const i=r.toLocaleString(t,{hour:"numeric",minute:"numeric",hour12:true});return`${n}, ${i}`};const be=()=>{const e=Object(f["d"])("lab_taking","Title","Get hands-on practice");const t=Object(f["d"])("lab_taking","Desc","Sharpen your technical skills with access to risk-free environments and real-world projects.");const r=Object(f["d"])("lab_taking","CTA","Explore labs");return{title:e,desc:t,cta:r}};const ve=(e,t,r)=>{i["a"].publishEvent(new p(m["c"][r],e,t))};const we=(e,t,r,n)=>{const o={labId:e,labVertical:t,estimatedLoadingTime:r,actualLoadingTime:n};i["a"].publishEvent(new d(o))};const Ee=(e,t,r,n,o,a,s,l)=>{const c={labId:e,labVertical:t,labType:r,labMode:n,labTaskId:o,issueType:a,reportIssueId:s,withFile:l};i["a"].publishEvent(new h(c))};const Se=e=>{const t=j(e.vertical);return t?a.a.createElement(t,{label:false}):null};const _e=e=>{if(!e){return""}const t=new Intl.DateTimeFormat(undefined,{dateStyle:"full"});const r=t.format(e);return r};const xe=e=>{if(!e){return""}const t=new Intl.DateTimeFormat(undefined,{hour:"numeric",minute:"2-digit",timeZoneName:"short"});const r=t.format(e);return r};const De=e=>{const t={[w["Hb"].aws.key]:w["Q"].AWS,[w["Hb"].azure.key]:w["Q"].AZURE,[w["Hb"].data_science.key]:w["Q"].DATA_SCIENCE,[w["Hb"].web.key]:w["Q"].WEB_DEVELOPMENT,[w["Hb"].devops.key]:w["Q"].DEVOPS,[w["Hb"].gcp.key]:w["Q"].GCP,[w["Hb"].security.key]:w["Q"].SECURITY};return t[e]||w["Q"].WEB_DEVELOPMENT}},"./src/udemy/js/labs/workspace-notification/constants.ts":function(e,t,r){"use strict";r.d(t,"e",(function(){return n}));r.d(t,"d",(function(){return i}));r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));r.d(t,"c",(function(){return s}));const n={GRANTED:"granted",DENIED:"denied",DEFAULT:"default"};const i="has-enabled-local-permission";const o={NAMESPACE:"workspace-notification-control",NAME:"local-permission"};const a={ENABLE_NOTIFICATION:"enable_notification",DISABLE_NOTIFICATION:"disable_notification",GRANT_PERMISSION:"grant_permission",BLOCK_PERMISSION:"block_permission"};const s={[a.ENABLE_NOTIFICATION]:"LabLoadingEnableNotificationClickEvent",[a.DISABLE_NOTIFICATION]:"LabLoadingDisableNotificationClickEvent",[a.GRANT_PERMISSION]:"LabLoadingNotificationPermissionGrantEvent",[a.BLOCK_PERMISSION]:"LabLoadingNotificationPermissionBlockEvent"}},"./src/udemy/js/report-abuse/constants.js":function(e,t,r){"use strict";r.d(t,"e",(function(){return n}));r.d(t,"c",(function(){return i}));r.d(t,"g",(function(){return o}));r.d(t,"f",(function(){return a}));r.d(t,"h",(function(){return s}));r.d(t,"a",(function(){return l}));r.d(t,"i",(function(){return c}));r.d(t,"b",(function(){return u}));r.d(t,"d",(function(){return p}));const n={FRESH:"fresh",ERROR:"error",SUBMITTING:"submitting",SUBMITTED:"submitted"};const i={POLICY:"Policy",TECHNICAL:"Technical"};const o={[i.POLICY]:"Policy Issue",[i.TECHNICAL]:"Technical Issue"};const a={INAPPROPRIATE_COURSE:"Inappropriate Course Content",INAPPROPRIATE_BEHAVIOR:"Inappropriate Behavior",POLICY:"Udemy Policy Violation",SPAM:"Spammy Content",OTHER:"Other"};const s={AUDIO:"Audio",VIDEO:"Video",CAPTIONS:"Captions",DOWNLOAD:"Download"};const l={NONE:"I cannot hear audio at all",LOW:"I can hear audio, but the volume is very low",NONSENSE:"I can hear audio clearly, but I cannot understand the instructor",BACKGROUND:"Background music/sound is distracting"};const c={NONE:"Video does not play at all",STOPS:"Video plays but stops suddenly and will not continue",QUALITY:"Video quality is poor",STUTTER:"Video stutters (plays and stops)",RESTART:"Video restarts after a few minutes"};const u={ENABLE:"Captions are available but I cannot enable them",WRONG:"Captions are available but they're not accurate",BLOCKING:"Captions are in the way of what’s shown on the video"};const p={ENABLE:"Lecture is available for download but I cannot download",RESOURCE:"I cannot download/access the files listed in the resources section",CERTIFICATE:"I cannot download/access the certificate of completion"}},"./src/udemy/js/report-abuse/report-abuse-modal-trigger.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var n=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal-trigger/modal-trigger.react-component.js");var i=r("./node_modules/autobind-decorator/lib/esm/index.js");var o=r("./node_modules/prop-types/index.js");var a=r.n(o);var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./src/udemy/js/auth/auth-ajax-modal.react-component.js");var u=r("./src/udemy/js/base-components/dialog/ajax-modal.react-component.js");var p=r("./src/udemy/js/utils/ud-link.js");var d=r("./src/udemy/js/utils/ud-me.js");var h=r("./src/udemy/js/report-abuse/constants.js");var m=r("./src/udemy/js/report-abuse/urls.js");var f,g;const y=()=>Promise.all([r.e("common-app-css"),r.e("report-abuse-server-side"),r.e("report-abuse-udlite-app")]).then(r.bind(null,"./src/udemy/js/report-abuse/udlite-app.js"));let b=(f=(g=class e extends s["Component"]{renderModal(e){const t=Object(m["a"])(this.props);const r={...e,...this.props.modalProps};if(!d["a"].is_authenticated){return l.a.createElement(c["a"],Object.assign({},r,{url:p["a"].toAuth({showLogin:true,nextUrl:t})}))}return l.a.createElement(u["a"],Object.assign({url:t,labelledById:"report-abuse-title",preloader:y},r))}render(){const{category:e,objectId:t,objectType:r,...i}=this.props;return l.a.createElement(n["a"],Object.assign({},i,{renderModal:this.renderModal}))}},g.propTypes={objectId:a.a.number.isRequired,objectType:a.a.string.isRequired,category:a.a.oneOf(Object.values(h["c"])),modalProps:a.a.object},g.defaultProps={category:undefined,modalProps:undefined},g),babelHelpers.applyDecoratedDescriptor(f.prototype,"renderModal",[i["a"]],Object.getOwnPropertyDescriptor(f.prototype,"renderModal"),f.prototype),f)},"./src/udemy/js/report-abuse/report-abuse-tooltip.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r("./node_modules/@udemy/icons/dist/flag.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var a=r("./node_modules/@udemy/react-popup-components/dist/esm/tooltip/tooltip.react-component.js");var s=r("./node_modules/react/index.js");var l=r.n(s);function c(e){return l.a.createElement(a["a"],{placement:"left",trigger:l.a.createElement(o["a"],Object.assign({udStyle:"ghost"},e),l.a.createElement(i.a,{label:gettext("Report abuse")}))},gettext("Report abuse"))}},"./src/udemy/js/report-abuse/urls.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e){let{category:t,objectId:r,objectType:n,extraParams:i}=e;const o=new URLSearchParams;o.set("related_object_type",n);o.set("related_object_id",r);if(t){o.set("category",t)}if(i){Object.entries(i).forEach((e=>{let[t,r]=e;o.set(t,r)}))}return`/feedback/report/?${o.toString()}`}},"./src/udemy/js/shaka-video-player/captions/captions.mobx-store.ts":function(e,t,r){"use strict";var n=r("./node_modules/js-cookie/src/js.cookie.js");var i=r.n(n);var o=r("./node_modules/mobx/lib/mobx.module.js");var a=r("./src/udemy/js/utils/get-request-data.js");var s=r("./src/udemy/js/shaka-video-player/captions/constants.ts");var l=r("./src/udemy/js/caption/caption.mobx-model.js");var c=r("./src/udemy/js/caption/cue.mobx-model.js");class u extends c["b"]{attachTrack(e){e.addEventListener("load",(()=>{Object(o["f"])((()=>{e.track.cues.getCueById(this.id).text=this.text}))}))}}var p=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class d extends l["b"]{constructor(e){super(e);this.mode=s["h"].HIDDEN;this.playerTime=0;this.textTrack=null;this.label=e.video_label;Object(o["D"])((()=>this.mode===s["h"].ACTIVE),this.loadFromSource)}get cues(){return this._cuesS}set cues(e){this._cuesS=e}constructCue(e){return new u(e)}setMode(e){this.mode=e}attachPlayer(e,t){var r,n,i;this.player=e;(n=(r=this.player)===null||r===void 0?void 0:r.getMediaElement())===null||n===void 0?void 0:n.addEventListener("timeupdate",Object(o["e"])((()=>{var e,t;this.playerTime=(t=(e=this.player.getMediaElement())===null||e===void 0?void 0:e.currentTime)!==null&&t!==void 0?t:0})));if(t){(i=this.player)===null||i===void 0?void 0:i.addTextTrackAsync(this.url,this.language,"captions","text/vtt")}}get activeCues(){return this.cues.filter((e=>e.startTime<=this.playerTime&&e.endTime>this.playerTime))}get asObjectURL(){return URL.createObjectURL(Object(l["a"])(this))}}p([o["t"]],d.prototype,"mode",void 0);p([o["t"].ref],d.prototype,"player",void 0);p([o["t"]],d.prototype,"playerTime",void 0);p([o["e"]],d.prototype,"setMode",null);p([o["e"]],d.prototype,"attachPlayer",null);p([o["g"]],d.prototype,"activeCues",null);p([o["g"]],d.prototype,"asObjectURL",null);r.d(t,"a",(function(){return f}));var h=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};const m=Object(a["a"])();class f{constructor(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{[m.locale.split("_")[0]]:1};let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;this.captions=[];this.getSortOrder=e=>this.languagePriorities[e.language]||e.label.codePointAt(0);this.updateCaptionModesFromNativeTrack=()=>{let e;this.captions.forEach((t=>{if(!t.textTrack){return}if(t.textTrack.mode===s["h"].ACTIVE){e=t}t.setMode(t.textTrack.mode)}));this.persistSelectedCaption(e)};this.toggleDefaultCaption=()=>{const e=this.activeTracks.length?this.activeTracks[0]:null;if(e){this.setActiveCaption(null)}else{let e=this.autoSelectedCaption;if(!e){e=this.sortedCaptions[0]}this.setActiveCaption(e)}};e.forEach((e=>{this.addCaptionFromAPI(e)}));this.isDefaultCaptionOn=n;if(t){this.autoSelectCaption()}this.languagePriorities=r}attachPlayerStore(e){this.videoPlayerStore=e}get sortedCaptions(){return this.captions.sort(((e,t)=>this.getSortOrder(e)-this.getSortOrder(t)))}addCaptionFromAPI(e){this.captions.push(new d(e))}setActiveCaption(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.captions.forEach((t=>{if(e&&t.id===e.id){this.setCaptionMode(t,s["h"].ACTIVE)}else if(t.mode===s["h"].ACTIVE){this.setCaptionMode(t,s["h"].HIDDEN)}}));if(t){this.persistSelectedCaption(e)}}setCaptionMode(e,t){e.setMode(t)}get autoSelectedCaption(){let e,t,r;const n=i.a.get(s["b"]);if(n!==undefined){if(!n){return null}e=n}const o=m.locale.substr(0,2);if(o!=="en"||this.isDefaultCaptionOn){t=o;r="en"}let a,l,c=null;this.captions.forEach((n=>{if(e&&n.language===e){a=n}else if(t&&n.language===t){l=n}else if(r&&n.language===r){c=n}}));let u=null;if(a){u=a}else if(l){u=l}else if(c){u=c}return u}autoSelectCaption(){const e=this.autoSelectedCaption;if(!e){return}this.setActiveCaption(e,false)}persistSelectedCaption(e){i.a.set(s["b"],e?e.language:"",{expires:30,path:"/"})}attachPlayer(e){this.player=e;this.captions.forEach((t=>{t.attachPlayer(e,this.videoPlayerStore.isUsingNativeControls)}));if(this.videoPlayerStore.isUsingNativeControls){}}get isLoaded(){return this.captions.every((e=>e.isLoaded))}get hasError(){return this.captions.some((e=>e.error))}get activeTracks(){return this.captions.filter((e=>e.mode===s["h"].ACTIVE))}get hasMachineTranslatedCaptions(){return this.captions.some((e=>e.isTranslation))}}h([o["t"]],f.prototype,"captions",void 0);h([o["t"].ref],f.prototype,"player",void 0);h([o["g"]],f.prototype,"sortedCaptions",null);h([o["e"]],f.prototype,"addCaptionFromAPI",null);h([o["g"]],f.prototype,"autoSelectedCaption",null);h([o["e"]],f.prototype,"attachPlayer",null);h([o["g"]],f.prototype,"isLoaded",null);h([o["g"]],f.prototype,"hasError",null);h([o["g"]],f.prototype,"activeTracks",null);h([o["g"]],f.prototype,"hasMachineTranslatedCaptions",null)},"./src/udemy/js/shaka-video-player/captions/constants.ts":function(e,t,r){"use strict";r.d(t,"g",(function(){return n}));r.d(t,"f",(function(){return i}));r.d(t,"c",(function(){return o}));r.d(t,"i",(function(){return a}));r.d(t,"d",(function(){return s}));r.d(t,"e",(function(){return l}));r.d(t,"j",(function(){return c}));r.d(t,"a",(function(){return u}));r.d(t,"b",(function(){return p}));r.d(t,"h",(function(){return h}));const n=Object.freeze({TRACKS:"tracks",SETTINGS:"settings",FONT_SIZE:"fonts",OPACITY:"opacity"});const i=Object.freeze([50,75,100,150,200]);const o=100;const a=Object.freeze([0,25,50,75,100]);const s=75;const l=false;const c="captionsettings";const u={FONT_SIZE_DEFAULT:24,FONT_SIZE_MIN:15};const p="caption";const d=Object.freeze({ON:"on",ON_AUTO:"on_auto",ON_COOKIE:"on_cookie",OFF:"off"});const h=Object.freeze({ACTIVE:"showing",INACTIVE:"disabled",HIDDEN:"hidden"})},"./src/udemy/js/shaka-video-player/captions/cue-display/captions-display.less":function(e,t,r){e.exports={"captions-container":"captions-display--captions-container--1SP58","user-inactive":"captions-display--user-inactive--1mfIN","captions-cue-text":"captions-display--captions-cue-text--1W4Ia"}},"./src/udemy/js/shaka-video-player/captions/cue-display/well.less":function(e,t,r){e.exports={container:"well--container--1cXrh",text:"well--text--1xGLx","transition-active":"well--transition-active--2EEJa"}},"./src/udemy/js/shaka-video-player/constants.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r.d(t,"f",(function(){return a}));r.d(t,"e",(function(){return s}));r.d(t,"b",(function(){return l}));r.d(t,"r",(function(){return c}));r.d(t,"o",(function(){return u}));r.d(t,"q",(function(){return p}));r.d(t,"p",(function(){return d}));r.d(t,"m",(function(){return h}));r.d(t,"c",(function(){return m}));r.d(t,"t",(function(){return f}));r.d(t,"s",(function(){return y}));r.d(t,"n",(function(){return v}));r.d(t,"d",(function(){return w}));r.d(t,"g",(function(){return E}));r.d(t,"h",(function(){return S}));r.d(t,"l",(function(){return _}));r.d(t,"k",(function(){return x}));r.d(t,"j",(function(){return D}));r.d(t,"i",(function(){return C}));var n=r("./src/udemy/js/utils/get-config-data.js");const i=Object(n["a"])();const o="auto";const a=o;const s=2e3;const l=Object.freeze({NONE:"none",PLAYBACK_RATE:"playback-rate",CAPTIONS:"captions",SETTINGS:"settings"});const c=5;const u=Object.freeze({PLAY_PAUSE:"play-pause",SEEK_BACK:"seek-back",SEEK_FORWARD:"seek-forward",SPEED_DOWN:"speed-down",SPEED_UP:"speed-up",VOLUME_DOWN:"volume-down",VOLUME_UP:"volume-up",TOGGLE_FULLSCREEN:"fullscreen",TOGGLE_MUTE:"mute"});const p=100;const d=100;const h="application/x-mpegURL";const m="application/dash+xml";const f=Object.freeze({CANNOT_ACCESS_MEDIA_SOURCE:100,CANNOT_RETRIEVE_DRM_LICENSE:101});const g=5;const y=Object.freeze({[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]:f.CANNOT_ACCESS_MEDIA_SOURCE,[g]:f.CANNOT_RETRIEVE_DRM_LICENSE});const b=Object.freeze({plugins:{},inactivityTimeout:s,children:["mediaLoader"]});const v=/^application\/x-mpegURL|application\/vnd\.apple\.mpegurl$/i;const w=/^application\/dash\+xml$/i;const E=`https://${i.drm_fairplay_certificate_cdn_domain}/fp-cert/9e5037892023e3ccab2815a6adf7d05b.der`;const S=i.drm_license_server_url_template;const _=new RegExp("skd://(\\w{32})","i");const x="Widevine";const D="PlayReady";const C="FairPlay"},"./src/udemy/js/shaka-video-player/control-bar/progress-display.less":function(e,t,r){e.exports={"progress-display":"progress-display--progress-display--wMlJV","progress-display-spacer":"progress-display--progress-display-spacer--1fpgb"}},"./src/udemy/js/shaka-video-player/control-bar/shaka-control-bar.less":function(e,t,r){e.exports={"popover-area":"shaka-control-bar--popover-area--1vJ7p","control-bar-wrapper":"shaka-control-bar--control-bar-wrapper--3WOBk","control-bar-container":"shaka-control-bar--control-bar-container--3_1nq","control-bar":"shaka-control-bar--control-bar--3DGdd",spacer:"shaka-control-bar--spacer--3mDmv"}},"./src/udemy/js/shaka-video-player/control-bar/video-control-bar-dropdown.less":function(e,t,r){e.exports={"tooltip-content":"video-control-bar-dropdown--tooltip-content--3cEu5","current-value":"video-control-bar-dropdown--current-value--1KGPt","prev-icon":"video-control-bar-dropdown--prev-icon--hrRYm","next-icon":"video-control-bar-dropdown--next-icon--1WFHm"}},"./src/udemy/js/shaka-video-player/control-bar/video-control-bar-dropdown.react-component.tsx":function(e,t,r){"use strict";r.d(t,"a",(function(){return E}));r.d(t,"b",(function(){return S}));var n=r("./node_modules/@udemy/react-popup-components/dist/esm/basic-popper/basic-popper.react-component.js");var i=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.react-component.js");var o=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var a=r("./node_modules/@udemy/styles/dist/esm/tokens/generated/index.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/prop-types/index.js");var p=r.n(u);var d=r("./node_modules/react/index.js");var h=r.n(d);var m=r("./src/udemy/js/course-taking/curriculum/controls/control-bar-dropdown.react-component.js");var f=r("./src/udemy/js/shaka-video-player/control-bar/video-control-bar-dropdown.less");var g=r.n(f);var y=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var b=undefined&&undefined.__rest||function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};function v(e){var{className:t}=e,r=b(e,["className"]);return Object(n["e"])(Object.assign({className:l()(t,g.a["tooltip-content"])},r))}function w(e){let t=e.tooltipProps;if(t){t=Object.assign(Object.assign({},t),{renderContent:v})}return Object.assign(Object.assign({darkMode:true,size:"small"},e),{tooltipProps:t})}const E=e=>h.a.createElement(m["a"],w(e));let S=class e extends h.a.Component{render(){const e=this.props,{videoPlayerStore:t}=e,r=b(e,["videoPlayerStore"]);return h.a.createElement(m["b"],Object.assign({darkMode:true,menuMaxHeight:`${Object(o["c"])(.7*t.playerHeight)}rem`,menuOffset:a["a"]["space-lg"]},r))}};S.propTypes={videoPlayerStore:p.a.object.isRequired};S=y([Object(c["e"])("videoPlayerStore")],S);S.Button=e=>h.a.createElement(m["b"].Button,w(e));S.Menu=m["b"].Menu;S.MenuItem=m["b"].MenuItem;let _=class e extends h.a.Component{constructor(){super(...arguments);this.getScrollContainers=()=>[document.getElementById(this.props.$$udControlBarDropdown.menuId)]}render(){const e=this.props,{$$udControlBarDropdown:t}=e,r=b(e,["$$udControlBarDropdown"]);return h.a.createElement(i["a"],Object.assign({detachFromTarget:true,shouldCloseOtherPoppers:false,getScrollContainers:this.getScrollContainers},r))}};_.propTypes={$$udControlBarDropdown:p.a.object.isRequired};_=y([Object(c["e"])("$$udControlBarDropdown")],_);S.Popover=_},"./src/udemy/js/shaka-video-player/drm.ts":function(e,t,r){"use strict";(function(e){r.d(t,"b",(function(){return p}));r.d(t,"e",(function(){return d}));r.d(t,"d",(function(){return h}));r.d(t,"c",(function(){return m}));r.d(t,"a",(function(){return f}));r.d(t,"h",(function(){return y}));r.d(t,"g",(function(){return E}));r.d(t,"f",(function(){return T}));var n=r("./node_modules/axios/index.js");var i=r.n(n);var o=r("./src/udemy/js/utils/memoize.js");var a=r("./src/udemy/js/utils/ud-api.js");var s=r("./src/udemy/js/utils/ud-performance.ts");var l=r("./src/udemy/js/shaka-video-player/constants.ts");var c=r("./src/udemy/js/shaka-video-player/error-display.react-component.tsx");var u=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const p="com.apple.fps.1_0";const d="com.widevine.alpha";const h="com.microsoft.playready";const m={audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640828"',robustness:"SW_SECURE_CRYPTO"}]};const f={audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.64001F"',robustness:"SW_SECURE_CRYPTO"}]};const g={drmTechUsed:""};const y=Object(o["a"])(((e,t)=>u(void 0,void 0,void 0,(function*(){if(typeof window.navigator.requestMediaKeySystemAccess==="function"){return new Promise((r=>{window.navigator.requestMediaKeySystemAccess(e,[t]).then(r).catch((()=>r(false)))}))}else if(typeof window.MSMediaKeys==="function"){return window.MSMediaKeys.isTypeSupported(e)}return false}))));const b=function(e){return u(this,void 0,void 0,(function*(){g.drmTechUsed=`${gettext("loading")}...`;const t=e.HlsSourceHandler.canPlayType;const r=yield y(p,m);const n=yield y(d,f);const i=yield y(h,f);e.HlsSourceHandler.canPlayType=function(e){if(!t.call(this,e)){return false}if(l["n"].test(e)&&r){return true}if(l["d"].test(e)&&(n||i)){return true}return false}}))};const v=function(e){return(e===null||e===void 0?void 0:e.response)&&[403].includes(e.response.status)};const w=function(){return{message:{errorBody:c["b"],errorFooter:c["c"]}}};const E=function(e,t){return l["h"].replace("{drm_type}",e).replace("{auth_token}",t).replace("{base_url}",a["e"])};const S=function(e,t){const r=String.fromCharCode.apply(null,t.buffer);const n=r.match(l["l"]);if(!n){throw new Error("Invalid content ID format")}return n[1]};const _=function(t){const r=E("widevine",t);return function(t,n,o){return u(this,void 0,void 0,(function*(){try{s["a"].start("drmGetLicenseForWidevine");g.drmTechUsed=l["k"];const t=yield i.a.post(r,n,{headers:{"Content-Type":"application/octet-stream"},responseType:"arraybuffer"});if(t.status>=400&&t.status<=599){o({});return}s["a"].end("drmGetLicenseForWidevine");o(null,new e(t.data,"base64"))}catch(e){v(e)?o(w()):o(e)}}))}};function x(e){const t=(new window.DOMParser).parseFromString(String.fromCharCode.apply(null,e),"application/xml");const r=t.getElementsByTagName("HttpHeaders")[0];const n=[];if(r){const e=r.getElementsByTagName("name");const t=r.getElementsByTagName("value");for(let r=0;r<e.length;r++){n[e[r].childNodes[0].nodeValue]=t[r].childNodes[0].nodeValue}}const i=t.getElementsByTagName("Challenge")[0];const o=i?window.atob(i.childNodes[0].nodeValue):undefined;return{headers:n,challenge:o}}const D=function(t){const r=E("playready",t);return function(t,n,o){return u(this,void 0,void 0,(function*(){const t=x(n);try{s["a"].start("drmGetLicenseForPlayReady");g.drmTechUsed=l["j"];const n=yield i.a.post(r,t.challenge,{headers:{"Content-Type":"application/octet-stream"},responseType:"arraybuffer"});if(n.status>=400&&n.status<=599){o({});return}s["a"].end("drmGetLicenseForPlayReady");o(null,new e(n.data,"base64"))}catch(e){o(e)}}))}};const C=function(t){const r=E("fairplay",t);return function(t,n,o,a){return u(this,void 0,void 0,(function*(){const t=e.from(o).toString("base64");const c=`spc=${t}&assetId=${n}`;try{s["a"].start("drmGetLicenseForFairPlay");g.drmTechUsed=l["i"];const t=yield i.a.post(r,c,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});s["a"].end("drmGetLicenseForFairPlay");a(null,new e(t.data,"base64"))}catch(e){a(e)}}))}};const T=function(e){return{[d]:{getLicense:_(e),videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"},[h]:{getLicense:D(e)},[p]:{certificateUri:l["g"],getContentId:S,getLicense:C(e)}}};const O=function(e){const t=e.tech(true);t.on("keysessioncreated",(()=>{s["a"].start("drmLicenseProcessed")}));t.on("keystatuschange",(e=>{if(e.status==="usable"){s["a"].end("drmLicenseProcessed")}}))}}).call(this,r("./node_modules/buffer/index.js").Buffer)},"./src/udemy/js/shaka-video-player/error-display.less":function(e,t,r){e.exports={"dialog-container":"error-display--dialog-container--cZFWs",dialog:"error-display--dialog--rKzjl","scroll-wrapper":"error-display--scroll-wrapper--24F6Y","title-spacer":"error-display--title-spacer--2OMiF",title:"error-display--title--Gn6EE","close-button":"error-display--close-button--257fn"}},"./src/udemy/js/shaka-video-player/error-display.react-component.tsx":function(e,t,r){"use strict";r.d(t,"b",(function(){return D}));r.d(t,"c",(function(){return C}));r.d(t,"a",(function(){return T}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/icons/dist/close.ud-icon");var o=r.n(i);var a=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var s=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var l=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var c=r("./node_modules/prop-types/index.js");var u=r.n(c);var p=r("./node_modules/react/index.js");var d=r.n(p);var h=r("./node_modules/react-dom/index.js");var m=r.n(h);var f=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var g=r("./src/udemy/js/utils/get-config-data.js");var y=r("./src/udemy/js/utils/ud-link.js");var b=r("./src/udemy/js/shaka-video-player/error-display.less");var v=r.n(b);const w=Object(g["a"])();const E=y["a"].toSupportLink("system_requirements",w.brand.has_organization);const S=y["a"].toSupportLink("video_audio_issues_troubleshooting",w.brand.has_organization);const _=y["a"].toSupportContact();const x=[d.a.createElement("p",{key:"apology"},gettext("We tried several times to play your video but there was an unforeseen error. "+"We have notified our engineers.")),d.a.createElement("p",Object.assign({key:"systemcheck"},Object(f["a"])({descriptionOfCaller:"error-display:system-check-link",html:interpolate(gettext('To check your system configuration, please visit our <a href="%(link)s" target="_blank">system check page</a>.'),{link:y["a"].toSupportSystemCheck()},true)}))),d.a.createElement("p",{key:"codec"},gettext("For some devices, a basic codec pack may need to be added to view this content.")),d.a.createElement("p",Object.assign({key:"tryagain"},Object(f["a"])({descriptionOfCaller:"error-display:support-link",html:interpolate(gettext("Please try again in a few minutes or <a %(hyperlink)s>contact support</a>."),{hyperlink:`href="${S}" target="_blank"`},true)})))];const D=[d.a.createElement("p",{key:"widevine-error-message"},d.a.createElement("span",{key:"widevine-error-message-opening"},gettext("There was a problem with your system settings. ")),d.a.createElement("span",Object.assign({key:"widevine-system-requirements"},Object(f["a"])({descriptionOfCaller:"error-display:system-requirements-link",html:interpolate(gettext("To check your settings, visit our <a %(hyperlink)s>System Requirements</a> "),{hyperlink:`href="${E}" target="_blank"`},true)}))),d.a.createElement("span",Object.assign({key:"widevine-trouble-shooting"},Object(f["a"])({descriptionOfCaller:"error-display:trouble-shooting-link",html:interpolate(gettext("and <a %(hyperlink)s>How to Troubleshoot Audio & Video Issues</a> pages. "),{hyperlink:`href="${S}" target="_blank"`},true)}))),d.a.createElement("span",{key:"widevine-error-message-closing"},gettext("If the problem continues, contact our support team.")))];const C=[d.a.createElement(a["a"],{"data-purpose":"widevine-error-message-contact-support-button",key:"widevine-error-message-contact-support-button",componentClass:"a",href:`${_}`},gettext("Contact support"))];class T extends d.a.Component{constructor(){super(...arguments);this.labelledById=Object(n["a"])("error-display")}get footer(){if(!this.props.errorFooter){return null}const e=d.a.createElement(a["a"],{"data-purpose":"error-display-dismiss-error-button",udStyle:"ghost",onClick:this.props.store.hideError},gettext("Dismiss"));return d.a.createElement(l["a"],null,e,this.props.errorFooter)}render(){const e=d.a.createElement("div",{className:"error-display--dialog-container--cZFWs"},d.a.createElement("div",{className:"error-display--scroll-wrapper--24F6Y"},d.a.createElement("div",{role:"dialog",tabIndex:-1,"aria-labelledby":this.labelledById,className:"error-display--dialog--rKzjl"},d.a.createElement("div",{className:"error-display--title-spacer--2OMiF"},d.a.createElement("h2",{id:this.labelledById,className:"ud-heading-lg error-display--title--Gn6EE"},gettext("Video error"))),this.props.errorBody,this.footer,d.a.createElement(s["a"],{onClick:this.props.store.hideError,udStyle:"ghost",size:"medium",className:"error-display--close-button--257fn","data-purpose":"close-popup"},d.a.createElement(o.a,{color:"neutral",label:gettext("Close")})))));return m.a.createPortal(e,this.props.player.el())}}T.propTypes={player:u.a.object.isRequired,store:u.a.object.isRequired,errorBody:u.a.node,errorFooter:u.a.node};T.defaultProps={errorBody:x,errorFooter:null}},"./src/udemy/js/shaka-video-player/feedback/video-feedback.less":function(e,t,r){e.exports={container:"video-feedback--container--Ca3t_",circle:"video-feedback--circle--13wRA","pop-in":"video-feedback--pop-in--ZmNl8","play-icon":"video-feedback--play-icon--2GUai"}},"./src/udemy/js/shaka-video-player/playback-rate/playback-rate.less":function(e,t,r){e.exports={"playback-rate":"playback-rate--playback-rate--184BD",trigger:"playback-rate--trigger--2Gvv7","trigger-text":"playback-rate--trigger-text--2TfYV",menu:"playback-rate--menu--1J8uR"}},"./src/udemy/js/shaka-video-player/progress-bar/progress-bar.less":function(e,t,r){e.exports={"progress-bar-control":"progress-bar--progress-bar-control--2zR7z",slider:"progress-bar--slider--1ngl2","progress-holder":"progress-bar--progress-holder--1XVMX",hover:"progress-bar--hover--2uKEx","load-progress":"progress-bar--load-progress--2HDCN","play-progress":"progress-bar--play-progress--1SW-E"}},"./src/udemy/js/shaka-video-player/progress-bar/shaka-progress-bar.mobx-store.ts":function(e,t,r){"use strict";var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./node_modules/@udemy/react-date-time-components/dist/esm/duration/duration.react-component.js");var o=r("./node_modules/shaka-player/dist/shaka-player.compiled.js");var a=r.n(o);var s=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class l{constructor(){this.isDragging=false;this.videoCurrentTime=0;this.thumbnailVTTUrl="";this.isHovering=false;this._bufferedPercent=0;this.progressBarTime=0;this.currentMouseTime=0;this.onProgress=()=>{this.setBuffered();this.setBufferedPercent()};this.setRef=e=>{this.ref=e};this.setProgressHolderRef=e=>{this.progressHolderRef=e};this.setPopoverAreaRef=e=>{this.popoverAreaRef=e};this.seekForward=()=>{if(this.playerStore){this.playerStore.seekForward()}};this.seekBack=()=>{if(this.playerStore){this.playerStore.seekBack()}}}setMoveEvent(e){this.moveEvent=e}get progressInfo(){const e=Object(i["b"])({numSeconds:this.progressBarTime,presentationStyle:"timestamp"},{gettext:gettext,interpolate:interpolate});const t=Object(i["b"])({numSeconds:this.videoDuration,presentationStyle:"timestamp"},{gettext:gettext,interpolate:interpolate});return interpolate(pgettext("current time position in video player. eg.: 03:52 of 06:00","%s of %s"),[e,t])}get currentTimePercentValue(){return(100/this.videoDuration*this.progressBarTime).toFixed(2)}get currentTimePercent(){return`${this.currentTimePercentValue}%`}get buffers(){const e=this._buffered;const t=e===null||e===void 0?void 0:e.length;return[...Array(t)].map(((t,r)=>{var n,i;return{start:(n=e[r])===null||n===void 0?void 0:n.start,end:(i=e[r])===null||i===void 0?void 0:i.end}}))}get bufferedPercent(){return`${Math.floor(this._bufferedPercent*100)}%`}get videoDuration(){var e,t;if(this.player instanceof a.a.Player){if(isNaN((e=this.player.getMediaElement())===null||e===void 0?void 0:e.duration)){return 0}const r=(t=this.player.getMediaElement())===null||t===void 0?void 0:t.duration;return r!==null&&r!==void 0?r:0}return 0}setHovering(e){this.isHovering=e}setBuffered(){var e,t,r;this._buffered=((e=this.player)===null||e===void 0?void 0:e.getBufferedInfo)?(r=(t=this.player)===null||t===void 0?void 0:t.getBufferedInfo())===null||r===void 0?void 0:r.total:[]}setBufferedPercent(){var e;let t=0;for(let r=0;r<((e=this._buffered)===null||e===void 0?void 0:e.length);r++){t+=this._buffered[r].end-this._buffered[r].start}this._bufferedPercent=t/this.videoDuration}attachPlayer(e,t){this.player=e;t===null||t===void 0?void 0:t.addEventListener("progress",this.onProgress);t===null||t===void 0?void 0:t.addEventListener("timeupdate",Object(n["e"])((e=>{var t;if((t=e===null||e===void 0?void 0:e.target)===null||t===void 0?void 0:t.currentTime){this.videoCurrentTime=e.target.currentTime}})));this.onProgress()}attachPlayerStore(e){this.playerStore=e}setDragging(e){this.isDragging=e}setProgressBarTime(e){this.progressBarTime=e}setThumbnailSprite(e){this.thumbnailSprite=e}setThumbnailsVTTUrl(e){this.thumbnailVTTUrl=e}setCurrentMouseTime(e){this.currentMouseTime=e}seekTo(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.setProgressBarTime(e);if(t){clearTimeout(this.playDebounced);this.playDebounced=setTimeout((()=>{var t;const r=(t=this===null||this===void 0?void 0:this.player)===null||t===void 0?void 0:t.getMediaElement();if(r!==undefined&&r!==null){r.currentTime=e}}),35)}}}s([n["t"].ref],l.prototype,"player",void 0);s([n["t"]],l.prototype,"playerStore",void 0);s([n["t"].ref],l.prototype,"ref",void 0);s([n["t"]],l.prototype,"progressHolderRef",void 0);s([n["t"]],l.prototype,"isDragging",void 0);s([n["t"]],l.prototype,"videoCurrentTime",void 0);s([n["t"].ref],l.prototype,"thumbnailSprite",void 0);s([n["t"]],l.prototype,"thumbnailVTTUrl",void 0);s([n["t"]],l.prototype,"isHovering",void 0);s([n["t"]],l.prototype,"moveEvent",void 0);s([n["t"]],l.prototype,"_buffered",void 0);s([n["t"]],l.prototype,"_bufferedPercent",void 0);s([n["t"]],l.prototype,"progressBarTime",void 0);s([n["t"]],l.prototype,"currentMouseTime",void 0);s([n["e"]],l.prototype,"setMoveEvent",null);s([n["g"]],l.prototype,"progressInfo",null);s([n["g"]],l.prototype,"currentTimePercentValue",null);s([n["g"]],l.prototype,"currentTimePercent",null);s([n["g"]],l.prototype,"bufferedPercent",null);s([n["e"]],l.prototype,"setHovering",null);s([n["e"]],l.prototype,"setBuffered",null);s([n["e"]],l.prototype,"setBufferedPercent",null);s([n["e"]],l.prototype,"attachPlayer",null);s([n["e"]],l.prototype,"attachPlayerStore",null);s([n["e"]],l.prototype,"setDragging",null);s([n["e"]],l.prototype,"setProgressBarTime",null);s([n["e"]],l.prototype,"setThumbnailSprite",null);s([n["e"]],l.prototype,"setThumbnailsVTTUrl",null);s([n["e"]],l.prototype,"setRef",void 0);s([n["e"]],l.prototype,"setProgressHolderRef",void 0);s([n["e"]],l.prototype,"setPopoverAreaRef",void 0);s([n["e"]],l.prototype,"setCurrentMouseTime",null);r.d(t,"a",(function(){return u}));var c=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class u extends l{attachPlayer(e,t){this.player=e;this.videoElement=t;this.videoElement.addEventListener("progress",this.onProgress);this.videoElement.addEventListener("timeupdate",Object(n["e"])((e=>{var t;if((t=e===null||e===void 0?void 0:e.target)===null||t===void 0?void 0:t.currentTime){this.videoCurrentTime=e.target.currentTime}})));this.onProgress()}get videoDuration(){var e,t;if(isNaN((e=this.videoElement)===null||e===void 0?void 0:e.duration)){return 0}const r=(t=this.videoElement)===null||t===void 0?void 0:t.duration;return r!==null&&r!==void 0?r:0}seekTo(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.setProgressBarTime(e);if(t){clearTimeout(this.playDebounced);this.playDebounced=setTimeout((()=>{if(this&&this.player){if(this.videoElement){this.videoElement.currentTime=e}}}),35)}}}c([n["e"]],u.prototype,"attachPlayer",null)},"./src/udemy/js/shaka-video-player/shaka-default-styles.global.less":function(e,t,r){},"./src/udemy/js/shaka-video-player/shaka-video-player.react-component.tsx":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/icons/dist/play-arrow.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var a=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var s=r("./node_modules/classnames/index.js");var l=r.n(s);var c=r("./node_modules/mobx/lib/mobx.module.js");var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/prop-types/index.js");var d=r.n(p);var h=r("./node_modules/react/index.js");var m=r.n(h);var f=r("./node_modules/react-measure/lib/react-measure.js");var g=r.n(f);var y=r("./src/udemy/js/utils/autopilot.js");var b=r("./src/udemy/js/utils/browser-log-collection.js");var v=r("./src/udemy/js/utils/fullscreen.tsx");var w=r("./src/udemy/js/utils/get-request-data.js");var E=r("./src/udemy/js/utils/hotkeys.js");var S=r("./src/udemy/js/utils/noop.js");var _=r("./src/udemy/js/utils/ud-api-stat.js");var x=r("./src/udemy/js/utils/ud-me.js");var D=r("./src/udemy/js/utils/get-config-data.js");var C=r("./src/udemy/js/utils/get-experiment-data.js");var T=r("./src/udemy/js/shaka-video-player/constants.ts");function O(e){var t;const r=new URL(e);if(/(\.udemy\.(com|cn)|\.dev-ud\.com)$/.test(r.hostname)){return(t=r.searchParams.get("provider"))!==null&&t!==void 0?t:"none"}if(/^h1010\./.test(r.hostname)){return"media_package"}if(/^\w+-a\./.test(r.hostname)){return"verizon"}if(/^\w+-b\./.test(r.hostname)){return"cdn77"}if(/^\w+-c\./.test(r.hostname)){return"cloudfront"}return"none"}function k(e){let t=null;if(e&&Object(C["c"])("sw","useEncryptedVideos",false)){t="encrypted_videos"}return t}function P(e){return Object.keys(e).reduce(((t,r)=>{const n=e[r].highest;if(n){t[r]=Math.round(n)}return t}),{})}function A(e){var t,r;const n={isAdaptive:e.isAdaptive,resolution:""};if(!n.isAdaptive){return n}if(((r=(t=e._videoPlayer.getManifest())===null||t===void 0?void 0:t.imageStreams[0])===null||r===void 0?void 0:r.mimeType)===T["m"]){n.resolution=e.hlsResolution.toString()}return n}function I(e){return{width:e.clientWidth,height:e.clientHeight}}function j(e){var t,r,n,i,o;const a=Object.assign({assetId:e.assetId,playerSessionId:e.sessionId,cdnProvider:O(e._videoPlayer.getAssetUri()),sourceType:(i=(n=(r=(t=e._videoPlayer)===null||t===void 0?void 0:t.getManifest())===null||r===void 0?void 0:r.variants[0])===null||n===void 0?void 0:n.video.mimeType)!==null&&i!==void 0?i:"video/mp4",resolution:e.activeResolution.label,currentTime:(o=e._videoPlayer.getMediaElement())===null||o===void 0?void 0:o.currentTime,isEncrypted:!!e.mediaLicenseToken,playerVersion:`videojs ${e._videoPlayer.videojsVersion}`,videoElement:{width:1080,height:720},bandwidthWatermarks:{},experimentName:""},A(e));if(e.videoElement){a.videoElement=I(e.videoElement)}if(Object.keys(e.bandwidthWatermarks).length>0){a.bandwidthWatermarks=P(e.bandwidthWatermarks)}const s=k(a.isEncrypted);if(s){a.experimentName=s}return a}function R(e){var t;if(!e.isAdaptive||!(e._videoPlayer.currentType()===T["m"])){return e.activeResolution.label}return(t=e.hlsResolution)===null||t===void 0?void 0:t.toString()}function N(e){if(e){const t=new URL(e);return t.pathname}}function L(e,t){return{assetId:e.assetId,userModulo:x["a"].id%100,retries:e.numErrors,errorCode:t.code,errorMessage:t.message,responseStatus:t.responseStatus,responseURL:t.responseURL,responsePath:N(t.responseURL),responseContentType:t.responseContentType,resolution:R(e),isAdaptive:e.isAdaptive,isEncrypted:!!e.mediaLicenseToken,trackingTag:e.trackingTag,readyState:e._videoPlayer.readyState(),networkState:e._videoPlayer.networkState(),cdn:O(e._videoPlayer.currentSrc()),srcType:e._videoPlayer.currentType()}}const M="8iioa2q7br3ci17v962kflt1c";const q="vfq2nsli1v76fglgdl9puq0cd";const U=["x015YltzinekiQmcKsWrsJ92Q==","x01k4HvrX4OniExuJIt2rtJ-g=="];const H=Object(D["a"])();function F(e,t,r){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var i;if(!e){return{}}const{assetId:o,courseId:a,duration:s,playerName:l,isPaid:c}=e;const u=((i=H.brand.organization)===null||i===void 0?void 0:i.encrypted_id)||0;const p=(t===null||t===void 0?void 0:t.length)?O(t[0].src):undefined;const d={plugins:{mux:{respectDoNotTrack:false,data:{env_key:q,player_name:l,player_init_time:Date.now(),viewer_user_id:x["a"].encrypted_id||0,video_id:o,video_cdn:p,video_title:o,video_duration:s,video_series:a,video_stream_type:c?"paid":"free",video_encoding_variant:r?"encrypted":"plain",sub_property_id:u}}}};if(H.env==="DEV"&&[39170530,39280020].includes(o)){d.plugins.mux.debug=true;d.plugins.mux.data.env_key=M;d.plugins.mux.data.player_name="Video JS Test Player";return d}const h=u||Math.random()<=.33;if(H.env==="PROD"&&h||n){return d}return{}}function B(e,t,r){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var i;if(!e){return{}}const{assetId:o,courseId:a,duration:s,playerName:l,isPaid:c}=e;const u=((i=H.brand.organization)===null||i===void 0?void 0:i.encrypted_id)||0;const p=(t===null||t===void 0?void 0:t.length)?O(t[0].src):undefined;const d={debug:false,disableCookies:false,respectDoNotTrack:false,data:{env_key:q,player_name:l,player_init_time:Date.now(),viewer_user_id:x["a"].encrypted_id||0,video_id:o,video_cdn:p,video_title:o,video_duration:s,video_series:a,video_stream_type:c?"paid":"free",video_encoding_variant:r?"encrypted":"plain",sub_property_id:u}};if(H.env==="DEV"){d.debug=true;d.data.env_key=M;return d}const h=u||Math.random()<=.33;if(H.env==="PROD"&&h||n){return d}return{}}var z=r("./src/udemy/js/shaka-video-player/captions/captions.mobx-store.ts");var V=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var W=r.n(V);var G=r("./node_modules/react-dom/index.js");var K=r.n(G);var $=r("./src/udemy/js/shaka-video-player/captions/cue-display/captions-display.less");var X=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Y=class e extends m.a.Component{render(){if(!this.props.captionDisplayStore.activeCueText){return null}return m.a.createElement("div",{className:"captions-display--captions-cue-text--1W4Ia","data-purpose":"captions-cue-text",style:this.props.captionDisplayStore.captionStyle},this.props.captionDisplayStore.activeCueText)}};Y.propTypes={captionDisplayStore:d.a.object.isRequired};Y=X([Object(u["e"])("captionDisplayStore"),u["f"]],Y);var Q=r("./src/udemy/js/shaka-video-player/captions/cue-display/well.less");var J=r.n(Q);var Z=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};function ee(e,t){const r=e[0].toUpperCase()+e.slice(1);return{[`Webkit${r}`]:t,[`Moz${r}`]:t,[`ms${r}`]:t,[`O${r}`]:t,[e]:t}}let te=class e extends m.a.Component{constructor(e){super(e);this.addContainerRef=e=>{this.containerRef=e};this.addTextRef=e=>{this.textRef=e};this.disposers=[]}componentDidMount(){this.disposers.push(Object(c["u"])(this.props.captionDisplayStore,"cuePosition",(()=>{this.textRef.classList.add(J.a["transition-active"])})),Object(c["u"])(this.props.captionDisplayStore,"activeCueText",(()=>{this.textRef.classList.remove(J.a["transition-active"]);this.reset=true})))}componentWillUnmount(){this.disposers.forEach((e=>e()))}render(){const{captionDisplayStore:e}=this.props;const t=this.containerRef&&this.textRef?this.textRef.offsetHeight-this.containerRef.offsetHeight:0;const r=ee("transform",`translateY(-${t*e.cuePosition}px)`);const n=ee("transform","none");const i=t&&!this.reset;this.reset=false;return m.a.createElement("div",{className:"well--container--1cXrh",style:{fontSize:e.captionStyle.fontSize},ref:this.addContainerRef},m.a.createElement("span",{className:"well--text--1xGLx well--transition-active--2EEJa",style:i?r:n,ref:this.addTextRef},e.activeCueText))}};te.propTypes={captionDisplayStore:d.a.object.isRequired};te=Z([Object(u["e"])("captionDisplayStore"),u["f"]],te);const re={"./captions-display.less":{"captions-container":"captions-display--captions-container--1SP58","user-inactive":"captions-display--user-inactive--1mfIN","captions-cue-text":"captions-display--captions-cue-text--1W4Ia"}};var ne=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let ie=class e extends m.a.Component{render(){if(this.props.captionDisplayStore.shouldDisplayWell){return m.a.createElement(te,{captionDisplayStore:this.props.captionDisplayStore})}const e=l()("captions-container",{"user-inactive":this.props.userActivityStore&&!this.props.userActivityStore.isUserActive});const t=m.a.createElement("div",{className:W()(e,re)},m.a.createElement(Y,{captionDisplayStore:this.props.captionDisplayStore}));return K.a.createPortal(t,this.props.containerForCue)}};ie.propTypes={containerForCue:d.a.object,captionDisplayStore:d.a.object.isRequired,userActivityStore:d.a.object};ie.defaultProps={userActivityStore:null,containerForCue:null};ie=ne([Object(u["e"])("captionDisplayStore","userActivityStore"),u["f"]],ie);var oe=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var ae=r("./node_modules/store/dist/store.legacy.js");var se=r.n(ae);var le=r("./src/udemy/js/utils/composed-path.js");var ce=r("./node_modules/ua-parser-js/src/ua-parser.js");var ue=r.n(ce);const pe=new ue.a;function de(e){if(!e){return}const t=e.match(/^[0-9]+/g);if(t){return t[0]}}const he={browser:pe.getBrowser(),os:pe.getOS(),device:pe.getDevice(),isMobile:pe.getDevice().type==="mobile"};const me=(e,t)=>{const r=e.indexOf("#");if(r===-1){return{src:e,x:0,y:0,w:0,h:0}}const n=e.substring(0,r);const i=e.substring(r+1);if(i.substring(0,5)!=="xywh="){return{src:t+n,x:0,y:0,w:0,h:0}}const o=i.substring(5).split(",");return{src:t+n,x:+o[0],y:+o[1],w:+o[2],h:+o[3]}};he.browser.version=de(he.browser.version);he.os.version=de(he.os.version);(()=>{if(he.os.name==="Mac OS"&&window.navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1){he.os.name="iOS"}})();var fe=r("./src/udemy/js/shaka-video-player/captions/constants.ts");var ge=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class ye{constructor(e,t,r){this.activeFontSize=fe["c"];this.activeOpacity=fe["d"];this.isWellEnabled=fe["e"];this.menuPage=fe["g"].TRACKS;this.cuePosition=0;this.toggleMenu=e=>{if(e){this.controlBarStore.setMenuOpen(T["b"].CAPTIONS)}else{this.setSubmenu(fe["g"].TRACKS);this.controlBarStore.setMenuClosed()}};this.toggleWellEnabled=()=>{this.userHasWellPreference=true;this.isWellEnabled=!this.isWellEnabled};this.updateUserPreferences=()=>{if(this.userHasFontSizePreference||this.userHasOpacityPreference||this.userHasWellPreference){const e={fontSize:-1,opacity:-1,isWellEnabled:false};if(this.userHasFontSizePreference){e.fontSize=this.activeFontSize}if(this.userHasOpacityPreference){e.opacity=this.activeOpacity}if(this.userHasWellPreference){e.isWellEnabled=this.isWellEnabled}se.a.set(fe["j"],e)}else{se.a.remove(fe["j"])}};this.reset=()=>{this.userHasFontSizePreference=false;this.userHasOpacityPreference=false;this.userHasWellPreference=false;this.activeFontSize=fe["c"];this.activeOpacity=fe["d"];this.isWellEnabled=fe["e"]};this.calculateCuePosition=()=>{if(!this.activeCue){this.cuePosition=0;return}const e=this.activeCue.endTime-this.activeCue.startTime;this.cuePosition=(this.videoPlayerStore.currentTime-this.activeCue.startTime)/e};this.controlBarStore=e;this.captionsStore=t;this.videoPlayerStore=r;this.userHasFontSizePreference=false;this.userHasOpacityPreference=false;this.userHasWellPreference=false;this.loadUserPreferences();Object(c["v"])((()=>[this.activeFontSize,this.activeOpacity,this.isWellEnabled]),this.updateUserPreferences)}attachPlayer(e){var t;this.player=e;(t=e.getMediaElement())===null||t===void 0?void 0:t.addEventListener("timeupdate",this.calculateCuePosition)}get isMenuOpen(){return this.controlBarStore.activeMenu===T["b"].CAPTIONS}setSubmenu(e){this.menuPage=e}selectFontSize(e){this.userHasFontSizePreference=true;this.activeFontSize=e}selectTrackOpacity(e){this.userHasOpacityPreference=true;this.activeOpacity=e}loadUserPreferences(){const e=se.a.get(fe["j"]);if(e){if(e.fontSize!==undefined){this.activeFontSize=e.fontSize;this.userHasFontSizePreference=true}if(e.opacity!==undefined){this.activeOpacity=e.opacity;this.userHasOpacityPreference=true}if(e.isWellEnabled!==undefined){this.isWellEnabled=e.isWellEnabled;this.userHasWellPreference=true}}}get activeTrack(){if(!this.captionsStore.activeTracks.length){return null}return this.captionsStore.activeTracks[0]}get activeCue(){if(!this.activeTrack||!this.activeTrack.activeCues.length){return null}return this.activeTrack.activeCues[0]}get activeCueText(){if(!this.activeCue){return""}return this.activeCue.displayText}get captionStyle(){const e=this.videoPlayerStore.playerHeight;let t;if(!e){t=fe["a"].FONT_SIZE_DEFAULT}else{t=Math.max(e*.04,fe["a"].FONT_SIZE_MIN)}const r=this.activeFontSize/100*t;return{fontSize:`${Object(oe["c"])(r)}rem`,opacity:this.activeOpacity/100}}get shouldDisplayWell(){return this.isWellEnabled&&this.activeTrack&&!he.isMobile}}ge([c["t"]],ye.prototype,"activeFontSize",void 0);ge([c["t"]],ye.prototype,"activeOpacity",void 0);ge([c["t"]],ye.prototype,"isWellEnabled",void 0);ge([c["t"]],ye.prototype,"menuPage",void 0);ge([c["t"]],ye.prototype,"cuePosition",void 0);ge([c["g"]],ye.prototype,"isMenuOpen",null);ge([c["e"]],ye.prototype,"setSubmenu",null);ge([c["e"]],ye.prototype,"selectFontSize",null);ge([c["e"]],ye.prototype,"selectTrackOpacity",null);ge([c["e"]],ye.prototype,"toggleWellEnabled",void 0);ge([c["e"]],ye.prototype,"loadUserPreferences",null);ge([c["e"]],ye.prototype,"reset",void 0);ge([c["e"]],ye.prototype,"calculateCuePosition",void 0);ge([c["g"]],ye.prototype,"activeTrack",null);ge([c["g"]],ye.prototype,"activeCue",null);ge([c["g"]],ye.prototype,"activeCueText",null);ge([c["g"]],ye.prototype,"captionStyle",null);ge([c["g"]],ye.prototype,"shouldDisplayWell",null);class be extends ye{attachPlayer(e){e===null||e===void 0?void 0:e.setTextTrackVisibility(true);this.player=e}}var ve=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class we{constructor(){this.activeMenu=T["b"].NONE}setMenuOpen(e){this.activeMenu=e}setMenuClosed(){this.activeMenu=T["b"].NONE}}ve([c["t"]],we.prototype,"activeMenu",void 0);ve([c["e"]],we.prototype,"setMenuOpen",null);ve([c["e"]],we.prototype,"setMenuClosed",null);var Ee=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var Se=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var _e=r("./node_modules/axios/index.js");var xe=r.n(_e);var De=r("./node_modules/webvtt-parser/parser.js");const Ce="durationchange";const Te="loadedmetadata";var Oe=r("./src/udemy/js/shaka-video-player/sneak-peek/sneak-peek.less");var ke=r.n(Oe);var Pe=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class Ae{constructor(e){var t,r;this.duration=null;this.thumbnailsVTTUrl="";this.setDuration=()=>{this.duration=this.player.getMediaElement().duration};this.setProgressBarStore(e);this.thumbnailsVTTUrl=(r=(t=this.progressBarStore)===null||t===void 0?void 0:t.thumbnailSprite)===null||r===void 0?void 0:r.vtt_url;this.sneakPeekCues=[]}setProgressBarStore(e){this.progressBarStore=e}get isHovering(){return this.progressBarStore.isHovering}get portalElement(){return this.progressBarStore.ref}get thumbSpriteUrl(){return new URL(this.progressBarStore.thumbnailSprite.img_url)}get player(){return this.progressBarStore.player}get videoElement(){return this.progressBarStore.videoElement}get moveEvent(){return this.progressBarStore.moveEvent}}Pe([c["t"].ref],Ae.prototype,"progressBarStore",void 0);Pe([c["t"]],Ae.prototype,"duration",void 0);Pe([c["t"]],Ae.prototype,"thumbnailsVTTUrl",void 0);Pe([c["e"]],Ae.prototype,"setProgressBarStore",null);Pe([c["e"]],Ae.prototype,"setDuration",void 0);Pe([c["g"]],Ae.prototype,"isHovering",null);Pe([c["g"]],Ae.prototype,"portalElement",null);Pe([c["g"]],Ae.prototype,"thumbSpriteUrl",null);Pe([c["g"]],Ae.prototype,"player",null);Pe([c["g"]],Ae.prototype,"videoElement",null);Pe([c["g"]],Ae.prototype,"moveEvent",null);var Ie=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let je=class e extends m.a.Component{constructor(e){super(e);this.setDurationEvents=()=>{[Ce,Te].forEach((e=>{if(this.sneakPeekStore.videoElement){this.sneakPeekStore.videoElement.addEventListener(e,this.sneakPeekStore.setDuration)}}));this.sneakPeekStore.setDuration()};this.sneakPeekStore=new Ae(e.progressBarStore);this.addSneakPeekCues();this.setReactions()}setReactions(){Object(c["v"])((()=>this.sneakPeekStore.player),(()=>this.sneakPeekStore.setProgressBarStore(this.props.progressBarStore)));Object(c["v"])((()=>this.sneakPeekStore.sneakPeekCues),this.setDurationEvents,{fireImmediately:true})}addSneakPeekCues(){xe.a.get(this.sneakPeekStore.thumbnailsVTTUrl).then((e=>{const t=e.data;const r=new De["WebVTTParser"](this.sneakPeekStore.videoElement,"thumbnails");const n=r.parse(t).cues;for(let e=0;e<n.length;e++){const t=n[e];const r=new VTTCue(t.startTime,t.endTime,t.text);this.sneakPeekStore.sneakPeekCues.push(r)}})).catch((e=>{_["b"].increment("thumbnails_vtt_error",e)}))}get imgStyles(){const e=[this.imageSettings.y,this.imageSettings.w+this.imageSettings.x,this.imageSettings.y+this.imageSettings.h,this.imageSettings.x];return{left:`${-this.imageSettings.x}px`,top:`${-this.imageSettings.y}px`,clip:`rect(${e.join("px,")}px)`}}get containerLeft(){const e=this.sneakPeekStore.portalElement.getBoundingClientRect();const t=window.pageXOffset||document.documentElement.scrollLeft;const r=(e.width||e.right)+t;let n=this.mouseLeftPosition;const i=this.imageSettings.w/2;if(n+i>r){n=r-this.imageSettings.w}else if(n<i){n=0}else{n=n-i}return n}get containerStyles(){const e={width:"0",height:"0",left:"0",right:"0"};if(this.imageSettings&&this.imageSettings.w!==0){e.width=`${this.imageSettings.w}px`;e.height=`${this.imageSettings.h}px`;if(this.sneakPeekStore.isHovering){e.left=`${this.containerLeft}px`}else{e.left="-1000px"}}return e}get imgSrc(){let e="";if(this.imageSettings.src[0]==="/"){e=this.sneakPeekStore.videoElement.currentSrc();e=e.substring(0,e.lastIndexOf("/"))}return e+this.imageSettings.src+this.sneakPeekStore.thumbSpriteUrl.search}get mouseLeftPosition(){if(!this.sneakPeekStore.moveEvent){return null}const e=this.sneakPeekStore.moveEvent.changedTouches?this.sneakPeekStore.moveEvent.changedTouches[0].pageX:this.sneakPeekStore.moveEvent.pageX;const t=window.pageXOffset||document.documentElement.scrollLeft;let r=e||this.sneakPeekStore.moveEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;r-=this.sneakPeekStore.portalElement.getBoundingClientRect().left+t;return r}get imageSettings(){let e=0;let t={w:0,h:0,x:0,y:0,src:""};const r=this.sneakPeekStore.portalElement.offsetWidth>0?this.sneakPeekStore.portalElement.offsetWidth:1;const n=Math.floor(this.mouseLeftPosition/r*this.sneakPeekStore.duration);const i=this.sneakPeekStore.thumbSpriteUrl.toString().split("?")[0];const o=`${i.slice(0,i.lastIndexOf("/"))}/`;while(e<this.sneakPeekStore.sneakPeekCues.length){const r=this.sneakPeekStore.sneakPeekCues[e];if(r.startTime<=n&&r.endTime>=n){t=me(r.text,o);break}e++}if(t){t.w=t.w?t.w:0;t.h=t.h?t.h:0}return t}get shouldRender(){if(!this.props.progressBarStore||!this.props.progressBarStore.thumbnailSprite||!this.props.progressBarStore.ref||!this.sneakPeekStore.thumbnailsVTTUrl||!this.sneakPeekStore.sneakPeekCues||this.sneakPeekStore.sneakPeekCues.length==0){return false}return true}render(){return this.shouldRender?m.a.createElement("div",{className:ke.a["sneak-peek-holder"],"data-purpose":"video-sneak-peek-container",style:this.containerStyles,ref:m.a.createRef()},m.a.createElement(Se["a"],{lazy:false,"data-purpose":"video-sneak-peek-image",alt:gettext("Lecture thumbnail"),className:ke.a["sneak-peek"],src:this.imgSrc,height:"unset",width:"unset",style:Object(c["A"])(this.imgStyles)})):null}};je.propTypes={progressBarStore:d.a.object.isRequired};je=Ie([Object(u["e"])("progressBarStore"),u["f"]],je);var Re=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Ne=class e extends h["Component"]{constructor(){super(...arguments);this.renderBuffer=(e,t)=>{let{start:r,end:n}=e;return m.a.createElement("div",{"data-purpose":"video-progress-buffer",key:t,style:{left:this.calculateBufferTimePercent(r),width:this.calculateWidth(r,n)}})}}calculateBufferTimePercent(e){const t=this.props.progressBarStore.videoDuration;return`${100/t*e}%`}calculateWidth(e,t){const r=this.calculateBufferTimePercent(e);const n=this.calculateBufferTimePercent(t);return`calc(${n} - ${r})`}render(){var e,t;return(t=(e=this.props.progressBarStore)===null||e===void 0?void 0:e.buffers)===null||t===void 0?void 0:t.map(this.renderBuffer)}};Ne.propTypes={progressBarStore:d.a.object.isRequired};Ne=Re([Object(u["e"])("progressBarStore"),u["f"]],Ne);var Le=r("./src/udemy/js/shaka-video-player/progress-bar/progress-bar.less");var Me=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let qe=class e extends h["Component"]{get loadedInfo(){const e=gettext("Loaded: %(bufferedPercent)s");return interpolate(e,{bufferedPercent:this.props.progressBarStore.bufferedPercent},true)}render(){return m.a.createElement("div",{className:"progress-bar--load-progress--2HDCN"},m.a.createElement("span",{className:"ud-sr-only"},this.loadedInfo),m.a.createElement(Ne,{progressBarStore:this.props.progressBarStore}))}};qe.propTypes={progressBarStore:d.a.object.isRequired};qe=Me([Object(u["e"])("progressBarStore"),u["f"]],qe);var Ue=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let He=class e extends h["Component"]{get progressBarInfo(){const e=gettext("Progress bar: %(currentTimePercent)s");return interpolate(e,{currentTimePercent:this.props.progressBarStore.currentTimePercent},true)}render(){return m.a.createElement("div",{className:"progress-bar--play-progress--1SW-E",style:{width:this.props.progressBarStore.currentTimePercent}},m.a.createElement("span",{className:"ud-sr-only"},this.progressBarInfo))}};He.propTypes={progressBarStore:d.a.object.isRequired};He=Ue([Object(u["e"])("progressBarStore"),u["f"]],He);const Fe={"./progress-bar.less":{"progress-bar-control":"progress-bar--progress-bar-control--2zR7z",slider:"progress-bar--slider--1ngl2","progress-holder":"progress-bar--progress-holder--1XVMX",hover:"progress-bar--hover--2uKEx","load-progress":"progress-bar--load-progress--2HDCN","play-progress":"progress-bar--play-progress--1SW-E"}};var Be=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let ze=class e extends h["Component"]{constructor(e){super(e);this.listeners=[];this.seekToCurrentMousePosition=()=>{this.props.progressBarStore.seekTo(this.props.progressBarStore.currentMouseTime)};this.onDragEnd=e=>{if(this.isOutsideProgressBarEvent(e)){this.props.progressBarStore.setHovering(false)}this.props.progressBarStore.setDragging(false)};this.onMouseEnter=()=>{this.props.progressBarStore.setHovering(true)};this.documentMove=e=>{if(this.props.progressBarStore.isDragging&&this.isOutsideProgressBarEvent(e)){this.moveListener(e);this.seekToCurrentMousePosition()}};this.isOutsideProgressBarEvent=e=>{const t=e.path||e.composedPath();const r=t.includes(document);const n=t.includes(this.props.progressBarStore.ref);if(!r){return false}return!n};this.whenIsDragging=e=>t=>this.props.progressBarStore.isDragging&&e(t);this.whenIsNotDragging=e=>()=>!this.props.progressBarStore.isDragging&&e();this.disableSelection=e=>{e.preventDefault()};this.onDragStart=()=>{this.props.progressBarStore.setDragging(true)};this.moveListener=e=>{this.props.progressBarStore.setMoveEvent(e);const t=window.pageXOffset||document.documentElement.scrollLeft;const r=e.changedTouches?e.changedTouches[0].pageX:e.pageX;const n=(r||e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft)-this.props.progressBarStore.ref.getBoundingClientRect().left+t;const i=n>this.props.progressBarStore.ref.offsetWidth?this.props.progressBarStore.ref.offsetWidth:n;const o=i<0?0:i;this.props.progressBarStore.setCurrentMouseTime(Math.floor(o/this.props.progressBarStore.ref.offsetWidth*this.props.progressBarStore.videoDuration))};this.onKeyDown=e=>{Object(Ee["b"])((()=>{e.preventDefault();this.props.progressBarStore.seekBack()}))(e);Object(Ee["f"])((()=>{e.preventDefault();this.props.progressBarStore.seekForward()}))(e);Object(Ee["d"])((()=>{e.preventDefault()}))(e)};this.progressBarTimeUpdateDisposer=Object(c["v"])((()=>this.props.progressBarStore.videoCurrentTime),(()=>{this.props.progressBarStore.setProgressBarTime(this.props.progressBarStore.videoCurrentTime)}),{fireImmediately:true});Object(c["D"])((()=>this.props.progressBarStore.ref),(()=>{const e=this.props.progressBarStore.ref;this.addBulkEvents([{on:["touchmove","mousemove"],run:this.moveListener},{on:"click",run:this.seekToCurrentMousePosition},{on:"mousemove",run:[this.whenIsDragging(this.seekToCurrentMousePosition)]},{selector:window,on:"mousemove",run:this.documentMove},{on:"mousedown",run:this.onDragStart},{selectors:[e,window,document.body],on:"mouseup",run:this.onDragEnd},{on:"mouseenter",run:this.onMouseEnter},{on:"mouseleave",run:this.whenIsNotDragging((()=>this.props.progressBarStore.setHovering(false)))},{selectors:[e,window],on:"selectstart",run:this.whenIsDragging(this.disableSelection)}])}),{fireImmediately:true})}componentWillUnmount(){this.progressBarTimeUpdateDisposer();this.listenersDisposer()}addBulkEvents(e){e.forEach((e=>{let{on:t,run:r,selectors:n=null,selector:i=this.props.progressBarStore.ref}=e;return this.addListeners(t,r,n||i)}))}addListeners(e,t,r){if(Array.isArray(r)){r.forEach((r=>this.addListeners(e,t,r)))}else if(Array.isArray(e)){e.forEach((e=>this.addListeners(e,t,r)))}else if(Array.isArray(t)){t.forEach((t=>this.addListeners(e,t,r)))}else{const n=r;this.addListener(e,t,n)}}addListener(e,t,r){if(!r){return false}r.addEventListener(e,t);this.listeners.push({on:e,run:t,selector:r})}listenersDisposer(){this.listeners.forEach((e=>{let{on:t,run:r,selector:n}=e;return n.removeEventListener(t,r)}))}get styles(){return l()({"progress-bar-control":true,hover:this.props.progressBarStore.isHovering})}render(){return m.a.createElement("div",{ref:this.props.progressBarStore.setRef,className:W()(this.styles,Fe)},m.a.createElement("div",{tabIndex:0,className:"progress-bar--slider--1ngl2",role:"slider","data-purpose":"video-progress-bar","aria-label":gettext("Progress bar"),"aria-valuetext":this.props.progressBarStore.progressInfo,"aria-valuenow":parseInt(this.props.progressBarStore.currentTimePercentValue,10),"aria-valuemin":0,"aria-valuemax":100,onKeyDown:this.onKeyDown},m.a.createElement("div",{ref:this.props.progressBarStore.setProgressHolderRef,className:"progress-bar--progress-holder--1XVMX"},m.a.createElement(qe,null),m.a.createElement(He,null))),m.a.createElement(je,{moveEvent:this.props.progressBarStore.moveEvent}))}};ze.propTypes={progressBarStore:d.a.object.isRequired};ze=Be([Object(u["e"])("progressBarStore"),u["f"]],ze);var Ve=r("./node_modules/@udemy/icons/dist/subtitles.ud-icon");var We=r.n(Ve);var Ge=r("./src/udemy/js/shaka-video-player/control-bar/video-control-bar-dropdown.react-component.tsx");var Ke=r("./node_modules/@udemy/icons/dist/next.ud-icon");var $e=r.n(Ke);var Xe=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var Ye=r.n(Xe);var Qe=r("./src/udemy/js/shaka-video-player/control-bar/video-control-bar-dropdown.less");var Je=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Ze=class e extends m.a.Component{constructor(){super(...arguments);this.goToTracks=()=>{this.props.captionDisplayStore.setSubmenu(fe["g"].TRACKS);this.props.onChangeMenu()};this.goToFontSize=()=>{this.props.captionDisplayStore.setSubmenu(fe["g"].FONT_SIZE);this.props.onChangeMenu()};this.goToOpacity=()=>{this.props.captionDisplayStore.setSubmenu(fe["g"].OPACITY);this.props.onChangeMenu()}}render(){const{captionDisplayStore:e}=this.props;const t=gettext("Caption settings");return m.a.createElement(Ge["b"].Menu,{"data-purpose":"captions-dropdown-menu"},m.a.createElement(Ge["b"].MenuItem,{onClick:this.goToTracks,"data-purpose":"go-to-tracks","aria-label":gettext("Back to captions menu")},m.a.createElement(Ye.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--prev-icon--hrRYm"}),t),m.a.createElement("li",{role:"separator"}),m.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":t},m.a.createElement("li",null,m.a.createElement(Ge["b"].MenuItem,{onClick:this.goToFontSize,"data-purpose":"go-to-font-size","aria-haspopup":"menu"},gettext("Font size"),m.a.createElement("span",{"data-purpose":"current-font-size",className:"video-control-bar-dropdown--current-value--1KGPt"},`${e.activeFontSize}%`),m.a.createElement($e.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--next-icon--1WFHm"}))),m.a.createElement("li",null,m.a.createElement(Ge["b"].MenuItem,{onClick:this.goToOpacity,"data-purpose":"go-to-opacity","aria-haspopup":"menu"},gettext("Background opacity"),m.a.createElement("span",{"data-purpose":"current-opacity",className:"video-control-bar-dropdown--current-value--1KGPt"},`${e.activeOpacity}%`),m.a.createElement($e.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--next-icon--1WFHm"}))),!he.isMobile&&m.a.createElement("li",null,m.a.createElement(Ge["b"].MenuItem,{onClick:e.toggleWellEnabled,"aria-checked":e.isWellEnabled,role:"menuitemcheckbox"},gettext("Display under video"))),m.a.createElement("li",null,m.a.createElement(Ge["b"].MenuItem,{onClick:e.reset,"data-purpose":"reset"},gettext("Reset")))))}};Ze.propTypes={captionDisplayStore:d.a.object.isRequired,onChangeMenu:d.a.func.isRequired};Ze=Je([Object(u["e"])("captionDisplayStore"),u["f"]],Ze);var et=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let tt=class e extends m.a.Component{constructor(){super(...arguments);this.goToSettings=()=>{this.props.captionDisplayStore.setSubmenu(fe["g"].SETTINGS);this.props.onChangeMenu()}}render(){const{captionDisplayStore:e}=this.props;const t=gettext("Font size");return m.a.createElement(Ge["b"].Menu,{"data-purpose":"captions-dropdown-menu"},m.a.createElement(Ge["b"].MenuItem,{onClick:this.goToSettings,"data-purpose":"go-to-settings","aria-label":gettext("Back to caption settings menu")},m.a.createElement(Ye.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--prev-icon--hrRYm"}),t),m.a.createElement("li",{role:"separator"}),m.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":t},fe["f"].map((t=>m.a.createElement("li",{key:t},m.a.createElement(Ge["b"].MenuItem,{onClick:()=>e.selectFontSize(t),"aria-checked":e.activeFontSize===t,role:"menuitemradio"},`${t}%`))))))}};tt.propTypes={captionDisplayStore:d.a.object.isRequired,onChangeMenu:d.a.func.isRequired};tt=et([Object(u["e"])("captionDisplayStore"),u["f"]],tt);var rt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let nt=class e extends m.a.Component{constructor(){super(...arguments);this.goToSettings=()=>{this.props.captionDisplayStore.setSubmenu(fe["g"].SETTINGS);this.props.onChangeMenu()}}render(){const{captionDisplayStore:e}=this.props;const t=gettext("Background opacity");return m.a.createElement(Ge["b"].Menu,{"data-purpose":"captions-dropdown-menu"},m.a.createElement(Ge["b"].MenuItem,{onClick:this.goToSettings,"data-purpose":"go-to-settings","aria-label":gettext("Back to caption settings menu")},m.a.createElement(Ye.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--prev-icon--hrRYm"}),t),m.a.createElement("li",{role:"separator"}),m.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":t},fe["i"].map((t=>m.a.createElement("li",{key:t},m.a.createElement(Ge["b"].MenuItem,{onClick:()=>e.selectTrackOpacity(t),"aria-checked":e.activeOpacity===t,role:"menuitemradio"},`${t}%`))))))}};nt.propTypes={captionDisplayStore:d.a.object.isRequired,onChangeMenu:d.a.func.isRequired};nt=rt([Object(u["e"])("captionDisplayStore"),u["f"]],nt);var it=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let ot=class e extends m.a.Component{constructor(){super(...arguments);this.goToSettings=()=>{this.props.captionDisplayStore.setSubmenu(fe["g"].SETTINGS);this.props.onChangeMenu()}}render(){const{captionDisplayStore:e,captionsStore:t}=this.props;return m.a.createElement(Ge["b"].Menu,{"data-purpose":"captions-dropdown-menu"},m.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":gettext("Captions")},m.a.createElement("li",null,m.a.createElement(Ge["b"].MenuItem,{onClick:()=>t.setActiveCaption(null),"aria-checked":!e.activeTrack,role:"menuitemradio"},gettext("Off"))),t.sortedCaptions.map((e=>m.a.createElement("li",{key:e.id},m.a.createElement(Ge["b"].MenuItem,{onClick:()=>t.setActiveCaption(e),"aria-checked":e.mode===fe["h"].ACTIVE,role:"menuitemradio"},e.label))))),t.hasMachineTranslatedCaptions&&m.a.createElement(Ge["b"].MenuItem,{componentClass:"a",href:"http://translate.google.com",target:"_blank",rel:"noopener noreferrer","data-purpose":"attribution-link"},m.a.createElement(Se["a"],{alt:gettext("Translated by Google"),width:244,height:32,src:"/staticx/udemy/images/content-l10n/translated-by-google.png"})),m.a.createElement("li",{role:"separator"}),m.a.createElement(Ge["b"].MenuItem,{onClick:this.goToSettings,"data-purpose":"go-to-settings","aria-haspopup":"menu"},gettext("Caption settings"),m.a.createElement($e.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--next-icon--1WFHm"})))}};ot.propTypes={captionDisplayStore:d.a.object.isRequired,captionsStore:d.a.object.isRequired,onChangeMenu:d.a.func.isRequired};ot=it([Object(u["e"])("captionDisplayStore","captionsStore"),u["f"]],ot);var at=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let st=class e extends m.a.Component{constructor(){super(...arguments);this.onChangeMenu=()=>{setTimeout((()=>{const e=document.getElementById(this.props.$$udControlBarDropdown.menuId);const t=e===null||e===void 0?void 0:e.querySelectorAll("button,a[href],[tabindex]");if(t!==undefined){const e=t[0];e.focus()}}),0)}}render(){switch(this.props.menuPage){case fe["g"].TRACKS:return m.a.createElement(ot,{onChangeMenu:this.onChangeMenu});case fe["g"].SETTINGS:return m.a.createElement(Ze,{onChangeMenu:this.onChangeMenu});case fe["g"].FONT_SIZE:return m.a.createElement(tt,{onChangeMenu:this.onChangeMenu});case fe["g"].OPACITY:return m.a.createElement(nt,{onChangeMenu:this.onChangeMenu})}}};st.propTypes={menuPage:d.a.oneOf(Object.values(fe["g"])).isRequired,$$udControlBarDropdown:d.a.object.isRequired};st=at([Object(u["e"])("$$udControlBarDropdown")],st);let lt=class e extends m.a.Component{render(){if(!this.props.captionsStore.captions.length){return null}const e=m.a.createElement(Ge["b"].Button,{"data-purpose":"captions-dropdown-button",tooltipProps:{a11yRole:"none",children:gettext("Captions")}},m.a.createElement(We.a,{label:gettext("Subtitles"),size:"medium"}));return m.a.createElement(Ge["b"],{placement:"top-end",isOpen:this.props.captionDisplayStore.isMenuOpen,onToggle:this.props.captionDisplayStore.toggleMenu,trigger:e},m.a.createElement(st,{menuPage:this.props.captionDisplayStore.menuPage}))}};lt.propTypes={captionDisplayStore:d.a.object.isRequired,captionsStore:d.a.object.isRequired};lt=at([Object(u["e"])("captionDisplayStore","captionsStore"),u["f"]],lt);var ct=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class ut{constructor(e){this.toggleMenu=e=>{if(e){this.openMenu()}else{this.closeMenu()}};this.openMenu=()=>{this.controlBarStore.setMenuOpen(T["b"].PLAYBACK_RATE)};this.closeMenu=()=>{this.controlBarStore.setMenuClosed()};this.controlBarStore=e}get isMenuOpen(){return this.controlBarStore.activeMenu===T["b"].PLAYBACK_RATE}}ct([c["g"]],ut.prototype,"isMenuOpen",null);var pt=r("./src/udemy/js/shaka-video-player/playback-rate/playback-rate.less");var dt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let ht=class e extends m.a.Component{constructor(e){super(e);this.store=new ut(this.props.controlBarStore)}render(){const{playbackRateStore:e}=this.props.videoPlayerStore;const{availablePlaybackRates:t,playbackRate:r}=e;const n=m.a.createElement(Ge["b"].Button,{"aria-label":gettext("Playback rate"),"data-purpose":"playback-rate-button",className:"ud-custom-focus-visible playback-rate--trigger--2Gvv7",tooltipProps:{a11yRole:"none",children:gettext("Playback rate")}},m.a.createElement("span",{className:"ud-focus-visible-target playback-rate--trigger-text--2TfYV"},`${r}x`));return m.a.createElement(Ge["b"],{placement:"top-start",isOpen:this.store.isMenuOpen,onToggle:this.store.toggleMenu,className:"playback-rate--playback-rate--184BD",trigger:n},m.a.createElement(Ge["b"].Menu,{"data-purpose":"playback-rate-menu",className:"playback-rate--menu--1J8uR"},t.map((t=>m.a.createElement(Ge["b"].MenuItem,{key:t,onClick:()=>e.choosePlaybackRate(t),"aria-checked":t===r,role:"menuitemradio"},m.a.createElement("span",{className:"ud-text-bold"},`${t}x`))))))}};ht.propTypes={videoPlayerStore:d.a.object.isRequired,controlBarStore:d.a.object.isRequired};ht=dt([Object(u["e"])("videoPlayerStore","controlBarStore"),u["f"]],ht);var mt=r("./node_modules/@udemy/icons/dist/settings.ud-icon");var ft=r.n(mt);var gt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class yt{constructor(e){this.toggleMenu=e=>{if(e){this.openMenu()}else{this.closeMenu()}};this.openMenu=()=>{this.controlBarStore.setMenuOpen(T["b"].SETTINGS)};this.closeMenu=()=>{this.controlBarStore.setMenuClosed()};this.controlBarStore=e}get isMenuOpen(){return this.controlBarStore.activeMenu===T["b"].SETTINGS}}gt([c["g"]],yt.prototype,"isMenuOpen",null);var bt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let vt=class e extends m.a.Component{constructor(e){super(e);this.store=new yt(this.props.controlBarStore)}renderResolutionLabel(e,t,r,n){return e===T["a"]&&r&&n?interpolate(gettext("Auto (%(resolution)sp)"),{resolution:n},true):t}render(){const{videoPlayerStore:e}=this.props;const{activeResolution:t,sortedResolutions:r,hlsResolution:n}=e;const i=m.a.createElement(Ge["b"].Button,{"data-purpose":"settings-button",tooltipProps:{a11yRole:"none",children:gettext("Settings")}},m.a.createElement(ft.a,{label:gettext("Settings"),size:"medium"}));return m.a.createElement(Ge["b"],{placement:"top-end",isOpen:this.store.isMenuOpen,onToggle:this.store.toggleMenu,trigger:i},m.a.createElement(Ge["b"].Menu,{"data-purpose":"settings-menu"},m.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":gettext("Resolution"),"data-purpose":"resolution-menu"},r.map((r=>{let{label:i,displayLabel:o}=r;return m.a.createElement("li",{key:i},m.a.createElement(Ge["b"].MenuItem,{onClick:()=>e.setResolutionLabel(i),"aria-checked":i===t.label,role:"menuitemradio"},this.renderResolutionLabel(i,o,i===t.label,n)))}))),this.props.children))}};vt.propTypes={controlBarStore:d.a.object.isRequired,videoPlayerStore:d.a.object.isRequired};vt=bt([Object(u["e"])("videoPlayerStore","controlBarStore"),u["f"]],vt);var wt=r("./node_modules/@udemy/icons/dist/volume-off.ud-icon");var Et=r.n(wt);var St=r("./node_modules/@udemy/icons/dist/volume-on.ud-icon");var _t=r.n(St);var xt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class Dt{constructor(e){this.isOpen=false;this.isDragging=false;this.setOpen=e=>{this.isOpen=e};this.setDragging=e=>{this.isDragging=e};this.volumeStore=e}get displayVolume(){const e=this.volumeStore.isMuted?0:this.volumeStore.volume;return Math.round(100*e)}}xt([c["t"]],Dt.prototype,"isOpen",void 0);xt([c["t"]],Dt.prototype,"isDragging",void 0);xt([c["e"]],Dt.prototype,"setOpen",void 0);xt([c["e"]],Dt.prototype,"setDragging",void 0);xt([c["g"]],Dt.prototype,"displayVolume",null);var Ct=r("./src/udemy/js/shaka-video-player/volume/volume-control.less");const Tt={"./volume-control.less":{"slider-focus-wrapper":"volume-control--slider-focus-wrapper--1UPim",slider:"volume-control--slider--2uSlT","slider-inner":"volume-control--slider-inner--3MBZ0",dragging:"volume-control--dragging--39W90","invisible-unless-focused":"volume-control--invisible-unless-focused--1hBIf","ud-sr-only":"volume-control--ud-sr-only--3kFB1"}};var Ot=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let kt=class e extends m.a.Component{constructor(e){super(e);this.openMenu=()=>{this.store.setOpen(true)};this.closeMenu=()=>{this.store.setOpen(false);this.stopDragging()};this.toggleMuted=()=>{const{isMuted:e}=this.volumeStore;const t=localStorage.getItem("lastVolume");if(e&&t!==0){this.volumeStore.chooseMuted(false);this.volumeStore.chooseVolume(t)}else{this.volumeStore.toggleMuted()}};this.onMouseMove=e=>{if(!this.store.isDragging){return}const t=e.currentTarget.querySelector(`#${this.sliderId}`).getBoundingClientRect();const r=t.height;const n=Math.min(Math.max(0,e.clientY-t.top),r);this.volumeStore.chooseVolume(1-n/r)};this.stopDragging=()=>{const{displayVolume:e}=this.store;if(e!==0){this.lastVolume=this.volumeStore.volume;localStorage.setItem("lastVolume",this.lastVolume);this.volumeStore.chooseMuted(false)}else{this.lastVolume=this.volumeStore.volume;this.volumeStore.chooseMuted(true)}this.store.setDragging(false)};this.startDragging=e=>{this.lastVolume=this.volumeStore.volume;localStorage.setItem("lastVolume",this.lastVolume);this.store.setDragging(true);this.onMouseMove(e);e.preventDefault()};this.onKeyDown=e=>{Object(Ee["b"])((()=>{this.volumeStore.volumeDown(.05);e.preventDefault()}))(e);Object(Ee["f"])((()=>{this.volumeStore.volumeUp(.05);e.preventDefault()}))(e);Object(Ee["d"])((()=>{this.toggleMuted();e.preventDefault()}))(e)};this.store=new Dt(e.videoPlayerStore.volumeStore);this.sliderId=Object(Ee["a"])("slider");this.lastVolume=0}get volumeStore(){return this.props.videoPlayerStore.volumeStore}get slider(){const{displayVolume:e,isDragging:t,isOpen:r}=this.store;return m.a.createElement("div",{"data-purpose":"volume-control-bar",role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e,"aria-label":gettext("Volume"),tabIndex:0,onKeyDown:this.onKeyDown,onMouseMove:this.onMouseMove,onMouseDown:this.startDragging,className:W()(l()("slider-focus-wrapper",{dragging:t,"invisible-unless-focused":!r}),Tt)},m.a.createElement("div",{id:this.sliderId,className:"volume-control--slider--2uSlT"},m.a.createElement("div",{className:"volume-control--slider-inner--3MBZ0",style:{transform:`scaleY(${e/100})`}})))}get controlButton(){const{isMuted:e}=this.volumeStore;const{displayVolume:t}=this.store;const r=e?gettext("Unmute"):gettext("Mute");let n=_t.a;if(t===0||e){n=Et.a}return m.a.createElement(Ge["a"],{"data-purpose":"volume-control-button",onClick:this.toggleMuted},m.a.createElement(n,{label:r,size:"medium"}))}render(){return m.a.createElement("div",{onMouseEnter:this.openMenu,onMouseLeave:this.closeMenu,onMouseUp:this.stopDragging},this.slider,this.controlButton)}};kt.propTypes={videoPlayerStore:d.a.object.isRequired};kt=Ot([Object(u["e"])("videoPlayerStore"),u["f"]],kt);var Pt=r("./node_modules/@udemy/icons/dist/reload.ud-icon");var At=r.n(Pt);var It=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let jt=class e extends m.a.Component{render(){const e=ninterpolate("Forward %(seconds)s second","Forward %(seconds)s seconds",T["r"],{seconds:T["r"]});const t=interpolate(gettext("Forward %(seconds)ss"),{seconds:T["r"]},true);return m.a.createElement(Ge["a"],{"data-purpose":"forward-skip-button",tooltipProps:{a11yRole:"none",children:t},onClick:this.props.videoPlayerStore.seekForward},m.a.createElement(At.a,{label:e,size:"medium"}))}};jt.propTypes={videoPlayerStore:d.a.object.isRequired};jt=It([Object(u["e"])("videoPlayerStore")],jt);var Rt=r("./node_modules/@udemy/icons/dist/collapse-diagonal.ud-icon");var Nt=r.n(Rt);var Lt=r("./node_modules/@udemy/icons/dist/expand-diagonal.ud-icon");var Mt=r.n(Lt);var qt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Ut=class e extends m.a.Component{constructor(){super(...arguments);this.handleToggleFullscreen=e=>{this.props.fullscreenStore.toggleFullscreen();e.currentTarget.blur()}}render(){const{isFullscreen:e}=this.props.fullscreenStore;const t=e?gettext("Exit fullscreen"):gettext("Fullscreen");const r=e?Nt.a:Mt.a;return m.a.createElement(Ge["a"],{tooltipProps:{a11yRole:"none",children:t},onClick:this.handleToggleFullscreen},m.a.createElement(r,{label:t,size:"medium"}))}};Ut.propTypes={fullscreenStore:d.a.shape({toggleFullscreen:d.a.func,isFullscreen:d.a.bool}).isRequired};Ut=qt([Object(u["e"])("fullscreenStore"),u["f"]],Ut);var Ht=r("./node_modules/@udemy/icons/dist/pause.ud-icon");var Ft=r.n(Ht);var Bt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let zt=class e extends m.a.Component{constructor(){super(...arguments);this.onTogglePlay=()=>{const{isPlaying:e,onPlayPause:t}=this.props.getControlBarProps();t(!e)}}render(){const{isPlaying:e}=this.props.getControlBarProps();const t=e?gettext("Pause"):gettext("Play");const r=e?Ft.a:i.a;return m.a.createElement(Ge["a"],{"data-purpose":e?"pause-button":"play-button",tooltipProps:{a11yRole:"none",children:t},onClick:this.onTogglePlay},m.a.createElement(r,{label:t,size:"medium"}))}};zt.propTypes={getControlBarProps:d.a.func.isRequired};zt=Bt([Object(u["e"])("getControlBarProps")],zt);var Vt=r("./node_modules/@udemy/react-date-time-components/dist/esm/duration/duration.react-component.js");var Wt=r("./src/udemy/js/shaka-video-player/control-bar/progress-display.less");var Gt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Kt=class e extends m.a.Component{render(){const e=Object(Vt["b"])({numSeconds:this.props.progressBarStore.progressBarTime,presentationStyle:Vt["a"].STYLE.TIMESTAMP,precision:Vt["a"].PRECISION.MINUTES},{gettext:gettext,interpolate:interpolate});const t=Object(Vt["b"])({numSeconds:this.props.progressBarStore.videoDuration,presentationStyle:Vt["a"].STYLE.TIMESTAMP,precision:Vt["a"].PRECISION.MINUTES},{gettext:gettext,interpolate:interpolate});return m.a.createElement("div",{className:"ud-heading-sm progress-display--progress-display--wMlJV"},m.a.createElement("div",{"data-purpose":"progress-display"},m.a.createElement("span",{"data-purpose":"current-time"},e),m.a.createElement("span",null," / "),m.a.createElement("span",{"data-purpose":"duration"},t)),m.a.createElement("div",{"aria-hidden":true,className:"progress-display--progress-display-spacer--1fpgb"},m.a.createElement("span",null,e.replace(/\d/g,"4")),m.a.createElement("span",null," / "),m.a.createElement("span",null,t.replace(/\d/g,"4"))))}};Kt.propTypes={progressBarStore:d.a.object.isRequired};Kt=Gt([Object(u["e"])("progressBarStore"),u["f"]],Kt);var $t=r("./node_modules/@udemy/icons/dist/rewind.ud-icon");var Xt=r.n($t);var Yt=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let Qt=class e extends m.a.Component{render(){const e=ninterpolate("Rewind %(seconds)s second","Rewind %(seconds)s seconds",T["r"],{seconds:T["r"]});const t=interpolate(gettext("Rewind %(seconds)ss"),{seconds:T["r"]},true);return m.a.createElement(Ge["a"],{"data-purpose":"rewind-skip-button",tooltipProps:{a11yRole:"none",children:t},onClick:this.props.videoPlayerStore.seekBack},m.a.createElement(Xt.a,{label:e,size:"medium"}))}};Qt.propTypes={videoPlayerStore:d.a.object.isRequired};Qt=Yt([Object(u["e"])("videoPlayerStore")],Qt);var Jt=r("./src/udemy/js/shaka-video-player/control-bar/shaka-control-bar.less");const Zt=()=>m.a.createElement("div",{className:"shaka-control-bar--spacer--3mDmv"});var er=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};let tr=class e extends m.a.Component{constructor(e){super(e);this.setRef=e=>{this.ref=e};this.getControlBarProps=()=>({isPlaying:this.props.isPlaying,onPlayPause:this.props.onPlayPause});Object(c["D"])((()=>this.ref&&this.props.userActivityStore),(()=>{this.props.userActivityStore.addHideOnInactive(this.ref);this.props.userActivityStore.addActiveOnHover(this.ref)}))}get defaultControls(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(zt,null),m.a.createElement(Qt,null),m.a.createElement(ht,null),m.a.createElement(jt,null),m.a.createElement(Kt,null),m.a.createElement(Zt,null),m.a.createElement(kt,null),m.a.createElement(lt,null),m.a.createElement(vt,null),m.a.createElement(Ut,null))}render(){var e,t;const r=this.props.container;const n=`${(e=this.props.container)===null||e===void 0?void 0:e.id.replace("video","control-bar")}`;const i=`${n}-popover-area`;const o=m.a.createElement("div",{id:n,className:"shaka-control-bar--control-bar-wrapper--3WOBk","data-purpose":"video-control-bar"},m.a.createElement("div",{id:i,className:"video-popover-area shaka-control-bar--popover-area--1vJ7p",ref:this.props.progressBarStore.setPopoverAreaRef}),m.a.createElement("div",{className:"shaka-control-bar--control-bar-container--3_1nq",ref:this.setRef},m.a.createElement(ze,{progressBarStore:this.props.progressBarStore}),m.a.createElement(u["c"],{getControlBarProps:this.getControlBarProps},m.a.createElement("div",{className:"shaka-control-bar--control-bar--3DGdd","data-purpose":"video-controls"},(t=this.props.children)!==null&&t!==void 0?t:this.defaultControls))));return K.a.createPortal(o,r)}};tr.defaultProps={userActivityStore:null,container:null};tr.propTypes={progressBarStore:d.a.object.isRequired,userActivityStore:d.a.object,player:d.a.object.isRequired,isPlaying:d.a.bool.isRequired,onPlayPause:d.a.func.isRequired,container:d.a.object};er([c["t"].ref],tr.prototype,"ref",void 0);er([c["e"]],tr.prototype,"setRef",void 0);tr=er([Object(u["e"])("progressBarStore","userActivityStore"),u["f"]],tr);var rr=r("./src/udemy/js/shaka-video-player/error-display.react-component.tsx");var nr=r("./src/udemy/js/shaka-video-player/feedback/video-feedback.less");const ir=300;class or extends m.a.Component{render(){const{icon:e}=this.props;return m.a.createElement("div",{className:"video-feedback--container--Ca3t_"},m.a.createElement("div",{className:"video-feedback--circle--13wRA"},m.a.createElement(e,{label:false,color:"inherit",size:"xxlarge"})))}}or.propTypes={icon:d.a.elementType.isRequired};var ar=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};const sr=e=>m.a.createElement(i.a,Object.assign({},e,{className:"video-feedback--play-icon--2GUai"}));let lr=class e extends m.a.Component{componentDidUpdate(e){if(e.isPlaying!==this.props.isPlaying){this.showFeedback(this.props.isPlaying)}}showFeedback(e){clearTimeout(this.iconTimeout);this.Icon=e?sr:Ft.a;this.iconTimeout=setTimeout(Object(c["e"])((()=>{this.Icon=null})),ir)}render(){return this.Icon?m.a.createElement(or,{icon:this.Icon}):null}};lr.propTypes={isPlaying:d.a.bool.isRequired};ar([c["t"].ref],lr.prototype,"Icon",void 0);ar([c["e"]],lr.prototype,"showFeedback",null);lr=ar([u["f"]],lr);var cr=r("./src/udemy/js/shaka-video-player/progress-bar/shaka-progress-bar.mobx-store.ts");var ur=r("./node_modules/@mux/mux-data-shakaplayer/dist/shakaplayer-mux.js");var pr=r.n(ur);var dr=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");var hr=r("./node_modules/mux.js/dist/mux.js");var mr=r.n(hr);var fr=r("./node_modules/shaka-player/dist/shaka-player.ui.js");var gr=r.n(fr);var yr=r("./node_modules/uuid/index.js");var br=r("./src/udemy/js/shaka-video-player/drm.ts");var vr=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class wr extends vr["a"]{constructor(e){let{previousResolution:t,videoPlayerData:r}=e;super("AdaptiveStreamingQualityChangeEvent");this.previousResolution=t;this.videoPlayerData=r}}var Er=r("./node_modules/js-cookie/src/js.cookie.js");var Sr=r.n(Er);function _r(e){return Sr.a.get(e)}function xr(e,t){Sr.a.set(e,t,{expires:30,path:"/"})}function Dr(e){return Sr.a.remove(e)}const Cr=1;const Tr=Object.freeze([.5,.75,1,1.25,1.5,1.75,2]);const Or="playbackspeed";var kr=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class Pr{constructor(){this.availablePlaybackRates=Tr;this.choosePlaybackRate=e=>{if(e&&e!==this.playbackRate){this.chosenPlaybackRate=e;this.videoElement.playbackRate=e;xr(Or,e)}};this.speedDown=()=>{const e=this.availablePlaybackRates.indexOf(this.playbackRate);const t=this.availablePlaybackRates.slice()[e-1];this.choosePlaybackRate(t)};this.speedUp=()=>{const e=this.availablePlaybackRates.indexOf(this.playbackRate);const t=this.availablePlaybackRates.slice()[e+1];this.choosePlaybackRate(t)}}setPlaybackRateOnPlay(e){e.addEventListener("play",(()=>{e.playbackRate=this.playbackRate}))}attachPlaybackRateStore(e){this.videoElement=e;this.setPlaybackRateOnPlay(e)}get playbackRate(){var e;const t=(e=this.chosenPlaybackRate)!==null&&e!==void 0?e:this.savedPlaybackRate;if(this.availablePlaybackRates.includes(t)){return t}return Cr}get savedPlaybackRate(){return parseFloat(_r(Or))}}kr([c["t"].ref],Pr.prototype,"videoElement",void 0);kr([c["t"]],Pr.prototype,"availablePlaybackRates",void 0);kr([c["t"]],Pr.prototype,"chosenPlaybackRate",void 0);kr([c["e"]],Pr.prototype,"setPlaybackRateOnPlay",null);kr([c["e"]],Pr.prototype,"attachPlaybackRateStore",null);kr([c["e"]],Pr.prototype,"choosePlaybackRate",void 0);kr([c["g"]],Pr.prototype,"playbackRate",null);kr([c["e"]],Pr.prototype,"speedDown",void 0);kr([c["e"]],Pr.prototype,"speedUp",void 0);const Ar="quality_general";const Ir=1;const jr=1;const Rr=0;const Nr=.1;const Lr="volume";const Mr="mute";var qr=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class Ur{constructor(e){var t=this;let r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.chooseVolume=e=>{if(!this.isEnabled){return}const t=this.normalizeVolume(e);this._chosenVolume=t;this.player.volume=t;xr(Lr,t);this.chooseMuted(false)};this.volumeUp=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Nr;t.chooseVolume(t.volume+e)};this.volumeDown=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Nr;t.chooseVolume(t.volume-e)};this.chooseMuted=e=>{if(!this.isEnabled){return}this._chosenIsMuted=e;this.player.muted=e;xr(Mr,e?"1":0)};this.toggleMuted=()=>{this.chooseMuted(!this.isMuted)};this.isDefaultMuted=e;this.prioritizeDefaultMuted=r;this._chosenVolume=_r(Lr);this._chosenIsMuted=_r(Mr)}setup(e){this.player=e;e.volume=this.volume;e.muted=this.isMuted}get volume(){function e(e){return typeof e==="number"&&!isNaN(e)&&e!==Infinity}const t=[this._chosenVolume,this.savedVolume,Ir].find(e);return this.normalizeVolume(t)}get savedVolume(){return parseFloat(_r(Lr))}normalizeVolume(e){const t=Math.min(Math.max(e,Rr),jr);return Math.round(100*t)/100}get isMuted(){function e(e){return typeof e==="boolean"}if(e(this._chosenIsMuted)){return this._chosenIsMuted}return this.prioritizeDefaultMuted?this.isDefaultMuted:[this.savedIsMuted,this.isDefaultMuted].find(e)}get savedIsMuted(){const e=new Map([[0,false],[1,true]]);const t=_r(Mr);return e.get(t)}get isEnabled(){return this.player}}qr([c["t"]],Ur.prototype,"_chosenVolume",void 0);qr([c["t"]],Ur.prototype,"_chosenIsMuted",void 0);qr([c["e"]],Ur.prototype,"setup",null);qr([c["g"]],Ur.prototype,"volume",null);qr([c["e"]],Ur.prototype,"chooseVolume",void 0);qr([c["e"]],Ur.prototype,"volumeUp",void 0);qr([c["e"]],Ur.prototype,"volumeDown",void 0);qr([c["g"]],Ur.prototype,"isMuted",null);qr([c["e"]],Ur.prototype,"chooseMuted",void 0);var Hr=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var Fr=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const Br=gr.a.Player;const zr=gr.a.ui;const Vr=new RegExp(/^[0-9]+$/);const Wr={[T["a"]]:"Auto",audio:"Audio"};const Gr=new b["a"]("videoplayer");class Kr{constructor(e,t,r,n,i,o,a,s,l,u){this.videojsSetupData={};this.numErrors=0;this.numPlaylistRetries=0;this.position=-1;this.lastPosition=-1;this.waitingToLoad=false;this.shakaPlayerMux=null;this.playItem=null;this.isSeeking=false;this.isSourceReady=false;this.currentTime_=0;this.isErrorVisible=false;this.errorBody="";this.errorFooter="";this.isUsingNativeControlss=false;this.uaParser=new ue.a;this.bandwidthWatermarks={};this.hideError=()=>{this.errorBody="";this.errorFooter="";this.isErrorVisible=false};this.getFairPlayServiceCertificate=()=>Fr(this,void 0,void 0,(function*(){try{const e=yield fetch(T["g"]);const t=yield e.arrayBuffer();return new Uint8Array(t)}catch(e){return null}}));this._createNativeVideoPlayerControls=()=>{const e=document.getElementById(`shaka-video-container-${this.assetId}`);const t=new zr.Overlay(this._videoPlayer,e,this.videoElement);const r={controlPanelElements:["play_pause","spacer","time_and_duration","volume","mute","picture_in_picture","fullscreen","captions"]};t.configure(r);t.setEnabled(true)};this._createVideoPlayerConfigurationForNonEncryptedSources=()=>{var e;(e=this._videoPlayer)===null||e===void 0?void 0:e.configure({abr:{restrictToElementSize:true},streaming:{useNativeHlsOnSafari:false,bufferingGoal:60}})};this._createVideoPlayerConfigurationForFairPlay=()=>Fr(this,void 0,void 0,(function*(){var e,t,r,n,i,o,a;const s=yield this.getFairPlayServiceCertificate();if(!s){return}(e=this._videoPlayer)===null||e===void 0?void 0:e.configure("drm.servers.com\\.apple\\.fps\\.1_0",Object(br["g"])("fairplay",this.mediaLicenseToken));(t=this._videoPlayer)===null||t===void 0?void 0:t.configure("drm.advanced.com\\.apple\\.fps\\.1_0.serverCertificate",s);let l="";(r=this._videoPlayer)===null||r===void 0?void 0:r.configure({abr:{restrictToElementSize:true},drm:{servers:{[br["b"]]:Object(br["g"])("fairplay",this.mediaLicenseToken)},initDataTransform:e=>{var t,r;l=gr.a.util.FairPlayUtils.defaultGetContentId(e);const n=(r=(t=this._videoPlayer)===null||t===void 0?void 0:t.drmInfo())===null||r===void 0?void 0:r.serverCertificate;return gr.a.util.FairPlayUtils.initDataTransform(e,l,n)}},streaming:{bufferingGoal:60}});(i=(n=this._videoPlayer)===null||n===void 0?void 0:n.getNetworkingEngine())===null||i===void 0?void 0:i.registerRequestFilter(((e,t)=>{if(e==gr.a.net.NetworkingEngine.RequestType.LICENSE){t.headers["Content-Type"]="text/plain";const e=new Uint8Array(t.body);const r=gr.a.util.Uint8ArrayUtils.toStandardBase64(e);const n=`spc=${r}&assetId=${l}`;t.body=gr.a.util.StringUtils.toUTF8(n)}}));(a=(o=this._videoPlayer)===null||o===void 0?void 0:o.getNetworkingEngine())===null||a===void 0?void 0:a.registerResponseFilter(((e,t)=>{if(e==gr.a.net.NetworkingEngine.RequestType.LICENSE){let e=gr.a.util.StringUtils.fromUTF8(t.data);e=e.trim();t.data=gr.a.util.Uint8ArrayUtils.fromBase64(e).buffer}}))}));this._createVideoPlayerConfigurationForWideVine=()=>{var e,t,r;(e=this._videoPlayer)===null||e===void 0?void 0:e.configure({abr:{restrictToElementSize:true},drm:{servers:{[br["e"]]:Object(br["g"])("widevine",this.mediaLicenseToken)},advanced:{WIDEVINE_KEY_SYSTEM:{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}},streaming:{bufferingGoal:60}});(r=(t=this._videoPlayer)===null||t===void 0?void 0:t.getNetworkingEngine())===null||r===void 0?void 0:r.registerRequestFilter((function(e,t){if(e==gr.a.net.NetworkingEngine.RequestType.LICENSE){t.headers["Content-type"]="application/octet-stream";t.responseType="arraybuffer"}}))};this._createVideoPlayerConfigurationForPlayReady=()=>{var e,t,r;(e=this._videoPlayer)===null||e===void 0?void 0:e.configure({abr:{restrictToElementSize:true},drm:{servers:{[br["d"]]:Object(br["g"])("playready",this.mediaLicenseToken)}},streaming:{bufferingGoal:60}});(r=(t=this._videoPlayer)===null||t===void 0?void 0:t.getNetworkingEngine())===null||r===void 0?void 0:r.registerRequestFilter((function(e,t){if(e==gr.a.net.NetworkingEngine.RequestType.LICENSE){t.headers["Content-type"]="application/octet-stream";t.responseType="arraybuffer"}}))};this._createVideoPlayerConfiguration=()=>Fr(this,void 0,void 0,(function*(){if(!this.mediaLicenseToken){this._createVideoPlayerConfigurationForNonEncryptedSources();return}const e=yield Object(br["h"])(br["e"],br["a"]);Gr.info("XXX isWidevineSupported = ",e);if(e){this._createVideoPlayerConfigurationForWideVine();return}const t=yield Object(br["h"])(br["b"],br["c"]);Gr.info("XXX isFairPlaySupported = ",t);if(t){yield this._createVideoPlayerConfigurationForFairPlay();return}const r=yield Object(br["h"])(br["d"],br["a"]);Gr.info("XXX isPlayReadySupported = ",r);if(r){this._createVideoPlayerConfigurationForPlayReady();return}this._createVideoPlayerConfigurationForWideVine()}));this.destroyVideoPlayer=()=>{if(this._videoPlayer){this._videoPlayer.destroy();this._videoPlayer.mux.destroy()}};this._initActiveResolution=()=>{Object(c["v"])((()=>JSON.stringify(this.activeResolution)),(()=>this._updatePlayerResolution(this.activeResolution.sources,this.currentResolutionSources)),{fireImmediately:true})};this._onHlsLevelSwitch=(e,t)=>{this._setHlsResolution(t.resolution)};this._setAdaptiveQualityLevels=()=>{var e,t;let r=(e=this._videoPlayer)===null||e===void 0?void 0:e.getVariantTracks();const n=r===null||r===void 0?void 0:r.find((e=>e.active));if(n){r=r===null||r===void 0?void 0:r.filter((e=>e.language==n.language&&e.channelsCount==n.channelsCount))}r=r===null||r===void 0?void 0:r.filter(((e,t)=>{var n;const i=((n=this._videoPlayer)===null||n===void 0?void 0:n.isAudioOnly())?r===null||r===void 0?void 0:r.findIndex((t=>t.bandwidth==e.bandwidth)):r===null||r===void 0?void 0:r.findIndex((t=>t.height==e.height));return i==t}));if((t=this._videoPlayer)===null||t===void 0?void 0:t.isAudioOnly()){r===null||r===void 0?void 0:r.sort(((e,t)=>t.bandwidth-e.bandwidth))}else{r===null||r===void 0?void 0:r.sort(((e,t)=>t.height-e.height))}this.adaptiveQualityLevels=r};this.handleVideoProgress=e=>{const t=Math.ceil(this.currentTime_/this.videoProgressInterval);if(this.lastPosition===t||t<=0){return}this.lastPosition=t;const r=e.type==="ended"?this.duration_:Math.min(t*this.videoProgressInterval,this.duration_);const n={total:Math.floor(this.duration_),position:Math.floor(r)};this.onVideoProgress(e,n)};this.handleTimeUpdate=()=>{var e,t;this.currentTime_=(t=(e=this._videoPlayer)===null||e===void 0?void 0:e.getMediaElement().currentTime)!==null&&t!==void 0?t:0;this.onTimeUpdate(this.currentTime_)};this.setResolutionLabel=e=>{this.selectedResolutionLabel=e;xr(Ar,this.selectedResolutionLabel)};this._updatePlayerResolution=(e,t)=>{var r,n,i,o;Gr.info("XXX shaka resolutionSources = ",e);this.currentResolutionSources=e;this.hlsResolution=null;const a=this.videoElement;if(a.preload==="none"){a.preload="metadata"}if(JSON.stringify(e)!==JSON.stringify(t)){const e=this.mediaSources.find((e=>e.type==="application/x-mpegURL"));const t=this.mediaSources.find((e=>e.type==="application/dash+xml"));this.playItem=this.mediaSources[0];Gr.info("this.mediaSources = ",this.mediaSources);if(this.mediaLicenseToken){const r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(r&&e){Gr.info("this.playItem = hlsItem");this.playItem=e}else if(!r&&t){Gr.info("this.playItem = drmItem");this.playItem=t}}else if(e){this.playItem=e;Gr.info("this.playItem = hlsItem")}else{Gr.info("this.playItem = MP4")}}if(this.supportsAdaptiveFixedResolutions&&this.adaptiveQualityLevels&&this.adaptiveQualityLevels.length){this._updateEnabledQualityLevels();if(this.activeResolution.label!="auto"){(r=this._videoPlayer)===null||r===void 0?void 0:r.configure("abr.enabled",false);const e=(n=this._videoPlayer)===null||n===void 0?void 0:n.getVariantTracks().filter((e=>e.height==this.activeResolution.label))[0];(i=this._videoPlayer)===null||i===void 0?void 0:i.selectVariantTrack(e)}else{(o=this._videoPlayer)===null||o===void 0?void 0:o.configure("abr.enabled",true)}}};this.loadPlayItem=()=>{var e;(e=this._videoPlayer)===null||e===void 0?void 0:e.load(this.playItem.src).then(S["a"]).catch(S["a"])};this.setPlayerHeight=e=>{this.playerHeight=e.height};this.seekBack=()=>{this.videoElement.currentTime=Math.max(0,this.videoElement.currentTime-T["r"])};this.seekForward=()=>{this.videoElement.currentTime=this.videoElement.currentTime+T["r"]};window.muxjs=mr.a;this.sessionId=Object(yr["v4"])();this.playbackRateStore=new Pr;this.volumeStore=new Ur(l,u);this.videojsSetupData=e;this.playerId=t;this.trackingTag=n;this.assetId=i;this.onVideoProgress=o;this.videoProgressInterval=a;this.onTimeUpdate=s;this.setDuration(r);this.currentTime_=0}setMediaSources(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;this.mediaSources=e;this.mediaLicenseToken=t}showError(e){this.errorBody=(e===null||e===void 0?void 0:e.body)||"";this.errorFooter=(e===null||e===void 0?void 0:e.footer)||"";this.isErrorVisible=true}createVideoPlayer(e){var t,r,n,i;return Fr(this,void 0,void 0,(function*(){const o=new ue.a;const a=((r=(t=o===null||o===void 0?void 0:o.getBrowser())===null||t===void 0?void 0:t.name)===null||r===void 0?void 0:r.toLowerCase())==="safari"||((i=(n=o===null||o===void 0?void 0:o.getOS())===null||n===void 0?void 0:n.name)===null||i===void 0?void 0:i.toLowerCase())==="ios";if(a){gr.a.polyfill.installAll();gr.a.polyfill.PatchedMediaKeysApple.install()}this.videoElement=e;this._videoPlayer=new Br(this.videoElement);this._useNativeControlsForMobile();yield this._createVideoPlayerConfiguration();this.videoElement.addEventListener("durationchange",(e=>{var t;if((t=e===null||e===void 0?void 0:e.target)===null||t===void 0?void 0:t.duration){this.setDuration(e.target.duration)}}));this._videoPlayer.addEventListener("adaptation",(e=>{var t;this._setHlsResolution((t=e===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t.resolution)}));this.playbackRateStore.attachPlaybackRateStore(this.videoElement);this.volumeStore.setup(this.videoElement);this.shakaPlayerMux=pr()(this._videoPlayer,this.videojsSetupData,gr.a);this._initActiveResolution();return this._videoPlayer}))}_useNativeControlsForMobile(){if(he.isMobile){this._createNativeVideoPlayerControls();this.isUsingNativeControlss=true}}_updateEnabledQualityLevels(){Array.prototype.forEach.call(this.adaptiveQualityLevels,(e=>{e.enabled=this.activeResolution.label===T["a"]||e.height==this.activeResolution.label}))}get isAdaptive(){if(this.activeResolution){return this.activeResolution.label===T["a"]}}el_(){return document.getElementById(this.playerId)}duration(){return this.duration_}currentTime(e){if(e!==undefined){this.videoElement.currentTime=e}else{return this.currentTime_}}on(e,t){this.videoElement.addEventListener(e,t)}handleVideoError(e){if(e.code===undefined){return}if(e.code===MediaError.MEDIA_ERR_ABORTED){return}const t=5;const r=this.numErrors<t&&this.numPlaylistRetries<=2;if(r&&e.code===MediaError.MEDIA_ERR_NETWORK){this._retry(e)}else if(r&&e.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED){this._retry(e)}else{this.showError(e.message?{body:e.message.errorBody,footer:e.message.errorFooter}:null);if(this.numPlaylistRetries>2){}this._logErrorWithHttpStatus(e,"videoplayer.error.retry")}}get adaptiveSourceTypes(){return[T["m"],T["c"]]}get adaptiveSources(){return this.mediaSources.filter((e=>this.adaptiveSourceTypes.includes(e.type))).map((e=>{let{type:t,src:r}=e;if(this.mediaLicenseToken){return{type:t,src:r,keySystems:Object(br["f"])(this.mediaLicenseToken)}}return{type:t,src:r}}))}get supportsMSE(){if(window.MediaSource||window.WebKitMediaSource){return true}for(const e of this.adaptiveSourceTypes){if(this.videoElement.canPlayType(e)){return true}}return false}get supportsAdaptiveFixedResolutions(){return this.adaptiveSources.length&&this.supportsMSE}get adaptiveResolutions(){const e={auto:{label:T["a"],displayLabel:this._getResolutionDisplayLabel({label:T["a"]}),sources:this.adaptiveSources}};return Array.prototype.reduce.call(this.adaptiveQualityLevels,((e,t)=>{if(typeof e[t.height]==="undefined"){e[t.height]={label:t.height.toString(),displayLabel:this._getResolutionDisplayLabel({label:t.height}),sources:this.adaptiveSources}}return e}),e)}get resolutions(){var e;if(!this.mediaSources){return{}}if(this.supportsAdaptiveFixedResolutions){if((e=this.adaptiveQualityLevels)===null||e===void 0?void 0:e.length){return this.adaptiveResolutions}return[{label:T["a"],displayLabel:Wr[T["a"]],sources:this.adaptiveSources}]}return this.mediaSources.reduce(((e,t)=>{if(t.label===T["a"]&&!this.supportsMSE){return e}if(typeof e[t.label]==="undefined"){e[t.label]={label:t.label,displayLabel:this._getResolutionDisplayLabel(t),sources:[]}}if(this.mediaLicenseToken){e[t.label].sources.push({type:t.type,src:t.src,keySystems:Object(br["f"])(this.mediaLicenseToken)})}else{e[t.label].sources.push({type:t.type,src:t.src})}return e}),{})}get sortedResolutions(){let e={numericLabels:[],stringLabels:[]};e=Object.values(this.resolutions).reduce(((e,t)=>{const r=parseInt(t.label,10);if(Number.isNaN(r)){e.stringLabels.push(t)}else{e.numericLabels.push(t)}return e}),{numericLabels:[],stringLabels:[]});e.numericLabels.sort(((e,t)=>t.label-e.label));e.stringLabels.sort(((e,t)=>e.label.localeCompare(t.label)));return e.numericLabels.concat(e.stringLabels)}get activeResolution(){if(Object.keys(this.resolutions).length===0){return}let e;const t=_r(Ar);if(this.selectedResolutionLabel){e=this.selectedResolutionLabel}else if(t){e=t}else{e=T["f"]}if(typeof this.resolutions[e]!=="undefined"){return this.resolutions[e]}return this.sortedResolutions[0]}_setHlsResolution(e){const t=this.hlsResolution;this.hlsResolution=e;if(this.activeResolution.label===T["a"]){this._publishAdaptiveStreamingQualityChangeEvent(t)}}_getResolutionDisplayLabel(e){if(e.label in Wr){return Wr[e.label]}return Vr.test(e.label)?`${e.label}p`:e.label}get isUsingNativeControls(){return this._videoPlayer&&this.isUsingNativeControlss}_publishAdaptiveStreamingQualityChangeEvent(e){const t={previousResolution:e,videoPlayerData:j(this)};dr["a"].publishEvent(new wr(t))}_logErrorWithHttpStatus(e,t){}_logError(e,t){t=t||"videoplayer.error";const r=L(this,e);Gr.error(t,r)}_retry(e){this.numErrors+=1;setTimeout((()=>{if(!this._videoPlayer||!this.videoElement){}}),500*this.numErrors*this.numErrors);this._logErrorWithHttpStatus(e,"videoplayer.error.retry")}setDuration(e){this.duration_=e}get isPlaying(){return this._videoPlayer?this._videoPlayer.isInProgress:false}setSeeking(e){this.isSeeking=e}setIsSourceReady(e){this.isSourceReady=e}}Hr([c["t"]],Kr.prototype,"playItem",void 0);Hr([c["t"]],Kr.prototype,"isSeeking",void 0);Hr([c["t"]],Kr.prototype,"isSourceReady",void 0);Hr([c["t"]],Kr.prototype,"currentTime_",void 0);Hr([c["t"]],Kr.prototype,"isErrorVisible",void 0);Hr([c["t"]],Kr.prototype,"errorBody",void 0);Hr([c["t"]],Kr.prototype,"errorFooter",void 0);Hr([c["t"]],Kr.prototype,"duration_",void 0);Hr([c["t"]],Kr.prototype,"playerHeight",void 0);Hr([c["t"]],Kr.prototype,"isUsingNativeControlss",void 0);Hr([c["t"].ref],Kr.prototype,"mediaSources",void 0);Hr([c["t"]],Kr.prototype,"mediaLicenseToken",void 0);Hr([c["t"]],Kr.prototype,"hlsResolution",void 0);Hr([c["t"]],Kr.prototype,"selectedResolutionLabel",void 0);Hr([c["t"].ref],Kr.prototype,"adaptiveQualityLevels",void 0);Hr([c["e"]],Kr.prototype,"setMediaSources",null);Hr([c["e"]],Kr.prototype,"showError",null);Hr([c["e"]],Kr.prototype,"hideError",void 0);Hr([c["e"]],Kr.prototype,"_useNativeControlsForMobile",null);Hr([c["e"]],Kr.prototype,"_setAdaptiveQualityLevels",void 0);Hr([c["g"]],Kr.prototype,"isAdaptive",null);Hr([c["e"]],Kr.prototype,"handleTimeUpdate",void 0);Hr([c["g"]],Kr.prototype,"adaptiveSourceTypes",null);Hr([c["g"]],Kr.prototype,"adaptiveSources",null);Hr([c["g"]],Kr.prototype,"supportsMSE",null);Hr([c["g"]],Kr.prototype,"supportsAdaptiveFixedResolutions",null);Hr([c["g"]],Kr.prototype,"adaptiveResolutions",null);Hr([c["g"]],Kr.prototype,"resolutions",null);Hr([c["g"]],Kr.prototype,"sortedResolutions",null);Hr([c["e"]],Kr.prototype,"setResolutionLabel",void 0);Hr([c["g"]],Kr.prototype,"activeResolution",null);Hr([c["e"]],Kr.prototype,"_setHlsResolution",null);Hr([c["e"]],Kr.prototype,"_updatePlayerResolution",void 0);Hr([c["e"]],Kr.prototype,"loadPlayItem",void 0);Hr([c["e"]],Kr.prototype,"setPlayerHeight",void 0);Hr([c["e"]],Kr.prototype,"setDuration",null);Hr([c["e"]],Kr.prototype,"setSeeking",null);Hr([c["e"]],Kr.prototype,"setIsSourceReady",null);var $r=r("./src/udemy/js/shaka-video-player/user-activity.less");var Xr=r.n($r);var Yr=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};class Qr{constructor(){this.isUserActive=true;this.isInitialActivationComplete=false;this.activityOverride=false;this.setActive=()=>{this.isUserActive=true};this.setInactive=()=>{if(this.activityOverride||this.controlBarStore&&this.controlBarStore.activeMenu!==T["b"].NONE){return}this.isUserActive=false};this.setActiveOn=()=>{this.activityOverride=true;this.setActive()};this.unsetActiveOn=()=>{this.activityOverride=false}}setControlBarStore(e){this.controlBarStore=e}setupPlayerListeners(e){e.addEventListener("useractive",this.setActive);e.addEventListener("userinactive",this.setInactive);setTimeout(Object(c["e"])((()=>{this.isInitialActivationComplete=true})),T["e"]+500)}addActiveOnHover(e){if(e){e.addEventListener("mouseover",this.setActive);e.addEventListener("mouseout",this.setInactive)}}addHideOnInactive(e){if(e){e.classList.add(Xr.a["hide-when-user-inactive"])}}}Yr([c["t"]],Qr.prototype,"isUserActive",void 0);Yr([c["t"]],Qr.prototype,"isInitialActivationComplete",void 0);Yr([c["e"]],Qr.prototype,"setActive",void 0);Yr([c["e"]],Qr.prototype,"setInactive",void 0);var Jr=r("./src/udemy/js/shaka-video-player/video-player.less");var Zr=r.n(Jr);var en=r("./src/udemy/js/shaka-video-player/shaka-default-styles.global.less");r.d(t,"a",(function(){return an}));var tn=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var rn=undefined&&undefined.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n["throw"](e))}catch(e){o(e)}}function l(e){e.done?r(e.value):i(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())}))};const nn=Object(w["a"])();const on=new b["a"]("shaka-videoplayer");let an=class e extends h["Component"]{constructor(e){var t;super(e);t=this;this.hasPlayed=false;this.isVideoPlayerInitialized=false;this.postInitSetupComplete=false;this.setupPlayerEvents=()=>{this.videoPlayer.addEventListener("error",(e=>{on.error(`Shaka error event ${JSON.stringify(e)}`);this.store.shakaPlayerMux.loadErrorHandler(`Error code: ${e.detail.code}, error details: ${e.detail}`)}));this.videoPlayer.addEventListener("loading",(()=>{this.store.setSeeking(true);this.store.setIsSourceReady(false)}));this.videoPlayer.addEventListener("loaded",(()=>{this.store.setSeeking(false);this.store.setIsSourceReady(true);this.postInitSetUp()}));this.videoElement.addEventListener("ended",(()=>{const e=this.props.onVideoEnd||this.defaultOnVideoEnd;this.pause();e()}))};this.handlePlayerError=()=>rn(this,void 0,void 0,(function*(){const e=this.videoPlayer.error()||{};const t=e.code;let r=true;if(Object.values(T["t"]).includes(e.code)){r=yield this.props.onPlayerError(e.code)}else if(e.code&&e.code in T["s"]){if(t===4){const e=T["s"][4];r=yield this.props.onPlayerError(e)}if(t===5){const e=T["s"][5];r=yield this.props.onPlayerError(e)}}if(typeof r==="undefined"||r){this.store.handleVideoError(e)}}));this.defaultOnVideoEnd=()=>{this.props.exitFullscreen()};this.videoPlayerReady=()=>{this.captionsStore.attachPlayer(this.videoPlayer);if(this.userActivityStore){this.userActivityStore.setupPlayerListeners(this.videoPlayer)}this.registerHotkeys();if(this.props.thumbnailSprite){this.progressBarStore.setThumbnailsVTTUrl(this.props.thumbnailSprite.vtt_url)}};this.onVideoUnavailable=()=>{this.unregisterHotkeys();this.props.onVideoUnavailable()};this.withHotkeyCallback=(e,r)=>function(n){n===null||n===void 0?void 0:n.preventDefault();for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++){o[a-1]=arguments[a]}r&&t.props.onHotkey(r,n,...o);e(n,...o)};this.contextMenu=e=>{e.preventDefault()};this.volumeDown=()=>{this.store.volumeStore.volumeDown()};this.volumeUp=()=>{this.store.volumeStore.volumeUp()};this.jumpTo=e=>{this.videoPlayer.currentTime(this.store.duration_*e*.1)};this.syncPlayStateToPlayer=()=>{clearTimeout(this.playStateSyncTimeout);try{if(!this.playingStateNeedsSyncing){return}if(this.isVideoPlayerInitialized&&this.store.isSourceReady){this.isPlaying?this.play():this.pause()}this.playStateSyncTimeout=setTimeout(this.syncPlayStateToPlayer,T["q"])}catch(e){}};this.play=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;t.props.onPlayPause(true,e);t.videoElement.play();t.hasPlayed=true};this.pause=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;t.props.onPlayPause(false,e);t.videoElement.pause()};this.playEvent=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;t.props.onPlayPause(true,e)};this.pauseEvent=function(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;t.props.onPlayPause(false,e)};this.togglePlayPause=()=>{if(this.isPlaying){this.pause()}else{this.play()}};this.isDefaultPlaying=this.props.isDefaultPlaying;this.hasPlayed=this.isPlaying;const r=!!this.props.mediaLicenseToken;this.shakaSetupData=B(this.props.muxMetadata,this.props.mediaSources,r);this.shakaSetupData.language=nn.locale.toLowerCase().replace("_","-");this.store=new Kr(this.shakaSetupData,this.props.playerId,this.props.duration,this.props.trackingTag,this.props.assetId,this.props.onVideoProgress,this.props.videoProgressInterval,this.props.onTimeUpdate,this.props.isDefaultMuted,this.props.prioritizeDefaultMuted);this.controlBarStore=new we;this.captionsStore=this.props.captionsStore||new z["a"](this.props.captions,true,{[nn.locale.split("_")[0]]:1},this.props.isDefaultCaptionOn);this.captionsStore.attachPlayerStore(this.store);this.captionDisplayStore=new be(this.controlBarStore,this.captionsStore,this.store);if(this.props.userActivityEnabled){this.userActivityStore=this.props.userActivityStore||new Qr;if(this.props.isMockVjsStyleNeeded){this.userActivityStore=new Qr}this.userActivityStore.setControlBarStore(this.controlBarStore)}this.progressBarStore=this.props.progressBarStore||new cr["a"];this.progressBarStore.setThumbnailSprite(this.props.thumbnailSprite);this.hotkeys=[{key:"space",fn:this.withHotkeyCallback(this.togglePlayPause,T["o"].PLAY_PAUSE)},{key:"enter",fn:this.withHotkeyCallback(this.togglePlayPause,T["o"].PLAY_PAUSE)},{key:"left",fn:this.withHotkeyCallback(this.store.seekBack,T["o"].SEEK_BACK)},{key:"right",fn:this.withHotkeyCallback(this.store.seekForward,T["o"].SEEK_FORWARD)},{key:"shift+left",fn:this.withHotkeyCallback(this.store.playbackRateStore.speedDown,T["o"].SPEED_DOWN)},{key:"shift+right",fn:this.withHotkeyCallback(this.store.playbackRateStore.speedUp,T["o"].SPEED_UP)},{key:"down",fn:this.withHotkeyCallback(this.volumeDown,T["o"].VOLUME_DOWN)},{key:"up",fn:this.withHotkeyCallback(this.volumeUp,T["o"].VOLUME_UP)},{key:"m",fn:this.withHotkeyCallback(this.store.volumeStore.toggleMuted,T["o"].TOGGLE_MUTE)}];if(this.props.fullscreenEnabled){this.hotkeys.push({key:"f",fn:this.withHotkeyCallback(this.props.toggleFullscreen,T["o"].TOGGLE_FULLSCREEN)})}Array(10).fill(0,1,10).forEach(((e,t)=>{this.hotkeys.push({key:t.toString(),fn:this.jumpTo.bind(this,t)})}))}componentDidMount(){return rn(this,void 0,void 0,(function*(){this.store.setMediaSources(this.props.mediaSources,this.props.mediaLicenseToken);const e=yield this.store.createVideoPlayer(this.videoElement);this.initVideoPlayer(e);this.store.loadPlayItem()}))}componentDidUpdate(e){if(e.isPlaying!==this.props.isPlaying){this.syncPlayStateToPlayer()}if(e.mediaLicenseToken!==this.props.mediaLicenseToken||JSON.stringify(e.mediaSources)!==JSON.stringify(this.props.mediaSources)){this.store.setMediaSources(this.props.mediaSources,this.props.mediaLicenseToken)}}componentWillUnmount(){if(this.videoPlayer){}this.unregisterHotkeys();clearTimeout(this.playStateSyncTimeout)}get isPlaying(){return this.props.isPlaying!==undefined?this.props.isPlaying:this.isDefaultPlaying}initVideoPlayer(e){this.videoPlayer=e;if(this.videoPlayer!==undefined){this.captionDisplayStore.attachPlayer(this.videoPlayer);this.setupPlayerEvents();this.progressBarStore.attachPlayer(this.videoPlayer,this.videoElement);this.progressBarStore.attachPlayerStore(this.store);this.isVideoPlayerInitialized=true}}patchPlayer(){this.videoPlayerPlay=this.play;this.videoPlayerPause=this.pause;this.videoPlayer.play=this.play;this.videoPlayer.pause=this.pause;this.syncPlayStateReactionDisposer=Object(c["v"])((()=>this.store.isPlaying),this.syncPlayStateToPlayer,{fireImmediately:true})}postInitSetUp(){var e,t;this.store._setAdaptiveQualityLevels();this.videoPlayerReady();_["b"].increment("udemy-video-player.viewed",{userModulo:x["a"].id%100,browser:he.browser.name,browserVersion:he.browser.version,platform:he.os.name,platformVersion:he.os.version,tech:this.videoPlayer.techName_,resolution:this.store.activeResolution.label,trackingTag:this.props.trackingTag,cdn:O(this.videoPlayer.getAssetUri()),userCountry:x["a"].country,srcType:(t=(e=this.videoPlayer.getManifest())===null||e===void 0?void 0:e.imageStreams[0])===null||t===void 0?void 0:t.mimeType});const r=`${this.props.playerId}shaka-mock-vjs-control-bar-popover-area`;const n=document.getElementById(r);n===null||n===void 0?void 0:n.addEventListener("click",this.togglePlayPause);this.videoElement.addEventListener("play",(()=>this.onPlayEvent(true)));this.videoElement.addEventListener("pause",(()=>this.onPlayEvent(false)));this.props.onPlayerReady(this.store);this.videoPlayer.getMediaElement().addEventListener("timeupdate",this.store.handleTimeUpdate);if(this.props.onVideoProgress){this.videoPlayer.getMediaElement().addEventListener("timeupdate",this.store.handleVideoProgress)}if(this.props.isDefaultPlaying||this.props.isPlaying){this.play()}this.postInitSetupComplete=true}registerHotkeys(){if(!this.props.hotkeysEnabled){return}E["a"].registerMap(this.hotkeys)}unregisterHotkeys(){if(!this.props.hotkeysEnabled){return}E["a"].unregisterMap(this.hotkeys)}get playingStateNeedsSyncing(){return this.isPlaying!==this.store.isPlaying&&!this.isInNativePlayEventGracePeriod}onPlayEvent(e){this.hasPlayed=this.hasPlayed||e;if(!this.playingStateNeedsSyncing){if(this.props.nativeControlGracePeriod){this.isInNativePlayEventGracePeriod=true;setTimeout((()=>{this.isInNativePlayEventGracePeriod=false;this.syncPlayStateToPlayer()}),this.props.nativeControlGracePeriod)}e?this.playEvent(true):this.pauseEvent(true)}this.onPlayStateChange(e)}onPlayStateChange(e){this.props.onPlayPauseToggled(e,this.store.currentTime_)}get center(){const e=this.store.isSourceReady&&!this.hasPlayed;return m.a.createElement("div",{className:Zr.a.center},!e&&this.store.isSeeking&&m.a.createElement(a["a"],{size:"xxlarge",color:"inherit"}),e&&m.a.createElement(o["a"],{udStyle:"link",className:Zr.a["play-button"],onClick:Object(c["e"])((()=>this.togglePlayPause())),"data-purpose":"video-play-button-initial"},m.a.createElement(i.a,{label:gettext("Play video"),size:"xxlarge",className:Zr.a["play-button-icon"]})),!e&&this.store.isSourceReady&&m.a.createElement(lr,{isPlaying:this.isPlaying}))}get preloadLinks(){const e=[];if(this.props.thumbnailSprite){e.push(m.a.createElement("link",{rel:"preload",key:"sneakpeek",href:this.props.thumbnailSprite.img_url,as:"image"}))}return e}get errorDisplay(){if(!this.store.isErrorVisible){return null}return m.a.createElement(rr["a"],{player:this.videoPlayer,errorBody:this.store.errorBody||this.props.errorBody,errorFooter:this.store.errorFooter||this.props.errorFooter,store:this.store})}renderVideoElement(){if(typeof this.props.renderVideoElement==="function"){return this.props.renderVideoElement(this.video)}return this.video}get video(){return m.a.createElement("div",{id:`${this.props.playerId}shaka-mock-vjs-control-bar`,className:this.props.isMockVjsStyleNeeded?Zr.a["mock-vjs-tech"]:Zr.a["mock-vjs-tech-relative"]},m.a.createElement("video",Object.assign({ref:e=>{this.videoElement=e},className:Zr.a["video-player"],style:{paddingBottom:"0"},id:this.props.playerId,preload:this.props.preload,controls:false,onContextMenu:this.contextMenu,controlsList:this.props.isDownloadEnabled?"":"nodownload"},this.props.extraVideoAttributes)))}render(){const e=l()(Zr.a["video-wrapper"],{[Xr.a["user-inactive"]]:this.userActivityStore&&!this.userActivityStore.isUserActive});return m.a.createElement(u["c"],{captionsStore:this.captionsStore,captionDisplayStore:this.captionDisplayStore,controlBarStore:this.controlBarStore,userActivityStore:this.userActivityStore,videoPlayerStore:this.store,progressBarStore:this.progressBarStore},m.a.createElement(g.a,{onMeasure:this.store.setPlayerHeight},m.a.createElement("div",{className:l()(Zr.a.container,"udlite-in-udheavy"),ref:this.props.setFullscreenRef},m.a.createElement("div",{className:e,id:`shaka-video-container-${this.props.assetId}`},this.preloadLinks,!this.store.isUsingNativeControls&&this.center,this.renderVideoElement(),this.videoPlayer&&!this.store.isUsingNativeControls&&!this.store.isErrorVisible&&m.a.createElement(tr,{container:document.getElementById(`${this.props.playerId}shaka-mock-vjs-control-bar`),player:this.videoPlayer,isPlaying:this.isPlaying,onPlayPause:Object(c["e"])((()=>this.togglePlayPause())),progressBarStore:this.progressBarStore},this.props.children),this.errorDisplay),this.videoPlayer&&!this.store.isUsingNativeControls&&m.a.createElement(ie,{containerForCue:document.getElementById(`${this.props.playerId}shaka-mock-vjs-control-bar`),captionDisplayStore:this.captionDisplayStore,userActivityStore:this.userActivityStore}))))}};an.propTypes={renderVideoElement:d.a.func,playerId:d.a.string.isRequired,captions:d.a.array,captionsStore:d.a.instanceOf(z["a"]),mediaLicenseToken:d.a.string,mediaSources:u["b"].arrayOrObservableArray.isRequired,thumbnailSprite:d.a.shape({vtt_url:d.a.string.isRequired,img_url:d.a.string.isRequired}),progressBarStore:d.a.object,toggleFullscreen:d.a.func.isRequired,isFullscreen:d.a.bool.isRequired,exitFullscreen:d.a.func.isRequired,setFullscreenRef:d.a.func.isRequired,assetId:d.a.number.isRequired,trackingTag:d.a.string,isPlaying:d.a.bool,isDefaultPlaying:d.a.bool,onPlayPause:d.a.func.isRequired,nativeControlGracePeriod:d.a.number,onPlayPauseToggled:d.a.func,onVideoEnd:d.a.func,onVideoProgress:d.a.func,videoProgressInterval:d.a.number,onTimeUpdate:d.a.func,onVideoUnavailable:d.a.func,onPlayerError:d.a.func,hotkeysEnabled:d.a.bool,onHotkey:d.a.func,duration:d.a.number,preload:d.a.oneOf(["auto","metadata","none"]),onPlayerReady:d.a.func,extraVideoAttributes:d.a.object,userActivityEnabled:d.a.bool,userActivityStore:d.a.object,errorBody:rr["a"].propTypes.errorBody,errorFooter:rr["a"].propTypes.errorFooter,fullscreenEnabled:d.a.bool,controlsTrackingEnabled:d.a.bool,muxMetadata:d.a.object,isDownloadEnabled:d.a.bool,isDefaultMuted:d.a.bool,prioritizeDefaultMuted:d.a.bool,isDefaultCaptionOn:d.a.bool,isMockVjsStyleNeeded:d.a.bool};an.defaultProps={renderVideoElement:undefined,captionsStore:null,mediaLicenseToken:undefined,onVideoEnd:undefined,duration:undefined,extraVideoAttributes:undefined,onVideoUnavailable:S["a"],onVideoProgress:undefined,videoProgressInterval:0,onTimeUpdate:S["a"],onPlayerError:S["a"],onPlayerReady:S["a"],hotkeysEnabled:false,onHotkey:S["a"],preload:"metadata",trackingTag:"",isPlaying:undefined,isDefaultPlaying:false,nativeControlGracePeriod:T["p"],onPlayPauseToggled:S["a"],captions:[],thumbnailSprite:undefined,userActivityEnabled:true,userActivityStore:null,errorBody:rr["a"].defaultProps.errorBody,errorFooter:rr["a"].defaultProps.errorFooter,fullscreenEnabled:true,controlsTrackingEnabled:false,muxMetadata:undefined,isDownloadEnabled:false,isDefaultMuted:false,prioritizeDefaultMuted:false,isDefaultCaptionOn:false,progressBarStore:null,isMockVjsStyleNeeded:false};tn([c["t"].ref],an.prototype,"videoPlayer",void 0);tn([c["t"]],an.prototype,"hasPlayed",void 0);tn([c["e"]],an.prototype,"initVideoPlayer",null);tn([c["e"]],an.prototype,"onPlayEvent",null);tn([c["e"]],an.prototype,"play",void 0);tn([c["e"]],an.prototype,"pause",void 0);tn([c["e"]],an.prototype,"playEvent",void 0);tn([c["e"]],an.prototype,"pauseEvent",void 0);an=tn([Object(y["a"])("isPlaying","onPlayPause"),v["a"],u["f"]],an)},"./src/udemy/js/shaka-video-player/sneak-peek/sneak-peek.less":function(e,t,r){e.exports={"sneak-peek-holder":"sneak-peek--sneak-peek-holder--1dLVU","sneak-peek":"sneak-peek--sneak-peek--1MLrH"}},"./src/udemy/js/shaka-video-player/user-activity.less":function(e,t,r){e.exports={"user-inactive":"user-activity--user-inactive--2i_QO","hide-when-user-inactive":"user-activity--hide-when-user-inactive--MIrbg"}},"./src/udemy/js/shaka-video-player/video-player.less":function(e,t,r){e.exports={container:"video-player--container--3jY3v",center:"video-player--center--3nOyv","play-button":"video-player--play-button--rPgX2","play-button-icon":"video-player--play-button-icon--3pmEM","video-wrapper":"video-player--video-wrapper--2mFBT","video-player":"video-player--video-player--2DBqU","mock-vjs-tech":"video-player--mock-vjs-tech--1omfe","mock-vjs-tech-relative":"video-player--mock-vjs-tech-relative--3ONbR"}},"./src/udemy/js/shaka-video-player/volume/volume-control.less":function(e,t,r){e.exports={"slider-focus-wrapper":"volume-control--slider-focus-wrapper--1UPim",slider:"volume-control--slider--2uSlT","slider-inner":"volume-control--slider-inner--3MBZ0",dragging:"volume-control--dragging--39W90","invisible-unless-focused":"volume-control--invisible-unless-focused--1hBIf"}},"./src/udemy/js/survey/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r.d(t,"b",(function(){return i}));const n=3;const i=Object.freeze({FREE_FORM:"freeform",CHOICE:"choice"})},"./src/udemy/js/survey/paginated-survey.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o,a,s;let l=(o=class e{constructor(e,t){babelHelpers.initializerDefineProperty(this,"questionSetNumber",a,this);babelHelpers.initializerDefineProperty(this,"surveyComplete",s,this);this.surveyStore=e;this.onSubmit=t}get pageNumber(){return this.questionSetNumber+1}get pageCount(){return this.surveyStore.questionSets.length}get canGoToNextPage(){return this.pageNumber<this.pageCount}get isCurrentPageAnswered(){if(!this.surveyStore.questionSets.length){return false}return this.surveyStore.questionSets[this.questionSetNumber].questions.reduce(((e,t)=>{if(!t.is_required){return e}return e&&this.surveyStore.userAnswers[t.id]!==null}),true)}setQuestionSetNumber(e){this.questionSetNumber=e-1}reset(){this.surveyStore.setUserAnswers({});this.setQuestionSetNumber(1);this.surveyComplete=false}submit(){const e=this.surveyStore.saveUserAnswers();this.surveyComplete=true;this.onSubmit(e)}onPageChange(e){if(e>this.pageNumber){if(this.canGoToNextPage){this.setQuestionSetNumber(e)}else{this.submit()}}else{this.setQuestionSetNumber(e)}}},a=babelHelpers.applyDecoratedDescriptor(o.prototype,"questionSetNumber",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),s=babelHelpers.applyDecoratedDescriptor(o.prototype,"surveyComplete",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(o.prototype,"pageNumber",[i["g"]],Object.getOwnPropertyDescriptor(o.prototype,"pageNumber"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"canGoToNextPage",[i["g"]],Object.getOwnPropertyDescriptor(o.prototype,"canGoToNextPage"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"isCurrentPageAnswered",[i["g"]],Object.getOwnPropertyDescriptor(o.prototype,"isCurrentPageAnswered"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"setQuestionSetNumber",[i["e"]],Object.getOwnPropertyDescriptor(o.prototype,"setQuestionSetNumber"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"reset",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(o.prototype,"reset"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"submit",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(o.prototype,"submit"),o.prototype),babelHelpers.applyDecoratedDescriptor(o.prototype,"onPageChange",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(o.prototype,"onPageChange"),o.prototype),o)},"./src/udemy/js/survey/radio-button.less":function(e,t,r){e.exports={"radio-button":"radio-button--radio-button--rrwWX",icon:"radio-button--icon--FlyXK","radio-label":"radio-button--radio-label--2S78t","focus-outline":"radio-button--focus-outline--3qHgU"}},"./src/udemy/js/survey/radio-button.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/icons/dist/tick.ud-icon");var o=r.n(i);var a=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var s=r("./node_modules/react/index.js");var l=r.n(s);var c=r("./src/udemy/js/survey/radio-button.less");var u=r.n(c);class p extends s["Component"]{constructor(){super(...arguments);this.id=Object(n["a"])("radio-button")}render(){const{children:e,...t}=this.props;return l.a.createElement(a["a"],{className:"radio-button--radio-button--rrwWX",udStyle:"secondary",size:"small",componentClass:"label",htmlFor:this.id},l.a.createElement("input",Object.assign({},t,{id:this.id,type:"radio",className:"ud-sr-only"})),l.a.createElement("span",{className:"radio-button--radio-label--2S78t"},l.a.createElement(o.a,{label:false,className:"radio-button--icon--FlyXK"}),e),l.a.createElement("span",{className:"radio-button--focus-outline--3qHgU"}))}}},"./src/udemy/js/survey/survey-modal.less":function(e,t,r){e.exports={"survey-modal":"survey-modal--survey-modal--JkmAm",footer:"survey-modal--footer--3Tlxf","footer-spacer":"survey-modal--footer-spacer--tvyjc",dots:"survey-modal--dots--1K9WW",dot:"survey-modal--dot--2G-J9","dot-active":"survey-modal--dot-active--3iWkS"}},"./src/udemy/js/survey/survey-modal.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var i=r.n(n);var o=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var a=r("./node_modules/@udemy/react-dialog-components/dist/esm/modal/modal.react-component.js");var s=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var l=r("./node_modules/autobind-decorator/lib/esm/index.js");var c=r("./node_modules/mobx-react/dist/mobx-react.module.js");var u=r("./node_modules/prop-types/index.js");var p=r.n(u);var d=r("./node_modules/react/index.js");var h=r.n(d);var m=r("./src/udemy/js/utils/noop.js");var f=r("./src/udemy/js/utils/range.js");var g=r("./src/udemy/js/survey/paginated-survey.mobx-store.js");var y=r("./src/udemy/js/survey/survey-question.react-component.js");var b=r("./src/udemy/js/survey/survey-modal.less");var v=r.n(b);var w,E,S;const _={"./survey-modal.less":{"survey-modal":"survey-modal--survey-modal--JkmAm",footer:"survey-modal--footer--3Tlxf","footer-spacer":"survey-modal--footer-spacer--tvyjc",dots:"survey-modal--dots--1K9WW",dot:"survey-modal--dot--2G-J9","dot-active":"survey-modal--dot-active--3iWkS"}};let x=Object(c["f"])(w=(E=(S=class e extends h.a.Component{constructor(e){super(e);this.store=new g["a"](this.props.surveyStore,this.props.onSubmit)}onClickPrevPage(){this.store.onPageChange(this.store.pageNumber-1)}onClickNextPage(){this.store.onPageChange(this.store.pageNumber+1)}render(){const{surveyStore:e,onSubmit:t,reset:r,isQuestionVisible:n,thankYouPageProps:l,...c}=this.props;let u=gettext(e.headline);let p,d;if(l&&this.store.surveyComplete){u=l.title||u;p=h.a.createElement("p",{"data-purpose":"thank-you-text"},l.text);d=h.a.createElement(s["a"],null,h.a.createElement(o["a"],{onClick:c.onClose},gettext("Close")))}else{const{questionSetNumber:t,pageCount:r,pageNumber:a}=this.store;if(t<e.questionSets.length){p=e.questionSets[t].questions.filter(n).map((t=>h.a.createElement(y["a"],{key:t.id,question:t,surveyStore:e})))}d=h.a.createElement(s["a"],{className:"survey-modal--footer--3Tlxf"},a>1&&h.a.createElement(o["a"],{udStyle:"secondary",onClick:this.onClickPrevPage},gettext("Previous")),h.a.createElement("div",{className:"survey-modal--footer-spacer--tvyjc"},r>1&&h.a.createElement("div",{className:"survey-modal--dots--1K9WW","aria-label":interpolate(gettext("Step %(value)s of %(max)s"),{value:a,max:r},true)},Object(f["a"])(r).map((e=>h.a.createElement("div",{key:e+1,className:i()(e+1===a?"dot dot-active":"dot",_)}))))),h.a.createElement(o["a"],{disabled:!this.store.isCurrentPageAnswered,onClick:this.onClickNextPage},this.store.canGoToNextPage?gettext("Next"):gettext("Submit")))}return h.a.createElement(a["a"],Object.assign({title:u,loading:!e.isLoaded,onOpen:r?this.store.reset:m["a"]},c,{className:(c.className?c.className+" ":"")+"survey-modal--survey-modal--JkmAm"}),p,d)}},S.propTypes={surveyStore:p.a.object.isRequired,onSubmit:p.a.func,reset:p.a.bool,isQuestionVisible:p.a.func,thankYouPageProps:p.a.oneOfType([p.a.object,p.a.oneOf([false])])},S.defaultProps={onSubmit:m["a"],reset:false,isQuestionVisible:()=>true,thankYouPageProps:false},S),babelHelpers.applyDecoratedDescriptor(E.prototype,"onClickPrevPage",[l["a"]],Object.getOwnPropertyDescriptor(E.prototype,"onClickPrevPage"),E.prototype),babelHelpers.applyDecoratedDescriptor(E.prototype,"onClickNextPage",[l["a"]],Object.getOwnPropertyDescriptor(E.prototype,"onClickNextPage"),E.prototype),E))||w},"./src/udemy/js/survey/survey-question.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return D}));var n=r("./node_modules/@udemy/react-form-components/dist/esm/form-group/form-group.react-component.js");var i=r("./node_modules/@udemy/react-form-components/dist/esm/radio/radio.react-component.js");var o=r("./node_modules/@udemy/react-form-components/dist/esm/form-group-variants/toggle-input-block-form-group.react-component.js");var a=r("./node_modules/@udemy/react-form-components/dist/esm/radio/radio-block.react-component.js");var s=r("./node_modules/@udemy/react-form-components/dist/esm/checkbox/checkbox.react-component.js");var l=r("./node_modules/@udemy/react-form-components/dist/esm/select/select.react-component.js");var c=r("./node_modules/@udemy/react-form-components/dist/esm/text-area/text-area.react-component.js");var u=r("./node_modules/@udemy/react-form-components/dist/esm/text-input/text-input.react-component.js");var p=r("./node_modules/autobind-decorator/lib/esm/index.js");var d=r("./node_modules/mobx-react/dist/mobx-react.module.js");var h=r("./node_modules/prop-types/index.js");var m=r.n(h);var f=r("./node_modules/react/index.js");var g=r.n(f);var y=r("./src/udemy/js/survey/constants.js");var b=r("./src/udemy/js/survey/radio-button.react-component.js");var v=r("./src/udemy/js/survey/survey.less");var w=r.n(v);var E,S,_;const x=e=>g.a.createElement(n["b"],Object.assign({},e,{udStyle:"fieldset"}));let D=Object(d["f"])(E=(S=(_=class e extends f["Component"]{onChangeMultiSelect(e){const{surveyStore:t,question:r,onChange:n}=this.props;if(e.target.checked){t.addUserAnswerOption(r.id,parseInt(e.target.value,10))}else{t.removeUserAnswerOption(r.id,parseInt(e.target.value,10))}n&&n(e)}onChangeChoice(e){const{surveyStore:t,question:r,onChange:n}=this.props;t.updateUserAnswer(r.id,parseInt(e.target.value,10));n&&n(e)}onChangeText(e){const{surveyStore:t,question:r,onChange:n}=this.props;t.updateUserAnswer(r.id,e.target.value);n&&n(e)}getRadioProps(e){return{key:e.id,name:`survey-question-${this.props.question.id}`,value:e.id,checked:e.id===this.props.surveyStore.userAnswers[this.props.question.id],onChange:this.onChangeChoice,children:gettext(e.text)}}getTextControlProps(){return{placeholder:gettext(this.props.question.placeholder),value:this.props.surveyStore.userAnswers[this.props.question.id]||"",onChange:this.onChangeText}}render(){const{surveyStore:e,question:t,formGroupProps:r}=this.props;let p=n["b"];let d;if(t.question_type==="choice"){p=x;d=g.a.createElement("div",{className:"survey--buttons--368v0"},t.answer_options.map((e=>g.a.createElement(b["a"],this.getRadioProps(e)))))}else if(t.question_type==="choice__radio"){p=x;d=t.answer_options.map((e=>g.a.createElement(i["b"],this.getRadioProps(e))))}else if(t.question_type==="choice__boxed_radio"){p=o["a"];d=t.answer_options.map((e=>g.a.createElement(a["a"],this.getRadioProps(e))))}else if(t.question_type==="choice__multi_select"){p=x;const r=e.userAnswers[t.id]||[];const n=r.length>=y["a"];d=t.answer_options.map((e=>g.a.createElement(s["a"],{key:e.id,value:e.id,checked:r.includes(e.id),onChange:this.onChangeMultiSelect,disabled:n&&!r.includes(e.id)},gettext(e.text))))}else if(t.question_type==="choice__dropdown"){d=g.a.createElement(l["a"],{value:e.userAnswers[t.id]||"",onChange:this.onChangeChoice},g.a.createElement(l["a"].Placeholder,{key:"placeholder"},t.placeholder?gettext(t.placeholder):gettext("Select an answer")),t.answer_options.map((e=>g.a.createElement("option",{key:e.id,value:String(e.id)},gettext(e.text)))))}else if(t.question_type==="freeform"){d=g.a.createElement(c["a"],this.getTextControlProps())}else if(t.question_type==="freeform__textbox"){d=g.a.createElement(u["b"],this.getTextControlProps())}return g.a.createElement(p,Object.assign({label:gettext(t.text)},r),d)}},_.propTypes={question:m.a.object.isRequired,surveyStore:m.a.object.isRequired,formGroupProps:m.a.object,onChange:m.a.func},_.defaultProps={formGroupProps:{},onChange:null},_),babelHelpers.applyDecoratedDescriptor(S.prototype,"onChangeMultiSelect",[p["a"]],Object.getOwnPropertyDescriptor(S.prototype,"onChangeMultiSelect"),S.prototype),babelHelpers.applyDecoratedDescriptor(S.prototype,"onChangeChoice",[p["a"]],Object.getOwnPropertyDescriptor(S.prototype,"onChangeChoice"),S.prototype),babelHelpers.applyDecoratedDescriptor(S.prototype,"onChangeText",[p["a"]],Object.getOwnPropertyDescriptor(S.prototype,"onChangeText"),S.prototype),S))||E},"./src/udemy/js/survey/survey.less":function(e,t,r){e.exports={buttons:"survey--buttons--368v0"}},"./src/udemy/js/survey/survey.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/utils/ud-api.js");var a,s,l,c,u,p;let d=(a=class e{constructor(e,t,r,n,i){let o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;let a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;babelHelpers.initializerDefineProperty(this,"id",s,this);babelHelpers.initializerDefineProperty(this,"headline",l,this);babelHelpers.initializerDefineProperty(this,"description",c,this);babelHelpers.initializerDefineProperty(this,"questionSets",u,this);babelHelpers.initializerDefineProperty(this,"userAnswers",p,this);this.surveyCode=e;this.courseId=t;this.organizationId=r;this.relatedObjectType=n;this.relatedObjectId=i;this.useAPICache=o;this.noOverwrite=a}_getSurvey(){return o["f"].get(`surveys/${this.surveyCode}/`,{params:{"fields[survey]":"@default,headline,description"},useCache:this.useAPICache})}_getUserAnswers(){let e;if(this.courseId){e=`users/me/courses/${this.courseId}/surveys/${this.id}/answers/`}else{e=`users/me/surveys/${this.id}/answers/`}return o["f"].get(e)}_putUserAnswers(e){let t;let r=false;if(this.courseId){t=`users/me/courses/${this.courseId}/surveys/${this.id}/answers/`}else{t=`users/me/surveys/${this.id}/answers/`;if(this.organizationId){t+=`?organization_id=${this.organizationId}`;r=true}}if(this.noOverwrite){t+=`${r?"&":"?"}no_overwrite=1`}return o["f"].put(t,e)}_sortByOrder(e,t){return e.order-t.order}_sortQuestionSet(e,t){for(const r of[e,t]){if(!r._questionsSorted){if(r.questions){r.questions.sort(this._sortByOrder)}r._questionsSorted=true}}return this._sortByOrder(e,t)}_sortQuestionSets(e){if(e.length===1&&e[0].questions){e[0].questions.sort(this._sortByOrder)}else{e.sort(this._sortQuestionSet)}}getSurvey(){return this._getSurvey().then((e=>{this.setSurvey({id:e.data.id,headline:e.data.headline,description:e.data.description,questionSets:e.data.question_sets})}))}setSurvey(e){if(e.questionSets){this._sortQuestionSets(e.questionSets)}this.id=e.id;this.headline=e.headline;this.description=e.description;this.questionSets=e.questionSets}getInitialValue(e){if(e==="choice__multi_select"){return[]}return null}setUserAnswers(e){for(const t of this.questionSets){for(const r of t.questions){if(!(r.id in e)){e[r.id]=this.getInitialValue(r.question_type)}}}this.userAnswers=e}clearUserAnswers(){this.userAnswers={}}updateUserAnswer(e,t){this.userAnswers[e]=t}addUserAnswerOption(e,t){this.userAnswers[e].push(t)}removeUserAnswerOption(e,t){this.userAnswers[e].remove(t)}getUserAnswers(){if(this.id){return this._getUserAnswers().then((e=>{const t={};for(const r of e.data.results){if(r.answer_option_id){t[r.question_id]=r.answer_option_id}else{t[r.question_id]=r.answer_freeform}}this.setUserAnswers(t)})).catch((e=>{if(!e.response||e.response.status!==404){throw e}this.setUserAnswers({})}))}}saveUserAnswers(){if(!this.id){return Promise.reject("No survey ID.")}const e=[];for(const t of Object.keys(this.userAnswers)){const r={question_id:parseInt(t,10),data:this.userAnswerData,related_object_type:this.relatedObjectType,related_object_id:this.relatedObjectId};if(Object(i["q"])(this.userAnswers[t])){this.userAnswers[t].forEach((t=>{const n=Object.assign({},r);n.answer_option_id=parseInt(t,10);e.push(n)}));continue}if(typeof this.userAnswers[t]==="number"){r.answer_option_id=this.userAnswers[t]}else if(typeof this.userAnswers[t]==="string"){r.answer_freeform=this.userAnswers[t]}e.push(r)}return this._putUserAnswers(e)}updateCourseId(e){this.courseId=e}setUserAnswerData(e){this.userAnswerData=e}get isLoaded(){return!!this.id}get answerIdToCode(){const e={};for(const t of this.questionSets){for(const r of t.questions){for(const t of r.answer_options){e[t.id]=t.text_code}}}return e}get questionCodeToId(){const e={};for(const t of this.questionSets){for(const r of t.questions){e[r.text_code]=r.id}}return e}},s=babelHelpers.applyDecoratedDescriptor(a.prototype,"id",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),l=babelHelpers.applyDecoratedDescriptor(a.prototype,"headline",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),c=babelHelpers.applyDecoratedDescriptor(a.prototype,"description",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),u=babelHelpers.applyDecoratedDescriptor(a.prototype,"questionSets",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),p=babelHelpers.applyDecoratedDescriptor(a.prototype,"userAnswers",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),babelHelpers.applyDecoratedDescriptor(a.prototype,"_sortByOrder",[n["a"]],Object.getOwnPropertyDescriptor(a.prototype,"_sortByOrder"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"_sortQuestionSet",[n["a"]],Object.getOwnPropertyDescriptor(a.prototype,"_sortQuestionSet"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"getSurvey",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"getSurvey"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"setSurvey",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"setSurvey"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"setUserAnswers",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"setUserAnswers"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"clearUserAnswers",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"clearUserAnswers"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"updateUserAnswer",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"updateUserAnswer"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"addUserAnswerOption",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"addUserAnswerOption"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"removeUserAnswerOption",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"removeUserAnswerOption"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"updateCourseId",[i["e"]],Object.getOwnPropertyDescriptor(a.prototype,"updateCourseId"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"isLoaded",[i["g"]],Object.getOwnPropertyDescriptor(a.prototype,"isLoaded"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"answerIdToCode",[i["g"]],Object.getOwnPropertyDescriptor(a.prototype,"answerIdToCode"),a.prototype),babelHelpers.applyDecoratedDescriptor(a.prototype,"questionCodeToId",[i["g"]],Object.getOwnPropertyDescriptor(a.prototype,"questionCodeToId"),a.prototype),a)},"./src/udemy/js/tapen/structured-data-search-admin/constants.ts":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r.d(t,"b",(function(){return i}));const n={unapproved:0,approved:1,escalated:2};var i;(function(e){e["USER_GROUPS"]="userGroups";e["ROUTES"]="routes";e["SCHEMA_SERVICE"]="schemaService";e["GT_INSTANCE_SERVICE"]="gtInstanceService"})(i||(i={}))},"./src/udemy/js/ud-mathjax/constants.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return i}));r.d(t,"b",(function(){return o}));r.d(t,"a",(function(){return a}));const n="/staticx/udemy/mathjax/v3-2-0";const i="``[";const o="]``";const a={chtml:{fontURL:`${n}/fonts`},asciimath:{delimiters:[[i,o]]},loader:{load:["input/asciimath","output/chtml"],paths:{mathjax:`${n}/js`}}}},"./src/udemy/js/ud-mathjax/load-mathjax.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("./src/udemy/js/ud-mathjax/constants.js");let i=null;async function o(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(i){return i}if(!window.MathJax){window.MathJax={...n["a"],...e}}const t=await r.e("mathjax").then(r.bind(null,"./src/udemy/js/ud-mathjax/index.js"));i=t.default;return i}},"./src/udemy/js/user-notification-preferences/notification-preferences.ts":function(e,t,r){"use strict";r.d(t,"c",(function(){return l}));r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));var n=r("./src/udemy/js/utils/ud-api.js");class i{constructor(e,t,r){this.typeCode=e;this.titleText=t;this.defaultValue=r}valueMap(e){if(e){return"on"}return null}get title(){return this.titleText}}const o=Object.freeze({sendAssetReady:Object.freeze(new i("send-asset-ready",gettext("Lecture ready emails"),false)),dailyDiscussionsDigest:Object.freeze(new i("daily-discussions-digest",gettext("Daily Q&A digest"),false)),newCourseAnnouncement:Object.freeze(new i("new-course-announcement",gettext("New announcement emails"),false)),newCoursePromotion:Object.freeze(new i("new-course-promotion",gettext("Promotional emails"),false)),disableAllEmails:Object.freeze(new i("disableAllEmails","",false))});const a=Object.freeze(Object.values(o).reduce(((e,t)=>{e[t.typeCode]=t;return e}),{}));class s{set(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let i="/users/me/notification-preferences/";if(r){i=`/users/me/course/${r}/notification-preferences/`}const o=e.valueMap(t);return n["f"].post(i,{setting:e.typeCode,value:o})}}const l=new s},"./src/udemy/js/utils/array-move.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e,t,r){e=e.slice(0);if(r>=e.length){let t=r-e.length;while(t--+1){e.push(undefined)}}e.splice(r,0,e.splice(t,1)[0]);return e}},"./src/udemy/js/utils/autopilot.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/shared-utils/dist/esm/react/autopilot.js");t["a"]=n["a"]},"./src/udemy/js/utils/browser-log-collection.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("./node_modules/axios/index.js");var i=r.n(n);var o=r("./src/udemy/js/utils/get-config-data.js");class a{constructor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;this._clientToken="pub4ecb41fd37fb63f77d38e05f54b0fb29";this._url=`https://browser-http-intake.logs.datadoghq.com/v1/input/${this._clientToken}`;this._service=e?`website-django.${e}`:"website-django"}get _env(){return Object(o["a"])().env}_sendLog(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(this._env!=="PROD"){return}const n="production";const o=Object.assign({level:e,message:t,ddsource:"browser",service:this._service,ddtags:`env:${n}`},r);i.a.post(this._url,o)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}this._sendLog("info",...t)}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}this._sendLog("debug",...t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}this._sendLog("warn",...t)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}this._sendLog("error",...t)}}},"./src/udemy/js/utils/composed-path.js":function(e,t,r){"use strict";function n(e,t,r){if(!e.composedPath){e.composedPath=function(){if(this.path){return this.path}let e=this.target;this.path=[];while(e.parentNode!==null){this.path.push(e);e=e.parentNode}this.path.push(t,r);return this.path}}}if(typeof Event!=="undefined"&&typeof window!=="undefined"){n(Event.prototype,document,window)}},"./src/udemy/js/utils/currency-formatter.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/shared-utils/dist/esm/i18n/currency-formatter.js");t["a"]=n["a"]},"./src/udemy/js/utils/debounce.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/debounce.js");t["a"]=n["a"]},"./src/udemy/js/utils/escape/unescape-html.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const n=/&(?:amp|lt|gt|quot|#39);/g;const i=RegExp(n.source);const o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};function a(e){return o[e]}function s(e){return e&&i.test(e)?e.replace(n,a):e}},"./src/udemy/js/utils/form-validators.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r.d(t,"c",(function(){return i}));r.d(t,"d",(function(){return o}));r.d(t,"b",(function(){return a}));const n=Object.freeze({success:"success",warning:"warning",error:"error"});function i(e){let{text:t}=e;const r=/([\w-]{1,63}\.[a-zA-Z-]{2,63})/g;const i=/(ude\.my|udemy\.(com|cn))/;const o=t.match(r);return o===null||o.every((e=>e.match(i)!==null))?n.success:n.error}function o(e){let{text:t}=e;const r=/^http[s]?:\/\/([\w-]{1,63}\.[a-zA-Z-]{2,63}(\.(com|cn)?)?\/?)/g;const i=/(ude\.my|udemy\.(com|cn))/;const o=t.match(r);return o!==null&&o.every((e=>e.match(i)!==null))?n.success:n.error}function a(e,t){return e.every((e=>e(t)===n.success))?n.success:n.error}},"./src/udemy/js/utils/fullscreen.tsx":function(e,t,r){"use strict";r.d(t,"b",(function(){return d}));r.d(t,"a",(function(){return h}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./node_modules/mobx-react/dist/mobx-react.module.js");var a=r("./node_modules/react/index.js");var s=r.n(a);var l=undefined&&undefined.__decorate||function(e,t,r,n){var i=arguments.length,o=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])o=(i<3?a(o):i>3?a(t,r,o):a(t,r))||o;return i>3&&o&&Object.defineProperty(t,r,o),o};var c=undefined&&undefined.__rest||function(e,t){var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0)r[n]=e[n];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++){if(t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i]))r[n[i]]=e[n[i]]}return r};const u={fullscreen:["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement"],fullscreenchange:["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],requestFullscreen:["requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen"],exitFullscreen:["exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen"]};class p{getPropertyName(e,t){for(let r=0;r<u[t].length;r++){const n=u[t][r];if(e[n]){return n}}}getProperty(e,t){const r=this.getPropertyName(e,t);return r?e[r]:null}get changeEvents(){return u.fullscreenchange}isSupported(){return!!this.getProperty(document.documentElement,"requestFullscreen")}isFullscreen(){return!!this.getProperty(document,"fullscreen")}requestFullscreen(e){if(!this.isSupported()){return false}return this.getProperty(e,"requestFullscreen").call(e)}exitFullscreen(){if(!this.isSupported()){return false}return this.getProperty(document,"exitFullscreen").call(document)}toggleFullscreen(e){if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen(e)}}}const d=new p;function h(e){var t,r,n;var i;const a=(t=e.propTypes)!==null&&t!==void 0?t:{},{toggleFullscreen:l,isFullscreen:u,exitFullscreen:p,setFullscreenRef:d}=a,h=c(a,["toggleFullscreen","isFullscreen","exitFullscreen","setFullscreenRef"]);return Object(o["f"])((i=class t extends s.a.Component{constructor(){super(...arguments);this.fullscreenStore=new m}render(){return s.a.createElement(o["c"],{fullscreenStore:this.fullscreenStore},s.a.createElement(e,Object.assign({toggleFullscreen:this.fullscreenStore.toggleFullscreen,isFullscreen:this.fullscreenStore.isFullscreen,exitFullscreen:this.fullscreenStore.exitFullscreen,setFullscreenRef:this.fullscreenStore.setRef},this.props)))}},i.displayName=`Fullscreen-Enabled-${(r=e.displayName)!==null&&r!==void 0?r:e.name}`,i.propTypes=h,i.defaultProps=(n=e.defaultProps)!==null&&n!==void 0?n:{},i.wrappedComponent=e,i))}class m{constructor(){this.isFullscreen=false}_addFullscreenEvents(){d.changeEvents.forEach((e=>{document.addEventListener(e,this.handleFullscreenEvent)}))}_removeFullscreenEvents(){d.changeEvents.forEach((e=>{document.removeEventListener(e,this.handleFullscreenEvent)}))}_exitFullscreen(){this._addFullscreenEvents();if(d.exitFullscreen()===false){this._removeFullscreenEvents()}}toggleFullscreen(){if(this.isFullscreen){this._exitFullscreen()}else if(!this.isFullscreen&&this.ref){this._addFullscreenEvents();if(d.requestFullscreen(this.ref)===false){this._removeFullscreenEvents()}}if(this.focusElement){this.focusElement.focus()}}exitFullscreen(){if(this.isFullscreen){this._exitFullscreen()}}handleFullscreenEvent(){this.isFullscreen=d.isFullscreen();if(!this.isFullscreen){this._removeFullscreenEvents()}}setRef(e){this.ref=e}setFocusElement(e){this.focusElement=e}}l([i["t"]],m.prototype,"isFullscreen",void 0);l([n["a"]],m.prototype,"toggleFullscreen",null);l([n["a"]],m.prototype,"exitFullscreen",null);l([n["a"],i["e"]],m.prototype,"handleFullscreenEvent",null);l([n["a"]],m.prototype,"setRef",null);l([n["a"]],m.prototype,"setFocusElement",null)},"./src/udemy/js/utils/hotkeys.js":function(e,t,r){"use strict";var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i,o;const a=e=>["input","textarea","button","a","select","option"].includes(e.tagName.toLowerCase())||e.getAttribute("role")==="button"||e.getAttribute("role")==="slider"||e.getAttribute("role")==="menuitemradio"||e.getAttribute("role")==="menuitem"||e.getAttribute("contenteditable")==="true";let s=(i=(o=class e{constructor(e){this.container=e;this.registry={}}makeReference(e,t){return[...e,t].join("+").toUpperCase()}keyStringToReference(t){const r=t.split("+");let n=r.pop();const i=r.map((t=>{if(e.MODIFIERS[t]){return e.MODIFIERS[t]}if(e.BROWSER_MODIFIERS[t]){throw new Error(`${t} cannot be as a modifier, it is reserved for the browser.`)}throw new Error(`Unknown modifier key, '${t}'.`)})).sort();if(e.MODIFIABLE_KEYS[n]){n=e.MODIFIABLE_KEYS[n]}else if(i.length){throw new Error(`${n} is not a modifiable key.`)}return this.makeReference(i,n)}register(e,t){const r=this.keyStringToReference(e);if(!Object.keys(this.registry).length){this.container.addEventListener("keydown",this.handleKeyDown)}if(!this.registry[r]){this.registry[r]=[]}this.registry[r].push(t)}unregister(e,t){const r=this.keyStringToReference(e);if(!this.registry[r]){return}const n=this.registry[r].indexOf(t);if(n<0){return}this.registry[r].splice(n,1);if(!this.registry[r].length){delete this.registry[r]}if(!Object.keys(this.registry).length){this.container.removeEventListener("keydown",this.handleKeyDown)}}registerMap(e){e.forEach((e=>{if(e.fn){this.register(e.key,e.fn)}}))}unregisterMap(e){e.forEach((e=>{if(e.fn){this.unregister(e.key,e.fn)}}))}getModifiers(t,r){const n=Object.values(e.MODIFIABLE_KEYS).includes(t);const i=Object.assign({},e.BROWSER_MODIFIERS,n?e.MODIFIERS:{});return Object.values(i).reduce(((e,t)=>{if(r[t]){e.push(t)}return e}),[]).sort()}handleKeyDown(e){const t=e.target||e.toElement||document.activeElement;const r=!!t&&a(t);const n=e.key;const i=this.getModifiers(n,e);const o=this.makeReference(i,n);const s=this.registry[o]||[];s.forEach((t=>{const n=t.shouldCall?t.shouldCall(e):!r;n&&t(e)}))}},o.MODIFIABLE_KEYS={space:" ",left:"ArrowLeft",right:"ArrowRight",down:"ArrowDown",up:"ArrowUp",enter:"Enter",escape:"Escape"},o.MODIFIERS={alt:"altKey",shift:"shiftKey"},o.BROWSER_MODIFIERS={ctrl:"ctrlKey",meta:"metaKey"},o),babelHelpers.applyDecoratedDescriptor(i.prototype,"handleKeyDown",[n["a"]],Object.getOwnPropertyDescriptor(i.prototype,"handleKeyDown"),i.prototype),i);t["a"]=new s(document)},"./src/udemy/js/utils/memoize.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e,t,r){if(r){r.value=n(r.value);return r}const i=function(){const t=i.__cache;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}const a=JSON.stringify(n);if(!t.has(a)){t.set(a,e.apply(this,n))}return t.get(a)};i.__cache=new Map;return i}},"./src/udemy/js/utils/merge-objects.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));function n(e){e={...e};for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++){r[o-1]=arguments[o]}r.forEach((t=>{for(const r in t){if(Array.isArray(e[r])&&Array.isArray(t[r])){e[r]=i(e[r],t[r])}else if(e[r]&&typeof e[r]==="object"&&t[r]&&typeof t[r]==="object"){e[r]=n(e[r],t[r])}else{e[r]=t[r]}}}));return e}function i(){const e=new Set;const t=[];for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n.forEach((r=>{r.forEach((r=>{if(!e.has(r)){t.push(r);e.add(r)}}))}));return t}},"./src/udemy/js/utils/mobx.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));r.d(t,"a",(function(){return a}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i;function o(e,t,r){const i={};r.forEach((e=>{if(e in t){i[e]=t[e]}}));Object.keys(t).forEach((t=>{if(!(t in i)){throw new Error(`Cannot assign unrecognized property ${t} to ${e.constructor.name}`)}}));Object.entries(i).forEach((t=>{let[r,i]=t;Object(n["y"])(e,r,i)}))}let a=(i=class e{get apiDataMap(){return{}}constructor(e){this.setDataFromAPI(e);this._apiData=e}setDataFromAPI(e){if(!e){return}Object.entries(this.apiDataMap).forEach((t=>{let[r,n]=t;if(typeof n==="string"){if(e[n]!==undefined){this[r]=e[n]}}else{const t=typeof n.source==="string"?[n.source]:n.source;const i=n.map||(e=>e);if(t.every((t=>e[t]!==undefined))){const n=t.map((t=>e[t]));const o=i(...n);if(o!==undefined){this[r]=o}}else if(n.defaultValue!==undefined&&this[r]===undefined){this[r]=typeof n.defaultValue==="function"?n.defaultValue(e):n.defaultValue}}}))}},babelHelpers.applyDecoratedDescriptor(i.prototype,"setDataFromAPI",[n["e"]],Object.getOwnPropertyDescriptor(i.prototype,"setDataFromAPI"),i.prototype),i)},"./src/udemy/js/utils/pacific-timezone.ts":function(e,t,r){"use strict";r.d(t,"c",(function(){return i}));r.d(t,"d",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"f",(function(){return s}));r.d(t,"b",(function(){return l}));r.d(t,"e",(function(){return c}));var n=r("./src/udemy/js/utils/range.js");function i(e){const t=e=>e.getUTCDay()===0;const r=Object(n["a"])(14).map((t=>new Date(Date.UTC(e,2,t+1,10)))).filter(t)[1];const i=Object(n["a"])(7).map((t=>new Date(Date.UTC(e,10,t+1,9)))).filter(t)[0];return[r,i]}function o(e){const t=e instanceof Date?e:new Date(e);const[r,n]=i(t.getUTCFullYear());return t>=r&&t<n?420:480}function a(e){const t=new Date(e);const r=Object.assign(t,{pacificTimezoneOffset:o(t)});const n=r.getTimezoneOffset()-r.pacificTimezoneOffset;n!==0&&r.setMinutes(r.getMinutes()+n);return r}function s(e){const t=`${e.getFullYear()}`;const r=`${e.getMonth()+1}`.padStart(2,"0");const n=`${e.getDate()}`.padStart(2,"0");const i=`${e.getHours()}`.padStart(2,"0");const o=`${e.getMinutes()}`.padStart(2,"0");const a=`${e.getSeconds()}`.padStart(2,"0");const s=`${e.getMilliseconds()}`.padStart(3,"0");return`${t}-${r}-${n}T${i}:${o}:${a}.${s}`}function l(e,t){const r=s(e).slice(0,13);const[n,o]=i(e.getFullYear());const a=n.toISOString().slice(0,10);const l=o.toISOString().slice(0,10);let c;if(r===`${l}T01`){if(t){const e=s(t).slice(0,13);if(e>r){c=480}else if(e<r){c=420}else{c=t.pacificTimezoneOffset}}else{c=420}}else if(r>=`${a}T02`&&r<`${l}T02`){c=420}else{c=480}return Object.assign(e,{pacificTimezoneOffset:c})}function c(e){const t=e.pacificTimezoneOffset===420?"-07:00":"-08:00";return new Date(s(e)+t).toISOString()}},"./src/udemy/js/utils/query-params.js":function(e,t,r){"use strict";r.d(t,"d",(function(){return o}));r.d(t,"b",(function(){return s}));r.d(t,"c",(function(){return l}));var n=r("./node_modules/qs/lib/index.js");var i=r.n(n);function o(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:window.location;return i.a.parse(e.search,{ignoreQueryPrefix:true})}function a(e,t){if(typeof e==="boolean"){return e}const r={0:false,1:true,false:false,true:true,on:true,off:false,enabled:true,disabled:false};const n=(e||"").toLowerCase();if(r[n]===undefined){return t}return r[n]}function s(e,t,r){if(t.indexOf(e)>=0){return e}return r}function l(e,t){const r=parseInt(e,10);if(isNaN(r)){return t}return r}function c(e,t){return e||t}t["a"]=i.a},"./src/udemy/js/utils/range.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/shared-utils/dist/esm/lodashy/range.js");t["a"]=n["a"]},"./src/udemy/js/utils/s3-upload-configuration.js":function(e,t,r){"use strict";r.d(t,"e",(function(){return i}));r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));r.d(t,"d",(function(){return s}));r.d(t,"c",(function(){return l}));r.d(t,"g",(function(){return c}));var n=r("./src/udemy/js/utils/ud-api.js");t["f"]={signature:{endpoint:"/api-2.0/s3-upload-signatures/",customHeaders:n["d"]},chunking:{enabled:true},resume:{enabled:true},multiple:false,retry:{enableAuto:true}};const i=[".avi",".mpg",".mpeg",".flv",".mov",".m2v",".m4v",".mp4",".rm",".ram",".vob",".ogv",".webm",".wmv"];const o=[".mp3",".wav"];const a=[".gif",".jpg",".jpeg",".png"];const s=[".rb",".py",".sh"];const l=[".pdf"];const c=4e9},"./src/udemy/js/utils/serialize-form.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/shared-utils/dist/esm/forms/serialize-form.js");t["a"]=n["a"]},"./src/udemy/js/utils/ud-prop-types.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/shared-utils/dist/esm/index.js");r.d(t,"b",(function(){return n["d"]}));r.d(t,"c",(function(){return n["e"]}));r.d(t,"a",(function(){return n["c"]}))},"./src/udemy/js/utils/ud-s3fineuploader.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./other-libs/fineuploader/s3.fine-uploaderv5.1.3.js");var o=r.n(i);var a=r("./src/udemy/js/utils/get-config-data.js");var s=r("./src/udemy/js/utils/noop.js");var l=r("./src/udemy/js/utils/s3-upload-configuration.js");var c;const u=Object(a["a"])();let p=(c=class e{constructor(e){const{bucketUrl:t,key:r,sizeLimit:n,acl:i}=e;this._onProgress=e.onProgress||s["a"];this._onError=e.onError||s["a"];this._onComplete=e.onComplete||s["a"];this.allowedExtensionsDotted=e.allowedExtensionsDotted||[];this._uploader=new o.a.s3.FineUploaderBasic({...l["f"],request:{endpoint:t||u.third_party.s3.asset.bucket_url,accessKey:r||u.third_party.s3.asset.key},validation:{itemLimit:1,minSizeLimit:1,allowedExtensions:this.allowedExtensions,sizeLimit:n||l["g"]},objectProperties:{acl:i},callbacks:{onTotalProgress:this._onUploadProgress,onAllComplete:this._onUploadComplete,onError:this._onUploadError}})}upload(e){this._uploader.addFiles([e]);this._uploader.uploadStoredFiles()}cancel(){this._uploader.cancelAll();this._uploader.clearStoredFiles()}reset(){this._uploader.reset()}registerUploadCompleteHandler(e){this._onComplete=e}_onUploadComplete(e){let[t]=e;const r=this._uploader.getName(t);const n={id:t,key:this._uploader.getKey(t),uuid:this._uploader.getUuid(t),name:r,bucket:this._uploader.getBucket(t)};this._onComplete(n)}registerUploadErrorHandler(e){this._onError=e}_onUploadError(e,t,r){this._onError(e,t,r)}registerUploadProgressHandler(e){this._onProgress=e}_onUploadProgress(e,t){this._onProgress(e,t)}get allowedExtensions(){return this.allowedExtensionsDotted.map((e=>{if(e.startsWith(".")){return e.substring(1,e.length)}return e}))}},babelHelpers.applyDecoratedDescriptor(c.prototype,"registerUploadCompleteHandler",[n["a"]],Object.getOwnPropertyDescriptor(c.prototype,"registerUploadCompleteHandler"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"_onUploadComplete",[n["a"]],Object.getOwnPropertyDescriptor(c.prototype,"_onUploadComplete"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"registerUploadErrorHandler",[n["a"]],Object.getOwnPropertyDescriptor(c.prototype,"registerUploadErrorHandler"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"_onUploadError",[n["a"]],Object.getOwnPropertyDescriptor(c.prototype,"_onUploadError"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"registerUploadProgressHandler",[n["a"]],Object.getOwnPropertyDescriptor(c.prototype,"registerUploadProgressHandler"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"_onUploadProgress",[n["a"]],Object.getOwnPropertyDescriptor(c.prototype,"_onUploadProgress"),c.prototype),c)},"./src/udemy/js/utils/ud-system-message.js":function(e,t,r){"use strict";var n=r("./src/udemy/js/utils/ud-api.js");t["a"]={ids:Object.freeze({autocaptionHeadsup:"autocaption_headsup",adaptiveAssessmentCourseGuideModal:"adaptive_assessment_course_guide_modal",assessmentCourseGuideModal:"assessment_course_guide_modal",organizationEligibleFeatureAlert:"organization_eligible_feature_alert",instructorCourseStatus:"instructor_course_status_alert",captionEditorSurvey:"caption_editor_survey",captionEditorSurveyPopup:"caption_editor_survey_popup",captionManagePage:"caption_manage_page",captionSearchTooltip:"caption_search_tooltip",clpConversionHint:"clp_conversion_hint",codingExerciseHint:"coding_exercise_hint",conversionMigrationHint:"conversion_migration_hint",mkinsightsDataChangeAlert:"mkinsights_data_change_alert",courseFreePaid:"course_free_paid",courseTranslationAutoCoverage:"course_translation_auto_coverage",courseTranslationDisabledLanguageCat:"course_translation_disabled_language_cat",courseTranslationLowConfidence:"course_translation_low_confidence",courseTranslationManualCoverage:"course_translation_manual_coverage",discoverabilityTranscriptTooltip:"discoverability_transcript_tooltip",engagementBehaviorHint:"engagement_behavior_hint",freeCourseLengthUpdate:"show_free_course_length_update",hasSeenAndDismissedAssessmentViewResultsCard:"has_seen_and_dismissed_assessment_view_results_card",hasSeenStudentFeaturedQuestionsPrompt:"has_seen_student_featured_questions_prompt",hasSeenInstructorFeaturedQuestionsPrompt:"has_seen_instructor_featured_questions_prompt",hasSeenLabsFeaturePrompt:"has_seen_labs_feature_prompt",hasSeenLabsAlmostOutOfResourcesNotification:"has_seen_labs_almost_out_of_resources_notification",hasSeenLabsSkipSetupNotification:"has_seen_labs_skip_setup_notification",hasSeenReportIssuesBanner:"has_seen_report_issues_banner",hasSeenLabsInCoursePrompt:"has_seen_labs_in_course_prompt",hasSeenActiveLabBanner:"has_seen_active_lab_banner",hasSeenWorkspaceEnabledLecturesPrompt:"has_seen_workspace_enabled_lectures_prompt",hasSeenAndDismissedALRTooltip:"has_seen_and_dismissed_alr_tooltip",instructorApiEula:"instructor_api_eula",instructorOnboarding:"instructor_onboarding",linksWarningQA:"links_warning_qa",mtCaptionSurvey:"mt_caption_survey",autoCaptionSurvey:"auto_caption_survey",organizationEligibleReminder:"organization_eligible_reminder",qrpReactivate:"qrp_reactivate",reinforcementTooltipGettingThere:"reinforcement_tooltip_getting_there",reinforcementTooltipKeepGoing:"reinforcement_tooltip_keep_going",reinforcementTooltipNearlyThere:"reinforcement_tooltip_nearly_there",showAppLinkCourses:"show_app_link_courses",showAppLinkMessages:"show_app_link_messages",showAppLinkQA:"show_app_link_qa",showAppLinkRevenue:"show_app_link_revenue",showAppLinkReviews:"show_app_link_reviews",showAppLinkToast:"show_app_link_toast",showCourseGrpDelay:"show_course_grp_delay",showDirectMessageTurnedOff:"direct_message_turned_off",surveyPrompt:"survey_prompt",taxFaq2017:"tax_faq_2017",testing:"testing",testVideoSurvey:"test_video_survey",translationHowTo:"translation_how_to",translationTooLate:"translation_too_late",visitorChartUnique:"visitor_chart_unique",modalInlineFirstTime:"modal_inline_first_time",instructorCategoryMigrate:"instructor_category_migrate",autoTranslatedCaptions:"auto_translated_captions",onBoardingForProgramsPopover:"onboarding_for_programs_popover",seenTeamUpsellTooltip:"seen_upsell_tooltip",seenUserManagePage:"seen_user_manage_page",courseInsightsListDefinitionsFirstTime:"course_insights_list_definitions_first_time",courseInsightsDetailDefinitionsFirstTime:"course_insights_detail_definitions_first_time",courseUpdatesListDefinitionsFirstTime:"course_updates_list_definitions_first_time",complyFormUnderReview:"comply_form_under_review",complyFormApproved:"comply_form_approved",aiTermsAndConditionsAccepted:"ai_terms_and_conditions_accepted",engagementUBDataCollectDate:"engagement_ub_data_collect_date",isInstructorTourPopoverClosed:"is_instructor_tour_popover_closed",engagementDataDiscrepancy:"engagement_data_discrepancy",ceCreationNewUIWelcomeModal:"ce_creation_new_ui_welcome_modal",ceLearnerNewUIWelcomeModal:"ce_learner_new_ui_welcome_modal",ceLearnerHintUnlockedPopoverDismissed:"ce_learner_hint_unlocked_popover_dismissed",ceLearnerSolutionUnlockedPopoverDismissed:"ce_learner_solution_unlocked_popover_dismissed",ubInsightsInstructorWelcomeModal:"ub_insights_instructor_welcome_modal",deviceBreakdownPopover:"device_breakdown_popover",courseEngagementAllTimeDataPopover:"course_engagement_all_time_data_popover",courseEngagementAllTimeDataAlertBanner:"course_engagement_all_time_data_alert_banner",inProductGuidanceForCodingExerciseInsightsSingle:"in_product_guidance_for_coding_exercise_insights_single",inProductGuidanceForCodingExerciseInsightsAll:"in_product_guidance_for_coding_exercise_insights_all",inProductGuidanceForMoMYoYTrendInsights:"in_product_guidance_for_mom_yoy_trend_insights",ceCreationGuidedWelcomeModal:"ce_creation_guided_welcome_modal",ceInstructorPlanExerciseTourSeen:"ce_instructor_plan_exercise_tour_seen",ceInstructorAuthorSolutionTourSeen:"ce_instructor_author_solution_tour_seen",ceInstructorGuideLearnersTourSeen:"ce_instructor_guide_learners_tour_seen",ceBetaBannerOnCurriculumSeen:"ce_beta_banner_on_curriculum_seen",ceBetaBannerOnCourseListSeen:"ce_beta_banner_on_course_list_seen",ceBetaBannerForPracticeInsightsOnCourseListSeen:"ce_beta_banner_for_practice_insights_on_course_list_seen",ptAIBannerOnQuestionSeen:"pt_ai_banner_on_question_seen",ptShareFeedbackPopoverSeen:"pt_share_feedback_popover_seen",CertificationPopupInCourseOverviewSeen:"certification_popup_course_overview_seen",ceOutputLearnerWelcomePopover:"ce_output_learner_welcome_popover",ceInstructorAIGenerationPopover:"ce_instructor_ai_generation_popover",supplyGapsInproductMessage:"supply_gaps_in_product_message",supplyGapsLocalizationWarningMessage:"supply_gaps_localization_warning_message"}),seen(e,t){if(!Object.values(this.ids).includes(e)){throw new Error(`Invalid system message id: ${e}`)}return n["f"].post(`/users/me/system-messages/${e}/seen/`,t)},hasSeen(e,t){return n["f"].get(`/users/me/system-messages/${e}/seen/`,{params:t})}}},"./src/udemy/js/utils/ud-user-specific-tracking-params.js":function(e,t,r){"use strict";var n=r("./src/udemy/js/utils/create-ud-proxy.js");const i=Object(n["a"])("userSpecificTrackingParams","userSpecificTrackingProperties");t["a"]=i},"./src/udemy/js/utils/user-agent/get-is-mobile-browser.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r.d(t,"b",(function(){return a}));var n=r("./src/udemy/js/utils/get-request-data.js");const i=Object(n["a"])();function o(){return i.isMobile||i.isTablet}const a=o()},"./src/udemy/js/utils/user-settings.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));r.d(t,"b",(function(){return f}));var n=r("./node_modules/mobx/lib/mobx.module.js");var i=r("./src/udemy/js/utils/ud-api.js");var o=r("./src/udemy/js/utils/ud-me.js");var a,s,l;const c={[true]:"on",[false]:null};const u={[true]:"1",[false]:""};const p={[true]:"on",[false]:"off"};const d=["on","1"];const h=["off","",null];const m=Object.freeze({captionEditorPauseWhenTyping:Object.freeze({settingCode:"caption-editor-pause-when-typing",valueMap:c,defaultValue:true}),dismissOccupationCollectionBanner:Object.freeze({settingCode:"dismissOccupationCollectionBanner",valueMap:p,defaultValue:false}),transcriptEditorPauseWhenTyping:Object.freeze({settingCode:"transcript-editor-pause-when-typing",valueMap:c,defaultValue:true}),interstitialAutoplay:Object.freeze({settingCode:"interstitialAutoNext",valueMap:c,defaultValue:true}),reviewPromptDisabled:Object.freeze({settingCode:"review-prompt-disabled",valueMap:u,defaultValue:false}),iaQAOnePaneMode:Object.freeze({settingCode:"ia-qa-one-pane-mode",valueMap:c,defaultValue:false}),instructorCoursesOrdering:Object.freeze({settingCode:"instructor-courses-ordering",defaultValue:"-created",isBoolean:false}),directMessagingEnabled:Object.freeze({settingCode:"direct_messaging_enabled",valueMap:c,defaultValue:true}),skippedOccupationFlow:Object.freeze({settingCode:"skipped-occupation-flow",valueMap:u,defaultValue:false}),mfaEnabled:Object.freeze({settingCode:"mfa-enabled",valueMap:p,defaultValue:true}),exploredCareerTracks:Object.freeze({settingCode:"exploredCareerTracks",valueMap:p,defaultValue:false}),exploredDataScientistCareerTracks:Object.freeze({settingCode:"exploredDataScientistCareerTracks",valueMap:p,defaultValue:false}),seenOnboardingFlow:Object.freeze({settingCode:"seenOnboardingFlow",valueMap:p,defaultValue:false}),seenSavedCourseAlertBanner:Object.freeze({settingCode:"seenSavedCourseAlertBanner",valueMap:p,defaultValue:false}),seenSavedCoursePopover:Object.freeze({settingCode:"seenSavedCoursePopover",valueMap:p,defaultValue:false})});const f=Object.freeze(Object.values(m).reduce(((e,t)=>{e[t.settingCode]=t;return e}),{}));let g=(a=n["t"].ref,s=class e{constructor(){babelHelpers.initializerDefineProperty(this,"settings",l,this)}initialize(e){this.settings={...e}}get(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;const r=this.settings[e.settingCode];if(e.isBoolean===false){return r}if(r!==undefined){if(d.includes(r)){return true}if(h.includes(r)){return false}}if(t!==undefined){return t}return e.defaultValue}set(e,t){let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;let n="/users/me/settings/";if(r){n=`/users/me/course/${r}/settings/`}if(e.isBoolean!==false){t=e.valueMap[t]}return i["f"].post(n,{setting:e.settingCode,value:t}).then((()=>{this.settings[e.settingCode]=t}))}},l=babelHelpers.applyDecoratedDescriptor(s.prototype,"settings",[a],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),babelHelpers.applyDecoratedDescriptor(s.prototype,"initialize",[n["e"]],Object.getOwnPropertyDescriptor(s.prototype,"initialize"),s.prototype),s);const y=new g;Object(n["D"])((()=>!o["a"].isLoading),(()=>{y.initialize(o["a"].settings)}));t["c"]=y},"./src/udemy/js/video-player/captions/captions.mobx-store.js":function(e,t,r){"use strict";var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/js-cookie/src/js.cookie.js");var o=r.n(i);var a=r("./node_modules/mobx/lib/mobx.module.js");var s=r("./node_modules/video.js/dist/video.es.js");var l=r("./src/udemy/js/utils/get-request-data.js");var c=r("./src/udemy/js/video-player/captions/constants.js");var u=r("./src/udemy/js/caption/caption.mobx-model.js");var p=r("./src/udemy/js/caption/cue.mobx-model.js");class d extends p["b"]{attachTrack(e){e.addEventListener("load",(()=>{Object(a["f"])((()=>{e.track.cues.getCueById(this.id).text=this.text}))}))}}var h,m,f,g,y;let b=(h=a["t"].ref,m=class e extends u["b"]{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"mode",f,this);babelHelpers.initializerDefineProperty(this,"player",g,this);babelHelpers.initializerDefineProperty(this,"playerTime",y,this);this.textTrack=null;this.label=e.video_label;Object(a["D"])((()=>this.mode===c["h"].ACTIVE),this.loadFromSource)}constructCue(e){return new d(e)}setMode(e){this.mode=e}attachPlayer(e,t){this.player=e;this.player.on("timeupdate",Object(a["e"])((()=>{this.playerTime=this.player.currentTime()})));if(t){this.loadFromSource();Object(a["D"])((()=>this.isLoaded),this.addTrackToPlayer)}}addTrackToPlayer(){if(this.mode===c["h"].INACTIVE){return}const e=this.player.addRemoteTextTrack({kind:"captions",src:this.asObjectURL,srclang:this.language,label:this.label},true);e.track.mode=this.mode;this.textTrack=e.track;this.cues.forEach((t=>{t.attachTrack(e)}));Object(a["f"])((()=>{this.textTrack.mode=this.mode}))}get activeCues(){return this.cues.filter((e=>e.startTime<=this.playerTime&&e.endTime>this.playerTime))}get asObjectURL(){return URL.createObjectURL(Object(u["a"])(this))}},f=babelHelpers.applyDecoratedDescriptor(m.prototype,"mode",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return c["h"].HIDDEN}}),g=babelHelpers.applyDecoratedDescriptor(m.prototype,"player",[h],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),y=babelHelpers.applyDecoratedDescriptor(m.prototype,"playerTime",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(m.prototype,"setMode",[a["e"]],Object.getOwnPropertyDescriptor(m.prototype,"setMode"),m.prototype),babelHelpers.applyDecoratedDescriptor(m.prototype,"attachPlayer",[a["e"]],Object.getOwnPropertyDescriptor(m.prototype,"attachPlayer"),m.prototype),babelHelpers.applyDecoratedDescriptor(m.prototype,"addTrackToPlayer",[n["a"]],Object.getOwnPropertyDescriptor(m.prototype,"addTrackToPlayer"),m.prototype),babelHelpers.applyDecoratedDescriptor(m.prototype,"activeCues",[a["g"]],Object.getOwnPropertyDescriptor(m.prototype,"activeCues"),m.prototype),babelHelpers.applyDecoratedDescriptor(m.prototype,"asObjectURL",[a["g"]],Object.getOwnPropertyDescriptor(m.prototype,"asObjectURL"),m.prototype),m);r.d(t,"a",(function(){return x}));var v,w,E,S;const _=Object(l["a"])();let x=(v=a["t"].ref,w=class e{constructor(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;let r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{[_.locale.split("_")[0]]:1};let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;babelHelpers.initializerDefineProperty(this,"captions",E,this);babelHelpers.initializerDefineProperty(this,"player",S,this);this.videoPlayerStore=void 0;this.isDefaultCaptionOn=void 0;e.forEach((e=>{this.addCaptionFromAPI(e)}));this.isDefaultCaptionOn=n;if(t){this.autoSelectCaption()}this.languagePriorities=r}attachPlayerStore(e){this.videoPlayerStore=e}setNativeTracksForMobile(e){const t=s["default"].getTech("Html5");t.prototype.featuresNativeTextTracks=e}getSortOrder(e){return this.languagePriorities[e.language]||e.label.codePointAt(0)}get sortedCaptions(){return this.captions.sort(((e,t)=>this.getSortOrder(e)-this.getSortOrder(t)))}addCaptionFromAPI(e){this.captions.push(new b(e))}setActiveCaption(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.captions.forEach((t=>{if(e&&t.id===e.id){this.setCaptionMode(t,c["h"].ACTIVE)}else if(t.mode===c["h"].ACTIVE){this.setCaptionMode(t,c["h"].HIDDEN)}}));if(t){this.persistSelectedCaption(e)}}setCaptionMode(e,t){e.setMode(t)}updateCaptionModesFromNativeTrack(){let e;this.captions.forEach((t=>{if(!t.textTrack){return}if(t.textTrack.mode===c["h"].ACTIVE){e=t}t.setMode(t.textTrack.mode)}));this.persistSelectedCaption(e)}get autoSelectedCaption(){let e,t,r;const n=o.a.get(c["b"]);if(n!==undefined){if(!n){return}e=n}const i=_.locale.substr(0,2);if(i!=="en"||this.isDefaultCaptionOn){t=i;r="en"}let a,s,l;this.captions.forEach((n=>{if(e&&n.language===e){a=n}else if(t&&n.language===t){s=n}else if(r&&n.language===r){l=n}}));let u;if(a){u=a}else if(s){u=s}else if(l){u=l}return u}autoSelectCaption(){const e=this.autoSelectedCaption;if(!e){return}this.setActiveCaption(e,false)}persistSelectedCaption(e){o.a.set(c["b"],e?e.language:"",{expires:30,path:"/"})}attachPlayer(e){this.player=e;this.captions.forEach((t=>{t.attachPlayer(e,this.videoPlayerStore.isUsingNativeControls)}));if(this.videoPlayerStore.isUsingNativeControls){e.textTracks().addEventListener("change",this.updateCaptionModesFromNativeTrack)}}get isLoaded(){return this.captions.every((e=>e.isLoaded))}get hasError(){return this.captions.some((e=>e.error))}get activeTracks(){return this.captions.filter((e=>e.mode===c["h"].ACTIVE))}get hasMachineTranslatedCaptions(){return this.captions.some((e=>e.isTranslation))}toggleDefaultCaption(){const e=this.activeTracks.length?this.activeTracks[0]:null;if(e){this.setActiveCaption(null)}else{let e=this.autoSelectedCaption;if(!e){e=this.sortedCaptions[0]}this.setActiveCaption(e)}}},E=babelHelpers.applyDecoratedDescriptor(w.prototype,"captions",[a["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),S=babelHelpers.applyDecoratedDescriptor(w.prototype,"player",[v],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(w.prototype,"getSortOrder",[n["a"]],Object.getOwnPropertyDescriptor(w.prototype,"getSortOrder"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"sortedCaptions",[a["g"]],Object.getOwnPropertyDescriptor(w.prototype,"sortedCaptions"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"addCaptionFromAPI",[a["e"]],Object.getOwnPropertyDescriptor(w.prototype,"addCaptionFromAPI"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"updateCaptionModesFromNativeTrack",[n["a"]],Object.getOwnPropertyDescriptor(w.prototype,"updateCaptionModesFromNativeTrack"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"autoSelectedCaption",[a["g"]],Object.getOwnPropertyDescriptor(w.prototype,"autoSelectedCaption"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"attachPlayer",[a["e"]],Object.getOwnPropertyDescriptor(w.prototype,"attachPlayer"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"isLoaded",[a["g"]],Object.getOwnPropertyDescriptor(w.prototype,"isLoaded"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"hasError",[a["g"]],Object.getOwnPropertyDescriptor(w.prototype,"hasError"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"activeTracks",[a["g"]],Object.getOwnPropertyDescriptor(w.prototype,"activeTracks"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"hasMachineTranslatedCaptions",[a["g"]],Object.getOwnPropertyDescriptor(w.prototype,"hasMachineTranslatedCaptions"),w.prototype),babelHelpers.applyDecoratedDescriptor(w.prototype,"toggleDefaultCaption",[n["a"]],Object.getOwnPropertyDescriptor(w.prototype,"toggleDefaultCaption"),w.prototype),w)},"./src/udemy/js/video-player/captions/constants.js":function(e,t,r){"use strict";r.d(t,"g",(function(){return n}));r.d(t,"f",(function(){return i}));r.d(t,"c",(function(){return o}));r.d(t,"i",(function(){return a}));r.d(t,"d",(function(){return s}));r.d(t,"e",(function(){return l}));r.d(t,"j",(function(){return c}));r.d(t,"a",(function(){return u}));r.d(t,"b",(function(){return p}));r.d(t,"h",(function(){return h}));const n=Object.freeze({TRACKS:"tracks",SETTINGS:"settings",FONT_SIZE:"fonts",OPACITY:"opacity"});const i=Object.freeze([50,75,100,150,200]);const o=100;const a=Object.freeze([0,25,50,75,100]);const s=75;const l=false;const c="captionsettings";const u={FONT_SIZE_DEFAULT:24,FONT_SIZE_MIN:15};const p="caption";const d=Object.freeze({ON:"on",ON_AUTO:"on_auto",ON_COOKIE:"on_cookie",OFF:"off"});const h=Object.freeze({ACTIVE:"showing",INACTIVE:"disabled",HIDDEN:"hidden"})},"./src/udemy/js/video-player/captions/cue-display/captions-display.less":function(e,t,r){e.exports={"captions-container":"captions-display--captions-container--1-aQJ","user-inactive":"captions-display--user-inactive--2QVjh","captions-cue-text":"captions-display--captions-cue-text--ECkJu"}},"./src/udemy/js/video-player/captions/cue-display/well.less":function(e,t,r){e.exports={container:"well--container--2edq4",text:"well--text--2H_p0","transition-active":"well--transition-active--35hDP"}},"./src/udemy/js/video-player/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r.d(t,"e",(function(){return o}));r.d(t,"d",(function(){return a}));r.d(t,"b",(function(){return s}));r.d(t,"j",(function(){return l}));r.d(t,"g",(function(){return c}));r.d(t,"i",(function(){return u}));r.d(t,"h",(function(){return p}));r.d(t,"f",(function(){return d}));r.d(t,"c",(function(){return h}));r.d(t,"m",(function(){return m}));r.d(t,"l",(function(){return f}));r.d(t,"k",(function(){return g}));var n=r("./src/udemy/js/video-player/videojs-setup/constants.js");const i="auto";const o=i;const a=2e3;const s=Object.freeze({NONE:"none",PLAYBACK_RATE:"playback-rate",CAPTIONS:"captions",SETTINGS:"settings"});const l=5;const c=Object.freeze({PLAY_PAUSE:"play-pause",SEEK_BACK:"seek-back",SEEK_FORWARD:"seek-forward",SPEED_DOWN:"speed-down",SPEED_UP:"speed-up",VOLUME_DOWN:"volume-down",VOLUME_UP:"volume-up",TOGGLE_FULLSCREEN:"fullscreen",TOGGLE_MUTE:"mute"});const u=100;const p=100;const d="application/x-mpegURL";const h="application/dash+xml";const m=Object.freeze({CANNOT_ACCESS_MEDIA_SOURCE:100,CANNOT_RETRIEVE_DRM_LICENSE:101});const f=Object.freeze({[MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]:m.CANNOT_ACCESS_MEDIA_SOURCE,[n["i"]]:m.CANNOT_RETRIEVE_DRM_LICENSE});const g=Object.freeze({plugins:{},inactivityTimeout:a,children:["mediaLoader"]})},"./src/udemy/js/video-player/control-bar/control-bar.less":function(e,t,r){e.exports={"popover-area":"control-bar--popover-area--1LX56","control-bar-wrapper":"control-bar--control-bar-wrapper--1bXpr","control-bar-container":"control-bar--control-bar-container--16vzi","control-bar":"control-bar--control-bar--MweER",spacer:"control-bar--spacer--32VvX"}},"./src/udemy/js/video-player/control-bar/controls.js":function(e,t,r){"use strict";var n=r("./node_modules/@udemy/icons/dist/subtitles.ud-icon");var i=r.n(n);var o=r("./node_modules/autobind-decorator/lib/esm/index.js");var a=r("./node_modules/mobx-react/dist/mobx-react.module.js");var s=r("./node_modules/prop-types/index.js");var l=r.n(s);var c=r("./node_modules/react/index.js");var u=r.n(c);var p=r("./src/udemy/js/video-player/control-bar/video-control-bar-dropdown.react-component.js");var d=r("./src/udemy/js/video-player/captions/constants.js");var h=r("./node_modules/@udemy/icons/dist/next.ud-icon");var m=r.n(h);var f=r("./node_modules/@udemy/icons/dist/previous.ud-icon");var g=r.n(f);var y=r("./src/udemy/js/video-player/utils.js");var b=r("./src/udemy/js/video-player/control-bar/video-control-bar-dropdown.less");var v,w,E,S;let _=(v=Object(a["e"])("captionDisplayStore"),v(w=Object(a["f"])(w=(E=(S=class e extends u.a.Component{goToTracks(){this.props.captionDisplayStore.setSubmenu(d["g"].TRACKS);this.props.onChangeMenu()}goToFontSize(){this.props.captionDisplayStore.setSubmenu(d["g"].FONT_SIZE);this.props.onChangeMenu()}goToOpacity(){this.props.captionDisplayStore.setSubmenu(d["g"].OPACITY);this.props.onChangeMenu()}render(){const{captionDisplayStore:e}=this.props;const t=gettext("Caption settings");return u.a.createElement(p["b"].Menu,{"data-purpose":"captions-dropdown-menu"},u.a.createElement(p["b"].MenuItem,{onClick:this.goToTracks,"data-purpose":"go-to-tracks","aria-label":gettext("Back to captions menu")},u.a.createElement(g.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--prev-icon--3yd9N"}),t),u.a.createElement("li",{role:"separator"}),u.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":t},u.a.createElement("li",null,u.a.createElement(p["b"].MenuItem,{onClick:this.goToFontSize,"data-purpose":"go-to-font-size","aria-haspopup":"menu"},gettext("Font size"),u.a.createElement("span",{"data-purpose":"current-font-size",className:"video-control-bar-dropdown--current-value--18O0E"},`${e.activeFontSize}%`),u.a.createElement(m.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--next-icon--3crbc"}))),u.a.createElement("li",null,u.a.createElement(p["b"].MenuItem,{onClick:this.goToOpacity,"data-purpose":"go-to-opacity","aria-haspopup":"menu"},gettext("Background opacity"),u.a.createElement("span",{"data-purpose":"current-opacity",className:"video-control-bar-dropdown--current-value--18O0E"},`${e.activeOpacity}%`),u.a.createElement(m.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--next-icon--3crbc"}))),!y["b"].isMobile&&u.a.createElement("li",null,u.a.createElement(p["b"].MenuItem,{onClick:e.toggleWellEnabled,"aria-checked":e.isWellEnabled,role:"menuitemcheckbox"},gettext("Display under video"))),u.a.createElement("li",null,u.a.createElement(p["b"].MenuItem,{onClick:e.reset,"data-purpose":"reset"},gettext("Reset")))))}},S.propTypes={captionDisplayStore:l.a.object.isRequired,onChangeMenu:l.a.func.isRequired},S),babelHelpers.applyDecoratedDescriptor(E.prototype,"goToTracks",[o["a"]],Object.getOwnPropertyDescriptor(E.prototype,"goToTracks"),E.prototype),babelHelpers.applyDecoratedDescriptor(E.prototype,"goToFontSize",[o["a"]],Object.getOwnPropertyDescriptor(E.prototype,"goToFontSize"),E.prototype),babelHelpers.applyDecoratedDescriptor(E.prototype,"goToOpacity",[o["a"]],Object.getOwnPropertyDescriptor(E.prototype,"goToOpacity"),E.prototype),E))||w)||w);var x,D,C,T;let O=(x=Object(a["e"])("captionDisplayStore"),x(D=Object(a["f"])(D=(C=(T=class e extends u.a.Component{goToSettings(){this.props.captionDisplayStore.setSubmenu(d["g"].SETTINGS);this.props.onChangeMenu()}render(){const{captionDisplayStore:e}=this.props;const t=gettext("Font size");return u.a.createElement(p["b"].Menu,{"data-purpose":"captions-dropdown-menu"},u.a.createElement(p["b"].MenuItem,{onClick:this.goToSettings,"data-purpose":"go-to-settings","aria-label":gettext("Back to caption settings menu")},u.a.createElement(g.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--prev-icon--3yd9N"}),t),u.a.createElement("li",{role:"separator"}),u.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":t},d["f"].map((t=>u.a.createElement("li",{key:t},u.a.createElement(p["b"].MenuItem,{onClick:()=>e.selectFontSize(t),"aria-checked":e.activeFontSize===t,role:"menuitemradio"},`${t}%`))))))}},T.propTypes={captionDisplayStore:l.a.object.isRequired,onChangeMenu:l.a.func.isRequired},T),babelHelpers.applyDecoratedDescriptor(C.prototype,"goToSettings",[o["a"]],Object.getOwnPropertyDescriptor(C.prototype,"goToSettings"),C.prototype),C))||D)||D);var k,P,A,I;let j=(k=Object(a["e"])("captionDisplayStore"),k(P=Object(a["f"])(P=(A=(I=class e extends u.a.Component{goToSettings(){this.props.captionDisplayStore.setSubmenu(d["g"].SETTINGS);this.props.onChangeMenu()}render(){const{captionDisplayStore:e}=this.props;const t=gettext("Background opacity");return u.a.createElement(p["b"].Menu,{"data-purpose":"captions-dropdown-menu"},u.a.createElement(p["b"].MenuItem,{onClick:this.goToSettings,"data-purpose":"go-to-settings","aria-label":gettext("Back to caption settings menu")},u.a.createElement(g.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--prev-icon--3yd9N"}),t),u.a.createElement("li",{role:"separator"}),u.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":t},d["i"].map((t=>u.a.createElement("li",{key:t},u.a.createElement(p["b"].MenuItem,{onClick:()=>e.selectTrackOpacity(t),"aria-checked":e.activeOpacity===t,role:"menuitemradio"},`${t}%`))))))}},I.propTypes={captionDisplayStore:l.a.object.isRequired,onChangeMenu:l.a.func.isRequired},I),babelHelpers.applyDecoratedDescriptor(A.prototype,"goToSettings",[o["a"]],Object.getOwnPropertyDescriptor(A.prototype,"goToSettings"),A.prototype),A))||P)||P);var R=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");var N,L,M,q;let U=(N=Object(a["e"])("captionDisplayStore","captionsStore"),N(L=Object(a["f"])(L=(M=(q=class e extends u.a.Component{goToSettings(){this.props.captionDisplayStore.setSubmenu(d["g"].SETTINGS);this.props.onChangeMenu()}render(){const{captionDisplayStore:e,captionsStore:t}=this.props;return u.a.createElement(p["b"].Menu,{"data-purpose":"captions-dropdown-menu"},u.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":gettext("Captions")},u.a.createElement("li",null,u.a.createElement(p["b"].MenuItem,{onClick:()=>t.setActiveCaption(null),"aria-checked":!e.activeTrack,role:"menuitemradio"},gettext("Off"))),t.sortedCaptions.map((e=>u.a.createElement("li",{key:e.id},u.a.createElement(p["b"].MenuItem,{onClick:()=>t.setActiveCaption(e),"aria-checked":e.mode===d["h"].ACTIVE,role:"menuitemradio"},e.label))))),t.hasMachineTranslatedCaptions&&u.a.createElement(p["b"].MenuItem,{componentClass:"a",href:"http://translate.google.com",target:"_blank",rel:"noopener noreferrer","data-purpose":"attribution-link"},u.a.createElement(R["a"],{alt:gettext("Translated by Google"),width:244,height:32,src:"/staticx/udemy/images/content-l10n/translated-by-google.png"})),u.a.createElement("li",{role:"separator"}),u.a.createElement(p["b"].MenuItem,{onClick:this.goToSettings,"data-purpose":"go-to-settings","aria-haspopup":"menu"},gettext("Caption settings"),u.a.createElement(m.a,{label:false,color:"inherit",className:"video-control-bar-dropdown--next-icon--3crbc"})))}},q.propTypes={captionDisplayStore:l.a.object.isRequired,captionsStore:l.a.object.isRequired,onChangeMenu:l.a.func.isRequired},q),babelHelpers.applyDecoratedDescriptor(M.prototype,"goToSettings",[o["a"]],Object.getOwnPropertyDescriptor(M.prototype,"goToSettings"),M.prototype),M))||L)||L);var H,F,B,z,V,W,G;let K=(H=Object(a["e"])("$$udControlBarDropdown"),H(F=(B=(z=class e extends u.a.Component{onChangeMenu(){setTimeout((()=>{const e=document.getElementById(this.props.$$udControlBarDropdown.menuId);const t=e?e.querySelectorAll("button,a[href],[tabindex]"):[];t[0]&&t[0].focus()}),0)}render(){switch(this.props.menuPage){case d["g"].TRACKS:return u.a.createElement(U,{onChangeMenu:this.onChangeMenu});case d["g"].SETTINGS:return u.a.createElement(_,{onChangeMenu:this.onChangeMenu});case d["g"].FONT_SIZE:return u.a.createElement(O,{onChangeMenu:this.onChangeMenu});case d["g"].OPACITY:return u.a.createElement(j,{onChangeMenu:this.onChangeMenu})}}},z.propTypes={menuPage:l.a.oneOf(Object.values(d["g"])).isRequired,$$udControlBarDropdown:l.a.object.isRequired},z),babelHelpers.applyDecoratedDescriptor(B.prototype,"onChangeMenu",[o["a"]],Object.getOwnPropertyDescriptor(B.prototype,"onChangeMenu"),B.prototype),B))||F);let $=(V=Object(a["e"])("captionDisplayStore","captionsStore"),V(W=Object(a["f"])(W=(G=class e extends u.a.Component{render(){if(!this.props.captionsStore.captions.length){return null}const e=u.a.createElement(p["b"].Button,{"data-purpose":"captions-dropdown-button",tooltipProps:{a11yRole:"none",children:gettext("Captions")}},u.a.createElement(i.a,{label:gettext("Subtitles"),size:"medium"}));return u.a.createElement(p["b"],{placement:"top-end",isOpen:this.props.captionDisplayStore.isMenuOpen,onToggle:this.props.captionDisplayStore.toggleMenu,trigger:e},u.a.createElement(K,{menuPage:this.props.captionDisplayStore.menuPage}))}},G.propTypes={captionDisplayStore:l.a.object.isRequired,captionsStore:l.a.object.isRequired},G))||W)||W);var X=r("./node_modules/mobx/lib/mobx.module.js");var Y=r("./src/udemy/js/video-player/constants.js");var Q;let J=(Q=class e{constructor(e){this.controlBarStore=e}toggleMenu(e){if(e){this.openMenu()}else{this.closeMenu()}}openMenu(){this.controlBarStore.setMenuOpen(Y["b"].PLAYBACK_RATE)}closeMenu(){this.controlBarStore.setMenuClosed()}get isMenuOpen(){return this.controlBarStore.activeMenu===Y["b"].PLAYBACK_RATE}},babelHelpers.applyDecoratedDescriptor(Q.prototype,"toggleMenu",[o["a"]],Object.getOwnPropertyDescriptor(Q.prototype,"toggleMenu"),Q.prototype),babelHelpers.applyDecoratedDescriptor(Q.prototype,"openMenu",[o["a"]],Object.getOwnPropertyDescriptor(Q.prototype,"openMenu"),Q.prototype),babelHelpers.applyDecoratedDescriptor(Q.prototype,"closeMenu",[o["a"]],Object.getOwnPropertyDescriptor(Q.prototype,"closeMenu"),Q.prototype),babelHelpers.applyDecoratedDescriptor(Q.prototype,"isMenuOpen",[X["g"]],Object.getOwnPropertyDescriptor(Q.prototype,"isMenuOpen"),Q.prototype),Q);var Z=r("./src/udemy/js/video-player/playback-rate/playback-rate.less");var ee,te,re;let ne=(ee=Object(a["e"])("videoPlayerStore","controlBarStore"),ee(te=Object(a["f"])(te=(re=class e extends u.a.Component{constructor(e){super(e);this.store=new J(this.props.controlBarStore)}render(){const{playbackRateStore:e}=this.props.videoPlayerStore;const{availablePlaybackRates:t,playbackRate:r}=e;const n=u.a.createElement(p["b"].Button,{"aria-label":gettext("Playback rate"),"data-purpose":"playback-rate-button",className:"ud-custom-focus-visible playback-rate--trigger--IzHKn",tooltipProps:{a11yRole:"none",children:gettext("Playback rate")}},u.a.createElement("span",{className:"ud-focus-visible-target playback-rate--trigger-text--3DafK"},`${r}x`));return u.a.createElement(p["b"],{placement:"top-start",isOpen:this.store.isMenuOpen,onToggle:this.store.toggleMenu,className:"playback-rate--playback-rate--1XOKO",trigger:n},u.a.createElement(p["b"].Menu,{"data-purpose":"playback-rate-menu",className:"playback-rate--menu--1Nk3X"},t.map((t=>u.a.createElement(p["b"].MenuItem,{key:t,onClick:()=>e.choosePlaybackRate(t),"aria-checked":t===r,role:"menuitemradio"},u.a.createElement("span",{className:"ud-text-bold"},`${t}x`))))))}},re.propTypes={videoPlayerStore:l.a.object.isRequired,controlBarStore:l.a.object.isRequired},re))||te)||te);var ie=r("./node_modules/@udemy/icons/dist/settings.ud-icon");var oe=r.n(ie);var ae;let se=(ae=class e{constructor(e){this.controlBarStore=e}toggleMenu(e){if(e){this.openMenu()}else{this.closeMenu()}}openMenu(){this.controlBarStore.setMenuOpen(Y["b"].SETTINGS)}closeMenu(){this.controlBarStore.setMenuClosed()}get isMenuOpen(){return this.controlBarStore.activeMenu===Y["b"].SETTINGS}},babelHelpers.applyDecoratedDescriptor(ae.prototype,"toggleMenu",[o["a"]],Object.getOwnPropertyDescriptor(ae.prototype,"toggleMenu"),ae.prototype),babelHelpers.applyDecoratedDescriptor(ae.prototype,"openMenu",[o["a"]],Object.getOwnPropertyDescriptor(ae.prototype,"openMenu"),ae.prototype),babelHelpers.applyDecoratedDescriptor(ae.prototype,"closeMenu",[o["a"]],Object.getOwnPropertyDescriptor(ae.prototype,"closeMenu"),ae.prototype),babelHelpers.applyDecoratedDescriptor(ae.prototype,"isMenuOpen",[X["g"]],Object.getOwnPropertyDescriptor(ae.prototype,"isMenuOpen"),ae.prototype),ae);var le,ce,ue;let pe=(le=Object(a["e"])("videoPlayerStore","controlBarStore"),le(ce=Object(a["f"])(ce=(ue=class e extends u.a.Component{constructor(e){super(e);this.store=new se(this.props.controlBarStore)}renderResolutionLabel(e,t,r,n){return e===Y["a"]&&r&&n?interpolate(gettext("Auto (%(resolution)sp)"),{resolution:n},true):t}render(){const{videoPlayerStore:e}=this.props;const{activeResolution:t,sortedResolutions:r,hlsResolution:n}=e;const i=u.a.createElement(p["b"].Button,{"data-purpose":"settings-button",tooltipProps:{a11yRole:"none",children:gettext("Settings")}},u.a.createElement(oe.a,{label:gettext("Settings"),size:"medium"}));return u.a.createElement(p["b"],{placement:"top-end",isOpen:this.store.isMenuOpen,onToggle:this.store.toggleMenu,trigger:i},u.a.createElement(p["b"].Menu,{"data-purpose":"settings-menu"},u.a.createElement("ul",{className:"ud-unstyled-list",role:"group","aria-label":gettext("Resolution"),"data-purpose":"resolution-menu"},r.map((r=>{let{label:i,displayLabel:o}=r;return u.a.createElement("li",{key:i},u.a.createElement(p["b"].MenuItem,{onClick:()=>e.setResolutionLabel(i),"aria-checked":i===t.label,role:"menuitemradio"},this.renderResolutionLabel(i,o,i===t.label,n)))}))),this.props.children))}},ue.propTypes={controlBarStore:l.a.object.isRequired,videoPlayerStore:l.a.object.isRequired},ue))||ce)||ce);var de=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var he=r.n(de);var me=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var fe=r("./node_modules/@udemy/icons/dist/volume-off.ud-icon");var ge=r.n(fe);var ye=r("./node_modules/@udemy/icons/dist/volume-on.ud-icon");var be=r.n(ye);var ve=r("./node_modules/classnames/index.js");var we=r.n(ve);var Ee,Se,_e;let xe=(Ee=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"isOpen",Se,this);babelHelpers.initializerDefineProperty(this,"isDragging",_e,this);this.volumeStore=e}setOpen(e){this.isOpen=e}setDragging(e){this.isDragging=e}get displayVolume(){const e=this.volumeStore.isMuted?0:this.volumeStore.volume;return Math.round(100*e)}},Se=babelHelpers.applyDecoratedDescriptor(Ee.prototype,"isOpen",[X["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),_e=babelHelpers.applyDecoratedDescriptor(Ee.prototype,"isDragging",[X["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(Ee.prototype,"setOpen",[o["a"],X["e"]],Object.getOwnPropertyDescriptor(Ee.prototype,"setOpen"),Ee.prototype),babelHelpers.applyDecoratedDescriptor(Ee.prototype,"setDragging",[o["a"],X["e"]],Object.getOwnPropertyDescriptor(Ee.prototype,"setDragging"),Ee.prototype),babelHelpers.applyDecoratedDescriptor(Ee.prototype,"displayVolume",[X["g"]],Object.getOwnPropertyDescriptor(Ee.prototype,"displayVolume"),Ee.prototype),Ee);var De=r("./src/udemy/js/video-player/volume/volume-control.less");var Ce,Te,Oe,ke;const Pe={"./volume-control.less":{"slider-focus-wrapper":"volume-control--slider-focus-wrapper--1DEg2",slider:"volume-control--slider--3BRkN","slider-inner":"volume-control--slider-inner--2f-Tu",dragging:"volume-control--dragging--124IT","invisible-unless-focused":"volume-control--invisible-unless-focused--2jCET","ud-sr-only":"volume-control--ud-sr-only--FPMds"}};let Ae=(Ce=Object(a["e"])("videoPlayerStore"),Ce(Te=Object(a["f"])(Te=(Oe=(ke=class e extends u.a.Component{constructor(e){super(e);this.store=new xe(e.videoPlayerStore.volumeStore);this.sliderId=Object(me["a"])("slider");this.lastVolume=0}get volumeStore(){return this.props.videoPlayerStore.volumeStore}openMenu(){this.store.setOpen(true)}closeMenu(){this.store.setOpen(false);this.stopDragging()}toggleMuted(){const{isMuted:e}=this.volumeStore;const t=localStorage.getItem("lastVolume");if(e&&t!==0){this.volumeStore.chooseMuted(false);this.volumeStore.chooseVolume(t)}else{this.volumeStore.toggleMuted()}}onMouseMove(e){if(!this.store.isDragging){return}const t=e.currentTarget.querySelector(`#${this.sliderId}`).getBoundingClientRect();const r=t.height;const n=Math.min(Math.max(0,e.clientY-t.top),r);this.volumeStore.chooseVolume(1-n/r)}stopDragging(){const{displayVolume:e}=this.store;if(e!==0){this.lastVolume=this.volumeStore.volume;localStorage.setItem("lastVolume",this.lastVolume);this.volumeStore.chooseMuted(false)}else{this.lastVolume=this.volumeStore.volume;this.volumeStore.chooseMuted(true)}this.store.setDragging(false)}startDragging(e){this.lastVolume=this.volumeStore.volume;localStorage.setItem("lastVolume",this.lastVolume);this.store.setDragging(true);this.onMouseMove(e);e.preventDefault()}onKeyDown(e){Object(me["b"])((()=>{this.volumeStore.volumeDown(.05);e.preventDefault()}))(e);Object(me["f"])((()=>{this.volumeStore.volumeUp(.05);e.preventDefault()}))(e);Object(me["d"])((()=>{this.toggleMuted();e.preventDefault()}))(e)}get slider(){const{displayVolume:e,isDragging:t,isOpen:r}=this.store;return u.a.createElement("div",{"data-purpose":"volume-control-bar",role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e,"aria-label":gettext("Volume"),tabIndex:0,onKeyDown:this.onKeyDown,onMouseMove:this.onMouseMove,onMouseDown:this.startDragging,className:he()(we()("slider-focus-wrapper",{dragging:t,"invisible-unless-focused":!r}),Pe)},u.a.createElement("div",{id:this.sliderId,className:"volume-control--slider--3BRkN"},u.a.createElement("div",{className:"volume-control--slider-inner--2f-Tu",style:{transform:`scaleY(${e/100})`}})))}get controlButton(){const{isMuted:e}=this.volumeStore;const{displayVolume:t}=this.store;const r=e?gettext("Unmute"):gettext("Mute");let n=be.a;if(t===0||e){n=ge.a}return u.a.createElement(p["a"],{"data-purpose":"volume-control-button",onClick:this.toggleMuted},u.a.createElement(n,{label:r,size:"medium"}))}render(){return u.a.createElement("div",{onMouseEnter:this.openMenu,onMouseLeave:this.closeMenu,onMouseUp:this.stopDragging},this.slider,this.controlButton)}},ke.propTypes={videoPlayerStore:l.a.object.isRequired},ke),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"openMenu",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"openMenu"),Oe.prototype),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"closeMenu",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"closeMenu"),Oe.prototype),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"toggleMuted",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"toggleMuted"),Oe.prototype),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"onMouseMove",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"onMouseMove"),Oe.prototype),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"stopDragging",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"stopDragging"),Oe.prototype),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"startDragging",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"startDragging"),Oe.prototype),babelHelpers.applyDecoratedDescriptor(Oe.prototype,"onKeyDown",[o["a"]],Object.getOwnPropertyDescriptor(Oe.prototype,"onKeyDown"),Oe.prototype),Oe))||Te)||Te);var Ie=r("./node_modules/@udemy/icons/dist/reload.ud-icon");var je=r.n(Ie);var Re,Ne,Le;let Me=(Re=Object(a["e"])("videoPlayerStore"),Re(Ne=(Le=class e extends u.a.Component{render(){const e=ninterpolate("Forward %(seconds)s second","Forward %(seconds)s seconds",Y["j"],{seconds:Y["j"]});const t=interpolate(gettext("Forward %(seconds)ss"),{seconds:Y["j"]},true);return u.a.createElement(p["a"],{"data-purpose":"forward-skip-button",tooltipProps:{a11yRole:"none",children:t},onClick:this.props.videoPlayerStore.seekForward},u.a.createElement(je.a,{label:e,size:"medium"}))}},Le.propTypes={videoPlayerStore:l.a.object.isRequired},Le))||Ne);var qe=r("./node_modules/@udemy/icons/dist/collapse-diagonal.ud-icon");var Ue=r.n(qe);var He=r("./node_modules/@udemy/icons/dist/expand-diagonal.ud-icon");var Fe=r.n(He);var Be=r("./src/udemy/js/video-player/control-bar/fullscreen-toggle.less");var ze=r.n(Be);var Ve,We,Ge,Ke;let $e=(Ve=Object(a["e"])("fullscreenStore"),Ve(We=Object(a["f"])(We=(Ge=(Ke=class e extends u.a.Component{handleToggleFullscreen(e){this.props.fullscreenStore.toggleFullscreen();e.currentTarget.blur()}render(){const{isFullscreen:e}=this.props.fullscreenStore;const t=gettext("Exit fullscreen");const r=gettext("Fullscreen");return u.a.createElement(u.a.Fragment,null,u.a.createElement(p["a"],{className:we()({[ze.a.hidden]:!e}),tooltipProps:{a11yRole:"none",children:t},onClick:this.handleToggleFullscreen},u.a.createElement(Ue.a,{label:t,size:"medium"})),u.a.createElement(p["a"],{className:we()({[ze.a.hidden]:e}),tooltipProps:{a11yRole:"none",children:r,detachFromTarget:true},onClick:this.handleToggleFullscreen},u.a.createElement(Fe.a,{label:r,size:"medium"})))}},Ke.propTypes={fullscreenStore:l.a.shape({toggleFullscreen:l.a.func,isFullscreen:l.a.bool}).isRequired},Ke),babelHelpers.applyDecoratedDescriptor(Ge.prototype,"handleToggleFullscreen",[o["a"]],Object.getOwnPropertyDescriptor(Ge.prototype,"handleToggleFullscreen"),Ge.prototype),Ge))||We)||We);var Xe=r("./node_modules/@udemy/icons/dist/pause.ud-icon");var Ye=r.n(Xe);var Qe=r("./node_modules/@udemy/icons/dist/play-arrow.ud-icon");var Je=r.n(Qe);var Ze,et,tt,rt;let nt=(Ze=Object(a["e"])("getControlBarProps"),Ze(et=(tt=(rt=class e extends u.a.Component{onTogglePlay(){const{isPlaying:e,onPlayPause:t}=this.props.getControlBarProps();t(!e)}render(){const{isPlaying:e}=this.props.getControlBarProps();const t=e?gettext("Pause"):gettext("Play");const r=e?Ye.a:Je.a;return u.a.createElement(p["a"],{"data-purpose":e?"pause-button":"play-button",tooltipProps:{a11yRole:"none",children:t},onClick:this.onTogglePlay},u.a.createElement(r,{label:t,size:"medium"}))}},rt.propTypes={getControlBarProps:l.a.func.isRequired},rt),babelHelpers.applyDecoratedDescriptor(tt.prototype,"onTogglePlay",[o["a"]],Object.getOwnPropertyDescriptor(tt.prototype,"onTogglePlay"),tt.prototype),tt))||et);var it=r("./node_modules/@udemy/react-date-time-components/dist/esm/duration/duration.react-component.js");var ot=r("./src/udemy/js/video-player/control-bar/progress-display.less");var at,st,lt;let ct=(at=Object(a["e"])("progressBarStore"),at(st=Object(a["f"])(st=(lt=class e extends u.a.Component{render(){const e=Object(it["b"])({numSeconds:this.props.progressBarStore.progressBarTime,presentationStyle:it["a"].STYLE.TIMESTAMP,precision:it["a"].PRECISION.MINUTES},{gettext:gettext,interpolate:interpolate});const t=Object(it["b"])({numSeconds:this.props.progressBarStore.videoDuration,presentationStyle:it["a"].STYLE.TIMESTAMP,precision:it["a"].PRECISION.MINUTES},{gettext:gettext,interpolate:interpolate});return u.a.createElement("div",{className:"ud-heading-sm progress-display--progress-display--B20-A"},u.a.createElement("div",{"data-purpose":"progress-display"},u.a.createElement("span",{"data-purpose":"current-time"},e),u.a.createElement("span",null," / "),u.a.createElement("span",{"data-purpose":"duration"},t)),u.a.createElement("div",{"aria-hidden":true,className:"progress-display--progress-display-spacer--oww7U"},u.a.createElement("span",null,e.replace(/\d/g,"4")),u.a.createElement("span",null," / "),u.a.createElement("span",null,t.replace(/\d/g,"4"))))}},lt.propTypes={progressBarStore:l.a.object.isRequired},lt))||st)||st);var ut=r("./node_modules/@udemy/icons/dist/rewind.ud-icon");var pt=r.n(ut);var dt,ht,mt;let ft=(dt=Object(a["e"])("videoPlayerStore"),dt(ht=(mt=class e extends u.a.Component{render(){const e=ninterpolate("Rewind %(seconds)s second","Rewind %(seconds)s seconds",Y["j"],{seconds:Y["j"]});const t=interpolate(gettext("Rewind %(seconds)ss"),{seconds:Y["j"]},true);return u.a.createElement(p["a"],{"data-purpose":"rewind-skip-button",tooltipProps:{a11yRole:"none",children:t},onClick:this.props.videoPlayerStore.seekBack},u.a.createElement(pt.a,{label:e,size:"medium"}))}},mt.propTypes={videoPlayerStore:l.a.object.isRequired},mt))||ht);var gt=r("./src/udemy/js/video-player/control-bar/control-bar.less");const yt=()=>u.a.createElement("div",{className:"control-bar--spacer--32VvX"});var bt=yt;r.d(t,"a",(function(){return $}));r.d(t,"e",(function(){return ne}));r.d(t,"h",(function(){return pe}));r.d(t,"j",(function(){return Ae}));r.d(t,"b",(function(){return Me}));r.d(t,"c",(function(){return $e}));r.d(t,"d",(function(){return nt}));r.d(t,"f",(function(){return ct}));r.d(t,"g",(function(){return ft}));r.d(t,"i",(function(){return bt}))},"./src/udemy/js/video-player/control-bar/fullscreen-toggle.less":function(e,t,r){e.exports={hidden:"fullscreen-toggle--hidden--3zC8a"}},"./src/udemy/js/video-player/control-bar/progress-display.less":function(e,t,r){e.exports={"progress-display":"progress-display--progress-display--B20-A","progress-display-spacer":"progress-display--progress-display-spacer--oww7U"}},"./src/udemy/js/video-player/control-bar/video-control-bar-dropdown.less":function(e,t,r){e.exports={"tooltip-content":"video-control-bar-dropdown--tooltip-content--1mV-Z","current-value":"video-control-bar-dropdown--current-value--18O0E","prev-icon":"video-control-bar-dropdown--prev-icon--3yd9N","next-icon":"video-control-bar-dropdown--next-icon--3crbc"}},"./src/udemy/js/video-player/control-bar/video-control-bar-dropdown.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return T}));r.d(t,"b",(function(){return O}));var n=r("./node_modules/@udemy/react-popup-components/dist/esm/basic-popper/basic-popper.react-component.js");var i=r("./node_modules/@udemy/react-popup-components/dist/esm/popover/popover.react-component.js");var o=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var a=r("./node_modules/@udemy/styles/dist/esm/tokens/generated/index.js");var s=r("./node_modules/autobind-decorator/lib/esm/index.js");var l=r("./node_modules/classnames/index.js");var c=r.n(l);var u=r("./node_modules/mobx-react/dist/mobx-react.module.js");var p=r("./node_modules/prop-types/index.js");var d=r.n(p);var h=r("./node_modules/react/index.js");var m=r.n(h);var f=r("./src/udemy/js/course-taking/curriculum/controls/control-bar-dropdown.react-component.js");var g=r("./src/udemy/js/video-player/control-bar/video-control-bar-dropdown.less");var y=r.n(g);var b,v,w,E,S,_,x;function D(e){let{className:t,...r}=e;r.className=c()(t,y.a["tooltip-content"]);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++){o[a-1]=arguments[a]}return Object(n["e"])(r,...o)}function C(e){let t=e.tooltipProps;if(t){t={...t,renderContent:D}}return{darkMode:true,size:"small",...e,tooltipProps:t}}const T=e=>m.a.createElement(f["a"],C(e));let O=(S=Object(u["e"])("videoPlayerStore"),S(_=(x=class e extends m.a.Component{render(){const{videoPlayerStore:e,...t}=this.props;return m.a.createElement(f["b"],Object.assign({darkMode:true,menuMaxHeight:`${Object(o["c"])(.7*e.playerHeight)}rem`,menuOffset:a["a"]["space-lg"]},t))}},x.propTypes={videoPlayerStore:d.a.object.isRequired},x))||_);O.Button=e=>m.a.createElement(f["b"].Button,C(e));O.Menu=f["b"].Menu;O.MenuItem=f["b"].MenuItem;let k=(b=Object(u["e"])("$$udControlBarDropdown"),b(v=(w=(E=class e extends m.a.Component{getScrollContainers(){return[document.getElementById(this.props.$$udControlBarDropdown.menuId)]}render(){const{$$udControlBarDropdown:e,...t}=this.props;return m.a.createElement(i["a"],Object.assign({detachFromTarget:true,shouldCloseOtherPoppers:false,getScrollContainers:this.getScrollContainers},t))}},E.propTypes={$$udControlBarDropdown:d.a.object.isRequired},E),babelHelpers.applyDecoratedDescriptor(w.prototype,"getScrollContainers",[s["a"]],Object.getOwnPropertyDescriptor(w.prototype,"getScrollContainers"),w.prototype),w))||v);O.Popover=k},"./src/udemy/js/video-player/error-display.less":function(e,t,r){e.exports={"dialog-container":"error-display--dialog-container--bQaMW",dialog:"error-display--dialog--2kY16","scroll-wrapper":"error-display--scroll-wrapper---HCUB","title-spacer":"error-display--title-spacer--1Vejk",title:"error-display--title--10JjH","close-button":"error-display--close-button--2rLVi"}},"./src/udemy/js/video-player/error-display.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));r.d(t,"b",(function(){return D}));r.d(t,"c",(function(){return C}));r.d(t,"d",(function(){return T}));var n=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var i=r("./node_modules/@udemy/icons/dist/close.ud-icon");var o=r.n(i);var a=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var s=r("./node_modules/@udemy/react-core-components/dist/esm/icon-button/icon-button.react-component.js");var l=r("./node_modules/@udemy/react-structure-components/dist/esm/footer-buttons/footer-buttons.react-component.js");var c=r("./node_modules/prop-types/index.js");var u=r.n(c);var p=r("./node_modules/react/index.js");var d=r.n(p);var h=r("./node_modules/react-dom/index.js");var m=r.n(h);var f=r("./src/udemy/js/utils/escape/safely-set-inner-html.js");var g=r("./src/udemy/js/utils/get-config-data.js");var y=r("./src/udemy/js/utils/ud-link.js");var b=r("./src/udemy/js/video-player/error-display.less");var v=r.n(b);const w=Object(g["a"])();const E=y["a"].toSupportLink("system_requirements",w.brand.has_organization);const S=y["a"].toSupportLink("video_audio_issues_troubleshooting",w.brand.has_organization);const _=y["a"].toSupportContact();const x=[d.a.createElement("p",{key:"apology"},gettext("We tried several times to play your video but there was an unforeseen error. "+"We have notified our engineers.")),d.a.createElement("p",Object.assign({key:"systemcheck"},Object(f["a"])({descriptionOfCaller:"error-display:system-check-link",html:interpolate(gettext('To check your system configuration, please visit our <a href="%(link)s" target="_blank">system check page</a>.'),{link:y["a"].toSupportSystemCheck()},true)}))),d.a.createElement("p",{key:"codec"},gettext("For some devices, a basic codec pack may need to be added to view this content.")),d.a.createElement("p",Object.assign({key:"tryagain"},Object(f["a"])({descriptionOfCaller:"error-display:support-link",html:interpolate(gettext("Please try again in a few minutes or <a %(hyperlink)s>contact support</a>."),{hyperlink:`href="${S}" target="_blank"`},true)})))];const D=[d.a.createElement("p",{key:"widevine-error-message"},d.a.createElement("span",{key:"widevine-error-message-opening"},gettext("There was a problem with your system settings. ")),d.a.createElement("span",Object.assign({key:"widevine-system-requirements"},Object(f["a"])({descriptionOfCaller:"error-display:system-requirements-link",html:interpolate(gettext("To check your settings, visit our <a %(hyperlink)s>System Requirements</a> "),{hyperlink:`href="${E}" target="_blank"`},true)}))),d.a.createElement("span",Object.assign({key:"widevine-trouble-shooting"},Object(f["a"])({descriptionOfCaller:"error-display:trouble-shooting-link",html:interpolate(gettext("and <a %(hyperlink)s>How to Troubleshoot Audio & Video Issues</a> pages. "),{hyperlink:`href="${S}" target="_blank"`},true)}))),d.a.createElement("span",{key:"widevine-error-message-closing"},gettext("If the problem continues, contact our support team.")))];const C=[d.a.createElement(a["a"],{"data-purpose":"widevine-error-message-contact-support-button",key:"widevine-error-message-contact-support-button",componentClass:"a",href:`${_}`},gettext("Contact support"))];class T extends d.a.Component{constructor(){super(...arguments);this.labelledById=Object(n["a"])("error-display")}get footer(){if(!this.props.errorFooter){return null}const e=d.a.createElement(a["a"],{"data-purpose":"error-display-dismiss-error-button",udStyle:"ghost",onClick:this.props.store.hideError},gettext("Dismiss"));return d.a.createElement(l["a"],null,e,this.props.errorFooter)}render(){const e=d.a.createElement("div",{className:"error-display--dialog-container--bQaMW"},d.a.createElement("div",{className:"error-display--scroll-wrapper---HCUB"},d.a.createElement("div",{role:"dialog",tabIndex:"-1","aria-labelledby":this.labelledById,className:"error-display--dialog--2kY16"},d.a.createElement("div",{className:"error-display--title-spacer--1Vejk"},d.a.createElement("h2",{id:this.labelledById,className:"ud-heading-lg error-display--title--10JjH"},gettext("Video error"))),this.props.errorBody,this.footer,d.a.createElement(s["a"],{onClick:this.props.store.hideError,udStyle:"ghost",size:"medium",className:"error-display--close-button--2rLVi","data-purpose":"close-popup"},d.a.createElement(o.a,{color:"neutral",label:gettext("Close")})))));return m.a.createPortal(e,this.props.player.el())}}T.propTypes={player:u.a.object.isRequired,store:u.a.object.isRequired,errorBody:u.a.node,errorFooter:u.a.node};T.defaultProps={errorBody:x,errorFooter:null}},"./src/udemy/js/video-player/feedback/video-feedback.less":function(e,t,r){e.exports={container:"video-feedback--container--248iM",circle:"video-feedback--circle--17qGN","pop-in":"video-feedback--pop-in--3IUAM","play-icon":"video-feedback--play-icon--2CALH"}},"./src/udemy/js/video-player/feedback/video-feedback.react-component.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r.d(t,"b",(function(){return u}));var n=r("./node_modules/prop-types/index.js");var i=r.n(n);var o=r("./node_modules/react/index.js");var a=r.n(o);var s=r("./src/udemy/js/video-player/feedback/video-feedback.less");var l=r.n(s);const c=300;class u extends a.a.Component{render(){const{icon:e}=this.props;return a.a.createElement("div",{className:"video-feedback--container--248iM"},a.a.createElement("div",{className:"video-feedback--circle--17qGN"},a.a.createElement(e,{label:false,color:"inherit",size:"xxlarge"})))}}u.propTypes={icon:i.a.elementType.isRequired}},"./src/udemy/js/video-player/playback-rate/playback-rate.less":function(e,t,r){e.exports={"playback-rate":"playback-rate--playback-rate--1XOKO",trigger:"playback-rate--trigger--IzHKn","trigger-text":"playback-rate--trigger-text--3DafK",menu:"playback-rate--menu--1Nk3X"}},"./src/udemy/js/video-player/progress-bar/progress-bar.less":function(e,t,r){e.exports={"progress-bar-control":"progress-bar--progress-bar-control--VTAGF",slider:"progress-bar--slider--bmtrg","progress-holder":"progress-bar--progress-holder--1H-vy",hover:"progress-bar--hover--5xAeL","load-progress":"progress-bar--load-progress--2m7ts","play-progress":"progress-bar--play-progress--qERtx"}},"./src/udemy/js/video-player/progress-bar/progress-bar.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n=r("./node_modules/@udemy/react-date-time-components/dist/esm/duration/duration.react-component.js");var i=r("./node_modules/autobind-decorator/lib/esm/index.js");var o=r("./node_modules/mobx/lib/mobx.module.js");var a,s,l,c,u,p,d,h,m,f,g,y,b,v,w,E,S;let _=(a=o["t"].ref,s=o["t"].ref,l=o["t"].ref,c=class e{constructor(){babelHelpers.initializerDefineProperty(this,"player",u,this);babelHelpers.initializerDefineProperty(this,"playerStore",p,this);babelHelpers.initializerDefineProperty(this,"ref",d,this);babelHelpers.initializerDefineProperty(this,"progressHolderRef",h,this);this.popoverAreaRef=void 0;babelHelpers.initializerDefineProperty(this,"isDragging",m,this);babelHelpers.initializerDefineProperty(this,"videoCurrentTime",f,this);babelHelpers.initializerDefineProperty(this,"thumbnailSprite",g,this);babelHelpers.initializerDefineProperty(this,"isHovering",y,this);babelHelpers.initializerDefineProperty(this,"moveEvent",b,this);babelHelpers.initializerDefineProperty(this,"_buffered",v,this);babelHelpers.initializerDefineProperty(this,"_bufferedPercent",w,this);babelHelpers.initializerDefineProperty(this,"progressBarTime",E,this);babelHelpers.initializerDefineProperty(this,"currentMouseTime",S,this)}setMoveEvent(e){this.moveEvent=e}get progressInfo(){const e=Object(n["b"])({numSeconds:this.progressBarTime,presentationStyle:"timestamp"},{gettext:gettext,interpolate:interpolate});const t=Object(n["b"])({numSeconds:this.videoDuration,presentationStyle:"timestamp"},{gettext:gettext,interpolate:interpolate});return interpolate(pgettext("current time position in video player. eg.: 03:52 of 06:00","%s of %s"),[e,t])}get currentTimePercentValue(){return(100/this.videoDuration*this.progressBarTime).toFixed(2)}get currentTimePercent(){return`${this.currentTimePercentValue}%`}get buffers(){const e=this._buffered;const t=e.length;return[...Array(t)].map(((t,r)=>({start:e.start(r),end:e.end(r)})))}get bufferedPercent(){return`${Math.floor(this._bufferedPercent*100)}%`}get videoDuration(){const e=this.player&&this.player.duration();return e||0}setHovering(e){this.isHovering=e}setBuffered(){this._buffered=this.player.buffered?this.player.buffered():[]}setBufferedPercent(){this._bufferedPercent=this.player.bufferedPercent?this.player.bufferedPercent():0}attachPlayer(e){this.player=e;this.player.on("progress",this.onProgress);this.player.on("timeupdate",Object(o["e"])((()=>{this.videoCurrentTime=this.player.currentTime()})));this.onProgress()}attachPlayerStore(e){this.playerStore=e}onProgress(){this.setBuffered();this.setBufferedPercent()}setDragging(e){this.isDragging=e}setProgressBarTime(e){this.progressBarTime=e}setThumbnailSprite(e){this.thumbnailSprite=e}setRef(e){this.ref=e}setProgressHolderRef(e){this.progressHolderRef=e}setPopoverAreaRef(e){this.popoverAreaRef=e}setCurrentMouseTime(e){this.currentMouseTime=e}seekTo(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.setProgressBarTime(e);if(t){clearTimeout(this.playDebounced);this.playDebounced=setTimeout((()=>{if(this&&this.player){this.player.currentTime(e)}}),35)}}remoteTextTracks(){return this.player.remoteTextTracks?this.player.remoteTextTracks():[]}seekForward(){if(this.playerStore){this.playerStore.seekForward()}}seekBack(){if(this.playerStore){this.playerStore.seekBack()}}},u=babelHelpers.applyDecoratedDescriptor(c.prototype,"player",[a],{configurable:true,enumerable:true,writable:true,initializer:null}),p=babelHelpers.applyDecoratedDescriptor(c.prototype,"playerStore",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),d=babelHelpers.applyDecoratedDescriptor(c.prototype,"ref",[s],{configurable:true,enumerable:true,writable:true,initializer:null}),h=babelHelpers.applyDecoratedDescriptor(c.prototype,"progressHolderRef",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),m=babelHelpers.applyDecoratedDescriptor(c.prototype,"isDragging",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),f=babelHelpers.applyDecoratedDescriptor(c.prototype,"videoCurrentTime",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),g=babelHelpers.applyDecoratedDescriptor(c.prototype,"thumbnailSprite",[l],{configurable:true,enumerable:true,writable:true,initializer:null}),y=babelHelpers.applyDecoratedDescriptor(c.prototype,"isHovering",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),b=babelHelpers.applyDecoratedDescriptor(c.prototype,"moveEvent",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),v=babelHelpers.applyDecoratedDescriptor(c.prototype,"_buffered",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return[]}}),w=babelHelpers.applyDecoratedDescriptor(c.prototype,"_bufferedPercent",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),E=babelHelpers.applyDecoratedDescriptor(c.prototype,"progressBarTime",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),S=babelHelpers.applyDecoratedDescriptor(c.prototype,"currentMouseTime",[o["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(c.prototype,"setMoveEvent",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setMoveEvent"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"progressInfo",[o["g"]],Object.getOwnPropertyDescriptor(c.prototype,"progressInfo"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"currentTimePercentValue",[o["g"]],Object.getOwnPropertyDescriptor(c.prototype,"currentTimePercentValue"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"currentTimePercent",[o["g"]],Object.getOwnPropertyDescriptor(c.prototype,"currentTimePercent"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"bufferedPercent",[o["g"]],Object.getOwnPropertyDescriptor(c.prototype,"bufferedPercent"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setHovering",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setHovering"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setBuffered",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setBuffered"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setBufferedPercent",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setBufferedPercent"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"attachPlayer",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"attachPlayer"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"attachPlayerStore",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"attachPlayerStore"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"onProgress",[i["a"]],Object.getOwnPropertyDescriptor(c.prototype,"onProgress"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setDragging",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setDragging"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setProgressBarTime",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setProgressBarTime"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setThumbnailSprite",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setThumbnailSprite"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setRef",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setRef"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setProgressHolderRef",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setProgressHolderRef"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setPopoverAreaRef",[i["a"],o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setPopoverAreaRef"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"setCurrentMouseTime",[o["e"]],Object.getOwnPropertyDescriptor(c.prototype,"setCurrentMouseTime"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"seekForward",[i["a"]],Object.getOwnPropertyDescriptor(c.prototype,"seekForward"),c.prototype),babelHelpers.applyDecoratedDescriptor(c.prototype,"seekBack",[i["a"]],Object.getOwnPropertyDescriptor(c.prototype,"seekBack"),c.prototype),c)},"./src/udemy/js/video-player/sneak-peek/sneak-peek.less":function(e,t,r){e.exports={"sneak-peek-holder":"sneak-peek--sneak-peek-holder--20jTn","sneak-peek":"sneak-peek--sneak-peek--2Kx93"}},"./src/udemy/js/video-player/user-activity.less":function(e,t,r){e.exports={"user-inactive":"user-activity--user-inactive--2uBeO","hide-when-user-inactive":"user-activity--hide-when-user-inactive--pDPGx"}},"./src/udemy/js/video-player/user-activity.mobx-store.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r("./node_modules/autobind-decorator/lib/esm/index.js");var i=r("./node_modules/mobx/lib/mobx.module.js");var o=r("./src/udemy/js/video-player/constants.js");var a=r("./src/udemy/js/video-player/user-activity.less");var s=r.n(a);var l,c,u;let p=(l=class e{constructor(){babelHelpers.initializerDefineProperty(this,"isUserActive",c,this);babelHelpers.initializerDefineProperty(this,"isInitialActivationComplete",u,this);this.activityOverride=false}setControlBarStore(e){this.controlBarStore=e}setActive(){this.isUserActive=true}setInactive(){if(this.activityOverride||this.controlBarStore&&this.controlBarStore.activeMenu!==o["b"].NONE){return}this.isUserActive=false}setActiveOn(){this.activityOverride=true;this.setActive()}unsetActiveOn(){this.activityOverride=false}setupPlayerListeners(e){e.on("useractive",this.setActive);e.on("userinactive",this.setInactive);e.listenForUserActivity_();setTimeout(Object(i["e"])((()=>{this.isInitialActivationComplete=true})),o["d"]+500)}addActiveOnHover(e){if(e){e.addEventListener("mouseover",this.setActiveOn);e.addEventListener("mouseout",this.unsetActiveOn)}}addHideOnInactive(e){if(e){e.classList.add(s.a["hide-when-user-inactive"])}}},c=babelHelpers.applyDecoratedDescriptor(l.prototype,"isUserActive",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),u=babelHelpers.applyDecoratedDescriptor(l.prototype,"isInitialActivationComplete",[i["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(l.prototype,"setActive",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"setActive"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setInactive",[n["a"],i["e"]],Object.getOwnPropertyDescriptor(l.prototype,"setInactive"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"setActiveOn",[n["a"]],Object.getOwnPropertyDescriptor(l.prototype,"setActiveOn"),l.prototype),babelHelpers.applyDecoratedDescriptor(l.prototype,"unsetActiveOn",[n["a"]],Object.getOwnPropertyDescriptor(l.prototype,"unsetActiveOn"),l.prototype),l)},"./src/udemy/js/video-player/utils.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return c}));r.d(t,"a",(function(){return u}));var n=r("./src/udemy/js/utils/composed-path.js");var i=r.n(n);var o=r("./node_modules/ua-parser-js/src/ua-parser.js");var a=r.n(o);const s=new a.a;function l(e){if(!e){return}const t=e.match(/^[0-9]+/g);if(t){return t[0]}}const c={browser:s.getBrowser(),os:s.getOS(),device:s.getDevice()};const u=(e,t)=>{const r=e.indexOf("#");if(r===-1){return{src:e,x:0,y:0,w:0,h:0}}const n=e.substring(0,r);const i=e.substring(r+1);if(i.substring(0,5)!=="xywh="){return{src:t+n,x:0,y:0,w:0,h:0}}const o=i.substring(5).split(",");return{src:t+n,x:+o[0],y:+o[1],w:+o[2],h:+o[3]}};c.browser.majorVersion=l(c.browser.version);c.os.majorVersion=l(c.os.version);c.isMobile=c.device.type==="mobile";(()=>{if(c.os.name==="Mac OS"&&window.navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1){c.os.name="iOS"}})()},"./src/udemy/js/video-player/video-player.less":function(e,t,r){e.exports={container:"video-player--container--YDQRW",center:"video-player--center--2vS3g","play-button":"video-player--play-button--3r0KH","play-button-icon":"video-player--play-button-icon--19qNU","video-wrapper":"video-player--video-wrapper--1L212","video-player":"video-player--video-player--1sfof"}},"./src/udemy/js/video-player/video-player.react-component.js":function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/@udemy/icons/dist/play-arrow.ud-icon");var i=r.n(n);var o=r("./node_modules/@udemy/react-core-components/dist/esm/button/button.react-component.js");var a=r("./node_modules/@udemy/react-reveal-components/dist/esm/loader/loader.react-component.js");var s=r("./node_modules/autobind-decorator/lib/esm/index.js");var l=r("./node_modules/classnames/index.js");var c=r.n(l);var u=r("./node_modules/mobx/lib/mobx.module.js");var p=r("./node_modules/mobx-react/dist/mobx-react.module.js");var d=r("./node_modules/prop-types/index.js");var h=r.n(d);var m=r("./node_modules/react/index.js");var f=r.n(m);var g=r("./node_modules/react-measure/lib/react-measure.js");var y=r.n(g);var b=r("./src/udemy/js/utils/autopilot.js");var v=r("./src/udemy/js/utils/fullscreen.tsx");var w=r("./src/udemy/js/utils/get-request-data.js");var E=r("./src/udemy/js/utils/hotkeys.js");var S=r("./src/udemy/js/utils/merge-objects.js");var _=r("./src/udemy/js/utils/noop.js");var x=r("./src/udemy/js/utils/ud-api-stat.js");var D=r("./src/udemy/js/utils/ud-me.js");var C=r("./src/udemy/js/video-player/videojs-setup/pre.js");var T=r("./node_modules/video.js/dist/video.es.js");var O=r("./node_modules/videojs-contrib-eme/dist/videojs-contrib-eme.es.js");var k=r("./node_modules/videojs-contrib-quality-levels/dist/videojs-contrib-quality-levels.es.js");var P=r("./node_modules/videojs-mux/dist/videojs-mux.js");var A=r("./src/udemy/js/utils/ud-link.js");var I=r("./node_modules/hls.js/dist/hls.light.js");var j=r.n(I);var R=r("./node_modules/js-cookie/src/js.cookie.js");var N=r.n(R);var L=r("./src/udemy/js/video-player/constants.js");const M=0;const q="hlsJsStartLevel";const U=-1;var H;let F=(H=class e{constructor(e,t,r){this._tech=t;this._mediaElement=t.el();this.player=this.createVideoJsInstance(r.playerId);this.player.hls=this.createHlsJsInstance(this.player,this._mediaElement,e);this.player.on("dispose",this.dispose);this._qualityLevelEnabledStates={}}createVideoJsInstance(e){return Object(T["default"])(e)}createHlsJsInstance(e,t,r){const n=new j.a({startLevel:this.getStartLevel()});n.on(j.a.Events.LEVEL_SWITCHED,((t,r)=>{this.saveCurrentLevel(r.level);e.trigger("hlslevelswitch",{resolution:n.levels[r.level].height})}));n.on(j.a.Events.FRAG_LOADED,((t,r)=>{e.trigger("hlsfragloaded",r.stats)}));n.on(j.a.Events.MANIFEST_PARSED,((t,r)=>{this.addQualityLevels(r.levels);e.trigger("loadedmetadata")}));n.on(j.a.Events.ERROR,this.onError);n.attachMedia(t);n.loadSource(r.src);return n}getStartLevel(){const e=N.a.get(q);return e!==undefined?e:M}saveCurrentLevel(e){N.a.set(q,e)}updateQualityLevel(e){const t=this.player.qualityLevels().selectedIndex;if(t!==e){this.player.qualityLevels().selectedIndex_=e;this.player.hls.currentLevel=e;this.player.trigger("seeking");this.player.hls.once(j.a.Events.FRAG_LOADED,(()=>{this.player.trigger("seeked")}))}}qualityLevelEnabledChange(){const e=Array.prototype.filter.call(this.player.qualityLevels(),(e=>e.enabled));if(e.length===0){return}const t=e.length===this.player.qualityLevels().length;if(t){this.updateQualityLevel(U);return}const r=e.sort(((e,t)=>e.height===t.height?t.bitrate-e.bitrate:t.height-e.height));const n=r[0];this.updateQualityLevel(n.id)}qualityLevelEnabled(e,t){if(typeof e==="boolean"){this._qualityLevelEnabledStates[t]=e;this.qualityLevelEnabledChange();return}return this._qualityLevelEnabledStates[t]}addQualityLevels(e){e.forEach(((e,t)=>{this.player.qualityLevels().addQualityLevel({id:t,height:e.height,width:e.width,bandwidth:e.bitrate,enabled:e=>this.qualityLevelEnabled(e,t)})}))}dispose(){this.player.hls.destroy()}onError(e,t){const r=this.buildPlayerError(t);if(!r.fatal){return}this.dispose();this.player.error=()=>r;this.player.trigger("error")}buildPlayerError(e){const t={message:`hlsjs ${e.type}: ${e.details}`,code:null,fatal:e.fatal,hlsjs:true};switch(e.type){case j.a.ErrorTypes.NETWORK_ERROR:{var r;if(((r=e.response)===null||r===void 0?void 0:r.code)===403){t.code=L["m"].CANNOT_ACCESS_MEDIA_SOURCE}else{t.code=MediaError.MEDIA_ERR_NETWORK}break}case j.a.ErrorTypes.MEDIA_ERROR:{t.code=MediaError.MEDIA_ERR_DECODE;break}}return t}},babelHelpers.applyDecoratedDescriptor(H.prototype,"dispose",[s["a"]],Object.getOwnPropertyDescriptor(H.prototype,"dispose"),H.prototype),babelHelpers.applyDecoratedDescriptor(H.prototype,"onError",[s["a"]],Object.getOwnPropertyDescriptor(H.prototype,"onError"),H.prototype),H);const B=function(e){return typeof e.keySystems!=="undefined"};T["default"].HlsJsSourceHandler=function(){return{name:"udemy-hlsjs",canHandleSource(e){const t=/\.m3u8/i;if(B(e)){return""}if(T["default"].HlsJsSourceHandler.canPlayType(e.type)){return"probably"}if(t.test(e.src)){return"maybe"}return""},handleSource(e,t,r){return new F(e,t,r)},canPlayType(e){return T["default"].HlsJsSourceHandler.canPlayType(e)}}};T["default"].HlsJsSourceHandler.canPlayType=function(e){const t=/^application\/x-mpegURL|application\/vnd\.apple\.mpegurl$/i;if(t.test(e)){return"probably"}return""};if(j.a.isSupported()){T["default"].getTech("Html5").registerSourceHandler(T["default"].HlsJsSourceHandler(),0)}var z=r("./src/udemy/js/video-player/utils.js");function V(e){if(!e){return}if(z["b"].os.name==="iOS"){const t=e.el().querySelector("video");e.on("ended",(()=>{if(t.webkitDisplayingFullscreen){t.webkitExitFullscreen()}}))}}function W(e){if(!e){return}const t=e=>{if(e&&typeof e.then==="function"){e.then(null,_["a"])}};e.play=function(){const e=this.options_.Promise||window.Promise;if(e){return new e((e=>{this.play_((r=>{t(r);e()}))}))}return this.play_()}}function G(e){if(!e||!e.currentTime){return}const t=e.currentTime;e.currentTime=function(e){if(typeof t==="function"){if(typeof e==="undefined"){return t.call(this)}t.call(this,e===0?.1:e)}}}function K(e){if(!e){return}let t,r,n,i,o;e.forcePlay=function(){if(t){return t}o=0;t=new Promise((e=>{n=this.muted();i=this.paused();this.muted(true);this.play();r=setInterval((()=>{try{if(this.readyState()>=4){e();this.trigger("canplay");this.trigger("canplaythrough");throw new Error}if(this.paused()){this.play();this.currentTime(this.currentTime())}o+=1;if(o>=100){e();throw new Error}}catch(e){clearInterval(r);try{i&&this.pause();this.muted(n)}catch(e){}}}),100)}));return t}}const $=function(){const e=this;W(e);G(e);V(e);K(e)};T["default"].registerPlugin("udemypatches",$);class X{constructor(){this.highest=0;this.lastTotal=0}add(e,t){const r=(e-this.lastTotal)/t;if(r>this.highest){this.highest=r}this.lastTotal=e}}const Y=function e(){let t=Date.now();let r=0;const n=this;const i={bytesSecHighestHLSBandwidth:new X,bytesSecHighestDecoder:new X,millisSecHighestBandwidth:new X};n.setInterval(o,1e3);n.on("hlsfragloaded",((e,t)=>{r+=t.total}));function o(){const e=Date.now();const o=(e-t)/1e3;t=e;i.bytesSecHighestDecoder.add(a(),o);const s=n.duration();if(s){i.millisSecHighestBandwidth.add(n.bufferedPercent()*s*1e3,o)}if(r){i.bytesSecHighestHLSBandwidth.add(r,o)}n.trigger("onbandwidthwatermarkupdate",{bandwidthWatermarks:i})}function a(){if(n.tech_){const e=n.tech_.el();return e.webkitAudioDecodedByteCount+e.webkitVideoDecodedByteCount}}};T["default"].registerPlugin("bandwidthWatermark",Y);var Q=r("./src/udemy/js/video-player/videojs-setup/drm.js");const J={videojs:T["default"]};const Z=async function(e,t){await Object(Q["c"])(T["default"]);t={...t,"vtt.js":A["a"].toJs("node_modules/videojs-vtt.js/dist/vtt.min.js")};const r=J.videojs(e,t);r.videojsVersion=T["default"].VERSION;r.eme();r.udemypatches();return r};var ee=r("./src/udemy/js/utils/get-config-data.js");var te=r("./src/udemy/js/utils/get-experiment-data.js");function re(e){const t=new URL(e);if(/(\.udemy\.(com|cn)|\.dev-ud\.com)$/.test(t.hostname)){return t.searchParams.get("provider")||"none"}if(/^h1010\./.test(t.hostname)){return"media_package"}if(/^\w+-a\./.test(t.hostname)){return"verizon"}if(/^\w+-b\./.test(t.hostname)){return"cdn77"}if(/^\w+-c\./.test(t.hostname)){return"cloudfront"}return"none"}function ne(e){let t=null;if(e&&Object(te["c"])("sw","useEncryptedVideos",false)){t="encrypted_videos"}return t}function ie(e){return Object.keys(e).reduce(((t,r)=>{const n=e[r].highest;if(n){t[r]=Math.round(n)}return t}),{})}function oe(e){const t={isAdaptive:e.isAdaptive};if(!t.isAdaptive){return t}if(e._videoPlayer.currentType()===L["f"]){t.resolution=e.hlsResolution.toString()}return t}function ae(e){return{width:e.clientWidth,height:e.clientHeight}}function se(e){const t=Object.assign({assetId:e.assetId,playerSessionId:e.sessionId,cdnProvider:re(e._videoPlayer.currentSrc()),sourceType:e._videoPlayer.currentType(),resolution:e.activeResolution.label,currentTime:e._videoPlayer.currentTime(),isEncrypted:!!e.mediaLicenseToken,playerVersion:`videojs ${e._videoPlayer.videojsVersion}`},oe(e));if(e.videoElement){t.videoElement=ae(e.videoElement)}if(Object.keys(e.bandwidthWatermarks).length>0){t.bandwidthWatermarks=ie(e.bandwidthWatermarks)}const r=ne(t.isEncrypted);if(r){t.experimentName=r}return t}function le(e){if(!e.isAdaptive||!(e._videoPlayer.currentType()===L["f"])){return e.activeResolution.label}return e.hlsResolution&&e.hlsResolution.toString()}function ce(e){if(e){const t=new URL(e);return t.pathname}}function ue(e,t){return{assetId:e.assetId,userModulo:D["a"].id%100,retries:e.numErrors,errorCode:t.code,errorMessage:t.message,responseStatus:t.responseStatus,responseURL:t.responseURL,responsePath:ce(t.responseURL),responseContentType:t.responseContentType,resolution:le(e),isAdaptive:e.isAdaptive,isEncrypted:!!e.mediaLicenseToken,trackingTag:e.trackingTag,readyState:e._videoPlayer.readyState(),networkState:e._videoPlayer.networkState(),cdn:re(e._videoPlayer.currentSrc()),srcType:e._videoPlayer.currentType()}}const pe="8iioa2q7br3ci17v962kflt1c";const de="vfq2nsli1v76fglgdl9puq0cd";const he=["x015YltzinekiQmcKsWrsJ92Q==","x01k4HvrX4OniExuJIt2rtJ-g=="];const me=Object(ee["a"])();function fe(e,t,r){let n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!e){return{}}const{assetId:i,courseId:o,duration:a,playerName:s,isPaid:l}=e;const c=me.brand.organization&&me.brand.organization.encrypted_id||0;const u=t!==null&&t!==void 0&&t.length?re(t[0].src):undefined;const p=me.env==="PROD";const d={plugins:{mux:{respectDoNotTrack:false,data:{env_key:p?de:pe,player_name:s,player_init_time:Date.now(),viewer_user_id:D["a"].encrypted_id||0,video_id:i,video_cdn:u,video_title:i,video_duration:a,video_series:o,video_stream_type:l?"paid":"free",video_encoding_variant:r?"encrypted":"plain",sub_property_id:c}}}};const h=c||Math.random()<=.33;if(p&&h||n){return d}return{}}var ge=r("./node_modules/@udemy/styles/dist/esm/tokens/index.js");var ye=r("./node_modules/store/dist/store.legacy.js");var be=r.n(ye);var ve=r("./src/udemy/js/video-player/captions/constants.js");var we,Ee,Se,_e,xe,De;let Ce=(we=class e{constructor(e,t,r){babelHelpers.initializerDefineProperty(this,"activeFontSize",Ee,this);babelHelpers.initializerDefineProperty(this,"activeOpacity",Se,this);babelHelpers.initializerDefineProperty(this,"isWellEnabled",_e,this);babelHelpers.initializerDefineProperty(this,"menuPage",xe,this);babelHelpers.initializerDefineProperty(this,"cuePosition",De,this);this.controlBarStore=e;this.captionsStore=t;this.videoPlayerStore=r;this.userHasFontSizePreference=false;this.userHasOpacityPreference=false;this.userHasWellPreference=false;this.loadUserPreferences();Object(u["v"])((()=>[this.activeFontSize,this.activeOpacity,this.isWellEnabled]),this.updateUserPreferences)}attachPlayer(e){this.player=e;e.on("timeupdate",this.calculateCuePosition)}toggleMenu(e){if(e){this.controlBarStore.setMenuOpen(L["b"].CAPTIONS)}else{this.setSubmenu(ve["g"].TRACKS);this.controlBarStore.setMenuClosed()}}get isMenuOpen(){return this.controlBarStore.activeMenu===L["b"].CAPTIONS}setSubmenu(e){this.menuPage=e}selectFontSize(e){this.userHasFontSizePreference=true;this.activeFontSize=e}selectTrackOpacity(e){this.userHasOpacityPreference=true;this.activeOpacity=e}toggleWellEnabled(){this.userHasWellPreference=true;this.isWellEnabled=!this.isWellEnabled}updateUserPreferences(){if(this.userHasFontSizePreference||this.userHasOpacityPreference||this.userHasWellPreference){const e={};if(this.userHasFontSizePreference){e.fontSize=this.activeFontSize}if(this.userHasOpacityPreference){e.opacity=this.activeOpacity}if(this.userHasWellPreference){e.isWellEnabled=this.isWellEnabled}be.a.set(ve["j"],e)}else{be.a.remove(ve["j"])}}loadUserPreferences(){const e=be.a.get(ve["j"]);if(e){if(e.fontSize!==undefined){this.activeFontSize=e.fontSize;this.userHasFontSizePreference=true}if(e.opacity!==undefined){this.activeOpacity=e.opacity;this.userHasOpacityPreference=true}if(e.isWellEnabled!==undefined){this.isWellEnabled=e.isWellEnabled;this.userHasWellPreference=true}}}reset(){this.userHasFontSizePreference=false;this.userHasOpacityPreference=false;this.userHasWellPreference=false;this.activeFontSize=ve["c"];this.activeOpacity=ve["d"];this.isWellEnabled=ve["e"]}calculateCuePosition(){if(!this.activeCue){this.cuePosition=0;return}const e=this.activeCue.endTime-this.activeCue.startTime;this.cuePosition=(this.videoPlayerStore.currentTime-this.activeCue.startTime)/e}get activeTrack(){if(!this.captionsStore.activeTracks.length){return null}return this.captionsStore.activeTracks[0]}get activeCue(){if(!this.activeTrack||!this.activeTrack.activeCues.length){return null}return this.activeTrack.activeCues[0]}get activeCueText(){if(!this.activeCue){return""}return this.activeCue.displayText}get captionStyle(){const e=this.videoPlayerStore.playerHeight;let t;if(!e){t=ve["a"].FONT_SIZE_DEFAULT}else{t=Math.max(e*.04,ve["a"].FONT_SIZE_MIN)}const r=this.activeFontSize/100*t;return{fontSize:`${Object(ge["c"])(r)}rem`,opacity:this.activeOpacity/100}}get shouldDisplayWell(){return this.isWellEnabled&&this.activeTrack&&!z["b"].isMobile}},Ee=babelHelpers.applyDecoratedDescriptor(we.prototype,"activeFontSize",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return ve["c"]}}),Se=babelHelpers.applyDecoratedDescriptor(we.prototype,"activeOpacity",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return ve["d"]}}),_e=babelHelpers.applyDecoratedDescriptor(we.prototype,"isWellEnabled",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return ve["e"]}}),xe=babelHelpers.applyDecoratedDescriptor(we.prototype,"menuPage",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return ve["g"].TRACKS}}),De=babelHelpers.applyDecoratedDescriptor(we.prototype,"cuePosition",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),babelHelpers.applyDecoratedDescriptor(we.prototype,"toggleMenu",[s["a"]],Object.getOwnPropertyDescriptor(we.prototype,"toggleMenu"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"isMenuOpen",[u["g"]],Object.getOwnPropertyDescriptor(we.prototype,"isMenuOpen"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"setSubmenu",[u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"setSubmenu"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"selectFontSize",[u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"selectFontSize"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"selectTrackOpacity",[u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"selectTrackOpacity"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"toggleWellEnabled",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"toggleWellEnabled"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"updateUserPreferences",[s["a"]],Object.getOwnPropertyDescriptor(we.prototype,"updateUserPreferences"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"loadUserPreferences",[u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"loadUserPreferences"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"reset",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"reset"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"calculateCuePosition",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(we.prototype,"calculateCuePosition"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"activeTrack",[u["g"]],Object.getOwnPropertyDescriptor(we.prototype,"activeTrack"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"activeCue",[u["g"]],Object.getOwnPropertyDescriptor(we.prototype,"activeCue"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"activeCueText",[u["g"]],Object.getOwnPropertyDescriptor(we.prototype,"activeCueText"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"captionStyle",[u["g"]],Object.getOwnPropertyDescriptor(we.prototype,"captionStyle"),we.prototype),babelHelpers.applyDecoratedDescriptor(we.prototype,"shouldDisplayWell",[u["g"]],Object.getOwnPropertyDescriptor(we.prototype,"shouldDisplayWell"),we.prototype),we);var Te=r("./src/udemy/js/video-player/captions/captions.mobx-store.js");var Oe=r("./node_modules/babel-plugin-react-css-modules/dist/browser/getClassName.js");var ke=r.n(Oe);var Pe=r("./node_modules/react-dom/index.js");var Ae=r.n(Pe);var Ie=r("./src/udemy/js/video-player/captions/cue-display/captions-display.less");var je,Re,Ne;let Le=(je=Object(p["e"])("captionDisplayStore"),je(Re=Object(p["f"])(Re=(Ne=class e extends f.a.Component{render(){if(!this.props.captionDisplayStore.activeCueText){return null}return f.a.createElement("div",{className:"captions-display--captions-cue-text--ECkJu","data-purpose":"captions-cue-text",style:this.props.captionDisplayStore.captionStyle},this.props.captionDisplayStore.activeCueText)}},Ne.propTypes={captionDisplayStore:h.a.object.isRequired},Ne))||Re)||Re);var Me=r("./src/udemy/js/video-player/captions/cue-display/well.less");var qe=r.n(Me);var Ue,He,Fe,Be;function ze(e,t){const r=e[0].toUpperCase()+e.slice(1);return{[`Webkit${r}`]:t,[`Moz${r}`]:t,[`ms${r}`]:t,[`O${r}`]:t,[e]:t}}let Ve=(Ue=Object(p["e"])("captionDisplayStore"),Ue(He=Object(p["f"])(He=(Fe=(Be=class e extends f.a.Component{constructor(e){super(e);this.disposers=[]}componentDidMount(){this.disposers.push(Object(u["u"])(this.props.captionDisplayStore,"cuePosition",(()=>{this.textRef.classList.add(qe.a["transition-active"])})),Object(u["u"])(this.props.captionDisplayStore,"activeCueText",(()=>{this.textRef.classList.remove(qe.a["transition-active"]);this.reset=true})))}componentWillUnmount(){this.disposers.forEach((e=>e()))}addContainerRef(e){this.containerRef=e}addTextRef(e){this.textRef=e}render(){const{captionDisplayStore:e}=this.props;const t=this.containerRef&&this.textRef?this.textRef.offsetHeight-this.containerRef.offsetHeight:0;const r=ze("transform",`translateY(-${t*e.cuePosition}px)`);const n=ze("transform","none");const i=t&&!this.reset;this.reset=false;return f.a.createElement("div",{className:"well--container--2edq4",style:{fontSize:e.captionStyle.fontSize},ref:this.addContainerRef},f.a.createElement("span",{className:"well--text--2H_p0 well--transition-active--35hDP",style:i?r:n,ref:this.addTextRef},e.activeCueText))}},Be.propTypes={captionDisplayStore:h.a.object.isRequired},Be),babelHelpers.applyDecoratedDescriptor(Fe.prototype,"addContainerRef",[s["a"]],Object.getOwnPropertyDescriptor(Fe.prototype,"addContainerRef"),Fe.prototype),babelHelpers.applyDecoratedDescriptor(Fe.prototype,"addTextRef",[s["a"]],Object.getOwnPropertyDescriptor(Fe.prototype,"addTextRef"),Fe.prototype),Fe))||He)||He);var We,Ge,Ke;const $e={"./captions-display.less":{"captions-container":"captions-display--captions-container--1-aQJ","user-inactive":"captions-display--user-inactive--2QVjh","captions-cue-text":"captions-display--captions-cue-text--ECkJu"}};let Xe=(We=Object(p["e"])("captionDisplayStore","userActivityStore"),We(Ge=Object(p["f"])(Ge=(Ke=class e extends f.a.Component{render(){if(this.props.captionDisplayStore.shouldDisplayWell){return f.a.createElement(Ve,null)}const e=c()("captions-container",{"user-inactive":this.props.userActivityStore&&!this.props.userActivityStore.isUserActive});const t=f.a.createElement("div",{className:ke()(e,$e)},f.a.createElement(Le,null));return Ae.a.createPortal(t,this.props.captionDisplayStore.player.el())}},Ke.propTypes={captionDisplayStore:h.a.object.isRequired,userActivityStore:h.a.object},Ke.defaultProps={userActivityStore:null},Ke))||Ge)||Ge);var Ye,Qe;let Je=(Ye=class e{constructor(){babelHelpers.initializerDefineProperty(this,"activeMenu",Qe,this)}setMenuOpen(e){this.activeMenu=e}setMenuClosed(){this.activeMenu=L["b"].NONE}},Qe=babelHelpers.applyDecoratedDescriptor(Ye.prototype,"activeMenu",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return L["b"].NONE}}),babelHelpers.applyDecoratedDescriptor(Ye.prototype,"setMenuOpen",[u["e"]],Object.getOwnPropertyDescriptor(Ye.prototype,"setMenuOpen"),Ye.prototype),babelHelpers.applyDecoratedDescriptor(Ye.prototype,"setMenuClosed",[u["e"]],Object.getOwnPropertyDescriptor(Ye.prototype,"setMenuClosed"),Ye.prototype),Ye);var Ze=r("./node_modules/@udemy/design-system-utils/dist/esm/a11y/a11y.js");var et=r("./node_modules/@udemy/react-core-components/dist/esm/image/image.react-component.js");const tt="durationchange";const rt="loadedmetadata";var nt=r("./src/udemy/js/video-player/sneak-peek/sneak-peek.less");var it=r.n(nt);var ot,at,st,lt,ct;let ut=(ot=u["t"].ref,at=class e{constructor(e){babelHelpers.initializerDefineProperty(this,"progressBarStore",st,this);babelHelpers.initializerDefineProperty(this,"duration",lt,this);babelHelpers.initializerDefineProperty(this,"sneakPeekTrack",ct,this);this.setProgressBarStore(e)}setSneakPeekTrack(e){this.sneakPeekTrack=e}setProgressBarStore(e){this.progressBarStore=e}setDuration(){this.duration=this.player.duration()}get isHovering(){return this.progressBarStore.isHovering}get portalElement(){return this.progressBarStore.ref}get thumbSpriteUrl(){return new URL(this.progressBarStore.thumbnailSprite.img_url)}get player(){return this.progressBarStore.player}get moveEvent(){return this.progressBarStore.moveEvent}get cueLength(){return this.sneakPeekTrack&&this.sneakPeekTrack.cues&&this.sneakPeekTrack.cues.length}},st=babelHelpers.applyDecoratedDescriptor(at.prototype,"progressBarStore",[ot],{configurable:true,enumerable:true,writable:true,initializer:null}),lt=babelHelpers.applyDecoratedDescriptor(at.prototype,"duration",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),ct=babelHelpers.applyDecoratedDescriptor(at.prototype,"sneakPeekTrack",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(at.prototype,"setSneakPeekTrack",[u["e"]],Object.getOwnPropertyDescriptor(at.prototype,"setSneakPeekTrack"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"setProgressBarStore",[u["e"]],Object.getOwnPropertyDescriptor(at.prototype,"setProgressBarStore"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"setDuration",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(at.prototype,"setDuration"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"isHovering",[u["g"]],Object.getOwnPropertyDescriptor(at.prototype,"isHovering"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"portalElement",[u["g"]],Object.getOwnPropertyDescriptor(at.prototype,"portalElement"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"thumbSpriteUrl",[u["g"]],Object.getOwnPropertyDescriptor(at.prototype,"thumbSpriteUrl"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"player",[u["g"]],Object.getOwnPropertyDescriptor(at.prototype,"player"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"moveEvent",[u["g"]],Object.getOwnPropertyDescriptor(at.prototype,"moveEvent"),at.prototype),babelHelpers.applyDecoratedDescriptor(at.prototype,"cueLength",[u["g"]],Object.getOwnPropertyDescriptor(at.prototype,"cueLength"),at.prototype),at);var pt,dt,ht,mt;let ft=(pt=Object(p["e"])("progressBarStore"),pt(dt=Object(p["f"])(dt=(ht=(mt=class e extends f.a.Component{constructor(e){super(e);this.container=f.a.createRef();this.sneakPeekStore=new ut(e.progressBarStore);this.setReactions()}setReactions(){Object(u["v"])((()=>this.tracks&&this.tracks.length>0&&!this.sneakPeekStore.sneakPeekTrack),this.addTracks,{fireImmediately:true});Object(u["v"])((()=>this.sneakPeekStore.player),(()=>this.sneakPeekStore.setProgressBarStore(this.props.progressBarStore)));Object(u["v"])((()=>this.sneakPeekStore.sneakPeekTrack),this.setDurationEvents,{fireImmediately:true})}addTracks(){if(this.tracks){for(let e=0;e<this.tracks.length;e++){if(this.tracks[e].kind==="metadata"&&this.tracks[e].label==="sneakpeek"){this.sneakPeekStore.setSneakPeekTrack(this.tracks[e]);return}}}}setDurationEvents(){[tt,rt].forEach((e=>this.sneakPeekStore.player.on(e,this.sneakPeekStore.setDuration)));this.sneakPeekStore.setDuration()}get imgStyles(){const e=[this.imageSettings.y,this.imageSettings.w+this.imageSettings.x,this.imageSettings.y+this.imageSettings.h,this.imageSettings.x];return{left:`${-this.imageSettings.x}px`,top:`${-this.imageSettings.y}px`,clip:`rect(${e.join("px,")}px)`}}get containerLeft(){const e=this.sneakPeekStore.portalElement.getBoundingClientRect();const t=window.pageXOffset||document.documentElement.scrollLeft;const r=(e.width||e.right)+t;let n=this.mouseLeftPosition;const i=this.imageSettings.w/2;if(n+i>r){n=r-this.imageSettings.w}else if(n<i){n=0}else{n=n-i}return n}get containerStyles(){const e={};if(this.imageSettings&&this.imageSettings.w!==0){e.width=`${this.imageSettings.w}px`;e.height=`${this.imageSettings.h}px`;if(this.sneakPeekStore.isHovering){e.left=`${this.containerLeft}px`}}else{e.left="-1000px"}return e}get imgSrc(){let e="";if(this.imageSettings.src[0]==="/"){e=this.sneakPeekStore.player.currentSrc();e=e.substring(0,e.lastIndexOf("/"))}return e+this.imageSettings.src+this.sneakPeekStore.thumbSpriteUrl.search}get mouseLeftPosition(){if(!this.sneakPeekStore.moveEvent){return null}const e=this.sneakPeekStore.moveEvent.changedTouches?this.sneakPeekStore.moveEvent.changedTouches[0].pageX:this.sneakPeekStore.moveEvent.pageX;const t=window.pageXOffset||document.documentElement.scrollLeft;let r=e||this.sneakPeekStore.moveEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;r-=this.sneakPeekStore.portalElement.getBoundingClientRect().left+t;return r}get imageSettings(){let e=0;let t={w:0,height:0,src:""};const r=this.sneakPeekStore.portalElement.offsetWidth>0?this.sneakPeekStore.portalElement.offsetWidth:1;const n=Math.floor(this.mouseLeftPosition/r*this.sneakPeekStore.duration);const i=this.sneakPeekStore.thumbSpriteUrl.toString().split("?")[0];const o=`${i.slice(0,i.lastIndexOf("/"))}/`;while(e<this.sneakPeekStore.cueLength){const r=this.sneakPeekStore.sneakPeekTrack.cues[e];if(r.startTime<=n&&r.endTime>=n){t=Object(z["a"])(r.text,o);break}e++}if(t){t.w=t.w?t.w:0;t.h=t.h?t.h:0}return t}get shouldRender(){if(!this.props.progressBarStore||!this.props.progressBarStore.thumbnailSprite||!this.props.progressBarStore.ref||!this.props.progressBarStore.remoteTextTracks||this.props.progressBarStore.remoteTextTracks().length<1){return false}return true}get tracks(){return this.props.progressBarStore.remoteTextTracks()}render(){return this.shouldRender?f.a.createElement("div",{className:c()("sneak-peek-container",it.a["sneak-peek-holder"]),"data-purpose":"video-sneak-peek-container",style:this.containerStyles,ref:this.container},f.a.createElement(et["a"],{lazy:false,"data-purpose":"video-sneak-peek-image",alt:gettext("Lecture thumbnail"),className:it.a["sneak-peek"],src:this.imgSrc,height:"unset",width:"unset",style:Object(u["A"])(this.imgStyles)})):null}},mt.propTypes={progressBarStore:h.a.object.isRequired},mt),babelHelpers.applyDecoratedDescriptor(ht.prototype,"addTracks",[s["a"]],Object.getOwnPropertyDescriptor(ht.prototype,"addTracks"),ht.prototype),babelHelpers.applyDecoratedDescriptor(ht.prototype,"setDurationEvents",[s["a"]],Object.getOwnPropertyDescriptor(ht.prototype,"setDurationEvents"),ht.prototype),ht))||dt)||dt);var gt,yt,bt,vt;let wt=(gt=Object(p["e"])("progressBarStore"),gt(yt=Object(p["f"])(yt=(bt=(vt=class e extends m["Component"]{calculateBufferTimePercent(e){const t=this.props.progressBarStore.videoDuration;return`${100/t*e}%`}calculateWidth(e,t){const r=this.calculateBufferTimePercent(e);const n=this.calculateBufferTimePercent(t);return`calc(${n} - ${r})`}renderBuffer(e,t){let{start:r,end:n}=e;return f.a.createElement("div",{"data-purpose":"video-progress-buffer",key:t,style:{left:this.calculateBufferTimePercent(r),width:this.calculateWidth(r,n)}})}render(){return this.props.progressBarStore.buffers.map(this.renderBuffer)}},vt.propTypes={progressBarStore:h.a.object.isRequired},vt),babelHelpers.applyDecoratedDescriptor(bt.prototype,"renderBuffer",[s["a"]],Object.getOwnPropertyDescriptor(bt.prototype,"renderBuffer"),bt.prototype),bt))||yt)||yt);var Et=r("./src/udemy/js/video-player/progress-bar/progress-bar.less");var St,_t,xt;let Dt=(St=Object(p["e"])("progressBarStore"),St(_t=Object(p["f"])(_t=(xt=class e extends m["Component"]{get loadedInfo(){const e=gettext("Loaded: %(bufferedPercent)s");return interpolate(e,{bufferedPercent:this.props.progressBarStore.bufferedPercent},true)}render(){return f.a.createElement("div",{className:"progress-bar--load-progress--2m7ts"},f.a.createElement("span",{className:"ud-sr-only"},this.loadedInfo),f.a.createElement(wt,null))}},xt.propTypes={progressBarStore:h.a.object.isRequired},xt))||_t)||_t);var Ct,Tt,Ot;let kt=(Ct=Object(p["e"])("progressBarStore"),Ct(Tt=Object(p["f"])(Tt=(Ot=class e extends m["Component"]{get progressBarInfo(){const e=gettext("Progress bar: %(currentTimePercent)s");return interpolate(e,{currentTimePercent:this.props.progressBarStore.currentTimePercent},true)}render(){return f.a.createElement("div",{className:"progress-bar--play-progress--qERtx",style:{width:this.props.progressBarStore.currentTimePercent}},f.a.createElement("span",{className:"ud-sr-only"},this.progressBarInfo))}},Ot.propTypes={progressBarStore:h.a.object.isRequired},Ot))||Tt)||Tt);var Pt,At,It,jt;const Rt={"./progress-bar.less":{"progress-bar-control":"progress-bar--progress-bar-control--VTAGF",slider:"progress-bar--slider--bmtrg","progress-holder":"progress-bar--progress-holder--1H-vy",hover:"progress-bar--hover--5xAeL","load-progress":"progress-bar--load-progress--2m7ts","play-progress":"progress-bar--play-progress--qERtx"}};let Nt=(Pt=Object(p["e"])("progressBarStore"),Pt(At=Object(p["f"])(At=(It=(jt=class e extends m["Component"]{constructor(e){super(e);this.listeners=[];this.progressBarTimeUpdateDisposer=Object(u["v"])((()=>this.props.progressBarStore.videoCurrentTime),(()=>{this.props.progressBarStore.setProgressBarTime(this.props.progressBarStore.videoCurrentTime,false)}),{fireImmediately:true});Object(u["D"])((()=>this.props.progressBarStore.ref),(()=>{const e=this.props.progressBarStore.ref;this.addBulkEvents([{on:["touchmove","mousemove"],run:this.moveListener},{on:"click",run:this.seekToCurrentMousePosition},{on:"mousemove",run:[this.whenIsDragging(this.seekToCurrentMousePosition)]},{selector:window,on:"mousemove",run:this.documentMove},{on:"mousedown",run:this.onDragStart},{selectors:[e,window,document.body],on:"mouseup",run:this.onDragEnd},{on:"mouseenter",run:this.onMouseEnter},{on:"mouseleave",run:this.whenIsNotDragging((()=>this.props.progressBarStore.setHovering(false)))},{selectors:[e,window],on:"selectstart",run:this.whenIsDragging(this.disableSelection)}])}),{fireImmediately:true})}componentWillUnmount(){this.progressBarTimeUpdateDisposer();this.listenersDisposer()}addBulkEvents(e){e.forEach((e=>{let{on:t,run:r,selectors:n=null,selector:i=this.props.progressBarStore.ref}=e;return this.addListeners(t,r,n||i)}))}addListeners(e,t,r){if(Array.isArray(r)){r.forEach((r=>this.addListeners(e,t,r)))}else if(Array.isArray(e)){e.forEach((e=>this.addListeners(e,t,r)))}else if(Array.isArray(t)){t.forEach((t=>this.addListeners(e,t,r)))}else{const n=r;this.addListener(e,t,n)}}addListener(e,t,r){if(!r){return false}r.addEventListener(e,t);this.listeners.push({on:e,run:t,selector:r})}listenersDisposer(){this.listeners.forEach((e=>{let{on:t,run:r,selector:n}=e;return n.removeEventListener(t,r)}))}seekToCurrentMousePosition(){this.props.progressBarStore.seekTo(this.props.progressBarStore.currentMouseTime)}onDragEnd(e){if(this.isOutsideProgressBarEvent(e)){this.props.progressBarStore.setHovering(false)}this.props.progressBarStore.setDragging(false)}onMouseEnter(){this.props.progressBarStore.setHovering(true)}documentMove(e){if(this.props.progressBarStore.isDragging&&this.isOutsideProgressBarEvent(e)){this.moveListener(e);this.seekToCurrentMousePosition()}}isOutsideProgressBarEvent(e){const t=e.path||e.composedPath();const r=t.includes(document);const n=t.includes(this.props.progressBarStore.ref);if(!r){return false}return!n}whenIsDragging(e){return t=>this.props.progressBarStore.isDragging&&e(t)}whenIsNotDragging(e){return()=>!this.props.progressBarStore.isDragging&&e()}disableSelection(e){e.preventDefault()}onDragStart(){this.props.progressBarStore.setDragging(true)}moveListener(e){this.props.progressBarStore.setMoveEvent(e);const t=window.pageXOffset||document.documentElement.scrollLeft;const r=e.changedTouches?e.changedTouches[0].pageX:e.pageX;const n=(r||e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft)-this.props.progressBarStore.ref.getBoundingClientRect().left+t;const i=n>this.props.progressBarStore.ref.offsetWidth?this.props.progressBarStore.ref.offsetWidth:n;const o=i<0?0:i;this.props.progressBarStore.setCurrentMouseTime(Math.floor(o/this.props.progressBarStore.ref.offsetWidth*this.props.progressBarStore.videoDuration))}get styles(){return c()({"progress-bar-control":true,hover:this.props.progressBarStore.isHovering})}onKeyDown(e){Object(Ze["b"])((()=>{e.preventDefault();this.props.progressBarStore.seekBack()}))(e);Object(Ze["f"])((()=>{e.preventDefault();this.props.progressBarStore.seekForward()}))(e);Object(Ze["d"])((()=>{e.preventDefault()}))(e)}render(){return f.a.createElement("div",{ref:this.props.progressBarStore.setRef,className:ke()(this.styles,Rt)},f.a.createElement("div",{tabIndex:"0",className:"progress-bar--slider--bmtrg",role:"slider","data-purpose":"video-progress-bar","aria-label":gettext("Progress bar"),"aria-valuetext":this.props.progressBarStore.progressInfo,"aria-valuenow":this.props.progressBarStore.currentTimePercentValue,"aria-valuemin":"0","aria-valuemax":"100",onKeyDown:this.onKeyDown},f.a.createElement("div",{ref:this.props.progressBarStore.setProgressHolderRef,className:"progress-bar--progress-holder--1H-vy"},f.a.createElement(Dt,null),f.a.createElement(kt,null))),f.a.createElement(ft,{moveEvent:this.props.progressBarStore.moveEvent}))}},jt.propTypes={progressBarStore:h.a.object.isRequired},jt),babelHelpers.applyDecoratedDescriptor(It.prototype,"seekToCurrentMousePosition",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"seekToCurrentMousePosition"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"onDragEnd",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"onDragEnd"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"onMouseEnter",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"onMouseEnter"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"documentMove",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"documentMove"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"isOutsideProgressBarEvent",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"isOutsideProgressBarEvent"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"whenIsDragging",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"whenIsDragging"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"whenIsNotDragging",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"whenIsNotDragging"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"disableSelection",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"disableSelection"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"onDragStart",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"onDragStart"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"moveListener",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"moveListener"),It.prototype),babelHelpers.applyDecoratedDescriptor(It.prototype,"onKeyDown",[s["a"]],Object.getOwnPropertyDescriptor(It.prototype,"onKeyDown"),It.prototype),It))||At)||At);var Lt=r("./src/udemy/js/video-player/control-bar/controls.js");var Mt=r("./src/udemy/js/video-player/control-bar/control-bar.less");var qt,Ut,Ht,Ft,Bt,zt;let Vt=(qt=Object(p["e"])("progressBarStore","userActivityStore"),Ut=u["t"].ref,qt(Ht=Object(p["f"])(Ht=(Ft=(zt=class e extends f.a.Component{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"ref",Bt,this);Object(u["D"])((()=>this.ref&&this.props.userActivityStore),(()=>{this.props.userActivityStore.addHideOnInactive(this.ref);this.props.userActivityStore.addActiveOnHover(this.ref)}))}setRef(e){this.ref=e}getControlBarProps(){return{isPlaying:this.props.isPlaying,onPlayPause:this.props.onPlayPause}}get defaultControls(){return f.a.createElement(f.a.Fragment,null,f.a.createElement(Lt["d"],null),f.a.createElement(Lt["g"],null),f.a.createElement(Lt["e"],null),f.a.createElement(Lt["b"],null),f.a.createElement(Lt["f"],null),f.a.createElement(Lt["i"],null),f.a.createElement(Lt["j"],null),f.a.createElement(Lt["a"],null),f.a.createElement(Lt["h"],null),f.a.createElement(Lt["c"],null))}render(){const e=f.a.createElement("div",{className:"control-bar--control-bar-wrapper--1bXpr","data-purpose":"video-control-bar"},f.a.createElement("div",{className:"video-popover-area control-bar--popover-area--1LX56",ref:this.props.progressBarStore.setPopoverAreaRef}),f.a.createElement("div",{className:"control-bar--control-bar-container--16vzi",ref:this.setRef},f.a.createElement(Nt,null),f.a.createElement(p["c"],{getControlBarProps:this.getControlBarProps},f.a.createElement("div",{className:"control-bar--control-bar--MweER","data-purpose":"video-controls"},this.props.children||this.defaultControls))));return Ae.a.createPortal(e,this.props.player.el())}},zt.defaultProps={userActivityStore:null},zt.propTypes={progressBarStore:h.a.object.isRequired,userActivityStore:h.a.object,player:h.a.object.isRequired,isPlaying:h.a.bool.isRequired,onPlayPause:h.a.func.isRequired},zt),Bt=babelHelpers.applyDecoratedDescriptor(Ft.prototype,"ref",[Ut],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Ft.prototype,"setRef",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Ft.prototype,"setRef"),Ft.prototype),babelHelpers.applyDecoratedDescriptor(Ft.prototype,"getControlBarProps",[s["a"]],Object.getOwnPropertyDescriptor(Ft.prototype,"getControlBarProps"),Ft.prototype),Ft))||Ht)||Ht);var Wt=r("./src/udemy/js/video-player/error-display.react-component.js");var Gt=r("./node_modules/@udemy/icons/dist/pause.ud-icon");var Kt=r.n(Gt);var $t=r("./src/udemy/js/video-player/feedback/video-feedback.react-component.js");var Xt=r("./src/udemy/js/video-player/feedback/video-feedback.less");var Yt,Qt,Jt,Zt,er;const tr=e=>f.a.createElement(i.a,Object.assign({},e,{className:"video-feedback--play-icon--2CALH"}));let rr=(Yt=u["t"].ref,Object(p["f"])(Qt=(Jt=(er=class e extends f.a.Component{constructor(){super(...arguments);babelHelpers.initializerDefineProperty(this,"Icon",Zt,this)}componentDidUpdate(e){if(e.isPlaying!==this.props.isPlaying){this.showFeedback(this.props.isPlaying)}}showFeedback(e){clearTimeout(this.iconTimeout);this.Icon=e?tr:Kt.a;this.iconTimeout=setTimeout(Object(u["e"])((()=>{this.Icon=null})),$t["a"])}render(){return this.Icon?f.a.createElement($t["b"],{icon:this.Icon}):null}},er.propTypes={isPlaying:h.a.bool.isRequired},er),Zt=babelHelpers.applyDecoratedDescriptor(Jt.prototype,"Icon",[Yt],{configurable:true,enumerable:true,writable:true,initializer:function(){return null}}),babelHelpers.applyDecoratedDescriptor(Jt.prototype,"showFeedback",[u["e"]],Object.getOwnPropertyDescriptor(Jt.prototype,"showFeedback"),Jt.prototype),Jt))||Qt);var nr=r("./src/udemy/js/video-player/progress-bar/progress-bar.mobx-store.js");var ir=r("./src/udemy/js/video-player/user-activity.less");var or=r.n(ir);var ar=r("./src/udemy/js/video-player/user-activity.mobx-store.js");var sr=r("./src/udemy/js/video-player/video-player.less");var lr=r.n(sr);var cr=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/tracker.js");var ur=r("./node_modules/axios/index.js");var pr=r.n(ur);var dr=r("./node_modules/uuid/v4.js");var hr=r.n(dr);var mr=r("./src/udemy/js/utils/browser-log-collection.js");var fr=r("./node_modules/@udemy/event-tracking/dist/esm/tracker/event-common.js");class gr extends fr["a"]{constructor(e){let{previousResolution:t,videoPlayerData:r}=e;super("AdaptiveStreamingQualityChangeEvent");this.previousResolution=t;this.videoPlayerData=r}}function yr(e){return N.a.get(e)}function br(e,t){N.a.set(e,t,{expires:30,path:"/"})}function vr(e){return N.a.remove(e)}const wr=1;const Er=Object.freeze([.5,.75,1,1.25,1.5,1.75,2]);const Sr="playbackspeed";var _r,xr,Dr,Cr,Tr;let Or=(_r=u["t"].ref,xr=class e{constructor(){babelHelpers.initializerDefineProperty(this,"player",Dr,this);babelHelpers.initializerDefineProperty(this,"availablePlaybackRates",Cr,this);babelHelpers.initializerDefineProperty(this,"chosenPlaybackRate",Tr,this)}setup(e){this.player=e;e.on("play",(()=>{e.playbackRate(this.playbackRate)}))}choosePlaybackRate(e){if(e&&e!==this.playbackRate){this.chosenPlaybackRate=e;this.player.playbackRate(e);br(Sr,e)}}get playbackRate(){const e=this.chosenPlaybackRate||this.savedPlaybackRate;if(this.availablePlaybackRates.includes(e)){return e}return wr}speedDown(){const e=this.availablePlaybackRates.indexOf(this.playbackRate);const t=this.availablePlaybackRates.slice()[e-1];this.choosePlaybackRate(t)}speedUp(){const e=this.availablePlaybackRates.indexOf(this.playbackRate);const t=this.availablePlaybackRates.slice()[e+1];this.choosePlaybackRate(t)}get savedPlaybackRate(){return parseFloat(yr(Sr))}},Dr=babelHelpers.applyDecoratedDescriptor(xr.prototype,"player",[_r],{configurable:true,enumerable:true,writable:true,initializer:null}),Cr=babelHelpers.applyDecoratedDescriptor(xr.prototype,"availablePlaybackRates",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return Er}}),Tr=babelHelpers.applyDecoratedDescriptor(xr.prototype,"chosenPlaybackRate",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(xr.prototype,"setup",[u["e"]],Object.getOwnPropertyDescriptor(xr.prototype,"setup"),xr.prototype),babelHelpers.applyDecoratedDescriptor(xr.prototype,"choosePlaybackRate",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(xr.prototype,"choosePlaybackRate"),xr.prototype),babelHelpers.applyDecoratedDescriptor(xr.prototype,"playbackRate",[u["g"]],Object.getOwnPropertyDescriptor(xr.prototype,"playbackRate"),xr.prototype),babelHelpers.applyDecoratedDescriptor(xr.prototype,"speedDown",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(xr.prototype,"speedDown"),xr.prototype),babelHelpers.applyDecoratedDescriptor(xr.prototype,"speedUp",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(xr.prototype,"speedUp"),xr.prototype),xr);const kr="quality_general";const Pr=1;const Ar=1;const Ir=0;const jr=.1;const Rr="volume";const Nr="mute";var Lr,Mr,qr;let Ur=(Lr=class e{constructor(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.player=void 0;babelHelpers.initializerDefineProperty(this,"_chosenVolume",Mr,this);babelHelpers.initializerDefineProperty(this,"_chosenIsMuted",qr,this);this.isDefaultMuted=e;this.prioritizeDefaultMuted=t}setup(e){this.player=e;e.volume(this.volume);e.muted(this.isMuted)}get volume(){function e(e){return typeof e==="number"&&!isNaN(e)&&e!==Infinity}const t=[this._chosenVolume,this.savedVolume,Pr].find(e);return this.normalizeVolume(t)}chooseVolume(e){if(!this.isEnabled){return}const t=this.normalizeVolume(e);this._chosenVolume=t;this.player.volume(t);br(Rr,t);this.chooseMuted(false)}get savedVolume(){return parseFloat(yr(Rr))}normalizeVolume(e){const t=Math.min(Math.max(e,Ir),Ar);return Math.round(100*t)/100}volumeUp(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:jr;this.chooseVolume(this.volume+e)}volumeDown(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:jr;this.chooseVolume(this.volume-e)}get isMuted(){function e(e){return typeof e==="boolean"}if(e(this._chosenIsMuted)){return this._chosenIsMuted}return this.prioritizeDefaultMuted?this.isDefaultMuted:[this.savedIsMuted,this.isDefaultMuted].find(e)}chooseMuted(e){if(!this.isEnabled){return}this._chosenIsMuted=e;this.player.muted(e);br(Nr,e?"1":0)}toggleMuted(){this.chooseMuted(!this.isMuted)}get savedIsMuted(){const e={0:false,1:true};const t=yr(Nr);return e[t]}get isEnabled(){return this.player&&this.player.techName_}},Mr=babelHelpers.applyDecoratedDescriptor(Lr.prototype,"_chosenVolume",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),qr=babelHelpers.applyDecoratedDescriptor(Lr.prototype,"_chosenIsMuted",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"setup",[u["e"]],Object.getOwnPropertyDescriptor(Lr.prototype,"setup"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"volume",[u["g"]],Object.getOwnPropertyDescriptor(Lr.prototype,"volume"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"chooseVolume",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Lr.prototype,"chooseVolume"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"volumeUp",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Lr.prototype,"volumeUp"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"volumeDown",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Lr.prototype,"volumeDown"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"isMuted",[u["g"]],Object.getOwnPropertyDescriptor(Lr.prototype,"isMuted"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"chooseMuted",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Lr.prototype,"chooseMuted"),Lr.prototype),babelHelpers.applyDecoratedDescriptor(Lr.prototype,"toggleMuted",[s["a"]],Object.getOwnPropertyDescriptor(Lr.prototype,"toggleMuted"),Lr.prototype),Lr);var Hr,Fr,Br,zr,Vr,Wr,Gr,Kr,$r,Xr,Yr,Qr,Jr,Zr,en,tn;const rn=new RegExp(/^[0-9]+$/);const nn={[L["a"]]:"Auto",audio:"Audio"};const on=new mr["a"]("videoplayer");let an=(Hr=u["t"].ref,Fr=u["t"].ref,Br=class e{constructor(e,t,r,n,i,o,a,s,l,c){this._videoPlayer=null;this.videoElement=void 0;this.playerId=null;this.videojsSetupData={};this.numErrors=0;this.numPlaylistRetries=0;this.position=-1;this.lastPosition=-1;this.waitingToLoad=false;babelHelpers.initializerDefineProperty(this,"isSeeking",zr,this);babelHelpers.initializerDefineProperty(this,"isSourceReady",Vr,this);babelHelpers.initializerDefineProperty(this,"currentTime",Wr,this);babelHelpers.initializerDefineProperty(this,"isErrorVisible",Gr,this);babelHelpers.initializerDefineProperty(this,"errorBody",Kr,this);babelHelpers.initializerDefineProperty(this,"errorFooter",$r,this);babelHelpers.initializerDefineProperty(this,"duration",Xr,this);babelHelpers.initializerDefineProperty(this,"playerHeight",Yr,this);babelHelpers.initializerDefineProperty(this,"mediaSources",Qr,this);babelHelpers.initializerDefineProperty(this,"mediaLicenseToken",Jr,this);this.currentResolutionSources=void 0;babelHelpers.initializerDefineProperty(this,"hlsResolution",Zr,this);babelHelpers.initializerDefineProperty(this,"selectedResolutionLabel",en,this);babelHelpers.initializerDefineProperty(this,"adaptiveQualityLevels",tn,this);this.bandwidthWatermarks={};this.sessionId=hr()();this.playbackRateStore=new Or;this.volumeStore=new Ur(l,c);this.videojsSetupData=e;this.playerId=t;this.trackingTag=n;this.assetId=i;this.onVideoProgress=o;this.videoProgressInterval=a;this.onTimeUpdate=s;this.setDuration(r)}setMediaSources(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;this.mediaSources=e;this.mediaLicenseToken=t}showError(e){this.errorBody=e&&e.body||"";this.errorFooter=e&&e.footer||"";this.isErrorVisible=true}hideError(){this.errorBody="";this.errorFooter="";this.isErrorVisible=false}async createVideoPlayer(e){this.videoElement=e;this._useNativeControlsForMobile();this._videoPlayer=await Z(this.videoElement,this.videojsSetupData);Object(u["v"])((()=>JSON.stringify(this.activeResolution)),(()=>this._updatePlayerResolution(this.activeResolution.sources,this.currentResolutionSources)),{fireImmediately:true});this._videoPlayer.ready((()=>{this.playbackRateStore.setup(this._videoPlayer);this.volumeStore.setup(this._videoPlayer)}));this._videoPlayer.on("durationchange",(()=>{const e=this._videoPlayer.duration();if(e){this.setDuration(e)}}));this._videoPlayer.on("onbandwidthwatermarkupdate",((e,t)=>{this.bandwidthWatermarks=t.bandwidthWatermarks}));this._videoPlayer.on("hlslevelswitch",this._onHlsLevelSwitch);this._videoPlayer.on("loadedmetadata",(()=>{if(this.supportsAdaptiveFixedResolutions){this._setAdaptiveQualityLevels()}}));Object(Q["d"])(this._videoPlayer);return this._videoPlayer}_useNativeControlsForMobile(){if(z["b"].isMobile){this.videojsSetupData.nativeControlsForTouch=true}}_onHlsLevelSwitch(e,t){this._setHlsResolution(t.resolution)}_setAdaptiveQualityLevels(){this.adaptiveQualityLevels=this._videoPlayer.qualityLevels()}_updateEnabledQualityLevels(){Array.prototype.forEach.call(this.adaptiveQualityLevels,(e=>{e.enabled=this.activeResolution.label===L["a"]||e.height==this.activeResolution.label}))}get isAdaptive(){if(this.activeResolution){return this.activeResolution.label===L["a"]}}handleVideoProgress(e){const t=Math.ceil(this.currentTime/this.videoProgressInterval);if(this.lastPosition===t||t<=0){return}this.lastPosition=t;const r=e.type==="ended"?this.duration:Math.min(t*this.videoProgressInterval,this.duration);const n={total:Math.floor(this.duration),position:Math.floor(r)};this.onVideoProgress(e,n)}handleTimeUpdate(){this.currentTime=this._videoPlayer.currentTime();this.onTimeUpdate(this.currentTime)}handleVideoError(e){if(e.code===undefined){return}if(e.code===MediaError.MEDIA_ERR_ABORTED){return}const t=5;const r=this.numErrors<t&&this.numPlaylistRetries<=2;if(r&&e.code===MediaError.MEDIA_ERR_NETWORK){this._retry(e)}else if(r&&e.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED){this._retry(e)}else{this.showError(e.message?{body:e.message.errorBody,footer:e.message.errorFooter}:null);if(this.numPlaylistRetries>2){this._videoPlayer.unloadTech_("eme")}this._logErrorWithHttpStatus(e)}}get adaptiveSourceTypes(){return[L["f"],L["c"]]}get adaptiveSources(){return this.mediaSources.filter((e=>this.adaptiveSourceTypes.includes(e.type))).map((e=>{let{type:t,src:r}=e;if(this.mediaLicenseToken){return{type:t,src:r,keySystems:Object(Q["b"])(this.mediaLicenseToken)}}return{type:t,src:r}}))}get supportsMSE(){if(window.MediaSource||window.WebKitMediaSource){return true}for(const e of this.adaptiveSourceTypes){if(this._videoPlayer.el().firstChild.canPlayType(e)){return true}}return false}get supportsAdaptiveFixedResolutions(){return this.adaptiveSources.length&&this.supportsMSE}get adaptiveResolutions(){const e={auto:{label:L["a"],displayLabel:this._getResolutionDisplayLabel({label:L["a"]}),sources:this.adaptiveSources}};return Array.prototype.reduce.call(this.adaptiveQualityLevels,((e,t)=>{if(typeof e[t.height]==="undefined"){e[t.height]={label:t.height.toString(),displayLabel:this._getResolutionDisplayLabel({label:t.height}),sources:this.adaptiveSources}}return e}),e)}get resolutions(){if(!this.mediaSources){return{}}if(this.supportsAdaptiveFixedResolutions){if(this.adaptiveQualityLevels&&this.adaptiveQualityLevels.length){return this.adaptiveResolutions}return[{label:L["a"],displayLabel:nn[L["a"]],sources:this.adaptiveSources}]}return this.mediaSources.reduce(((e,t)=>{if(t.label===L["a"]&&!this.supportsMSE){return e}if(typeof e[t.label]==="undefined"){e[t.label]={label:t.label,displayLabel:this._getResolutionDisplayLabel(t),sources:[]}}if(this.mediaLicenseToken){e[t.label].sources.push({type:t.type,src:t.src,keySystems:Object(Q["b"])(this.mediaLicenseToken)})}else{e[t.label].sources.push({type:t.type,src:t.src})}return e}),{})}get sortedResolutions(){const e=Object.values(this.resolutions).reduce(((e,t)=>{const r=parseInt(t.label,10);if(Number.isNaN(r)){e.stringLabels.push(t)}else{e.numericLabels.push(t)}return e}),{numericLabels:[],stringLabels:[]});e.numericLabels.sort(((e,t)=>t.label-e.label));e.stringLabels.sort(((e,t)=>e.label.localeCompare(t.label)));return e.numericLabels.concat(e.stringLabels)}setResolutionLabel(e){this.selectedResolutionLabel=e;br(kr,this.selectedResolutionLabel)}get activeResolution(){if(Object.keys(this.resolutions).length===0){return}let e;const t=yr(kr);if(this.selectedResolutionLabel){e=this.selectedResolutionLabel}else if(t){e=t}else{e=L["e"]}if(typeof this.resolutions[e]!=="undefined"){return this.resolutions[e]}return this.sortedResolutions[0]}_setHlsResolution(e){const t=this.hlsResolution;this.hlsResolution=e;if(this.activeResolution.label===L["a"]){this._publishAdaptiveStreamingQualityChangeEvent(t)}}_getResolutionDisplayLabel(e){if(e.label in nn){return nn[e.label]}return rn.test(e.label)?`${e.label}p`:e.label}_updatePlayerResolution(e,t){this.currentResolutionSources=e;this.hlsResolution=null;const r=this._videoPlayer.el().firstChild;if(r.preload==="none"){r.preload="metadata"}if(JSON.stringify(e)!==JSON.stringify(t)){this._videoPlayer.src(e);this._videoPlayer.one("loadstart",(()=>{this._videoPlayer.trigger("sourceloading");this._videoPlayer.forcePlay().then((()=>{this._videoPlayer.currentTime(this._videoPlayer.currentTime()+.1);this._videoPlayer.trigger("sourceready")}))}))}if(this.supportsAdaptiveFixedResolutions&&this.adaptiveQualityLevels&&this.adaptiveQualityLevels.length){this._updateEnabledQualityLevels()}const{plugins:n}=this.videojsSetupData;if(n.mux){n.mux.data.video_cdn=re(this._videoPlayer.src());this._videoPlayer.mux.emit("videochange",n.mux.data)}this._videoPlayer.resolution=this.activeResolution.label}get isUsingNativeControls(){return this._videoPlayer&&this._videoPlayer.usingNativeControls()}_publishAdaptiveStreamingQualityChangeEvent(e){const t={previousResolution:e,videoPlayerData:se(this)};if(this._videoPlayer.hls){t.hlsBandwidthEstimate=Math.round(this._videoPlayer.hls.bandwidthEstimate)}cr["a"].publishEvent(new gr(t))}_logErrorWithHttpStatus(e,t){pr.a.head(this._videoPlayer.src()).then((t=>{e.responseStatus=t.status;e.responseURL=t.request&&t.request.responseURL;e.responseContentType=t.headers["content-type"]})).catch((t=>{if(typeof t.response!=="undefined"){e.responseStatus=t.response.status;e.responseURL=t.response.request&&t.response.request.responseURL}})).then((()=>{this._logError(e,t)}))}_logError(e,t){t=t||"videoplayer.error";const r=ue(this,e);on.error(t,r)}_retry(e){this.numErrors+=1;setTimeout((()=>{if(!this._videoPlayer||!this._videoPlayer.el_){return}this._videoPlayer.src(this.activeResolution.sources)}),500*this.numErrors*this.numErrors);this._logErrorWithHttpStatus(e,"videoplayer.error.retry")}setPlayerHeight(e){this.playerHeight=e.height}setDuration(e){this.duration=e}get isPlaying(){return this._videoPlayer?!this._videoPlayer.paused():false}setSeeking(e){this.isSeeking=e}setIsSourceReady(e){this.isSourceReady=e}seekBack(){this._videoPlayer.trigger({type:"seekrewind",target:this._videoPlayer,manuallyTriggered:true});this._videoPlayer.currentTime(Math.max(0,this.currentTime-L["j"]))}seekForward(){this._videoPlayer.trigger({type:"seekrewind",target:this._videoPlayer,manuallyTriggered:true});this._videoPlayer.currentTime(this.currentTime+L["j"])}},zr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"isSeeking",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Vr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"isSourceReady",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Wr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"currentTime",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return 0}}),Gr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"isErrorVisible",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),Kr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"errorBody",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),$r=babelHelpers.applyDecoratedDescriptor(Br.prototype,"errorFooter",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),Xr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"duration",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Yr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"playerHeight",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Qr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"mediaSources",[Hr],{configurable:true,enumerable:true,writable:true,initializer:null}),Jr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"mediaLicenseToken",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),Zr=babelHelpers.applyDecoratedDescriptor(Br.prototype,"hlsResolution",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),en=babelHelpers.applyDecoratedDescriptor(Br.prototype,"selectedResolutionLabel",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:null}),tn=babelHelpers.applyDecoratedDescriptor(Br.prototype,"adaptiveQualityLevels",[Fr],{configurable:true,enumerable:true,writable:true,initializer:null}),babelHelpers.applyDecoratedDescriptor(Br.prototype,"setMediaSources",[u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"setMediaSources"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"showError",[u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"showError"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"hideError",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"hideError"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"_onHlsLevelSwitch",[s["a"]],Object.getOwnPropertyDescriptor(Br.prototype,"_onHlsLevelSwitch"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"_setAdaptiveQualityLevels",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"_setAdaptiveQualityLevels"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"isAdaptive",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"isAdaptive"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"handleVideoProgress",[s["a"]],Object.getOwnPropertyDescriptor(Br.prototype,"handleVideoProgress"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"handleTimeUpdate",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"handleTimeUpdate"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"adaptiveSourceTypes",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"adaptiveSourceTypes"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"adaptiveSources",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"adaptiveSources"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"supportsMSE",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"supportsMSE"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"supportsAdaptiveFixedResolutions",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"supportsAdaptiveFixedResolutions"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"adaptiveResolutions",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"adaptiveResolutions"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"resolutions",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"resolutions"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"sortedResolutions",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"sortedResolutions"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"setResolutionLabel",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"setResolutionLabel"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"activeResolution",[u["g"]],Object.getOwnPropertyDescriptor(Br.prototype,"activeResolution"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"_setHlsResolution",[u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"_setHlsResolution"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"_updatePlayerResolution",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"_updatePlayerResolution"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"setPlayerHeight",[s["a"],u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"setPlayerHeight"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"setDuration",[u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"setDuration"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"setSeeking",[u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"setSeeking"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"setIsSourceReady",[u["e"]],Object.getOwnPropertyDescriptor(Br.prototype,"setIsSourceReady"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"seekBack",[s["a"]],Object.getOwnPropertyDescriptor(Br.prototype,"seekBack"),Br.prototype),babelHelpers.applyDecoratedDescriptor(Br.prototype,"seekForward",[s["a"]],Object.getOwnPropertyDescriptor(Br.prototype,"seekForward"),Br.prototype),Br);r.d(t,"default",(function(){return fn}));var sn,ln,cn,un,pn,dn,hn;const mn=Object(w["a"])();let fn=(sn=Object(b["a"])("isPlaying","onPlayPause"),ln=u["t"].ref,sn(cn=Object(v["a"])(cn=Object(p["f"])(cn=(un=(hn=class e extends m["Component"]{constructor(e){super(e);babelHelpers.initializerDefineProperty(this,"videoPlayer",pn,this);babelHelpers.initializerDefineProperty(this,"hasPlayed",dn,this);this.isVideoPlayerInitialized=false;this.isDefaultPlaying=this.props.isDefaultPlaying;this.hasPlayed=this.isPlaying;const t=!!this.props.mediaLicenseToken;this.videojsSetupData=Object(S["a"])(L["k"],fe(this.props.muxMetadata,this.props.mediaSources,t));this.videojsSetupData.language=mn.locale.toLowerCase().replace("_","-");this.videojsSetupData.userActions=this.videojsSetupData.userActions||{};this.videojsSetupData.userActions.doubleClick=this.onVideoDoubleClick;this.store=new an(this.videojsSetupData,this.props.playerId,this.props.duration,this.props.trackingTag,this.props.assetId,this.props.onVideoProgress,this.props.videoProgressInterval,this.props.onTimeUpdate,this.props.isDefaultMuted,this.props.prioritizeDefaultMuted);this.controlBarStore=new Je;this.captionsStore=this.props.captionsStore||new Te["a"](this.props.captions,true,{[mn.locale.split("_")[0]]:1},this.props.isDefaultCaptionOn);this.captionsStore.attachPlayerStore(this.store);this.captionDisplayStore=new Ce(this.controlBarStore,this.captionsStore,this.store);if(this.props.userActivityEnabled){this.userActivityStore=this.props.userActivityStore||new ar["a"];this.userActivityStore.setControlBarStore(this.controlBarStore)}this.progressBarStore=this.props.progressBarStore||new nr["a"];this.progressBarStore.setThumbnailSprite(this.props.thumbnailSprite);this.hotkeys=[{key:"space",fn:this.withHotkeyCallback(this.togglePlayPause,L["g"].PLAY_PAUSE)},{key:"enter",fn:this.withHotkeyCallback(this.togglePlayPause,L["g"].PLAY_PAUSE)},{key:"left",fn:this.withHotkeyCallback(this.store.seekBack,L["g"].SEEK_BACK)},{key:"right",fn:this.withHotkeyCallback(this.store.seekForward,L["g"].SEEK_FORWARD)},{key:"shift+left",fn:this.withHotkeyCallback(this.store.playbackRateStore.speedDown,L["g"].SPEED_DOWN)},{key:"shift+right",fn:this.withHotkeyCallback(this.store.playbackRateStore.speedUp,L["g"].SPEED_UP)},{key:"down",fn:this.withHotkeyCallback(this.volumeDown,L["g"].VOLUME_DOWN)},{key:"up",fn:this.withHotkeyCallback(this.volumeUp,L["g"].VOLUME_UP)},{key:"m",fn:this.withHotkeyCallback(this.store.volumeStore.toggleMuted,L["g"].TOGGLE_MUTE)}];if(this.props.fullscreenEnabled){this.hotkeys.push({key:"f",fn:this.withHotkeyCallback(this.props.toggleFullscreen,L["g"].TOGGLE_FULLSCREEN)})}Array(10).fill().forEach(((e,t)=>{this.hotkeys.push({key:t.toString(),fn:this.withHotkeyCallback(this.jumpTo.bind(this,t))})}))}async componentDidMount(){this.store.setMediaSources(this.props.mediaSources,this.props.mediaLicenseToken);const e=await this.store.createVideoPlayer(this.videoElement);this.initVideoPlayer(e)}componentDidUpdate(e){if(e.isFullscreen!==this.props.isFullscreen&&this.videoPlayer){this.videoPlayer.isFullscreen(this.props.isFullscreen)}if(e.isPlaying!==this.props.isPlaying){this.syncPlayStateToPlayer()}if(e.mediaLicenseToken!==this.props.mediaLicenseToken||JSON.stringify(e.mediaSources)!==JSON.stringify(this.props.mediaSources)){this.store.setMediaSources(this.props.mediaSources,this.props.mediaLicenseToken)}}componentWillUnmount(){if(this.videoPlayer){this.stopMuxHeartbeat();this.videoPlayer.dispose()}this.unpatchPlayer();this.unregisterHotkeys();clearTimeout(this.playStateSyncTimeout)}stopMuxHeartbeat(){const{plugins:e}=this.videojsSetupData;if(e.mux){e.mux.data.video_cdn=re(this.videoPlayer.src());this.videoPlayer.mux.emit("viewend",e.mux.data)}}get isPlaying(){return this.props.isPlaying!==undefined?this.props.isPlaying:this.isDefaultPlaying}initVideoPlayer(e){this.videoPlayer=e;this.captionDisplayStore.attachPlayer(this.videoPlayer);this.captionsStore.setNativeTracksForMobile(this.store.isUsingNativeControls);this.progressBarStore.attachPlayer(this.videoPlayer);this.progressBarStore.attachPlayerStore(this.store);this.initializePlugins();this.setupPlayerEvents();this.isVideoPlayerInitialized=true}patchPlayer(){this.videoPlayerPlay=this.videoPlayer.play.bind(this.videoPlayer);this.videoPlayerPause=this.videoPlayer.pause.bind(this.videoPlayer);this.videoPlayer.play=this.play;this.videoPlayer.pause=this.pause;this.syncPlayStateReactionDisposer=Object(u["v"])((()=>this.store.isPlaying),this.syncPlayStateToPlayer,{fireImmediately:true})}unpatchPlayer(){if(this.syncPlayStateReactionDisposer){this.syncPlayStateReactionDisposer();this.syncPlayStateReactionDisposer=null}if(this.videoPlayerPlay){this.videoPlayer.play=this.videoPlayerPlay;this.videoPlayer.pause=this.videoPlayerPause;this.videoPlayerPlay=null;this.videoPlayerPause=null}}initializePlugins(){this.videoPlayer.bandwidthWatermark();this.videoPlayer.isFullscreen(this.props.isFullscreen)}setupPlayerEvents(){this.videoPlayer.ready(this.videoPlayerReady);this.videoPlayer.one("play",(()=>{x["b"].increment("udemy-video-player.viewed",{userModulo:D["a"].id%100,browser:z["b"].browser.name,browserVersion:z["b"].browser.majorVersion,platform:z["b"].os.name,platformVersion:z["b"].os.majorVersion,tech:this.videoPlayer.techName_,resolution:this.store.activeResolution.label,trackingTag:this.props.trackingTag,cdn:re(this.videoPlayer.currentSrc()),userCountry:D["a"].country,srcType:this.videoPlayer.currentType()})}));this.videoPlayer.on("sourceloading",(()=>{this.store.setSeeking(true);this.unpatchPlayer();this.store.setIsSourceReady(false)}));this.videoPlayer.on("sourceready",(()=>{this.videoPlayer.forcePlay().then((()=>{this.store.setSeeking(false);this.props.onPlayerReady(this.videoPlayer);this.patchPlayer();this.store.setIsSourceReady(true);this.store.handleTimeUpdate()}));this.videoPlayer.on("play",(()=>this.onPlayEvent(true)));this.videoPlayer.on("pause",(()=>this.onPlayEvent(false)));this.videoPlayer.on("seeking",(()=>{this.store.setSeeking(true);this.videoPlayer.on(["seeked","canplaythrough"],(()=>this.store.setSeeking(false)))}));this.videoPlayer.on("timeupdate",this.store.handleTimeUpdate)}));if(this.props.onVideoProgress){this.videoPlayer.on(["timeupdate","ended"],this.store.handleVideoProgress)}this.videoPlayer.on("dispose",this.onVideoUnavailable);this.videoPlayer.on("error",this.handlePlayerError);this.videoPlayer.tech(true).on("retryplaylist",this.handleRetryPlaylistEvent);this.videoPlayer.on("ended",(()=>{const e=this.props.onVideoEnd||this.defaultOnVideoEnd;e()}))}async handleRetryPlaylistEvent(){this.store.numPlaylistRetries++;if(this.store.numPlaylistRetries>2){const e={code:"Too many playlist retries",message:"Too many playlist retries"};this.store.handleVideoError(e)}}async handlePlayerError(){const e=this.videoPlayer.error()||{};let t=true;if(Object.values(L["m"]).includes(e.code)){t=await this.props.onPlayerError(e.code)}else if(e.code in L["l"]){const r=L["l"][e.code];t=await this.props.onPlayerError(r)}if(typeof t==="undefined"||t){this.store.handleVideoError(e)}}defaultOnVideoEnd(){this.props.exitFullscreen()}videoPlayerReady(){this.captionsStore.attachPlayer(this.videoPlayer);if(this.userActivityStore){this.userActivityStore.setupPlayerListeners(this.videoPlayer)}this.registerHotkeys();if(this.props.thumbnailSprite){const e={kind:"metadata",label:"sneakpeek",src:this.props.thumbnailSprite.vtt_url};this.videoPlayer.addRemoteTextTrack(e,true)}}onVideoUnavailable(){this.unregisterHotkeys();this.props.onVideoUnavailable()}registerHotkeys(){if(!this.props.hotkeysEnabled){return}E["a"].registerMap(this.hotkeys)}unregisterHotkeys(){if(!this.props.hotkeysEnabled){return}E["a"].unregisterMap(this.hotkeys)}withHotkeyCallback(e,t){var r=this;return function(n){n&&n.preventDefault();for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++){o[a-1]=arguments[a]}t&&r.props.onHotkey(t,n,...o);e(n,...o)}}contextMenu(e){e.preventDefault()}volumeDown(){this.store.volumeStore.volumeDown()}volumeUp(){this.store.volumeStore.volumeUp()}jumpTo(e){this.videoPlayer.currentTime(this.store.duration*e*.1)}onVideoDoubleClick(e){const t=e.relatedTarget||e.toElement||document.activeElement;const r=this.videoPlayer.el();if(t===r||t===r.querySelector("video")||t===r.querySelector(".iframeblocker")){this.props.toggleFullscreen()}}get playingStateNeedsSyncing(){return this.isPlaying!==this.store.isPlaying&&!this.isInNativePlayEventGracePeriod}onPlayEvent(e){this.hasPlayed=this.hasPlayed||e;if(!this.playingStateNeedsSyncing){if(this.props.nativeControlGracePeriod){this.isInNativePlayEventGracePeriod=true;setTimeout((()=>{this.isInNativePlayEventGracePeriod=false;this.syncPlayStateToPlayer()}),this.props.nativeControlGracePeriod)}e?this.play(true):this.pause(true)}this.onPlayStateChange(e)}onPlayStateChange(e){this.props.onPlayPauseToggled(e,this.store.currentTime)}syncPlayStateToPlayer(){clearTimeout(this.playStateSyncTimeout);try{if(!this.playingStateNeedsSyncing){return}if(this.isVideoPlayerInitialized&&this.store.isSourceReady){this.isPlaying?this.videoPlayerPlay():this.videoPlayerPause()}this.playStateSyncTimeout=setTimeout(this.syncPlayStateToPlayer,L["i"])}catch(e){}}play(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.props.onPlayPause(true,e)}pause(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.props.onPlayPause(false,e)}togglePlayPause(){if(this.isPlaying){this.pause()}else{this.play()}}resetMouseActivity(){this.videoPlayer.trigger("mousedown");this.videoPlayer.trigger("mouseup")}get center(){const e=this.store.isSourceReady&&!this.hasPlayed;return f.a.createElement("div",{className:lr.a.center},!e&&this.store.isSeeking&&f.a.createElement(a["a"],{size:"xxlarge",color:"inherit"}),e&&f.a.createElement(o["a"],{udStyle:"link",className:lr.a["play-button"],onClick:this.togglePlayPause,onMouseEnter:this.resetMouseActivity,onMouseLeave:this.resetMouseActivity,"data-purpose":"video-play-button-initial"},f.a.createElement(i.a,{label:gettext("Play video"),size:"xxlarge",className:lr.a["play-button-icon"]})),!e&&this.store.isSourceReady&&f.a.createElement(rr,{isPlaying:this.isPlaying}))}get preloadLinks(){const e=[];if(this.props.thumbnailSprite){e.push(f.a.createElement("link",{rel:"preload",key:"sneakpeek",href:this.props.thumbnailSprite.img_url,as:"image"}))}return e}get errorDisplay(){if(!this.store.isErrorVisible){return null}return f.a.createElement(Wt["d"],{player:this.videoPlayer,errorBody:this.store.errorBody||this.props.errorBody,errorFooter:this.store.errorFooter||this.props.errorFooter,store:this.store})}renderVideoElement(){if(typeof this.props.renderVideoElement==="function"){return this.props.renderVideoElement(this.video)}return this.video}get video(){return f.a.createElement("video",Object.assign({ref:e=>{this.videoElement=e},className:lr.a["video-player"],id:this.props.playerId,preload:this.props.preload,controls:true,onContextMenu:this.contextMenu,controlsList:this.props.isDownloadEnabled?"":"nodownload"},this.props.extraVideoAttributes))}render(){const e=c()(lr.a["video-wrapper"],{[or.a["user-inactive"]]:this.userActivityStore&&!this.userActivityStore.isUserActive});return f.a.createElement(p["c"],{captionsStore:this.captionsStore,captionDisplayStore:this.captionDisplayStore,controlBarStore:this.controlBarStore,userActivityStore:this.userActivityStore,videoPlayerStore:this.store,progressBarStore:this.progressBarStore},f.a.createElement(y.a,{onMeasure:this.store.setPlayerHeight},f.a.createElement("div",{className:c()(lr.a.container,"udlite-in-udheavy"),ref:this.props.setFullscreenRef},f.a.createElement("div",{className:e},this.preloadLinks,!this.store.isUsingNativeControls&&this.center,this.renderVideoElement(),this.videoPlayer&&!this.store.isUsingNativeControls&&!this.store.isErrorVisible&&f.a.createElement(Vt,{player:this.videoPlayer,isPlaying:this.isPlaying,onPlayPause:this.props.onPlayPause},this.props.children),this.errorDisplay),this.videoPlayer&&!this.store.isUsingNativeControls&&f.a.createElement(Xe,null))))}},hn.propTypes={renderVideoElement:h.a.func,playerId:h.a.string.isRequired,captions:h.a.array,captionsStore:h.a.instanceOf(Te["a"]),mediaLicenseToken:h.a.string,mediaSources:p["b"].arrayOrObservableArray.isRequired,thumbnailSprite:h.a.shape({vtt_url:h.a.string.isRequired,img_url:h.a.string.isRequired}),progressBarStore:h.a.object,toggleFullscreen:h.a.func.isRequired,isFullscreen:h.a.bool.isRequired,exitFullscreen:h.a.func.isRequired,setFullscreenRef:h.a.func.isRequired,assetId:h.a.number.isRequired,trackingTag:h.a.string,isPlaying:h.a.bool,isDefaultPlaying:h.a.bool,onPlayPause:h.a.func.isRequired,nativeControlGracePeriod:h.a.number,onPlayPauseToggled:h.a.func,onVideoEnd:h.a.func,onVideoProgress:h.a.func,videoProgressInterval:h.a.number,onTimeUpdate:h.a.func,onVideoUnavailable:h.a.func,onPlayerError:h.a.func,hotkeysEnabled:h.a.bool,onHotkey:h.a.func,duration:h.a.number,preload:h.a.oneOf(["auto","metadata","none"]),onPlayerReady:h.a.func,extraVideoAttributes:h.a.object,userActivityEnabled:h.a.bool,userActivityStore:h.a.object,errorBody:Wt["d"].propTypes.errorBody,errorFooter:Wt["d"].propTypes.errorFooter,fullscreenEnabled:h.a.bool,controlsTrackingEnabled:h.a.bool,muxMetadata:h.a.object,isDownloadEnabled:h.a.bool,isDefaultMuted:h.a.bool,prioritizeDefaultMuted:h.a.bool,isDefaultCaptionOn:h.a.bool},hn.defaultProps={renderVideoElement:undefined,captionsStore:null,mediaLicenseToken:undefined,onVideoEnd:undefined,duration:undefined,extraVideoAttributes:undefined,onVideoUnavailable:_["a"],onVideoProgress:undefined,videoProgressInterval:0,onTimeUpdate:_["a"],onPlayerError:_["a"],onPlayerReady:_["a"],hotkeysEnabled:false,onHotkey:_["a"],preload:"metadata",trackingTag:"",isPlaying:undefined,isDefaultPlaying:false,nativeControlGracePeriod:L["h"],onPlayPauseToggled:_["a"],captions:[],thumbnailSprite:undefined,userActivityEnabled:true,userActivityStore:null,errorBody:Wt["d"].defaultProps.errorBody,errorFooter:Wt["d"].defaultProps.errorFooter,fullscreenEnabled:true,controlsTrackingEnabled:false,muxMetadata:undefined,isDownloadEnabled:false,isDefaultMuted:false,prioritizeDefaultMuted:false,isDefaultCaptionOn:false,progressBarStore:null},hn),pn=babelHelpers.applyDecoratedDescriptor(un.prototype,"videoPlayer",[ln],{configurable:true,enumerable:true,writable:true,initializer:null}),dn=babelHelpers.applyDecoratedDescriptor(un.prototype,"hasPlayed",[u["t"]],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),babelHelpers.applyDecoratedDescriptor(un.prototype,"initVideoPlayer",[u["e"]],Object.getOwnPropertyDescriptor(un.prototype,"initVideoPlayer"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"handleRetryPlaylistEvent",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"handleRetryPlaylistEvent"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"handlePlayerError",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"handlePlayerError"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"defaultOnVideoEnd",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"defaultOnVideoEnd"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"videoPlayerReady",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"videoPlayerReady"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"onVideoUnavailable",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"onVideoUnavailable"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"withHotkeyCallback",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"withHotkeyCallback"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"contextMenu",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"contextMenu"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"volumeDown",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"volumeDown"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"volumeUp",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"volumeUp"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"jumpTo",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"jumpTo"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"onVideoDoubleClick",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"onVideoDoubleClick"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"onPlayEvent",[u["e"]],Object.getOwnPropertyDescriptor(un.prototype,"onPlayEvent"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"syncPlayStateToPlayer",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"syncPlayStateToPlayer"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"play",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"play"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"pause",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"pause"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"togglePlayPause",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"togglePlayPause"),un.prototype),babelHelpers.applyDecoratedDescriptor(un.prototype,"resetMouseActivity",[s["a"]],Object.getOwnPropertyDescriptor(un.prototype,"resetMouseActivity"),un.prototype),un))||cn)||cn)||cn)},"./src/udemy/js/video-player/videojs-setup/constants.js":function(e,t,r){"use strict";r.d(t,"h",(function(){return o}));r.d(t,"a",(function(){return a}));r.d(t,"b",(function(){return s}));r.d(t,"c",(function(){return l}));r.d(t,"g",(function(){return c}));r.d(t,"i",(function(){return u}));r.d(t,"f",(function(){return p}));r.d(t,"e",(function(){return d}));r.d(t,"d",(function(){return h}));var n=r("./src/udemy/js/utils/get-config-data.js");const i=Object(n["a"])();const o=/^application\/x-mpegURL|application\/vnd\.apple\.mpegurl$/i;const a=/^application\/dash\+xml$/i;const s=`https://${i.drm_fairplay_certificate_cdn_domain}/fp-cert/9e5037892023e3ccab2815a6adf7d05b.der`;const l=i.drm_license_server_url_template;const c=new RegExp("skd://(\\w{32})","i");const u=5;const p="Widevine";const d="PlayReady";const h="FairPlay"},"./src/udemy/js/video-player/videojs-setup/drm.js":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return f}));r.d(t,"c",(function(){return y}));r.d(t,"b",(function(){return C}));r.d(t,"d",(function(){return T}));var n=r("./node_modules/axios/index.js");var i=r.n(n);var o=r("./src/udemy/js/utils/memoize.js");var a=r("./src/udemy/js/utils/ud-api.js");var s=r("./src/udemy/js/utils/ud-performance.ts");var l=r("./src/udemy/js/video-player/error-display.react-component.js");var c=r("./src/udemy/js/video-player/videojs-setup/constants.js");const u="com.apple.fps.1_0";const p="com.widevine.alpha";const d="com.microsoft.playready";const h={audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.640828"',robustness:"SW_SECURE_CRYPTO"}]};const m={audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.64001F"',robustness:"SW_SECURE_CRYPTO"}]};const f={drmTechUsed:""};const g=Object(o["a"])((async(e,t)=>{if(typeof window.navigator.requestMediaKeySystemAccess==="function"){return new Promise((r=>{window.navigator.requestMediaKeySystemAccess(e,[t]).then(r).catch((()=>r(false)))}))}else if(typeof window.MSMediaKeys==="function"){return window.MSMediaKeys.isTypeSupported(e)}return false}));const y=async function(e){f.drmTechUsed=`${gettext("loading")}...`;const t=e.HlsSourceHandler.canPlayType;const r=await g(u,h);const n=await g(p,m);const i=await g(d,m);e.HlsSourceHandler.canPlayType=function(e){if(!t.call(this,e)){return false}if(c["h"].test(e)&&r){return true}if(c["a"].test(e)&&(n||i)){return true}return false}};const b=function(e){return e&&e.response&&[403].includes(e.response.status)};const v=function(){return{message:{errorBody:l["b"],errorFooter:l["c"]}}};const w=function(e,t){return c["c"].replace("{drm_type}",e).replace("{auth_token}",t).replace("{base_url}",a["e"])};const E=function(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));const n=r.match(c["g"]);if(!n){throw new Error("Invalid content ID format")}return n[1]};const S=function(t){const r=w("widevine",t);return async function(t,n,o){try{s["a"].start("drmGetLicenseForWidevine");f.drmTechUsed=c["f"];const t=await i.a.post(r,n,{headers:{"Content-type":"application/octet-stream"},responseType:"arraybuffer"});if(t.status>=400&&t.status<=599){o({});return}s["a"].end("drmGetLicenseForWidevine");o(null,new e(t.data,"base64"))}catch(e){b(e)?o(v()):o(e)}}};function _(e){const t=(new window.DOMParser).parseFromString(String.fromCharCode.apply(null,new Uint16Array(e)),"application/xml");const r=t.getElementsByTagName("HttpHeaders")[0];const n={};if(r){const e=r.getElementsByTagName("name");const t=r.getElementsByTagName("value");for(let r=0;r<e.length;r++){n[e[r].childNodes[0].nodeValue]=t[r].childNodes[0].nodeValue}}const i=t.getElementsByTagName("Challenge")[0];const o=i?window.atob(i.childNodes[0].nodeValue):undefined;return{headers:n,challenge:o}}const x=function(t){const r=w("playready",t);return async function(t,n,o){const a=_(n);try{s["a"].start("drmGetLicenseForPlayReady");f.drmTechUsed=c["e"];const t=await i.a.post(r,a.challenge,{headers:{"Content-type":"application/octet-stream"},responseType:"arraybuffer"});if(t.status>=400&&t.status<=599){o({});return}s["a"].end("drmGetLicenseForPlayReady");o(null,new e(t.data,"base64"))}catch(e){o(e)}}};const D=function(t){const r=w("fairplay",t);return async function(t,n,o,a){const l=e.from(o).toString("base64");const u=`spc=${l}&assetId=${n}`;try{s["a"].start("drmGetLicenseForFairPlay");f.drmTechUsed=c["d"];const t=await i.a.post(r,u,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});s["a"].end("drmGetLicenseForFairPlay");a(null,new e(t.data,"base64"))}catch(e){a(e)}}};const C=function(e){return{[p]:{getLicense:S(e),videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"},[d]:{getLicense:x(e)},[u]:{certificateUri:c["b"],getContentId:E,getLicense:D(e)}}};const T=function(e){const t=e.tech(true);t.on("keysessioncreated",(()=>{s["a"].start("drmLicenseProcessed")}));t.on("keystatuschange",(e=>{if(e.status==="usable"){s["a"].end("drmLicenseProcessed")}}))}}).call(this,r("./node_modules/buffer/index.js").Buffer)},"./src/udemy/js/video-player/videojs-setup/pre.js":function(e,t,r){"use strict";window.VIDEOJS_NO_DYNAMIC_STYLE=true},"./src/udemy/js/video-player/volume/volume-control.less":function(e,t,r){e.exports={"slider-focus-wrapper":"volume-control--slider-focus-wrapper--1DEg2",slider:"volume-control--slider--3BRkN","slider-inner":"volume-control--slider-inner--2f-Tu",dragging:"volume-control--dragging--124IT","invisible-unless-focused":"volume-control--invisible-unless-focused--2jCET"}},"./webpack/loaders/ud-less-variables-loader.js!./src/udemy/js/instructor/variables.less":function(e,t){e.exports={"breakpoint-instructor-desktop-min":"48em","breakpoint-instructor-mobile-max":"47.94em","color-data-primary-dark":"#427780","color-data-primary-darker":"#003440","color-data-primary-light":"#76C5D6","color-data-primary-lighter":"#97C0BE","color-data-primary":"#007791","color-data-secondary-dark":"#B59647","color-data-secondary-darker":"#C4C364","color-data-secondary-light":"#FFE48C","color-data-secondary-lighter":"#EDEACE","color-data-secondary":"#F4C150","color-data-ub-primary":"#5524D0","color-blue":"#5624D0","color-orange-dark":"#B4690E","color-primary":"#A435F0","color-danger":"#E25D3F","color-green":"#2D907F","color-blue-dark":"#180A3D","color-data-student-map-bubble-color":"#2D907F","color-data-student-map-country-fill-color":"rgba(209,215,220,0.3)","color-data-student-map-country-border-color":"#6A6F73","color-data-primary-all":"#B4690E"}},57:function(e,t){}}]);
//# sourceMappingURL=course-manage-v2-udlite-app.a2d1b629882f11e56e69.js.map